(async()=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))o(c);new MutationObserver(c=>{for(const a of c)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function n(c){const a={};return c.integrity&&(a.integrity=c.integrity),c.referrerPolicy&&(a.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?a.credentials="include":c.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(c){if(c.ep)return;c.ep=!0;const a=n(c);fetch(c.href,a)}})();var SigninMethod=(t=>(t.Google="connect-google",t.Email="connect-email",t.Wallet="connect-wallet",t))(SigninMethod||{});const DEFAULT_SIGNIN_METHODS=["connect-google","connect-email","connect-wallet"];var NETWORK=(t=>(t[t.bitcoin=128]="bitcoin",t[t.mainnet=1]="mainnet",t[t.polygon=137]="polygon",t[t.avalanche=43114]="avalanche",t[t.binancesmartchain=56]="binancesmartchain",t[t.arbitrum=42161]="arbitrum",t[t.optimism=10]="optimism",t[t.cosmos=118]="cosmos",t[t.polkadot=111]="polkadot",t[t.solana=1399811149]="solana",t[t.base=8453]="base",t[t.scroll=534352]="scroll",t))(NETWORK||{});const CHAINS_DISABLED=[118,43114,111],CHAIN_AVAILABLES=[{id:1,value:"eth",name:"Ethereum",nativeSymbol:"ETH",logo:"/assets/cryptocurrency-icons/eth.svg",rpcUrl:[{primary:!1,url:"https://eth-mainnet-public.unifra.io"},{primary:!0,url:"https://rpc.ankr.com/eth"}].find(t=>t.primary)?.url||"",type:"evm"},{id:56,value:"bsc",name:"Binance smart chain",nativeSymbol:"BNB",logo:"/assets/cryptocurrency-icons/bnb.svg",rpcUrl:[{primary:!1,url:"https://rpc.ankr.com/bsc"},{primary:!0,url:"https://binance.llamarpc.com"}].find(t=>t.primary)?.url||"",type:"evm"},{id:137,value:"polygon",name:"Polygon",nativeSymbol:"MATIC",logo:"/assets/cryptocurrency-icons/matic.svg",rpcUrl:[{primary:!1,url:"https://polygon-rpc.com"},{primary:!0,url:"https://rpc.ankr.com/polygon"}].find(t=>t.primary)?.url||"",type:"evm"},{id:42161,value:"arbitrum",name:"Arbitrum",nativeSymbol:"ARB",logo:"/assets/icons/arb.svg",rpcUrl:[{primary:!0,url:"https://arbitrum.llamarpc.com"},{primary:!1,url:"https://rpc.ankr.com/arbitrum_one"}].find(t=>t.primary)?.url||"",type:"evm"},{id:10,value:"optimism",name:"Optimism",nativeSymbol:"OP",logo:"/assets/icons/op.svg",rpcUrl:[{primary:!1,url:"https://mainnet.optimism.io"},{primary:!0,url:"https://rpc.ankr.com/optimism"}].find(t=>t.primary)?.url||"",type:"evm"},{id:8453,value:"base",name:"Base",nativeSymbol:"ETH",logo:"/assets/icons/base.svg",rpcUrl:[{primary:!1,url:"https://endpoints.omniatech.io/v1/base/mainnet/public"},{primary:!0,url:"https://base.llamarpc.com"}].find(t=>t.primary)?.url||"",type:"evm"},{id:534352,value:"scroll",name:"Scroll",nativeSymbol:"ETH",logo:"/assets/icons/scroll.svg",rpcUrl:[{primary:!1,url:"https://scroll-mainnet.public.blastapi.io"},{primary:!0,url:"https://1rpc.io/scroll"}].find(t=>t.primary)?.url||"",type:"evm"},{id:118,value:"cosmos",name:"Cosmos",nativeSymbol:"ATOM",logo:"/assets/cryptocurrency-icons/atom.svg",rpcUrl:[{primary:!0,url:"https://rpc.cosmos.network:26657"},{primary:!1,url:"https://cosmos-rpc.publicnode.com:443"}].find(t=>t.primary)?.url||"",type:"cosmos"},{id:11155111,value:"sepolia",name:"Sepolia",testnet:!0,rpcUrl:"https://ethereum-sepolia-rpc.publicnode.com",type:"evm"},{id:128,name:"Bitcoin",value:"bitcoin",nativeSymbol:"BTC",rpcUrl:[{url:"84-30-190-204.cable.dynamic.v4.ziggo.nl",primary:!1},{url:"https://rpc.coinsdo.net/btc",primary:!0}].find(t=>t.primary)?.url||"",type:"bitcoin",logo:"/assets/cryptocurrency-icons/btc.svg"},{id:1399811149,value:"solana",name:"Solana",nativeSymbol:"SOL",logo:"/assets/cryptocurrency-icons/sol.svg",rpcUrl:[{primary:!0,url:"https://api.devnet.solana.com"}].find(t=>t.primary)?.url||"",type:"solana"}].filter(t=>!CHAINS_DISABLED.includes(t.id)),NETWORK_DEFAULT=10,CHAIN_DEFAULT=CHAIN_AVAILABLES.find(t=>t.id===NETWORK_DEFAULT)||{id:NETWORK_DEFAULT,name:"default",value:"default",rpcUrl:"",type:"evm"};CHAIN_AVAILABLES.find(t=>t.id===80001);var KEYS=(t=>(t.AUTH_SIGNATURE_KEY="hexa-signature",t.AUTH_SIGNATURE_VALUE="hexa-signature-value",t.STORAGE_PRIVATEKEY_KEY="hexa-private-key",t.STORAGE_SEED_KEY="hexa-seed-key",t.STORAGE_SECRET_KEY="hexa-secret",t.STORAGE_BACKUP_KEY="hexa-backup",t.STORAGE_SKIP_BACKUP_KEY="hexa-skip",t.STORAGE_EMAIL_FOR_SIGNIN_KEY="hexa-connect-email-for-sign-in",t.URL_QUERYPARAM_FINISH_SIGNUP="finishSignUp",t.STORAGE_AUTH_METHOD_KEY="hexa-auth-method",t))(KEYS||{});const MAX_SKIP_BACKUP_TIME=15*60*1e3,global$1=globalThis||void 0||self;function getDefaultExportFromCjs$2(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var browser$f={exports:{}},process=browser$f.exports={},cachedSetTimeout,cachedClearTimeout;function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?cachedSetTimeout=setTimeout:cachedSetTimeout=defaultSetTimout}catch{cachedSetTimeout=defaultSetTimout}try{typeof clearTimeout=="function"?cachedClearTimeout=clearTimeout:cachedClearTimeout=defaultClearTimeout}catch{cachedClearTimeout=defaultClearTimeout}})();function runTimeout(t){if(cachedSetTimeout===setTimeout)return setTimeout(t,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(t,0);try{return cachedSetTimeout(t,0)}catch{try{return cachedSetTimeout.call(null,t,0)}catch{return cachedSetTimeout.call(this,t,0)}}}function runClearTimeout(t){if(cachedClearTimeout===clearTimeout)return clearTimeout(t);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(t);try{return cachedClearTimeout(t)}catch{try{return cachedClearTimeout.call(null,t)}catch{return cachedClearTimeout.call(this,t)}}}var queue=[],draining=!1,currentQueue,queueIndex=-1;function cleanUpNextTick(){!draining||!currentQueue||(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var t=runTimeout(cleanUpNextTick);draining=!0;for(var e=queue.length;e;){for(currentQueue=queue,queue=[];++queueIndex<e;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,e=queue.length}currentQueue=null,draining=!1,runClearTimeout(t)}}process.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];queue.push(new Item(t,e)),queue.length===1&&!draining&&runTimeout(drainQueue)};function Item(t,e){this.fun=t,this.array=e}Item.prototype.run=function(){this.fun.apply(null,this.array)};process.title="browser";process.browser=!0;process.env={};process.argv=[];process.version="";process.versions={};function noop$3(){}process.on=noop$3;process.addListener=noop$3;process.once=noop$3;process.off=noop$3;process.removeListener=noop$3;process.removeAllListeners=noop$3;process.emit=noop$3;process.prependListener=noop$3;process.prependOnceListener=noop$3;process.listeners=function(t){return[]};process.binding=function(t){throw new Error("process.binding is not supported")};process.cwd=function(){return"/"};process.chdir=function(t){throw new Error("process.chdir is not supported")};process.umask=function(){return 0};var browserExports$1=browser$f.exports;const process$1=getDefaultExportFromCjs$2(browserExports$1);var define_process_env_default$1={};const CONSTANTS={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};const assert$p=function(t,e){if(!t)throw assertionError(e)},assertionError=function(t){return new Error("Firebase Database ("+CONSTANTS.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};const stringToByteArray$1=function(t){const e=[];let n=0;for(let o=0;o<t.length;o++){let c=t.charCodeAt(o);c<128?e[n++]=c:c<2048?(e[n++]=c>>6|192,e[n++]=c&63|128):(c&64512)===55296&&o+1<t.length&&(t.charCodeAt(o+1)&64512)===56320?(c=65536+((c&1023)<<10)+(t.charCodeAt(++o)&1023),e[n++]=c>>18|240,e[n++]=c>>12&63|128,e[n++]=c>>6&63|128,e[n++]=c&63|128):(e[n++]=c>>12|224,e[n++]=c>>6&63|128,e[n++]=c&63|128)}return e},byteArrayToString=function(t){const e=[];let n=0,o=0;for(;n<t.length;){const c=t[n++];if(c<128)e[o++]=String.fromCharCode(c);else if(c>191&&c<224){const a=t[n++];e[o++]=String.fromCharCode((c&31)<<6|a&63)}else if(c>239&&c<365){const a=t[n++],l=t[n++],b=t[n++],v=((c&7)<<18|(a&63)<<12|(l&63)<<6|b&63)-65536;e[o++]=String.fromCharCode(55296+(v>>10)),e[o++]=String.fromCharCode(56320+(v&1023))}else{const a=t[n++],l=t[n++];e[o++]=String.fromCharCode((c&15)<<12|(a&63)<<6|l&63)}}return e.join("")},base64={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,o=[];for(let c=0;c<t.length;c+=3){const a=t[c],l=c+1<t.length,b=l?t[c+1]:0,v=c+2<t.length,A=v?t[c+2]:0,S=a>>2,M=(a&3)<<4|b>>4;let B=(b&15)<<2|A>>6,P=A&63;v||(P=64,l||(B=64)),o.push(n[S],n[M],n[B],n[P])}return o.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(stringToByteArray$1(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):byteArrayToString(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,o=[];for(let c=0;c<t.length;){const a=n[t.charAt(c++)],b=c<t.length?n[t.charAt(c)]:0;++c;const A=c<t.length?n[t.charAt(c)]:64;++c;const M=c<t.length?n[t.charAt(c)]:64;if(++c,a==null||b==null||A==null||M==null)throw new DecodeBase64StringError;const B=a<<2|b>>4;if(o.push(B),A!==64){const P=b<<4&240|A>>2;if(o.push(P),M!==64){const L=A<<6&192|M;o.push(L)}}}return o},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class DecodeBase64StringError extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const base64Encode=function(t){const e=stringToByteArray$1(t);return base64.encodeByteArray(e,!0)},base64urlEncodeWithoutPadding=function(t){return base64Encode(t).replace(/\./g,"")},base64Decode=function(t){try{return base64.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function deepCopy$1(t){return deepExtend(void 0,t)}function deepExtend(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!isValidKey$1(n)||(t[n]=deepExtend(t[n],e[n]));return t}function isValidKey$1(t){return t!=="__proto__"}function getGlobal$1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global$1<"u")return global$1;throw new Error("Unable to locate global object.")}const getDefaultsFromGlobal=()=>getGlobal$1().__FIREBASE_DEFAULTS__,getDefaultsFromEnvVariable=()=>{if(typeof process$1>"u"||typeof define_process_env_default$1>"u")return;const t=define_process_env_default$1.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},getDefaultsFromCookie=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&base64Decode(t[1]);return e&&JSON.parse(e)},getDefaults=()=>{try{return getDefaultsFromGlobal()||getDefaultsFromEnvVariable()||getDefaultsFromCookie()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},getDefaultEmulatorHost=t=>{var e,n;return(n=(e=getDefaults())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},getDefaultEmulatorHostnameAndPort=t=>{const e=getDefaultEmulatorHost(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const o=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),o]:[e.substring(0,n),o]},getDefaultAppConfig=()=>{var t;return(t=getDefaults())===null||t===void 0?void 0:t.config},getExperimentalSetting=t=>{var e;return(e=getDefaults())===null||e===void 0?void 0:e[`_${t}`]};class Deferred{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,o)=>{n?this.reject(n):this.resolve(o),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,o))}}}function createMockUserToken(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},o=e||"demo-project",c=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${o}`,aud:o,iat:c,exp:c+3600,auth_time:c,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[base64urlEncodeWithoutPadding(JSON.stringify(n)),base64urlEncodeWithoutPadding(JSON.stringify(l)),""].join(".")}function getUA(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function isMobileCordova(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(getUA())}function isBrowserExtension(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function isReactNative(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function isIE(){const t=getUA();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function isNodeSdk(){return CONSTANTS.NODE_ADMIN===!0}function isIndexedDBAvailable(){try{return typeof indexedDB=="object"}catch{return!1}}function validateIndexedDBOpenable(){return new Promise((t,e)=>{try{let n=!0;const o="validate-browser-context-for-indexeddb-analytics-module",c=self.indexedDB.open(o);c.onsuccess=()=>{c.result.close(),n||self.indexedDB.deleteDatabase(o),t(!0)},c.onupgradeneeded=()=>{n=!1},c.onerror=()=>{var a;e(((a=c.error)===null||a===void 0?void 0:a.message)||"")}}catch(n){e(n)}})}const ERROR_NAME="FirebaseError";class FirebaseError extends Error{constructor(e,n,o){super(n),this.code=e,this.customData=o,this.name=ERROR_NAME,Object.setPrototypeOf(this,FirebaseError.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ErrorFactory.prototype.create)}}class ErrorFactory{constructor(e,n,o){this.service=e,this.serviceName=n,this.errors=o}create(e,...n){const o=n[0]||{},c=`${this.service}/${e}`,a=this.errors[e],l=a?replaceTemplate(a,o):"Error",b=`${this.serviceName}: ${l} (${c}).`;return new FirebaseError(c,b,o)}}function replaceTemplate(t,e){return t.replace(PATTERN,(n,o)=>{const c=e[o];return c!=null?String(c):`<${o}?>`})}const PATTERN=/\{\$([^}]+)}/g;function jsonEval(t){return JSON.parse(t)}function stringify$2(t){return JSON.stringify(t)}const decode$n=function(t){let e={},n={},o={},c="";try{const a=t.split(".");e=jsonEval(base64Decode(a[0])||""),n=jsonEval(base64Decode(a[1])||""),c=a[2],o=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:o,signature:c}},isValidFormat=function(t){const e=decode$n(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},isAdmin=function(t){const e=decode$n(t).claims;return typeof e=="object"&&e.admin===!0};function contains(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function safeGet(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function isEmpty(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function map(t,e,n){const o={};for(const c in t)Object.prototype.hasOwnProperty.call(t,c)&&(o[c]=e.call(n,t[c],c,t));return o}function deepEqual(t,e){if(t===e)return!0;const n=Object.keys(t),o=Object.keys(e);for(const c of n){if(!o.includes(c))return!1;const a=t[c],l=e[c];if(isObject$2(a)&&isObject$2(l)){if(!deepEqual(a,l))return!1}else if(a!==l)return!1}for(const c of o)if(!n.includes(c))return!1;return!0}function isObject$2(t){return t!==null&&typeof t=="object"}function querystring(t){const e=[];for(const[n,o]of Object.entries(t))Array.isArray(o)?o.forEach(c=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(c))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(o));return e.length?"&"+e.join("&"):""}function querystringDecode(t){const e={};return t.replace(/^\?/,"").split("&").forEach(o=>{if(o){const[c,a]=o.split("=");e[decodeURIComponent(c)]=decodeURIComponent(a)}}),e}function extractQuerystring(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}let Sha1$1=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const o=this.W_;if(typeof e=="string")for(let M=0;M<16;M++)o[M]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let M=0;M<16;M++)o[M]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let M=16;M<80;M++){const B=o[M-3]^o[M-8]^o[M-14]^o[M-16];o[M]=(B<<1|B>>>31)&4294967295}let c=this.chain_[0],a=this.chain_[1],l=this.chain_[2],b=this.chain_[3],v=this.chain_[4],A,S;for(let M=0;M<80;M++){M<40?M<20?(A=b^a&(l^b),S=1518500249):(A=a^l^b,S=1859775393):M<60?(A=a&l|b&(a|l),S=2400959708):(A=a^l^b,S=3395469782);const B=(c<<5|c>>>27)+A+v+S+o[M]&4294967295;v=b,b=l,l=(a<<30|a>>>2)&4294967295,a=c,c=B}this.chain_[0]=this.chain_[0]+c&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+l&4294967295,this.chain_[3]=this.chain_[3]+b&4294967295,this.chain_[4]=this.chain_[4]+v&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const o=n-this.blockSize;let c=0;const a=this.buf_;let l=this.inbuf_;for(;c<n;){if(l===0)for(;c<=o;)this.compress_(e,c),c+=this.blockSize;if(typeof e=="string"){for(;c<n;)if(a[l]=e.charCodeAt(c),++l,++c,l===this.blockSize){this.compress_(a),l=0;break}}else for(;c<n;)if(a[l]=e[c],++l,++c,l===this.blockSize){this.compress_(a),l=0;break}}this.inbuf_=l,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let c=this.blockSize-1;c>=56;c--)this.buf_[c]=n&255,n/=256;this.compress_(this.buf_);let o=0;for(let c=0;c<5;c++)for(let a=24;a>=0;a-=8)e[o]=this.chain_[c]>>a&255,++o;return e}};function createSubscribe(t,e){const n=new ObserverProxy(t,e);return n.subscribe.bind(n)}class ObserverProxy{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(o=>{this.error(o)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,o){let c;if(e===void 0&&n===void 0&&o===void 0)throw new Error("Missing Observer.");implementsAnyMethods(e,["next","error","complete"])?c=e:c={next:e,error:n,complete:o},c.next===void 0&&(c.next=noop$2),c.error===void 0&&(c.error=noop$2),c.complete===void 0&&(c.complete=noop$2);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?c.error(this.finalError):c.complete()}catch{}}),this.observers.push(c),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(o){typeof console<"u"&&console.error&&console.error(o)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function implementsAnyMethods(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function noop$2(){}function errorPrefix(t,e){return`${t} failed: ${e} argument `}const stringToByteArray=function(t){const e=[];let n=0;for(let o=0;o<t.length;o++){let c=t.charCodeAt(o);if(c>=55296&&c<=56319){const a=c-55296;o++,assert$p(o<t.length,"Surrogate pair missing trail surrogate.");const l=t.charCodeAt(o)-56320;c=65536+(a<<10)+l}c<128?e[n++]=c:c<2048?(e[n++]=c>>6|192,e[n++]=c&63|128):c<65536?(e[n++]=c>>12|224,e[n++]=c>>6&63|128,e[n++]=c&63|128):(e[n++]=c>>18|240,e[n++]=c>>12&63|128,e[n++]=c>>6&63|128,e[n++]=c&63|128)}return e},stringLength=function(t){let e=0;for(let n=0;n<t.length;n++){const o=t.charCodeAt(n);o<128?e++:o<2048?e+=2:o>=55296&&o<=56319?(e+=4,n++):e+=3}return e};function getModularInstance(t){return t&&t._delegate?t._delegate:t}class Component{constructor(e,n,o){this.name=e,this.instanceFactory=n,this.type=o,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const DEFAULT_ENTRY_NAME$1="[DEFAULT]";let Provider$1=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const o=new Deferred;if(this.instancesDeferred.set(n,o),this.isInitialized(n)||this.shouldAutoInitialize())try{const c=this.getOrInitializeService({instanceIdentifier:n});c&&o.resolve(c)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const o=this.normalizeInstanceIdentifier(e?.identifier),c=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(o)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:o})}catch(a){if(c)return null;throw a}else{if(c)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(isComponentEager(e))try{this.getOrInitializeService({instanceIdentifier:DEFAULT_ENTRY_NAME$1})}catch{}for(const[n,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:c});o.resolve(a)}catch{}}}}clearInstance(e=DEFAULT_ENTRY_NAME$1){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=DEFAULT_ENTRY_NAME$1){return this.instances.has(e)}getOptions(e=DEFAULT_ENTRY_NAME$1){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,o=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(o))throw Error(`${this.name}(${o}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const c=this.getOrInitializeService({instanceIdentifier:o,options:n});for(const[a,l]of this.instancesDeferred.entries()){const b=this.normalizeInstanceIdentifier(a);o===b&&l.resolve(c)}return c}onInit(e,n){var o;const c=this.normalizeInstanceIdentifier(n),a=(o=this.onInitCallbacks.get(c))!==null&&o!==void 0?o:new Set;a.add(e),this.onInitCallbacks.set(c,a);const l=this.instances.get(c);return l&&e(l,c),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const o=this.onInitCallbacks.get(n);if(o)for(const c of o)try{c(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let o=this.instances.get(e);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:normalizeIdentifierForFactory(e),options:n}),this.instances.set(e,o),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(o,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,o)}catch{}return o||null}normalizeInstanceIdentifier(e=DEFAULT_ENTRY_NAME$1){return this.component?this.component.multipleInstances?e:DEFAULT_ENTRY_NAME$1:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function normalizeIdentifierForFactory(t){return t===DEFAULT_ENTRY_NAME$1?void 0:t}function isComponentEager(t){return t.instantiationMode==="EAGER"}class ComponentContainer{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Provider$1(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var LogLevel$1;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(LogLevel$1||(LogLevel$1={}));const levelStringToEnum={debug:LogLevel$1.DEBUG,verbose:LogLevel$1.VERBOSE,info:LogLevel$1.INFO,warn:LogLevel$1.WARN,error:LogLevel$1.ERROR,silent:LogLevel$1.SILENT},defaultLogLevel=LogLevel$1.INFO,ConsoleMethod={[LogLevel$1.DEBUG]:"log",[LogLevel$1.VERBOSE]:"log",[LogLevel$1.INFO]:"info",[LogLevel$1.WARN]:"warn",[LogLevel$1.ERROR]:"error"},defaultLogHandler=(t,e,...n)=>{if(e<t.logLevel)return;const o=new Date().toISOString(),c=ConsoleMethod[e];if(c)console[c](`[${o}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let Logger$2=class{constructor(e){this.name=e,this._logLevel=defaultLogLevel,this._logHandler=defaultLogHandler,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in LogLevel$1))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?levelStringToEnum[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel$1.DEBUG,...e),this._logHandler(this,LogLevel$1.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel$1.VERBOSE,...e),this._logHandler(this,LogLevel$1.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel$1.INFO,...e),this._logHandler(this,LogLevel$1.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel$1.WARN,...e),this._logHandler(this,LogLevel$1.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel$1.ERROR,...e),this._logHandler(this,LogLevel$1.ERROR,...e)}};const instanceOfAny=(t,e)=>e.some(n=>t instanceof n);let idbProxyableTypes,cursorAdvanceMethods;function getIdbProxyableTypes(){return idbProxyableTypes||(idbProxyableTypes=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function getCursorAdvanceMethods(){return cursorAdvanceMethods||(cursorAdvanceMethods=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const cursorRequestMap=new WeakMap,transactionDoneMap=new WeakMap,transactionStoreNamesMap=new WeakMap,transformCache=new WeakMap,reverseTransformCache=new WeakMap;function promisifyRequest(t){const e=new Promise((n,o)=>{const c=()=>{t.removeEventListener("success",a),t.removeEventListener("error",l)},a=()=>{n(wrap(t.result)),c()},l=()=>{o(t.error),c()};t.addEventListener("success",a),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&cursorRequestMap.set(n,t)}).catch(()=>{}),reverseTransformCache.set(e,t),e}function cacheDonePromiseForTransaction(t){if(transactionDoneMap.has(t))return;const e=new Promise((n,o)=>{const c=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",l),t.removeEventListener("abort",l)},a=()=>{n(),c()},l=()=>{o(t.error||new DOMException("AbortError","AbortError")),c()};t.addEventListener("complete",a),t.addEventListener("error",l),t.addEventListener("abort",l)});transactionDoneMap.set(t,e)}let idbProxyTraps={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return transactionDoneMap.get(t);if(e==="objectStoreNames")return t.objectStoreNames||transactionStoreNamesMap.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return wrap(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function replaceTraps(t){idbProxyTraps=t(idbProxyTraps)}function wrapFunction(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const o=t.call(unwrap(this),e,...n);return transactionStoreNamesMap.set(o,e.sort?e.sort():[e]),wrap(o)}:getCursorAdvanceMethods().includes(t)?function(...e){return t.apply(unwrap(this),e),wrap(cursorRequestMap.get(this))}:function(...e){return wrap(t.apply(unwrap(this),e))}}function transformCachableValue(t){return typeof t=="function"?wrapFunction(t):(t instanceof IDBTransaction&&cacheDonePromiseForTransaction(t),instanceOfAny(t,getIdbProxyableTypes())?new Proxy(t,idbProxyTraps):t)}function wrap(t){if(t instanceof IDBRequest)return promisifyRequest(t);if(transformCache.has(t))return transformCache.get(t);const e=transformCachableValue(t);return e!==t&&(transformCache.set(t,e),reverseTransformCache.set(e,t)),e}const unwrap=t=>reverseTransformCache.get(t);function openDB(t,e,{blocked:n,upgrade:o,blocking:c,terminated:a}={}){const l=indexedDB.open(t,e),b=wrap(l);return o&&l.addEventListener("upgradeneeded",v=>{o(wrap(l.result),v.oldVersion,v.newVersion,wrap(l.transaction),v)}),n&&l.addEventListener("blocked",v=>n(v.oldVersion,v.newVersion,v)),b.then(v=>{a&&v.addEventListener("close",()=>a()),c&&v.addEventListener("versionchange",A=>c(A.oldVersion,A.newVersion,A))}).catch(()=>{}),b}const readMethods=["get","getKey","getAll","getAllKeys","count"],writeMethods=["put","add","delete","clear"],cachedMethods=new Map;function getMethod(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(cachedMethods.get(e))return cachedMethods.get(e);const n=e.replace(/FromIndex$/,""),o=e!==n,c=writeMethods.includes(n);if(!(n in(o?IDBIndex:IDBObjectStore).prototype)||!(c||readMethods.includes(n)))return;const a=async function(l,...b){const v=this.transaction(l,c?"readwrite":"readonly");let A=v.store;return o&&(A=A.index(b.shift())),(await Promise.all([A[n](...b),c&&v.done]))[0]};return cachedMethods.set(e,a),a}replaceTraps(t=>({...t,get:(e,n,o)=>getMethod(e,n)||t.get(e,n,o),has:(e,n)=>!!getMethod(e,n)||t.has(e,n)}));class PlatformLoggerServiceImpl{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(isVersionServiceProvider(n)){const o=n.getImmediate();return`${o.library}/${o.version}`}else return null}).filter(n=>n).join(" ")}}function isVersionServiceProvider(t){const e=t.getComponent();return e?.type==="VERSION"}const name$o="@firebase/app",version$1$1="0.10.0";const logger$y=new Logger$2("@firebase/app"),name$n="@firebase/app-compat",name$m="@firebase/analytics-compat",name$l="@firebase/analytics",name$k="@firebase/app-check-compat",name$j="@firebase/app-check",name$i="@firebase/auth",name$h="@firebase/auth-compat",name$g="@firebase/database",name$f="@firebase/database-compat",name$e="@firebase/functions",name$d="@firebase/functions-compat",name$c="@firebase/installations",name$b="@firebase/installations-compat",name$a="@firebase/messaging",name$9="@firebase/messaging-compat",name$8="@firebase/performance",name$7="@firebase/performance-compat",name$6="@firebase/remote-config",name$5="@firebase/remote-config-compat",name$4="@firebase/storage",name$3$1="@firebase/storage-compat",name$2$1="@firebase/firestore",name$1$1="@firebase/firestore-compat",name$p="firebase",version$t="10.10.0";const DEFAULT_ENTRY_NAME="[DEFAULT]",PLATFORM_LOG_STRING={[name$o]:"fire-core",[name$n]:"fire-core-compat",[name$l]:"fire-analytics",[name$m]:"fire-analytics-compat",[name$j]:"fire-app-check",[name$k]:"fire-app-check-compat",[name$i]:"fire-auth",[name$h]:"fire-auth-compat",[name$g]:"fire-rtdb",[name$f]:"fire-rtdb-compat",[name$e]:"fire-fn",[name$d]:"fire-fn-compat",[name$c]:"fire-iid",[name$b]:"fire-iid-compat",[name$a]:"fire-fcm",[name$9]:"fire-fcm-compat",[name$8]:"fire-perf",[name$7]:"fire-perf-compat",[name$6]:"fire-rc",[name$5]:"fire-rc-compat",[name$4]:"fire-gcs",[name$3$1]:"fire-gcs-compat",[name$2$1]:"fire-fst",[name$1$1]:"fire-fst-compat","fire-js":"fire-js",[name$p]:"fire-js-all"};const _apps=new Map,_serverApps=new Map,_components=new Map;function _addComponent(t,e){try{t.container.addComponent(e)}catch(n){logger$y.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function _registerComponent(t){const e=t.name;if(_components.has(e))return logger$y.debug(`There were multiple attempts to register component ${e}.`),!1;_components.set(e,t);for(const n of _apps.values())_addComponent(n,t);for(const n of _serverApps.values())_addComponent(n,t);return!0}function _getProvider(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function _isFirebaseServerApp(t){return t.settings!==void 0}const ERRORS$1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ERROR_FACTORY=new ErrorFactory("app","Firebase",ERRORS$1);class FirebaseAppImpl{constructor(e,n,o){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=o,this.container.addComponent(new Component("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ERROR_FACTORY.create("app-deleted",{appName:this._name})}}const SDK_VERSION$1=version$t;function initializeApp(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const o=Object.assign({name:DEFAULT_ENTRY_NAME,automaticDataCollectionEnabled:!1},e),c=o.name;if(typeof c!="string"||!c)throw ERROR_FACTORY.create("bad-app-name",{appName:String(c)});if(n||(n=getDefaultAppConfig()),!n)throw ERROR_FACTORY.create("no-options");const a=_apps.get(c);if(a){if(deepEqual(n,a.options)&&deepEqual(o,a.config))return a;throw ERROR_FACTORY.create("duplicate-app",{appName:c})}const l=new ComponentContainer(c);for(const v of _components.values())l.addComponent(v);const b=new FirebaseAppImpl(n,o,l);return _apps.set(c,b),b}function getApp(t=DEFAULT_ENTRY_NAME){const e=_apps.get(t);if(!e&&t===DEFAULT_ENTRY_NAME&&getDefaultAppConfig())return initializeApp();if(!e)throw ERROR_FACTORY.create("no-app",{appName:t});return e}function registerVersion(t,e,n){var o;let c=(o=PLATFORM_LOG_STRING[t])!==null&&o!==void 0?o:t;n&&(c+=`-${n}`);const a=c.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const b=[`Unable to register library "${c}" with version "${e}":`];a&&b.push(`library name "${c}" contains illegal characters (whitespace or "/")`),a&&l&&b.push("and"),l&&b.push(`version name "${e}" contains illegal characters (whitespace or "/")`),logger$y.warn(b.join(" "));return}_registerComponent(new Component(`${c}-version`,()=>({library:c,version:e}),"VERSION"))}const DB_NAME$1="firebase-heartbeat-database",DB_VERSION$1=1,STORE_NAME="firebase-heartbeat-store";let dbPromise=null;function getDbPromise(){return dbPromise||(dbPromise=openDB(DB_NAME$1,DB_VERSION$1,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(STORE_NAME)}catch(n){console.warn(n)}}}}).catch(t=>{throw ERROR_FACTORY.create("idb-open",{originalErrorMessage:t.message})})),dbPromise}async function readHeartbeatsFromIndexedDB(t){try{const n=(await getDbPromise()).transaction(STORE_NAME),o=await n.objectStore(STORE_NAME).get(computeKey(t));return await n.done,o}catch(e){if(e instanceof FirebaseError)logger$y.warn(e.message);else{const n=ERROR_FACTORY.create("idb-get",{originalErrorMessage:e?.message});logger$y.warn(n.message)}}}async function writeHeartbeatsToIndexedDB(t,e){try{const o=(await getDbPromise()).transaction(STORE_NAME,"readwrite");await o.objectStore(STORE_NAME).put(e,computeKey(t)),await o.done}catch(n){if(n instanceof FirebaseError)logger$y.warn(n.message);else{const o=ERROR_FACTORY.create("idb-set",{originalErrorMessage:n?.message});logger$y.warn(o.message)}}}function computeKey(t){return`${t.name}!${t.options.appId}`}const MAX_HEADER_BYTES=1024,STORED_HEARTBEAT_RETENTION_MAX_MILLIS=30*24*60*60*1e3;class HeartbeatServiceImpl{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new HeartbeatStorageImpl(n),this._heartbeatsCachePromise=this._storage.read().then(o=>(this._heartbeatsCache=o,o))}async triggerHeartbeat(){var e,n;const c=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=getUTCDateString();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(l=>l.date===a)))return this._heartbeatsCache.heartbeats.push({date:a,agent:c}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(l=>{const b=new Date(l.date).valueOf();return Date.now()-b<=STORED_HEARTBEAT_RETENTION_MAX_MILLIS}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=getUTCDateString(),{heartbeatsToSend:o,unsentEntries:c}=extractHeartbeatsForHeader(this._heartbeatsCache.heartbeats),a=base64urlEncodeWithoutPadding(JSON.stringify({version:2,heartbeats:o}));return this._heartbeatsCache.lastSentHeartbeatDate=n,c.length>0?(this._heartbeatsCache.heartbeats=c,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}}function getUTCDateString(){return new Date().toISOString().substring(0,10)}function extractHeartbeatsForHeader(t,e=MAX_HEADER_BYTES){const n=[];let o=t.slice();for(const c of t){const a=n.find(l=>l.agent===c.agent);if(a){if(a.dates.push(c.date),countBytes(n)>e){a.dates.pop();break}}else if(n.push({agent:c.agent,dates:[c.date]}),countBytes(n)>e){n.pop();break}o=o.slice(1)}return{heartbeatsToSend:n,unsentEntries:o}}class HeartbeatStorageImpl{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return isIndexedDBAvailable()?validateIndexedDBOpenable().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await readHeartbeatsFromIndexedDB(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const c=await this.read();return writeHeartbeatsToIndexedDB(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:c.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const c=await this.read();return writeHeartbeatsToIndexedDB(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:c.lastSentHeartbeatDate,heartbeats:[...c.heartbeats,...e.heartbeats]})}else return}}function countBytes(t){return base64urlEncodeWithoutPadding(JSON.stringify({version:2,heartbeats:t})).length}function registerCoreComponents(t){_registerComponent(new Component("platform-logger",e=>new PlatformLoggerServiceImpl(e),"PRIVATE")),_registerComponent(new Component("heartbeat",e=>new HeartbeatServiceImpl(e),"PRIVATE")),registerVersion(name$o,version$1$1,t),registerVersion(name$o,version$1$1,"esm2017"),registerVersion("fire-js","")}registerCoreComponents("");function __rest(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(t);c<o.length;c++)e.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(t,o[c])&&(n[o[c]]=t[o[c]]);return n}typeof SuppressedError=="function"&&SuppressedError;function _prodErrorMap(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const prodErrorMap=_prodErrorMap,_DEFAULT_AUTH_ERROR_FACTORY=new ErrorFactory("auth","Firebase",_prodErrorMap());const logClient$1=new Logger$2("@firebase/auth");function _logWarn(t,...e){logClient$1.logLevel<=LogLevel$1.WARN&&logClient$1.warn(`Auth (${SDK_VERSION$1}): ${t}`,...e)}function _logError(t,...e){logClient$1.logLevel<=LogLevel$1.ERROR&&logClient$1.error(`Auth (${SDK_VERSION$1}): ${t}`,...e)}function _fail(t,...e){throw createErrorInternal(t,...e)}function _createError(t,...e){return createErrorInternal(t,...e)}function _errorWithCustomMessage(t,e,n){const o=Object.assign(Object.assign({},prodErrorMap()),{[e]:n});return new ErrorFactory("auth","Firebase",o).create(e,{appName:t.name})}function _serverAppCurrentUserOperationNotSupportedError(t){return _errorWithCustomMessage(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function _assertInstanceOf(t,e,n){const o=n;if(!(e instanceof o))throw o.name!==e.constructor.name&&_fail(t,"argument-error"),_errorWithCustomMessage(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function createErrorInternal(t,...e){if(typeof t!="string"){const n=e[0],o=[...e.slice(1)];return o[0]&&(o[0].appName=t.name),t._errorFactory.create(n,...o)}return _DEFAULT_AUTH_ERROR_FACTORY.create(t,...e)}function _assert$1(t,e,...n){if(!t)throw createErrorInternal(e,...n)}function debugFail(t){const e="INTERNAL ASSERTION FAILED: "+t;throw _logError(e),new Error(e)}function debugAssert(t,e){t||debugFail(e)}function _getCurrentUrl(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function _isHttpOrHttps(){return _getCurrentScheme()==="http:"||_getCurrentScheme()==="https:"}function _getCurrentScheme(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function _isOnline(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(_isHttpOrHttps()||isBrowserExtension()||"connection"in navigator)?navigator.onLine:!0}function _getUserLanguage(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class Delay{constructor(e,n){this.shortDelay=e,this.longDelay=n,debugAssert(n>e,"Short delay should be less than long delay!"),this.isMobile=isMobileCordova()||isReactNative()}get(){return _isOnline()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function _emulatorUrl(t,e){debugAssert(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class FetchProvider{static initialize(e,n,o){this.fetchImpl=e,n&&(this.headersImpl=n),o&&(this.responseImpl=o)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;debugFail("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;debugFail("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;debugFail("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const SERVER_ERROR_MAP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const DEFAULT_API_TIMEOUT_MS=new Delay(3e4,6e4);function _addTidIfNecessary(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function _performApiRequest(t,e,n,o,c={}){return _performFetchWithErrorHandling(t,c,async()=>{let a={},l={};o&&(e==="GET"?l=o:a={body:JSON.stringify(o)});const b=querystring(Object.assign({key:t.config.apiKey},l)).slice(1),v=await t._getAdditionalHeaders();return v["Content-Type"]="application/json",t.languageCode&&(v["X-Firebase-Locale"]=t.languageCode),FetchProvider.fetch()(_getFinalTarget(t,t.config.apiHost,n,b),Object.assign({method:e,headers:v,referrerPolicy:"no-referrer"},a))})}async function _performFetchWithErrorHandling(t,e,n){t._canInitEmulator=!1;const o=Object.assign(Object.assign({},SERVER_ERROR_MAP),e);try{const c=new NetworkTimeout(t),a=await Promise.race([n(),c.promise]);c.clearNetworkTimeout();const l=await a.json();if("needConfirmation"in l)throw _makeTaggedError(t,"account-exists-with-different-credential",l);if(a.ok&&!("errorMessage"in l))return l;{const b=a.ok?l.errorMessage:l.error.message,[v,A]=b.split(" : ");if(v==="FEDERATED_USER_ID_ALREADY_LINKED")throw _makeTaggedError(t,"credential-already-in-use",l);if(v==="EMAIL_EXISTS")throw _makeTaggedError(t,"email-already-in-use",l);if(v==="USER_DISABLED")throw _makeTaggedError(t,"user-disabled",l);const S=o[v]||v.toLowerCase().replace(/[_\s]+/g,"-");if(A)throw _errorWithCustomMessage(t,S,A);_fail(t,S)}}catch(c){if(c instanceof FirebaseError)throw c;_fail(t,"network-request-failed",{message:String(c)})}}async function _performSignInRequest(t,e,n,o,c={}){const a=await _performApiRequest(t,e,n,o,c);return"mfaPendingCredential"in a&&_fail(t,"multi-factor-auth-required",{_serverResponse:a}),a}function _getFinalTarget(t,e,n,o){const c=`${e}${n}?${o}`;return t.config.emulator?_emulatorUrl(t.config,c):`${t.config.apiScheme}://${c}`}function _parseEnforcementState(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class NetworkTimeout{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,o)=>{this.timer=setTimeout(()=>o(_createError(this.auth,"network-request-failed")),DEFAULT_API_TIMEOUT_MS.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function _makeTaggedError(t,e,n){const o={appName:t.name};n.email&&(o.email=n.email),n.phoneNumber&&(o.phoneNumber=n.phoneNumber);const c=_createError(t,e,o);return c.customData._tokenResponse=n,c}function isEnterprise(t){return t!==void 0&&t.enterprise!==void 0}class RecaptchaConfig{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return _parseEnforcementState(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function getRecaptchaConfig(t,e){return _performApiRequest(t,"GET","/v2/recaptchaConfig",_addTidIfNecessary(t,e))}async function deleteAccount(t,e){return _performApiRequest(t,"POST","/v1/accounts:delete",e)}async function getAccountInfo(t,e){return _performApiRequest(t,"POST","/v1/accounts:lookup",e)}function utcTimestampToDateString(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function getIdTokenResult(t,e=!1){const n=getModularInstance(t),o=await n.getIdToken(e),c=_parseToken(o);_assert$1(c&&c.exp&&c.auth_time&&c.iat,n.auth,"internal-error");const a=typeof c.firebase=="object"?c.firebase:void 0,l=a?.sign_in_provider;return{claims:c,token:o,authTime:utcTimestampToDateString(secondsStringToMilliseconds(c.auth_time)),issuedAtTime:utcTimestampToDateString(secondsStringToMilliseconds(c.iat)),expirationTime:utcTimestampToDateString(secondsStringToMilliseconds(c.exp)),signInProvider:l||null,signInSecondFactor:a?.sign_in_second_factor||null}}function secondsStringToMilliseconds(t){return Number(t)*1e3}function _parseToken(t){const[e,n,o]=t.split(".");if(e===void 0||n===void 0||o===void 0)return _logError("JWT malformed, contained fewer than 3 sections"),null;try{const c=base64Decode(n);return c?JSON.parse(c):(_logError("Failed to decode base64 JWT payload"),null)}catch(c){return _logError("Caught error parsing JWT payload as JSON",c?.toString()),null}}function _tokenExpiresIn(t){const e=_parseToken(t);return _assert$1(e,"internal-error"),_assert$1(typeof e.exp<"u","internal-error"),_assert$1(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function _logoutIfInvalidated(t,e,n=!1){if(n)return e;try{return await e}catch(o){throw o instanceof FirebaseError&&isUserInvalidated(o)&&t.auth.currentUser===t&&await t.auth.signOut(),o}}function isUserInvalidated({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class ProactiveRefresh{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const o=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),o}else{this.errorBackoff=3e4;const c=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,c)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class UserMetadata{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=utcTimestampToDateString(this.lastLoginAt),this.creationTime=utcTimestampToDateString(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function _reloadWithoutSaving(t){var e;const n=t.auth,o=await t.getIdToken(),c=await _logoutIfInvalidated(t,getAccountInfo(n,{idToken:o}));_assert$1(c?.users.length,n,"internal-error");const a=c.users[0];t._notifyReloadListener(a);const l=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?extractProviderData(a.providerUserInfo):[],b=mergeProviderData(t.providerData,l),v=t.isAnonymous,A=!(t.email&&a.passwordHash)&&!b?.length,S=v?A:!1,M={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:b,metadata:new UserMetadata(a.createdAt,a.lastLoginAt),isAnonymous:S};Object.assign(t,M)}async function reload(t){const e=getModularInstance(t);await _reloadWithoutSaving(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function mergeProviderData(t,e){return[...t.filter(o=>!e.some(c=>c.providerId===o.providerId)),...e]}function extractProviderData(t){return t.map(e=>{var{providerId:n}=e,o=__rest(e,["providerId"]);return{providerId:n,uid:o.rawId||"",displayName:o.displayName||null,email:o.email||null,phoneNumber:o.phoneNumber||null,photoURL:o.photoUrl||null}})}async function requestStsToken(t,e){const n=await _performFetchWithErrorHandling(t,{},async()=>{const o=querystring({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:c,apiKey:a}=t.config,l=_getFinalTarget(t,c,"/v1/token",`key=${a}`),b=await t._getAdditionalHeaders();return b["Content-Type"]="application/x-www-form-urlencoded",FetchProvider.fetch()(l,{method:"POST",headers:b,body:o})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function revokeToken(t,e){return _performApiRequest(t,"POST","/v2/accounts:revokeToken",_addTidIfNecessary(t,e))}class StsTokenManager{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){_assert$1(e.idToken,"internal-error"),_assert$1(typeof e.idToken<"u","internal-error"),_assert$1(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):_tokenExpiresIn(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){_assert$1(e.length!==0,"internal-error");const n=_tokenExpiresIn(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(_assert$1(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:o,refreshToken:c,expiresIn:a}=await requestStsToken(e,n);this.updateTokensAndExpiration(o,c,Number(a))}updateTokensAndExpiration(e,n,o){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+o*1e3}static fromJSON(e,n){const{refreshToken:o,accessToken:c,expirationTime:a}=n,l=new StsTokenManager;return o&&(_assert$1(typeof o=="string","internal-error",{appName:e}),l.refreshToken=o),c&&(_assert$1(typeof c=="string","internal-error",{appName:e}),l.accessToken=c),a&&(_assert$1(typeof a=="number","internal-error",{appName:e}),l.expirationTime=a),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new StsTokenManager,this.toJSON())}_performRefresh(){return debugFail("not implemented")}}function assertStringOrUndefined(t,e){_assert$1(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class UserImpl{constructor(e){var{uid:n,auth:o,stsTokenManager:c}=e,a=__rest(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ProactiveRefresh(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=o,this.stsTokenManager=c,this.accessToken=c.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new UserMetadata(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await _logoutIfInvalidated(this,this.stsTokenManager.getToken(this.auth,e));return _assert$1(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return getIdTokenResult(this,e)}reload(){return reload(this)}_assign(e){this!==e&&(_assert$1(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new UserImpl(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){_assert$1(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let o=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),o=!0),n&&await _reloadWithoutSaving(this),await this.auth._persistUserIfCurrent(this),o&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(_isFirebaseServerApp(this.auth.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(this.auth));const e=await this.getIdToken();return await _logoutIfInvalidated(this,deleteAccount(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var o,c,a,l,b,v,A,S;const M=(o=n.displayName)!==null&&o!==void 0?o:void 0,B=(c=n.email)!==null&&c!==void 0?c:void 0,P=(a=n.phoneNumber)!==null&&a!==void 0?a:void 0,L=(l=n.photoURL)!==null&&l!==void 0?l:void 0,F=(b=n.tenantId)!==null&&b!==void 0?b:void 0,U=(v=n._redirectEventId)!==null&&v!==void 0?v:void 0,q=(A=n.createdAt)!==null&&A!==void 0?A:void 0,X=(S=n.lastLoginAt)!==null&&S!==void 0?S:void 0,{uid:ee,emailVerified:te,isAnonymous:ce,providerData:ue,stsTokenManager:Ae}=n;_assert$1(ee&&Ae,e,"internal-error");const we=StsTokenManager.fromJSON(this.name,Ae);_assert$1(typeof ee=="string",e,"internal-error"),assertStringOrUndefined(M,e.name),assertStringOrUndefined(B,e.name),_assert$1(typeof te=="boolean",e,"internal-error"),_assert$1(typeof ce=="boolean",e,"internal-error"),assertStringOrUndefined(P,e.name),assertStringOrUndefined(L,e.name),assertStringOrUndefined(F,e.name),assertStringOrUndefined(U,e.name),assertStringOrUndefined(q,e.name),assertStringOrUndefined(X,e.name);const pe=new UserImpl({uid:ee,auth:e,email:B,emailVerified:te,displayName:M,isAnonymous:ce,photoURL:L,phoneNumber:P,tenantId:F,stsTokenManager:we,createdAt:q,lastLoginAt:X});return ue&&Array.isArray(ue)&&(pe.providerData=ue.map(Ce=>Object.assign({},Ce))),U&&(pe._redirectEventId=U),pe}static async _fromIdTokenResponse(e,n,o=!1){const c=new StsTokenManager;c.updateFromServerResponse(n);const a=new UserImpl({uid:n.localId,auth:e,stsTokenManager:c,isAnonymous:o});return await _reloadWithoutSaving(a),a}static async _fromGetAccountInfoResponse(e,n,o){const c=n.users[0];_assert$1(c.localId!==void 0,"internal-error");const a=c.providerUserInfo!==void 0?extractProviderData(c.providerUserInfo):[],l=!(c.email&&c.passwordHash)&&!a?.length,b=new StsTokenManager;b.updateFromIdToken(o);const v=new UserImpl({uid:c.localId,auth:e,stsTokenManager:b,isAnonymous:l}),A={uid:c.localId,displayName:c.displayName||null,photoURL:c.photoUrl||null,email:c.email||null,emailVerified:c.emailVerified||!1,phoneNumber:c.phoneNumber||null,tenantId:c.tenantId||null,providerData:a,metadata:new UserMetadata(c.createdAt,c.lastLoginAt),isAnonymous:!(c.email&&c.passwordHash)&&!a?.length};return Object.assign(v,A),v}}const instanceCache=new Map;function _getInstance(t){debugAssert(t instanceof Function,"Expected a class definition");let e=instanceCache.get(t);return e?(debugAssert(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,instanceCache.set(t,e),e)}class InMemoryPersistence{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}InMemoryPersistence.type="NONE";const inMemoryPersistence=InMemoryPersistence;function _persistenceKeyName(t,e,n){return`firebase:${t}:${e}:${n}`}class PersistenceUserManager{constructor(e,n,o){this.persistence=e,this.auth=n,this.userKey=o;const{config:c,name:a}=this.auth;this.fullUserKey=_persistenceKeyName(this.userKey,c.apiKey,a),this.fullPersistenceKey=_persistenceKeyName("persistence",c.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?UserImpl._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,o="authUser"){if(!n.length)return new PersistenceUserManager(_getInstance(inMemoryPersistence),e,o);const c=(await Promise.all(n.map(async A=>{if(await A._isAvailable())return A}))).filter(A=>A);let a=c[0]||_getInstance(inMemoryPersistence);const l=_persistenceKeyName(o,e.config.apiKey,e.name);let b=null;for(const A of n)try{const S=await A._get(l);if(S){const M=UserImpl._fromJSON(e,S);A!==a&&(b=M),a=A;break}}catch{}const v=c.filter(A=>A._shouldAllowMigration);return!a._shouldAllowMigration||!v.length?new PersistenceUserManager(a,e,o):(a=v[0],b&&await a._set(l,b.toJSON()),await Promise.all(n.map(async A=>{if(A!==a)try{await A._remove(l)}catch{}})),new PersistenceUserManager(a,e,o))}}function _getBrowserName(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(_isIEMobile(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(_isFirefox(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(_isBlackBerry(e))return"Blackberry";if(_isWebOS(e))return"Webos";if(_isSafari(e))return"Safari";if((e.includes("chrome/")||_isChromeIOS(e))&&!e.includes("edge/"))return"Chrome";if(_isAndroid(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,o=t.match(n);if(o?.length===2)return o[1]}return"Other"}function _isFirefox(t=getUA()){return/firefox\//i.test(t)}function _isSafari(t=getUA()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function _isChromeIOS(t=getUA()){return/crios\//i.test(t)}function _isIEMobile(t=getUA()){return/iemobile/i.test(t)}function _isAndroid(t=getUA()){return/android/i.test(t)}function _isBlackBerry(t=getUA()){return/blackberry/i.test(t)}function _isWebOS(t=getUA()){return/webos/i.test(t)}function _isIOS(t=getUA()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function _isIOSStandalone(t=getUA()){var e;return _isIOS(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function _isIE10(){return isIE()&&document.documentMode===10}function _isMobileBrowser(t=getUA()){return _isIOS(t)||_isAndroid(t)||_isWebOS(t)||_isBlackBerry(t)||/windows phone/i.test(t)||_isIEMobile(t)}function _isIframe(){try{return!!(window&&window!==window.top)}catch{return!1}}function _getClientVersion(t,e=[]){let n;switch(t){case"Browser":n=_getBrowserName(getUA());break;case"Worker":n=`${_getBrowserName(getUA())}-${t}`;break;default:n=t}const o=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${SDK_VERSION$1}/${o}`}class AuthMiddlewareQueue{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const o=a=>new Promise((l,b)=>{try{const v=e(a);l(v)}catch(v){b(v)}});o.onAbort=n,this.queue.push(o);const c=this.queue.length-1;return()=>{this.queue[c]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const o of this.queue)await o(e),o.onAbort&&n.push(o.onAbort)}catch(o){n.reverse();for(const c of n)try{c()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:o?.message})}}}async function _getPasswordPolicy(t,e={}){return _performApiRequest(t,"GET","/v2/passwordPolicy",_addTidIfNecessary(t,e))}const MINIMUM_MIN_PASSWORD_LENGTH=6;class PasswordPolicyImpl{constructor(e){var n,o,c,a;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=l.minPasswordLength)!==null&&n!==void 0?n:MINIMUM_MIN_PASSWORD_LENGTH,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(c=(o=e.allowedNonAlphanumericCharacters)===null||o===void 0?void 0:o.join(""))!==null&&c!==void 0?c:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,o,c,a,l,b;const v={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,v),this.validatePasswordCharacterOptions(e,v),v.isValid&&(v.isValid=(n=v.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),v.isValid&&(v.isValid=(o=v.meetsMaxPasswordLength)!==null&&o!==void 0?o:!0),v.isValid&&(v.isValid=(c=v.containsLowercaseLetter)!==null&&c!==void 0?c:!0),v.isValid&&(v.isValid=(a=v.containsUppercaseLetter)!==null&&a!==void 0?a:!0),v.isValid&&(v.isValid=(l=v.containsNumericCharacter)!==null&&l!==void 0?l:!0),v.isValid&&(v.isValid=(b=v.containsNonAlphanumericCharacter)!==null&&b!==void 0?b:!0),v}validatePasswordLengthOptions(e,n){const o=this.customStrengthOptions.minPasswordLength,c=this.customStrengthOptions.maxPasswordLength;o&&(n.meetsMinPasswordLength=e.length>=o),c&&(n.meetsMaxPasswordLength=e.length<=c)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let o;for(let c=0;c<e.length;c++)o=e.charAt(c),this.updatePasswordCharacterOptionsStatuses(n,o>="a"&&o<="z",o>="A"&&o<="Z",o>="0"&&o<="9",this.allowedNonAlphanumericCharacters.includes(o))}updatePasswordCharacterOptionsStatuses(e,n,o,c,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=o)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=c)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}class AuthImpl{constructor(e,n,o,c){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=o,this.config=c,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Subscription(this),this.idTokenSubscription=new Subscription(this),this.beforeStateQueue=new AuthMiddlewareQueue(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_DEFAULT_AUTH_ERROR_FACTORY,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=c.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=_getInstance(n)),this._initializationPromise=this.queue(async()=>{var o,c;if(!this._deleted&&(this.persistenceManager=await PersistenceUserManager.create(this,e),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((c=this.currentUser)===null||c===void 0?void 0:c.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await getAccountInfo(this,{idToken:e}),o=await UserImpl._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(o)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(_isFirebaseServerApp(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(b=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(b,b))}):this.directlySetCurrentUser(null)}const o=await this.assertedPersistence.getCurrentUser();let c=o,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,b=c?._redirectEventId,v=await this.tryRedirectSignIn(e);(!l||l===b)&&v?.user&&(c=v.user,a=!0)}if(!c)return this.directlySetCurrentUser(null);if(!c._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(c)}catch(l){c=o,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return c?this.reloadAndSetCurrentUserOrClear(c):this.directlySetCurrentUser(null)}return _assert$1(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===c._redirectEventId?this.directlySetCurrentUser(c):this.reloadAndSetCurrentUserOrClear(c)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await _reloadWithoutSaving(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=_getUserLanguage()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(_isFirebaseServerApp(this.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(this));const n=e?getModularInstance(e):null;return n&&_assert$1(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&_assert$1(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return _isFirebaseServerApp(this.app)?Promise.reject(_serverAppCurrentUserOperationNotSupportedError(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return _isFirebaseServerApp(this.app)?Promise.reject(_serverAppCurrentUserOperationNotSupportedError(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(_getInstance(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await _getPasswordPolicy(this),n=new PasswordPolicyImpl(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ErrorFactory("auth","Firebase",e())}onAuthStateChanged(e,n,o){return this.registerStateListener(this.authStateSubscription,e,n,o)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,o){return this.registerStateListener(this.idTokenSubscription,e,n,o)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const o=this.onAuthStateChanged(()=>{o(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),o={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(o.tenantId=this.tenantId),await revokeToken(this,o)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const o=await this.getOrInitRedirectPersistenceManager(n);return e===null?o.removeCurrentUser():o.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&_getInstance(e)||this._popupRedirectResolver;_assert$1(n,this,"argument-error"),this.redirectPersistenceManager=await PersistenceUserManager.create(this,[_getInstance(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,o;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((o=this.redirectUser)===null||o===void 0?void 0:o._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const o=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==o&&(this.lastNotifiedUid=o,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,o,c){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let l=!1;const b=this._isInitialized?Promise.resolve():this._initializationPromise;if(_assert$1(b,this,"internal-error"),b.then(()=>{l||a(this.currentUser)}),typeof n=="function"){const v=e.addObserver(n,o,c);return()=>{l=!0,v()}}else{const v=e.addObserver(n);return()=>{l=!0,v()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return _assert$1(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=_getClientVersion(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const o=await ((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());o&&(n["X-Firebase-Client"]=o);const c=await this._getAppCheckToken();return c&&(n["X-Firebase-AppCheck"]=c),n}async _getAppCheckToken(){var e;const n=await ((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n?.error&&_logWarn(`Error while retrieving App Check token: ${n.error}`),n?.token}}function _castAuth(t){return getModularInstance(t)}class Subscription{constructor(e){this.auth=e,this.observer=null,this.addObserver=createSubscribe(n=>this.observer=n)}get next(){return _assert$1(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let externalJSProvider={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function _setExternalJSProvider(t){externalJSProvider=t}function _loadJS(t){return externalJSProvider.loadJS(t)}function _recaptchaEnterpriseScriptUrl(){return externalJSProvider.recaptchaEnterpriseScript}function _gapiScriptUrl(){return externalJSProvider.gapiScript}function _generateCallbackName(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const RECAPTCHA_ENTERPRISE_VERIFIER_TYPE="recaptcha-enterprise",FAKE_TOKEN="NO_RECAPTCHA";class RecaptchaEnterpriseVerifier{constructor(e){this.type=RECAPTCHA_ENTERPRISE_VERIFIER_TYPE,this.auth=_castAuth(e)}async verify(e="verify",n=!1){async function o(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(l,b)=>{getRecaptchaConfig(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(v=>{if(v.recaptchaKey===void 0)b(new Error("recaptcha Enterprise site key undefined"));else{const A=new RecaptchaConfig(v);return a.tenantId==null?a._agentRecaptchaConfig=A:a._tenantRecaptchaConfigs[a.tenantId]=A,l(A.siteKey)}}).catch(v=>{b(v)})})}function c(a,l,b){const v=window.grecaptcha;isEnterprise(v)?v.enterprise.ready(()=>{v.enterprise.execute(a,{action:e}).then(A=>{l(A)}).catch(()=>{l(FAKE_TOKEN)})}):b(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((a,l)=>{o(this.auth).then(b=>{if(!n&&isEnterprise(window.grecaptcha))c(b,a,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let v=_recaptchaEnterpriseScriptUrl();v.length!==0&&(v+=b),_loadJS(v).then(()=>{c(b,a,l)}).catch(A=>{l(A)})}}).catch(b=>{l(b)})})}}async function injectRecaptchaFields(t,e,n,o=!1){const c=new RecaptchaEnterpriseVerifier(t);let a;try{a=await c.verify(n)}catch{a=await c.verify(n,!0)}const l=Object.assign({},e);return o?Object.assign(l,{captchaResp:a}):Object.assign(l,{captchaResponse:a}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function handleRecaptchaFlow(t,e,n,o){var c;if(!((c=t._getRecaptchaConfig())===null||c===void 0)&&c.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await injectRecaptchaFields(t,e,n,n==="getOobCode");return o(t,a)}else return o(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await injectRecaptchaFields(t,e,n,n==="getOobCode");return o(t,l)}else return Promise.reject(a)})}function initializeAuth(t,e){const n=_getProvider(t,"auth");if(n.isInitialized()){const c=n.getImmediate(),a=n.getOptions();if(deepEqual(a,e??{}))return c;_fail(c,"already-initialized")}return n.initialize({options:e})}function _initializeAuthInstance(t,e){const n=e?.persistence||[],o=(Array.isArray(n)?n:[n]).map(_getInstance);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(o,e?.popupRedirectResolver)}function connectAuthEmulator(t,e,n){const o=_castAuth(t);_assert$1(o._canInitEmulator,o,"emulator-config-failed"),_assert$1(/^https?:\/\//.test(e),o,"invalid-emulator-scheme");const c=!!n?.disableWarnings,a=extractProtocol(e),{host:l,port:b}=extractHostAndPort(e),v=b===null?"":`:${b}`;o.config.emulator={url:`${a}//${l}${v}/`},o.settings.appVerificationDisabledForTesting=!0,o.emulatorConfig=Object.freeze({host:l,port:b,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:c})}),c||emitEmulatorWarning()}function extractProtocol(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function extractHostAndPort(t){const e=extractProtocol(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const o=n[2].split("@").pop()||"",c=/^(\[[^\]]+\])(:|$)/.exec(o);if(c){const a=c[1];return{host:a,port:parsePort(o.substr(a.length+1))}}else{const[a,l]=o.split(":");return{host:a,port:parsePort(l)}}}function parsePort(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function emitEmulatorWarning(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class AuthCredential{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return debugFail("not implemented")}_getIdTokenResponse(e){return debugFail("not implemented")}_linkToIdToken(e,n){return debugFail("not implemented")}_getReauthenticationResolver(e){return debugFail("not implemented")}}async function linkEmailPassword(t,e){return _performApiRequest(t,"POST","/v1/accounts:signUp",e)}async function signInWithPassword(t,e){return _performSignInRequest(t,"POST","/v1/accounts:signInWithPassword",_addTidIfNecessary(t,e))}async function sendOobCode(t,e){return _performApiRequest(t,"POST","/v1/accounts:sendOobCode",_addTidIfNecessary(t,e))}async function sendEmailVerification$1(t,e){return sendOobCode(t,e)}async function sendSignInLinkToEmail$1(t,e){return sendOobCode(t,e)}async function signInWithEmailLink$1(t,e){return _performSignInRequest(t,"POST","/v1/accounts:signInWithEmailLink",_addTidIfNecessary(t,e))}async function signInWithEmailLinkForLinking(t,e){return _performSignInRequest(t,"POST","/v1/accounts:signInWithEmailLink",_addTidIfNecessary(t,e))}class EmailAuthCredential extends AuthCredential{constructor(e,n,o,c=null){super("password",o),this._email=e,this._password=n,this._tenantId=c}static _fromEmailAndPassword(e,n){return new EmailAuthCredential(e,n,"password")}static _fromEmailAndCode(e,n,o=null){return new EmailAuthCredential(e,n,"emailLink",o)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return handleRecaptchaFlow(e,n,"signInWithPassword",signInWithPassword);case"emailLink":return signInWithEmailLink$1(e,{email:this._email,oobCode:this._password});default:_fail(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const o={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return handleRecaptchaFlow(e,o,"signUpPassword",linkEmailPassword);case"emailLink":return signInWithEmailLinkForLinking(e,{idToken:n,email:this._email,oobCode:this._password});default:_fail(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function signInWithIdp(t,e){return _performSignInRequest(t,"POST","/v1/accounts:signInWithIdp",_addTidIfNecessary(t,e))}const IDP_REQUEST_URI$1="http://localhost";class OAuthCredential extends AuthCredential{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new OAuthCredential(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):_fail("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:o,signInMethod:c}=n,a=__rest(n,["providerId","signInMethod"]);if(!o||!c)return null;const l=new OAuthCredential(o,c);return l.idToken=a.idToken||void 0,l.accessToken=a.accessToken||void 0,l.secret=a.secret,l.nonce=a.nonce,l.pendingToken=a.pendingToken||null,l}_getIdTokenResponse(e){const n=this.buildRequest();return signInWithIdp(e,n)}_linkToIdToken(e,n){const o=this.buildRequest();return o.idToken=n,signInWithIdp(e,o)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,signInWithIdp(e,n)}buildRequest(){const e={requestUri:IDP_REQUEST_URI$1,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=querystring(n)}return e}}function parseMode(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function parseDeepLink(t){const e=querystringDecode(extractQuerystring(t)).link,n=e?querystringDecode(extractQuerystring(e)).deep_link_id:null,o=querystringDecode(extractQuerystring(t)).deep_link_id;return(o?querystringDecode(extractQuerystring(o)).link:null)||o||n||e||t}class ActionCodeURL{constructor(e){var n,o,c,a,l,b;const v=querystringDecode(extractQuerystring(e)),A=(n=v.apiKey)!==null&&n!==void 0?n:null,S=(o=v.oobCode)!==null&&o!==void 0?o:null,M=parseMode((c=v.mode)!==null&&c!==void 0?c:null);_assert$1(A&&S&&M,"argument-error"),this.apiKey=A,this.operation=M,this.code=S,this.continueUrl=(a=v.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(l=v.languageCode)!==null&&l!==void 0?l:null,this.tenantId=(b=v.tenantId)!==null&&b!==void 0?b:null}static parseLink(e){const n=parseDeepLink(e);try{return new ActionCodeURL(n)}catch{return null}}}class EmailAuthProvider{constructor(){this.providerId=EmailAuthProvider.PROVIDER_ID}static credential(e,n){return EmailAuthCredential._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const o=ActionCodeURL.parseLink(n);return _assert$1(o,"argument-error"),EmailAuthCredential._fromEmailAndCode(e,o.code,o.tenantId)}}EmailAuthProvider.PROVIDER_ID="password";EmailAuthProvider.EMAIL_PASSWORD_SIGN_IN_METHOD="password";EmailAuthProvider.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class FederatedAuthProvider{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class BaseOAuthProvider extends FederatedAuthProvider{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class FacebookAuthProvider extends BaseOAuthProvider{constructor(){super("facebook.com")}static credential(e){return OAuthCredential._fromParams({providerId:FacebookAuthProvider.PROVIDER_ID,signInMethod:FacebookAuthProvider.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return FacebookAuthProvider.credentialFromTaggedObject(e)}static credentialFromError(e){return FacebookAuthProvider.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return FacebookAuthProvider.credential(e.oauthAccessToken)}catch{return null}}}FacebookAuthProvider.FACEBOOK_SIGN_IN_METHOD="facebook.com";FacebookAuthProvider.PROVIDER_ID="facebook.com";class GoogleAuthProvider extends BaseOAuthProvider{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return OAuthCredential._fromParams({providerId:GoogleAuthProvider.PROVIDER_ID,signInMethod:GoogleAuthProvider.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return GoogleAuthProvider.credentialFromTaggedObject(e)}static credentialFromError(e){return GoogleAuthProvider.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:o}=e;if(!n&&!o)return null;try{return GoogleAuthProvider.credential(n,o)}catch{return null}}}GoogleAuthProvider.GOOGLE_SIGN_IN_METHOD="google.com";GoogleAuthProvider.PROVIDER_ID="google.com";class GithubAuthProvider extends BaseOAuthProvider{constructor(){super("github.com")}static credential(e){return OAuthCredential._fromParams({providerId:GithubAuthProvider.PROVIDER_ID,signInMethod:GithubAuthProvider.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return GithubAuthProvider.credentialFromTaggedObject(e)}static credentialFromError(e){return GithubAuthProvider.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return GithubAuthProvider.credential(e.oauthAccessToken)}catch{return null}}}GithubAuthProvider.GITHUB_SIGN_IN_METHOD="github.com";GithubAuthProvider.PROVIDER_ID="github.com";class TwitterAuthProvider extends BaseOAuthProvider{constructor(){super("twitter.com")}static credential(e,n){return OAuthCredential._fromParams({providerId:TwitterAuthProvider.PROVIDER_ID,signInMethod:TwitterAuthProvider.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return TwitterAuthProvider.credentialFromTaggedObject(e)}static credentialFromError(e){return TwitterAuthProvider.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:o}=e;if(!n||!o)return null;try{return TwitterAuthProvider.credential(n,o)}catch{return null}}}TwitterAuthProvider.TWITTER_SIGN_IN_METHOD="twitter.com";TwitterAuthProvider.PROVIDER_ID="twitter.com";async function signUp(t,e){return _performSignInRequest(t,"POST","/v1/accounts:signUp",_addTidIfNecessary(t,e))}class UserCredentialImpl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,o,c=!1){const a=await UserImpl._fromIdTokenResponse(e,o,c),l=providerIdForResponse(o);return new UserCredentialImpl({user:a,providerId:l,_tokenResponse:o,operationType:n})}static async _forOperation(e,n,o){await e._updateTokensIfNecessary(o,!0);const c=providerIdForResponse(o);return new UserCredentialImpl({user:e,providerId:c,_tokenResponse:o,operationType:n})}}function providerIdForResponse(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}async function signInAnonymously(t){var e;if(_isFirebaseServerApp(t.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(t));const n=_castAuth(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new UserCredentialImpl({user:n.currentUser,providerId:null,operationType:"signIn"});const o=await signUp(n,{returnSecureToken:!0}),c=await UserCredentialImpl._fromIdTokenResponse(n,"signIn",o,!0);return await n._updateCurrentUser(c.user),c}class MultiFactorError extends FirebaseError{constructor(e,n,o,c){var a;super(n.code,n.message),this.operationType=o,this.user=c,Object.setPrototypeOf(this,MultiFactorError.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:n.customData._serverResponse,operationType:o}}static _fromErrorAndOperation(e,n,o,c){return new MultiFactorError(e,n,o,c)}}function _processCredentialSavingMfaContextIfNecessary(t,e,n,o){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?MultiFactorError._fromErrorAndOperation(t,a,e,o):a})}async function _link$1(t,e,n=!1){const o=await _logoutIfInvalidated(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return UserCredentialImpl._forOperation(t,"link",o)}async function _reauthenticate(t,e,n=!1){const{auth:o}=t;if(_isFirebaseServerApp(o.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(o));const c="reauthenticate";try{const a=await _logoutIfInvalidated(t,_processCredentialSavingMfaContextIfNecessary(o,c,e,t),n);_assert$1(a.idToken,o,"internal-error");const l=_parseToken(a.idToken);_assert$1(l,o,"internal-error");const{sub:b}=l;return _assert$1(t.uid===b,o,"user-mismatch"),UserCredentialImpl._forOperation(t,c,a)}catch(a){throw a?.code==="auth/user-not-found"&&_fail(o,"user-mismatch"),a}}async function _signInWithCredential(t,e,n=!1){if(_isFirebaseServerApp(t.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(t));const o="signIn",c=await _processCredentialSavingMfaContextIfNecessary(t,o,e),a=await UserCredentialImpl._fromIdTokenResponse(t,o,c);return n||await t._updateCurrentUser(a.user),a}async function signInWithCredential(t,e){return _signInWithCredential(_castAuth(t),e)}function _setActionCodeSettingsOnRequest(t,e,n){var o;_assert$1(((o=n.url)===null||o===void 0?void 0:o.length)>0,t,"invalid-continue-uri"),_assert$1(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(_assert$1(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(_assert$1(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}async function recachePasswordPolicy(t){const e=_castAuth(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function createUserWithEmailAndPassword(t,e,n){if(_isFirebaseServerApp(t.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(t));const o=_castAuth(t),l=await handleRecaptchaFlow(o,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",signUp).catch(v=>{throw v.code==="auth/password-does-not-meet-requirements"&&recachePasswordPolicy(t),v}),b=await UserCredentialImpl._fromIdTokenResponse(o,"signIn",l);return await o._updateCurrentUser(b.user),b}function signInWithEmailAndPassword(t,e,n){return _isFirebaseServerApp(t.app)?Promise.reject(_serverAppCurrentUserOperationNotSupportedError(t)):signInWithCredential(getModularInstance(t),EmailAuthProvider.credential(e,n)).catch(async o=>{throw o.code==="auth/password-does-not-meet-requirements"&&recachePasswordPolicy(t),o})}async function sendSignInLinkToEmail(t,e,n){const o=_castAuth(t),c={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function a(l,b){_assert$1(b.handleCodeInApp,o,"argument-error"),b&&_setActionCodeSettingsOnRequest(o,l,b)}a(c,n),await handleRecaptchaFlow(o,c,"getOobCode",sendSignInLinkToEmail$1)}function isSignInWithEmailLink(t,e){const n=ActionCodeURL.parseLink(e);return n?.operation==="EMAIL_SIGNIN"}async function signInWithEmailLink(t,e,n){if(_isFirebaseServerApp(t.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(t));const o=getModularInstance(t),c=EmailAuthProvider.credentialWithLink(e,n||_getCurrentUrl());return _assert$1(c._tenantId===(o.tenantId||null),o,"tenant-id-mismatch"),signInWithCredential(o,c)}async function sendEmailVerification(t,e){const n=getModularInstance(t),c={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&_setActionCodeSettingsOnRequest(n.auth,c,e);const{email:a}=await sendEmailVerification$1(n.auth,c);a!==t.email&&await t.reload()}function _fromIdTokenResponse(t){var e,n;if(!t)return null;const{providerId:o}=t,c=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},a=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!o&&t?.idToken){const l=(n=(e=_parseToken(t.idToken))===null||e===void 0?void 0:e.firebase)===null||n===void 0?void 0:n.sign_in_provider;if(l){const b=l!=="anonymous"&&l!=="custom"?l:null;return new GenericAdditionalUserInfo(a,b)}}if(!o)return null;switch(o){case"facebook.com":return new FacebookAdditionalUserInfo(a,c);case"github.com":return new GithubAdditionalUserInfo(a,c);case"google.com":return new GoogleAdditionalUserInfo(a,c);case"twitter.com":return new TwitterAdditionalUserInfo(a,c,t.screenName||null);case"custom":case"anonymous":return new GenericAdditionalUserInfo(a,null);default:return new GenericAdditionalUserInfo(a,o,c)}}class GenericAdditionalUserInfo{constructor(e,n,o={}){this.isNewUser=e,this.providerId=n,this.profile=o}}class FederatedAdditionalUserInfoWithUsername extends GenericAdditionalUserInfo{constructor(e,n,o,c){super(e,n,o),this.username=c}}class FacebookAdditionalUserInfo extends GenericAdditionalUserInfo{constructor(e,n){super(e,"facebook.com",n)}}class GithubAdditionalUserInfo extends FederatedAdditionalUserInfoWithUsername{constructor(e,n){super(e,"github.com",n,typeof n?.login=="string"?n?.login:null)}}class GoogleAdditionalUserInfo extends GenericAdditionalUserInfo{constructor(e,n){super(e,"google.com",n)}}class TwitterAdditionalUserInfo extends FederatedAdditionalUserInfoWithUsername{constructor(e,n,o){super(e,"twitter.com",n,o)}}function getAdditionalUserInfo(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:_fromIdTokenResponse(n)}function onIdTokenChanged(t,e,n,o){return getModularInstance(t).onIdTokenChanged(e,n,o)}function beforeAuthStateChanged(t,e,n){return getModularInstance(t).beforeAuthStateChanged(e,n)}function onAuthStateChanged(t,e,n,o){return getModularInstance(t).onAuthStateChanged(e,n,o)}function signOut$1(t){return getModularInstance(t).signOut()}const STORAGE_AVAILABLE_KEY="__sak";class BrowserPersistenceClass{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(STORAGE_AVAILABLE_KEY,"1"),this.storage.removeItem(STORAGE_AVAILABLE_KEY),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}function _iframeCannotSyncWebStorage(){const t=getUA();return _isSafari(t)||_isIOS(t)}const _POLLING_INTERVAL_MS$1=1e3,IE10_LOCAL_STORAGE_SYNC_DELAY=10;class BrowserLocalPersistence extends BrowserPersistenceClass{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=_iframeCannotSyncWebStorage()&&_isIframe(),this.fallbackToPolling=_isMobileBrowser(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const o=this.storage.getItem(n),c=this.localCache[n];o!==c&&e(n,c,o)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,b,v)=>{this.notifyListeners(l,v)});return}const o=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const l=this.storage.getItem(o);if(e.newValue!==l)e.newValue!==null?this.storage.setItem(o,e.newValue):this.storage.removeItem(o);else if(this.localCache[o]===e.newValue&&!n)return}const c=()=>{const l=this.storage.getItem(o);!n&&this.localCache[o]===l||this.notifyListeners(o,l)},a=this.storage.getItem(o);_isIE10()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(c,IE10_LOCAL_STORAGE_SYNC_DELAY):c()}notifyListeners(e,n){this.localCache[e]=n;const o=this.listeners[e];if(o)for(const c of Array.from(o))c(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,o)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:o}),!0)})},_POLLING_INTERVAL_MS$1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}BrowserLocalPersistence.type="LOCAL";const browserLocalPersistence=BrowserLocalPersistence;class BrowserSessionPersistence extends BrowserPersistenceClass{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}BrowserSessionPersistence.type="SESSION";const browserSessionPersistence=BrowserSessionPersistence;function _allSettled(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class Receiver{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(c=>c.isListeningto(e));if(n)return n;const o=new Receiver(e);return this.receivers.push(o),o}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:o,eventType:c,data:a}=n.data,l=this.handlersMap[c];if(!l?.size)return;n.ports[0].postMessage({status:"ack",eventId:o,eventType:c});const b=Array.from(l).map(async A=>A(n.origin,a)),v=await _allSettled(b);n.ports[0].postMessage({status:"done",eventId:o,eventType:c,response:v})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Receiver.receivers=[];function _generateEventId(t="",e=10){let n="";for(let o=0;o<e;o++)n+=Math.floor(Math.random()*10);return t+n}class Sender{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,o=50){const c=typeof MessageChannel<"u"?new MessageChannel:null;if(!c)throw new Error("connection_unavailable");let a,l;return new Promise((b,v)=>{const A=_generateEventId("",20);c.port1.start();const S=setTimeout(()=>{v(new Error("unsupported_event"))},o);l={messageChannel:c,onMessage(M){const B=M;if(B.data.eventId===A)switch(B.data.status){case"ack":clearTimeout(S),a=setTimeout(()=>{v(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),b(B.data.response);break;default:clearTimeout(S),clearTimeout(a),v(new Error("invalid_response"));break}}},this.handlers.add(l),c.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:A,data:n},[c.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}function _window(){return window}function _setWindowLocation(t){_window().location.href=t}function _isWorker(){return typeof _window().WorkerGlobalScope<"u"&&typeof _window().importScripts=="function"}async function _getActiveServiceWorker(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function _getServiceWorkerController(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function _getWorkerGlobalScope(){return _isWorker()?self:null}const DB_NAME="firebaseLocalStorageDb",DB_VERSION=1,DB_OBJECTSTORE_NAME="firebaseLocalStorage",DB_DATA_KEYPATH="fbase_key";class DBPromise{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function getObjectStore(t,e){return t.transaction([DB_OBJECTSTORE_NAME],e?"readwrite":"readonly").objectStore(DB_OBJECTSTORE_NAME)}function _deleteDatabase(){const t=indexedDB.deleteDatabase(DB_NAME);return new DBPromise(t).toPromise()}function _openDatabase(){const t=indexedDB.open(DB_NAME,DB_VERSION);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const o=t.result;try{o.createObjectStore(DB_OBJECTSTORE_NAME,{keyPath:DB_DATA_KEYPATH})}catch(c){n(c)}}),t.addEventListener("success",async()=>{const o=t.result;o.objectStoreNames.contains(DB_OBJECTSTORE_NAME)?e(o):(o.close(),await _deleteDatabase(),e(await _openDatabase()))})})}async function _putObject(t,e,n){const o=getObjectStore(t,!0).put({[DB_DATA_KEYPATH]:e,value:n});return new DBPromise(o).toPromise()}async function getObject(t,e){const n=getObjectStore(t,!1).get(e),o=await new DBPromise(n).toPromise();return o===void 0?null:o.value}function _deleteObject(t,e){const n=getObjectStore(t,!0).delete(e);return new DBPromise(n).toPromise()}const _POLLING_INTERVAL_MS=800,_TRANSACTION_RETRY_COUNT=3;class IndexedDBLocalPersistence{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await _openDatabase(),this.db)}async _withRetries(e){let n=0;for(;;)try{const o=await this._openDb();return await e(o)}catch(o){if(n++>_TRANSACTION_RETRY_COUNT)throw o;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return _isWorker()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Receiver._getInstance(_getWorkerGlobalScope()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await _getActiveServiceWorker(),!this.activeServiceWorker)return;this.sender=new Sender(this.activeServiceWorker);const o=await this.sender._send("ping",{},800);o&&!((e=o[0])===null||e===void 0)&&e.fulfilled&&!((n=o[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||_getServiceWorkerController()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await _openDatabase();return await _putObject(e,STORAGE_AVAILABLE_KEY,"1"),await _deleteObject(e,STORAGE_AVAILABLE_KEY),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(o=>_putObject(o,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(o=>getObject(o,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>_deleteObject(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(c=>{const a=getObjectStore(c,!1).getAll();return new DBPromise(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],o=new Set;if(e.length!==0)for(const{fbase_key:c,value:a}of e)o.add(c),JSON.stringify(this.localCache[c])!==JSON.stringify(a)&&(this.notifyListeners(c,a),n.push(c));for(const c of Object.keys(this.localCache))this.localCache[c]&&!o.has(c)&&(this.notifyListeners(c,null),n.push(c));return n}notifyListeners(e,n){this.localCache[e]=n;const o=this.listeners[e];if(o)for(const c of Array.from(o))c(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),_POLLING_INTERVAL_MS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}IndexedDBLocalPersistence.type="LOCAL";const indexedDBLocalPersistence=IndexedDBLocalPersistence;new Delay(3e4,6e4);function _withDefaultResolver(t,e){return e?_getInstance(e):(_assert$1(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class IdpCredential extends AuthCredential{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return signInWithIdp(e,this._buildIdpRequest())}_linkToIdToken(e,n){return signInWithIdp(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return signInWithIdp(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function _signIn(t){return _signInWithCredential(t.auth,new IdpCredential(t),t.bypassAuthState)}function _reauth(t){const{auth:e,user:n}=t;return _assert$1(n,e,"internal-error"),_reauthenticate(n,new IdpCredential(t),t.bypassAuthState)}async function _link(t){const{auth:e,user:n}=t;return _assert$1(n,e,"internal-error"),_link$1(n,new IdpCredential(t),t.bypassAuthState)}class AbstractPopupRedirectOperation{constructor(e,n,o,c,a=!1){this.auth=e,this.resolver=o,this.user=c,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(o){this.reject(o)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:o,postBody:c,tenantId:a,error:l,type:b}=e;if(l){this.reject(l);return}const v={auth:this.auth,requestUri:n,sessionId:o,tenantId:a||void 0,postBody:c||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(b)(v))}catch(A){this.reject(A)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return _signIn;case"linkViaPopup":case"linkViaRedirect":return _link;case"reauthViaPopup":case"reauthViaRedirect":return _reauth;default:_fail(this.auth,"internal-error")}}resolve(e){debugAssert(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){debugAssert(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const _POLL_WINDOW_CLOSE_TIMEOUT=new Delay(2e3,1e4);async function signInWithPopup(t,e,n){if(_isFirebaseServerApp(t.app))return Promise.reject(_createError(t,"operation-not-supported-in-this-environment"));const o=_castAuth(t);_assertInstanceOf(t,e,FederatedAuthProvider);const c=_withDefaultResolver(o,n);return new PopupOperation(o,"signInViaPopup",e,c).executeNotNull()}class PopupOperation extends AbstractPopupRedirectOperation{constructor(e,n,o,c,a){super(e,n,c,a),this.provider=o,this.authWindow=null,this.pollId=null,PopupOperation.currentPopupAction&&PopupOperation.currentPopupAction.cancel(),PopupOperation.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return _assert$1(e,this.auth,"internal-error"),e}async onExecution(){debugAssert(this.filter.length===1,"Popup operations only handle one event");const e=_generateEventId();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(_createError(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(_createError(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,PopupOperation.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,o;if(!((o=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||o===void 0)&&o.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(_createError(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,_POLL_WINDOW_CLOSE_TIMEOUT.get())};e()}}PopupOperation.currentPopupAction=null;const PENDING_REDIRECT_KEY="pendingRedirect",redirectOutcomeMap=new Map;class RedirectAction extends AbstractPopupRedirectOperation{constructor(e,n,o=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,o),this.eventId=null}async execute(){let e=redirectOutcomeMap.get(this.auth._key());if(!e){try{const o=await _getAndClearPendingRedirectStatus(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(o)}catch(n){e=()=>Promise.reject(n)}redirectOutcomeMap.set(this.auth._key(),e)}return this.bypassAuthState||redirectOutcomeMap.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function _getAndClearPendingRedirectStatus(t,e){const n=pendingRedirectKey(e),o=resolverPersistence(t);if(!await o._isAvailable())return!1;const c=await o._get(n)==="true";return await o._remove(n),c}function _overrideRedirectResult(t,e){redirectOutcomeMap.set(t._key(),e)}function resolverPersistence(t){return _getInstance(t._redirectPersistence)}function pendingRedirectKey(t){return _persistenceKeyName(PENDING_REDIRECT_KEY,t.config.apiKey,t.name)}async function _getRedirectResult(t,e,n=!1){if(_isFirebaseServerApp(t.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(t));const o=_castAuth(t),c=_withDefaultResolver(o,e),l=await new RedirectAction(o,c,n).execute();return l&&!n&&(delete l.user._redirectEventId,await o._persistUserIfCurrent(l.user),await o._setRedirectUser(null,e)),l}const EVENT_DUPLICATION_CACHE_DURATION_MS=10*60*1e3;class AuthEventManager{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(o=>{this.isEventForConsumer(e,o)&&(n=!0,this.sendToConsumer(e,o),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!isRedirectEvent(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var o;if(e.error&&!isNullRedirectEvent(e)){const c=((o=e.error.code)===null||o===void 0?void 0:o.split("auth/")[1])||"internal-error";n.onError(_createError(this.auth,c))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const o=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&o}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=EVENT_DUPLICATION_CACHE_DURATION_MS&&this.cachedEventUids.clear(),this.cachedEventUids.has(eventUid(e))}saveEventToCache(e){this.cachedEventUids.add(eventUid(e)),this.lastProcessedEventTime=Date.now()}}function eventUid(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function isNullRedirectEvent({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function isRedirectEvent(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return isNullRedirectEvent(t);default:return!1}}async function _getProjectConfig(t,e={}){return _performApiRequest(t,"GET","/v1/projects",e)}const IP_ADDRESS_REGEX=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,HTTP_REGEX=/^https?/;async function _validateOrigin(t){if(t.config.emulator)return;const{authorizedDomains:e}=await _getProjectConfig(t);for(const n of e)try{if(matchDomain(n))return}catch{}_fail(t,"unauthorized-domain")}function matchDomain(t){const e=_getCurrentUrl(),{protocol:n,hostname:o}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&o===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===o}if(!HTTP_REGEX.test(n))return!1;if(IP_ADDRESS_REGEX.test(t))return o===t;const c=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+c+"|"+c+")$","i").test(o)}const NETWORK_TIMEOUT=new Delay(3e4,6e4);function resetUnloadedGapiModules(){const t=_window().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function loadGapi(t){return new Promise((e,n)=>{var o,c,a;function l(){resetUnloadedGapiModules(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{resetUnloadedGapiModules(),n(_createError(t,"network-request-failed"))},timeout:NETWORK_TIMEOUT.get()})}if(!((c=(o=_window().gapi)===null||o===void 0?void 0:o.iframes)===null||c===void 0)&&c.Iframe)e(gapi.iframes.getContext());else if(!((a=_window().gapi)===null||a===void 0)&&a.load)l();else{const b=_generateCallbackName("iframefcb");return _window()[b]=()=>{gapi.load?l():n(_createError(t,"network-request-failed"))},_loadJS(`${_gapiScriptUrl()}?onload=${b}`).catch(v=>n(v))}}).catch(e=>{throw cachedGApiLoader=null,e})}let cachedGApiLoader=null;function _loadGapi(t){return cachedGApiLoader=cachedGApiLoader||loadGapi(t),cachedGApiLoader}const PING_TIMEOUT=new Delay(5e3,15e3),IFRAME_PATH="__/auth/iframe",EMULATED_IFRAME_PATH="emulator/auth/iframe",IFRAME_ATTRIBUTES={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},EID_FROM_APIHOST=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function getIframeUrl(t){const e=t.config;_assert$1(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?_emulatorUrl(e,EMULATED_IFRAME_PATH):`https://${t.config.authDomain}/${IFRAME_PATH}`,o={apiKey:e.apiKey,appName:t.name,v:SDK_VERSION$1},c=EID_FROM_APIHOST.get(t.config.apiHost);c&&(o.eid=c);const a=t._getFrameworks();return a.length&&(o.fw=a.join(",")),`${n}?${querystring(o).slice(1)}`}async function _openIframe(t){const e=await _loadGapi(t),n=_window().gapi;return _assert$1(n,t,"internal-error"),e.open({where:document.body,url:getIframeUrl(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:IFRAME_ATTRIBUTES,dontclear:!0},o=>new Promise(async(c,a)=>{await o.restyle({setHideOnLeave:!1});const l=_createError(t,"network-request-failed"),b=_window().setTimeout(()=>{a(l)},PING_TIMEOUT.get());function v(){_window().clearTimeout(b),c(o)}o.ping(v).then(v,()=>{a(l)})}))}const BASE_POPUP_OPTIONS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},DEFAULT_WIDTH=500,DEFAULT_HEIGHT=600,TARGET_BLANK="_blank",FIREFOX_EMPTY_URL="http://localhost";class AuthPopup{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function _open(t,e,n,o=DEFAULT_WIDTH,c=DEFAULT_HEIGHT){const a=Math.max((window.screen.availHeight-c)/2,0).toString(),l=Math.max((window.screen.availWidth-o)/2,0).toString();let b="";const v=Object.assign(Object.assign({},BASE_POPUP_OPTIONS),{width:o.toString(),height:c.toString(),top:a,left:l}),A=getUA().toLowerCase();n&&(b=_isChromeIOS(A)?TARGET_BLANK:n),_isFirefox(A)&&(e=e||FIREFOX_EMPTY_URL,v.scrollbars="yes");const S=Object.entries(v).reduce((B,[P,L])=>`${B}${P}=${L},`,"");if(_isIOSStandalone(A)&&b!=="_self")return openAsNewWindowIOS(e||"",b),new AuthPopup(null);const M=window.open(e||"",b,S);_assert$1(M,t,"popup-blocked");try{M.focus()}catch{}return new AuthPopup(M)}function openAsNewWindowIOS(t,e){const n=document.createElement("a");n.href=t,n.target=e;const o=document.createEvent("MouseEvent");o.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(o)}const WIDGET_PATH="__/auth/handler",EMULATOR_WIDGET_PATH="emulator/auth/handler",FIREBASE_APP_CHECK_FRAGMENT_ID=encodeURIComponent("fac");async function _getRedirectUrl(t,e,n,o,c,a){_assert$1(t.config.authDomain,t,"auth-domain-config-required"),_assert$1(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:o,v:SDK_VERSION$1,eventId:c};if(e instanceof FederatedAuthProvider){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",isEmpty(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[S,M]of Object.entries(a||{}))l[S]=M}if(e instanceof BaseOAuthProvider){const S=e.getScopes().filter(M=>M!=="");S.length>0&&(l.scopes=S.join(","))}t.tenantId&&(l.tid=t.tenantId);const b=l;for(const S of Object.keys(b))b[S]===void 0&&delete b[S];const v=await t._getAppCheckToken(),A=v?`#${FIREBASE_APP_CHECK_FRAGMENT_ID}=${encodeURIComponent(v)}`:"";return`${getHandlerBase(t)}?${querystring(b).slice(1)}${A}`}function getHandlerBase({config:t}){return t.emulator?_emulatorUrl(t,EMULATOR_WIDGET_PATH):`https://${t.authDomain}/${WIDGET_PATH}`}const WEB_STORAGE_SUPPORT_KEY="webStorageSupport";class BrowserPopupRedirectResolver{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=browserSessionPersistence,this._completeRedirectFn=_getRedirectResult,this._overrideRedirectResult=_overrideRedirectResult}async _openPopup(e,n,o,c){var a;debugAssert((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const l=await _getRedirectUrl(e,n,o,_getCurrentUrl(),c);return _open(e,l,_generateEventId())}async _openRedirect(e,n,o,c){await this._originValidation(e);const a=await _getRedirectUrl(e,n,o,_getCurrentUrl(),c);return _setWindowLocation(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:c,promise:a}=this.eventManagers[n];return c?Promise.resolve(c):(debugAssert(a,"If manager is not set, promise should be"),a)}const o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch(()=>{delete this.eventManagers[n]}),o}async initAndGetManager(e){const n=await _openIframe(e),o=new AuthEventManager(e);return n.register("authEvent",c=>(_assert$1(c?.authEvent,e,"invalid-auth-event"),{status:o.onEvent(c.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:o},this.iframes[e._key()]=n,o}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(WEB_STORAGE_SUPPORT_KEY,{type:WEB_STORAGE_SUPPORT_KEY},c=>{var a;const l=(a=c?.[0])===null||a===void 0?void 0:a[WEB_STORAGE_SUPPORT_KEY];l!==void 0&&n(!!l),_fail(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=_validateOrigin(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return _isMobileBrowser()||_isSafari()||_isIOS()}}const browserPopupRedirectResolver=BrowserPopupRedirectResolver;var name$3="@firebase/auth",version$s="1.7.0";class AuthInterop{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(o=>{e(o?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){_assert$1(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function getVersionForPlatform(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function registerAuth(t){_registerComponent(new Component("auth",(e,{options:n})=>{const o=e.getProvider("app").getImmediate(),c=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:l,authDomain:b}=o.options;_assert$1(l&&!l.includes(":"),"invalid-api-key",{appName:o.name});const v={apiKey:l,authDomain:b,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_getClientVersion(t)},A=new AuthImpl(o,c,a,v);return _initializeAuthInstance(A,n),A},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,o)=>{e.getProvider("auth-internal").initialize()})),_registerComponent(new Component("auth-internal",e=>{const n=_castAuth(e.getProvider("auth").getImmediate());return(o=>new AuthInterop(o))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),registerVersion(name$3,version$s,getVersionForPlatform(t)),registerVersion(name$3,version$s,"esm2017")}const DEFAULT_ID_TOKEN_MAX_AGE=5*60,authIdTokenMaxAge=getExperimentalSetting("authIdTokenMaxAge")||DEFAULT_ID_TOKEN_MAX_AGE;let lastPostedIdToken=null;const mintCookieFactory=t=>async e=>{const n=e&&await e.getIdTokenResult(),o=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(o&&o>authIdTokenMaxAge)return;const c=n?.token;lastPostedIdToken!==c&&(lastPostedIdToken=c,await fetch(t,{method:c?"POST":"DELETE",headers:c?{Authorization:`Bearer ${c}`}:{}}))};function getAuth(t=getApp()){const e=_getProvider(t,"auth");if(e.isInitialized())return e.getImmediate();const n=initializeAuth(t,{popupRedirectResolver:browserPopupRedirectResolver,persistence:[indexedDBLocalPersistence,browserLocalPersistence,browserSessionPersistence]}),o=getExperimentalSetting("authTokenSyncURL");if(o&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(o,location.origin);if(location.origin===a.origin){const l=mintCookieFactory(a.toString());beforeAuthStateChanged(n,l,()=>l(n.currentUser)),onIdTokenChanged(n,b=>l(b))}}const c=getDefaultEmulatorHost("auth");return c&&connectAuthEmulator(n,`http://${c}`),n}function getScriptParentElement(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}_setExternalJSProvider({loadJS(t){return new Promise((e,n)=>{const o=document.createElement("script");o.setAttribute("src",t),o.onload=e,o.onerror=c=>{const a=_createError("internal-error");a.customData=c,n(a)},o.type="text/javascript",o.charset="UTF-8",getScriptParentElement().appendChild(o)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});registerAuth("Browser");var buffer$1={},base64Js={};base64Js.byteLength=byteLength;base64Js.toByteArray=toByteArray;base64Js.fromByteArray=fromByteArray;var lookup=[],revLookup=[],Arr=typeof Uint8Array<"u"?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var i$1=0,len=code.length;i$1<len;++i$1)lookup[i$1]=code[i$1],revLookup[code.charCodeAt(i$1)]=i$1;revLookup[45]=62;revLookup[95]=63;function getLens(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");n===-1&&(n=e);var o=n===e?0:4-n%4;return[n,o]}function byteLength(t){var e=getLens(t),n=e[0],o=e[1];return(n+o)*3/4-o}function _byteLength(t,e,n){return(e+n)*3/4-n}function toByteArray(t){var e,n=getLens(t),o=n[0],c=n[1],a=new Arr(_byteLength(t,o,c)),l=0,b=c>0?o-4:o,v;for(v=0;v<b;v+=4)e=revLookup[t.charCodeAt(v)]<<18|revLookup[t.charCodeAt(v+1)]<<12|revLookup[t.charCodeAt(v+2)]<<6|revLookup[t.charCodeAt(v+3)],a[l++]=e>>16&255,a[l++]=e>>8&255,a[l++]=e&255;return c===2&&(e=revLookup[t.charCodeAt(v)]<<2|revLookup[t.charCodeAt(v+1)]>>4,a[l++]=e&255),c===1&&(e=revLookup[t.charCodeAt(v)]<<10|revLookup[t.charCodeAt(v+1)]<<4|revLookup[t.charCodeAt(v+2)]>>2,a[l++]=e>>8&255,a[l++]=e&255),a}function tripletToBase64(t){return lookup[t>>18&63]+lookup[t>>12&63]+lookup[t>>6&63]+lookup[t&63]}function encodeChunk(t,e,n){for(var o,c=[],a=e;a<n;a+=3)o=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(t[a+2]&255),c.push(tripletToBase64(o));return c.join("")}function fromByteArray(t){for(var e,n=t.length,o=n%3,c=[],a=16383,l=0,b=n-o;l<b;l+=a)c.push(encodeChunk(t,l,l+a>b?b:l+a));return o===1?(e=t[n-1],c.push(lookup[e>>2]+lookup[e<<4&63]+"==")):o===2&&(e=(t[n-2]<<8)+t[n-1],c.push(lookup[e>>10]+lookup[e>>4&63]+lookup[e<<2&63]+"=")),c.join("")}var ieee754={};ieee754.read=function(t,e,n,o,c){var a,l,b=c*8-o-1,v=(1<<b)-1,A=v>>1,S=-7,M=n?c-1:0,B=n?-1:1,P=t[e+M];for(M+=B,a=P&(1<<-S)-1,P>>=-S,S+=b;S>0;a=a*256+t[e+M],M+=B,S-=8);for(l=a&(1<<-S)-1,a>>=-S,S+=o;S>0;l=l*256+t[e+M],M+=B,S-=8);if(a===0)a=1-A;else{if(a===v)return l?NaN:(P?-1:1)*(1/0);l=l+Math.pow(2,o),a=a-A}return(P?-1:1)*l*Math.pow(2,a-o)};ieee754.write=function(t,e,n,o,c,a){var l,b,v,A=a*8-c-1,S=(1<<A)-1,M=S>>1,B=c===23?Math.pow(2,-24)-Math.pow(2,-77):0,P=o?0:a-1,L=o?1:-1,F=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(b=isNaN(e)?1:0,l=S):(l=Math.floor(Math.log(e)/Math.LN2),e*(v=Math.pow(2,-l))<1&&(l--,v*=2),l+M>=1?e+=B/v:e+=B*Math.pow(2,1-M),e*v>=2&&(l++,v/=2),l+M>=S?(b=0,l=S):l+M>=1?(b=(e*v-1)*Math.pow(2,c),l=l+M):(b=e*Math.pow(2,M-1)*Math.pow(2,c),l=0));c>=8;t[n+P]=b&255,P+=L,b/=256,c-=8);for(l=l<<c|b,A+=c;A>0;t[n+P]=l&255,P+=L,l/=256,A-=8);t[n+P-L]|=F*128};(function(t){const e=base64Js,n=ieee754,o=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=S,t.SlowBuffer=ce,t.INSPECT_MAX_BYTES=50;const c=2147483647;t.kMaxLength=c;const{Uint8Array:a,ArrayBuffer:l,SharedArrayBuffer:b}=globalThis;S.TYPED_ARRAY_SUPPORT=v(),!S.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function v(){try{const se=new a(1),J={foo:function(){return 42}};return Object.setPrototypeOf(J,a.prototype),Object.setPrototypeOf(se,J),se.foo()===42}catch{return!1}}Object.defineProperty(S.prototype,"parent",{enumerable:!0,get:function(){if(S.isBuffer(this))return this.buffer}}),Object.defineProperty(S.prototype,"offset",{enumerable:!0,get:function(){if(S.isBuffer(this))return this.byteOffset}});function A(se){if(se>c)throw new RangeError('The value "'+se+'" is invalid for option "size"');const J=new a(se);return Object.setPrototypeOf(J,S.prototype),J}function S(se,J,re){if(typeof se=="number"){if(typeof J=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return L(se)}return M(se,J,re)}S.poolSize=8192;function M(se,J,re){if(typeof se=="string")return F(se,J);if(l.isView(se))return q(se);if(se==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof se);if(qe(se,l)||se&&qe(se.buffer,l)||typeof b<"u"&&(qe(se,b)||se&&qe(se.buffer,b)))return X(se,J,re);if(typeof se=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const he=se.valueOf&&se.valueOf();if(he!=null&&he!==se)return S.from(he,J,re);const ye=ee(se);if(ye)return ye;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof se[Symbol.toPrimitive]=="function")return S.from(se[Symbol.toPrimitive]("string"),J,re);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof se)}S.from=function(se,J,re){return M(se,J,re)},Object.setPrototypeOf(S.prototype,a.prototype),Object.setPrototypeOf(S,a);function B(se){if(typeof se!="number")throw new TypeError('"size" argument must be of type number');if(se<0)throw new RangeError('The value "'+se+'" is invalid for option "size"')}function P(se,J,re){return B(se),se<=0?A(se):J!==void 0?typeof re=="string"?A(se).fill(J,re):A(se).fill(J):A(se)}S.alloc=function(se,J,re){return P(se,J,re)};function L(se){return B(se),A(se<0?0:te(se)|0)}S.allocUnsafe=function(se){return L(se)},S.allocUnsafeSlow=function(se){return L(se)};function F(se,J){if((typeof J!="string"||J==="")&&(J="utf8"),!S.isEncoding(J))throw new TypeError("Unknown encoding: "+J);const re=ue(se,J)|0;let he=A(re);const ye=he.write(se,J);return ye!==re&&(he=he.slice(0,ye)),he}function U(se){const J=se.length<0?0:te(se.length)|0,re=A(J);for(let he=0;he<J;he+=1)re[he]=se[he]&255;return re}function q(se){if(qe(se,a)){const J=new a(se);return X(J.buffer,J.byteOffset,J.byteLength)}return U(se)}function X(se,J,re){if(J<0||se.byteLength<J)throw new RangeError('"offset" is outside of buffer bounds');if(se.byteLength<J+(re||0))throw new RangeError('"length" is outside of buffer bounds');let he;return J===void 0&&re===void 0?he=new a(se):re===void 0?he=new a(se,J):he=new a(se,J,re),Object.setPrototypeOf(he,S.prototype),he}function ee(se){if(S.isBuffer(se)){const J=te(se.length)|0,re=A(J);return re.length===0||se.copy(re,0,0,J),re}if(se.length!==void 0)return typeof se.length!="number"||At(se.length)?A(0):U(se);if(se.type==="Buffer"&&Array.isArray(se.data))return U(se.data)}function te(se){if(se>=c)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+c.toString(16)+" bytes");return se|0}function ce(se){return+se!=se&&(se=0),S.alloc(+se)}S.isBuffer=function(J){return J!=null&&J._isBuffer===!0&&J!==S.prototype},S.compare=function(J,re){if(qe(J,a)&&(J=S.from(J,J.offset,J.byteLength)),qe(re,a)&&(re=S.from(re,re.offset,re.byteLength)),!S.isBuffer(J)||!S.isBuffer(re))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(J===re)return 0;let he=J.length,ye=re.length;for(let Oe=0,Ee=Math.min(he,ye);Oe<Ee;++Oe)if(J[Oe]!==re[Oe]){he=J[Oe],ye=re[Oe];break}return he<ye?-1:ye<he?1:0},S.isEncoding=function(J){switch(String(J).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},S.concat=function(J,re){if(!Array.isArray(J))throw new TypeError('"list" argument must be an Array of Buffers');if(J.length===0)return S.alloc(0);let he;if(re===void 0)for(re=0,he=0;he<J.length;++he)re+=J[he].length;const ye=S.allocUnsafe(re);let Oe=0;for(he=0;he<J.length;++he){let Ee=J[he];if(qe(Ee,a))Oe+Ee.length>ye.length?(S.isBuffer(Ee)||(Ee=S.from(Ee)),Ee.copy(ye,Oe)):a.prototype.set.call(ye,Ee,Oe);else if(S.isBuffer(Ee))Ee.copy(ye,Oe);else throw new TypeError('"list" argument must be an Array of Buffers');Oe+=Ee.length}return ye};function ue(se,J){if(S.isBuffer(se))return se.length;if(l.isView(se)||qe(se,l))return se.byteLength;if(typeof se!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof se);const re=se.length,he=arguments.length>2&&arguments[2]===!0;if(!he&&re===0)return 0;let ye=!1;for(;;)switch(J){case"ascii":case"latin1":case"binary":return re;case"utf8":case"utf-8":return $t(se).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return re*2;case"hex":return re>>>1;case"base64":return St(se).length;default:if(ye)return he?-1:$t(se).length;J=(""+J).toLowerCase(),ye=!0}}S.byteLength=ue;function Ae(se,J,re){let he=!1;if((J===void 0||J<0)&&(J=0),J>this.length||((re===void 0||re>this.length)&&(re=this.length),re<=0)||(re>>>=0,J>>>=0,re<=J))return"";for(se||(se="utf8");;)switch(se){case"hex":return I(this,J,re);case"utf8":case"utf-8":return $(this,J,re);case"ascii":return d(this,J,re);case"latin1":case"binary":return w(this,J,re);case"base64":return E(this,J,re);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,J,re);default:if(he)throw new TypeError("Unknown encoding: "+se);se=(se+"").toLowerCase(),he=!0}}S.prototype._isBuffer=!0;function we(se,J,re){const he=se[J];se[J]=se[re],se[re]=he}S.prototype.swap16=function(){const J=this.length;if(J%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let re=0;re<J;re+=2)we(this,re,re+1);return this},S.prototype.swap32=function(){const J=this.length;if(J%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let re=0;re<J;re+=4)we(this,re,re+3),we(this,re+1,re+2);return this},S.prototype.swap64=function(){const J=this.length;if(J%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let re=0;re<J;re+=8)we(this,re,re+7),we(this,re+1,re+6),we(this,re+2,re+5),we(this,re+3,re+4);return this},S.prototype.toString=function(){const J=this.length;return J===0?"":arguments.length===0?$(this,0,J):Ae.apply(this,arguments)},S.prototype.toLocaleString=S.prototype.toString,S.prototype.equals=function(J){if(!S.isBuffer(J))throw new TypeError("Argument must be a Buffer");return this===J?!0:S.compare(this,J)===0},S.prototype.inspect=function(){let J="";const re=t.INSPECT_MAX_BYTES;return J=this.toString("hex",0,re).replace(/(.{2})/g,"$1 ").trim(),this.length>re&&(J+=" ... "),"<Buffer "+J+">"},o&&(S.prototype[o]=S.prototype.inspect),S.prototype.compare=function(J,re,he,ye,Oe){if(qe(J,a)&&(J=S.from(J,J.offset,J.byteLength)),!S.isBuffer(J))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof J);if(re===void 0&&(re=0),he===void 0&&(he=J?J.length:0),ye===void 0&&(ye=0),Oe===void 0&&(Oe=this.length),re<0||he>J.length||ye<0||Oe>this.length)throw new RangeError("out of range index");if(ye>=Oe&&re>=he)return 0;if(ye>=Oe)return-1;if(re>=he)return 1;if(re>>>=0,he>>>=0,ye>>>=0,Oe>>>=0,this===J)return 0;let Ee=Oe-ye,Ue=he-re;const bt=Math.min(Ee,Ue),Le=this.slice(ye,Oe),Ve=J.slice(re,he);for(let mt=0;mt<bt;++mt)if(Le[mt]!==Ve[mt]){Ee=Le[mt],Ue=Ve[mt];break}return Ee<Ue?-1:Ue<Ee?1:0};function pe(se,J,re,he,ye){if(se.length===0)return-1;if(typeof re=="string"?(he=re,re=0):re>2147483647?re=2147483647:re<-2147483648&&(re=-2147483648),re=+re,At(re)&&(re=ye?0:se.length-1),re<0&&(re=se.length+re),re>=se.length){if(ye)return-1;re=se.length-1}else if(re<0)if(ye)re=0;else return-1;if(typeof J=="string"&&(J=S.from(J,he)),S.isBuffer(J))return J.length===0?-1:Ce(se,J,re,he,ye);if(typeof J=="number")return J=J&255,typeof a.prototype.indexOf=="function"?ye?a.prototype.indexOf.call(se,J,re):a.prototype.lastIndexOf.call(se,J,re):Ce(se,[J],re,he,ye);throw new TypeError("val must be string, number or Buffer")}function Ce(se,J,re,he,ye){let Oe=1,Ee=se.length,Ue=J.length;if(he!==void 0&&(he=String(he).toLowerCase(),he==="ucs2"||he==="ucs-2"||he==="utf16le"||he==="utf-16le")){if(se.length<2||J.length<2)return-1;Oe=2,Ee/=2,Ue/=2,re/=2}function bt(Ve,mt){return Oe===1?Ve[mt]:Ve.readUInt16BE(mt*Oe)}let Le;if(ye){let Ve=-1;for(Le=re;Le<Ee;Le++)if(bt(se,Le)===bt(J,Ve===-1?0:Le-Ve)){if(Ve===-1&&(Ve=Le),Le-Ve+1===Ue)return Ve*Oe}else Ve!==-1&&(Le-=Le-Ve),Ve=-1}else for(re+Ue>Ee&&(re=Ee-Ue),Le=re;Le>=0;Le--){let Ve=!0;for(let mt=0;mt<Ue;mt++)if(bt(se,Le+mt)!==bt(J,mt)){Ve=!1;break}if(Ve)return Le}return-1}S.prototype.includes=function(J,re,he){return this.indexOf(J,re,he)!==-1},S.prototype.indexOf=function(J,re,he){return pe(this,J,re,he,!0)},S.prototype.lastIndexOf=function(J,re,he){return pe(this,J,re,he,!1)};function T(se,J,re,he){re=Number(re)||0;const ye=se.length-re;he?(he=Number(he),he>ye&&(he=ye)):he=ye;const Oe=J.length;he>Oe/2&&(he=Oe/2);let Ee;for(Ee=0;Ee<he;++Ee){const Ue=parseInt(J.substr(Ee*2,2),16);if(At(Ue))return Ee;se[re+Ee]=Ue}return Ee}function u(se,J,re,he){return De($t(J,se.length-re),se,re,he)}function p(se,J,re,he){return De(He(J),se,re,he)}function m(se,J,re,he){return De(St(J),se,re,he)}function y(se,J,re,he){return De(Ye(J,se.length-re),se,re,he)}S.prototype.write=function(J,re,he,ye){if(re===void 0)ye="utf8",he=this.length,re=0;else if(he===void 0&&typeof re=="string")ye=re,he=this.length,re=0;else if(isFinite(re))re=re>>>0,isFinite(he)?(he=he>>>0,ye===void 0&&(ye="utf8")):(ye=he,he=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Oe=this.length-re;if((he===void 0||he>Oe)&&(he=Oe),J.length>0&&(he<0||re<0)||re>this.length)throw new RangeError("Attempt to write outside buffer bounds");ye||(ye="utf8");let Ee=!1;for(;;)switch(ye){case"hex":return T(this,J,re,he);case"utf8":case"utf-8":return u(this,J,re,he);case"ascii":case"latin1":case"binary":return p(this,J,re,he);case"base64":return m(this,J,re,he);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return y(this,J,re,he);default:if(Ee)throw new TypeError("Unknown encoding: "+ye);ye=(""+ye).toLowerCase(),Ee=!0}},S.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function E(se,J,re){return J===0&&re===se.length?e.fromByteArray(se):e.fromByteArray(se.slice(J,re))}function $(se,J,re){re=Math.min(se.length,re);const he=[];let ye=J;for(;ye<re;){const Oe=se[ye];let Ee=null,Ue=Oe>239?4:Oe>223?3:Oe>191?2:1;if(ye+Ue<=re){let bt,Le,Ve,mt;switch(Ue){case 1:Oe<128&&(Ee=Oe);break;case 2:bt=se[ye+1],(bt&192)===128&&(mt=(Oe&31)<<6|bt&63,mt>127&&(Ee=mt));break;case 3:bt=se[ye+1],Le=se[ye+2],(bt&192)===128&&(Le&192)===128&&(mt=(Oe&15)<<12|(bt&63)<<6|Le&63,mt>2047&&(mt<55296||mt>57343)&&(Ee=mt));break;case 4:bt=se[ye+1],Le=se[ye+2],Ve=se[ye+3],(bt&192)===128&&(Le&192)===128&&(Ve&192)===128&&(mt=(Oe&15)<<18|(bt&63)<<12|(Le&63)<<6|Ve&63,mt>65535&&mt<1114112&&(Ee=mt))}}Ee===null?(Ee=65533,Ue=1):Ee>65535&&(Ee-=65536,he.push(Ee>>>10&1023|55296),Ee=56320|Ee&1023),he.push(Ee),ye+=Ue}return _(he)}const k=4096;function _(se){const J=se.length;if(J<=k)return String.fromCharCode.apply(String,se);let re="",he=0;for(;he<J;)re+=String.fromCharCode.apply(String,se.slice(he,he+=k));return re}function d(se,J,re){let he="";re=Math.min(se.length,re);for(let ye=J;ye<re;++ye)he+=String.fromCharCode(se[ye]&127);return he}function w(se,J,re){let he="";re=Math.min(se.length,re);for(let ye=J;ye<re;++ye)he+=String.fromCharCode(se[ye]);return he}function I(se,J,re){const he=se.length;(!J||J<0)&&(J=0),(!re||re<0||re>he)&&(re=he);let ye="";for(let Oe=J;Oe<re;++Oe)ye+=ze[se[Oe]];return ye}function C(se,J,re){const he=se.slice(J,re);let ye="";for(let Oe=0;Oe<he.length-1;Oe+=2)ye+=String.fromCharCode(he[Oe]+he[Oe+1]*256);return ye}S.prototype.slice=function(J,re){const he=this.length;J=~~J,re=re===void 0?he:~~re,J<0?(J+=he,J<0&&(J=0)):J>he&&(J=he),re<0?(re+=he,re<0&&(re=0)):re>he&&(re=he),re<J&&(re=J);const ye=this.subarray(J,re);return Object.setPrototypeOf(ye,S.prototype),ye};function V(se,J,re){if(se%1!==0||se<0)throw new RangeError("offset is not uint");if(se+J>re)throw new RangeError("Trying to access beyond buffer length")}S.prototype.readUintLE=S.prototype.readUIntLE=function(J,re,he){J=J>>>0,re=re>>>0,he||V(J,re,this.length);let ye=this[J],Oe=1,Ee=0;for(;++Ee<re&&(Oe*=256);)ye+=this[J+Ee]*Oe;return ye},S.prototype.readUintBE=S.prototype.readUIntBE=function(J,re,he){J=J>>>0,re=re>>>0,he||V(J,re,this.length);let ye=this[J+--re],Oe=1;for(;re>0&&(Oe*=256);)ye+=this[J+--re]*Oe;return ye},S.prototype.readUint8=S.prototype.readUInt8=function(J,re){return J=J>>>0,re||V(J,1,this.length),this[J]},S.prototype.readUint16LE=S.prototype.readUInt16LE=function(J,re){return J=J>>>0,re||V(J,2,this.length),this[J]|this[J+1]<<8},S.prototype.readUint16BE=S.prototype.readUInt16BE=function(J,re){return J=J>>>0,re||V(J,2,this.length),this[J]<<8|this[J+1]},S.prototype.readUint32LE=S.prototype.readUInt32LE=function(J,re){return J=J>>>0,re||V(J,4,this.length),(this[J]|this[J+1]<<8|this[J+2]<<16)+this[J+3]*16777216},S.prototype.readUint32BE=S.prototype.readUInt32BE=function(J,re){return J=J>>>0,re||V(J,4,this.length),this[J]*16777216+(this[J+1]<<16|this[J+2]<<8|this[J+3])},S.prototype.readBigUInt64LE=Ge(function(J){J=J>>>0,Ie(J,"offset");const re=this[J],he=this[J+7];(re===void 0||he===void 0)&&et(J,this.length-8);const ye=re+this[++J]*2**8+this[++J]*2**16+this[++J]*2**24,Oe=this[++J]+this[++J]*2**8+this[++J]*2**16+he*2**24;return BigInt(ye)+(BigInt(Oe)<<BigInt(32))}),S.prototype.readBigUInt64BE=Ge(function(J){J=J>>>0,Ie(J,"offset");const re=this[J],he=this[J+7];(re===void 0||he===void 0)&&et(J,this.length-8);const ye=re*2**24+this[++J]*2**16+this[++J]*2**8+this[++J],Oe=this[++J]*2**24+this[++J]*2**16+this[++J]*2**8+he;return(BigInt(ye)<<BigInt(32))+BigInt(Oe)}),S.prototype.readIntLE=function(J,re,he){J=J>>>0,re=re>>>0,he||V(J,re,this.length);let ye=this[J],Oe=1,Ee=0;for(;++Ee<re&&(Oe*=256);)ye+=this[J+Ee]*Oe;return Oe*=128,ye>=Oe&&(ye-=Math.pow(2,8*re)),ye},S.prototype.readIntBE=function(J,re,he){J=J>>>0,re=re>>>0,he||V(J,re,this.length);let ye=re,Oe=1,Ee=this[J+--ye];for(;ye>0&&(Oe*=256);)Ee+=this[J+--ye]*Oe;return Oe*=128,Ee>=Oe&&(Ee-=Math.pow(2,8*re)),Ee},S.prototype.readInt8=function(J,re){return J=J>>>0,re||V(J,1,this.length),this[J]&128?(255-this[J]+1)*-1:this[J]},S.prototype.readInt16LE=function(J,re){J=J>>>0,re||V(J,2,this.length);const he=this[J]|this[J+1]<<8;return he&32768?he|4294901760:he},S.prototype.readInt16BE=function(J,re){J=J>>>0,re||V(J,2,this.length);const he=this[J+1]|this[J]<<8;return he&32768?he|4294901760:he},S.prototype.readInt32LE=function(J,re){return J=J>>>0,re||V(J,4,this.length),this[J]|this[J+1]<<8|this[J+2]<<16|this[J+3]<<24},S.prototype.readInt32BE=function(J,re){return J=J>>>0,re||V(J,4,this.length),this[J]<<24|this[J+1]<<16|this[J+2]<<8|this[J+3]},S.prototype.readBigInt64LE=Ge(function(J){J=J>>>0,Ie(J,"offset");const re=this[J],he=this[J+7];(re===void 0||he===void 0)&&et(J,this.length-8);const ye=this[J+4]+this[J+5]*2**8+this[J+6]*2**16+(he<<24);return(BigInt(ye)<<BigInt(32))+BigInt(re+this[++J]*2**8+this[++J]*2**16+this[++J]*2**24)}),S.prototype.readBigInt64BE=Ge(function(J){J=J>>>0,Ie(J,"offset");const re=this[J],he=this[J+7];(re===void 0||he===void 0)&&et(J,this.length-8);const ye=(re<<24)+this[++J]*2**16+this[++J]*2**8+this[++J];return(BigInt(ye)<<BigInt(32))+BigInt(this[++J]*2**24+this[++J]*2**16+this[++J]*2**8+he)}),S.prototype.readFloatLE=function(J,re){return J=J>>>0,re||V(J,4,this.length),n.read(this,J,!0,23,4)},S.prototype.readFloatBE=function(J,re){return J=J>>>0,re||V(J,4,this.length),n.read(this,J,!1,23,4)},S.prototype.readDoubleLE=function(J,re){return J=J>>>0,re||V(J,8,this.length),n.read(this,J,!0,52,8)},S.prototype.readDoubleBE=function(J,re){return J=J>>>0,re||V(J,8,this.length),n.read(this,J,!1,52,8)};function O(se,J,re,he,ye,Oe){if(!S.isBuffer(se))throw new TypeError('"buffer" argument must be a Buffer instance');if(J>ye||J<Oe)throw new RangeError('"value" argument is out of bounds');if(re+he>se.length)throw new RangeError("Index out of range")}S.prototype.writeUintLE=S.prototype.writeUIntLE=function(J,re,he,ye){if(J=+J,re=re>>>0,he=he>>>0,!ye){const Ue=Math.pow(2,8*he)-1;O(this,J,re,he,Ue,0)}let Oe=1,Ee=0;for(this[re]=J&255;++Ee<he&&(Oe*=256);)this[re+Ee]=J/Oe&255;return re+he},S.prototype.writeUintBE=S.prototype.writeUIntBE=function(J,re,he,ye){if(J=+J,re=re>>>0,he=he>>>0,!ye){const Ue=Math.pow(2,8*he)-1;O(this,J,re,he,Ue,0)}let Oe=he-1,Ee=1;for(this[re+Oe]=J&255;--Oe>=0&&(Ee*=256);)this[re+Oe]=J/Ee&255;return re+he},S.prototype.writeUint8=S.prototype.writeUInt8=function(J,re,he){return J=+J,re=re>>>0,he||O(this,J,re,1,255,0),this[re]=J&255,re+1},S.prototype.writeUint16LE=S.prototype.writeUInt16LE=function(J,re,he){return J=+J,re=re>>>0,he||O(this,J,re,2,65535,0),this[re]=J&255,this[re+1]=J>>>8,re+2},S.prototype.writeUint16BE=S.prototype.writeUInt16BE=function(J,re,he){return J=+J,re=re>>>0,he||O(this,J,re,2,65535,0),this[re]=J>>>8,this[re+1]=J&255,re+2},S.prototype.writeUint32LE=S.prototype.writeUInt32LE=function(J,re,he){return J=+J,re=re>>>0,he||O(this,J,re,4,4294967295,0),this[re+3]=J>>>24,this[re+2]=J>>>16,this[re+1]=J>>>8,this[re]=J&255,re+4},S.prototype.writeUint32BE=S.prototype.writeUInt32BE=function(J,re,he){return J=+J,re=re>>>0,he||O(this,J,re,4,4294967295,0),this[re]=J>>>24,this[re+1]=J>>>16,this[re+2]=J>>>8,this[re+3]=J&255,re+4};function j(se,J,re,he,ye){ke(J,he,ye,se,re,7);let Oe=Number(J&BigInt(4294967295));se[re++]=Oe,Oe=Oe>>8,se[re++]=Oe,Oe=Oe>>8,se[re++]=Oe,Oe=Oe>>8,se[re++]=Oe;let Ee=Number(J>>BigInt(32)&BigInt(4294967295));return se[re++]=Ee,Ee=Ee>>8,se[re++]=Ee,Ee=Ee>>8,se[re++]=Ee,Ee=Ee>>8,se[re++]=Ee,re}function D(se,J,re,he,ye){ke(J,he,ye,se,re,7);let Oe=Number(J&BigInt(4294967295));se[re+7]=Oe,Oe=Oe>>8,se[re+6]=Oe,Oe=Oe>>8,se[re+5]=Oe,Oe=Oe>>8,se[re+4]=Oe;let Ee=Number(J>>BigInt(32)&BigInt(4294967295));return se[re+3]=Ee,Ee=Ee>>8,se[re+2]=Ee,Ee=Ee>>8,se[re+1]=Ee,Ee=Ee>>8,se[re]=Ee,re+8}S.prototype.writeBigUInt64LE=Ge(function(J,re=0){return j(this,J,re,BigInt(0),BigInt("0xffffffffffffffff"))}),S.prototype.writeBigUInt64BE=Ge(function(J,re=0){return D(this,J,re,BigInt(0),BigInt("0xffffffffffffffff"))}),S.prototype.writeIntLE=function(J,re,he,ye){if(J=+J,re=re>>>0,!ye){const bt=Math.pow(2,8*he-1);O(this,J,re,he,bt-1,-bt)}let Oe=0,Ee=1,Ue=0;for(this[re]=J&255;++Oe<he&&(Ee*=256);)J<0&&Ue===0&&this[re+Oe-1]!==0&&(Ue=1),this[re+Oe]=(J/Ee>>0)-Ue&255;return re+he},S.prototype.writeIntBE=function(J,re,he,ye){if(J=+J,re=re>>>0,!ye){const bt=Math.pow(2,8*he-1);O(this,J,re,he,bt-1,-bt)}let Oe=he-1,Ee=1,Ue=0;for(this[re+Oe]=J&255;--Oe>=0&&(Ee*=256);)J<0&&Ue===0&&this[re+Oe+1]!==0&&(Ue=1),this[re+Oe]=(J/Ee>>0)-Ue&255;return re+he},S.prototype.writeInt8=function(J,re,he){return J=+J,re=re>>>0,he||O(this,J,re,1,127,-128),J<0&&(J=255+J+1),this[re]=J&255,re+1},S.prototype.writeInt16LE=function(J,re,he){return J=+J,re=re>>>0,he||O(this,J,re,2,32767,-32768),this[re]=J&255,this[re+1]=J>>>8,re+2},S.prototype.writeInt16BE=function(J,re,he){return J=+J,re=re>>>0,he||O(this,J,re,2,32767,-32768),this[re]=J>>>8,this[re+1]=J&255,re+2},S.prototype.writeInt32LE=function(J,re,he){return J=+J,re=re>>>0,he||O(this,J,re,4,2147483647,-2147483648),this[re]=J&255,this[re+1]=J>>>8,this[re+2]=J>>>16,this[re+3]=J>>>24,re+4},S.prototype.writeInt32BE=function(J,re,he){return J=+J,re=re>>>0,he||O(this,J,re,4,2147483647,-2147483648),J<0&&(J=4294967295+J+1),this[re]=J>>>24,this[re+1]=J>>>16,this[re+2]=J>>>8,this[re+3]=J&255,re+4},S.prototype.writeBigInt64LE=Ge(function(J,re=0){return j(this,J,re,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),S.prototype.writeBigInt64BE=Ge(function(J,re=0){return D(this,J,re,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Q(se,J,re,he,ye,Oe){if(re+he>se.length)throw new RangeError("Index out of range");if(re<0)throw new RangeError("Index out of range")}function oe(se,J,re,he,ye){return J=+J,re=re>>>0,ye||Q(se,J,re,4),n.write(se,J,re,he,23,4),re+4}S.prototype.writeFloatLE=function(J,re,he){return oe(this,J,re,!0,he)},S.prototype.writeFloatBE=function(J,re,he){return oe(this,J,re,!1,he)};function de(se,J,re,he,ye){return J=+J,re=re>>>0,ye||Q(se,J,re,8),n.write(se,J,re,he,52,8),re+8}S.prototype.writeDoubleLE=function(J,re,he){return de(this,J,re,!0,he)},S.prototype.writeDoubleBE=function(J,re,he){return de(this,J,re,!1,he)},S.prototype.copy=function(J,re,he,ye){if(!S.isBuffer(J))throw new TypeError("argument should be a Buffer");if(he||(he=0),!ye&&ye!==0&&(ye=this.length),re>=J.length&&(re=J.length),re||(re=0),ye>0&&ye<he&&(ye=he),ye===he||J.length===0||this.length===0)return 0;if(re<0)throw new RangeError("targetStart out of bounds");if(he<0||he>=this.length)throw new RangeError("Index out of range");if(ye<0)throw new RangeError("sourceEnd out of bounds");ye>this.length&&(ye=this.length),J.length-re<ye-he&&(ye=J.length-re+he);const Oe=ye-he;return this===J&&typeof a.prototype.copyWithin=="function"?this.copyWithin(re,he,ye):a.prototype.set.call(J,this.subarray(he,ye),re),Oe},S.prototype.fill=function(J,re,he,ye){if(typeof J=="string"){if(typeof re=="string"?(ye=re,re=0,he=this.length):typeof he=="string"&&(ye=he,he=this.length),ye!==void 0&&typeof ye!="string")throw new TypeError("encoding must be a string");if(typeof ye=="string"&&!S.isEncoding(ye))throw new TypeError("Unknown encoding: "+ye);if(J.length===1){const Ee=J.charCodeAt(0);(ye==="utf8"&&Ee<128||ye==="latin1")&&(J=Ee)}}else typeof J=="number"?J=J&255:typeof J=="boolean"&&(J=Number(J));if(re<0||this.length<re||this.length<he)throw new RangeError("Out of range index");if(he<=re)return this;re=re>>>0,he=he===void 0?this.length:he>>>0,J||(J=0);let Oe;if(typeof J=="number")for(Oe=re;Oe<he;++Oe)this[Oe]=J;else{const Ee=S.isBuffer(J)?J:S.from(J,ye),Ue=Ee.length;if(Ue===0)throw new TypeError('The value "'+J+'" is invalid for argument "value"');for(Oe=0;Oe<he-re;++Oe)this[Oe+re]=Ee[Oe%Ue]}return this};const Z={};function H(se,J,re){Z[se]=class extends re{constructor(){super(),Object.defineProperty(this,"message",{value:J.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${se}]`,this.stack,delete this.name}get code(){return se}set code(ye){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:ye,writable:!0})}toString(){return`${this.name} [${se}]: ${this.message}`}}}H("ERR_BUFFER_OUT_OF_BOUNDS",function(se){return se?`${se} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),H("ERR_INVALID_ARG_TYPE",function(se,J){return`The "${se}" argument must be of type number. Received type ${typeof J}`},TypeError),H("ERR_OUT_OF_RANGE",function(se,J,re){let he=`The value of "${se}" is out of range.`,ye=re;return Number.isInteger(re)&&Math.abs(re)>2**32?ye=ge(String(re)):typeof re=="bigint"&&(ye=String(re),(re>BigInt(2)**BigInt(32)||re<-(BigInt(2)**BigInt(32)))&&(ye=ge(ye)),ye+="n"),he+=` It must be ${J}. Received ${ye}`,he},RangeError);function ge(se){let J="",re=se.length;const he=se[0]==="-"?1:0;for(;re>=he+4;re-=3)J=`_${se.slice(re-3,re)}${J}`;return`${se.slice(0,re)}${J}`}function Me(se,J,re){Ie(J,"offset"),(se[J]===void 0||se[J+re]===void 0)&&et(J,se.length-(re+1))}function ke(se,J,re,he,ye,Oe){if(se>re||se<J){const Ee=typeof J=="bigint"?"n":"";let Ue;throw Oe>3?J===0||J===BigInt(0)?Ue=`>= 0${Ee} and < 2${Ee} ** ${(Oe+1)*8}${Ee}`:Ue=`>= -(2${Ee} ** ${(Oe+1)*8-1}${Ee}) and < 2 ** ${(Oe+1)*8-1}${Ee}`:Ue=`>= ${J}${Ee} and <= ${re}${Ee}`,new Z.ERR_OUT_OF_RANGE("value",Ue,se)}Me(he,ye,Oe)}function Ie(se,J){if(typeof se!="number")throw new Z.ERR_INVALID_ARG_TYPE(J,"number",se)}function et(se,J,re){throw Math.floor(se)!==se?(Ie(se,re),new Z.ERR_OUT_OF_RANGE(re||"offset","an integer",se)):J<0?new Z.ERR_BUFFER_OUT_OF_BOUNDS:new Z.ERR_OUT_OF_RANGE(re||"offset",`>= ${re?1:0} and <= ${J}`,se)}const Fe=/[^+/0-9A-Za-z-_]/g;function $e(se){if(se=se.split("=")[0],se=se.trim().replace(Fe,""),se.length<2)return"";for(;se.length%4!==0;)se=se+"=";return se}function $t(se,J){J=J||1/0;let re;const he=se.length;let ye=null;const Oe=[];for(let Ee=0;Ee<he;++Ee){if(re=se.charCodeAt(Ee),re>55295&&re<57344){if(!ye){if(re>56319){(J-=3)>-1&&Oe.push(239,191,189);continue}else if(Ee+1===he){(J-=3)>-1&&Oe.push(239,191,189);continue}ye=re;continue}if(re<56320){(J-=3)>-1&&Oe.push(239,191,189),ye=re;continue}re=(ye-55296<<10|re-56320)+65536}else ye&&(J-=3)>-1&&Oe.push(239,191,189);if(ye=null,re<128){if((J-=1)<0)break;Oe.push(re)}else if(re<2048){if((J-=2)<0)break;Oe.push(re>>6|192,re&63|128)}else if(re<65536){if((J-=3)<0)break;Oe.push(re>>12|224,re>>6&63|128,re&63|128)}else if(re<1114112){if((J-=4)<0)break;Oe.push(re>>18|240,re>>12&63|128,re>>6&63|128,re&63|128)}else throw new Error("Invalid code point")}return Oe}function He(se){const J=[];for(let re=0;re<se.length;++re)J.push(se.charCodeAt(re)&255);return J}function Ye(se,J){let re,he,ye;const Oe=[];for(let Ee=0;Ee<se.length&&!((J-=2)<0);++Ee)re=se.charCodeAt(Ee),he=re>>8,ye=re%256,Oe.push(ye),Oe.push(he);return Oe}function St(se){return e.toByteArray($e(se))}function De(se,J,re,he){let ye;for(ye=0;ye<he&&!(ye+re>=J.length||ye>=se.length);++ye)J[ye+re]=se[ye];return ye}function qe(se,J){return se instanceof J||se!=null&&se.constructor!=null&&se.constructor.name!=null&&se.constructor.name===J.name}function At(se){return se!==se}const ze=function(){const se="0123456789abcdef",J=new Array(256);for(let re=0;re<16;++re){const he=re*16;for(let ye=0;ye<16;++ye)J[he+ye]=se[re]+se[ye]}return J}();function Ge(se){return typeof BigInt>"u"?kt:se}function kt(){throw new Error("BigInt not supported")}})(buffer$1);const Buffer$D=buffer$1.Buffer,Blob$2=buffer$1.Blob,BlobOptions=buffer$1.BlobOptions,Buffer$1$1=buffer$1.Buffer,File=buffer$1.File,FileOptions=buffer$1.FileOptions,INSPECT_MAX_BYTES=buffer$1.INSPECT_MAX_BYTES,SlowBuffer=buffer$1.SlowBuffer,TranscodeEncoding=buffer$1.TranscodeEncoding,atob$1=buffer$1.atob,btoa$1=buffer$1.btoa,constants$1=buffer$1.constants,isAscii=buffer$1.isAscii,isUtf8=buffer$1.isUtf8,kMaxLength=buffer$1.kMaxLength,kStringMaxLength=buffer$1.kStringMaxLength,resolveObjectURL=buffer$1.resolveObjectURL,transcode=buffer$1.transcode,dist$3=Object.freeze(Object.defineProperty({__proto__:null,Blob:Blob$2,BlobOptions,Buffer:Buffer$1$1,File,FileOptions,INSPECT_MAX_BYTES,SlowBuffer,TranscodeEncoding,atob:atob$1,btoa:btoa$1,constants:constants$1,default:Buffer$D,isAscii,isUtf8,kMaxLength,kStringMaxLength,resolveObjectURL,transcode},Symbol.toStringTag,{value:"Module"})),parseApiKey=t=>{if(!t||t.length<=0)throw new Error("Unexisting API key");const e=Buffer$1$1.from(t,"hex").toString("utf-8");return JSON.parse(e)},Logger$1={log:(...t)=>{},error:(...t)=>{},warn:(...t)=>{},info:(...t)=>{},debug:(...t)=>{}};let auth$1;const signinWithGoogle=async t=>{const e=new GoogleAuthProvider,n=await signInWithPopup(auth$1,e,browserPopupRedirectResolver),{isNewUser:o}=getAdditionalUserInfo(n)||{};if(!o&&!t)throw await signOut(),new Error("auth/google-account-already-in-use");return n.user},sendLinkToEmail=async t=>{const n={url:`${window.location.origin}/?${KEYS.URL_QUERYPARAM_FINISH_SIGNUP}=true`,handleCodeInApp:!0};await sendSignInLinkToEmail(auth$1,t,n),window.localStorage.setItem(KEYS.STORAGE_EMAIL_FOR_SIGNIN_KEY,t)},signInWithLink=async()=>{if(!isSignInWithEmailLink(auth$1,window.location.href))return;let t=window.localStorage.getItem(KEYS.STORAGE_EMAIL_FOR_SIGNIN_KEY);if(t||(t=window.prompt("Please provide your email for confirmation")),!t)throw new Error("No email provided");const e=await signInWithEmailLink(auth$1,t,window.location.href);return window.localStorage.removeItem(KEYS.STORAGE_EMAIL_FOR_SIGNIN_KEY),e},signInAsAnonymous=async()=>await signInAnonymously(auth$1),signInWithEmailPwd=async(t,e,n)=>{let o;try{o=(await createUserWithEmailAndPassword(auth$1,t,e)).user,o.emailVerified||await sendEmailVerification(o)}catch(c){if(c?.code==="auth/email-already-in-use"&&n)return o=(await signInWithEmailAndPassword(auth$1,t,e)).user,o;throw c}if(!o)throw new Error("User not found");return o},signOut=async()=>{await signOut$1(auth$1)},initialize$1=t=>{auth$1=t},getOnAuthStateChanged=t=>onAuthStateChanged(auth$1,e=>t(e)),getCurrentUserAuth=async()=>auth$1.currentUser,FirebaseAuthProvider={signinWithGoogle,sendLinkToEmail,signInWithLink,signInAsAnonymous,signInWithEmailPwd,signOut,getOnAuthStateChanged,getCurrentUserAuth,initialize:initialize$1};class Crypto{static iteration=1e3;static encryptionAlgorithm="AES-GCM";static ivLength=12;static saltLength=16;static digest="SHA-256";static enc=new TextEncoder;static dec=new TextDecoder;static base64Encode(e){return btoa(String.fromCharCode.apply(void 0,[...e]))}static base64Decode(e){return Uint8Array.from(atob(e),n=>n.charCodeAt(0))}static getPasswordKey(e){return window.crypto.subtle.importKey("raw",Crypto.enc.encode(e),"PBKDF2",!1,["deriveKey"])}static deriveKey(e,n,o,c,a,l){return window.crypto.subtle.deriveKey({name:"PBKDF2",salt:n,iterations:o,hash:c},e,{name:a,length:256},!1,l)}static async encrypt(e,n){try{const o=window.crypto.getRandomValues(new Uint8Array(Crypto.saltLength)),c=window.crypto.getRandomValues(new Uint8Array(Crypto.ivLength)),a=await Crypto.getPasswordKey(e),l=await Crypto.deriveKey(a,o,Crypto.iteration,Crypto.digest,Crypto.encryptionAlgorithm,["encrypt"]),b=await window.crypto.subtle.encrypt({name:Crypto.encryptionAlgorithm,iv:c},l,Crypto.enc.encode(n)),v=new Uint8Array(b),A=new Uint8Array(o.byteLength+c.byteLength+v.byteLength);return A.set(o,0),A.set(c,o.byteLength),A.set(v,o.byteLength+c.byteLength),Crypto.base64Encode(A)}catch{return""}}static async decrypt(e,n){try{const o=Crypto.base64Decode(n),c=o.slice(0,Crypto.saltLength),a=o.slice(Crypto.saltLength,Crypto.saltLength+Crypto.ivLength),l=o.slice(Crypto.saltLength+Crypto.ivLength),b=await Crypto.getPasswordKey(e),v=await Crypto.deriveKey(b,c,Crypto.iteration,Crypto.digest,Crypto.encryptionAlgorithm,["decrypt"]),A=await window.crypto.subtle.decrypt({name:Crypto.encryptionAlgorithm,iv:a},v,l);return Crypto.dec.decode(A)}catch(o){throw new Error(o?.message||"Error while decrypting data. <br/>Invalid secret or content.")}}static async signMessageFromPassword(e,n){const o=await window.crypto.subtle.importKey("raw",Crypto.enc.encode(e),{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),c=await window.crypto.subtle.sign({name:"HMAC",hash:{name:"SHA-256"}},o,Crypto.enc.encode(n));return Crypto.base64Encode(new Uint8Array(c))}static async verifySignatureFromPassword(e,n,o){const c=await window.crypto.subtle.importKey("raw",Crypto.enc.encode(e),{name:"HMAC",hash:{name:"SHA-256"}},!1,["verify"]);return await window.crypto.subtle.verify({name:"HMAC",hash:{name:"SHA-256"}},c,new Uint8Array(Crypto.base64Decode(o)),Crypto.enc.encode(n))}static async generatePrivateKeyFromPassword(e){const n=await window.crypto.subtle.importKey("raw",Crypto.enc.encode(e),"PBKDF2",!1,["deriveBits"]),o=window.crypto.getRandomValues(new Uint8Array(Crypto.saltLength)),c=await window.crypto.subtle.deriveBits({name:"PBKDF2",salt:o,iterations:Crypto.iteration,hash:Crypto.digest},n,256);return Crypto.base64Encode(new Uint8Array(c))}}const generateBucketNameUsingWebGlSignature=()=>{const t=[],n=document.createElement("canvas").getContext("webgl2");t.push(n?.getParameter(n.RENDERER)),t.push(n?.getParameter(n.VENDOR));const o=n?.getExtension("WEBGL_debug_renderer_info");t.push(o?.UNMASKED_RENDERER_WEBGL),t.push(o?.UNMASKED_VENDOR_WEBGL);const c=new TextEncoder().encode(t.join(""));return btoa(String.fromCharCode(...c))},generateUIDUsingCanvasID=()=>{const t=document.createElement("canvas");t.height=100,t.width=800;const e=t.getContext("2d");return e!==null&&(e.font="30px Arial",e?.fillText("Hello World",20,90)),t.toDataURL().split(",").pop()},Environment=Object.freeze({applyEncryption:()=>!0,bucketName:generateBucketNameUsingWebGlSignature()}),isStringified=Object.freeze((t="")=>{try{return JSON.parse(t)}catch{return t}});class LocalStorage{_uid;_inMemoryDB;async initialize(){const e=generateUIDUsingCanvasID().slice(0,16);this._uid=e,await this._getDatabase()}async _getDatabase(){if(!this._inMemoryDB){const e=window.localStorage.getItem(Environment.bucketName)||void 0,n=Environment.applyEncryption()&&this._uid&&e?await Crypto.decrypt(this._uid,e):e,o=isStringified(n);this._inMemoryDB=new Map(o)}return this._inMemoryDB}async _saveDatabase(){if(!this._inMemoryDB)throw new Error("Database not initialized");const e=JSON.stringify(Array.from(this._inMemoryDB.entries())),n=Environment.applyEncryption()&&this._uid&&e?await Crypto.encrypt(this._uid,e):e;window.localStorage.setItem(Environment.bucketName,n)}getUniqueID(){return this._uid}async getItem(e){return await this._getDatabase().then(o=>o.get(e))||null}async setItem(e,n){if(!this._inMemoryDB)throw new Error("Database not initialized");this._inMemoryDB.set(e,n),await this._saveDatabase()}async removeItem(e){if(!this._inMemoryDB)throw new Error("Database not initialized");this._inMemoryDB.delete(e),await this._saveDatabase(),this._inMemoryDB.size===0&&window.localStorage.removeItem(Environment.bucketName)}async removeItems(e){for(const n of e)await this.removeItem(n)}async clear(){this._inMemoryDB=new Map,window.localStorage.clear()}}const storageProvider=new LocalStorage,html=`<dialog class="dialog">
	<form method="dialog">
		<button type="reset" id="cancel">
			<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg">
				<path
					d="M12 10.586L15.879 6.707a1 1 0 011.414 1.414L13.414 12l3.879 3.879a1 1 0 01-1.414 1.414L12 13.414l-3.879 3.879a1 1 0 01-1.414-1.414L10.586 12 6.707 8.121a1 1 0 111.414-1.414L12 10.586z"
					class="app-icon"
				></path>
			</svg>
		</button>
		<p class="title">Onboard using {{integrator}}</p>
		<div id="logo">
			<svg width="49" height="51" xmlns="http://www.w3.org/2000/svg">
				<path
					d="M3.9468 10.0288L20.5548.995c2.4433-1.3267 5.45-1.3267 7.8936 0l16.6078 9.0338C47.4966 11.3585 49 13.8102 49 16.4666V34.534c0 2.6537-1.5034 5.1082-3.9438 6.438l-16.6078 9.0307c-2.4435 1.3297-5.4503 1.3297-7.8937 0L3.9467 40.972C1.5035 39.642 0 37.1876 0 34.534V16.4667c0-2.6564 1.5034-5.108 3.9468-6.4378z"
					class="app-icon"
				></path>
			</svg>
		</div>

		<div id="dialog__auth_provider_methods">
			<div class="buttonsList">
				<button type="reset" id="connect-google">
					<svg
						width="28px"
						height="28px"
						viewBox="-3 0 262 262"
						xmlns="http://www.w3.org/2000/svg"
						preserveAspectRatio="xMidYMid"
					>
						<path
							d="M255.878 133.451c0-10.734-.871-18.567-2.756-26.69H130.55v48.448h71.947c-1.45 12.04-9.283 30.172-26.69 42.356l-.244 1.622 38.755 30.023 2.685.268c24.659-22.774 38.875-56.282 38.875-96.027"
							fill="#4285F4"
						/>
						<path
							d="M130.55 261.1c35.248 0 64.839-11.605 86.453-31.622l-41.196-31.913c-11.024 7.688-25.82 13.055-45.257 13.055-34.523 0-63.824-22.773-74.269-54.25l-1.531.13-40.298 31.187-.527 1.465C35.393 231.798 79.49 261.1 130.55 261.1"
							fill="#34A853"
						/>
						<path
							d="M56.281 156.37c-2.756-8.123-4.351-16.827-4.351-25.82 0-8.994 1.595-17.697 4.206-25.82l-.073-1.73L15.26 71.312l-1.335.635C5.077 89.644 0 109.517 0 130.55s5.077 40.905 13.925 58.602l42.356-32.782"
							fill="#FBBC05"
						/>
						<path
							d="M130.55 50.479c24.514 0 41.05 10.589 50.479 19.438l36.844-35.974C195.245 12.91 165.798 0 130.55 0 79.49 0 35.393 29.301 13.925 71.947l42.211 32.783c10.59-31.477 39.891-54.251 74.414-54.251"
							fill="#EB4335"
						/>
					</svg>
					Connect with Google
				</button>

				<p class="or">or</p>

				<button type="reset" id="connect-email">Email</button>

				<button type="reset" id="connect-wallet">
					<svg
						xmlns="http://www.w3.org/2000/svg"
						class="ionicon"
						viewBox="0 0 512 512"
						width="28px"
						height="28px"
					>
						<rect
							x="48"
							y="144"
							width="416"
							height="288"
							rx="48"
							ry="48"
							fill="none"
							stroke="currentColor"
							stroke-linejoin="round"
							stroke-width="32"
						/>
						<path
							d="M411.36 144v-30A50 50 0 00352 64.9L88.64 109.85A50 50 0 0048 159v49"
							fill="none"
							stroke="currentColor"
							stroke-linejoin="round"
							stroke-width="32"
						/>
						<path d="M368 320a32 32 0 1132-32 32 32 0 01-32 32z" />
					</svg>
					Connect wallet
				</button>

				<button type="reset" id="create-new-wallet">
					<small>Create new Wallet</small>
				</button>
			</div>

			<div id="spinner" style="display: none"></div>
		</div>
		<p class="policy"><a href="#">Privacy Policy</a> - <a href="#">Terms</a></p>
		<p class="powered-by">
			Powered by
			<a href="https://hexaonelabs.com" target="_blank" rel="noopener"
				>HexaOne Labs</a
			>
		</p>
	</form>
</dialog>
`,css$4=`:host([theme='light']) {
	--icon-color: #180d68;
	--dialog-box-shadow: 0 0 2rem 0 rgba(0, 0, 0, '0.1');
	--dialog-background-color: #fff;
	--text-color: #242424;
	--text-link: #646cff;
	--text-link-hover: #747bff;
	--dialog-border: solid 1px #ccc;
	--button-background: #fff;
	--button-hover-background: #f5f5f5;
}

:host([theme='dark']) {
	--icon-color: #fff;
	--dialog-box-shadow: 0 0 2rem 0 rgba(0, 0, 0, '0.3');
	--dialog-background-color: #242424;
	--text-color: #fff;
	--text-link: #646cff;
	--text-link-hover: #535bf2;
	--dialog-border: solid 1px #2c2c2c;
	--button-background: #1a1a1a;
	--button-hover-background: #333333;
}

@keyframes slide-in-up {
	0% {
		-webkit-tranform: translateY(100%);
		-moz-tranform: translateY(100%);
		transform: translateY(100%);
	}
}

:host .app-icon {
	fill: var(--icon-color);
}

:host {
	--animation-scale-down: scale-down 0.125s var(--ease);
	--animation-slide-in-down: slide-in-down 0.125s ease-in-out;
	--animation-slide-in-up: slide-in-up 0.125s var(--ease);
	--ease: cubic-bezier(0.25, 0, 0.3, 1);
	--ease-elastic-in-out: cubic-bezier(0.5, -0.5, 0.1, 1.5);
	--ease-squish: var(--ease-elastic-in-out);

	font-family: Inter, system-ui, Avenir, Helvetica, Arial, sans-serif;
	line-height: 1.5;
	font-weight: 400;
	color-scheme: light dark;
	box-sizing: border-box;
}

:host * {
	box-sizing: border-box;
}

:host dialog {
	z-index: 9999;
	overflow: hidden;
	transition: all 0.125s;
	box-shadow: var(--dialog-box-shadow);
	display: block;
	inset: 0;
	background-color: var(--dialog-background-color);
	color: var(--text-color);
	position: fixed;
	border: var(--dialog-border);
	border-radius: 32px;
	padding: 0px;
	text-align: center;
	width: 80vw;
	max-width: 400px;
	box-sizing: border-box;
	cursor: default;
	font-synthesis: none;
	text-rendering: optimizeLegibility;
	-webkit-font-smoothing: antialiased;
	-moz-osx-font-smoothing: grayscale;
	transition: all 0.125s ease-in-out;
}

:host dialog:not([open]) {
	pointer-events: none;
	opacity: 0;
}
:host dialog[open] {
	opacity: 1;
	/* animation: slide-in-up 0.225s ease-in-out forwards; */
}

:host dialog::backdrop {
	background-color: rgba(0, 0, 0, 0.2);
}

:host dialog form {
	width: 100%;
}

:host dialog #logo svg,
:host dialog #logo img {
	margin: 2em auto 3rem;
	display: block;
	transform: scale(1.5);
}

:host dialog #logo img {
	width: 58px;
}

a {
	color: #646cff;
	text-decoration: inherit;
}

:host a:hover {
	color: var(--text-link-hover);
}

:host p {
	font-size: 0.8rem;
	font-weight: 400;
	margin: 12px auto 0rem;
	max-width: 300px;
}

:host dialog p.title {
	font-size: 0.6rem;
	margin: 1rem auto;
}
:host dialog p.or {
	font-size: 0.8rem;
	opacity: 0.8;
}

:host p.policy {
	font-size: 0.6rem;
	margin: 1.5rem auto 0rem;
	border-top: solid 1px var(--button-hover-background);
	padding-top: 1rem;
	width: 100%;
	max-width: 100%;
}
:host p.powered-by {
	font-size: 0.5rem;
	margin: 0.2rem auto 1rem;
	opacity: 0.8;
}

:host .buttonsList {
	position: relative;
	padding: 0 16px;
}

:host *:focus-visible {
	outline: none;
	outline-offset: 2px;
}

:host dialog button {
	max-width: 300px;
	margin-left: auto;
	margin-right: auto;
}

:host dialog button:not(#cancel) {
	text-align: center;
	background-color: var(--button-background);
	color: var(--text-color);
	border: var(--dialog-border);
	border-radius: 24px;
	cursor: pointer;
	font-size: 16px;
	font-weight: 600;
	margin-top: 16px;
	padding: 12px 16px;
	display: flex;
	justify-content: center;
	width: 100%;
	min-width: 280px;
	min-height: 54px;
	align-items: center;
	font-family: 'Roboto', sans-serif;
	font-weight: 400;
	line-height: 20px;
}

:host dialog button:not(#cancel):not([disabled]):hover {
	background-color: var(--button-hover-background);
}

:host dialog button[disabled] {
	opacity: 0.6;
	cursor: not-allowed !important;
}

:host dialog button:not(#cancel) svg {
	margin-right: 8px;
}

:host .buttonsList button#create-new-wallet {
	border: none;
	background: transparent;
	padding: 0;
	margin: 0 auto;
	opacity: 0.6;
}
:host .buttonsList button#create-new-wallet:hover {
	background-color: transparent !important;
}

:host #cancel {
	background-color: transparent;
	border: none;
	color: var(--text-color);
	cursor: pointer;
	position: absolute;
	right: 16px;
	top: 16px;
}

@media (max-width: 600px) {
	:host dialog {
		width: 100vw;
		height: 100vh;
		max-width: 100vw;
		min-height: 100vh;
		border-radius: 0;
		border: none;
		margin: 0;
		display: flex;
		align-items: start;
		justify-content: center;
		overflow-y: scroll;
	}
}
`;class StorageService{_storageProvider;constructor(){}async initialize(e,n){return this._storageProvider=e,this._storageProvider.initialize(n)}async getItem(e){return this._storageProvider.getItem(e)}async setItem(e,n){return this._storageProvider.setItem(e,n)}async removeItem(e){return this._storageProvider.removeItem(e)}async clear(){return this._storageProvider.clear()}async isExistingPrivateKeyStored(){return!!window.localStorage.getItem(Environment.bucketName)}async executeBackup(e,n){const o=await this._getBackup(),c=e===!0;if(!n&&c)throw new Error("Secret is required to decrypt the private key");const a=!c&&n?await Crypto.decrypt(n,o):o,l=new Blob([a],{type:"text/plain"}),b=URL.createObjectURL(l),v=document.createElement("a");v.href=b,v.download=`hexa-backup-${new Date().toISOString().replace(/:/g,"-").split(".")[0]}.txt`,v.click(),URL.revokeObjectURL(b),await new Promise(A=>setTimeout(A,500)),localStorage.removeItem(KEYS.STORAGE_BACKUP_KEY),await this._storageProvider.removeItem(KEYS.STORAGE_SKIP_BACKUP_KEY)}getUniqueID(){return this._storageProvider.getUniqueID()}async _getBackup(){if(!window.localStorage.getItem(Environment.bucketName))throw new Error("Database empty");const n=await this._storageProvider.getItem(KEYS.STORAGE_PRIVATEKEY_KEY);if(!n)throw new Error("Private key not found");return n}}const storageService=new StorageService,promptPasswordElement=async(t,e)=>{const c=e?.requestPwd||!1,a=!await storageService.isExistingPrivateKeyStored()&&c!==!0,l=(b,v)=>v?b.value.length>0&&v.value.length>0&&b.value===v.value:b.value.length>0;return new Promise(b=>{const v=document.createElement("div");v.classList.add("prompt-container");const A=`
    <style>
      .prompt-container {
        background: var(--dialog-background-color);
        height: 100%;
        width: 100%;
        display: flex;
        flex-direction: column;
        justify-content: center;
        padding: 0rem;
        box-sizing: border-box;
      }

      .prompt__input {
        display: block;
        min-height: 50px;
        width: 100%;
        max-width: 300px;
        margin: 0rem auto 0.5rem;
        text-align: center;
        color: var(--text-color);
        background: var(--button-background);
        border: var(--dialog-border);
        border-radius: 12px;
        padding: 12px 16px;
        font-size: 1em;
        text-align: center;
      }
      .prompt__message { 
        margin-bottom: 1.5rem;
      }
			.prompt__message h4 {
				margin: 0 auto -0.7rem;
				font-size: 1.3em;
			}
      .prompt__button {
        margin-top: 1rem;
      }

    </style>
      <div class="prompt__message">
				${a?"<h4>Create a new Wallet</h4>":"<h4>Connect you Wallet</h4>"}
        <p><b>${a?"Protect your Wallet with a password":"Welcome back!"}</b></p>
        <p>
          ${a?"The password you enter encrypts your private key and gives access to your funds. Please store your password in a safe place. We dont keep your information and cant restore it.":"Unlock your wallet with your password."}
        </p>
      </div>
      <input 
        class="prompt__input password" 
        name="password"
        type="password" 
        minLength="4"
        maxLength="32"
        autocomplet="${a?"new-password":"current-password"}"
        placeholder="password" />
      ${a?`
            <input 
              class="prompt__input confirme" 
              name="confirme"
              type="password" 
              minLength="4"
              maxLength="32"
              autocomplet="new-password"
              placeholder="confirme password" />
              `:""}
      <button disabled class="prompt__button">OK</button>
    `;v.innerHTML=A,t.after(v),t.style.display="none";const S=v.querySelector(".prompt__input.password"),M=v.querySelector(".prompt__input.confirme"),B=v.querySelector(".prompt__button");B.addEventListener("click",()=>{b(S.value),v.remove(),a||(t.style.display="block")}),S.addEventListener("input",()=>{const P=l(S,M);B.disabled=!P}),a&&M.addEventListener("input",()=>{const P=l(S,M);B.disabled=!P})})},isValideInputs=(t,e)=>!e||!t?!1:t.value.length>0&&e.value.length>0,promptEmailPasswordElement=async t=>{const o=!await storageService.isExistingPrivateKeyStored();return new Promise(c=>{const a=document.createElement("div");a.classList.add("prompt-container");const l=`
    <style>
      .prompt-container {
        background: var(--dialog-background-color);
        height: 100%;
        width: 100%;
        display: flex;
        flex-direction: column;
        justify-content: center;
        padding: 0rem;
        box-sizing: border-box;
      }

      .prompt__input {
        display: block;
        min-height: 50px;
        width: 100%;
        max-width: 300px;
        margin: 0rem auto 0.5rem;
        text-align: center;
        color: var(--text-color);
        background: var(--button-background);
        border: var(--dialog-border);
        border-radius: 12px;
        padding: 12px 16px;
        font-size: 1em;
        text-align: center;
      }
      .prompt__message { 
        margin-bottom: 1.5rem;
      }			
      .prompt__message h4 {
				margin: 0 auto -0.7rem;
				font-size: 1.3em;
			}
      .prompt__button {
        margin-top: 1rem;
      }

    </style>
    <div class="prompt__message">
      ${o?"<h4>Create a new Wallet</h4>":"<h4>Connect you Wallet</h4>"}
      <p><b>${o?"Protect your Wallet with a password":"Welcome back!"}</b></p>
      <p>
        ${o?"The password you enter encrypts your private key and gives access to your funds. Please store your password in a safe place. We dont keep your information and cant restore it.":"Unlock Wallet with email & password."}
      </p>
    </div>
    <input 
      class="prompt__input email" 
      name="email"
      type="email" 
      minLength="4"
      placeholder="email" />
    <input 
      class="prompt__input password" 
      name="password"
      type="password" 
      minLength="4"
      maxLength="32"
      autocomplet="current-password"
      placeholder="password" />
    <button disabled class="prompt__button">Connect</button>
    `;a.innerHTML=l,t.after(a),t.style.display="none";const b=a.querySelector(".prompt__input.password"),v=a.querySelector(".prompt__input.email"),A=a.querySelector(".prompt__button");b.addEventListener("input",()=>{const S=isValideInputs(b,v);A.disabled=!S}),A.addEventListener("click",()=>{c({password:b.value,email:v.value}),a.remove(),t.style.display="block"})})},CheckboxElement=t=>{const{label:e,id:n}=t||{};return`
    <style>
    
      .checkbox__container {
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0.25rem auto;
        font-size: 0.8rem;
      }

      input[type='checkbox'] {
        -webkit-appearance: none;
        appearance: none;
        width: 20px;
        height: 20px;
        border: var(--dialog-border);
        display: grid;
        place-content: center;
        background-color: var(--dialog-background-color);
        border-radius: 4px;
        cursor: pointer;
        transition: all 125ms ease-in-out;
      }

      input[type='checkbox']::after {
        content: '';
        width: 20px;
        height: 20px;
        transform: scale(0);
        background-color: var(--dialog-background-color);
        clip-path: polygon(17% 54%, 28% 43%, 38% 54%, 70% 22%, 81% 33%, 38% 75%, 17% 54%);
      }

      input[type='checkbox']:checked {
        background-color: var(--dialog-background-color);
      }

      input[type='checkbox']::after {
        transform: scale(1);
      }

      input[type='checkbox']:checked::after {
        background-color: var(--text-color);
      }
    </style>
    <div class="checkbox__container">
      <input type="checkbox" id="${n}" name="${n}" checked="true">
      <label for="${n}">${e}</label>
    </div>
  `},css$3=`.button__skip {
	cursor: pointer;
}
`,promptToDownloadElement=async t=>{const e=document.createElement("div");return e.classList.add("prompt-container"),t.after(e),t.style.display="none",new Promise(n=>{e.innerHTML=`
      <style>${css$3}</style>
      <p>
        <b>
          Backup your wallet PrivateKey
        </b>
      </p>
      <p>
        Download your backup file. We don't keep any copies of your private key, so make sure to keep it safe! 
        It's the only way to recover your wallet.
      </p>

      ${CheckboxElement({label:"Encrypt backup file",id:"toggle__encription"})}

      <button id="button__download">Download backup file</button>
      
      <p><a class="button__skip">skip</a></p>
    `;const o=e.querySelector("#toggle__encription");e.querySelector(".button__skip").addEventListener("click",l=>{l.preventDefault(),n({skip:!0}),e.remove(),t.style.display="block"}),e.querySelector("#button__download").addEventListener("click",async()=>{n({withEncryption:o.checked}),e.remove(),t.style.display="block"})})},SpinnerElement=()=>`
  <style>

  .circular-loader {
    -webkit-animation: rotate 2s linear infinite;
            animation: rotate 2s linear infinite;
    height: 100%;
    -webkit-transform-origin: center center;
        -ms-transform-origin: center center;
            transform-origin: center center;
    width: 100%;
    position: relative;
    top: 0;
    left: 0;
    margin: auto;
    max-width: 115px
  }
  
  .loader-path {
    stroke-dasharray: 150,200;
    stroke-dashoffset: -10;
    -webkit-animation: dash 1.5s ease-in-out infinite, color 6s ease-in-out infinite;
            animation: dash 1.5s ease-in-out infinite, color 6s ease-in-out infinite;
    stroke-linecap: round;
  }
  
  @-webkit-keyframes rotate {
    100% {
      -webkit-transform: rotate(360deg);
              transform: rotate(360deg);
    }
  }
  
  @keyframes rotate {
    100% {
      -webkit-transform: rotate(360deg);
              transform: rotate(360deg);
    }
  }
  @-webkit-keyframes dash {
    0% {
      stroke-dasharray: 1,200;
      stroke-dashoffset: 0;
    }
    50% {
      stroke-dasharray: 89,200;
      stroke-dashoffset: -35;
    }
    100% {
      stroke-dasharray: 89,200;
      stroke-dashoffset: -124;
    }
  }
  @keyframes dash {
    0% {
      stroke-dasharray: 1,200;
      stroke-dashoffset: 0;
    }
    50% {
      stroke-dasharray: 89,200;
      stroke-dashoffset: -35;
    }
    100% {
      stroke-dasharray: 89,200;
      stroke-dashoffset: -124;
    }
  }
  @-webkit-keyframes color {
    0% {
      stroke: var(--icon-color);
    }
    40% {
      stroke: var(--icon-color);
    }
    66% {
      stroke: var(--icon-color);
    }
    80%, 90% {
      stroke: var(--icon-color);
    }
  }
  @keyframes color {
    0% {
      stroke: var(--icon-color);
    }
    40% {
      stroke: var(--icon-color);
    }
    66% {
      stroke: var(--icon-color);
    }
    80%, 90% {
      stroke: var(--icon-color);
    }
  }
  
  </style>
  <svg class="circular-loader"viewBox="25 25 50 50" >
      <circle class="loader-path" cx="50" cy="50" r="20" fill="none" stroke="var(--icon-color)" stroke-width="2" />
  </svg>
  `,extensionIcon='<svg xmlns="http://www.w3.org/2000/svg" class="ionicon" viewBox="0 0 512 512"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M413.66 246.1H386a2 2 0 01-2-2v-77.24A38.86 38.86 0 00345.14 128H267.9a2 2 0 01-2-2V98.34c0-27.14-21.5-49.86-48.64-50.33a49.53 49.53 0 00-50.4 49.51V126a2 2 0 01-2 2H87.62A39.74 39.74 0 0048 167.62V238a2 2 0 002 2h26.91c29.37 0 53.68 25.48 54.09 54.85.42 29.87-23.51 57.15-53.29 57.15H50a2 2 0 00-2 2v70.38A39.74 39.74 0 0087.62 464H158a2 2 0 002-2v-20.93c0-30.28 24.75-56.35 55-57.06 30.1-.7 57 20.31 57 50.28V462a2 2 0 002 2h71.14A38.86 38.86 0 00384 425.14v-78a2 2 0 012-2h28.48c27.63 0 49.52-22.67 49.52-50.4s-23.2-48.64-50.34-48.64z"/></svg>',downloadIcon='<svg xmlns="http://www.w3.org/2000/svg" class="ionicon" viewBox="0 0 512 512"><path d="M336 176h40a40 40 0 0140 40v208a40 40 0 01-40 40H136a40 40 0 01-40-40V216a40 40 0 0140-40h40" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32"/><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M176 272l80 80 80-80M256 48v288"/></svg>',keyOutlineIcon='<svg xmlns="http://www.w3.org/2000/svg" class="ionicon" viewBox="0 0 512 512"><path d="M218.1 167.17c0 13 0 25.6 4.1 37.4-43.1 50.6-156.9 184.3-167.5 194.5a20.17 20.17 0 00-6.7 15c0 8.5 5.2 16.7 9.6 21.3 6.6 6.9 34.8 33 40 28 15.4-15 18.5-19 24.8-25.2 9.5-9.3-1-28.3 2.3-36s6.8-9.2 12.5-10.4 15.8 2.9 23.7 3c8.3.1 12.8-3.4 19-9.2 5-4.6 8.6-8.9 8.7-15.6.2-9-12.8-20.9-3.1-30.4s23.7 6.2 34 5 22.8-15.5 24.1-21.6-11.7-21.8-9.7-30.7c.7-3 6.8-10 11.4-11s25 6.9 29.6 5.9c5.6-1.2 12.1-7.1 17.4-10.4 15.5 6.7 29.6 9.4 47.7 9.4 68.5 0 124-53.4 124-119.2S408.5 48 340 48s-121.9 53.37-121.9 119.17zM400 144a32 32 0 11-32-32 32 32 0 0132 32z" fill="none" stroke="currentColor" stroke-linejoin="round" stroke-width="32"/></svg>',css$2=`
.prompt__wallet_type button {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 100%;
  height: 100%;
}

.prompt__wallet_type button svg {
  width: 28px;
  height: 28px;
  color: var(--text-color);
}
`,promptWalletTypeElement=async t=>{const e=document.createElement("div");e.classList.add("prompt-container"),t.after(e),t.style.display="none",e.innerHTML=`
      <style>
        ${css$2}
      </style>
      <div class="prompt__wallet_type">
        <button id="button__external_wallet">
          ${extensionIcon}
          <span>Browser extension</span>
        </button>
        <button id="button__import_seed">
          ${keyOutlineIcon}
          <span>import secret seed</span>
        </button>
        <button id="button__import_wallet">
          ${downloadIcon}
          <span>import Wallet Backup</span>
        </button>
      </div>
    `;const n=e.querySelector("#button__external_wallet"),o=e.querySelector("#button__import_wallet"),c=e.querySelector("#button__import_seed");return new Promise(a=>{n.addEventListener("click",()=>{a("browser-extension"),e.remove(),t.style.display="block"}),o.addEventListener("click",()=>{a("import-privatekey"),e.remove()}),c.addEventListener("click",()=>{a("import-seed"),e.remove(),t.style.display="block"})})},css$1=`.button__skip {
	cursor: pointer;
}
p.information {
	margin: 12px auto 16px;
}
`,promptSignoutElement=async(t,e)=>{const{html:n}=e||{},o=document.createElement("div");return o.classList.add("prompt-container"),t.after(o),t.style.display="none",new Promise(c=>{o.innerHTML=`
      <style>${css$1}</style>
			${n||`
        <h3>
        Signout
      </h3>
      <p class="information">
        You are about to signout from your wallet and your Private Key still remains encrypted on this device unless you remove it.
      </p>
      ${CheckboxElement({label:"Download encrypted backup file",id:"toggle__download"})}
      ${CheckboxElement({label:"Remove data from device",id:"toggle__clear_data"})}

      <button id="button__signout">Signout</button>
      
      <p><a class="button__cancel">cancel</a></p>
			`}

    `;const a=o.querySelector("#toggle__download"),l=o.querySelector("#toggle__clear_data");o.querySelector(".button__cancel").addEventListener("click",A=>{A.preventDefault(),c({cancel:!0}),o.remove(),t.style.display="block"}),o.querySelector("#button__signout").addEventListener("click",async()=>{c({withEncryption:a.checked,skip:!a.checked,clearStorage:l.checked}),o.remove(),t.style.display="block"})})};class HexaSigninDialogElement extends HTMLElement{_ops;get ops(){return this._ops}set ops(e){const n=e?.enabledSigninMethods?.filter(a=>a!==void 0)||DEFAULT_SIGNIN_METHODS,o=e?.integrator?e.integrator:"FirebaseWeb3Connect",c=(this.ops?.logoUrl?.length||0)>0?this.ops?.logoUrl:void 0;if(this._ops={...e,logoUrl:c,integrator:o,enabledSigninMethods:n},Logger$1.log("[INFO] ops: ",this.ops),this.shadowRoot?.innerHTML==="")this._render();else throw new Error("ShadowDOM already initialized")}constructor(){if(super(),!this.attachShadow({mode:"open"}))throw new Error("ShadowDOM not supported")}_render(){const e=document.createElement("template");if(e.innerHTML=`
        <style>${css$4}</style>
        ${html}
    `,e.content.querySelector("#spinner").innerHTML=SpinnerElement(),e.content.querySelectorAll(".buttonsList button").forEach(c=>{!this.ops?.enabledSigninMethods?.includes(c.id)&&c.id.startsWith("connect")&&c.remove()}),(!this.ops?.enabledSigninMethods?.includes(SigninMethod.Google)||this.ops.enabledSigninMethods.includes(SigninMethod.Google)&&this.ops.enabledSigninMethods.length===1)&&e.content.querySelector(".or")?.remove(),this.ops?.logoUrl&&(Logger$1.log("[INFO] Logo URL: ",this.ops.logoUrl),e.content.querySelector("#logo").innerHTML=`
				<img src="${this.ops.logoUrl}" alt="logo" />	
			`),!this.shadowRoot)throw new Error("ShadowRoot not found. Webcomponent not initialized.");this.setAttribute("theme",this.ops?.isLightMode?"light":"dark"),this.shadowRoot.appendChild(e.content.cloneNode(!0)),[{tag:"integrator",value:`${this.ops?.integrator}`}].forEach(c=>{if(!this.shadowRoot)throw new Error("ShadowRoot not found while replacing variables");this.shadowRoot.innerHTML=this.shadowRoot.innerHTML.replace(new RegExp(`{{${c.tag}}}`,"g"),c.value)})}showModal(){this.shadowRoot?.querySelector("dialog")?.showModal()}hideModal(){this.shadowRoot?.querySelector("dialog")?.close()}connectedCallback(){this.shadowRoot?.querySelector("dialog")?.addEventListener("click",async e=>{const n=e.target.closest("button");if(!n)return;if(n.id==="cancel"){this.dispatchEvent(new CustomEvent("connect",{detail:n.id}));return}if(n.id==="create-new-wallet"){this.dispatchEvent(new CustomEvent("reset"));return}if(!n.id.includes("connect"))return;const o=this.shadowRoot?.querySelector("dialog .buttonsList"),c=this.shadowRoot?.querySelector("dialog #spinner");switch(o.style.display="none",c.style.display="block",n.id){case"connect-google":this.dispatchEvent(new CustomEvent("connect",{detail:n.id}));break;case"connect-email":this.dispatchEvent(new CustomEvent("connect",{detail:n.id}));break;case"connect-wallet":this.dispatchEvent(new CustomEvent("connect",{detail:n.id}));break}})}async toggleSpinnerAsCheck(e){await new Promise(o=>{const c=setTimeout(()=>{clearTimeout(c),o(!0)},1500)});const n=this.shadowRoot?.querySelector("dialog #spinner");return n.innerHTML=`
    <style>
    #check-group {
      animation: 0.32s ease-in-out 1.03s check-group;
      transform-origin: center;
    }
    
    #check-group #check {
        animation: 0.34s cubic-bezier(0.65, 0, 1, 1) 0.8s forwards check;
        stroke-dasharray: 0, 75px;
        stroke-linecap: round;
        stroke-linejoin: round;
    }
    
    #check-group #outline {
        animation: 0.38s ease-in outline;
        transform: rotate(0deg);
        transform-origin: center;
    }
    
    #check-group #white-circle {
        animation: 0.35s ease-in 0.35s forwards circle;
        transform: none;
        transform-origin: center;
    }
    
    @keyframes outline {
      from {
        stroke-dasharray: 0, 345.576px;
      }
      to {
        stroke-dasharray: 345.576px, 345.576px;
      }
    }
    @keyframes circle {
      from {
        transform: scale(1);
      }
      to {
        transform: scale(0);
      }
    }
    @keyframes check {
      from {
        stroke-dasharray: 0, 75px;
      }
      to {
        stroke-dasharray: 75px, 75px;
      }
    }
    @keyframes check-group {
      from {
        transform: scale(1);
      }
      50% {
        transform: scale(1.09);
      }
      to {
        transform: scale(1);
      }
    }
    </style>
  
    <svg
      width="115px"
      height="115px"
      viewBox="0 0 133 133"
      version="1.1"
      xmlns="http://www.w3.org/2000/svg"
      xmlns:xlink="http://www.w3.org/1999/xlink"
    >
      <g
          id="check-group"
          stroke="none"
          stroke-width="4"
          fill="none"
          fill-rule="evenodd"
      >
              <circle
              id="filled-circle"
              fill="#07b481"
              cx="66.5"
              cy="66.5"
              r="54.5"
          />
          <circle
              id="white-circle"
              fill="var(--dialog-background-color)"
              cx="66.5"
              cy="66.5"
              r="55.5"
          />
          <circle
              id="outline"
              stroke="#07b481"
              stroke-width="4"
              cx="66.5"
              cy="66.5"
              r="54.5"
          />
          <polyline
              id="check"
              stroke="var(--dialog-background-color)"
              stroke-width="6.5"
              points="41 70 56 85 92 49"
          />
      </g>
    </svg>
		${e?`<p>${e}</p>`:""}
    `,new Promise(o=>{const c=setTimeout(()=>{clearTimeout(c),o(!0)},1800)})}async toggleSpinnerAsCross(e="An error occured. Please try again."){await new Promise(o=>{const c=setTimeout(()=>{clearTimeout(c),o(!0)},1500)});const n=this.shadowRoot?.querySelector("dialog #spinner");return n.innerHTML=`
    <style>
    @keyframes stroke {
      100% {
        stroke-dashoffset: 0;
      }
    }
    .cross__svg {
        border-radius: 50%;
        display: block;
        height: 111px;
        margin: 1rem auto;
        stroke-width: 4;
        width: 111px;
    }

    .cross__circle {
        animation: 0.6s ease 0s normal forwards 1 running stroke;
        fill: none;
        margin: 0 auto;
        stroke: #e55454;
        stroke-dasharray: 166;
        stroke-dashoffset: 166;
        stroke-width: 3;
    }

    .cross__path {
        stroke: #e55454;
        stroke-dasharray: 48;
        stroke-dashoffset: 48;
        transform-origin: 50% 50% 0;
    }
    .cross__path.cross__path--right {
      animation: 0.3s ease 0.8s normal forwards 1 running stroke;
    }
    .cross__path.cross__path--left {
      animation: 1s ease 0.8s normal forwards 1 running stroke;
    }
    p.cross__message {
      color: #e55454;
      font-size: 0.8rem;
      text-align: center;
    }


    </style>
  
    <svg class="cross__svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 52 52">
      <circle class="cross__circle" cx="26" cy="26" r="25" fill="none"/>
      <path class="cross__path cross__path--right" fill="none" d="M16,16 l20,20" />
      <path class="cross__path cross__path--right" fill="none" d="M16,36 l20,-20" />
    </svg>
    <p class="cross__message">${e}</p>
    `,new Promise(o=>{const c=setTimeout(()=>{clearTimeout(c),o(!0)},1800)})}async promptPassword(){return await promptPasswordElement(this.shadowRoot?.querySelector("dialog #spinner"))}async promptEmailPassword(){return await promptEmailPasswordElement(this.shadowRoot?.querySelector("dialog #spinner"))}async promptBackup(){return await promptToDownloadElement(this.shadowRoot?.querySelector("dialog #spinner"))}async promptSignoutWithBackup(){return await promptSignoutElement(this.shadowRoot?.querySelector("dialog #spinner"))}async promptWalletType(){return await promptWalletTypeElement(this.shadowRoot?.querySelector("dialog #spinner"))}async promptAuthMethods(){(this.shadowRoot?.querySelector("dialog #spinner")).style.display="none",(this.shadowRoot?.querySelector("dialog .buttonsList")).style.display="block"}async reset(){if(!window.confirm("You are about to clear all data to create new Wallet. This will remove all your existing data and we will not be able to recover it if you don't have backup. You are confirming that you want to clear all data and create new Wallet?"))return;this.shadowRoot?.innerHTML&&(this.shadowRoot.innerHTML=""),this._ops={...this._ops,enabledSigninMethods:DEFAULT_SIGNIN_METHODS},this._render(),this.connectedCallback(),await storageService.getItem(KEYS.STORAGE_AUTH_METHOD_KEY)||this.shadowRoot?.querySelector("#create-new-wallet")?.remove(),this.showModal()}}const passwordValidationOrSignature=t=>({execute:async()=>{const e=await storageService.isExistingPrivateKeyStored(),n=await storageService.getItem(KEYS.AUTH_SIGNATURE_KEY);if(e&&n){if(!await Crypto.verifySignatureFromPassword(t,KEYS.AUTH_SIGNATURE_VALUE,n))throw new Error("Invalid password")}else{const o=await Crypto.signMessageFromPassword(t,KEYS.AUTH_SIGNATURE_VALUE);await storageService.setItem(KEYS.AUTH_SIGNATURE_KEY,o)}}}),authWithGoogle=async t=>{const{password:e,skip:n,withEncryption:o}=t;await passwordValidationOrSignature(e).execute();const c=await storageService.getItem(KEYS.STORAGE_PRIVATEKEY_KEY);!c&&!n&&localStorage.setItem(KEYS.STORAGE_BACKUP_KEY,o?"true":"false");const a=await Crypto.encrypt(storageService.getUniqueID(),e);return await storageService.setItem(KEYS.STORAGE_SECRET_KEY,a),n===!0&&await storageService.setItem(KEYS.STORAGE_SKIP_BACKUP_KEY,`${Date.now()}`),await FirebaseAuthProvider.signinWithGoogle(c||void 0).catch(async b=>{const{code:v="",message:A=""}=b;switch(!0){case((v==="auth/google-account-already-in-use"||A==="auth/google-account-already-in-use")&&!c):throw storageService.clear(),localStorage.removeItem(KEYS.STORAGE_BACKUP_KEY),await FirebaseAuthProvider.signOut(),new Error('This Google Account is already used and connected to other device. Import your private key instead using: "Connect Wallet -> Import Wallet".')}throw b})},authWithEmailPwd=async t=>{const{password:e,skip:n,withEncryption:o}=t;await passwordValidationOrSignature(e).execute();const c=await storageService.getItem(KEYS.STORAGE_PRIVATEKEY_KEY)||void 0;!c&&!n&&localStorage.setItem(KEYS.STORAGE_BACKUP_KEY,o?"true":"false");const a=await Crypto.encrypt(storageService.getUniqueID(),e);return await storageService.setItem(KEYS.STORAGE_SECRET_KEY,a),await FirebaseAuthProvider.signInWithEmailPwd(t.email,t.password,c).catch(async b=>{const{code:v="",message:A=""}=b;switch(!0){case(v==="auth/email-already-in-use"&&!c):throw storageService.clear(),localStorage.removeItem(KEYS.STORAGE_BACKUP_KEY),await FirebaseAuthProvider.signOut(),new Error('This email is already used and connected to other device. Import your private key instead using: "Connect Wallet -> Import Wallet".');case v==="auth/weak-password":case v==="auth/invalid-email":{storageService.clear(),localStorage.removeItem(KEYS.STORAGE_BACKUP_KEY);break}case v==="auth/invalid-credential":throw storageService.clear(),localStorage.removeItem(KEYS.STORAGE_BACKUP_KEY),new Error('This email is already used and connected to other device. Import your private key instead using: "Connect Wallet -> Import Wallet".')}throw b})},authWithExternalWallet=async()=>{const{user:{uid:t}}=await FirebaseAuthProvider.signInAsAnonymous();return{uid:t}},authByImportPrivateKey=async t=>{const{password:e,privateKey:n}=t,o=await Crypto.encrypt(e,n);await storageService.setItem(KEYS.STORAGE_PRIVATEKEY_KEY,o);const{uid:c}=await authWithGoogle({password:e});return{uid:c}},authByImportSeed=async t=>{const{seed:e,password:n}=t,o=await Crypto.encrypt(n,e);await storageService.setItem(KEYS.STORAGE_PRIVATEKEY_KEY,o);const{uid:c}=await authWithGoogle({password:n});return{uid:c}},promptImportPrivatekeyElement=async t=>{const e=document.createElement("div");e.classList.add("prompt-container"),t.after(e),t.style.display="none",e.innerHTML=`
    <div class="prompt__import_file">
      <p>
				<b>Import Privatekey backup file</b><br/>
				& Authenticate with Google to continue
      </p>
      <div class="prompt__import_file__result"></div>
      ${CheckboxElement({label:"Encrypted backup file",id:"toggle__encription"})}
      <button id="button__import_privatekey">
        <span>Import</span>
      </button>
      <input type="file" id="input__import_file" accept=".txt" style="display: none;">
    </div>
  `;const n=e.querySelector("#button__import_privatekey"),o=e.querySelector("#input__import_file"),c=e.querySelector("#toggle__encription");return await new Promise((l,b)=>{n.addEventListener("click",v=>{v.preventDefault(),o.click()}),o.addEventListener("change",async()=>{const v=o.files?.[0];if(v)try{const A=await v.text();if(c.checked){const M=await promptPasswordElement(e,{requestPwd:!0}),B=await Crypto.decrypt(M,A);l({secret:M,privateKey:B})}else{const M=await promptPasswordElement(e);l({secret:M,privateKey:A})}e.remove(),t.style.display="block"}catch(A){b(A),e.remove(),t.style.display="block"}})})},css=`.prompt__message {
	margin-bottom: 1.5rem;
}
.prompt__message h4 {
	margin: 0 auto -0.7rem;
	font-size: 1.3em;
}
#input__seed,
#input__password {
	display: block;
	min-height: 50px;
	width: 100%;
	max-width: 300px;
	margin: 0rem auto 0.5rem;
	text-align: center;
	color: var(--text-color);
	background: var(--button-background);
	border: var(--dialog-border);
	border-radius: 12px;
	padding: 12px 16px;
	font-size: 1em;
	font-family: inherit;
}

#input__seed {
	min-height: 110px;
}
#input__seed::placeholder {
	text-align: center;
	transform: translateY(50%);
}
`,promptImportSeedElement=async t=>{const e=document.createElement("div");e.classList.add("prompt-container"),t.after(e),t.style.display="none",e.innerHTML=`
      <style>
        ${css}
      </style>
      <div class="prompt__message">
        <h4>Import Secret Seed</h4>
        <p><b>Access your Wallet with secret seed & authenticate with Google.
        </b></p>
        <p>
          The password you enter will encrypts your seed & gives access to your funds. Please store your password in a safe place. We dont keep your information & cant restore it.
        </p>
      </div>
      <div class="prompt__seed">
        <div class="input__container">
          <textarea placeholder="secret seed" id="input__seed"></textarea>
          <input id="input__password" type="password" placeholder="password" />
        </div>
        <button id="button__import_seed">Import</button>
      </div>
    `;const n=e.querySelector("#input__seed"),o=e.querySelector("#input__password"),c=e.querySelector("#button__import_seed");return new Promise(a=>{c.addEventListener("click",()=>{a({seed:n.value,secret:o.value}),e.remove(),t.style.display="block"})})},setupSigninDialogElement=async(t=document.body,e)=>{customElements.get("firebase-web3connect-dialog")||customElements.define("firebase-web3connect-dialog",HexaSigninDialogElement);const n=document.createElement("firebase-web3connect-dialog");return n.ops=e,t.appendChild(n),await storageService.getItem(KEYS.STORAGE_AUTH_METHOD_KEY)||n.shadowRoot?.querySelector("#create-new-wallet")?.remove(),n},addAndWaitUIEventsResult=t=>new Promise((e,n)=>{t.addEventListener("connect",async o=>{const c=o.detail;if(c==="cancel"){t.hideModal(),await new Promise(a=>setTimeout(a,225)),t.remove(),e(void 0);return}if(c==="connect-google")try{const a=await t.promptPassword(),l=await storageService.getItem(KEYS.STORAGE_PRIVATEKEY_KEY),{withEncryption:b,skip:v}=l?{withEncryption:void 0,skip:void 0}:await t.promptBackup(),{uid:A}=await authWithGoogle({password:a,skip:v,withEncryption:b});e({uid:A,password:a,authMethod:c})}catch(a){const l=a?.message||"An error occured. Please try again.";n(new Error(`${l}`));return}if(c==="connect-email")try{const{password:a,email:l}=await t.promptEmailPassword(),b=await storageService.getItem(KEYS.STORAGE_PRIVATEKEY_KEY),{withEncryption:v,skip:A}=b?{withEncryption:!1,skip:!0}:await t.promptBackup(),{uid:S}=await authWithEmailPwd({email:l,password:a,skip:A,withEncryption:v});e({uid:S,password:a,authMethod:c})}catch(a){const l=a?.message||"An error occured. Please try again.";n(new Error(`${l}`));return}if(c==="connect-wallet")try{const a=await t.promptWalletType();switch(Logger$1.log("[INFO] Wallet type: ",a),a){case"browser-extension":{e({uid:void 0,isAnonymous:!0,authMethod:c});break}case"import-seed":{const{seed:l,secret:b}=await promptImportSeedElement(t?.shadowRoot?.querySelector("#spinner"));if(Logger$1.log("[INFO] Import seed: ",{seed:l,secret:b}),!l)throw new Error("Seed is required to connect");const{uid:v}=await authByImportSeed({password:b,seed:l});e({uid:v,password:b,authMethod:c});break}case"import-privatekey":{const{privateKey:l,secret:b}=await promptImportPrivatekeyElement(t?.shadowRoot?.querySelector("#spinner"));if(Logger$1.log("[INFO] Import private key: ",{privateKey:l,secret:b}),!l)throw new Error("Private key is required to connect");const{uid:v}=await authByImportPrivateKey({password:b,privateKey:l});e({uid:v,password:b,authMethod:c});break}default:throw new Error("Invalid wallet type")}}catch(a){const l=a?.message||"An error occured. Please try again.";n(new Error(`Error while connecting: ${l}`))}}),t.addEventListener("reset",async()=>{await storageService.clear(),t.reset()})});var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs$1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function getAugmentedNamespace(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function o(){return this instanceof o?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(o){var c=Object.getOwnPropertyDescriptor(t,o);Object.defineProperty(n,o,c.get?c:{enumerable:!0,get:function(){return t[o]}})}),n}var bn$6={exports:{}};const require$$0$3=getAugmentedNamespace(dist$3);bn$6.exports;(function(t){(function(e,n){function o(p,m){if(!p)throw new Error(m||"Assertion failed")}function c(p,m){p.super_=m;var y=function(){};y.prototype=m.prototype,p.prototype=new y,p.prototype.constructor=p}function a(p,m,y){if(a.isBN(p))return p;this.negative=0,this.words=null,this.length=0,this.red=null,p!==null&&((m==="le"||m==="be")&&(y=m,m=10),this._init(p||0,m||10,y||"be"))}typeof e=="object"?e.exports=a:n.BN=a,a.BN=a,a.wordSize=26;var l;try{typeof window<"u"&&typeof window.Buffer<"u"?l=window.Buffer:l=require$$0$3.Buffer}catch{}a.isBN=function(m){return m instanceof a?!0:m!==null&&typeof m=="object"&&m.constructor.wordSize===a.wordSize&&Array.isArray(m.words)},a.max=function(m,y){return m.cmp(y)>0?m:y},a.min=function(m,y){return m.cmp(y)<0?m:y},a.prototype._init=function(m,y,E){if(typeof m=="number")return this._initNumber(m,y,E);if(typeof m=="object")return this._initArray(m,y,E);y==="hex"&&(y=16),o(y===(y|0)&&y>=2&&y<=36),m=m.toString().replace(/\s+/g,"");var $=0;m[0]==="-"&&($++,this.negative=1),$<m.length&&(y===16?this._parseHex(m,$,E):(this._parseBase(m,y,$),E==="le"&&this._initArray(this.toArray(),y,E)))},a.prototype._initNumber=function(m,y,E){m<0&&(this.negative=1,m=-m),m<67108864?(this.words=[m&67108863],this.length=1):m<4503599627370496?(this.words=[m&67108863,m/67108864&67108863],this.length=2):(o(m<9007199254740992),this.words=[m&67108863,m/67108864&67108863,1],this.length=3),E==="le"&&this._initArray(this.toArray(),y,E)},a.prototype._initArray=function(m,y,E){if(o(typeof m.length=="number"),m.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(m.length/3),this.words=new Array(this.length);for(var $=0;$<this.length;$++)this.words[$]=0;var k,_,d=0;if(E==="be")for($=m.length-1,k=0;$>=0;$-=3)_=m[$]|m[$-1]<<8|m[$-2]<<16,this.words[k]|=_<<d&67108863,this.words[k+1]=_>>>26-d&67108863,d+=24,d>=26&&(d-=26,k++);else if(E==="le")for($=0,k=0;$<m.length;$+=3)_=m[$]|m[$+1]<<8|m[$+2]<<16,this.words[k]|=_<<d&67108863,this.words[k+1]=_>>>26-d&67108863,d+=24,d>=26&&(d-=26,k++);return this._strip()};function b(p,m){var y=p.charCodeAt(m);if(y>=48&&y<=57)return y-48;if(y>=65&&y<=70)return y-55;if(y>=97&&y<=102)return y-87;o(!1,"Invalid character in "+p)}function v(p,m,y){var E=b(p,y);return y-1>=m&&(E|=b(p,y-1)<<4),E}a.prototype._parseHex=function(m,y,E){this.length=Math.ceil((m.length-y)/6),this.words=new Array(this.length);for(var $=0;$<this.length;$++)this.words[$]=0;var k=0,_=0,d;if(E==="be")for($=m.length-1;$>=y;$-=2)d=v(m,y,$)<<k,this.words[_]|=d&67108863,k>=18?(k-=18,_+=1,this.words[_]|=d>>>26):k+=8;else{var w=m.length-y;for($=w%2===0?y+1:y;$<m.length;$+=2)d=v(m,y,$)<<k,this.words[_]|=d&67108863,k>=18?(k-=18,_+=1,this.words[_]|=d>>>26):k+=8}this._strip()};function A(p,m,y,E){for(var $=0,k=0,_=Math.min(p.length,y),d=m;d<_;d++){var w=p.charCodeAt(d)-48;$*=E,w>=49?k=w-49+10:w>=17?k=w-17+10:k=w,o(w>=0&&k<E,"Invalid character"),$+=k}return $}a.prototype._parseBase=function(m,y,E){this.words=[0],this.length=1;for(var $=0,k=1;k<=67108863;k*=y)$++;$--,k=k/y|0;for(var _=m.length-E,d=_%$,w=Math.min(_,_-d)+E,I=0,C=E;C<w;C+=$)I=A(m,C,C+$,y),this.imuln(k),this.words[0]+I<67108864?this.words[0]+=I:this._iaddn(I);if(d!==0){var V=1;for(I=A(m,C,m.length,y),C=0;C<d;C++)V*=y;this.imuln(V),this.words[0]+I<67108864?this.words[0]+=I:this._iaddn(I)}this._strip()},a.prototype.copy=function(m){m.words=new Array(this.length);for(var y=0;y<this.length;y++)m.words[y]=this.words[y];m.length=this.length,m.negative=this.negative,m.red=this.red};function S(p,m){p.words=m.words,p.length=m.length,p.negative=m.negative,p.red=m.red}if(a.prototype._move=function(m){S(m,this)},a.prototype.clone=function(){var m=new a(null);return this.copy(m),m},a.prototype._expand=function(m){for(;this.length<m;)this.words[this.length++]=0;return this},a.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},a.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{a.prototype[Symbol.for("nodejs.util.inspect.custom")]=M}catch{a.prototype.inspect=M}else a.prototype.inspect=M;function M(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var B=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],P=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],L=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];a.prototype.toString=function(m,y){m=m||10,y=y|0||1;var E;if(m===16||m==="hex"){E="";for(var $=0,k=0,_=0;_<this.length;_++){var d=this.words[_],w=((d<<$|k)&16777215).toString(16);k=d>>>24-$&16777215,$+=2,$>=26&&($-=26,_--),k!==0||_!==this.length-1?E=B[6-w.length]+w+E:E=w+E}for(k!==0&&(E=k.toString(16)+E);E.length%y!==0;)E="0"+E;return this.negative!==0&&(E="-"+E),E}if(m===(m|0)&&m>=2&&m<=36){var I=P[m],C=L[m];E="";var V=this.clone();for(V.negative=0;!V.isZero();){var O=V.modrn(C).toString(m);V=V.idivn(C),V.isZero()?E=O+E:E=B[I-O.length]+O+E}for(this.isZero()&&(E="0"+E);E.length%y!==0;)E="0"+E;return this.negative!==0&&(E="-"+E),E}o(!1,"Base should be between 2 and 36")},a.prototype.toNumber=function(){var m=this.words[0];return this.length===2?m+=this.words[1]*67108864:this.length===3&&this.words[2]===1?m+=4503599627370496+this.words[1]*67108864:this.length>2&&o(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-m:m},a.prototype.toJSON=function(){return this.toString(16,2)},l&&(a.prototype.toBuffer=function(m,y){return this.toArrayLike(l,m,y)}),a.prototype.toArray=function(m,y){return this.toArrayLike(Array,m,y)};var F=function(m,y){return m.allocUnsafe?m.allocUnsafe(y):new m(y)};a.prototype.toArrayLike=function(m,y,E){this._strip();var $=this.byteLength(),k=E||Math.max(1,$);o($<=k,"byte array longer than desired length"),o(k>0,"Requested array length <= 0");var _=F(m,k),d=y==="le"?"LE":"BE";return this["_toArrayLike"+d](_,$),_},a.prototype._toArrayLikeLE=function(m,y){for(var E=0,$=0,k=0,_=0;k<this.length;k++){var d=this.words[k]<<_|$;m[E++]=d&255,E<m.length&&(m[E++]=d>>8&255),E<m.length&&(m[E++]=d>>16&255),_===6?(E<m.length&&(m[E++]=d>>24&255),$=0,_=0):($=d>>>24,_+=2)}if(E<m.length)for(m[E++]=$;E<m.length;)m[E++]=0},a.prototype._toArrayLikeBE=function(m,y){for(var E=m.length-1,$=0,k=0,_=0;k<this.length;k++){var d=this.words[k]<<_|$;m[E--]=d&255,E>=0&&(m[E--]=d>>8&255),E>=0&&(m[E--]=d>>16&255),_===6?(E>=0&&(m[E--]=d>>24&255),$=0,_=0):($=d>>>24,_+=2)}if(E>=0)for(m[E--]=$;E>=0;)m[E--]=0},Math.clz32?a.prototype._countBits=function(m){return 32-Math.clz32(m)}:a.prototype._countBits=function(m){var y=m,E=0;return y>=4096&&(E+=13,y>>>=13),y>=64&&(E+=7,y>>>=7),y>=8&&(E+=4,y>>>=4),y>=2&&(E+=2,y>>>=2),E+y},a.prototype._zeroBits=function(m){if(m===0)return 26;var y=m,E=0;return y&8191||(E+=13,y>>>=13),y&127||(E+=7,y>>>=7),y&15||(E+=4,y>>>=4),y&3||(E+=2,y>>>=2),y&1||E++,E},a.prototype.bitLength=function(){var m=this.words[this.length-1],y=this._countBits(m);return(this.length-1)*26+y};function U(p){for(var m=new Array(p.bitLength()),y=0;y<m.length;y++){var E=y/26|0,$=y%26;m[y]=p.words[E]>>>$&1}return m}a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var m=0,y=0;y<this.length;y++){var E=this._zeroBits(this.words[y]);if(m+=E,E!==26)break}return m},a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},a.prototype.toTwos=function(m){return this.negative!==0?this.abs().inotn(m).iaddn(1):this.clone()},a.prototype.fromTwos=function(m){return this.testn(m-1)?this.notn(m).iaddn(1).ineg():this.clone()},a.prototype.isNeg=function(){return this.negative!==0},a.prototype.neg=function(){return this.clone().ineg()},a.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},a.prototype.iuor=function(m){for(;this.length<m.length;)this.words[this.length++]=0;for(var y=0;y<m.length;y++)this.words[y]=this.words[y]|m.words[y];return this._strip()},a.prototype.ior=function(m){return o((this.negative|m.negative)===0),this.iuor(m)},a.prototype.or=function(m){return this.length>m.length?this.clone().ior(m):m.clone().ior(this)},a.prototype.uor=function(m){return this.length>m.length?this.clone().iuor(m):m.clone().iuor(this)},a.prototype.iuand=function(m){var y;this.length>m.length?y=m:y=this;for(var E=0;E<y.length;E++)this.words[E]=this.words[E]&m.words[E];return this.length=y.length,this._strip()},a.prototype.iand=function(m){return o((this.negative|m.negative)===0),this.iuand(m)},a.prototype.and=function(m){return this.length>m.length?this.clone().iand(m):m.clone().iand(this)},a.prototype.uand=function(m){return this.length>m.length?this.clone().iuand(m):m.clone().iuand(this)},a.prototype.iuxor=function(m){var y,E;this.length>m.length?(y=this,E=m):(y=m,E=this);for(var $=0;$<E.length;$++)this.words[$]=y.words[$]^E.words[$];if(this!==y)for(;$<y.length;$++)this.words[$]=y.words[$];return this.length=y.length,this._strip()},a.prototype.ixor=function(m){return o((this.negative|m.negative)===0),this.iuxor(m)},a.prototype.xor=function(m){return this.length>m.length?this.clone().ixor(m):m.clone().ixor(this)},a.prototype.uxor=function(m){return this.length>m.length?this.clone().iuxor(m):m.clone().iuxor(this)},a.prototype.inotn=function(m){o(typeof m=="number"&&m>=0);var y=Math.ceil(m/26)|0,E=m%26;this._expand(y),E>0&&y--;for(var $=0;$<y;$++)this.words[$]=~this.words[$]&67108863;return E>0&&(this.words[$]=~this.words[$]&67108863>>26-E),this._strip()},a.prototype.notn=function(m){return this.clone().inotn(m)},a.prototype.setn=function(m,y){o(typeof m=="number"&&m>=0);var E=m/26|0,$=m%26;return this._expand(E+1),y?this.words[E]=this.words[E]|1<<$:this.words[E]=this.words[E]&~(1<<$),this._strip()},a.prototype.iadd=function(m){var y;if(this.negative!==0&&m.negative===0)return this.negative=0,y=this.isub(m),this.negative^=1,this._normSign();if(this.negative===0&&m.negative!==0)return m.negative=0,y=this.isub(m),m.negative=1,y._normSign();var E,$;this.length>m.length?(E=this,$=m):(E=m,$=this);for(var k=0,_=0;_<$.length;_++)y=(E.words[_]|0)+($.words[_]|0)+k,this.words[_]=y&67108863,k=y>>>26;for(;k!==0&&_<E.length;_++)y=(E.words[_]|0)+k,this.words[_]=y&67108863,k=y>>>26;if(this.length=E.length,k!==0)this.words[this.length]=k,this.length++;else if(E!==this)for(;_<E.length;_++)this.words[_]=E.words[_];return this},a.prototype.add=function(m){var y;return m.negative!==0&&this.negative===0?(m.negative=0,y=this.sub(m),m.negative^=1,y):m.negative===0&&this.negative!==0?(this.negative=0,y=m.sub(this),this.negative=1,y):this.length>m.length?this.clone().iadd(m):m.clone().iadd(this)},a.prototype.isub=function(m){if(m.negative!==0){m.negative=0;var y=this.iadd(m);return m.negative=1,y._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(m),this.negative=1,this._normSign();var E=this.cmp(m);if(E===0)return this.negative=0,this.length=1,this.words[0]=0,this;var $,k;E>0?($=this,k=m):($=m,k=this);for(var _=0,d=0;d<k.length;d++)y=($.words[d]|0)-(k.words[d]|0)+_,_=y>>26,this.words[d]=y&67108863;for(;_!==0&&d<$.length;d++)y=($.words[d]|0)+_,_=y>>26,this.words[d]=y&67108863;if(_===0&&d<$.length&&$!==this)for(;d<$.length;d++)this.words[d]=$.words[d];return this.length=Math.max(this.length,d),$!==this&&(this.negative=1),this._strip()},a.prototype.sub=function(m){return this.clone().isub(m)};function q(p,m,y){y.negative=m.negative^p.negative;var E=p.length+m.length|0;y.length=E,E=E-1|0;var $=p.words[0]|0,k=m.words[0]|0,_=$*k,d=_&67108863,w=_/67108864|0;y.words[0]=d;for(var I=1;I<E;I++){for(var C=w>>>26,V=w&67108863,O=Math.min(I,m.length-1),j=Math.max(0,I-p.length+1);j<=O;j++){var D=I-j|0;$=p.words[D]|0,k=m.words[j]|0,_=$*k+V,C+=_/67108864|0,V=_&67108863}y.words[I]=V|0,w=C|0}return w!==0?y.words[I]=w|0:y.length--,y._strip()}var X=function(m,y,E){var $=m.words,k=y.words,_=E.words,d=0,w,I,C,V=$[0]|0,O=V&8191,j=V>>>13,D=$[1]|0,Q=D&8191,oe=D>>>13,de=$[2]|0,Z=de&8191,H=de>>>13,ge=$[3]|0,Me=ge&8191,ke=ge>>>13,Ie=$[4]|0,et=Ie&8191,Fe=Ie>>>13,$e=$[5]|0,$t=$e&8191,He=$e>>>13,Ye=$[6]|0,St=Ye&8191,De=Ye>>>13,qe=$[7]|0,At=qe&8191,ze=qe>>>13,Ge=$[8]|0,kt=Ge&8191,se=Ge>>>13,J=$[9]|0,re=J&8191,he=J>>>13,ye=k[0]|0,Oe=ye&8191,Ee=ye>>>13,Ue=k[1]|0,bt=Ue&8191,Le=Ue>>>13,Ve=k[2]|0,mt=Ve&8191,Ke=Ve>>>13,Xe=k[3]|0,Mt=Xe&8191,me=Xe>>>13,le=k[4]|0,_e=le&8191,be=le>>>13,Se=k[5]|0,Je=Se&8191,Te=Se>>>13,Ne=k[6]|0,ne=Ne&8191,ie=Ne>>>13,ae=k[7]|0,Y=ae&8191,fe=ae>>>13,ve=k[8]|0,Pe=ve&8191,xe=ve>>>13,Be=k[9]|0,Qe=Be&8191,Ze=Be>>>13;E.negative=m.negative^y.negative,E.length=19,w=Math.imul(O,Oe),I=Math.imul(O,Ee),I=I+Math.imul(j,Oe)|0,C=Math.imul(j,Ee);var xt=(d+w|0)+((I&8191)<<13)|0;d=(C+(I>>>13)|0)+(xt>>>26)|0,xt&=67108863,w=Math.imul(Q,Oe),I=Math.imul(Q,Ee),I=I+Math.imul(oe,Oe)|0,C=Math.imul(oe,Ee),w=w+Math.imul(O,bt)|0,I=I+Math.imul(O,Le)|0,I=I+Math.imul(j,bt)|0,C=C+Math.imul(j,Le)|0;var it=(d+w|0)+((I&8191)<<13)|0;d=(C+(I>>>13)|0)+(it>>>26)|0,it&=67108863,w=Math.imul(Z,Oe),I=Math.imul(Z,Ee),I=I+Math.imul(H,Oe)|0,C=Math.imul(H,Ee),w=w+Math.imul(Q,bt)|0,I=I+Math.imul(Q,Le)|0,I=I+Math.imul(oe,bt)|0,C=C+Math.imul(oe,Le)|0,w=w+Math.imul(O,mt)|0,I=I+Math.imul(O,Ke)|0,I=I+Math.imul(j,mt)|0,C=C+Math.imul(j,Ke)|0;var dt=(d+w|0)+((I&8191)<<13)|0;d=(C+(I>>>13)|0)+(dt>>>26)|0,dt&=67108863,w=Math.imul(Me,Oe),I=Math.imul(Me,Ee),I=I+Math.imul(ke,Oe)|0,C=Math.imul(ke,Ee),w=w+Math.imul(Z,bt)|0,I=I+Math.imul(Z,Le)|0,I=I+Math.imul(H,bt)|0,C=C+Math.imul(H,Le)|0,w=w+Math.imul(Q,mt)|0,I=I+Math.imul(Q,Ke)|0,I=I+Math.imul(oe,mt)|0,C=C+Math.imul(oe,Ke)|0,w=w+Math.imul(O,Mt)|0,I=I+Math.imul(O,me)|0,I=I+Math.imul(j,Mt)|0,C=C+Math.imul(j,me)|0;var gt=(d+w|0)+((I&8191)<<13)|0;d=(C+(I>>>13)|0)+(gt>>>26)|0,gt&=67108863,w=Math.imul(et,Oe),I=Math.imul(et,Ee),I=I+Math.imul(Fe,Oe)|0,C=Math.imul(Fe,Ee),w=w+Math.imul(Me,bt)|0,I=I+Math.imul(Me,Le)|0,I=I+Math.imul(ke,bt)|0,C=C+Math.imul(ke,Le)|0,w=w+Math.imul(Z,mt)|0,I=I+Math.imul(Z,Ke)|0,I=I+Math.imul(H,mt)|0,C=C+Math.imul(H,Ke)|0,w=w+Math.imul(Q,Mt)|0,I=I+Math.imul(Q,me)|0,I=I+Math.imul(oe,Mt)|0,C=C+Math.imul(oe,me)|0,w=w+Math.imul(O,_e)|0,I=I+Math.imul(O,be)|0,I=I+Math.imul(j,_e)|0,C=C+Math.imul(j,be)|0;var yt=(d+w|0)+((I&8191)<<13)|0;d=(C+(I>>>13)|0)+(yt>>>26)|0,yt&=67108863,w=Math.imul($t,Oe),I=Math.imul($t,Ee),I=I+Math.imul(He,Oe)|0,C=Math.imul(He,Ee),w=w+Math.imul(et,bt)|0,I=I+Math.imul(et,Le)|0,I=I+Math.imul(Fe,bt)|0,C=C+Math.imul(Fe,Le)|0,w=w+Math.imul(Me,mt)|0,I=I+Math.imul(Me,Ke)|0,I=I+Math.imul(ke,mt)|0,C=C+Math.imul(ke,Ke)|0,w=w+Math.imul(Z,Mt)|0,I=I+Math.imul(Z,me)|0,I=I+Math.imul(H,Mt)|0,C=C+Math.imul(H,me)|0,w=w+Math.imul(Q,_e)|0,I=I+Math.imul(Q,be)|0,I=I+Math.imul(oe,_e)|0,C=C+Math.imul(oe,be)|0,w=w+Math.imul(O,Je)|0,I=I+Math.imul(O,Te)|0,I=I+Math.imul(j,Je)|0,C=C+Math.imul(j,Te)|0;var Et=(d+w|0)+((I&8191)<<13)|0;d=(C+(I>>>13)|0)+(Et>>>26)|0,Et&=67108863,w=Math.imul(St,Oe),I=Math.imul(St,Ee),I=I+Math.imul(De,Oe)|0,C=Math.imul(De,Ee),w=w+Math.imul($t,bt)|0,I=I+Math.imul($t,Le)|0,I=I+Math.imul(He,bt)|0,C=C+Math.imul(He,Le)|0,w=w+Math.imul(et,mt)|0,I=I+Math.imul(et,Ke)|0,I=I+Math.imul(Fe,mt)|0,C=C+Math.imul(Fe,Ke)|0,w=w+Math.imul(Me,Mt)|0,I=I+Math.imul(Me,me)|0,I=I+Math.imul(ke,Mt)|0,C=C+Math.imul(ke,me)|0,w=w+Math.imul(Z,_e)|0,I=I+Math.imul(Z,be)|0,I=I+Math.imul(H,_e)|0,C=C+Math.imul(H,be)|0,w=w+Math.imul(Q,Je)|0,I=I+Math.imul(Q,Te)|0,I=I+Math.imul(oe,Je)|0,C=C+Math.imul(oe,Te)|0,w=w+Math.imul(O,ne)|0,I=I+Math.imul(O,ie)|0,I=I+Math.imul(j,ne)|0,C=C+Math.imul(j,ie)|0;var vt=(d+w|0)+((I&8191)<<13)|0;d=(C+(I>>>13)|0)+(vt>>>26)|0,vt&=67108863,w=Math.imul(At,Oe),I=Math.imul(At,Ee),I=I+Math.imul(ze,Oe)|0,C=Math.imul(ze,Ee),w=w+Math.imul(St,bt)|0,I=I+Math.imul(St,Le)|0,I=I+Math.imul(De,bt)|0,C=C+Math.imul(De,Le)|0,w=w+Math.imul($t,mt)|0,I=I+Math.imul($t,Ke)|0,I=I+Math.imul(He,mt)|0,C=C+Math.imul(He,Ke)|0,w=w+Math.imul(et,Mt)|0,I=I+Math.imul(et,me)|0,I=I+Math.imul(Fe,Mt)|0,C=C+Math.imul(Fe,me)|0,w=w+Math.imul(Me,_e)|0,I=I+Math.imul(Me,be)|0,I=I+Math.imul(ke,_e)|0,C=C+Math.imul(ke,be)|0,w=w+Math.imul(Z,Je)|0,I=I+Math.imul(Z,Te)|0,I=I+Math.imul(H,Je)|0,C=C+Math.imul(H,Te)|0,w=w+Math.imul(Q,ne)|0,I=I+Math.imul(Q,ie)|0,I=I+Math.imul(oe,ne)|0,C=C+Math.imul(oe,ie)|0,w=w+Math.imul(O,Y)|0,I=I+Math.imul(O,fe)|0,I=I+Math.imul(j,Y)|0,C=C+Math.imul(j,fe)|0;var _t=(d+w|0)+((I&8191)<<13)|0;d=(C+(I>>>13)|0)+(_t>>>26)|0,_t&=67108863,w=Math.imul(kt,Oe),I=Math.imul(kt,Ee),I=I+Math.imul(se,Oe)|0,C=Math.imul(se,Ee),w=w+Math.imul(At,bt)|0,I=I+Math.imul(At,Le)|0,I=I+Math.imul(ze,bt)|0,C=C+Math.imul(ze,Le)|0,w=w+Math.imul(St,mt)|0,I=I+Math.imul(St,Ke)|0,I=I+Math.imul(De,mt)|0,C=C+Math.imul(De,Ke)|0,w=w+Math.imul($t,Mt)|0,I=I+Math.imul($t,me)|0,I=I+Math.imul(He,Mt)|0,C=C+Math.imul(He,me)|0,w=w+Math.imul(et,_e)|0,I=I+Math.imul(et,be)|0,I=I+Math.imul(Fe,_e)|0,C=C+Math.imul(Fe,be)|0,w=w+Math.imul(Me,Je)|0,I=I+Math.imul(Me,Te)|0,I=I+Math.imul(ke,Je)|0,C=C+Math.imul(ke,Te)|0,w=w+Math.imul(Z,ne)|0,I=I+Math.imul(Z,ie)|0,I=I+Math.imul(H,ne)|0,C=C+Math.imul(H,ie)|0,w=w+Math.imul(Q,Y)|0,I=I+Math.imul(Q,fe)|0,I=I+Math.imul(oe,Y)|0,C=C+Math.imul(oe,fe)|0,w=w+Math.imul(O,Pe)|0,I=I+Math.imul(O,xe)|0,I=I+Math.imul(j,Pe)|0,C=C+Math.imul(j,xe)|0;var wt=(d+w|0)+((I&8191)<<13)|0;d=(C+(I>>>13)|0)+(wt>>>26)|0,wt&=67108863,w=Math.imul(re,Oe),I=Math.imul(re,Ee),I=I+Math.imul(he,Oe)|0,C=Math.imul(he,Ee),w=w+Math.imul(kt,bt)|0,I=I+Math.imul(kt,Le)|0,I=I+Math.imul(se,bt)|0,C=C+Math.imul(se,Le)|0,w=w+Math.imul(At,mt)|0,I=I+Math.imul(At,Ke)|0,I=I+Math.imul(ze,mt)|0,C=C+Math.imul(ze,Ke)|0,w=w+Math.imul(St,Mt)|0,I=I+Math.imul(St,me)|0,I=I+Math.imul(De,Mt)|0,C=C+Math.imul(De,me)|0,w=w+Math.imul($t,_e)|0,I=I+Math.imul($t,be)|0,I=I+Math.imul(He,_e)|0,C=C+Math.imul(He,be)|0,w=w+Math.imul(et,Je)|0,I=I+Math.imul(et,Te)|0,I=I+Math.imul(Fe,Je)|0,C=C+Math.imul(Fe,Te)|0,w=w+Math.imul(Me,ne)|0,I=I+Math.imul(Me,ie)|0,I=I+Math.imul(ke,ne)|0,C=C+Math.imul(ke,ie)|0,w=w+Math.imul(Z,Y)|0,I=I+Math.imul(Z,fe)|0,I=I+Math.imul(H,Y)|0,C=C+Math.imul(H,fe)|0,w=w+Math.imul(Q,Pe)|0,I=I+Math.imul(Q,xe)|0,I=I+Math.imul(oe,Pe)|0,C=C+Math.imul(oe,xe)|0,w=w+Math.imul(O,Qe)|0,I=I+Math.imul(O,Ze)|0,I=I+Math.imul(j,Qe)|0,C=C+Math.imul(j,Ze)|0;var ct=(d+w|0)+((I&8191)<<13)|0;d=(C+(I>>>13)|0)+(ct>>>26)|0,ct&=67108863,w=Math.imul(re,bt),I=Math.imul(re,Le),I=I+Math.imul(he,bt)|0,C=Math.imul(he,Le),w=w+Math.imul(kt,mt)|0,I=I+Math.imul(kt,Ke)|0,I=I+Math.imul(se,mt)|0,C=C+Math.imul(se,Ke)|0,w=w+Math.imul(At,Mt)|0,I=I+Math.imul(At,me)|0,I=I+Math.imul(ze,Mt)|0,C=C+Math.imul(ze,me)|0,w=w+Math.imul(St,_e)|0,I=I+Math.imul(St,be)|0,I=I+Math.imul(De,_e)|0,C=C+Math.imul(De,be)|0,w=w+Math.imul($t,Je)|0,I=I+Math.imul($t,Te)|0,I=I+Math.imul(He,Je)|0,C=C+Math.imul(He,Te)|0,w=w+Math.imul(et,ne)|0,I=I+Math.imul(et,ie)|0,I=I+Math.imul(Fe,ne)|0,C=C+Math.imul(Fe,ie)|0,w=w+Math.imul(Me,Y)|0,I=I+Math.imul(Me,fe)|0,I=I+Math.imul(ke,Y)|0,C=C+Math.imul(ke,fe)|0,w=w+Math.imul(Z,Pe)|0,I=I+Math.imul(Z,xe)|0,I=I+Math.imul(H,Pe)|0,C=C+Math.imul(H,xe)|0,w=w+Math.imul(Q,Qe)|0,I=I+Math.imul(Q,Ze)|0,I=I+Math.imul(oe,Qe)|0,C=C+Math.imul(oe,Ze)|0;var pt=(d+w|0)+((I&8191)<<13)|0;d=(C+(I>>>13)|0)+(pt>>>26)|0,pt&=67108863,w=Math.imul(re,mt),I=Math.imul(re,Ke),I=I+Math.imul(he,mt)|0,C=Math.imul(he,Ke),w=w+Math.imul(kt,Mt)|0,I=I+Math.imul(kt,me)|0,I=I+Math.imul(se,Mt)|0,C=C+Math.imul(se,me)|0,w=w+Math.imul(At,_e)|0,I=I+Math.imul(At,be)|0,I=I+Math.imul(ze,_e)|0,C=C+Math.imul(ze,be)|0,w=w+Math.imul(St,Je)|0,I=I+Math.imul(St,Te)|0,I=I+Math.imul(De,Je)|0,C=C+Math.imul(De,Te)|0,w=w+Math.imul($t,ne)|0,I=I+Math.imul($t,ie)|0,I=I+Math.imul(He,ne)|0,C=C+Math.imul(He,ie)|0,w=w+Math.imul(et,Y)|0,I=I+Math.imul(et,fe)|0,I=I+Math.imul(Fe,Y)|0,C=C+Math.imul(Fe,fe)|0,w=w+Math.imul(Me,Pe)|0,I=I+Math.imul(Me,xe)|0,I=I+Math.imul(ke,Pe)|0,C=C+Math.imul(ke,xe)|0,w=w+Math.imul(Z,Qe)|0,I=I+Math.imul(Z,Ze)|0,I=I+Math.imul(H,Qe)|0,C=C+Math.imul(H,Ze)|0;var at=(d+w|0)+((I&8191)<<13)|0;d=(C+(I>>>13)|0)+(at>>>26)|0,at&=67108863,w=Math.imul(re,Mt),I=Math.imul(re,me),I=I+Math.imul(he,Mt)|0,C=Math.imul(he,me),w=w+Math.imul(kt,_e)|0,I=I+Math.imul(kt,be)|0,I=I+Math.imul(se,_e)|0,C=C+Math.imul(se,be)|0,w=w+Math.imul(At,Je)|0,I=I+Math.imul(At,Te)|0,I=I+Math.imul(ze,Je)|0,C=C+Math.imul(ze,Te)|0,w=w+Math.imul(St,ne)|0,I=I+Math.imul(St,ie)|0,I=I+Math.imul(De,ne)|0,C=C+Math.imul(De,ie)|0,w=w+Math.imul($t,Y)|0,I=I+Math.imul($t,fe)|0,I=I+Math.imul(He,Y)|0,C=C+Math.imul(He,fe)|0,w=w+Math.imul(et,Pe)|0,I=I+Math.imul(et,xe)|0,I=I+Math.imul(Fe,Pe)|0,C=C+Math.imul(Fe,xe)|0,w=w+Math.imul(Me,Qe)|0,I=I+Math.imul(Me,Ze)|0,I=I+Math.imul(ke,Qe)|0,C=C+Math.imul(ke,Ze)|0;var lt=(d+w|0)+((I&8191)<<13)|0;d=(C+(I>>>13)|0)+(lt>>>26)|0,lt&=67108863,w=Math.imul(re,_e),I=Math.imul(re,be),I=I+Math.imul(he,_e)|0,C=Math.imul(he,be),w=w+Math.imul(kt,Je)|0,I=I+Math.imul(kt,Te)|0,I=I+Math.imul(se,Je)|0,C=C+Math.imul(se,Te)|0,w=w+Math.imul(At,ne)|0,I=I+Math.imul(At,ie)|0,I=I+Math.imul(ze,ne)|0,C=C+Math.imul(ze,ie)|0,w=w+Math.imul(St,Y)|0,I=I+Math.imul(St,fe)|0,I=I+Math.imul(De,Y)|0,C=C+Math.imul(De,fe)|0,w=w+Math.imul($t,Pe)|0,I=I+Math.imul($t,xe)|0,I=I+Math.imul(He,Pe)|0,C=C+Math.imul(He,xe)|0,w=w+Math.imul(et,Qe)|0,I=I+Math.imul(et,Ze)|0,I=I+Math.imul(Fe,Qe)|0,C=C+Math.imul(Fe,Ze)|0;var ht=(d+w|0)+((I&8191)<<13)|0;d=(C+(I>>>13)|0)+(ht>>>26)|0,ht&=67108863,w=Math.imul(re,Je),I=Math.imul(re,Te),I=I+Math.imul(he,Je)|0,C=Math.imul(he,Te),w=w+Math.imul(kt,ne)|0,I=I+Math.imul(kt,ie)|0,I=I+Math.imul(se,ne)|0,C=C+Math.imul(se,ie)|0,w=w+Math.imul(At,Y)|0,I=I+Math.imul(At,fe)|0,I=I+Math.imul(ze,Y)|0,C=C+Math.imul(ze,fe)|0,w=w+Math.imul(St,Pe)|0,I=I+Math.imul(St,xe)|0,I=I+Math.imul(De,Pe)|0,C=C+Math.imul(De,xe)|0,w=w+Math.imul($t,Qe)|0,I=I+Math.imul($t,Ze)|0,I=I+Math.imul(He,Qe)|0,C=C+Math.imul(He,Ze)|0;var ot=(d+w|0)+((I&8191)<<13)|0;d=(C+(I>>>13)|0)+(ot>>>26)|0,ot&=67108863,w=Math.imul(re,ne),I=Math.imul(re,ie),I=I+Math.imul(he,ne)|0,C=Math.imul(he,ie),w=w+Math.imul(kt,Y)|0,I=I+Math.imul(kt,fe)|0,I=I+Math.imul(se,Y)|0,C=C+Math.imul(se,fe)|0,w=w+Math.imul(At,Pe)|0,I=I+Math.imul(At,xe)|0,I=I+Math.imul(ze,Pe)|0,C=C+Math.imul(ze,xe)|0,w=w+Math.imul(St,Qe)|0,I=I+Math.imul(St,Ze)|0,I=I+Math.imul(De,Qe)|0,C=C+Math.imul(De,Ze)|0;var je=(d+w|0)+((I&8191)<<13)|0;d=(C+(I>>>13)|0)+(je>>>26)|0,je&=67108863,w=Math.imul(re,Y),I=Math.imul(re,fe),I=I+Math.imul(he,Y)|0,C=Math.imul(he,fe),w=w+Math.imul(kt,Pe)|0,I=I+Math.imul(kt,xe)|0,I=I+Math.imul(se,Pe)|0,C=C+Math.imul(se,xe)|0,w=w+Math.imul(At,Qe)|0,I=I+Math.imul(At,Ze)|0,I=I+Math.imul(ze,Qe)|0,C=C+Math.imul(ze,Ze)|0;var We=(d+w|0)+((I&8191)<<13)|0;d=(C+(I>>>13)|0)+(We>>>26)|0,We&=67108863,w=Math.imul(re,Pe),I=Math.imul(re,xe),I=I+Math.imul(he,Pe)|0,C=Math.imul(he,xe),w=w+Math.imul(kt,Qe)|0,I=I+Math.imul(kt,Ze)|0,I=I+Math.imul(se,Qe)|0,C=C+Math.imul(se,Ze)|0;var nt=(d+w|0)+((I&8191)<<13)|0;d=(C+(I>>>13)|0)+(nt>>>26)|0,nt&=67108863,w=Math.imul(re,Qe),I=Math.imul(re,Ze),I=I+Math.imul(he,Qe)|0,C=Math.imul(he,Ze);var tt=(d+w|0)+((I&8191)<<13)|0;return d=(C+(I>>>13)|0)+(tt>>>26)|0,tt&=67108863,_[0]=xt,_[1]=it,_[2]=dt,_[3]=gt,_[4]=yt,_[5]=Et,_[6]=vt,_[7]=_t,_[8]=wt,_[9]=ct,_[10]=pt,_[11]=at,_[12]=lt,_[13]=ht,_[14]=ot,_[15]=je,_[16]=We,_[17]=nt,_[18]=tt,d!==0&&(_[19]=d,E.length++),E};Math.imul||(X=q);function ee(p,m,y){y.negative=m.negative^p.negative,y.length=p.length+m.length;for(var E=0,$=0,k=0;k<y.length-1;k++){var _=$;$=0;for(var d=E&67108863,w=Math.min(k,m.length-1),I=Math.max(0,k-p.length+1);I<=w;I++){var C=k-I,V=p.words[C]|0,O=m.words[I]|0,j=V*O,D=j&67108863;_=_+(j/67108864|0)|0,D=D+d|0,d=D&67108863,_=_+(D>>>26)|0,$+=_>>>26,_&=67108863}y.words[k]=d,E=_,_=$}return E!==0?y.words[k]=E:y.length--,y._strip()}function te(p,m,y){return ee(p,m,y)}a.prototype.mulTo=function(m,y){var E,$=this.length+m.length;return this.length===10&&m.length===10?E=X(this,m,y):$<63?E=q(this,m,y):$<1024?E=ee(this,m,y):E=te(this,m,y),E},a.prototype.mul=function(m){var y=new a(null);return y.words=new Array(this.length+m.length),this.mulTo(m,y)},a.prototype.mulf=function(m){var y=new a(null);return y.words=new Array(this.length+m.length),te(this,m,y)},a.prototype.imul=function(m){return this.clone().mulTo(m,this)},a.prototype.imuln=function(m){var y=m<0;y&&(m=-m),o(typeof m=="number"),o(m<67108864);for(var E=0,$=0;$<this.length;$++){var k=(this.words[$]|0)*m,_=(k&67108863)+(E&67108863);E>>=26,E+=k/67108864|0,E+=_>>>26,this.words[$]=_&67108863}return E!==0&&(this.words[$]=E,this.length++),y?this.ineg():this},a.prototype.muln=function(m){return this.clone().imuln(m)},a.prototype.sqr=function(){return this.mul(this)},a.prototype.isqr=function(){return this.imul(this.clone())},a.prototype.pow=function(m){var y=U(m);if(y.length===0)return new a(1);for(var E=this,$=0;$<y.length&&y[$]===0;$++,E=E.sqr());if(++$<y.length)for(var k=E.sqr();$<y.length;$++,k=k.sqr())y[$]!==0&&(E=E.mul(k));return E},a.prototype.iushln=function(m){o(typeof m=="number"&&m>=0);var y=m%26,E=(m-y)/26,$=67108863>>>26-y<<26-y,k;if(y!==0){var _=0;for(k=0;k<this.length;k++){var d=this.words[k]&$,w=(this.words[k]|0)-d<<y;this.words[k]=w|_,_=d>>>26-y}_&&(this.words[k]=_,this.length++)}if(E!==0){for(k=this.length-1;k>=0;k--)this.words[k+E]=this.words[k];for(k=0;k<E;k++)this.words[k]=0;this.length+=E}return this._strip()},a.prototype.ishln=function(m){return o(this.negative===0),this.iushln(m)},a.prototype.iushrn=function(m,y,E){o(typeof m=="number"&&m>=0);var $;y?$=(y-y%26)/26:$=0;var k=m%26,_=Math.min((m-k)/26,this.length),d=67108863^67108863>>>k<<k,w=E;if($-=_,$=Math.max(0,$),w){for(var I=0;I<_;I++)w.words[I]=this.words[I];w.length=_}if(_!==0)if(this.length>_)for(this.length-=_,I=0;I<this.length;I++)this.words[I]=this.words[I+_];else this.words[0]=0,this.length=1;var C=0;for(I=this.length-1;I>=0&&(C!==0||I>=$);I--){var V=this.words[I]|0;this.words[I]=C<<26-k|V>>>k,C=V&d}return w&&C!==0&&(w.words[w.length++]=C),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},a.prototype.ishrn=function(m,y,E){return o(this.negative===0),this.iushrn(m,y,E)},a.prototype.shln=function(m){return this.clone().ishln(m)},a.prototype.ushln=function(m){return this.clone().iushln(m)},a.prototype.shrn=function(m){return this.clone().ishrn(m)},a.prototype.ushrn=function(m){return this.clone().iushrn(m)},a.prototype.testn=function(m){o(typeof m=="number"&&m>=0);var y=m%26,E=(m-y)/26,$=1<<y;if(this.length<=E)return!1;var k=this.words[E];return!!(k&$)},a.prototype.imaskn=function(m){o(typeof m=="number"&&m>=0);var y=m%26,E=(m-y)/26;if(o(this.negative===0,"imaskn works only with positive numbers"),this.length<=E)return this;if(y!==0&&E++,this.length=Math.min(E,this.length),y!==0){var $=67108863^67108863>>>y<<y;this.words[this.length-1]&=$}return this._strip()},a.prototype.maskn=function(m){return this.clone().imaskn(m)},a.prototype.iaddn=function(m){return o(typeof m=="number"),o(m<67108864),m<0?this.isubn(-m):this.negative!==0?this.length===1&&(this.words[0]|0)<=m?(this.words[0]=m-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(m),this.negative=1,this):this._iaddn(m)},a.prototype._iaddn=function(m){this.words[0]+=m;for(var y=0;y<this.length&&this.words[y]>=67108864;y++)this.words[y]-=67108864,y===this.length-1?this.words[y+1]=1:this.words[y+1]++;return this.length=Math.max(this.length,y+1),this},a.prototype.isubn=function(m){if(o(typeof m=="number"),o(m<67108864),m<0)return this.iaddn(-m);if(this.negative!==0)return this.negative=0,this.iaddn(m),this.negative=1,this;if(this.words[0]-=m,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var y=0;y<this.length&&this.words[y]<0;y++)this.words[y]+=67108864,this.words[y+1]-=1;return this._strip()},a.prototype.addn=function(m){return this.clone().iaddn(m)},a.prototype.subn=function(m){return this.clone().isubn(m)},a.prototype.iabs=function(){return this.negative=0,this},a.prototype.abs=function(){return this.clone().iabs()},a.prototype._ishlnsubmul=function(m,y,E){var $=m.length+E,k;this._expand($);var _,d=0;for(k=0;k<m.length;k++){_=(this.words[k+E]|0)+d;var w=(m.words[k]|0)*y;_-=w&67108863,d=(_>>26)-(w/67108864|0),this.words[k+E]=_&67108863}for(;k<this.length-E;k++)_=(this.words[k+E]|0)+d,d=_>>26,this.words[k+E]=_&67108863;if(d===0)return this._strip();for(o(d===-1),d=0,k=0;k<this.length;k++)_=-(this.words[k]|0)+d,d=_>>26,this.words[k]=_&67108863;return this.negative=1,this._strip()},a.prototype._wordDiv=function(m,y){var E=this.length-m.length,$=this.clone(),k=m,_=k.words[k.length-1]|0,d=this._countBits(_);E=26-d,E!==0&&(k=k.ushln(E),$.iushln(E),_=k.words[k.length-1]|0);var w=$.length-k.length,I;if(y!=="mod"){I=new a(null),I.length=w+1,I.words=new Array(I.length);for(var C=0;C<I.length;C++)I.words[C]=0}var V=$.clone()._ishlnsubmul(k,1,w);V.negative===0&&($=V,I&&(I.words[w]=1));for(var O=w-1;O>=0;O--){var j=($.words[k.length+O]|0)*67108864+($.words[k.length+O-1]|0);for(j=Math.min(j/_|0,67108863),$._ishlnsubmul(k,j,O);$.negative!==0;)j--,$.negative=0,$._ishlnsubmul(k,1,O),$.isZero()||($.negative^=1);I&&(I.words[O]=j)}return I&&I._strip(),$._strip(),y!=="div"&&E!==0&&$.iushrn(E),{div:I||null,mod:$}},a.prototype.divmod=function(m,y,E){if(o(!m.isZero()),this.isZero())return{div:new a(0),mod:new a(0)};var $,k,_;return this.negative!==0&&m.negative===0?(_=this.neg().divmod(m,y),y!=="mod"&&($=_.div.neg()),y!=="div"&&(k=_.mod.neg(),E&&k.negative!==0&&k.iadd(m)),{div:$,mod:k}):this.negative===0&&m.negative!==0?(_=this.divmod(m.neg(),y),y!=="mod"&&($=_.div.neg()),{div:$,mod:_.mod}):this.negative&m.negative?(_=this.neg().divmod(m.neg(),y),y!=="div"&&(k=_.mod.neg(),E&&k.negative!==0&&k.isub(m)),{div:_.div,mod:k}):m.length>this.length||this.cmp(m)<0?{div:new a(0),mod:this}:m.length===1?y==="div"?{div:this.divn(m.words[0]),mod:null}:y==="mod"?{div:null,mod:new a(this.modrn(m.words[0]))}:{div:this.divn(m.words[0]),mod:new a(this.modrn(m.words[0]))}:this._wordDiv(m,y)},a.prototype.div=function(m){return this.divmod(m,"div",!1).div},a.prototype.mod=function(m){return this.divmod(m,"mod",!1).mod},a.prototype.umod=function(m){return this.divmod(m,"mod",!0).mod},a.prototype.divRound=function(m){var y=this.divmod(m);if(y.mod.isZero())return y.div;var E=y.div.negative!==0?y.mod.isub(m):y.mod,$=m.ushrn(1),k=m.andln(1),_=E.cmp($);return _<0||k===1&&_===0?y.div:y.div.negative!==0?y.div.isubn(1):y.div.iaddn(1)},a.prototype.modrn=function(m){var y=m<0;y&&(m=-m),o(m<=67108863);for(var E=(1<<26)%m,$=0,k=this.length-1;k>=0;k--)$=(E*$+(this.words[k]|0))%m;return y?-$:$},a.prototype.modn=function(m){return this.modrn(m)},a.prototype.idivn=function(m){var y=m<0;y&&(m=-m),o(m<=67108863);for(var E=0,$=this.length-1;$>=0;$--){var k=(this.words[$]|0)+E*67108864;this.words[$]=k/m|0,E=k%m}return this._strip(),y?this.ineg():this},a.prototype.divn=function(m){return this.clone().idivn(m)},a.prototype.egcd=function(m){o(m.negative===0),o(!m.isZero());var y=this,E=m.clone();y.negative!==0?y=y.umod(m):y=y.clone();for(var $=new a(1),k=new a(0),_=new a(0),d=new a(1),w=0;y.isEven()&&E.isEven();)y.iushrn(1),E.iushrn(1),++w;for(var I=E.clone(),C=y.clone();!y.isZero();){for(var V=0,O=1;!(y.words[0]&O)&&V<26;++V,O<<=1);if(V>0)for(y.iushrn(V);V-- >0;)($.isOdd()||k.isOdd())&&($.iadd(I),k.isub(C)),$.iushrn(1),k.iushrn(1);for(var j=0,D=1;!(E.words[0]&D)&&j<26;++j,D<<=1);if(j>0)for(E.iushrn(j);j-- >0;)(_.isOdd()||d.isOdd())&&(_.iadd(I),d.isub(C)),_.iushrn(1),d.iushrn(1);y.cmp(E)>=0?(y.isub(E),$.isub(_),k.isub(d)):(E.isub(y),_.isub($),d.isub(k))}return{a:_,b:d,gcd:E.iushln(w)}},a.prototype._invmp=function(m){o(m.negative===0),o(!m.isZero());var y=this,E=m.clone();y.negative!==0?y=y.umod(m):y=y.clone();for(var $=new a(1),k=new a(0),_=E.clone();y.cmpn(1)>0&&E.cmpn(1)>0;){for(var d=0,w=1;!(y.words[0]&w)&&d<26;++d,w<<=1);if(d>0)for(y.iushrn(d);d-- >0;)$.isOdd()&&$.iadd(_),$.iushrn(1);for(var I=0,C=1;!(E.words[0]&C)&&I<26;++I,C<<=1);if(I>0)for(E.iushrn(I);I-- >0;)k.isOdd()&&k.iadd(_),k.iushrn(1);y.cmp(E)>=0?(y.isub(E),$.isub(k)):(E.isub(y),k.isub($))}var V;return y.cmpn(1)===0?V=$:V=k,V.cmpn(0)<0&&V.iadd(m),V},a.prototype.gcd=function(m){if(this.isZero())return m.abs();if(m.isZero())return this.abs();var y=this.clone(),E=m.clone();y.negative=0,E.negative=0;for(var $=0;y.isEven()&&E.isEven();$++)y.iushrn(1),E.iushrn(1);do{for(;y.isEven();)y.iushrn(1);for(;E.isEven();)E.iushrn(1);var k=y.cmp(E);if(k<0){var _=y;y=E,E=_}else if(k===0||E.cmpn(1)===0)break;y.isub(E)}while(!0);return E.iushln($)},a.prototype.invm=function(m){return this.egcd(m).a.umod(m)},a.prototype.isEven=function(){return(this.words[0]&1)===0},a.prototype.isOdd=function(){return(this.words[0]&1)===1},a.prototype.andln=function(m){return this.words[0]&m},a.prototype.bincn=function(m){o(typeof m=="number");var y=m%26,E=(m-y)/26,$=1<<y;if(this.length<=E)return this._expand(E+1),this.words[E]|=$,this;for(var k=$,_=E;k!==0&&_<this.length;_++){var d=this.words[_]|0;d+=k,k=d>>>26,d&=67108863,this.words[_]=d}return k!==0&&(this.words[_]=k,this.length++),this},a.prototype.isZero=function(){return this.length===1&&this.words[0]===0},a.prototype.cmpn=function(m){var y=m<0;if(this.negative!==0&&!y)return-1;if(this.negative===0&&y)return 1;this._strip();var E;if(this.length>1)E=1;else{y&&(m=-m),o(m<=67108863,"Number is too big");var $=this.words[0]|0;E=$===m?0:$<m?-1:1}return this.negative!==0?-E|0:E},a.prototype.cmp=function(m){if(this.negative!==0&&m.negative===0)return-1;if(this.negative===0&&m.negative!==0)return 1;var y=this.ucmp(m);return this.negative!==0?-y|0:y},a.prototype.ucmp=function(m){if(this.length>m.length)return 1;if(this.length<m.length)return-1;for(var y=0,E=this.length-1;E>=0;E--){var $=this.words[E]|0,k=m.words[E]|0;if($!==k){$<k?y=-1:$>k&&(y=1);break}}return y},a.prototype.gtn=function(m){return this.cmpn(m)===1},a.prototype.gt=function(m){return this.cmp(m)===1},a.prototype.gten=function(m){return this.cmpn(m)>=0},a.prototype.gte=function(m){return this.cmp(m)>=0},a.prototype.ltn=function(m){return this.cmpn(m)===-1},a.prototype.lt=function(m){return this.cmp(m)===-1},a.prototype.lten=function(m){return this.cmpn(m)<=0},a.prototype.lte=function(m){return this.cmp(m)<=0},a.prototype.eqn=function(m){return this.cmpn(m)===0},a.prototype.eq=function(m){return this.cmp(m)===0},a.red=function(m){return new T(m)},a.prototype.toRed=function(m){return o(!this.red,"Already a number in reduction context"),o(this.negative===0,"red works only with positives"),m.convertTo(this)._forceRed(m)},a.prototype.fromRed=function(){return o(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},a.prototype._forceRed=function(m){return this.red=m,this},a.prototype.forceRed=function(m){return o(!this.red,"Already a number in reduction context"),this._forceRed(m)},a.prototype.redAdd=function(m){return o(this.red,"redAdd works only with red numbers"),this.red.add(this,m)},a.prototype.redIAdd=function(m){return o(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,m)},a.prototype.redSub=function(m){return o(this.red,"redSub works only with red numbers"),this.red.sub(this,m)},a.prototype.redISub=function(m){return o(this.red,"redISub works only with red numbers"),this.red.isub(this,m)},a.prototype.redShl=function(m){return o(this.red,"redShl works only with red numbers"),this.red.shl(this,m)},a.prototype.redMul=function(m){return o(this.red,"redMul works only with red numbers"),this.red._verify2(this,m),this.red.mul(this,m)},a.prototype.redIMul=function(m){return o(this.red,"redMul works only with red numbers"),this.red._verify2(this,m),this.red.imul(this,m)},a.prototype.redSqr=function(){return o(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},a.prototype.redISqr=function(){return o(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},a.prototype.redSqrt=function(){return o(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},a.prototype.redInvm=function(){return o(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},a.prototype.redNeg=function(){return o(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},a.prototype.redPow=function(m){return o(this.red&&!m.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,m)};var ce={k256:null,p224:null,p192:null,p25519:null};function ue(p,m){this.name=p,this.p=new a(m,16),this.n=this.p.bitLength(),this.k=new a(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}ue.prototype._tmp=function(){var m=new a(null);return m.words=new Array(Math.ceil(this.n/13)),m},ue.prototype.ireduce=function(m){var y=m,E;do this.split(y,this.tmp),y=this.imulK(y),y=y.iadd(this.tmp),E=y.bitLength();while(E>this.n);var $=E<this.n?-1:y.ucmp(this.p);return $===0?(y.words[0]=0,y.length=1):$>0?y.isub(this.p):y.strip!==void 0?y.strip():y._strip(),y},ue.prototype.split=function(m,y){m.iushrn(this.n,0,y)},ue.prototype.imulK=function(m){return m.imul(this.k)};function Ae(){ue.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}c(Ae,ue),Ae.prototype.split=function(m,y){for(var E=4194303,$=Math.min(m.length,9),k=0;k<$;k++)y.words[k]=m.words[k];if(y.length=$,m.length<=9){m.words[0]=0,m.length=1;return}var _=m.words[9];for(y.words[y.length++]=_&E,k=10;k<m.length;k++){var d=m.words[k]|0;m.words[k-10]=(d&E)<<4|_>>>22,_=d}_>>>=22,m.words[k-10]=_,_===0&&m.length>10?m.length-=10:m.length-=9},Ae.prototype.imulK=function(m){m.words[m.length]=0,m.words[m.length+1]=0,m.length+=2;for(var y=0,E=0;E<m.length;E++){var $=m.words[E]|0;y+=$*977,m.words[E]=y&67108863,y=$*64+(y/67108864|0)}return m.words[m.length-1]===0&&(m.length--,m.words[m.length-1]===0&&m.length--),m};function we(){ue.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}c(we,ue);function pe(){ue.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}c(pe,ue);function Ce(){ue.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}c(Ce,ue),Ce.prototype.imulK=function(m){for(var y=0,E=0;E<m.length;E++){var $=(m.words[E]|0)*19+y,k=$&67108863;$>>>=26,m.words[E]=k,y=$}return y!==0&&(m.words[m.length++]=y),m},a._prime=function(m){if(ce[m])return ce[m];var y;if(m==="k256")y=new Ae;else if(m==="p224")y=new we;else if(m==="p192")y=new pe;else if(m==="p25519")y=new Ce;else throw new Error("Unknown prime "+m);return ce[m]=y,y};function T(p){if(typeof p=="string"){var m=a._prime(p);this.m=m.p,this.prime=m}else o(p.gtn(1),"modulus must be greater than 1"),this.m=p,this.prime=null}T.prototype._verify1=function(m){o(m.negative===0,"red works only with positives"),o(m.red,"red works only with red numbers")},T.prototype._verify2=function(m,y){o((m.negative|y.negative)===0,"red works only with positives"),o(m.red&&m.red===y.red,"red works only with red numbers")},T.prototype.imod=function(m){return this.prime?this.prime.ireduce(m)._forceRed(this):(S(m,m.umod(this.m)._forceRed(this)),m)},T.prototype.neg=function(m){return m.isZero()?m.clone():this.m.sub(m)._forceRed(this)},T.prototype.add=function(m,y){this._verify2(m,y);var E=m.add(y);return E.cmp(this.m)>=0&&E.isub(this.m),E._forceRed(this)},T.prototype.iadd=function(m,y){this._verify2(m,y);var E=m.iadd(y);return E.cmp(this.m)>=0&&E.isub(this.m),E},T.prototype.sub=function(m,y){this._verify2(m,y);var E=m.sub(y);return E.cmpn(0)<0&&E.iadd(this.m),E._forceRed(this)},T.prototype.isub=function(m,y){this._verify2(m,y);var E=m.isub(y);return E.cmpn(0)<0&&E.iadd(this.m),E},T.prototype.shl=function(m,y){return this._verify1(m),this.imod(m.ushln(y))},T.prototype.imul=function(m,y){return this._verify2(m,y),this.imod(m.imul(y))},T.prototype.mul=function(m,y){return this._verify2(m,y),this.imod(m.mul(y))},T.prototype.isqr=function(m){return this.imul(m,m.clone())},T.prototype.sqr=function(m){return this.mul(m,m)},T.prototype.sqrt=function(m){if(m.isZero())return m.clone();var y=this.m.andln(3);if(o(y%2===1),y===3){var E=this.m.add(new a(1)).iushrn(2);return this.pow(m,E)}for(var $=this.m.subn(1),k=0;!$.isZero()&&$.andln(1)===0;)k++,$.iushrn(1);o(!$.isZero());var _=new a(1).toRed(this),d=_.redNeg(),w=this.m.subn(1).iushrn(1),I=this.m.bitLength();for(I=new a(2*I*I).toRed(this);this.pow(I,w).cmp(d)!==0;)I.redIAdd(d);for(var C=this.pow(I,$),V=this.pow(m,$.addn(1).iushrn(1)),O=this.pow(m,$),j=k;O.cmp(_)!==0;){for(var D=O,Q=0;D.cmp(_)!==0;Q++)D=D.redSqr();o(Q<j);var oe=this.pow(C,new a(1).iushln(j-Q-1));V=V.redMul(oe),C=oe.redSqr(),O=O.redMul(C),j=Q}return V},T.prototype.invm=function(m){var y=m._invmp(this.m);return y.negative!==0?(y.negative=0,this.imod(y).redNeg()):this.imod(y)},T.prototype.pow=function(m,y){if(y.isZero())return new a(1).toRed(this);if(y.cmpn(1)===0)return m.clone();var E=4,$=new Array(1<<E);$[0]=new a(1).toRed(this),$[1]=m;for(var k=2;k<$.length;k++)$[k]=this.mul($[k-1],m);var _=$[0],d=0,w=0,I=y.bitLength()%26;for(I===0&&(I=26),k=y.length-1;k>=0;k--){for(var C=y.words[k],V=I-1;V>=0;V--){var O=C>>V&1;if(_!==$[0]&&(_=this.sqr(_)),O===0&&d===0){w=0;continue}d<<=1,d|=O,w++,!(w!==E&&(k!==0||V!==0))&&(_=this.mul(_,$[d]),w=0,d=0)}I=26}return _},T.prototype.convertTo=function(m){var y=m.umod(this.m);return y===m?y.clone():y},T.prototype.convertFrom=function(m){var y=m.clone();return y.red=null,y},a.mont=function(m){return new u(m)};function u(p){T.call(this,p),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new a(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}c(u,T),u.prototype.convertTo=function(m){return this.imod(m.ushln(this.shift))},u.prototype.convertFrom=function(m){var y=this.imod(m.mul(this.rinv));return y.red=null,y},u.prototype.imul=function(m,y){if(m.isZero()||y.isZero())return m.words[0]=0,m.length=1,m;var E=m.imul(y),$=E.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),k=E.isub($).iushrn(this.shift),_=k;return k.cmp(this.m)>=0?_=k.isub(this.m):k.cmpn(0)<0&&(_=k.iadd(this.m)),_._forceRed(this)},u.prototype.mul=function(m,y){if(m.isZero()||y.isZero())return new a(0)._forceRed(this);var E=m.mul(y),$=E.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),k=E.isub($).iushrn(this.shift),_=k;return k.cmp(this.m)>=0?_=k.isub(this.m):k.cmpn(0)<0&&(_=k.iadd(this.m)),_._forceRed(this)},u.prototype.invm=function(m){var y=this.imod(m._invmp(this.m).mul(this.r2));return y._forceRed(this)}})(t,commonjsGlobal)})(bn$6);var bnExports$6=bn$6.exports;const BN$c=getDefaultExportFromCjs$1(bnExports$6),version$r="logger/5.7.0";let _permanentCensorErrors=!1,_censorErrors=!1;const LogLevels={debug:1,default:2,info:2,warning:3,error:4,off:5};let _logLevel=LogLevels.default,_globalLogger=null;function _checkNormalize(){try{const t=[];if(["NFD","NFC","NFKD","NFKC"].forEach(e=>{try{if("test".normalize(e)!=="test")throw new Error("bad normalize")}catch{t.push(e)}}),t.length)throw new Error("missing "+t.join(", "));if("\xe9".normalize("NFD")!=="e")throw new Error("broken implementation")}catch(t){return t.message}return null}const _normalizeError=_checkNormalize();var LogLevel;(function(t){t.DEBUG="DEBUG",t.INFO="INFO",t.WARNING="WARNING",t.ERROR="ERROR",t.OFF="OFF"})(LogLevel||(LogLevel={}));var ErrorCode;(function(t){t.UNKNOWN_ERROR="UNKNOWN_ERROR",t.NOT_IMPLEMENTED="NOT_IMPLEMENTED",t.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",t.NETWORK_ERROR="NETWORK_ERROR",t.SERVER_ERROR="SERVER_ERROR",t.TIMEOUT="TIMEOUT",t.BUFFER_OVERRUN="BUFFER_OVERRUN",t.NUMERIC_FAULT="NUMERIC_FAULT",t.MISSING_NEW="MISSING_NEW",t.INVALID_ARGUMENT="INVALID_ARGUMENT",t.MISSING_ARGUMENT="MISSING_ARGUMENT",t.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",t.CALL_EXCEPTION="CALL_EXCEPTION",t.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",t.NONCE_EXPIRED="NONCE_EXPIRED",t.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",t.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",t.TRANSACTION_REPLACED="TRANSACTION_REPLACED",t.ACTION_REJECTED="ACTION_REJECTED"})(ErrorCode||(ErrorCode={}));const HEX="0123456789abcdef";class Logger{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,n){const o=e.toLowerCase();LogLevels[o]==null&&this.throwArgumentError("invalid log level name","logLevel",e),!(_logLevel>LogLevels[o])&&console.log.apply(console,n)}debug(...e){this._log(Logger.levels.DEBUG,e)}info(...e){this._log(Logger.levels.INFO,e)}warn(...e){this._log(Logger.levels.WARNING,e)}makeError(e,n,o){if(_censorErrors)return this.makeError("censored error",n,{});n||(n=Logger.errors.UNKNOWN_ERROR),o||(o={});const c=[];Object.keys(o).forEach(v=>{const A=o[v];try{if(A instanceof Uint8Array){let S="";for(let M=0;M<A.length;M++)S+=HEX[A[M]>>4],S+=HEX[A[M]&15];c.push(v+"=Uint8Array(0x"+S+")")}else c.push(v+"="+JSON.stringify(A))}catch{c.push(v+"="+JSON.stringify(o[v].toString()))}}),c.push(`code=${n}`),c.push(`version=${this.version}`);const a=e;let l="";switch(n){case ErrorCode.NUMERIC_FAULT:{l="NUMERIC_FAULT";const v=e;switch(v){case"overflow":case"underflow":case"division-by-zero":l+="-"+v;break;case"negative-power":case"negative-width":l+="-unsupported";break;case"unbound-bitwise-result":l+="-unbound-result";break}break}case ErrorCode.CALL_EXCEPTION:case ErrorCode.INSUFFICIENT_FUNDS:case ErrorCode.MISSING_NEW:case ErrorCode.NONCE_EXPIRED:case ErrorCode.REPLACEMENT_UNDERPRICED:case ErrorCode.TRANSACTION_REPLACED:case ErrorCode.UNPREDICTABLE_GAS_LIMIT:l=n;break}l&&(e+=" [ See: https://links.ethers.org/v5-errors-"+l+" ]"),c.length&&(e+=" ("+c.join(", ")+")");const b=new Error(e);return b.reason=a,b.code=n,Object.keys(o).forEach(function(v){b[v]=o[v]}),b}throwError(e,n,o){throw this.makeError(e,n,o)}throwArgumentError(e,n,o){return this.throwError(e,Logger.errors.INVALID_ARGUMENT,{argument:n,value:o})}assert(e,n,o,c){e||this.throwError(n,o,c)}assertArgument(e,n,o,c){e||this.throwArgumentError(n,o,c)}checkNormalize(e){_normalizeError&&this.throwError("platform missing String.prototype.normalize",Logger.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:_normalizeError})}checkSafeUint53(e,n){typeof e=="number"&&(n==null&&(n="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(n,Logger.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(n,Logger.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,n,o){o?o=": "+o:o="",e<n&&this.throwError("missing argument"+o,Logger.errors.MISSING_ARGUMENT,{count:e,expectedCount:n}),e>n&&this.throwError("too many arguments"+o,Logger.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:n})}checkNew(e,n){(e===Object||e==null)&&this.throwError("missing new",Logger.errors.MISSING_NEW,{name:n.name})}checkAbstract(e,n){e===n?this.throwError("cannot instantiate abstract class "+JSON.stringify(n.name)+" directly; use a sub-class",Logger.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):(e===Object||e==null)&&this.throwError("missing new",Logger.errors.MISSING_NEW,{name:n.name})}static globalLogger(){return _globalLogger||(_globalLogger=new Logger(version$r)),_globalLogger}static setCensorship(e,n){if(!e&&n&&this.globalLogger().throwError("cannot permanently disable censorship",Logger.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),_permanentCensorErrors){if(!e)return;this.globalLogger().throwError("error censorship permanent",Logger.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}_censorErrors=!!e,_permanentCensorErrors=!!n}static setLogLevel(e){const n=LogLevels[e.toLowerCase()];if(n==null){Logger.globalLogger().warn("invalid log level - "+e);return}_logLevel=n}static from(e){return new Logger(e)}}Logger.errors=ErrorCode;Logger.levels=LogLevel;const version$q="bytes/5.7.0",logger$x=new Logger(version$q);function isHexable(t){return!!t.toHexString}function addSlice(t){return t.slice||(t.slice=function(){const e=Array.prototype.slice.call(arguments);return addSlice(new Uint8Array(Array.prototype.slice.apply(t,e)))}),t}function isBytesLike(t){return isHexString(t)&&!(t.length%2)||isBytes$2(t)}function isInteger(t){return typeof t=="number"&&t==t&&t%1===0}function isBytes$2(t){if(t==null)return!1;if(t.constructor===Uint8Array)return!0;if(typeof t=="string"||!isInteger(t.length)||t.length<0)return!1;for(let e=0;e<t.length;e++){const n=t[e];if(!isInteger(n)||n<0||n>=256)return!1}return!0}function arrayify(t,e){if(e||(e={}),typeof t=="number"){logger$x.checkSafeUint53(t,"invalid arrayify value");const n=[];for(;t;)n.unshift(t&255),t=parseInt(String(t/256));return n.length===0&&n.push(0),addSlice(new Uint8Array(n))}if(e.allowMissingPrefix&&typeof t=="string"&&t.substring(0,2)!=="0x"&&(t="0x"+t),isHexable(t)&&(t=t.toHexString()),isHexString(t)){let n=t.substring(2);n.length%2&&(e.hexPad==="left"?n="0"+n:e.hexPad==="right"?n+="0":logger$x.throwArgumentError("hex data is odd-length","value",t));const o=[];for(let c=0;c<n.length;c+=2)o.push(parseInt(n.substring(c,c+2),16));return addSlice(new Uint8Array(o))}return isBytes$2(t)?addSlice(new Uint8Array(t)):logger$x.throwArgumentError("invalid arrayify value","value",t)}function concat(t){const e=t.map(c=>arrayify(c)),n=e.reduce((c,a)=>c+a.length,0),o=new Uint8Array(n);return e.reduce((c,a)=>(o.set(a,c),c+a.length),0),addSlice(o)}function stripZeros(t){let e=arrayify(t);if(e.length===0)return e;let n=0;for(;n<e.length&&e[n]===0;)n++;return n&&(e=e.slice(n)),e}function zeroPad(t,e){t=arrayify(t),t.length>e&&logger$x.throwArgumentError("value out of range","value",arguments[0]);const n=new Uint8Array(e);return n.set(t,e-t.length),addSlice(n)}function isHexString(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||e&&t.length!==2+2*e)}const HexCharacters="0123456789abcdef";function hexlify(t,e){if(e||(e={}),typeof t=="number"){logger$x.checkSafeUint53(t,"invalid hexlify value");let n="";for(;t;)n=HexCharacters[t&15]+n,t=Math.floor(t/16);return n.length?(n.length%2&&(n="0"+n),"0x"+n):"0x00"}if(typeof t=="bigint")return t=t.toString(16),t.length%2?"0x0"+t:"0x"+t;if(e.allowMissingPrefix&&typeof t=="string"&&t.substring(0,2)!=="0x"&&(t="0x"+t),isHexable(t))return t.toHexString();if(isHexString(t))return t.length%2&&(e.hexPad==="left"?t="0x0"+t.substring(2):e.hexPad==="right"?t+="0":logger$x.throwArgumentError("hex data is odd-length","value",t)),t.toLowerCase();if(isBytes$2(t)){let n="0x";for(let o=0;o<t.length;o++){let c=t[o];n+=HexCharacters[(c&240)>>4]+HexCharacters[c&15]}return n}return logger$x.throwArgumentError("invalid hexlify value","value",t)}function hexDataLength(t){if(typeof t!="string")t=hexlify(t);else if(!isHexString(t)||t.length%2)return null;return(t.length-2)/2}function hexDataSlice(t,e,n){return typeof t!="string"?t=hexlify(t):(!isHexString(t)||t.length%2)&&logger$x.throwArgumentError("invalid hexData","value",t),e=2+2*e,n!=null?"0x"+t.substring(e,2+2*n):"0x"+t.substring(e)}function hexConcat(t){let e="0x";return t.forEach(n=>{e+=hexlify(n).substring(2)}),e}function hexValue(t){const e=hexStripZeros(hexlify(t,{hexPad:"left"}));return e==="0x"?"0x0":e}function hexStripZeros(t){typeof t!="string"&&(t=hexlify(t)),isHexString(t)||logger$x.throwArgumentError("invalid hex string","value",t),t=t.substring(2);let e=0;for(;e<t.length&&t[e]==="0";)e++;return"0x"+t.substring(e)}function hexZeroPad(t,e){for(typeof t!="string"?t=hexlify(t):isHexString(t)||logger$x.throwArgumentError("invalid hex string","value",t),t.length>2*e+2&&logger$x.throwArgumentError("value out of range","value",arguments[1]);t.length<2*e+2;)t="0x0"+t.substring(2);return t}function splitSignature(t){const e={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(isBytesLike(t)){let n=arrayify(t);n.length===64?(e.v=27+(n[32]>>7),n[32]&=127,e.r=hexlify(n.slice(0,32)),e.s=hexlify(n.slice(32,64))):n.length===65?(e.r=hexlify(n.slice(0,32)),e.s=hexlify(n.slice(32,64)),e.v=n[64]):logger$x.throwArgumentError("invalid signature string","signature",t),e.v<27&&(e.v===0||e.v===1?e.v+=27:logger$x.throwArgumentError("signature invalid v byte","signature",t)),e.recoveryParam=1-e.v%2,e.recoveryParam&&(n[32]|=128),e._vs=hexlify(n.slice(32,64))}else{if(e.r=t.r,e.s=t.s,e.v=t.v,e.recoveryParam=t.recoveryParam,e._vs=t._vs,e._vs!=null){const c=zeroPad(arrayify(e._vs),32);e._vs=hexlify(c);const a=c[0]>=128?1:0;e.recoveryParam==null?e.recoveryParam=a:e.recoveryParam!==a&&logger$x.throwArgumentError("signature recoveryParam mismatch _vs","signature",t),c[0]&=127;const l=hexlify(c);e.s==null?e.s=l:e.s!==l&&logger$x.throwArgumentError("signature v mismatch _vs","signature",t)}if(e.recoveryParam==null)e.v==null?logger$x.throwArgumentError("signature missing v and recoveryParam","signature",t):e.v===0||e.v===1?e.recoveryParam=e.v:e.recoveryParam=1-e.v%2;else if(e.v==null)e.v=27+e.recoveryParam;else{const c=e.v===0||e.v===1?e.v:1-e.v%2;e.recoveryParam!==c&&logger$x.throwArgumentError("signature recoveryParam mismatch v","signature",t)}e.r==null||!isHexString(e.r)?logger$x.throwArgumentError("signature missing or invalid r","signature",t):e.r=hexZeroPad(e.r,32),e.s==null||!isHexString(e.s)?logger$x.throwArgumentError("signature missing or invalid s","signature",t):e.s=hexZeroPad(e.s,32);const n=arrayify(e.s);n[0]>=128&&logger$x.throwArgumentError("signature s out of range","signature",t),e.recoveryParam&&(n[0]|=128);const o=hexlify(n);e._vs&&(isHexString(e._vs)||logger$x.throwArgumentError("signature invalid _vs","signature",t),e._vs=hexZeroPad(e._vs,32)),e._vs==null?e._vs=o:e._vs!==o&&logger$x.throwArgumentError("signature _vs mismatch v and s","signature",t)}return e.yParityAndS=e._vs,e.compact=e.r+e.yParityAndS.substring(2),e}function joinSignature(t){return t=splitSignature(t),hexlify(concat([t.r,t.s,t.recoveryParam?"0x1c":"0x1b"]))}const version$p="bignumber/5.7.0";var BN$b=BN$c.BN;const logger$w=new Logger(version$p),_constructorGuard$4={},MAX_SAFE=9007199254740991;function isBigNumberish(t){return t!=null&&(BigNumber.isBigNumber(t)||typeof t=="number"&&t%1===0||typeof t=="string"&&!!t.match(/^-?[0-9]+$/)||isHexString(t)||typeof t=="bigint"||isBytes$2(t))}let _warnedToStringRadix=!1;class BigNumber{constructor(e,n){e!==_constructorGuard$4&&logger$w.throwError("cannot call constructor directly; use BigNumber.from",Logger.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=n,this._isBigNumber=!0,Object.freeze(this)}fromTwos(e){return toBigNumber(toBN(this).fromTwos(e))}toTwos(e){return toBigNumber(toBN(this).toTwos(e))}abs(){return this._hex[0]==="-"?BigNumber.from(this._hex.substring(1)):this}add(e){return toBigNumber(toBN(this).add(toBN(e)))}sub(e){return toBigNumber(toBN(this).sub(toBN(e)))}div(e){return BigNumber.from(e).isZero()&&throwFault$1("division-by-zero","div"),toBigNumber(toBN(this).div(toBN(e)))}mul(e){return toBigNumber(toBN(this).mul(toBN(e)))}mod(e){const n=toBN(e);return n.isNeg()&&throwFault$1("division-by-zero","mod"),toBigNumber(toBN(this).umod(n))}pow(e){const n=toBN(e);return n.isNeg()&&throwFault$1("negative-power","pow"),toBigNumber(toBN(this).pow(n))}and(e){const n=toBN(e);return(this.isNegative()||n.isNeg())&&throwFault$1("unbound-bitwise-result","and"),toBigNumber(toBN(this).and(n))}or(e){const n=toBN(e);return(this.isNegative()||n.isNeg())&&throwFault$1("unbound-bitwise-result","or"),toBigNumber(toBN(this).or(n))}xor(e){const n=toBN(e);return(this.isNegative()||n.isNeg())&&throwFault$1("unbound-bitwise-result","xor"),toBigNumber(toBN(this).xor(n))}mask(e){return(this.isNegative()||e<0)&&throwFault$1("negative-width","mask"),toBigNumber(toBN(this).maskn(e))}shl(e){return(this.isNegative()||e<0)&&throwFault$1("negative-width","shl"),toBigNumber(toBN(this).shln(e))}shr(e){return(this.isNegative()||e<0)&&throwFault$1("negative-width","shr"),toBigNumber(toBN(this).shrn(e))}eq(e){return toBN(this).eq(toBN(e))}lt(e){return toBN(this).lt(toBN(e))}lte(e){return toBN(this).lte(toBN(e))}gt(e){return toBN(this).gt(toBN(e))}gte(e){return toBN(this).gte(toBN(e))}isNegative(){return this._hex[0]==="-"}isZero(){return toBN(this).isZero()}toNumber(){try{return toBN(this).toNumber()}catch{throwFault$1("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch{}return logger$w.throwError("this platform does not support BigInt",Logger.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(arguments[0]===10?_warnedToStringRadix||(_warnedToStringRadix=!0,logger$w.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):arguments[0]===16?logger$w.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",Logger.errors.UNEXPECTED_ARGUMENT,{}):logger$w.throwError("BigNumber.toString does not accept parameters",Logger.errors.UNEXPECTED_ARGUMENT,{})),toBN(this).toString(10)}toHexString(){return this._hex}toJSON(e){return{type:"BigNumber",hex:this.toHexString()}}static from(e){if(e instanceof BigNumber)return e;if(typeof e=="string")return e.match(/^-?0x[0-9a-f]+$/i)?new BigNumber(_constructorGuard$4,toHex$1(e)):e.match(/^-?[0-9]+$/)?new BigNumber(_constructorGuard$4,toHex$1(new BN$b(e))):logger$w.throwArgumentError("invalid BigNumber string","value",e);if(typeof e=="number")return e%1&&throwFault$1("underflow","BigNumber.from",e),(e>=MAX_SAFE||e<=-MAX_SAFE)&&throwFault$1("overflow","BigNumber.from",e),BigNumber.from(String(e));const n=e;if(typeof n=="bigint")return BigNumber.from(n.toString());if(isBytes$2(n))return BigNumber.from(hexlify(n));if(n)if(n.toHexString){const o=n.toHexString();if(typeof o=="string")return BigNumber.from(o)}else{let o=n._hex;if(o==null&&n.type==="BigNumber"&&(o=n.hex),typeof o=="string"&&(isHexString(o)||o[0]==="-"&&isHexString(o.substring(1))))return BigNumber.from(o)}return logger$w.throwArgumentError("invalid BigNumber value","value",e)}static isBigNumber(e){return!!(e&&e._isBigNumber)}}function toHex$1(t){if(typeof t!="string")return toHex$1(t.toString(16));if(t[0]==="-")return t=t.substring(1),t[0]==="-"&&logger$w.throwArgumentError("invalid hex","value",t),t=toHex$1(t),t==="0x00"?t:"-"+t;if(t.substring(0,2)!=="0x"&&(t="0x"+t),t==="0x")return"0x00";for(t.length%2&&(t="0x0"+t.substring(2));t.length>4&&t.substring(0,4)==="0x00";)t="0x"+t.substring(4);return t}function toBigNumber(t){return BigNumber.from(toHex$1(t))}function toBN(t){const e=BigNumber.from(t).toHexString();return e[0]==="-"?new BN$b("-"+e.substring(3),16):new BN$b(e.substring(2),16)}function throwFault$1(t,e,n){const o={fault:t,operation:e};return n!=null&&(o.value=n),logger$w.throwError(t,Logger.errors.NUMERIC_FAULT,o)}function _base36To16(t){return new BN$b(t,36).toString(16)}const logger$v=new Logger(version$p),_constructorGuard$3={},Zero$2=BigNumber.from(0),NegativeOne$2=BigNumber.from(-1);function throwFault(t,e,n,o){const c={fault:e,operation:n};return o!==void 0&&(c.value=o),logger$v.throwError(t,Logger.errors.NUMERIC_FAULT,c)}let zeros="0";for(;zeros.length<256;)zeros+=zeros;function getMultiplier(t){if(typeof t!="number")try{t=BigNumber.from(t).toNumber()}catch{}return typeof t=="number"&&t>=0&&t<=256&&!(t%1)?"1"+zeros.substring(0,t):logger$v.throwArgumentError("invalid decimal size","decimals",t)}function formatFixed(t,e){e==null&&(e=0);const n=getMultiplier(e);t=BigNumber.from(t);const o=t.lt(Zero$2);o&&(t=t.mul(NegativeOne$2));let c=t.mod(n).toString();for(;c.length<n.length-1;)c="0"+c;c=c.match(/^([0-9]*[1-9]|0)(0*)/)[1];const a=t.div(n).toString();return n.length===1?t=a:t=a+"."+c,o&&(t="-"+t),t}function parseFixed(t,e){e==null&&(e=0);const n=getMultiplier(e);(typeof t!="string"||!t.match(/^-?[0-9.]+$/))&&logger$v.throwArgumentError("invalid decimal value","value",t);const o=t.substring(0,1)==="-";o&&(t=t.substring(1)),t==="."&&logger$v.throwArgumentError("missing value","value",t);const c=t.split(".");c.length>2&&logger$v.throwArgumentError("too many decimal points","value",t);let a=c[0],l=c[1];for(a||(a="0"),l||(l="0");l[l.length-1]==="0";)l=l.substring(0,l.length-1);for(l.length>n.length-1&&throwFault("fractional component exceeds decimals","underflow","parseFixed"),l===""&&(l="0");l.length<n.length-1;)l+="0";const b=BigNumber.from(a),v=BigNumber.from(l);let A=b.mul(n).add(v);return o&&(A=A.mul(NegativeOne$2)),A}class FixedFormat{constructor(e,n,o,c){e!==_constructorGuard$3&&logger$v.throwError("cannot use FixedFormat constructor; use FixedFormat.from",Logger.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.signed=n,this.width=o,this.decimals=c,this.name=(n?"":"u")+"fixed"+String(o)+"x"+String(c),this._multiplier=getMultiplier(c),Object.freeze(this)}static from(e){if(e instanceof FixedFormat)return e;typeof e=="number"&&(e=`fixed128x${e}`);let n=!0,o=128,c=18;if(typeof e=="string"){if(e!=="fixed")if(e==="ufixed")n=!1;else{const a=e.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);a||logger$v.throwArgumentError("invalid fixed format","format",e),n=a[1]!=="u",o=parseInt(a[2]),c=parseInt(a[3])}}else if(e){const a=(l,b,v)=>e[l]==null?v:(typeof e[l]!==b&&logger$v.throwArgumentError("invalid fixed format ("+l+" not "+b+")","format."+l,e[l]),e[l]);n=a("signed","boolean",n),o=a("width","number",o),c=a("decimals","number",c)}return o%8&&logger$v.throwArgumentError("invalid fixed format width (not byte aligned)","format.width",o),c>80&&logger$v.throwArgumentError("invalid fixed format (decimals too large)","format.decimals",c),new FixedFormat(_constructorGuard$3,n,o,c)}}class FixedNumber{constructor(e,n,o,c){e!==_constructorGuard$3&&logger$v.throwError("cannot use FixedNumber constructor; use FixedNumber.from",Logger.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.format=c,this._hex=n,this._value=o,this._isFixedNumber=!0,Object.freeze(this)}_checkFormat(e){this.format.name!==e.format.name&&logger$v.throwArgumentError("incompatible format; use fixedNumber.toFormat","other",e)}addUnsafe(e){this._checkFormat(e);const n=parseFixed(this._value,this.format.decimals),o=parseFixed(e._value,e.format.decimals);return FixedNumber.fromValue(n.add(o),this.format.decimals,this.format)}subUnsafe(e){this._checkFormat(e);const n=parseFixed(this._value,this.format.decimals),o=parseFixed(e._value,e.format.decimals);return FixedNumber.fromValue(n.sub(o),this.format.decimals,this.format)}mulUnsafe(e){this._checkFormat(e);const n=parseFixed(this._value,this.format.decimals),o=parseFixed(e._value,e.format.decimals);return FixedNumber.fromValue(n.mul(o).div(this.format._multiplier),this.format.decimals,this.format)}divUnsafe(e){this._checkFormat(e);const n=parseFixed(this._value,this.format.decimals),o=parseFixed(e._value,e.format.decimals);return FixedNumber.fromValue(n.mul(this.format._multiplier).div(o),this.format.decimals,this.format)}floor(){const e=this.toString().split(".");e.length===1&&e.push("0");let n=FixedNumber.from(e[0],this.format);const o=!e[1].match(/^(0*)$/);return this.isNegative()&&o&&(n=n.subUnsafe(ONE$1.toFormat(n.format))),n}ceiling(){const e=this.toString().split(".");e.length===1&&e.push("0");let n=FixedNumber.from(e[0],this.format);const o=!e[1].match(/^(0*)$/);return!this.isNegative()&&o&&(n=n.addUnsafe(ONE$1.toFormat(n.format))),n}round(e){e==null&&(e=0);const n=this.toString().split(".");if(n.length===1&&n.push("0"),(e<0||e>80||e%1)&&logger$v.throwArgumentError("invalid decimal count","decimals",e),n[1].length<=e)return this;const o=FixedNumber.from("1"+zeros.substring(0,e),this.format),c=BUMP.toFormat(this.format);return this.mulUnsafe(o).addUnsafe(c).floor().divUnsafe(o)}isZero(){return this._value==="0.0"||this._value==="0"}isNegative(){return this._value[0]==="-"}toString(){return this._value}toHexString(e){if(e==null)return this._hex;e%8&&logger$v.throwArgumentError("invalid byte width","width",e);const n=BigNumber.from(this._hex).fromTwos(this.format.width).toTwos(e).toHexString();return hexZeroPad(n,e/8)}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return FixedNumber.fromString(this._value,e)}static fromValue(e,n,o){return o==null&&n!=null&&!isBigNumberish(n)&&(o=n,n=null),n==null&&(n=0),o==null&&(o="fixed"),FixedNumber.fromString(formatFixed(e,n),FixedFormat.from(o))}static fromString(e,n){n==null&&(n="fixed");const o=FixedFormat.from(n),c=parseFixed(e,o.decimals);!o.signed&&c.lt(Zero$2)&&throwFault("unsigned value cannot be negative","overflow","value",e);let a=null;o.signed?a=c.toTwos(o.width).toHexString():(a=c.toHexString(),a=hexZeroPad(a,o.width/8));const l=formatFixed(c,o.decimals);return new FixedNumber(_constructorGuard$3,a,l,o)}static fromBytes(e,n){n==null&&(n="fixed");const o=FixedFormat.from(n);if(arrayify(e).length>o.width/8)throw new Error("overflow");let c=BigNumber.from(e);o.signed&&(c=c.fromTwos(o.width));const a=c.toTwos((o.signed?0:1)+o.width).toHexString(),l=formatFixed(c,o.decimals);return new FixedNumber(_constructorGuard$3,a,l,o)}static from(e,n){if(typeof e=="string")return FixedNumber.fromString(e,n);if(isBytes$2(e))return FixedNumber.fromBytes(e,n);try{return FixedNumber.fromValue(e,0,n)}catch(o){if(o.code!==Logger.errors.INVALID_ARGUMENT)throw o}return logger$v.throwArgumentError("invalid FixedNumber value","value",e)}static isFixedNumber(e){return!!(e&&e._isFixedNumber)}}const ONE$1=FixedNumber.from(1),BUMP=FixedNumber.from("0.5"),version$o="properties/5.7.0";var __awaiter$a=function(t,e,n,o){function c(a){return a instanceof n?a:new n(function(l){l(a)})}return new(n||(n=Promise))(function(a,l){function b(S){try{A(o.next(S))}catch(M){l(M)}}function v(S){try{A(o.throw(S))}catch(M){l(M)}}function A(S){S.done?a(S.value):c(S.value).then(b,v)}A((o=o.apply(t,e||[])).next())})};const logger$u=new Logger(version$o);function defineReadOnly(t,e,n){Object.defineProperty(t,e,{enumerable:!0,value:n,writable:!1})}function getStatic(t,e){for(let n=0;n<32;n++){if(t[e])return t[e];if(!t.prototype||typeof t.prototype!="object")break;t=Object.getPrototypeOf(t.prototype).constructor}return null}function resolveProperties(t){return __awaiter$a(this,void 0,void 0,function*(){const e=Object.keys(t).map(o=>{const c=t[o];return Promise.resolve(c).then(a=>({key:o,value:a}))});return(yield Promise.all(e)).reduce((o,c)=>(o[c.key]=c.value,o),{})})}function checkProperties(t,e){(!t||typeof t!="object")&&logger$u.throwArgumentError("invalid object","object",t),Object.keys(t).forEach(n=>{e[n]||logger$u.throwArgumentError("invalid object key - "+n,"transaction:"+n,t)})}function shallowCopy(t){const e={};for(const n in t)e[n]=t[n];return e}const opaque={bigint:!0,boolean:!0,function:!0,number:!0,string:!0};function _isFrozen(t){if(t==null||opaque[typeof t])return!0;if(Array.isArray(t)||typeof t=="object"){if(!Object.isFrozen(t))return!1;const e=Object.keys(t);for(let n=0;n<e.length;n++){let o=null;try{o=t[e[n]]}catch{continue}if(!_isFrozen(o))return!1}return!0}return logger$u.throwArgumentError(`Cannot deepCopy ${typeof t}`,"object",t)}function _deepCopy(t){if(_isFrozen(t))return t;if(Array.isArray(t))return Object.freeze(t.map(e=>deepCopy(e)));if(typeof t=="object"){const e={};for(const n in t){const o=t[n];o!==void 0&&defineReadOnly(e,n,deepCopy(o))}return e}return logger$u.throwArgumentError(`Cannot deepCopy ${typeof t}`,"object",t)}function deepCopy(t){return _deepCopy(t)}class Description{constructor(e){for(const n in e)this[n]=deepCopy(e[n])}}const version$n="abi/5.7.0",logger$t=new Logger(version$n),_constructorGuard$2={};let ModifiersBytes={calldata:!0,memory:!0,storage:!0},ModifiersNest={calldata:!0,memory:!0};function checkModifier(t,e){if(t==="bytes"||t==="string"){if(ModifiersBytes[e])return!0}else if(t==="address"){if(e==="payable")return!0}else if((t.indexOf("[")>=0||t==="tuple")&&ModifiersNest[e])return!0;return(ModifiersBytes[e]||e==="payable")&&logger$t.throwArgumentError("invalid modifier","name",e),!1}function parseParamType(t,e){let n=t;function o(b){logger$t.throwArgumentError(`unexpected character at position ${b}`,"param",t)}t=t.replace(/\s/g," ");function c(b){let v={type:"",name:"",parent:b,state:{allowType:!0}};return e&&(v.indexed=!1),v}let a={type:"",name:"",state:{allowType:!0}},l=a;for(let b=0;b<t.length;b++){let v=t[b];switch(v){case"(":l.state.allowType&&l.type===""?l.type="tuple":l.state.allowParams||o(b),l.state.allowType=!1,l.type=verifyType(l.type),l.components=[c(l)],l=l.components[0];break;case")":delete l.state,l.name==="indexed"&&(e||o(b),l.indexed=!0,l.name=""),checkModifier(l.type,l.name)&&(l.name=""),l.type=verifyType(l.type);let A=l;l=l.parent,l||o(b),delete A.parent,l.state.allowParams=!1,l.state.allowName=!0,l.state.allowArray=!0;break;case",":delete l.state,l.name==="indexed"&&(e||o(b),l.indexed=!0,l.name=""),checkModifier(l.type,l.name)&&(l.name=""),l.type=verifyType(l.type);let S=c(l.parent);l.parent.components.push(S),delete l.parent,l=S;break;case" ":l.state.allowType&&l.type!==""&&(l.type=verifyType(l.type),delete l.state.allowType,l.state.allowName=!0,l.state.allowParams=!0),l.state.allowName&&l.name!==""&&(l.name==="indexed"?(e||o(b),l.indexed&&o(b),l.indexed=!0,l.name=""):checkModifier(l.type,l.name)?l.name="":l.state.allowName=!1);break;case"[":l.state.allowArray||o(b),l.type+=v,l.state.allowArray=!1,l.state.allowName=!1,l.state.readArray=!0;break;case"]":l.state.readArray||o(b),l.type+=v,l.state.readArray=!1,l.state.allowArray=!0,l.state.allowName=!0;break;default:l.state.allowType?(l.type+=v,l.state.allowParams=!0,l.state.allowArray=!0):l.state.allowName?(l.name+=v,delete l.state.allowArray):l.state.readArray?l.type+=v:o(b)}}return l.parent&&logger$t.throwArgumentError("unexpected eof","param",t),delete a.state,l.name==="indexed"?(e||o(n.length-7),l.indexed&&o(n.length-7),l.indexed=!0,l.name=""):checkModifier(l.type,l.name)&&(l.name=""),a.type=verifyType(a.type),a}function populate(t,e){for(let n in e)defineReadOnly(t,n,e[n])}const FormatTypes=Object.freeze({sighash:"sighash",minimal:"minimal",full:"full",json:"json"}),paramTypeArray=new RegExp(/^(.*)\[([0-9]*)\]$/);class ParamType{constructor(e,n){e!==_constructorGuard$2&&logger$t.throwError("use fromString",Logger.errors.UNSUPPORTED_OPERATION,{operation:"new ParamType()"}),populate(this,n);let o=this.type.match(paramTypeArray);o?populate(this,{arrayLength:parseInt(o[2]||"-1"),arrayChildren:ParamType.fromObject({type:o[1],components:this.components}),baseType:"array"}):populate(this,{arrayLength:null,arrayChildren:null,baseType:this.components!=null?"tuple":this.type}),this._isParamType=!0,Object.freeze(this)}format(e){if(e||(e=FormatTypes.sighash),FormatTypes[e]||logger$t.throwArgumentError("invalid format type","format",e),e===FormatTypes.json){let o={type:this.baseType==="tuple"?"tuple":this.type,name:this.name||void 0};return typeof this.indexed=="boolean"&&(o.indexed=this.indexed),this.components&&(o.components=this.components.map(c=>JSON.parse(c.format(e)))),JSON.stringify(o)}let n="";return this.baseType==="array"?(n+=this.arrayChildren.format(e),n+="["+(this.arrayLength<0?"":String(this.arrayLength))+"]"):this.baseType==="tuple"?(e!==FormatTypes.sighash&&(n+=this.type),n+="("+this.components.map(o=>o.format(e)).join(e===FormatTypes.full?", ":",")+")"):n+=this.type,e!==FormatTypes.sighash&&(this.indexed===!0&&(n+=" indexed"),e===FormatTypes.full&&this.name&&(n+=" "+this.name)),n}static from(e,n){return typeof e=="string"?ParamType.fromString(e,n):ParamType.fromObject(e)}static fromObject(e){return ParamType.isParamType(e)?e:new ParamType(_constructorGuard$2,{name:e.name||null,type:verifyType(e.type),indexed:e.indexed==null?null:!!e.indexed,components:e.components?e.components.map(ParamType.fromObject):null})}static fromString(e,n){function o(c){return ParamType.fromObject({name:c.name,type:c.type,indexed:c.indexed,components:c.components})}return o(parseParamType(e,!!n))}static isParamType(e){return!!(e!=null&&e._isParamType)}}function parseParams(t,e){return splitNesting(t).map(n=>ParamType.fromString(n,e))}class Fragment{constructor(e,n){e!==_constructorGuard$2&&logger$t.throwError("use a static from method",Logger.errors.UNSUPPORTED_OPERATION,{operation:"new Fragment()"}),populate(this,n),this._isFragment=!0,Object.freeze(this)}static from(e){return Fragment.isFragment(e)?e:typeof e=="string"?Fragment.fromString(e):Fragment.fromObject(e)}static fromObject(e){if(Fragment.isFragment(e))return e;switch(e.type){case"function":return FunctionFragment.fromObject(e);case"event":return EventFragment.fromObject(e);case"constructor":return ConstructorFragment.fromObject(e);case"error":return ErrorFragment.fromObject(e);case"fallback":case"receive":return null}return logger$t.throwArgumentError("invalid fragment object","value",e)}static fromString(e){return e=e.replace(/\s/g," "),e=e.replace(/\(/g," (").replace(/\)/g,") ").replace(/\s+/g," "),e=e.trim(),e.split(" ")[0]==="event"?EventFragment.fromString(e.substring(5).trim()):e.split(" ")[0]==="function"?FunctionFragment.fromString(e.substring(8).trim()):e.split("(")[0].trim()==="constructor"?ConstructorFragment.fromString(e.trim()):e.split(" ")[0]==="error"?ErrorFragment.fromString(e.substring(5).trim()):logger$t.throwArgumentError("unsupported fragment","value",e)}static isFragment(e){return!!(e&&e._isFragment)}}class EventFragment extends Fragment{format(e){if(e||(e=FormatTypes.sighash),FormatTypes[e]||logger$t.throwArgumentError("invalid format type","format",e),e===FormatTypes.json)return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(o=>JSON.parse(o.format(e)))});let n="";return e!==FormatTypes.sighash&&(n+="event "),n+=this.name+"("+this.inputs.map(o=>o.format(e)).join(e===FormatTypes.full?", ":",")+") ",e!==FormatTypes.sighash&&this.anonymous&&(n+="anonymous "),n.trim()}static from(e){return typeof e=="string"?EventFragment.fromString(e):EventFragment.fromObject(e)}static fromObject(e){if(EventFragment.isEventFragment(e))return e;e.type!=="event"&&logger$t.throwArgumentError("invalid event object","value",e);const n={name:verifyIdentifier(e.name),anonymous:e.anonymous,inputs:e.inputs?e.inputs.map(ParamType.fromObject):[],type:"event"};return new EventFragment(_constructorGuard$2,n)}static fromString(e){let n=e.match(regexParen);n||logger$t.throwArgumentError("invalid event string","value",e);let o=!1;return n[3].split(" ").forEach(c=>{switch(c.trim()){case"anonymous":o=!0;break;case"":break;default:logger$t.warn("unknown modifier: "+c)}}),EventFragment.fromObject({name:n[1].trim(),anonymous:o,inputs:parseParams(n[2],!0),type:"event"})}static isEventFragment(e){return e&&e._isFragment&&e.type==="event"}}function parseGas(t,e){e.gas=null;let n=t.split("@");return n.length!==1?(n.length>2&&logger$t.throwArgumentError("invalid human-readable ABI signature","value",t),n[1].match(/^[0-9]+$/)||logger$t.throwArgumentError("invalid human-readable ABI signature gas","value",t),e.gas=BigNumber.from(n[1]),n[0]):t}function parseModifiers(t,e){e.constant=!1,e.payable=!1,e.stateMutability="nonpayable",t.split(" ").forEach(n=>{switch(n.trim()){case"constant":e.constant=!0;break;case"payable":e.payable=!0,e.stateMutability="payable";break;case"nonpayable":e.payable=!1,e.stateMutability="nonpayable";break;case"pure":e.constant=!0,e.stateMutability="pure";break;case"view":e.constant=!0,e.stateMutability="view";break;case"external":case"public":case"":break;default:console.log("unknown modifier: "+n)}})}function verifyState(t){let e={constant:!1,payable:!0,stateMutability:"payable"};return t.stateMutability!=null?(e.stateMutability=t.stateMutability,e.constant=e.stateMutability==="view"||e.stateMutability==="pure",t.constant!=null&&!!t.constant!==e.constant&&logger$t.throwArgumentError("cannot have constant function with mutability "+e.stateMutability,"value",t),e.payable=e.stateMutability==="payable",t.payable!=null&&!!t.payable!==e.payable&&logger$t.throwArgumentError("cannot have payable function with mutability "+e.stateMutability,"value",t)):t.payable!=null?(e.payable=!!t.payable,t.constant==null&&!e.payable&&t.type!=="constructor"&&logger$t.throwArgumentError("unable to determine stateMutability","value",t),e.constant=!!t.constant,e.constant?e.stateMutability="view":e.stateMutability=e.payable?"payable":"nonpayable",e.payable&&e.constant&&logger$t.throwArgumentError("cannot have constant payable function","value",t)):t.constant!=null?(e.constant=!!t.constant,e.payable=!e.constant,e.stateMutability=e.constant?"view":"payable"):t.type!=="constructor"&&logger$t.throwArgumentError("unable to determine stateMutability","value",t),e}class ConstructorFragment extends Fragment{format(e){if(e||(e=FormatTypes.sighash),FormatTypes[e]||logger$t.throwArgumentError("invalid format type","format",e),e===FormatTypes.json)return JSON.stringify({type:"constructor",stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map(o=>JSON.parse(o.format(e)))});e===FormatTypes.sighash&&logger$t.throwError("cannot format a constructor for sighash",Logger.errors.UNSUPPORTED_OPERATION,{operation:"format(sighash)"});let n="constructor("+this.inputs.map(o=>o.format(e)).join(e===FormatTypes.full?", ":",")+") ";return this.stateMutability&&this.stateMutability!=="nonpayable"&&(n+=this.stateMutability+" "),n.trim()}static from(e){return typeof e=="string"?ConstructorFragment.fromString(e):ConstructorFragment.fromObject(e)}static fromObject(e){if(ConstructorFragment.isConstructorFragment(e))return e;e.type!=="constructor"&&logger$t.throwArgumentError("invalid constructor object","value",e);let n=verifyState(e);n.constant&&logger$t.throwArgumentError("constructor cannot be constant","value",e);const o={name:null,type:e.type,inputs:e.inputs?e.inputs.map(ParamType.fromObject):[],payable:n.payable,stateMutability:n.stateMutability,gas:e.gas?BigNumber.from(e.gas):null};return new ConstructorFragment(_constructorGuard$2,o)}static fromString(e){let n={type:"constructor"};e=parseGas(e,n);let o=e.match(regexParen);return(!o||o[1].trim()!=="constructor")&&logger$t.throwArgumentError("invalid constructor string","value",e),n.inputs=parseParams(o[2].trim(),!1),parseModifiers(o[3].trim(),n),ConstructorFragment.fromObject(n)}static isConstructorFragment(e){return e&&e._isFragment&&e.type==="constructor"}}class FunctionFragment extends ConstructorFragment{format(e){if(e||(e=FormatTypes.sighash),FormatTypes[e]||logger$t.throwArgumentError("invalid format type","format",e),e===FormatTypes.json)return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map(o=>JSON.parse(o.format(e))),outputs:this.outputs.map(o=>JSON.parse(o.format(e)))});let n="";return e!==FormatTypes.sighash&&(n+="function "),n+=this.name+"("+this.inputs.map(o=>o.format(e)).join(e===FormatTypes.full?", ":",")+") ",e!==FormatTypes.sighash&&(this.stateMutability?this.stateMutability!=="nonpayable"&&(n+=this.stateMutability+" "):this.constant&&(n+="view "),this.outputs&&this.outputs.length&&(n+="returns ("+this.outputs.map(o=>o.format(e)).join(", ")+") "),this.gas!=null&&(n+="@"+this.gas.toString()+" ")),n.trim()}static from(e){return typeof e=="string"?FunctionFragment.fromString(e):FunctionFragment.fromObject(e)}static fromObject(e){if(FunctionFragment.isFunctionFragment(e))return e;e.type!=="function"&&logger$t.throwArgumentError("invalid function object","value",e);let n=verifyState(e);const o={type:e.type,name:verifyIdentifier(e.name),constant:n.constant,inputs:e.inputs?e.inputs.map(ParamType.fromObject):[],outputs:e.outputs?e.outputs.map(ParamType.fromObject):[],payable:n.payable,stateMutability:n.stateMutability,gas:e.gas?BigNumber.from(e.gas):null};return new FunctionFragment(_constructorGuard$2,o)}static fromString(e){let n={type:"function"};e=parseGas(e,n);let o=e.split(" returns ");o.length>2&&logger$t.throwArgumentError("invalid function string","value",e);let c=o[0].match(regexParen);if(c||logger$t.throwArgumentError("invalid function signature","value",e),n.name=c[1].trim(),n.name&&verifyIdentifier(n.name),n.inputs=parseParams(c[2],!1),parseModifiers(c[3].trim(),n),o.length>1){let a=o[1].match(regexParen);(a[1].trim()!=""||a[3].trim()!="")&&logger$t.throwArgumentError("unexpected tokens","value",e),n.outputs=parseParams(a[2],!1)}else n.outputs=[];return FunctionFragment.fromObject(n)}static isFunctionFragment(e){return e&&e._isFragment&&e.type==="function"}}function checkForbidden(t){const e=t.format();return(e==="Error(string)"||e==="Panic(uint256)")&&logger$t.throwArgumentError(`cannot specify user defined ${e} error`,"fragment",t),t}class ErrorFragment extends Fragment{format(e){if(e||(e=FormatTypes.sighash),FormatTypes[e]||logger$t.throwArgumentError("invalid format type","format",e),e===FormatTypes.json)return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(o=>JSON.parse(o.format(e)))});let n="";return e!==FormatTypes.sighash&&(n+="error "),n+=this.name+"("+this.inputs.map(o=>o.format(e)).join(e===FormatTypes.full?", ":",")+") ",n.trim()}static from(e){return typeof e=="string"?ErrorFragment.fromString(e):ErrorFragment.fromObject(e)}static fromObject(e){if(ErrorFragment.isErrorFragment(e))return e;e.type!=="error"&&logger$t.throwArgumentError("invalid error object","value",e);const n={type:e.type,name:verifyIdentifier(e.name),inputs:e.inputs?e.inputs.map(ParamType.fromObject):[]};return checkForbidden(new ErrorFragment(_constructorGuard$2,n))}static fromString(e){let n={type:"error"},o=e.match(regexParen);return o||logger$t.throwArgumentError("invalid error signature","value",e),n.name=o[1].trim(),n.name&&verifyIdentifier(n.name),n.inputs=parseParams(o[2],!1),checkForbidden(ErrorFragment.fromObject(n))}static isErrorFragment(e){return e&&e._isFragment&&e.type==="error"}}function verifyType(t){return t.match(/^uint($|[^1-9])/)?t="uint256"+t.substring(4):t.match(/^int($|[^1-9])/)&&(t="int256"+t.substring(3)),t}const regexIdentifier=new RegExp("^[a-zA-Z$_][a-zA-Z0-9$_]*$");function verifyIdentifier(t){return(!t||!t.match(regexIdentifier))&&logger$t.throwArgumentError(`invalid identifier "${t}"`,"value",t),t}const regexParen=new RegExp("^([^)(]*)\\((.*)\\)([^)(]*)$");function splitNesting(t){t=t.trim();let e=[],n="",o=0;for(let c=0;c<t.length;c++){let a=t[c];a===","&&o===0?(e.push(n),n=""):(n+=a,a==="("?o++:a===")"&&(o--,o===-1&&logger$t.throwArgumentError("unbalanced parenthesis","value",t)))}return n&&e.push(n),e}const logger$s=new Logger(version$n);function checkResultErrors(t){const e=[],n=function(o,c){if(Array.isArray(c))for(let a in c){const l=o.slice();l.push(a);try{n(l,c[a])}catch(b){e.push({path:l,error:b})}}};return n([],t),e}class Coder{constructor(e,n,o,c){this.name=e,this.type=n,this.localName=o,this.dynamic=c}_throwError(e,n){logger$s.throwArgumentError(e,this.localName,n)}}class Writer{constructor(e){defineReadOnly(this,"wordSize",e||32),this._data=[],this._dataLength=0,this._padding=new Uint8Array(e)}get data(){return hexConcat(this._data)}get length(){return this._dataLength}_writeData(e){return this._data.push(e),this._dataLength+=e.length,e.length}appendWriter(e){return this._writeData(concat(e._data))}writeBytes(e){let n=arrayify(e);const o=n.length%this.wordSize;return o&&(n=concat([n,this._padding.slice(o)])),this._writeData(n)}_getValue(e){let n=arrayify(BigNumber.from(e));return n.length>this.wordSize&&logger$s.throwError("value out-of-bounds",Logger.errors.BUFFER_OVERRUN,{length:this.wordSize,offset:n.length}),n.length%this.wordSize&&(n=concat([this._padding.slice(n.length%this.wordSize),n])),n}writeValue(e){return this._writeData(this._getValue(e))}writeUpdatableValue(){const e=this._data.length;return this._data.push(this._padding),this._dataLength+=this.wordSize,n=>{this._data[e]=this._getValue(n)}}}class Reader{constructor(e,n,o,c){defineReadOnly(this,"_data",arrayify(e)),defineReadOnly(this,"wordSize",n||32),defineReadOnly(this,"_coerceFunc",o),defineReadOnly(this,"allowLoose",c),this._offset=0}get data(){return hexlify(this._data)}get consumed(){return this._offset}static coerce(e,n){let o=e.match("^u?int([0-9]+)$");return o&&parseInt(o[1])<=48&&(n=n.toNumber()),n}coerce(e,n){return this._coerceFunc?this._coerceFunc(e,n):Reader.coerce(e,n)}_peekBytes(e,n,o){let c=Math.ceil(n/this.wordSize)*this.wordSize;return this._offset+c>this._data.length&&(this.allowLoose&&o&&this._offset+n<=this._data.length?c=n:logger$s.throwError("data out-of-bounds",Logger.errors.BUFFER_OVERRUN,{length:this._data.length,offset:this._offset+c})),this._data.slice(this._offset,this._offset+c)}subReader(e){return new Reader(this._data.slice(this._offset+e),this.wordSize,this._coerceFunc,this.allowLoose)}readBytes(e,n){let o=this._peekBytes(0,e,!!n);return this._offset+=o.length,o.slice(0,e)}readValue(){return BigNumber.from(this.readBytes(this.wordSize))}}var sha3$1={exports:{}};(function(t){(function(){var e="input is invalid type",n="finalize already called",o=typeof window=="object",c=o?window:{};c.JS_SHA3_NO_WINDOW&&(o=!1);var a=!o&&typeof self=="object",l=!c.JS_SHA3_NO_NODE_JS&&typeof process$1=="object"&&process$1.versions&&process$1.versions.node;l?c=commonjsGlobal:a&&(c=self);var b=!c.JS_SHA3_NO_COMMON_JS&&!0&&t.exports,v=!c.JS_SHA3_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",A="0123456789abcdef".split(""),S=[31,7936,2031616,520093696],M=[4,1024,262144,67108864],B=[1,256,65536,16777216],P=[6,1536,393216,100663296],L=[0,8,16,24],F=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],U=[224,256,384,512],q=[128,256],X=["hex","buffer","arrayBuffer","array","digest"],ee={128:168,256:136};(c.JS_SHA3_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(O){return Object.prototype.toString.call(O)==="[object Array]"}),v&&(c.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(O){return typeof O=="object"&&O.buffer&&O.buffer.constructor===ArrayBuffer});for(var te=function(O,j,D){return function(Q){return new I(O,j,O).update(Q)[D]()}},ce=function(O,j,D){return function(Q,oe){return new I(O,j,oe).update(Q)[D]()}},ue=function(O,j,D){return function(Q,oe,de,Z){return m["cshake"+O].update(Q,oe,de,Z)[D]()}},Ae=function(O,j,D){return function(Q,oe,de,Z){return m["kmac"+O].update(Q,oe,de,Z)[D]()}},we=function(O,j,D,Q){for(var oe=0;oe<X.length;++oe){var de=X[oe];O[de]=j(D,Q,de)}return O},pe=function(O,j){var D=te(O,j,"hex");return D.create=function(){return new I(O,j,O)},D.update=function(Q){return D.create().update(Q)},we(D,te,O,j)},Ce=function(O,j){var D=ce(O,j,"hex");return D.create=function(Q){return new I(O,j,Q)},D.update=function(Q,oe){return D.create(oe).update(Q)},we(D,ce,O,j)},T=function(O,j){var D=ee[O],Q=ue(O,j,"hex");return Q.create=function(oe,de,Z){return!de&&!Z?m["shake"+O].create(oe):new I(O,j,oe).bytepad([de,Z],D)},Q.update=function(oe,de,Z,H){return Q.create(de,Z,H).update(oe)},we(Q,ue,O,j)},u=function(O,j){var D=ee[O],Q=Ae(O,j,"hex");return Q.create=function(oe,de,Z){return new C(O,j,de).bytepad(["KMAC",Z],D).bytepad([oe],D)},Q.update=function(oe,de,Z,H){return Q.create(oe,Z,H).update(de)},we(Q,Ae,O,j)},p=[{name:"keccak",padding:B,bits:U,createMethod:pe},{name:"sha3",padding:P,bits:U,createMethod:pe},{name:"shake",padding:S,bits:q,createMethod:Ce},{name:"cshake",padding:M,bits:q,createMethod:T},{name:"kmac",padding:M,bits:q,createMethod:u}],m={},y=[],E=0;E<p.length;++E)for(var $=p[E],k=$.bits,_=0;_<k.length;++_){var d=$.name+"_"+k[_];if(y.push(d),m[d]=$.createMethod(k[_],$.padding),$.name!=="sha3"){var w=$.name+k[_];y.push(w),m[w]=m[d]}}function I(O,j,D){this.blocks=[],this.s=[],this.padding=j,this.outputBits=D,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(O<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=D>>5,this.extraBytes=(D&31)>>3;for(var Q=0;Q<50;++Q)this.s[Q]=0}I.prototype.update=function(O){if(this.finalized)throw new Error(n);var j,D=typeof O;if(D!=="string"){if(D==="object"){if(O===null)throw new Error(e);if(v&&O.constructor===ArrayBuffer)O=new Uint8Array(O);else if(!Array.isArray(O)&&(!v||!ArrayBuffer.isView(O)))throw new Error(e)}else throw new Error(e);j=!0}for(var Q=this.blocks,oe=this.byteCount,de=O.length,Z=this.blockCount,H=0,ge=this.s,Me,ke;H<de;){if(this.reset)for(this.reset=!1,Q[0]=this.block,Me=1;Me<Z+1;++Me)Q[Me]=0;if(j)for(Me=this.start;H<de&&Me<oe;++H)Q[Me>>2]|=O[H]<<L[Me++&3];else for(Me=this.start;H<de&&Me<oe;++H)ke=O.charCodeAt(H),ke<128?Q[Me>>2]|=ke<<L[Me++&3]:ke<2048?(Q[Me>>2]|=(192|ke>>6)<<L[Me++&3],Q[Me>>2]|=(128|ke&63)<<L[Me++&3]):ke<55296||ke>=57344?(Q[Me>>2]|=(224|ke>>12)<<L[Me++&3],Q[Me>>2]|=(128|ke>>6&63)<<L[Me++&3],Q[Me>>2]|=(128|ke&63)<<L[Me++&3]):(ke=65536+((ke&1023)<<10|O.charCodeAt(++H)&1023),Q[Me>>2]|=(240|ke>>18)<<L[Me++&3],Q[Me>>2]|=(128|ke>>12&63)<<L[Me++&3],Q[Me>>2]|=(128|ke>>6&63)<<L[Me++&3],Q[Me>>2]|=(128|ke&63)<<L[Me++&3]);if(this.lastByteIndex=Me,Me>=oe){for(this.start=Me-oe,this.block=Q[Z],Me=0;Me<Z;++Me)ge[Me]^=Q[Me];V(ge),this.reset=!0}else this.start=Me}return this},I.prototype.encode=function(O,j){var D=O&255,Q=1,oe=[D];for(O=O>>8,D=O&255;D>0;)oe.unshift(D),O=O>>8,D=O&255,++Q;return j?oe.push(Q):oe.unshift(Q),this.update(oe),oe.length},I.prototype.encodeString=function(O){var j,D=typeof O;if(D!=="string"){if(D==="object"){if(O===null)throw new Error(e);if(v&&O.constructor===ArrayBuffer)O=new Uint8Array(O);else if(!Array.isArray(O)&&(!v||!ArrayBuffer.isView(O)))throw new Error(e)}else throw new Error(e);j=!0}var Q=0,oe=O.length;if(j)Q=oe;else for(var de=0;de<O.length;++de){var Z=O.charCodeAt(de);Z<128?Q+=1:Z<2048?Q+=2:Z<55296||Z>=57344?Q+=3:(Z=65536+((Z&1023)<<10|O.charCodeAt(++de)&1023),Q+=4)}return Q+=this.encode(Q*8),this.update(O),Q},I.prototype.bytepad=function(O,j){for(var D=this.encode(j),Q=0;Q<O.length;++Q)D+=this.encodeString(O[Q]);var oe=j-D%j,de=[];return de.length=oe,this.update(de),this},I.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var O=this.blocks,j=this.lastByteIndex,D=this.blockCount,Q=this.s;if(O[j>>2]|=this.padding[j&3],this.lastByteIndex===this.byteCount)for(O[0]=O[D],j=1;j<D+1;++j)O[j]=0;for(O[D-1]|=2147483648,j=0;j<D;++j)Q[j]^=O[j];V(Q)}},I.prototype.toString=I.prototype.hex=function(){this.finalize();for(var O=this.blockCount,j=this.s,D=this.outputBlocks,Q=this.extraBytes,oe=0,de=0,Z="",H;de<D;){for(oe=0;oe<O&&de<D;++oe,++de)H=j[oe],Z+=A[H>>4&15]+A[H&15]+A[H>>12&15]+A[H>>8&15]+A[H>>20&15]+A[H>>16&15]+A[H>>28&15]+A[H>>24&15];de%O===0&&(V(j),oe=0)}return Q&&(H=j[oe],Z+=A[H>>4&15]+A[H&15],Q>1&&(Z+=A[H>>12&15]+A[H>>8&15]),Q>2&&(Z+=A[H>>20&15]+A[H>>16&15])),Z},I.prototype.arrayBuffer=function(){this.finalize();var O=this.blockCount,j=this.s,D=this.outputBlocks,Q=this.extraBytes,oe=0,de=0,Z=this.outputBits>>3,H;Q?H=new ArrayBuffer(D+1<<2):H=new ArrayBuffer(Z);for(var ge=new Uint32Array(H);de<D;){for(oe=0;oe<O&&de<D;++oe,++de)ge[de]=j[oe];de%O===0&&V(j)}return Q&&(ge[oe]=j[oe],H=H.slice(0,Z)),H},I.prototype.buffer=I.prototype.arrayBuffer,I.prototype.digest=I.prototype.array=function(){this.finalize();for(var O=this.blockCount,j=this.s,D=this.outputBlocks,Q=this.extraBytes,oe=0,de=0,Z=[],H,ge;de<D;){for(oe=0;oe<O&&de<D;++oe,++de)H=de<<2,ge=j[oe],Z[H]=ge&255,Z[H+1]=ge>>8&255,Z[H+2]=ge>>16&255,Z[H+3]=ge>>24&255;de%O===0&&V(j)}return Q&&(H=de<<2,ge=j[oe],Z[H]=ge&255,Q>1&&(Z[H+1]=ge>>8&255),Q>2&&(Z[H+2]=ge>>16&255)),Z};function C(O,j,D){I.call(this,O,j,D)}C.prototype=new I,C.prototype.finalize=function(){return this.encode(this.outputBits,!0),I.prototype.finalize.call(this)};var V=function(O){var j,D,Q,oe,de,Z,H,ge,Me,ke,Ie,et,Fe,$e,$t,He,Ye,St,De,qe,At,ze,Ge,kt,se,J,re,he,ye,Oe,Ee,Ue,bt,Le,Ve,mt,Ke,Xe,Mt,me,le,_e,be,Se,Je,Te,Ne,ne,ie,ae,Y,fe,ve,Pe,xe,Be,Qe,Ze,xt,it,dt,gt,yt;for(Q=0;Q<48;Q+=2)oe=O[0]^O[10]^O[20]^O[30]^O[40],de=O[1]^O[11]^O[21]^O[31]^O[41],Z=O[2]^O[12]^O[22]^O[32]^O[42],H=O[3]^O[13]^O[23]^O[33]^O[43],ge=O[4]^O[14]^O[24]^O[34]^O[44],Me=O[5]^O[15]^O[25]^O[35]^O[45],ke=O[6]^O[16]^O[26]^O[36]^O[46],Ie=O[7]^O[17]^O[27]^O[37]^O[47],et=O[8]^O[18]^O[28]^O[38]^O[48],Fe=O[9]^O[19]^O[29]^O[39]^O[49],j=et^(Z<<1|H>>>31),D=Fe^(H<<1|Z>>>31),O[0]^=j,O[1]^=D,O[10]^=j,O[11]^=D,O[20]^=j,O[21]^=D,O[30]^=j,O[31]^=D,O[40]^=j,O[41]^=D,j=oe^(ge<<1|Me>>>31),D=de^(Me<<1|ge>>>31),O[2]^=j,O[3]^=D,O[12]^=j,O[13]^=D,O[22]^=j,O[23]^=D,O[32]^=j,O[33]^=D,O[42]^=j,O[43]^=D,j=Z^(ke<<1|Ie>>>31),D=H^(Ie<<1|ke>>>31),O[4]^=j,O[5]^=D,O[14]^=j,O[15]^=D,O[24]^=j,O[25]^=D,O[34]^=j,O[35]^=D,O[44]^=j,O[45]^=D,j=ge^(et<<1|Fe>>>31),D=Me^(Fe<<1|et>>>31),O[6]^=j,O[7]^=D,O[16]^=j,O[17]^=D,O[26]^=j,O[27]^=D,O[36]^=j,O[37]^=D,O[46]^=j,O[47]^=D,j=ke^(oe<<1|de>>>31),D=Ie^(de<<1|oe>>>31),O[8]^=j,O[9]^=D,O[18]^=j,O[19]^=D,O[28]^=j,O[29]^=D,O[38]^=j,O[39]^=D,O[48]^=j,O[49]^=D,$e=O[0],$t=O[1],Te=O[11]<<4|O[10]>>>28,Ne=O[10]<<4|O[11]>>>28,he=O[20]<<3|O[21]>>>29,ye=O[21]<<3|O[20]>>>29,it=O[31]<<9|O[30]>>>23,dt=O[30]<<9|O[31]>>>23,_e=O[40]<<18|O[41]>>>14,be=O[41]<<18|O[40]>>>14,Le=O[2]<<1|O[3]>>>31,Ve=O[3]<<1|O[2]>>>31,He=O[13]<<12|O[12]>>>20,Ye=O[12]<<12|O[13]>>>20,ne=O[22]<<10|O[23]>>>22,ie=O[23]<<10|O[22]>>>22,Oe=O[33]<<13|O[32]>>>19,Ee=O[32]<<13|O[33]>>>19,gt=O[42]<<2|O[43]>>>30,yt=O[43]<<2|O[42]>>>30,Pe=O[5]<<30|O[4]>>>2,xe=O[4]<<30|O[5]>>>2,mt=O[14]<<6|O[15]>>>26,Ke=O[15]<<6|O[14]>>>26,St=O[25]<<11|O[24]>>>21,De=O[24]<<11|O[25]>>>21,ae=O[34]<<15|O[35]>>>17,Y=O[35]<<15|O[34]>>>17,Ue=O[45]<<29|O[44]>>>3,bt=O[44]<<29|O[45]>>>3,kt=O[6]<<28|O[7]>>>4,se=O[7]<<28|O[6]>>>4,Be=O[17]<<23|O[16]>>>9,Qe=O[16]<<23|O[17]>>>9,Xe=O[26]<<25|O[27]>>>7,Mt=O[27]<<25|O[26]>>>7,qe=O[36]<<21|O[37]>>>11,At=O[37]<<21|O[36]>>>11,fe=O[47]<<24|O[46]>>>8,ve=O[46]<<24|O[47]>>>8,Se=O[8]<<27|O[9]>>>5,Je=O[9]<<27|O[8]>>>5,J=O[18]<<20|O[19]>>>12,re=O[19]<<20|O[18]>>>12,Ze=O[29]<<7|O[28]>>>25,xt=O[28]<<7|O[29]>>>25,me=O[38]<<8|O[39]>>>24,le=O[39]<<8|O[38]>>>24,ze=O[48]<<14|O[49]>>>18,Ge=O[49]<<14|O[48]>>>18,O[0]=$e^~He&St,O[1]=$t^~Ye&De,O[10]=kt^~J&he,O[11]=se^~re&ye,O[20]=Le^~mt&Xe,O[21]=Ve^~Ke&Mt,O[30]=Se^~Te&ne,O[31]=Je^~Ne&ie,O[40]=Pe^~Be&Ze,O[41]=xe^~Qe&xt,O[2]=He^~St&qe,O[3]=Ye^~De&At,O[12]=J^~he&Oe,O[13]=re^~ye&Ee,O[22]=mt^~Xe&me,O[23]=Ke^~Mt&le,O[32]=Te^~ne&ae,O[33]=Ne^~ie&Y,O[42]=Be^~Ze&it,O[43]=Qe^~xt&dt,O[4]=St^~qe&ze,O[5]=De^~At&Ge,O[14]=he^~Oe&Ue,O[15]=ye^~Ee&bt,O[24]=Xe^~me&_e,O[25]=Mt^~le&be,O[34]=ne^~ae&fe,O[35]=ie^~Y&ve,O[44]=Ze^~it&gt,O[45]=xt^~dt&yt,O[6]=qe^~ze&$e,O[7]=At^~Ge&$t,O[16]=Oe^~Ue&kt,O[17]=Ee^~bt&se,O[26]=me^~_e&Le,O[27]=le^~be&Ve,O[36]=ae^~fe&Se,O[37]=Y^~ve&Je,O[46]=it^~gt&Pe,O[47]=dt^~yt&xe,O[8]=ze^~$e&He,O[9]=Ge^~$t&Ye,O[18]=Ue^~kt&J,O[19]=bt^~se&re,O[28]=_e^~Le&mt,O[29]=be^~Ve&Ke,O[38]=fe^~Se&Te,O[39]=ve^~Je&Ne,O[48]=gt^~Pe&Be,O[49]=yt^~xe&Qe,O[0]^=F[Q],O[1]^=F[Q+1]};if(b)t.exports=m;else for(E=0;E<y.length;++E)c[y[E]]=m[y[E]]})()})(sha3$1);var sha3Exports=sha3$1.exports;const sha3=getDefaultExportFromCjs$1(sha3Exports);function keccak256(t){return"0x"+sha3.keccak_256(arrayify(t))}const version$m="rlp/5.7.0",logger$r=new Logger(version$m);function arrayifyInteger(t){const e=[];for(;t;)e.unshift(t&255),t>>=8;return e}function unarrayifyInteger(t,e,n){let o=0;for(let c=0;c<n;c++)o=o*256+t[e+c];return o}function _encode(t){if(Array.isArray(t)){let o=[];if(t.forEach(function(a){o=o.concat(_encode(a))}),o.length<=55)return o.unshift(192+o.length),o;const c=arrayifyInteger(o.length);return c.unshift(247+c.length),c.concat(o)}isBytesLike(t)||logger$r.throwArgumentError("RLP object must be BytesLike","object",t);const e=Array.prototype.slice.call(arrayify(t));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const n=arrayifyInteger(e.length);return n.unshift(183+n.length),n.concat(e)}function encode$n(t){return hexlify(_encode(t))}function _decodeChildren(t,e,n,o){const c=[];for(;n<e+1+o;){const a=_decode(t,n);c.push(a.result),n+=a.consumed,n>e+1+o&&logger$r.throwError("child data too short",Logger.errors.BUFFER_OVERRUN,{})}return{consumed:1+o,result:c}}function _decode(t,e){if(t.length===0&&logger$r.throwError("data too short",Logger.errors.BUFFER_OVERRUN,{}),t[e]>=248){const n=t[e]-247;e+1+n>t.length&&logger$r.throwError("data short segment too short",Logger.errors.BUFFER_OVERRUN,{});const o=unarrayifyInteger(t,e+1,n);return e+1+n+o>t.length&&logger$r.throwError("data long segment too short",Logger.errors.BUFFER_OVERRUN,{}),_decodeChildren(t,e,e+1+n,n+o)}else if(t[e]>=192){const n=t[e]-192;return e+1+n>t.length&&logger$r.throwError("data array too short",Logger.errors.BUFFER_OVERRUN,{}),_decodeChildren(t,e,e+1,n)}else if(t[e]>=184){const n=t[e]-183;e+1+n>t.length&&logger$r.throwError("data array too short",Logger.errors.BUFFER_OVERRUN,{});const o=unarrayifyInteger(t,e+1,n);e+1+n+o>t.length&&logger$r.throwError("data array too short",Logger.errors.BUFFER_OVERRUN,{});const c=hexlify(t.slice(e+1+n,e+1+n+o));return{consumed:1+n+o,result:c}}else if(t[e]>=128){const n=t[e]-128;e+1+n>t.length&&logger$r.throwError("data too short",Logger.errors.BUFFER_OVERRUN,{});const o=hexlify(t.slice(e+1,e+1+n));return{consumed:1+n,result:o}}return{consumed:1,result:hexlify(t[e])}}function decode$m(t){const e=arrayify(t),n=_decode(e,0);return n.consumed!==e.length&&logger$r.throwArgumentError("invalid rlp data","data",t),n.result}const version$l="address/5.7.0",logger$q=new Logger(version$l);function getChecksumAddress(t){isHexString(t,20)||logger$q.throwArgumentError("invalid address","address",t),t=t.toLowerCase();const e=t.substring(2).split(""),n=new Uint8Array(40);for(let c=0;c<40;c++)n[c]=e[c].charCodeAt(0);const o=arrayify(keccak256(n));for(let c=0;c<40;c+=2)o[c>>1]>>4>=8&&(e[c]=e[c].toUpperCase()),(o[c>>1]&15)>=8&&(e[c+1]=e[c+1].toUpperCase());return"0x"+e.join("")}const MAX_SAFE_INTEGER$2=9007199254740991;function log10(t){return Math.log10?Math.log10(t):Math.log(t)/Math.LN10}const ibanLookup={};for(let t=0;t<10;t++)ibanLookup[String(t)]=String(t);for(let t=0;t<26;t++)ibanLookup[String.fromCharCode(65+t)]=String(10+t);const safeDigits=Math.floor(log10(MAX_SAFE_INTEGER$2));function ibanChecksum(t){t=t.toUpperCase(),t=t.substring(4)+t.substring(0,2)+"00";let e=t.split("").map(o=>ibanLookup[o]).join("");for(;e.length>=safeDigits;){let o=e.substring(0,safeDigits);e=parseInt(o,10)%97+e.substring(o.length)}let n=String(98-parseInt(e,10)%97);for(;n.length<2;)n="0"+n;return n}function getAddress(t){let e=null;if(typeof t!="string"&&logger$q.throwArgumentError("invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/))t.substring(0,2)!=="0x"&&(t="0x"+t),e=getChecksumAddress(t),t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&e!==t&&logger$q.throwArgumentError("bad address checksum","address",t);else if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(t.substring(2,4)!==ibanChecksum(t)&&logger$q.throwArgumentError("bad icap checksum","address",t),e=_base36To16(t.substring(4));e.length<40;)e="0"+e;e=getChecksumAddress("0x"+e)}else logger$q.throwArgumentError("invalid address","address",t);return e}function getContractAddress(t){let e=null;try{e=getAddress(t.from)}catch{logger$q.throwArgumentError("missing from address","transaction",t)}const n=stripZeros(arrayify(BigNumber.from(t.nonce).toHexString()));return getAddress(hexDataSlice(keccak256(encode$n([e,n])),12))}class AddressCoder extends Coder{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,n){try{n=getAddress(n)}catch(o){this._throwError(o.message,n)}return e.writeValue(n)}decode(e){return getAddress(hexZeroPad(e.readValue().toHexString(),20))}}class AnonymousCoder extends Coder{constructor(e){super(e.name,e.type,void 0,e.dynamic),this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,n){return this.coder.encode(e,n)}decode(e){return this.coder.decode(e)}}const logger$p=new Logger(version$n);function pack(t,e,n){let o=null;if(Array.isArray(n))o=n;else if(n&&typeof n=="object"){let v={};o=e.map(A=>{const S=A.localName;return S||logger$p.throwError("cannot encode object for signature with missing names",Logger.errors.INVALID_ARGUMENT,{argument:"values",coder:A,value:n}),v[S]&&logger$p.throwError("cannot encode object for signature with duplicate names",Logger.errors.INVALID_ARGUMENT,{argument:"values",coder:A,value:n}),v[S]=!0,n[S]})}else logger$p.throwArgumentError("invalid tuple value","tuple",n);e.length!==o.length&&logger$p.throwArgumentError("types/value length mismatch","tuple",n);let c=new Writer(t.wordSize),a=new Writer(t.wordSize),l=[];e.forEach((v,A)=>{let S=o[A];if(v.dynamic){let M=a.length;v.encode(a,S);let B=c.writeUpdatableValue();l.push(P=>{B(P+M)})}else v.encode(c,S)}),l.forEach(v=>{v(c.length)});let b=t.appendWriter(c);return b+=t.appendWriter(a),b}function unpack(t,e){let n=[],o=t.subReader(0);e.forEach(a=>{let l=null;if(a.dynamic){let b=t.readValue(),v=o.subReader(b.toNumber());try{l=a.decode(v)}catch(A){if(A.code===Logger.errors.BUFFER_OVERRUN)throw A;l=A,l.baseType=a.name,l.name=a.localName,l.type=a.type}}else try{l=a.decode(t)}catch(b){if(b.code===Logger.errors.BUFFER_OVERRUN)throw b;l=b,l.baseType=a.name,l.name=a.localName,l.type=a.type}l!=null&&n.push(l)});const c=e.reduce((a,l)=>{const b=l.localName;return b&&(a[b]||(a[b]=0),a[b]++),a},{});e.forEach((a,l)=>{let b=a.localName;if(!b||c[b]!==1||(b==="length"&&(b="_length"),n[b]!=null))return;const v=n[l];v instanceof Error?Object.defineProperty(n,b,{enumerable:!0,get:()=>{throw v}}):n[b]=v});for(let a=0;a<n.length;a++){const l=n[a];l instanceof Error&&Object.defineProperty(n,a,{enumerable:!0,get:()=>{throw l}})}return Object.freeze(n)}class ArrayCoder extends Coder{constructor(e,n,o){const c=e.type+"["+(n>=0?n:"")+"]",a=n===-1||e.dynamic;super("array",c,o,a),this.coder=e,this.length=n}defaultValue(){const e=this.coder.defaultValue(),n=[];for(let o=0;o<this.length;o++)n.push(e);return n}encode(e,n){Array.isArray(n)||this._throwError("expected array value",n);let o=this.length;o===-1&&(o=n.length,e.writeValue(n.length)),logger$p.checkArgumentCount(n.length,o,"coder array"+(this.localName?" "+this.localName:""));let c=[];for(let a=0;a<n.length;a++)c.push(this.coder);return pack(e,c,n)}decode(e){let n=this.length;n===-1&&(n=e.readValue().toNumber(),n*32>e._data.length&&logger$p.throwError("insufficient data length",Logger.errors.BUFFER_OVERRUN,{length:e._data.length,count:n}));let o=[];for(let c=0;c<n;c++)o.push(new AnonymousCoder(this.coder));return e.coerce(this.name,unpack(e,o))}}class BooleanCoder extends Coder{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,n){return e.writeValue(n?1:0)}decode(e){return e.coerce(this.type,!e.readValue().isZero())}}class DynamicBytesCoder extends Coder{constructor(e,n){super(e,e,n,!0)}defaultValue(){return"0x"}encode(e,n){n=arrayify(n);let o=e.writeValue(n.length);return o+=e.writeBytes(n),o}decode(e){return e.readBytes(e.readValue().toNumber(),!0)}}class BytesCoder extends DynamicBytesCoder{constructor(e){super("bytes",e)}decode(e){return e.coerce(this.name,hexlify(super.decode(e)))}}class FixedBytesCoder extends Coder{constructor(e,n){let o="bytes"+String(e);super(o,o,n,!1),this.size=e}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(e,n){let o=arrayify(n);return o.length!==this.size&&this._throwError("incorrect data length",n),e.writeBytes(o)}decode(e){return e.coerce(this.name,hexlify(e.readBytes(this.size)))}}class NullCoder extends Coder{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,n){return n!=null&&this._throwError("not null",n),e.writeBytes([])}decode(e){return e.readBytes(0),e.coerce(this.name,null)}}const AddressZero="0x0000000000000000000000000000000000000000",NegativeOne$1=BigNumber.from(-1),Zero$1=BigNumber.from(0),One$1=BigNumber.from(1),MaxUint256$1=BigNumber.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),HashZero="0x0000000000000000000000000000000000000000000000000000000000000000";class NumberCoder extends Coder{constructor(e,n,o){const c=(n?"int":"uint")+e*8;super(c,c,o,!1),this.size=e,this.signed=n}defaultValue(){return 0}encode(e,n){let o=BigNumber.from(n),c=MaxUint256$1.mask(e.wordSize*8);if(this.signed){let a=c.mask(this.size*8-1);(o.gt(a)||o.lt(a.add(One$1).mul(NegativeOne$1)))&&this._throwError("value out-of-bounds",n)}else(o.lt(Zero$1)||o.gt(c.mask(this.size*8)))&&this._throwError("value out-of-bounds",n);return o=o.toTwos(this.size*8).mask(this.size*8),this.signed&&(o=o.fromTwos(this.size*8).toTwos(8*e.wordSize)),e.writeValue(o)}decode(e){let n=e.readValue().mask(this.size*8);return this.signed&&(n=n.fromTwos(this.size*8)),e.coerce(this.name,n)}}const version$k="strings/5.7.0",logger$o=new Logger(version$k);var UnicodeNormalizationForm;(function(t){t.current="",t.NFC="NFC",t.NFD="NFD",t.NFKC="NFKC",t.NFKD="NFKD"})(UnicodeNormalizationForm||(UnicodeNormalizationForm={}));var Utf8ErrorReason;(function(t){t.UNEXPECTED_CONTINUE="unexpected continuation byte",t.BAD_PREFIX="bad codepoint prefix",t.OVERRUN="string overrun",t.MISSING_CONTINUE="missing continuation byte",t.OUT_OF_RANGE="out of UTF-8 range",t.UTF16_SURROGATE="UTF-16 surrogate",t.OVERLONG="overlong representation"})(Utf8ErrorReason||(Utf8ErrorReason={}));function errorFunc(t,e,n,o,c){return logger$o.throwArgumentError(`invalid codepoint at offset ${e}; ${t}`,"bytes",n)}function ignoreFunc(t,e,n,o,c){if(t===Utf8ErrorReason.BAD_PREFIX||t===Utf8ErrorReason.UNEXPECTED_CONTINUE){let a=0;for(let l=e+1;l<n.length&&n[l]>>6===2;l++)a++;return a}return t===Utf8ErrorReason.OVERRUN?n.length-e-1:0}function replaceFunc(t,e,n,o,c){return t===Utf8ErrorReason.OVERLONG?(o.push(c),0):(o.push(65533),ignoreFunc(t,e,n))}const Utf8ErrorFuncs=Object.freeze({error:errorFunc,ignore:ignoreFunc,replace:replaceFunc});function getUtf8CodePoints(t,e){e==null&&(e=Utf8ErrorFuncs.error),t=arrayify(t);const n=[];let o=0;for(;o<t.length;){const c=t[o++];if(!(c>>7)){n.push(c);continue}let a=null,l=null;if((c&224)===192)a=1,l=127;else if((c&240)===224)a=2,l=2047;else if((c&248)===240)a=3,l=65535;else{(c&192)===128?o+=e(Utf8ErrorReason.UNEXPECTED_CONTINUE,o-1,t,n):o+=e(Utf8ErrorReason.BAD_PREFIX,o-1,t,n);continue}if(o-1+a>=t.length){o+=e(Utf8ErrorReason.OVERRUN,o-1,t,n);continue}let b=c&(1<<8-a-1)-1;for(let v=0;v<a;v++){let A=t[o];if((A&192)!=128){o+=e(Utf8ErrorReason.MISSING_CONTINUE,o,t,n),b=null;break}b=b<<6|A&63,o++}if(b!==null){if(b>1114111){o+=e(Utf8ErrorReason.OUT_OF_RANGE,o-1-a,t,n,b);continue}if(b>=55296&&b<=57343){o+=e(Utf8ErrorReason.UTF16_SURROGATE,o-1-a,t,n,b);continue}if(b<=l){o+=e(Utf8ErrorReason.OVERLONG,o-1-a,t,n,b);continue}n.push(b)}}return n}function toUtf8Bytes(t,e=UnicodeNormalizationForm.current){e!=UnicodeNormalizationForm.current&&(logger$o.checkNormalize(),t=t.normalize(e));let n=[];for(let o=0;o<t.length;o++){const c=t.charCodeAt(o);if(c<128)n.push(c);else if(c<2048)n.push(c>>6|192),n.push(c&63|128);else if((c&64512)==55296){o++;const a=t.charCodeAt(o);if(o>=t.length||(a&64512)!==56320)throw new Error("invalid utf-8 string");const l=65536+((c&1023)<<10)+(a&1023);n.push(l>>18|240),n.push(l>>12&63|128),n.push(l>>6&63|128),n.push(l&63|128)}else n.push(c>>12|224),n.push(c>>6&63|128),n.push(c&63|128)}return arrayify(n)}function _toUtf8String(t){return t.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function toUtf8String(t,e){return _toUtf8String(getUtf8CodePoints(t,e))}function toUtf8CodePoints(t,e=UnicodeNormalizationForm.current){return getUtf8CodePoints(toUtf8Bytes(t,e))}class StringCoder extends DynamicBytesCoder{constructor(e){super("string",e)}defaultValue(){return""}encode(e,n){return super.encode(e,toUtf8Bytes(n))}decode(e){return toUtf8String(super.decode(e))}}class TupleCoder extends Coder{constructor(e,n){let o=!1;const c=[];e.forEach(l=>{l.dynamic&&(o=!0),c.push(l.type)});const a="tuple("+c.join(",")+")";super("tuple",a,n,o),this.coders=e}defaultValue(){const e=[];this.coders.forEach(o=>{e.push(o.defaultValue())});const n=this.coders.reduce((o,c)=>{const a=c.localName;return a&&(o[a]||(o[a]=0),o[a]++),o},{});return this.coders.forEach((o,c)=>{let a=o.localName;!a||n[a]!==1||(a==="length"&&(a="_length"),e[a]==null&&(e[a]=e[c]))}),Object.freeze(e)}encode(e,n){return pack(e,this.coders,n)}decode(e){return e.coerce(this.name,unpack(e,this.coders))}}const logger$n=new Logger(version$n),paramTypeBytes=new RegExp(/^bytes([0-9]*)$/),paramTypeNumber=new RegExp(/^(u?int)([0-9]*)$/);class AbiCoder{constructor(e){defineReadOnly(this,"coerceFunc",e||null)}_getCoder(e){switch(e.baseType){case"address":return new AddressCoder(e.name);case"bool":return new BooleanCoder(e.name);case"string":return new StringCoder(e.name);case"bytes":return new BytesCoder(e.name);case"array":return new ArrayCoder(this._getCoder(e.arrayChildren),e.arrayLength,e.name);case"tuple":return new TupleCoder((e.components||[]).map(o=>this._getCoder(o)),e.name);case"":return new NullCoder(e.name)}let n=e.type.match(paramTypeNumber);if(n){let o=parseInt(n[2]||"256");return(o===0||o>256||o%8!==0)&&logger$n.throwArgumentError("invalid "+n[1]+" bit length","param",e),new NumberCoder(o/8,n[1]==="int",e.name)}if(n=e.type.match(paramTypeBytes),n){let o=parseInt(n[1]);return(o===0||o>32)&&logger$n.throwArgumentError("invalid bytes length","param",e),new FixedBytesCoder(o,e.name)}return logger$n.throwArgumentError("invalid type","type",e.type)}_getWordSize(){return 32}_getReader(e,n){return new Reader(e,this._getWordSize(),this.coerceFunc,n)}_getWriter(){return new Writer(this._getWordSize())}getDefaultValue(e){const n=e.map(c=>this._getCoder(ParamType.from(c)));return new TupleCoder(n,"_").defaultValue()}encode(e,n){e.length!==n.length&&logger$n.throwError("types/values length mismatch",Logger.errors.INVALID_ARGUMENT,{count:{types:e.length,values:n.length},value:{types:e,values:n}});const o=e.map(l=>this._getCoder(ParamType.from(l))),c=new TupleCoder(o,"_"),a=this._getWriter();return c.encode(a,n),a.data}decode(e,n,o){const c=e.map(l=>this._getCoder(ParamType.from(l)));return new TupleCoder(c,"_").decode(this._getReader(arrayify(n),o))}}const defaultAbiCoder=new AbiCoder;function id(t){return keccak256(toUtf8Bytes(t))}const version$j="hash/5.7.0";function decode$l(t){t=atob(t);const e=[];for(let n=0;n<t.length;n++)e.push(t.charCodeAt(n));return arrayify(e)}function encode$m(t){t=arrayify(t);let e="";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return btoa(e)}function flat(t,e){e==null&&(e=1);const n=[],o=n.forEach,c=function(a,l){o.call(a,function(b){l>0&&Array.isArray(b)?c(b,l-1):n.push(b)})};return c(t,e),n}function fromEntries(t){const e={};for(let n=0;n<t.length;n++){const o=t[n];e[o[0]]=o[1]}return e}function decode_arithmetic(t){let e=0;function n(){return t[e++]<<8|t[e++]}let o=n(),c=1,a=[0,1];for(let ce=1;ce<o;ce++)a.push(c+=n());let l=n(),b=e;e+=l;let v=0,A=0;function S(){return v==0&&(A=A<<8|t[e++],v=8),A>>--v&1}const M=31,B=Math.pow(2,M),P=B>>>1,L=P>>1,F=B-1;let U=0;for(let ce=0;ce<M;ce++)U=U<<1|S();let q=[],X=0,ee=B;for(;;){let ce=Math.floor(((U-X+1)*c-1)/ee),ue=0,Ae=o;for(;Ae-ue>1;){let Ce=ue+Ae>>>1;ce<a[Ce]?Ae=Ce:ue=Ce}if(ue==0)break;q.push(ue);let we=X+Math.floor(ee*a[ue]/c),pe=X+Math.floor(ee*a[ue+1]/c)-1;for(;!((we^pe)&P);)U=U<<1&F|S(),we=we<<1&F,pe=pe<<1&F|1;for(;we&~pe&L;)U=U&P|U<<1&F>>>1|S(),we=we<<1^P,pe=(pe^P)<<1|P|1;X=we,ee=1+pe-we}let te=o-4;return q.map(ce=>{switch(ce-te){case 3:return te+65792+(t[b++]<<16|t[b++]<<8|t[b++]);case 2:return te+256+(t[b++]<<8|t[b++]);case 1:return te+t[b++];default:return ce-1}})}function read_payload(t){let e=0;return()=>t[e++]}function read_compressed_payload(t){return read_payload(decode_arithmetic(t))}function signed(t){return t&1?~t>>1:t>>1}function read_counts(t,e){let n=Array(t);for(let o=0;o<t;o++)n[o]=1+e();return n}function read_ascending(t,e){let n=Array(t);for(let o=0,c=-1;o<t;o++)n[o]=c+=1+e();return n}function read_deltas(t,e){let n=Array(t);for(let o=0,c=0;o<t;o++)n[o]=c+=signed(e());return n}function read_member_array(t,e){let n=read_ascending(t(),t),o=t(),c=read_ascending(o,t),a=read_counts(o,t);for(let l=0;l<o;l++)for(let b=0;b<a[l];b++)n.push(c[l]+b);return e?n.map(l=>e[l]):n}function read_mapped_map(t){let e=[];for(;;){let n=t();if(n==0)break;e.push(read_linear_table(n,t))}for(;;){let n=t()-1;if(n<0)break;e.push(read_replacement_table(n,t))}return fromEntries(flat(e))}function read_zero_terminated_array(t){let e=[];for(;;){let n=t();if(n==0)break;e.push(n)}return e}function read_transposed(t,e,n){let o=Array(t).fill(void 0).map(()=>[]);for(let c=0;c<e;c++)read_deltas(t,n).forEach((a,l)=>o[l].push(a));return o}function read_linear_table(t,e){let n=1+e(),o=e(),c=read_zero_terminated_array(e),a=read_transposed(c.length,1+t,e);return flat(a.map((l,b)=>{const v=l[0],A=l.slice(1);return Array(c[b]).fill(void 0).map((S,M)=>{let B=M*o;return[v+M*n,A.map(P=>P+B)]})}))}function read_replacement_table(t,e){let n=1+e();return read_transposed(n,1+t,e).map(c=>[c[0],c.slice(1)])}function read_emoji_trie(t){let e=read_member_array(t).sort((o,c)=>o-c);return n();function n(){let o=[];for(;;){let A=read_member_array(t,e);if(A.length==0)break;o.push({set:new Set(A),node:n()})}o.sort((A,S)=>S.set.size-A.set.size);let c=t(),a=c%3;c=c/3|0;let l=!!(c&1);c>>=1;let b=c==1,v=c==2;return{branches:o,valid:a,fe0f:l,save:b,check:v}}}function getData(){return read_compressed_payload(decode$l("AEQF2AO2DEsA2wIrAGsBRABxAN8AZwCcAEwAqgA0AGwAUgByADcATAAVAFYAIQAyACEAKAAYAFgAGwAjABQAMAAmADIAFAAfABQAKwATACoADgAbAA8AHQAYABoAGQAxADgALAAoADwAEwA9ABMAGgARAA4ADwAWABMAFgAIAA8AHgQXBYMA5BHJAS8JtAYoAe4AExozi0UAH21tAaMnBT8CrnIyhrMDhRgDygIBUAEHcoFHUPe8AXBjAewCjgDQR8IICIcEcQLwATXCDgzvHwBmBoHNAqsBdBcUAykgDhAMShskMgo8AY8jqAQfAUAfHw8BDw87MioGlCIPBwZCa4ELatMAAMspJVgsDl8AIhckSg8XAHdvTwBcIQEiDT4OPhUqbyECAEoAS34Aej8Ybx83JgT/Xw8gHxZ/7w8RICxPHA9vBw+Pfw8PHwAPFv+fAsAvCc8vEr8ivwD/EQ8Bol8OEBa/A78hrwAPCU8vESNvvwWfHwNfAVoDHr+ZAAED34YaAdJPAK7PLwSEgDLHAGo1Pz8Pvx9fUwMrpb8O/58VTzAPIBoXIyQJNF8hpwIVAT8YGAUADDNBaX3RAMomJCg9EhUeA29MABsZBTMNJipjOhc19gcIDR8bBwQHEggCWi6DIgLuAQYA+BAFCha3A5XiAEsqM7UFFgFLhAMjFTMYE1Klnw74nRVBG/ASCm0BYRN/BrsU3VoWy+S0vV8LQx+vN8gF2AC2AK5EAWwApgYDKmAAroQ0NDQ0AT+OCg7wAAIHRAbpNgVcBV0APTA5BfbPFgMLzcYL/QqqA82eBALKCjQCjqYCht0/k2+OAsXQAoP3ASTKDgDw6ACKAUYCMpIKJpRaAE4A5womABzZvs0REEKiACIQAd5QdAECAj4Ywg/wGqY2AVgAYADYvAoCGAEubA0gvAY2ALAAbpbvqpyEAGAEpgQAJgAG7gAgAEACmghUFwCqAMpAINQIwC4DthRAAPcycKgApoIdABwBfCisABoATwBqASIAvhnSBP8aH/ECeAKXAq40NjgDBTwFYQU6AXs3oABgAD4XNgmcCY1eCl5tIFZeUqGgyoNHABgAEQAaABNwWQAmABMATPMa3T34ADldyprmM1M2XociUQgLzvwAXT3xABgAEQAaABNwIGFAnADD8AAgAD4BBJWzaCcIAIEBFMAWwKoAAdq9BWAF5wLQpALEtQAKUSGkahR4GnJM+gsAwCgeFAiUAECQ0BQuL8AAIAAAADKeIheclvFqQAAETr4iAMxIARMgAMIoHhQIAn0E0pDQFC4HhznoAAAAIAI2C0/4lvFqQAAETgBJJwYCAy4ABgYAFAA8MBKYEH4eRhTkAjYeFcgACAYAeABsOqyQ5gRwDayqugEgaIIAtgoACgDmEABmBAWGme5OBJJA2m4cDeoAmITWAXwrMgOgAGwBCh6CBXYF1Tzg1wKAAFdiuABRAFwAXQBsAG8AdgBrAHYAbwCEAHEwfxQBVE5TEQADVFhTBwBDANILAqcCzgLTApQCrQL6vAAMAL8APLhNBKkE6glGKTAU4Dr4N2EYEwBCkABKk8rHAbYBmwIoAiU4Ajf/Aq4CowCAANIChzgaNBsCsTgeODcFXrgClQKdAqQBiQGYAqsCsjTsNHsfNPA0ixsAWTWiOAMFPDQSNCk2BDZHNow2TTZUNhk28Jk9VzI3QkEoAoICoQKwAqcAQAAxBV4FXbS9BW47YkIXP1ciUqs05DS/FwABUwJW11e6nHuYZmSh/RAYA8oMKvZ8KASoUAJYWAJ6ILAsAZSoqjpgA0ocBIhmDgDWAAawRDQoAAcuAj5iAHABZiR2AIgiHgCaAU68ACxuHAG0ygM8MiZIAlgBdF4GagJqAPZOHAMuBgoATkYAsABiAHgAMLoGDPj0HpKEBAAOJgAuALggTAHWAeAMEDbd20Uege0ADwAWADkAQgA9OHd+2MUQZBBhBgNNDkxxPxUQArEPqwvqERoM1irQ090ANK4H8ANYB/ADWANYB/AH8ANYB/ADWANYA1gDWBwP8B/YxRBkD00EcgWTBZAE2wiIJk4RhgctCNdUEnQjHEwDSgEBIypJITuYMxAlR0wRTQgIATZHbKx9PQNMMbBU+pCnA9AyVDlxBgMedhKlAC8PeCE1uk6DekxxpQpQT7NX9wBFBgASqwAS5gBJDSgAUCwGPQBI4zTYABNGAE2bAE3KAExdGABKaAbgAFBXAFCOAFBJABI2SWdObALDOq0//QomCZhvwHdTBkIQHCemEPgMNAG2ATwN7kvZBPIGPATKH34ZGg/OlZ0Ipi3eDO4m5C6igFsj9iqEBe5L9TzeC05RaQ9aC2YJ5DpkgU8DIgEOIowK3g06CG4Q9ArKbA3mEUYHOgPWSZsApgcCCxIdNhW2JhFirQsKOXgG/Br3C5AmsBMqev0F1BoiBk4BKhsAANAu6IWxWjJcHU9gBgQLJiPIFKlQIQ0mQLh4SRocBxYlqgKSQ3FKiFE3HpQh9zw+DWcuFFF9B/Y8BhlQC4I8n0asRQ8R0z6OPUkiSkwtBDaALDAnjAnQD4YMunxzAVoJIgmyDHITMhEYN8YIOgcaLpclJxYIIkaWYJsE+KAD9BPSAwwFQAlCBxQDthwuEy8VKgUOgSXYAvQ21i60ApBWgQEYBcwPJh/gEFFH4Q7qCJwCZgOEJewALhUiABginAhEZABgj9lTBi7MCMhqbSN1A2gU6GIRdAeSDlgHqBw0FcAc4nDJXgyGCSiksAlcAXYJmgFgBOQICjVcjKEgQmdUi1kYnCBiQUBd/QIyDGYVoES+h3kCjA9sEhwBNgF0BzoNAgJ4Ee4RbBCWCOyGBTW2M/k6JgRQIYQgEgooA1BszwsoJvoM+WoBpBJjAw00PnfvZ6xgtyUX/gcaMsZBYSHyC5NPzgydGsIYQ1QvGeUHwAP0GvQn60FYBgADpAQUOk4z7wS+C2oIjAlAAEoOpBgH2BhrCnKM0QEyjAG4mgNYkoQCcJAGOAcMAGgMiAV65gAeAqgIpAAGANADWAA6Aq4HngAaAIZCAT4DKDABIuYCkAOUCDLMAZYwAfQqBBzEDBYA+DhuSwLDsgKAa2ajBd5ZAo8CSjYBTiYEBk9IUgOwcuIA3ABMBhTgSAEWrEvMG+REAeBwLADIAPwABjYHBkIBzgH0bgC4AWALMgmjtLYBTuoqAIQAFmwB2AKKAN4ANgCA8gFUAE4FWvoF1AJQSgESMhksWGIBvAMgATQBDgB6BsyOpsoIIARuB9QCEBwV4gLvLwe2AgMi4BPOQsYCvd9WADIXUu5eZwqoCqdeaAC0YTQHMnM9UQAPH6k+yAdy/BZIiQImSwBQ5gBQQzSaNTFWSTYBpwGqKQK38AFtqwBI/wK37gK3rQK3sAK6280C0gK33AK3zxAAUEIAUD9SklKDArekArw5AEQAzAHCO147WTteO1k7XjtZO147WTteO1kDmChYI03AVU0oJqkKbV9GYewMpw3VRMk6ShPcYFJgMxPJLbgUwhXPJVcZPhq9JwYl5VUKDwUt1GYxCC00dhe9AEApaYNCY4ceMQpMHOhTklT5LRwAskujM7ANrRsWREEFSHXuYisWDwojAmSCAmJDXE6wXDchAqH4AmiZAmYKAp+FOBwMAmY8AmYnBG8EgAN/FAN+kzkHOXgYOYM6JCQCbB4CMjc4CwJtyAJtr/CLADRoRiwBaADfAOIASwYHmQyOAP8MwwAOtgJ3MAJ2o0ACeUxEAni7Hl3cRa9G9AJ8QAJ6yQJ9CgJ88UgBSH5kJQAsFklZSlwWGErNAtECAtDNSygDiFADh+dExpEzAvKiXQQDA69Lz0wuJgTQTU1NsAKLQAKK2cIcCB5EaAa4Ao44Ao5dQZiCAo7aAo5deVG1UzYLUtVUhgKT/AKTDQDqAB1VH1WwVdEHLBwplocy4nhnRTw6ApegAu+zWCKpAFomApaQApZ9nQCqWa1aCoJOADwClrYClk9cRVzSApnMApllXMtdCBoCnJw5wzqeApwXAp+cAp65iwAeEDIrEAKd8gKekwC2PmE1YfACntQCoG8BqgKeoCACnk+mY8lkKCYsAiewAiZ/AqD8AqBN2AKmMAKlzwKoAAB+AqfzaH1osgAESmodatICrOQCrK8CrWgCrQMCVx4CVd0CseLYAx9PbJgCsr4OArLpGGzhbWRtSWADJc4Ctl08QG6RAylGArhfArlIFgK5K3hwN3DiAr0aAy2zAzISAr6JcgMDM3ICvhtzI3NQAsPMAsMFc4N0TDZGdOEDPKgDPJsDPcACxX0CxkgCxhGKAshqUgLIRQLJUALJLwJkngLd03h6YniveSZL0QMYpGcDAmH1GfSVJXsMXpNevBICz2wCz20wTFTT9BSgAMeuAs90ASrrA04TfkwGAtwoAtuLAtJQA1JdA1NgAQIDVY2AikABzBfuYUZ2AILPg44C2sgC2d+EEYRKpz0DhqYAMANkD4ZyWvoAVgLfZgLeuXR4AuIw7RUB8zEoAfScAfLTiALr9ALpcXoAAur6AurlAPpIAboC7ooC652Wq5cEAu5AA4XhmHpw4XGiAvMEAGoDjheZlAL3FAORbwOSiAL3mQL52gL4Z5odmqy8OJsfA52EAv77ARwAOp8dn7QDBY4DpmsDptoA0sYDBmuhiaIGCgMMSgFgASACtgNGAJwEgLpoBgC8BGzAEowcggCEDC6kdjoAJAM0C5IKRoABZCgiAIzw3AYBLACkfng9ogigkgNmWAN6AEQCvrkEVqTGAwCsBRbAA+4iQkMCHR072jI2PTbUNsk2RjY5NvA23TZKNiU3EDcZN5I+RTxDRTBCJkK5VBYKFhZfwQCWygU3AJBRHpu+OytgNxa61A40GMsYjsn7BVwFXQVcBV0FaAVdBVwFXQVcBV0FXAVdBVwFXUsaCNyKAK4AAQUHBwKU7oICoW1e7jAEzgPxA+YDwgCkBFDAwADABKzAAOxFLhitA1UFTDeyPkM+bj51QkRCuwTQWWQ8X+0AWBYzsACNA8xwzAGm7EZ/QisoCTAbLDs6fnLfb8H2GccsbgFw13M1HAVkBW/Jxsm9CNRO8E8FDD0FBQw9FkcClOYCoMFegpDfADgcMiA2AJQACB8AsigKAIzIEAJKeBIApY5yPZQIAKQiHb4fvj5BKSRPQrZCOz0oXyxgOywfKAnGbgMClQaCAkILXgdeCD9IIGUgQj5fPoY+dT52Ao5CM0dAX9BTVG9SDzFwWTQAbxBzJF/lOEIQQglCCkKJIAls5AcClQICoKPMODEFxhi6KSAbiyfIRrMjtCgdWCAkPlFBIitCsEJRzAbMAV/OEyQzDg0OAQQEJ36i328/Mk9AybDJsQlq3tDRApUKAkFzXf1d/j9uALYP6hCoFgCTGD8kPsFKQiobrm0+zj0KSD8kPnVCRBwMDyJRTHFgMTJa5rwXQiQ2YfI/JD7BMEJEHGINTw4TOFlIRzwJO0icMQpyPyQ+wzJCRBv6DVgnKB01NgUKj2bwYzMqCoBkznBgEF+zYDIocwRIX+NgHj4HICNfh2C4CwdwFWpTG/lgUhYGAwRfv2Ts8mAaXzVgml/XYIJfuWC4HI1gUF9pYJZgMR6ilQHMAOwLAlDRefC0in4AXAEJA6PjCwc0IamOANMMCAECRQDFNRTZBgd+CwQlRA+r6+gLBDEFBnwUBXgKATIArwAGRAAHA3cDdAN2A3kDdwN9A3oDdQN7A30DfAN4A3oDfQAYEAAlAtYASwMAUAFsAHcKAHcAmgB3AHUAdQB2AHVu8UgAygDAAHcAdQB1AHYAdQALCgB3AAsAmgB3AAsCOwB3AAtu8UgAygDAAHgKAJoAdwB3AHUAdQB2AHUAeAB1AHUAdgB1bvFIAMoAwAALCgCaAHcACwB3AAsCOwB3AAtu8UgAygDAAH4ACwGgALcBpwC6AahdAu0COwLtbvFIAMoAwAALCgCaAu0ACwLtAAsCOwLtAAtu8UgAygDAA24ACwNvAAu0VsQAAzsAABCkjUIpAAsAUIusOggWcgMeBxVsGwL67U/2HlzmWOEeOgALASvuAAseAfpKUpnpGgYJDCIZM6YyARUE9ThqAD5iXQgnAJYJPnOzw0ZAEZxEKsIAkA4DhAHnTAIDxxUDK0lxCQlPYgIvIQVYJQBVqE1GakUAKGYiDToSBA1EtAYAXQJYAIF8GgMHRyAAIAjOe9YncekRAA0KACUrjwE7Ayc6AAYWAqaiKG4McEcqANoN3+Mg9TwCBhIkuCny+JwUQ29L008JluRxu3K+oAdqiHOqFH0AG5SUIfUJ5SxCGfxdipRzqTmT4V5Zb+r1Uo4Vm+NqSSEl2mNvR2JhIa8SpYO6ntdwFXHCWTCK8f2+Hxo7uiG3drDycAuKIMP5bhi06ACnqArH1rz4Rqg//lm6SgJGEVbF9xJHISaR6HxqxSnkw6shDnelHKNEfGUXSJRJ1GcsmtJw25xrZMDK9gXSm1/YMkdX4/6NKYOdtk/NQ3/NnDASjTc3fPjIjW/5sVfVObX2oTDWkr1dF9f3kxBsD3/3aQO8hPfRz+e0uEiJqt1161griu7gz8hDDwtpy+F+BWtefnKHZPAxcZoWbnznhJpy0e842j36bcNzGnIEusgGX0a8ZxsnjcSsPDZ09yZ36fCQbriHeQ72JRMILNl6ePPf2HWoVwgWAm1fb3V2sAY0+B6rAXqSwPBgseVmoqsBTSrm91+XasMYYySI8eeRxH3ZvHkMz3BQ5aJ3iUVbYPNM3/7emRtjlsMgv/9VyTsyt/mK+8fgWeT6SoFaclXqn42dAIsvAarF5vNNWHzKSkKQ/8Hfk5ZWK7r9yliOsooyBjRhfkHP4Q2DkWXQi6FG/9r/IwbmkV5T7JSopHKn1pJwm9tb5Ot0oyN1Z2mPpKXHTxx2nlK08fKk1hEYA8WgVVWL5lgx0iTv+KdojJeU23ZDjmiubXOxVXJKKi2Wjuh2HLZOFLiSC7Tls5SMh4f+Pj6xUSrNjFqLGehRNB8lC0QSLNmkJJx/wSG3MnjE9T1CkPwJI0wH2lfzwETIiVqUxg0dfu5q39Gt+hwdcxkhhNvQ4TyrBceof3Mhs/IxFci1HmHr4FMZgXEEczPiGCx0HRwzAqDq2j9AVm1kwN0mRVLWLylgtoPNapF5cY4Y1wJh/e0BBwZj44YgZrDNqvD/9Hv7GFYdUQeDJuQ3EWI4HaKqavU1XjC/n41kT4L79kqGq0kLhdTZvgP3TA3fS0ozVz+5piZsoOtIvBUFoMKbNcmBL6YxxaUAusHB38XrS8dQMnQwJfUUkpRoGr5AUeWicvBTzyK9g77+yCkf5PAysL7r/JjcZgrbvRpMW9iyaxZvKO6ceZN2EwIxKwVFPuvFuiEPGCoagbMo+SpydLrXqBzNCDGFCrO/rkcwa2xhokQZ5CdZ0AsU3JfSqJ6n5I14YA+P/uAgfhPU84Tlw7cEFfp7AEE8ey4sP12PTt4Cods1GRgDOB5xvyiR5m+Bx8O5nBCNctU8BevfV5A08x6RHd5jcwPTMDSZJOedIZ1cGQ704lxbAzqZOP05ZxaOghzSdvFBHYqomATARyAADK4elP8Ly3IrUZKfWh23Xy20uBUmLS4Pfagu9+oyVa2iPgqRP3F2CTUsvJ7+RYnN8fFZbU/HVvxvcFFDKkiTqV5UBZ3Gz54JAKByi9hkKMZJvuGgcSYXFmw08UyoQyVdfTD1/dMkCHXcTGAKeROgArsvmRrQTLUOXioOHGK2QkjHuoYFgXciZoTJd6Fs5q1QX1G+p/e26hYsEf7QZD1nnIyl/SFkNtYYmmBhpBrxl9WbY0YpHWRuw2Ll/tj9mD8P4snVzJl4F9J+1arVeTb9E5r2ILH04qStjxQNwn3m4YNqxmaNbLAqW2TN6LidwuJRqS+NXbtqxoeDXpxeGWmxzSkWxjkyCkX4NQRme6q5SAcC+M7+9ETfA/EwrzQajKakCwYyeunP6ZFlxU2oMEn1Pz31zeStW74G406ZJFCl1wAXIoUKkWotYEpOuXB1uVNxJ63dpJEqfxBeptwIHNrPz8BllZoIcBoXwgfJ+8VAUnVPvRvexnw0Ma/WiGYuJO5y8QTvEYBigFmhUxY5RqzE8OcywN/8m4UYrlaniJO75XQ6KSo9+tWHlu+hMi0UVdiKQp7NelnoZUzNaIyBPVeOwK6GNp+FfHuPOoyhaWuNvTYFkvxscMQWDh+zeFCFkgwbXftiV23ywJ4+uwRqmg9k3KzwIQpzppt8DBBOMbrqwQM5Gb05sEwdKzMiAqOloaA/lr0KA+1pr0/+HiWoiIjHA/wir2nIuS3PeU/ji3O6ZwoxcR1SZ9FhtLC5S0FIzFhbBWcGVP/KpxOPSiUoAdWUpqKH++6Scz507iCcxYI6rdMBICPJZea7OcmeFw5mObJSiqpjg2UoWNIs+cFhyDSt6geV5qgi3FunmwwDoGSMgerFOZGX1m0dMCYo5XOruxO063dwENK9DbnVM9wYFREzh4vyU1WYYJ/LRRp6oxgjqP/X5a8/4Af6p6NWkQferzBmXme0zY/4nwMJm/wd1tIqSwGz+E3xPEAOoZlJit3XddD7/BT1pllzOx+8bmQtANQ/S6fZexc6qi3W+Q2xcmXTUhuS5mpHQRvcxZUN0S5+PL9lXWUAaRZhEH8hTdAcuNMMCuVNKTEGtSUKNi3O6KhSaTzck8csZ2vWRZ+d7mW8c4IKwXIYd25S/zIftPkwPzufjEvOHWVD1m+FjpDVUTV0DGDuHj6QnaEwLu/dEgdLQOg9E1Sro9XHJ8ykLAwtPu+pxqKDuFexqON1sKQm7rwbE1E68UCfA/erovrTCG+DBSNg0l4goDQvZN6uNlbyLpcZAwj2UclycvLpIZMgv4yRlpb3YuMftozorbcGVHt/VeDV3+Fdf1TP0iuaCsPi2G4XeGhsyF1ubVDxkoJhmniQ0/jSg/eYML9KLfnCFgISWkp91eauR3IQvED0nAPXK+6hPCYs+n3+hCZbiskmVMG2da+0EsZPonUeIY8EbfusQXjsK/eFDaosbPjEfQS0RKG7yj5GG69M7MeO1HmiUYocgygJHL6M1qzUDDwUSmr99V7Sdr2F3JjQAJY+F0yH33Iv3+C9M38eML7gTgmNu/r2bUMiPvpYbZ6v1/IaESirBHNa7mPKn4dEmYg7v/+HQgPN1G79jBQ1+soydfDC2r+h2Bl/KIc5KjMK7OH6nb1jLsNf0EHVe2KBiE51ox636uyG6Lho0t3J34L5QY/ilE3mikaF4HKXG1mG1rCevT1Vv6GavltxoQe/bMrpZvRggnBxSEPEeEzkEdOxTnPXHVjUYdw8JYvjB/o7Eegc3Ma+NUxLLnsK0kJlinPmUHzHGtrk5+CAbVzFOBqpyy3QVUnzTDfC/0XD94/okH+OB+i7g9lolhWIjSnfIb+Eq43ZXOWmwvjyV/qqD+t0e+7mTEM74qP/Ozt8nmC7mRpyu63OB4KnUzFc074SqoyPUAgM+/TJGFo6T44EHnQU4X4z6qannVqgw/U7zCpwcmXV1AubIrvOmkKHazJAR55ePjp5tLBsN8vAqs3NAHdcEHOR2xQ0lsNAFzSUuxFQCFYvXLZJdOj9p4fNq6p0HBGUik2YzaI4xySy91KzhQ0+q1hjxvImRwPRf76tChlRkhRCi74NXZ9qUNeIwP+s5p+3m5nwPdNOHgSLD79n7O9m1n1uDHiMntq4nkYwV5OZ1ENbXxFd4PgrlvavZsyUO4MqYlqqn1O8W/I1dEZq5dXhrbETLaZIbC2Kj/Aa/QM+fqUOHdf0tXAQ1huZ3cmWECWSXy/43j35+Mvq9xws7JKseriZ1pEWKc8qlzNrGPUGcVgOa9cPJYIJsGnJTAUsEcDOEVULO5x0rXBijc1lgXEzQQKhROf8zIV82w8eswc78YX11KYLWQRcgHNJElBxfXr72lS2RBSl07qTKorO2uUDZr3sFhYsvnhLZn0A94KRzJ/7DEGIAhW5ZWFpL8gEwu1aLA9MuWZzNwl8Oze9Y+bX+v9gywRVnoB5I/8kXTXU3141yRLYrIOOz6SOnyHNy4SieqzkBXharjfjqq1q6tklaEbA8Qfm2DaIPs7OTq/nvJBjKfO2H9bH2cCMh1+5gspfycu8f/cuuRmtDjyqZ7uCIMyjdV3a+p3fqmXsRx4C8lujezIFHnQiVTXLXuI1XrwN3+siYYj2HHTvESUx8DlOTXpak9qFRK+L3mgJ1WsD7F4cu1aJoFoYQnu+wGDMOjJM3kiBQWHCcvhJ/HRdxodOQp45YZaOTA22Nb4XKCVxqkbwMYFhzYQYIAnCW8FW14uf98jhUG2zrKhQQ0q0CEq0t5nXyvUyvR8DvD69LU+g3i+HFWQMQ8PqZuHD+sNKAV0+M6EJC0szq7rEr7B5bQ8BcNHzvDMc9eqB5ZCQdTf80Obn4uzjwpYU7SISdtV0QGa9D3Wrh2BDQtpBKxaNFV+/Cy2P/Sv+8s7Ud0Fd74X4+o/TNztWgETUapy+majNQ68Lq3ee0ZO48VEbTZYiH1Co4OlfWef82RWeyUXo7woM03PyapGfikTnQinoNq5z5veLpeMV3HCAMTaZmA1oGLAn7XS3XYsz+XK7VMQsc4XKrmDXOLU/pSXVNUq8dIqTba///3x6LiLS6xs1xuCAYSfcQ3+rQgmu7uvf3THKt5Ooo97TqcbRqxx7EASizaQCBQllG/rYxVapMLgtLbZS64w1MDBMXX+PQpBKNwqUKOf2DDRDUXQf9EhOS0Qj4nTmlA8dzSLz/G1d+Ud8MTy/6ghhdiLpeerGY/UlDOfiuqFsMUU5/UYlP+BAmgRLuNpvrUaLlVkrqDievNVEAwF+4CoM1MZTmjxjJMsKJq+u8Zd7tNCUFy6LiyYXRJQ4VyvEQFFaCGKsxIwQkk7EzZ6LTJq2hUuPhvAW+gQnSG6J+MszC+7QCRHcnqDdyNRJ6T9xyS87A6MDutbzKGvGktpbXqtzWtXb9HsfK2cBMomjN9a4y+TaJLnXxAeX/HWzmf4cR4vALt/P4w4qgKY04ml4ZdLOinFYS6cup3G/1ie4+t1eOnpBNlqGqs75ilzkT4+DsZQxNvaSKJ//6zIbbk/M7LOhFmRc/1R+kBtz7JFGdZm/COotIdvQoXpTqP/1uqEUmCb/QWoGLMwO5ANcHzxdY48IGP5+J+zKOTBFZ4Pid+GTM+Wq12MV/H86xEJptBa6T+p3kgpwLedManBHC2GgNrFpoN2xnrMz9WFWX/8/ygSBkavq2Uv7FdCsLEYLu9LLIvAU0bNRDtzYl+/vXmjpIvuJFYjmI0im6QEYqnIeMsNjXG4vIutIGHijeAG/9EDBozKV5cldkHbLxHh25vT+ZEzbhXlqvpzKJwcEgfNwLAKFeo0/pvEE10XDB+EXRTXtSzJozQKFFAJhMxYkVaCW+E9AL7tMeU8acxidHqzb6lX4691UsDpy/LLRmT+epgW56+5Cw8tB4kMUv6s9lh3eRKbyGs+H/4mQMaYzPTf2OOdokEn+zzgvoD3FqNKk8QqGAXVsqcGdXrT62fSPkR2vROFi68A6se86UxRUk4cajfPyCC4G5wDhD+zNq4jodQ4u4n/m37Lr36n4LIAAsVr02dFi9AiwA81MYs2rm4eDlDNmdMRvEKRHfBwW5DdMNp0jPFZMeARqF/wL4XBfd+EMLBfMzpH5GH6NaW+1vrvMdg+VxDzatk3MXgO3ro3P/DpcC6+Mo4MySJhKJhSR01SGGGp5hPWmrrUgrv3lDnP+HhcI3nt3YqBoVAVTBAQT5iuhTg8nvPtd8ZeYj6w1x6RqGUBrSku7+N1+BaasZvjTk64RoIDlL8brpEcJx3OmY7jLoZsswdtmhfC/G21llXhITOwmvRDDeTTPbyASOa16cF5/A1fZAidJpqju3wYAy9avPR1ya6eNp9K8XYrrtuxlqi+bDKwlfrYdR0RRiKRVTLOH85+ZY7XSmzRpfZBJjaTa81VDcJHpZnZnSQLASGYW9l51ZV/h7eVzTi3Hv6hUsgc/51AqJRTkpbFVLXXszoBL8nBX0u/0jBLT8nH+fJePbrwURT58OY+UieRjd1vs04w0VG5VN2U6MoGZkQzKN/ptz0Q366dxoTGmj7i1NQGHi9GgnquXFYdrCfZBmeb7s0T6yrdlZH5cZuwHFyIJ/kAtGsTg0xH5taAAq44BAk1CPk9KVVbqQzrCUiFdF/6gtlPQ8bHHc1G1W92MXGZ5HEHftyLYs8mbD/9xYRUWkHmlM0zC2ilJlnNgV4bfALpQghxOUoZL7VTqtCHIaQSXm+YUMnpkXybnV+A6xlm2CVy8fn0Xlm2XRa0+zzOa21JWWmixfiPMSCZ7qA4rS93VN3pkpF1s5TonQjisHf7iU9ZGvUPOAKZcR1pbeVf/Ul7OhepGCaId9wOtqo7pJ7yLcBZ0pFkOF28y4zEI/kcUNmutBHaQpBdNM8vjCS6HZRokkeo88TBAjGyG7SR+6vUgTcyK9Imalj0kuxz0wmK+byQU11AiJFk/ya5dNduRClcnU64yGu/ieWSeOos1t3ep+RPIWQ2pyTYVbZltTbsb7NiwSi3AV+8KLWk7LxCnfZUetEM8ThnsSoGH38/nyAwFguJp8FjvlHtcWZuU4hPva0rHfr0UhOOJ/F6vS62FW7KzkmRll2HEc7oUq4fyi5T70Vl7YVIfsPHUCdHesf9Lk7WNVWO75JDkYbMI8TOW8JKVtLY9d6UJRITO8oKo0xS+o99Yy04iniGHAaGj88kEWgwv0OrHdY/nr76DOGNS59hXCGXzTKUvDl9iKpLSWYN1lxIeyywdNpTkhay74w2jFT6NS8qkjo5CxA1yfSYwp6AJIZNKIeEK5PJAW7ORgWgwp0VgzYpqovMrWxbu+DGZ6Lhie1RAqpzm8VUzKJOH3mCzWuTOLsN3VT/dv2eeYe9UjbR8YTBsLz7q60VN1sU51k+um1f8JxD5pPhbhSC8rRaB454tmh6YUWrJI3+GWY0qeWioj/tbkYITOkJaeuGt4JrJvHA+l0Gu7kY7XOaa05alMnRWVCXqFgLIwSY4uF59Ue5SU4QKuc/HamDxbr0x6csCetXGoP7Qn1Bk/J9DsynO/UD6iZ1Hyrz+jit0hDCwi/E9OjgKTbB3ZQKQ/0ZOvevfNHG0NK4Aj3Cp7NpRk07RT1i/S0EL93Ag8GRgKI9CfpajKyK6+Jj/PI1KO5/85VAwz2AwzP8FTBb075IxCXv6T9RVvWT2tUaqxDS92zrGUbWzUYk9mSs82pECH+fkqsDt93VW++4YsR/dHCYcQSYTO/KaBMDj9LSD/J/+z20Kq8XvZUAIHtm9hRPP3ItbuAu2Hm5lkPs92pd7kCxgRs0xOVBnZ13ccdA0aunrwv9SdqElJRC3g+oCu+nXyCgmXUs9yMjTMAIHfxZV+aPKcZeUBWt057Xo85Ks1Ir5gzEHCWqZEhrLZMuF11ziGtFQUds/EESajhagzcKsxamcSZxGth4UII+adPhQkUnx2WyN+4YWR+r3f8MnkyGFuR4zjzxJS8WsQYR5PTyRaD9ixa6Mh741nBHbzfjXHskGDq179xaRNrCIB1z1xRfWfjqw2pHc1zk9xlPpL8sQWAIuETZZhbnmL54rceXVNRvUiKrrqIkeogsl0XXb17ylNb0f4GA9Wd44vffEG8FSZGHEL2fbaTGRcSiCeA8PmA/f6Hz8HCS76fXUHwgwkzSwlI71ekZ7Fapmlk/KC+Hs8hUcw3N2LN5LhkVYyizYFl/uPeVP5lsoJHhhfWvvSWruCUW1ZcJOeuTbrDgywJ/qG07gZJplnTvLcYdNaH0KMYOYMGX+rB4NGPFmQsNaIwlWrfCezxre8zXBrsMT+edVLbLqN1BqB76JH4BvZTqUIMfGwPGEn+EnmTV86fPBaYbFL3DFEhjB45CewkXEAtJxk4/Ms2pPXnaRqdky0HOYdcUcE2zcXq4vaIvW2/v0nHFJH2XXe22ueDmq/18XGtELSq85j9X8q0tcNSSKJIX8FTuJF/Pf8j5PhqG2u+osvsLxYrvvfeVJL+4tkcXcr9JV7v0ERmj/X6fM3NC4j6dS1+9Umr2oPavqiAydTZPLMNRGY23LO9zAVDly7jD+70G5TPPLdhRIl4WxcYjLnM+SNcJ26FOrkrISUtPObIz5Zb3AG612krnpy15RMW+1cQjlnWFI6538qky9axd2oJmHIHP08KyP0ubGO+TQNOYuv2uh17yCIvR8VcStw7o1g0NM60sk+8Tq7YfIBJrtp53GkvzXH7OA0p8/n/u1satf/VJhtR1l8Wa6Gmaug7haSpaCaYQax6ta0mkutlb+eAOSG1aobM81D9A4iS1RRlzBBoVX6tU1S6WE2N9ORY6DfeLRC4l9Rvr5h95XDWB2mR1d4WFudpsgVYwiTwT31ljskD8ZyDOlm5DkGh9N/UB/0AI5Xvb8ZBmai2hQ4BWMqFwYnzxwB26YHSOv9WgY3JXnvoN+2R4rqGVh/LLDMtpFP+SpMGJNWvbIl5SOodbCczW2RKleksPoUeGEzrjtKHVdtZA+kfqO+rVx/iclCqwoopepvJpSTDjT+b9GWylGRF8EDbGlw6eUzmJM95Ovoz+kwLX3c2fTjFeYEsE7vUZm3mqdGJuKh2w9/QGSaqRHs99aScGOdDqkFcACoqdbBoQqqjamhH6Q9ng39JCg3lrGJwd50Qk9ovnqBTr8MME7Ps2wiVfygUmPoUBJJfJWX5Nda0nuncbFkA=="))}const r$1=getData(),VALID=new Set(read_member_array(r$1)),IGNORED=new Set(read_member_array(r$1)),MAPPED=read_mapped_map(r$1),EMOJI_ROOT=read_emoji_trie(r$1),HYPHEN=45,UNDERSCORE=95;function explode_cp(t){return toUtf8CodePoints(t)}function filter_fe0f(t){return t.filter(e=>e!=65039)}function ens_normalize_post_check(t){for(let e of t.split(".")){let n=explode_cp(e);try{for(let o=n.lastIndexOf(UNDERSCORE)-1;o>=0;o--)if(n[o]!==UNDERSCORE)throw new Error("underscore only allowed at start");if(n.length>=4&&n.every(o=>o<128)&&n[2]===HYPHEN&&n[3]===HYPHEN)throw new Error("invalid label extension")}catch(o){throw new Error(`Invalid label "${e}": ${o.message}`)}}return t}function ens_normalize(t){return ens_normalize_post_check(normalize$1(t,filter_fe0f))}function normalize$1(t,e){let n=explode_cp(t).reverse(),o=[];for(;n.length;){let c=consume_emoji_reversed(n);if(c){o.push(...e(c));continue}let a=n.pop();if(VALID.has(a)){o.push(a);continue}if(IGNORED.has(a))continue;let l=MAPPED[a];if(l){o.push(...l);continue}throw new Error(`Disallowed codepoint: 0x${a.toString(16).toUpperCase()}`)}return ens_normalize_post_check(nfc(String.fromCodePoint(...o)))}function nfc(t){return t.normalize("NFC")}function consume_emoji_reversed(t,e){var n;let o=EMOJI_ROOT,c,a,l=[],b=t.length;for(e&&(e.length=0);b;){let v=t[--b];if(o=(n=o.branches.find(A=>A.set.has(v)))===null||n===void 0?void 0:n.node,!o)break;if(o.save)a=v;else if(o.check&&v===a)break;l.push(v),o.fe0f&&(l.push(65039),b>0&&t[b-1]==65039&&b--),o.valid&&(c=l.slice(),o.valid==2&&c.splice(1,1),e&&e.push(...t.slice(b).reverse()),t.length=b)}return c}const logger$m=new Logger(version$j),Zeros=new Uint8Array(32);Zeros.fill(0);function checkComponent(t){if(t.length===0)throw new Error("invalid ENS name; empty component");return t}function ensNameSplit(t){const e=toUtf8Bytes(ens_normalize(t)),n=[];if(t.length===0)return n;let o=0;for(let c=0;c<e.length;c++)e[c]===46&&(n.push(checkComponent(e.slice(o,c))),o=c+1);if(o>=e.length)throw new Error("invalid ENS name; empty component");return n.push(checkComponent(e.slice(o))),n}function namehash(t){typeof t!="string"&&logger$m.throwArgumentError("invalid ENS name; not a string","name",t);let e=Zeros;const n=ensNameSplit(t);for(;n.length;)e=keccak256(concat([e,keccak256(n.pop())]));return hexlify(e)}function dnsEncode(t){return hexlify(concat(ensNameSplit(t).map(e=>{if(e.length>63)throw new Error("invalid DNS encoded entry; length exceeds 63 bytes");const n=new Uint8Array(e.length+1);return n.set(e,1),n[0]=n.length-1,n})))+"00"}const messagePrefix=`Ethereum Signed Message:
`;function hashMessage(t){return typeof t=="string"&&(t=toUtf8Bytes(t)),keccak256(concat([toUtf8Bytes(messagePrefix),toUtf8Bytes(String(t.length)),t]))}var __awaiter$9=function(t,e,n,o){function c(a){return a instanceof n?a:new n(function(l){l(a)})}return new(n||(n=Promise))(function(a,l){function b(S){try{A(o.next(S))}catch(M){l(M)}}function v(S){try{A(o.throw(S))}catch(M){l(M)}}function A(S){S.done?a(S.value):c(S.value).then(b,v)}A((o=o.apply(t,e||[])).next())})};const logger$l=new Logger(version$j),padding=new Uint8Array(32);padding.fill(0);const NegativeOne=BigNumber.from(-1),Zero=BigNumber.from(0),One=BigNumber.from(1),MaxUint256=BigNumber.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function hexPadRight(t){const e=arrayify(t),n=e.length%32;return n?hexConcat([e,padding.slice(n)]):hexlify(e)}const hexTrue=hexZeroPad(One.toHexString(),32),hexFalse=hexZeroPad(Zero.toHexString(),32),domainFieldTypes={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},domainFieldNames=["name","version","chainId","verifyingContract","salt"];function checkString(t){return function(e){return typeof e!="string"&&logger$l.throwArgumentError(`invalid domain value for ${JSON.stringify(t)}`,`domain.${t}`,e),e}}const domainChecks={name:checkString("name"),version:checkString("version"),chainId:function(t){try{return BigNumber.from(t).toString()}catch{}return logger$l.throwArgumentError('invalid domain value for "chainId"',"domain.chainId",t)},verifyingContract:function(t){try{return getAddress(t).toLowerCase()}catch{}return logger$l.throwArgumentError('invalid domain value "verifyingContract"',"domain.verifyingContract",t)},salt:function(t){try{const e=arrayify(t);if(e.length!==32)throw new Error("bad length");return hexlify(e)}catch{}return logger$l.throwArgumentError('invalid domain value "salt"',"domain.salt",t)}};function getBaseEncoder(t){{const e=t.match(/^(u?)int(\d*)$/);if(e){const n=e[1]==="",o=parseInt(e[2]||"256");(o%8!==0||o>256||e[2]&&e[2]!==String(o))&&logger$l.throwArgumentError("invalid numeric width","type",t);const c=MaxUint256.mask(n?o-1:o),a=n?c.add(One).mul(NegativeOne):Zero;return function(l){const b=BigNumber.from(l);return(b.lt(a)||b.gt(c))&&logger$l.throwArgumentError(`value out-of-bounds for ${t}`,"value",l),hexZeroPad(b.toTwos(256).toHexString(),32)}}}{const e=t.match(/^bytes(\d+)$/);if(e){const n=parseInt(e[1]);return(n===0||n>32||e[1]!==String(n))&&logger$l.throwArgumentError("invalid bytes width","type",t),function(o){return arrayify(o).length!==n&&logger$l.throwArgumentError(`invalid length for ${t}`,"value",o),hexPadRight(o)}}}switch(t){case"address":return function(e){return hexZeroPad(getAddress(e),32)};case"bool":return function(e){return e?hexTrue:hexFalse};case"bytes":return function(e){return keccak256(e)};case"string":return function(e){return id(e)}}return null}function encodeType(t,e){return`${t}(${e.map(({name:n,type:o})=>o+" "+n).join(",")})`}class TypedDataEncoder{constructor(e){defineReadOnly(this,"types",Object.freeze(deepCopy(e))),defineReadOnly(this,"_encoderCache",{}),defineReadOnly(this,"_types",{});const n={},o={},c={};Object.keys(e).forEach(b=>{n[b]={},o[b]=[],c[b]={}});for(const b in e){const v={};e[b].forEach(A=>{v[A.name]&&logger$l.throwArgumentError(`duplicate variable name ${JSON.stringify(A.name)} in ${JSON.stringify(b)}`,"types",e),v[A.name]=!0;const S=A.type.match(/^([^\x5b]*)(\x5b|$)/)[1];S===b&&logger$l.throwArgumentError(`circular type reference to ${JSON.stringify(S)}`,"types",e),!getBaseEncoder(S)&&(o[S]||logger$l.throwArgumentError(`unknown type ${JSON.stringify(S)}`,"types",e),o[S].push(b),n[b][S]=!0)})}const a=Object.keys(o).filter(b=>o[b].length===0);a.length===0?logger$l.throwArgumentError("missing primary type","types",e):a.length>1&&logger$l.throwArgumentError(`ambiguous primary types or unused types: ${a.map(b=>JSON.stringify(b)).join(", ")}`,"types",e),defineReadOnly(this,"primaryType",a[0]);function l(b,v){v[b]&&logger$l.throwArgumentError(`circular type reference to ${JSON.stringify(b)}`,"types",e),v[b]=!0,Object.keys(n[b]).forEach(A=>{o[A]&&(l(A,v),Object.keys(v).forEach(S=>{c[S][A]=!0}))}),delete v[b]}l(this.primaryType,{});for(const b in c){const v=Object.keys(c[b]);v.sort(),this._types[b]=encodeType(b,e[b])+v.map(A=>encodeType(A,e[A])).join("")}}getEncoder(e){let n=this._encoderCache[e];return n||(n=this._encoderCache[e]=this._getEncoder(e)),n}_getEncoder(e){{const c=getBaseEncoder(e);if(c)return c}const n=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(n){const c=n[1],a=this.getEncoder(c),l=parseInt(n[3]);return b=>{l>=0&&b.length!==l&&logger$l.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",b);let v=b.map(a);return this._types[c]&&(v=v.map(keccak256)),keccak256(hexConcat(v))}}const o=this.types[e];if(o){const c=id(this._types[e]);return a=>{const l=o.map(({name:b,type:v})=>{const A=this.getEncoder(v)(a[b]);return this._types[v]?keccak256(A):A});return l.unshift(c),hexConcat(l)}}return logger$l.throwArgumentError(`unknown type: ${e}`,"type",e)}encodeType(e){const n=this._types[e];return n||logger$l.throwArgumentError(`unknown type: ${JSON.stringify(e)}`,"name",e),n}encodeData(e,n){return this.getEncoder(e)(n)}hashStruct(e,n){return keccak256(this.encodeData(e,n))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,n,o){if(getBaseEncoder(e))return o(e,n);const c=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(c){const l=c[1],b=parseInt(c[3]);return b>=0&&n.length!==b&&logger$l.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",n),n.map(v=>this._visit(l,v,o))}const a=this.types[e];return a?a.reduce((l,{name:b,type:v})=>(l[b]=this._visit(v,n[b],o),l),{}):logger$l.throwArgumentError(`unknown type: ${e}`,"type",e)}visit(e,n){return this._visit(this.primaryType,e,n)}static from(e){return new TypedDataEncoder(e)}static getPrimaryType(e){return TypedDataEncoder.from(e).primaryType}static hashStruct(e,n,o){return TypedDataEncoder.from(n).hashStruct(e,o)}static hashDomain(e){const n=[];for(const o in e){const c=domainFieldTypes[o];c||logger$l.throwArgumentError(`invalid typed-data domain key: ${JSON.stringify(o)}`,"domain",e),n.push({name:o,type:c})}return n.sort((o,c)=>domainFieldNames.indexOf(o.name)-domainFieldNames.indexOf(c.name)),TypedDataEncoder.hashStruct("EIP712Domain",{EIP712Domain:n},e)}static encode(e,n,o){return hexConcat(["0x1901",TypedDataEncoder.hashDomain(e),TypedDataEncoder.from(n).hash(o)])}static hash(e,n,o){return keccak256(TypedDataEncoder.encode(e,n,o))}static resolveNames(e,n,o,c){return __awaiter$9(this,void 0,void 0,function*(){e=shallowCopy(e);const a={};e.verifyingContract&&!isHexString(e.verifyingContract,20)&&(a[e.verifyingContract]="0x");const l=TypedDataEncoder.from(n);l.visit(o,(b,v)=>(b==="address"&&!isHexString(v,20)&&(a[v]="0x"),v));for(const b in a)a[b]=yield c(b);return e.verifyingContract&&a[e.verifyingContract]&&(e.verifyingContract=a[e.verifyingContract]),o=l.visit(o,(b,v)=>b==="address"&&a[v]?a[v]:v),{domain:e,value:o}})}static getPayload(e,n,o){TypedDataEncoder.hashDomain(e);const c={},a=[];domainFieldNames.forEach(v=>{const A=e[v];A!=null&&(c[v]=domainChecks[v](A),a.push({name:v,type:domainFieldTypes[v]}))});const l=TypedDataEncoder.from(n),b=shallowCopy(n);return b.EIP712Domain?logger$l.throwArgumentError("types must not contain EIP712Domain type","types.EIP712Domain",n):b.EIP712Domain=a,l.encode(o),{types:b,domain:c,primaryType:l.primaryType,message:l.visit(o,(v,A)=>{if(v.match(/^bytes(\d*)/))return hexlify(arrayify(A));if(v.match(/^u?int/))return BigNumber.from(A).toString();switch(v){case"address":return A.toLowerCase();case"bool":return!!A;case"string":return typeof A!="string"&&logger$l.throwArgumentError("invalid string","value",A),A}return logger$l.throwArgumentError("unsupported type","type",v)})}}}const logger$k=new Logger(version$n);class LogDescription extends Description{}class TransactionDescription extends Description{}class ErrorDescription extends Description{}class Indexed extends Description{static isIndexed(e){return!!(e&&e._isIndexed)}}const BuiltinErrors={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:!0},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"]}};function wrapAccessError(t,e){const n=new Error(`deferred error during ABI decoding triggered accessing ${t}`);return n.error=e,n}class Interface{constructor(e){let n=[];typeof e=="string"?n=JSON.parse(e):n=e,defineReadOnly(this,"fragments",n.map(o=>Fragment.from(o)).filter(o=>o!=null)),defineReadOnly(this,"_abiCoder",getStatic(new.target,"getAbiCoder")()),defineReadOnly(this,"functions",{}),defineReadOnly(this,"errors",{}),defineReadOnly(this,"events",{}),defineReadOnly(this,"structs",{}),this.fragments.forEach(o=>{let c=null;switch(o.type){case"constructor":if(this.deploy){logger$k.warn("duplicate definition - constructor");return}defineReadOnly(this,"deploy",o);return;case"function":c=this.functions;break;case"event":c=this.events;break;case"error":c=this.errors;break;default:return}let a=o.format();if(c[a]){logger$k.warn("duplicate definition - "+a);return}c[a]=o}),this.deploy||defineReadOnly(this,"deploy",ConstructorFragment.from({payable:!1,type:"constructor"})),defineReadOnly(this,"_isInterface",!0)}format(e){e||(e=FormatTypes.full),e===FormatTypes.sighash&&logger$k.throwArgumentError("interface does not support formatting sighash","format",e);const n=this.fragments.map(o=>o.format(e));return e===FormatTypes.json?JSON.stringify(n.map(o=>JSON.parse(o))):n}static getAbiCoder(){return defaultAbiCoder}static getAddress(e){return getAddress(e)}static getSighash(e){return hexDataSlice(id(e.format()),0,4)}static getEventTopic(e){return id(e.format())}getFunction(e){if(isHexString(e)){for(const o in this.functions)if(e===this.getSighash(o))return this.functions[o];logger$k.throwArgumentError("no matching function","sighash",e)}if(e.indexOf("(")===-1){const o=e.trim(),c=Object.keys(this.functions).filter(a=>a.split("(")[0]===o);return c.length===0?logger$k.throwArgumentError("no matching function","name",o):c.length>1&&logger$k.throwArgumentError("multiple matching functions","name",o),this.functions[c[0]]}const n=this.functions[FunctionFragment.fromString(e).format()];return n||logger$k.throwArgumentError("no matching function","signature",e),n}getEvent(e){if(isHexString(e)){const o=e.toLowerCase();for(const c in this.events)if(o===this.getEventTopic(c))return this.events[c];logger$k.throwArgumentError("no matching event","topichash",o)}if(e.indexOf("(")===-1){const o=e.trim(),c=Object.keys(this.events).filter(a=>a.split("(")[0]===o);return c.length===0?logger$k.throwArgumentError("no matching event","name",o):c.length>1&&logger$k.throwArgumentError("multiple matching events","name",o),this.events[c[0]]}const n=this.events[EventFragment.fromString(e).format()];return n||logger$k.throwArgumentError("no matching event","signature",e),n}getError(e){if(isHexString(e)){const o=getStatic(this.constructor,"getSighash");for(const c in this.errors){const a=this.errors[c];if(e===o(a))return this.errors[c]}logger$k.throwArgumentError("no matching error","sighash",e)}if(e.indexOf("(")===-1){const o=e.trim(),c=Object.keys(this.errors).filter(a=>a.split("(")[0]===o);return c.length===0?logger$k.throwArgumentError("no matching error","name",o):c.length>1&&logger$k.throwArgumentError("multiple matching errors","name",o),this.errors[c[0]]}const n=this.errors[FunctionFragment.fromString(e).format()];return n||logger$k.throwArgumentError("no matching error","signature",e),n}getSighash(e){if(typeof e=="string")try{e=this.getFunction(e)}catch(n){try{e=this.getError(e)}catch{throw n}}return getStatic(this.constructor,"getSighash")(e)}getEventTopic(e){return typeof e=="string"&&(e=this.getEvent(e)),getStatic(this.constructor,"getEventTopic")(e)}_decodeParams(e,n){return this._abiCoder.decode(e,n)}_encodeParams(e,n){return this._abiCoder.encode(e,n)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,n){typeof e=="string"&&(e=this.getError(e));const o=arrayify(n);return hexlify(o.slice(0,4))!==this.getSighash(e)&&logger$k.throwArgumentError(`data signature does not match error ${e.name}.`,"data",hexlify(o)),this._decodeParams(e.inputs,o.slice(4))}encodeErrorResult(e,n){return typeof e=="string"&&(e=this.getError(e)),hexlify(concat([this.getSighash(e),this._encodeParams(e.inputs,n||[])]))}decodeFunctionData(e,n){typeof e=="string"&&(e=this.getFunction(e));const o=arrayify(n);return hexlify(o.slice(0,4))!==this.getSighash(e)&&logger$k.throwArgumentError(`data signature does not match function ${e.name}.`,"data",hexlify(o)),this._decodeParams(e.inputs,o.slice(4))}encodeFunctionData(e,n){return typeof e=="string"&&(e=this.getFunction(e)),hexlify(concat([this.getSighash(e),this._encodeParams(e.inputs,n||[])]))}decodeFunctionResult(e,n){typeof e=="string"&&(e=this.getFunction(e));let o=arrayify(n),c=null,a="",l=null,b=null,v=null;switch(o.length%this._abiCoder._getWordSize()){case 0:try{return this._abiCoder.decode(e.outputs,o)}catch{}break;case 4:{const A=hexlify(o.slice(0,4)),S=BuiltinErrors[A];if(S)l=this._abiCoder.decode(S.inputs,o.slice(4)),b=S.name,v=S.signature,S.reason&&(c=l[0]),b==="Error"?a=`; VM Exception while processing transaction: reverted with reason string ${JSON.stringify(l[0])}`:b==="Panic"&&(a=`; VM Exception while processing transaction: reverted with panic code ${l[0]}`);else try{const M=this.getError(A);l=this._abiCoder.decode(M.inputs,o.slice(4)),b=M.name,v=M.format()}catch{}break}}return logger$k.throwError("call revert exception"+a,Logger.errors.CALL_EXCEPTION,{method:e.format(),data:hexlify(n),errorArgs:l,errorName:b,errorSignature:v,reason:c})}encodeFunctionResult(e,n){return typeof e=="string"&&(e=this.getFunction(e)),hexlify(this._abiCoder.encode(e.outputs,n||[]))}encodeFilterTopics(e,n){typeof e=="string"&&(e=this.getEvent(e)),n.length>e.inputs.length&&logger$k.throwError("too many arguments for "+e.format(),Logger.errors.UNEXPECTED_ARGUMENT,{argument:"values",value:n});let o=[];e.anonymous||o.push(this.getEventTopic(e));const c=(a,l)=>a.type==="string"?id(l):a.type==="bytes"?keccak256(hexlify(l)):(a.type==="bool"&&typeof l=="boolean"&&(l=l?"0x01":"0x00"),a.type.match(/^u?int/)&&(l=BigNumber.from(l).toHexString()),a.type==="address"&&this._abiCoder.encode(["address"],[l]),hexZeroPad(hexlify(l),32));for(n.forEach((a,l)=>{let b=e.inputs[l];if(!b.indexed){a!=null&&logger$k.throwArgumentError("cannot filter non-indexed parameters; must be null","contract."+b.name,a);return}a==null?o.push(null):b.baseType==="array"||b.baseType==="tuple"?logger$k.throwArgumentError("filtering with tuples or arrays not supported","contract."+b.name,a):Array.isArray(a)?o.push(a.map(v=>c(b,v))):o.push(c(b,a))});o.length&&o[o.length-1]===null;)o.pop();return o}encodeEventLog(e,n){typeof e=="string"&&(e=this.getEvent(e));const o=[],c=[],a=[];return e.anonymous||o.push(this.getEventTopic(e)),n.length!==e.inputs.length&&logger$k.throwArgumentError("event arguments/values mismatch","values",n),e.inputs.forEach((l,b)=>{const v=n[b];if(l.indexed)if(l.type==="string")o.push(id(v));else if(l.type==="bytes")o.push(keccak256(v));else{if(l.baseType==="tuple"||l.baseType==="array")throw new Error("not implemented");o.push(this._abiCoder.encode([l.type],[v]))}else c.push(l),a.push(v)}),{data:this._abiCoder.encode(c,a),topics:o}}decodeEventLog(e,n,o){if(typeof e=="string"&&(e=this.getEvent(e)),o!=null&&!e.anonymous){let B=this.getEventTopic(e);(!isHexString(o[0],32)||o[0].toLowerCase()!==B)&&logger$k.throwError("fragment/topic mismatch",Logger.errors.INVALID_ARGUMENT,{argument:"topics[0]",expected:B,value:o[0]}),o=o.slice(1)}let c=[],a=[],l=[];e.inputs.forEach((B,P)=>{B.indexed?B.type==="string"||B.type==="bytes"||B.baseType==="tuple"||B.baseType==="array"?(c.push(ParamType.fromObject({type:"bytes32",name:B.name})),l.push(!0)):(c.push(B),l.push(!1)):(a.push(B),l.push(!1))});let b=o!=null?this._abiCoder.decode(c,concat(o)):null,v=this._abiCoder.decode(a,n,!0),A=[],S=0,M=0;e.inputs.forEach((B,P)=>{if(B.indexed)if(b==null)A[P]=new Indexed({_isIndexed:!0,hash:null});else if(l[P])A[P]=new Indexed({_isIndexed:!0,hash:b[M++]});else try{A[P]=b[M++]}catch(L){A[P]=L}else try{A[P]=v[S++]}catch(L){A[P]=L}if(B.name&&A[B.name]==null){const L=A[P];L instanceof Error?Object.defineProperty(A,B.name,{enumerable:!0,get:()=>{throw wrapAccessError(`property ${JSON.stringify(B.name)}`,L)}}):A[B.name]=L}});for(let B=0;B<A.length;B++){const P=A[B];P instanceof Error&&Object.defineProperty(A,B,{enumerable:!0,get:()=>{throw wrapAccessError(`index ${B}`,P)}})}return Object.freeze(A)}parseTransaction(e){let n=this.getFunction(e.data.substring(0,10).toLowerCase());return n?new TransactionDescription({args:this._abiCoder.decode(n.inputs,"0x"+e.data.substring(10)),functionFragment:n,name:n.name,signature:n.format(),sighash:this.getSighash(n),value:BigNumber.from(e.value||"0")}):null}parseLog(e){let n=this.getEvent(e.topics[0]);return!n||n.anonymous?null:new LogDescription({eventFragment:n,name:n.name,signature:n.format(),topic:this.getEventTopic(n),args:this.decodeEventLog(n,e.data,e.topics)})}parseError(e){const n=hexlify(e);let o=this.getError(n.substring(0,10).toLowerCase());return o?new ErrorDescription({args:this._abiCoder.decode(o.inputs,"0x"+n.substring(10)),errorFragment:o,name:o.name,signature:o.format(),sighash:this.getSighash(o)}):null}static isInterface(e){return!!(e&&e._isInterface)}}const version$i="abstract-provider/5.7.0";var __awaiter$8=function(t,e,n,o){function c(a){return a instanceof n?a:new n(function(l){l(a)})}return new(n||(n=Promise))(function(a,l){function b(S){try{A(o.next(S))}catch(M){l(M)}}function v(S){try{A(o.throw(S))}catch(M){l(M)}}function A(S){S.done?a(S.value):c(S.value).then(b,v)}A((o=o.apply(t,e||[])).next())})};const logger$j=new Logger(version$i);class ForkEvent extends Description{static isForkEvent(e){return!!(e&&e._isForkEvent)}}class Provider{constructor(){logger$j.checkAbstract(new.target,Provider),defineReadOnly(this,"_isProvider",!0)}getFeeData(){return __awaiter$8(this,void 0,void 0,function*(){const{block:e,gasPrice:n}=yield resolveProperties({block:this.getBlock("latest"),gasPrice:this.getGasPrice().catch(l=>null)});let o=null,c=null,a=null;return e&&e.baseFeePerGas&&(o=e.baseFeePerGas,a=BigNumber.from("1500000000"),c=e.baseFeePerGas.mul(2).add(a)),{lastBaseFeePerGas:o,maxFeePerGas:c,maxPriorityFeePerGas:a,gasPrice:n}})}addListener(e,n){return this.on(e,n)}removeListener(e,n){return this.off(e,n)}static isProvider(e){return!!(e&&e._isProvider)}}const version$h="abstract-signer/5.7.0";var __awaiter$7=function(t,e,n,o){function c(a){return a instanceof n?a:new n(function(l){l(a)})}return new(n||(n=Promise))(function(a,l){function b(S){try{A(o.next(S))}catch(M){l(M)}}function v(S){try{A(o.throw(S))}catch(M){l(M)}}function A(S){S.done?a(S.value):c(S.value).then(b,v)}A((o=o.apply(t,e||[])).next())})};const logger$i=new Logger(version$h),allowedTransactionKeys$2=["accessList","ccipReadEnabled","chainId","customData","data","from","gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","nonce","to","type","value"],forwardErrors=[Logger.errors.INSUFFICIENT_FUNDS,Logger.errors.NONCE_EXPIRED,Logger.errors.REPLACEMENT_UNDERPRICED];class Signer{constructor(){logger$i.checkAbstract(new.target,Signer),defineReadOnly(this,"_isSigner",!0)}getBalance(e){return __awaiter$7(this,void 0,void 0,function*(){return this._checkProvider("getBalance"),yield this.provider.getBalance(this.getAddress(),e)})}getTransactionCount(e){return __awaiter$7(this,void 0,void 0,function*(){return this._checkProvider("getTransactionCount"),yield this.provider.getTransactionCount(this.getAddress(),e)})}estimateGas(e){return __awaiter$7(this,void 0,void 0,function*(){this._checkProvider("estimateGas");const n=yield resolveProperties(this.checkTransaction(e));return yield this.provider.estimateGas(n)})}call(e,n){return __awaiter$7(this,void 0,void 0,function*(){this._checkProvider("call");const o=yield resolveProperties(this.checkTransaction(e));return yield this.provider.call(o,n)})}sendTransaction(e){return __awaiter$7(this,void 0,void 0,function*(){this._checkProvider("sendTransaction");const n=yield this.populateTransaction(e),o=yield this.signTransaction(n);return yield this.provider.sendTransaction(o)})}getChainId(){return __awaiter$7(this,void 0,void 0,function*(){return this._checkProvider("getChainId"),(yield this.provider.getNetwork()).chainId})}getGasPrice(){return __awaiter$7(this,void 0,void 0,function*(){return this._checkProvider("getGasPrice"),yield this.provider.getGasPrice()})}getFeeData(){return __awaiter$7(this,void 0,void 0,function*(){return this._checkProvider("getFeeData"),yield this.provider.getFeeData()})}resolveName(e){return __awaiter$7(this,void 0,void 0,function*(){return this._checkProvider("resolveName"),yield this.provider.resolveName(e)})}checkTransaction(e){for(const o in e)allowedTransactionKeys$2.indexOf(o)===-1&&logger$i.throwArgumentError("invalid transaction key: "+o,"transaction",e);const n=shallowCopy(e);return n.from==null?n.from=this.getAddress():n.from=Promise.all([Promise.resolve(n.from),this.getAddress()]).then(o=>(o[0].toLowerCase()!==o[1].toLowerCase()&&logger$i.throwArgumentError("from address mismatch","transaction",e),o[0])),n}populateTransaction(e){return __awaiter$7(this,void 0,void 0,function*(){const n=yield resolveProperties(this.checkTransaction(e));n.to!=null&&(n.to=Promise.resolve(n.to).then(c=>__awaiter$7(this,void 0,void 0,function*(){if(c==null)return null;const a=yield this.resolveName(c);return a==null&&logger$i.throwArgumentError("provided ENS name resolves to null","tx.to",c),a})),n.to.catch(c=>{}));const o=n.maxFeePerGas!=null||n.maxPriorityFeePerGas!=null;if(n.gasPrice!=null&&(n.type===2||o)?logger$i.throwArgumentError("eip-1559 transaction do not support gasPrice","transaction",e):(n.type===0||n.type===1)&&o&&logger$i.throwArgumentError("pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","transaction",e),(n.type===2||n.type==null)&&n.maxFeePerGas!=null&&n.maxPriorityFeePerGas!=null)n.type=2;else if(n.type===0||n.type===1)n.gasPrice==null&&(n.gasPrice=this.getGasPrice());else{const c=yield this.getFeeData();if(n.type==null)if(c.maxFeePerGas!=null&&c.maxPriorityFeePerGas!=null)if(n.type=2,n.gasPrice!=null){const a=n.gasPrice;delete n.gasPrice,n.maxFeePerGas=a,n.maxPriorityFeePerGas=a}else n.maxFeePerGas==null&&(n.maxFeePerGas=c.maxFeePerGas),n.maxPriorityFeePerGas==null&&(n.maxPriorityFeePerGas=c.maxPriorityFeePerGas);else c.gasPrice!=null?(o&&logger$i.throwError("network does not support EIP-1559",Logger.errors.UNSUPPORTED_OPERATION,{operation:"populateTransaction"}),n.gasPrice==null&&(n.gasPrice=c.gasPrice),n.type=0):logger$i.throwError("failed to get consistent fee data",Logger.errors.UNSUPPORTED_OPERATION,{operation:"signer.getFeeData"});else n.type===2&&(n.maxFeePerGas==null&&(n.maxFeePerGas=c.maxFeePerGas),n.maxPriorityFeePerGas==null&&(n.maxPriorityFeePerGas=c.maxPriorityFeePerGas))}return n.nonce==null&&(n.nonce=this.getTransactionCount("pending")),n.gasLimit==null&&(n.gasLimit=this.estimateGas(n).catch(c=>{if(forwardErrors.indexOf(c.code)>=0)throw c;return logger$i.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",Logger.errors.UNPREDICTABLE_GAS_LIMIT,{error:c,tx:n})})),n.chainId==null?n.chainId=this.getChainId():n.chainId=Promise.all([Promise.resolve(n.chainId),this.getChainId()]).then(c=>(c[1]!==0&&c[0]!==c[1]&&logger$i.throwArgumentError("chainId address mismatch","transaction",e),c[0])),yield resolveProperties(n)})}_checkProvider(e){this.provider||logger$i.throwError("missing provider",Logger.errors.UNSUPPORTED_OPERATION,{operation:e||"_checkProvider"})}static isSigner(e){return!!(e&&e._isSigner)}}class VoidSigner extends Signer{constructor(e,n){super(),defineReadOnly(this,"address",e),defineReadOnly(this,"provider",n||null)}getAddress(){return Promise.resolve(this.address)}_fail(e,n){return Promise.resolve().then(()=>{logger$i.throwError(e,Logger.errors.UNSUPPORTED_OPERATION,{operation:n})})}signMessage(e){return this._fail("VoidSigner cannot sign messages","signMessage")}signTransaction(e){return this._fail("VoidSigner cannot sign transactions","signTransaction")}_signTypedData(e,n,o){return this._fail("VoidSigner cannot sign typed data","signTypedData")}connect(e){return new VoidSigner(this.address,e)}}var hash$5={},utils$r={},minimalisticAssert$1=assert$o;function assert$o(t,e){if(!t)throw new Error(e||"Assertion failed")}assert$o.equal=function(e,n,o){if(e!=n)throw new Error(o||"Assertion failed: "+e+" != "+n)};var inherits_browser$1={exports:{}};typeof Object.create=="function"?inherits_browser$1.exports=function(e,n){n&&(e.super_=n,e.prototype=Object.create(n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:inherits_browser$1.exports=function(e,n){if(n){e.super_=n;var o=function(){};o.prototype=n.prototype,e.prototype=new o,e.prototype.constructor=e}};var inherits_browserExports=inherits_browser$1.exports,assert$n=minimalisticAssert$1,inherits$q=inherits_browserExports;utils$r.inherits=inherits$q;function isSurrogatePair(t,e){return(t.charCodeAt(e)&64512)!==55296||e<0||e+1>=t.length?!1:(t.charCodeAt(e+1)&64512)===56320}function toArray$1(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var n=[];if(typeof t=="string")if(e){if(e==="hex")for(t=t.replace(/[^a-z0-9]+/ig,""),t.length%2!==0&&(t="0"+t),c=0;c<t.length;c+=2)n.push(parseInt(t[c]+t[c+1],16))}else for(var o=0,c=0;c<t.length;c++){var a=t.charCodeAt(c);a<128?n[o++]=a:a<2048?(n[o++]=a>>6|192,n[o++]=a&63|128):isSurrogatePair(t,c)?(a=65536+((a&1023)<<10)+(t.charCodeAt(++c)&1023),n[o++]=a>>18|240,n[o++]=a>>12&63|128,n[o++]=a>>6&63|128,n[o++]=a&63|128):(n[o++]=a>>12|224,n[o++]=a>>6&63|128,n[o++]=a&63|128)}else for(c=0;c<t.length;c++)n[c]=t[c]|0;return n}utils$r.toArray=toArray$1;function toHex(t){for(var e="",n=0;n<t.length;n++)e+=zero2(t[n].toString(16));return e}utils$r.toHex=toHex;function htonl(t){var e=t>>>24|t>>>8&65280|t<<8&16711680|(t&255)<<24;return e>>>0}utils$r.htonl=htonl;function toHex32(t,e){for(var n="",o=0;o<t.length;o++){var c=t[o];e==="little"&&(c=htonl(c)),n+=zero8(c.toString(16))}return n}utils$r.toHex32=toHex32;function zero2(t){return t.length===1?"0"+t:t}utils$r.zero2=zero2;function zero8(t){return t.length===7?"0"+t:t.length===6?"00"+t:t.length===5?"000"+t:t.length===4?"0000"+t:t.length===3?"00000"+t:t.length===2?"000000"+t:t.length===1?"0000000"+t:t}utils$r.zero8=zero8;function join32(t,e,n,o){var c=n-e;assert$n(c%4===0);for(var a=new Array(c/4),l=0,b=e;l<a.length;l++,b+=4){var v;o==="big"?v=t[b]<<24|t[b+1]<<16|t[b+2]<<8|t[b+3]:v=t[b+3]<<24|t[b+2]<<16|t[b+1]<<8|t[b],a[l]=v>>>0}return a}utils$r.join32=join32;function split32(t,e){for(var n=new Array(t.length*4),o=0,c=0;o<t.length;o++,c+=4){var a=t[o];e==="big"?(n[c]=a>>>24,n[c+1]=a>>>16&255,n[c+2]=a>>>8&255,n[c+3]=a&255):(n[c+3]=a>>>24,n[c+2]=a>>>16&255,n[c+1]=a>>>8&255,n[c]=a&255)}return n}utils$r.split32=split32;function rotr32$1(t,e){return t>>>e|t<<32-e}utils$r.rotr32=rotr32$1;function rotl32$2(t,e){return t<<e|t>>>32-e}utils$r.rotl32=rotl32$2;function sum32$3(t,e){return t+e>>>0}utils$r.sum32=sum32$3;function sum32_3$1(t,e,n){return t+e+n>>>0}utils$r.sum32_3=sum32_3$1;function sum32_4$2(t,e,n,o){return t+e+n+o>>>0}utils$r.sum32_4=sum32_4$2;function sum32_5$2(t,e,n,o,c){return t+e+n+o+c>>>0}utils$r.sum32_5=sum32_5$2;function sum64$1(t,e,n,o){var c=t[e],a=t[e+1],l=o+a>>>0,b=(l<o?1:0)+n+c;t[e]=b>>>0,t[e+1]=l}utils$r.sum64=sum64$1;function sum64_hi$1(t,e,n,o){var c=e+o>>>0,a=(c<e?1:0)+t+n;return a>>>0}utils$r.sum64_hi=sum64_hi$1;function sum64_lo$1(t,e,n,o){var c=e+o;return c>>>0}utils$r.sum64_lo=sum64_lo$1;function sum64_4_hi$1(t,e,n,o,c,a,l,b){var v=0,A=e;A=A+o>>>0,v+=A<e?1:0,A=A+a>>>0,v+=A<a?1:0,A=A+b>>>0,v+=A<b?1:0;var S=t+n+c+l+v;return S>>>0}utils$r.sum64_4_hi=sum64_4_hi$1;function sum64_4_lo$1(t,e,n,o,c,a,l,b){var v=e+o+a+b;return v>>>0}utils$r.sum64_4_lo=sum64_4_lo$1;function sum64_5_hi$1(t,e,n,o,c,a,l,b,v,A){var S=0,M=e;M=M+o>>>0,S+=M<e?1:0,M=M+a>>>0,S+=M<a?1:0,M=M+b>>>0,S+=M<b?1:0,M=M+A>>>0,S+=M<A?1:0;var B=t+n+c+l+v+S;return B>>>0}utils$r.sum64_5_hi=sum64_5_hi$1;function sum64_5_lo$1(t,e,n,o,c,a,l,b,v,A){var S=e+o+a+b+A;return S>>>0}utils$r.sum64_5_lo=sum64_5_lo$1;function rotr64_hi$1(t,e,n){var o=e<<32-n|t>>>n;return o>>>0}utils$r.rotr64_hi=rotr64_hi$1;function rotr64_lo$1(t,e,n){var o=t<<32-n|e>>>n;return o>>>0}utils$r.rotr64_lo=rotr64_lo$1;function shr64_hi$1(t,e,n){return t>>>n}utils$r.shr64_hi=shr64_hi$1;function shr64_lo$1(t,e,n){var o=t<<32-n|e>>>n;return o>>>0}utils$r.shr64_lo=shr64_lo$1;var common$5={},utils$q=utils$r,assert$m=minimalisticAssert$1;function BlockHash$4(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}common$5.BlockHash=BlockHash$4;BlockHash$4.prototype.update=function(e,n){if(e=utils$q.toArray(e,n),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){e=this.pending;var o=e.length%this._delta8;this.pending=e.slice(e.length-o,e.length),this.pending.length===0&&(this.pending=null),e=utils$q.join32(e,0,e.length-o,this.endian);for(var c=0;c<e.length;c+=this._delta32)this._update(e,c,c+this._delta32)}return this};BlockHash$4.prototype.digest=function(e){return this.update(this._pad()),assert$m(this.pending===null),this._digest(e)};BlockHash$4.prototype._pad=function(){var e=this.pendingTotal,n=this._delta8,o=n-(e+this.padLength)%n,c=new Array(o+this.padLength);c[0]=128;for(var a=1;a<o;a++)c[a]=0;if(e<<=3,this.endian==="big"){for(var l=8;l<this.padLength;l++)c[a++]=0;c[a++]=0,c[a++]=0,c[a++]=0,c[a++]=0,c[a++]=e>>>24&255,c[a++]=e>>>16&255,c[a++]=e>>>8&255,c[a++]=e&255}else for(c[a++]=e&255,c[a++]=e>>>8&255,c[a++]=e>>>16&255,c[a++]=e>>>24&255,c[a++]=0,c[a++]=0,c[a++]=0,c[a++]=0,l=8;l<this.padLength;l++)c[a++]=0;return c};var sha$4={},common$4={},utils$p=utils$r,rotr32=utils$p.rotr32;function ft_1$1(t,e,n,o){if(t===0)return ch32$1(e,n,o);if(t===1||t===3)return p32(e,n,o);if(t===2)return maj32$1(e,n,o)}common$4.ft_1=ft_1$1;function ch32$1(t,e,n){return t&e^~t&n}common$4.ch32=ch32$1;function maj32$1(t,e,n){return t&e^t&n^e&n}common$4.maj32=maj32$1;function p32(t,e,n){return t^e^n}common$4.p32=p32;function s0_256$1(t){return rotr32(t,2)^rotr32(t,13)^rotr32(t,22)}common$4.s0_256=s0_256$1;function s1_256$1(t){return rotr32(t,6)^rotr32(t,11)^rotr32(t,25)}common$4.s1_256=s1_256$1;function g0_256$1(t){return rotr32(t,7)^rotr32(t,18)^t>>>3}common$4.g0_256=g0_256$1;function g1_256$1(t){return rotr32(t,17)^rotr32(t,19)^t>>>10}common$4.g1_256=g1_256$1;var utils$o=utils$r,common$3=common$5,shaCommon$1=common$4,rotl32$1=utils$o.rotl32,sum32$2=utils$o.sum32,sum32_5$1=utils$o.sum32_5,ft_1=shaCommon$1.ft_1,BlockHash$3=common$3.BlockHash,sha1_K=[1518500249,1859775393,2400959708,3395469782];function SHA1$1(){if(!(this instanceof SHA1$1))return new SHA1$1;BlockHash$3.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}utils$o.inherits(SHA1$1,BlockHash$3);var _1=SHA1$1;SHA1$1.blockSize=512;SHA1$1.outSize=160;SHA1$1.hmacStrength=80;SHA1$1.padLength=64;SHA1$1.prototype._update=function(e,n){for(var o=this.W,c=0;c<16;c++)o[c]=e[n+c];for(;c<o.length;c++)o[c]=rotl32$1(o[c-3]^o[c-8]^o[c-14]^o[c-16],1);var a=this.h[0],l=this.h[1],b=this.h[2],v=this.h[3],A=this.h[4];for(c=0;c<o.length;c++){var S=~~(c/20),M=sum32_5$1(rotl32$1(a,5),ft_1(S,l,b,v),A,o[c],sha1_K[S]);A=v,v=b,b=rotl32$1(l,30),l=a,a=M}this.h[0]=sum32$2(this.h[0],a),this.h[1]=sum32$2(this.h[1],l),this.h[2]=sum32$2(this.h[2],b),this.h[3]=sum32$2(this.h[3],v),this.h[4]=sum32$2(this.h[4],A)};SHA1$1.prototype._digest=function(e){return e==="hex"?utils$o.toHex32(this.h,"big"):utils$o.split32(this.h,"big")};var utils$n=utils$r,common$2=common$5,shaCommon=common$4,assert$l=minimalisticAssert$1,sum32$1=utils$n.sum32,sum32_4$1=utils$n.sum32_4,sum32_5=utils$n.sum32_5,ch32=shaCommon.ch32,maj32=shaCommon.maj32,s0_256=shaCommon.s0_256,s1_256=shaCommon.s1_256,g0_256=shaCommon.g0_256,g1_256=shaCommon.g1_256,BlockHash$2=common$2.BlockHash,sha256_K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function SHA256$2(){if(!(this instanceof SHA256$2))return new SHA256$2;BlockHash$2.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=sha256_K,this.W=new Array(64)}utils$n.inherits(SHA256$2,BlockHash$2);var _256=SHA256$2;SHA256$2.blockSize=512;SHA256$2.outSize=256;SHA256$2.hmacStrength=192;SHA256$2.padLength=64;SHA256$2.prototype._update=function(e,n){for(var o=this.W,c=0;c<16;c++)o[c]=e[n+c];for(;c<o.length;c++)o[c]=sum32_4$1(g1_256(o[c-2]),o[c-7],g0_256(o[c-15]),o[c-16]);var a=this.h[0],l=this.h[1],b=this.h[2],v=this.h[3],A=this.h[4],S=this.h[5],M=this.h[6],B=this.h[7];for(assert$l(this.k.length===o.length),c=0;c<o.length;c++){var P=sum32_5(B,s1_256(A),ch32(A,S,M),this.k[c],o[c]),L=sum32$1(s0_256(a),maj32(a,l,b));B=M,M=S,S=A,A=sum32$1(v,P),v=b,b=l,l=a,a=sum32$1(P,L)}this.h[0]=sum32$1(this.h[0],a),this.h[1]=sum32$1(this.h[1],l),this.h[2]=sum32$1(this.h[2],b),this.h[3]=sum32$1(this.h[3],v),this.h[4]=sum32$1(this.h[4],A),this.h[5]=sum32$1(this.h[5],S),this.h[6]=sum32$1(this.h[6],M),this.h[7]=sum32$1(this.h[7],B)};SHA256$2.prototype._digest=function(e){return e==="hex"?utils$n.toHex32(this.h,"big"):utils$n.split32(this.h,"big")};var utils$m=utils$r,SHA256$1=_256;function SHA224$1(){if(!(this instanceof SHA224$1))return new SHA224$1;SHA256$1.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}utils$m.inherits(SHA224$1,SHA256$1);var _224=SHA224$1;SHA224$1.blockSize=512;SHA224$1.outSize=224;SHA224$1.hmacStrength=192;SHA224$1.padLength=64;SHA224$1.prototype._digest=function(e){return e==="hex"?utils$m.toHex32(this.h.slice(0,7),"big"):utils$m.split32(this.h.slice(0,7),"big")};var utils$l=utils$r,common$1=common$5,assert$k=minimalisticAssert$1,rotr64_hi=utils$l.rotr64_hi,rotr64_lo=utils$l.rotr64_lo,shr64_hi=utils$l.shr64_hi,shr64_lo=utils$l.shr64_lo,sum64=utils$l.sum64,sum64_hi=utils$l.sum64_hi,sum64_lo=utils$l.sum64_lo,sum64_4_hi=utils$l.sum64_4_hi,sum64_4_lo=utils$l.sum64_4_lo,sum64_5_hi=utils$l.sum64_5_hi,sum64_5_lo=utils$l.sum64_5_lo,BlockHash$1=common$1.BlockHash,sha512_K=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function SHA512$3(){if(!(this instanceof SHA512$3))return new SHA512$3;BlockHash$1.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=sha512_K,this.W=new Array(160)}utils$l.inherits(SHA512$3,BlockHash$1);var _512=SHA512$3;SHA512$3.blockSize=1024;SHA512$3.outSize=512;SHA512$3.hmacStrength=192;SHA512$3.padLength=128;SHA512$3.prototype._prepareBlock=function(e,n){for(var o=this.W,c=0;c<32;c++)o[c]=e[n+c];for(;c<o.length;c+=2){var a=g1_512_hi(o[c-4],o[c-3]),l=g1_512_lo(o[c-4],o[c-3]),b=o[c-14],v=o[c-13],A=g0_512_hi(o[c-30],o[c-29]),S=g0_512_lo(o[c-30],o[c-29]),M=o[c-32],B=o[c-31];o[c]=sum64_4_hi(a,l,b,v,A,S,M,B),o[c+1]=sum64_4_lo(a,l,b,v,A,S,M,B)}};SHA512$3.prototype._update=function(e,n){this._prepareBlock(e,n);var o=this.W,c=this.h[0],a=this.h[1],l=this.h[2],b=this.h[3],v=this.h[4],A=this.h[5],S=this.h[6],M=this.h[7],B=this.h[8],P=this.h[9],L=this.h[10],F=this.h[11],U=this.h[12],q=this.h[13],X=this.h[14],ee=this.h[15];assert$k(this.k.length===o.length);for(var te=0;te<o.length;te+=2){var ce=X,ue=ee,Ae=s1_512_hi(B,P),we=s1_512_lo(B,P),pe=ch64_hi(B,P,L,F,U),Ce=ch64_lo(B,P,L,F,U,q),T=this.k[te],u=this.k[te+1],p=o[te],m=o[te+1],y=sum64_5_hi(ce,ue,Ae,we,pe,Ce,T,u,p,m),E=sum64_5_lo(ce,ue,Ae,we,pe,Ce,T,u,p,m);ce=s0_512_hi(c,a),ue=s0_512_lo(c,a),Ae=maj64_hi(c,a,l,b,v),we=maj64_lo(c,a,l,b,v,A);var $=sum64_hi(ce,ue,Ae,we),k=sum64_lo(ce,ue,Ae,we);X=U,ee=q,U=L,q=F,L=B,F=P,B=sum64_hi(S,M,y,E),P=sum64_lo(M,M,y,E),S=v,M=A,v=l,A=b,l=c,b=a,c=sum64_hi(y,E,$,k),a=sum64_lo(y,E,$,k)}sum64(this.h,0,c,a),sum64(this.h,2,l,b),sum64(this.h,4,v,A),sum64(this.h,6,S,M),sum64(this.h,8,B,P),sum64(this.h,10,L,F),sum64(this.h,12,U,q),sum64(this.h,14,X,ee)};SHA512$3.prototype._digest=function(e){return e==="hex"?utils$l.toHex32(this.h,"big"):utils$l.split32(this.h,"big")};function ch64_hi(t,e,n,o,c){var a=t&n^~t&c;return a<0&&(a+=4294967296),a}function ch64_lo(t,e,n,o,c,a){var l=e&o^~e&a;return l<0&&(l+=4294967296),l}function maj64_hi(t,e,n,o,c){var a=t&n^t&c^n&c;return a<0&&(a+=4294967296),a}function maj64_lo(t,e,n,o,c,a){var l=e&o^e&a^o&a;return l<0&&(l+=4294967296),l}function s0_512_hi(t,e){var n=rotr64_hi(t,e,28),o=rotr64_hi(e,t,2),c=rotr64_hi(e,t,7),a=n^o^c;return a<0&&(a+=4294967296),a}function s0_512_lo(t,e){var n=rotr64_lo(t,e,28),o=rotr64_lo(e,t,2),c=rotr64_lo(e,t,7),a=n^o^c;return a<0&&(a+=4294967296),a}function s1_512_hi(t,e){var n=rotr64_hi(t,e,14),o=rotr64_hi(t,e,18),c=rotr64_hi(e,t,9),a=n^o^c;return a<0&&(a+=4294967296),a}function s1_512_lo(t,e){var n=rotr64_lo(t,e,14),o=rotr64_lo(t,e,18),c=rotr64_lo(e,t,9),a=n^o^c;return a<0&&(a+=4294967296),a}function g0_512_hi(t,e){var n=rotr64_hi(t,e,1),o=rotr64_hi(t,e,8),c=shr64_hi(t,e,7),a=n^o^c;return a<0&&(a+=4294967296),a}function g0_512_lo(t,e){var n=rotr64_lo(t,e,1),o=rotr64_lo(t,e,8),c=shr64_lo(t,e,7),a=n^o^c;return a<0&&(a+=4294967296),a}function g1_512_hi(t,e){var n=rotr64_hi(t,e,19),o=rotr64_hi(e,t,29),c=shr64_hi(t,e,6),a=n^o^c;return a<0&&(a+=4294967296),a}function g1_512_lo(t,e){var n=rotr64_lo(t,e,19),o=rotr64_lo(e,t,29),c=shr64_lo(t,e,6),a=n^o^c;return a<0&&(a+=4294967296),a}var utils$k=utils$r,SHA512$2=_512;function SHA384$1(){if(!(this instanceof SHA384$1))return new SHA384$1;SHA512$2.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}utils$k.inherits(SHA384$1,SHA512$2);var _384=SHA384$1;SHA384$1.blockSize=1024;SHA384$1.outSize=384;SHA384$1.hmacStrength=192;SHA384$1.padLength=128;SHA384$1.prototype._digest=function(e){return e==="hex"?utils$k.toHex32(this.h.slice(0,12),"big"):utils$k.split32(this.h.slice(0,12),"big")};sha$4.sha1=_1;sha$4.sha224=_224;sha$4.sha256=_256;sha$4.sha384=_384;sha$4.sha512=_512;var ripemd={},utils$j=utils$r,common=common$5,rotl32=utils$j.rotl32,sum32=utils$j.sum32,sum32_3=utils$j.sum32_3,sum32_4=utils$j.sum32_4,BlockHash=common.BlockHash;function RIPEMD160$5(){if(!(this instanceof RIPEMD160$5))return new RIPEMD160$5;BlockHash.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}utils$j.inherits(RIPEMD160$5,BlockHash);ripemd.ripemd160=RIPEMD160$5;RIPEMD160$5.blockSize=512;RIPEMD160$5.outSize=160;RIPEMD160$5.hmacStrength=192;RIPEMD160$5.padLength=64;RIPEMD160$5.prototype._update=function(e,n){for(var o=this.h[0],c=this.h[1],a=this.h[2],l=this.h[3],b=this.h[4],v=o,A=c,S=a,M=l,B=b,P=0;P<80;P++){var L=sum32(rotl32(sum32_4(o,f$2(P,c,a,l),e[r[P]+n],K$4(P)),s[P]),b);o=b,b=l,l=rotl32(a,10),a=c,c=L,L=sum32(rotl32(sum32_4(v,f$2(79-P,A,S,M),e[rh[P]+n],Kh(P)),sh[P]),B),v=B,B=M,M=rotl32(S,10),S=A,A=L}L=sum32_3(this.h[1],a,M),this.h[1]=sum32_3(this.h[2],l,B),this.h[2]=sum32_3(this.h[3],b,v),this.h[3]=sum32_3(this.h[4],o,A),this.h[4]=sum32_3(this.h[0],c,S),this.h[0]=L};RIPEMD160$5.prototype._digest=function(e){return e==="hex"?utils$j.toHex32(this.h,"little"):utils$j.split32(this.h,"little")};function f$2(t,e,n,o){return t<=15?e^n^o:t<=31?e&n|~e&o:t<=47?(e|~n)^o:t<=63?e&o|n&~o:e^(n|~o)}function K$4(t){return t<=15?0:t<=31?1518500249:t<=47?1859775393:t<=63?2400959708:2840853838}function Kh(t){return t<=15?1352829926:t<=31?1548603684:t<=47?1836072691:t<=63?2053994217:0}var r=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],rh=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],s=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],sh=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],utils$i=utils$r,assert$j=minimalisticAssert$1;function Hmac$3(t,e,n){if(!(this instanceof Hmac$3))return new Hmac$3(t,e,n);this.Hash=t,this.blockSize=t.blockSize/8,this.outSize=t.outSize/8,this.inner=null,this.outer=null,this._init(utils$i.toArray(e,n))}var hmac$2=Hmac$3;Hmac$3.prototype._init=function(e){e.length>this.blockSize&&(e=new this.Hash().update(e).digest()),assert$j(e.length<=this.blockSize);for(var n=e.length;n<this.blockSize;n++)e.push(0);for(n=0;n<e.length;n++)e[n]^=54;for(this.inner=new this.Hash().update(e),n=0;n<e.length;n++)e[n]^=106;this.outer=new this.Hash().update(e)};Hmac$3.prototype.update=function(e,n){return this.inner.update(e,n),this};Hmac$3.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)};(function(t){var e=t;e.utils=utils$r,e.common=common$5,e.sha=sha$4,e.ripemd=ripemd,e.hmac=hmac$2,e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160})(hash$5);const hash$4=getDefaultExportFromCjs$1(hash$5);function createCommonjsModule(t,e,n){return n={path:e,exports:{},require:function(o,c){return commonjsRequire$1(o,c??n.path)}},t(n,n.exports),n.exports}function commonjsRequire$1(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var minimalisticAssert=assert$i;function assert$i(t,e){if(!t)throw new Error(e||"Assertion failed")}assert$i.equal=function(e,n,o){if(e!=n)throw new Error(o||"Assertion failed: "+e+" != "+n)};var utils_1$4=createCommonjsModule(function(t,e){var n=e;function o(l,b){if(Array.isArray(l))return l.slice();if(!l)return[];var v=[];if(typeof l!="string"){for(var A=0;A<l.length;A++)v[A]=l[A]|0;return v}if(b==="hex"){l=l.replace(/[^a-z0-9]+/ig,""),l.length%2!==0&&(l="0"+l);for(var A=0;A<l.length;A+=2)v.push(parseInt(l[A]+l[A+1],16))}else for(var A=0;A<l.length;A++){var S=l.charCodeAt(A),M=S>>8,B=S&255;M?v.push(M,B):v.push(B)}return v}n.toArray=o;function c(l){return l.length===1?"0"+l:l}n.zero2=c;function a(l){for(var b="",v=0;v<l.length;v++)b+=c(l[v].toString(16));return b}n.toHex=a,n.encode=function(b,v){return v==="hex"?a(b):b}}),utils_1$1$1=createCommonjsModule(function(t,e){var n=e;n.assert=minimalisticAssert,n.toArray=utils_1$4.toArray,n.zero2=utils_1$4.zero2,n.toHex=utils_1$4.toHex,n.encode=utils_1$4.encode;function o(v,A,S){var M=new Array(Math.max(v.bitLength(),S)+1);M.fill(0);for(var B=1<<A+1,P=v.clone(),L=0;L<M.length;L++){var F,U=P.andln(B-1);P.isOdd()?(U>(B>>1)-1?F=(B>>1)-U:F=U,P.isubn(F)):F=0,M[L]=F,P.iushrn(1)}return M}n.getNAF=o;function c(v,A){var S=[[],[]];v=v.clone(),A=A.clone();for(var M=0,B=0,P;v.cmpn(-M)>0||A.cmpn(-B)>0;){var L=v.andln(3)+M&3,F=A.andln(3)+B&3;L===3&&(L=-1),F===3&&(F=-1);var U;L&1?(P=v.andln(7)+M&7,(P===3||P===5)&&F===2?U=-L:U=L):U=0,S[0].push(U);var q;F&1?(P=A.andln(7)+B&7,(P===3||P===5)&&L===2?q=-F:q=F):q=0,S[1].push(q),2*M===U+1&&(M=1-M),2*B===q+1&&(B=1-B),v.iushrn(1),A.iushrn(1)}return S}n.getJSF=c;function a(v,A,S){var M="_"+A;v.prototype[A]=function(){return this[M]!==void 0?this[M]:this[M]=S.call(this)}}n.cachedProperty=a;function l(v){return typeof v=="string"?n.toArray(v,"hex"):v}n.parseBytes=l;function b(v){return new BN$c(v,"hex","le")}n.intFromLE=b}),getNAF$1=utils_1$1$1.getNAF,getJSF$1=utils_1$1$1.getJSF,assert$1$1=utils_1$1$1.assert;function BaseCurve$1(t,e){this.type=t,this.p=new BN$c(e.p,16),this.red=e.prime?BN$c.red(e.prime):BN$c.mont(this.p),this.zero=new BN$c(0).toRed(this.red),this.one=new BN$c(1).toRed(this.red),this.two=new BN$c(2).toRed(this.red),this.n=e.n&&new BN$c(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var n=this.n&&this.p.div(this.n);!n||n.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var base$8=BaseCurve$1;BaseCurve$1.prototype.point=function(){throw new Error("Not implemented")};BaseCurve$1.prototype.validate=function(){throw new Error("Not implemented")};BaseCurve$1.prototype._fixedNafMul=function(e,n){assert$1$1(e.precomputed);var o=e._getDoubles(),c=getNAF$1(n,1,this._bitLength),a=(1<<o.step+1)-(o.step%2===0?2:1);a/=3;var l=[],b,v;for(b=0;b<c.length;b+=o.step){v=0;for(var A=b+o.step-1;A>=b;A--)v=(v<<1)+c[A];l.push(v)}for(var S=this.jpoint(null,null,null),M=this.jpoint(null,null,null),B=a;B>0;B--){for(b=0;b<l.length;b++)v=l[b],v===B?M=M.mixedAdd(o.points[b]):v===-B&&(M=M.mixedAdd(o.points[b].neg()));S=S.add(M)}return S.toP()};BaseCurve$1.prototype._wnafMul=function(e,n){var o=4,c=e._getNAFPoints(o);o=c.wnd;for(var a=c.points,l=getNAF$1(n,o,this._bitLength),b=this.jpoint(null,null,null),v=l.length-1;v>=0;v--){for(var A=0;v>=0&&l[v]===0;v--)A++;if(v>=0&&A++,b=b.dblp(A),v<0)break;var S=l[v];assert$1$1(S!==0),e.type==="affine"?S>0?b=b.mixedAdd(a[S-1>>1]):b=b.mixedAdd(a[-S-1>>1].neg()):S>0?b=b.add(a[S-1>>1]):b=b.add(a[-S-1>>1].neg())}return e.type==="affine"?b.toP():b};BaseCurve$1.prototype._wnafMulAdd=function(e,n,o,c,a){var l=this._wnafT1,b=this._wnafT2,v=this._wnafT3,A=0,S,M,B;for(S=0;S<c;S++){B=n[S];var P=B._getNAFPoints(e);l[S]=P.wnd,b[S]=P.points}for(S=c-1;S>=1;S-=2){var L=S-1,F=S;if(l[L]!==1||l[F]!==1){v[L]=getNAF$1(o[L],l[L],this._bitLength),v[F]=getNAF$1(o[F],l[F],this._bitLength),A=Math.max(v[L].length,A),A=Math.max(v[F].length,A);continue}var U=[n[L],null,null,n[F]];n[L].y.cmp(n[F].y)===0?(U[1]=n[L].add(n[F]),U[2]=n[L].toJ().mixedAdd(n[F].neg())):n[L].y.cmp(n[F].y.redNeg())===0?(U[1]=n[L].toJ().mixedAdd(n[F]),U[2]=n[L].add(n[F].neg())):(U[1]=n[L].toJ().mixedAdd(n[F]),U[2]=n[L].toJ().mixedAdd(n[F].neg()));var q=[-3,-1,-5,-7,0,7,5,1,3],X=getJSF$1(o[L],o[F]);for(A=Math.max(X[0].length,A),v[L]=new Array(A),v[F]=new Array(A),M=0;M<A;M++){var ee=X[0][M]|0,te=X[1][M]|0;v[L][M]=q[(ee+1)*3+(te+1)],v[F][M]=0,b[L]=U}}var ce=this.jpoint(null,null,null),ue=this._wnafT4;for(S=A;S>=0;S--){for(var Ae=0;S>=0;){var we=!0;for(M=0;M<c;M++)ue[M]=v[M][S]|0,ue[M]!==0&&(we=!1);if(!we)break;Ae++,S--}if(S>=0&&Ae++,ce=ce.dblp(Ae),S<0)break;for(M=0;M<c;M++){var pe=ue[M];pe!==0&&(pe>0?B=b[M][pe-1>>1]:pe<0&&(B=b[M][-pe-1>>1].neg()),B.type==="affine"?ce=ce.mixedAdd(B):ce=ce.add(B))}}for(S=0;S<c;S++)b[S]=null;return a?ce:ce.toP()};function BasePoint$1(t,e){this.curve=t,this.type=e,this.precomputed=null}BaseCurve$1.BasePoint=BasePoint$1;BasePoint$1.prototype.eq=function(){throw new Error("Not implemented")};BasePoint$1.prototype.validate=function(){return this.curve.validate(this)};BaseCurve$1.prototype.decodePoint=function(e,n){e=utils_1$1$1.toArray(e,n);var o=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*o){e[0]===6?assert$1$1(e[e.length-1]%2===0):e[0]===7&&assert$1$1(e[e.length-1]%2===1);var c=this.point(e.slice(1,1+o),e.slice(1+o,1+2*o));return c}else if((e[0]===2||e[0]===3)&&e.length-1===o)return this.pointFromX(e.slice(1,1+o),e[0]===3);throw new Error("Unknown point format")};BasePoint$1.prototype.encodeCompressed=function(e){return this.encode(e,!0)};BasePoint$1.prototype._encode=function(e){var n=this.curve.p.byteLength(),o=this.getX().toArray("be",n);return e?[this.getY().isEven()?2:3].concat(o):[4].concat(o,this.getY().toArray("be",n))};BasePoint$1.prototype.encode=function(e,n){return utils_1$1$1.encode(this._encode(n),e)};BasePoint$1.prototype.precompute=function(e){if(this.precomputed)return this;var n={doubles:null,naf:null,beta:null};return n.naf=this._getNAFPoints(8),n.doubles=this._getDoubles(4,e),n.beta=this._getBeta(),this.precomputed=n,this};BasePoint$1.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var n=this.precomputed.doubles;return n?n.points.length>=Math.ceil((e.bitLength()+1)/n.step):!1};BasePoint$1.prototype._getDoubles=function(e,n){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var o=[this],c=this,a=0;a<n;a+=e){for(var l=0;l<e;l++)c=c.dbl();o.push(c)}return{step:e,points:o}};BasePoint$1.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var n=[this],o=(1<<e)-1,c=o===1?null:this.dbl(),a=1;a<o;a++)n[a]=n[a-1].add(c);return{wnd:e,points:n}};BasePoint$1.prototype._getBeta=function(){return null};BasePoint$1.prototype.dblp=function(e){for(var n=this,o=0;o<e;o++)n=n.dbl();return n};var inherits_browser=createCommonjsModule(function(t){typeof Object.create=="function"?t.exports=function(n,o){o&&(n.super_=o,n.prototype=Object.create(o.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(n,o){if(o){n.super_=o;var c=function(){};c.prototype=o.prototype,n.prototype=new c,n.prototype.constructor=n}}}),assert$2$1=utils_1$1$1.assert;function ShortCurve$1(t){base$8.call(this,"short",t),this.a=new BN$c(t.a,16).toRed(this.red),this.b=new BN$c(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}inherits_browser(ShortCurve$1,base$8);var short_1=ShortCurve$1;ShortCurve$1.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var n,o;if(e.beta)n=new BN$c(e.beta,16).toRed(this.red);else{var c=this._getEndoRoots(this.p);n=c[0].cmp(c[1])<0?c[0]:c[1],n=n.toRed(this.red)}if(e.lambda)o=new BN$c(e.lambda,16);else{var a=this._getEndoRoots(this.n);this.g.mul(a[0]).x.cmp(this.g.x.redMul(n))===0?o=a[0]:(o=a[1],assert$2$1(this.g.mul(o).x.cmp(this.g.x.redMul(n))===0))}var l;return e.basis?l=e.basis.map(function(b){return{a:new BN$c(b.a,16),b:new BN$c(b.b,16)}}):l=this._getEndoBasis(o),{beta:n,lambda:o,basis:l}}};ShortCurve$1.prototype._getEndoRoots=function(e){var n=e===this.p?this.red:BN$c.mont(e),o=new BN$c(2).toRed(n).redInvm(),c=o.redNeg(),a=new BN$c(3).toRed(n).redNeg().redSqrt().redMul(o),l=c.redAdd(a).fromRed(),b=c.redSub(a).fromRed();return[l,b]};ShortCurve$1.prototype._getEndoBasis=function(e){for(var n=this.n.ushrn(Math.floor(this.n.bitLength()/2)),o=e,c=this.n.clone(),a=new BN$c(1),l=new BN$c(0),b=new BN$c(0),v=new BN$c(1),A,S,M,B,P,L,F,U=0,q,X;o.cmpn(0)!==0;){var ee=c.div(o);q=c.sub(ee.mul(o)),X=b.sub(ee.mul(a));var te=v.sub(ee.mul(l));if(!M&&q.cmp(n)<0)A=F.neg(),S=a,M=q.neg(),B=X;else if(M&&++U===2)break;F=q,c=o,o=q,b=a,a=X,v=l,l=te}P=q.neg(),L=X;var ce=M.sqr().add(B.sqr()),ue=P.sqr().add(L.sqr());return ue.cmp(ce)>=0&&(P=A,L=S),M.negative&&(M=M.neg(),B=B.neg()),P.negative&&(P=P.neg(),L=L.neg()),[{a:M,b:B},{a:P,b:L}]};ShortCurve$1.prototype._endoSplit=function(e){var n=this.endo.basis,o=n[0],c=n[1],a=c.b.mul(e).divRound(this.n),l=o.b.neg().mul(e).divRound(this.n),b=a.mul(o.a),v=l.mul(c.a),A=a.mul(o.b),S=l.mul(c.b),M=e.sub(b).sub(v),B=A.add(S).neg();return{k1:M,k2:B}};ShortCurve$1.prototype.pointFromX=function(e,n){e=new BN$c(e,16),e.red||(e=e.toRed(this.red));var o=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),c=o.redSqrt();if(c.redSqr().redSub(o).cmp(this.zero)!==0)throw new Error("invalid point");var a=c.fromRed().isOdd();return(n&&!a||!n&&a)&&(c=c.redNeg()),this.point(e,c)};ShortCurve$1.prototype.validate=function(e){if(e.inf)return!0;var n=e.x,o=e.y,c=this.a.redMul(n),a=n.redSqr().redMul(n).redIAdd(c).redIAdd(this.b);return o.redSqr().redISub(a).cmpn(0)===0};ShortCurve$1.prototype._endoWnafMulAdd=function(e,n,o){for(var c=this._endoWnafT1,a=this._endoWnafT2,l=0;l<e.length;l++){var b=this._endoSplit(n[l]),v=e[l],A=v._getBeta();b.k1.negative&&(b.k1.ineg(),v=v.neg(!0)),b.k2.negative&&(b.k2.ineg(),A=A.neg(!0)),c[l*2]=v,c[l*2+1]=A,a[l*2]=b.k1,a[l*2+1]=b.k2}for(var S=this._wnafMulAdd(1,c,a,l*2,o),M=0;M<l*2;M++)c[M]=null,a[M]=null;return S};function Point$3(t,e,n,o){base$8.BasePoint.call(this,t,"affine"),e===null&&n===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new BN$c(e,16),this.y=new BN$c(n,16),o&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}inherits_browser(Point$3,base$8.BasePoint);ShortCurve$1.prototype.point=function(e,n,o){return new Point$3(this,e,n,o)};ShortCurve$1.prototype.pointFromJSON=function(e,n){return Point$3.fromJSON(this,e,n)};Point$3.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var n=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var o=this.curve,c=function(a){return o.point(a.x.redMul(o.endo.beta),a.y)};e.beta=n,n.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(c)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(c)}}}return n}};Point$3.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};Point$3.fromJSON=function(e,n,o){typeof n=="string"&&(n=JSON.parse(n));var c=e.point(n[0],n[1],o);if(!n[2])return c;function a(b){return e.point(b[0],b[1],o)}var l=n[2];return c.precomputed={beta:null,doubles:l.doubles&&{step:l.doubles.step,points:[c].concat(l.doubles.points.map(a))},naf:l.naf&&{wnd:l.naf.wnd,points:[c].concat(l.naf.points.map(a))}},c};Point$3.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};Point$3.prototype.isInfinity=function(){return this.inf};Point$3.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var n=this.y.redSub(e.y);n.cmpn(0)!==0&&(n=n.redMul(this.x.redSub(e.x).redInvm()));var o=n.redSqr().redISub(this.x).redISub(e.x),c=n.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,c)};Point$3.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var n=this.curve.a,o=this.x.redSqr(),c=e.redInvm(),a=o.redAdd(o).redIAdd(o).redIAdd(n).redMul(c),l=a.redSqr().redISub(this.x.redAdd(this.x)),b=a.redMul(this.x.redSub(l)).redISub(this.y);return this.curve.point(l,b)};Point$3.prototype.getX=function(){return this.x.fromRed()};Point$3.prototype.getY=function(){return this.y.fromRed()};Point$3.prototype.mul=function(e){return e=new BN$c(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)};Point$3.prototype.mulAdd=function(e,n,o){var c=[this,n],a=[e,o];return this.curve.endo?this.curve._endoWnafMulAdd(c,a):this.curve._wnafMulAdd(1,c,a,2)};Point$3.prototype.jmulAdd=function(e,n,o){var c=[this,n],a=[e,o];return this.curve.endo?this.curve._endoWnafMulAdd(c,a,!0):this.curve._wnafMulAdd(1,c,a,2,!0)};Point$3.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};Point$3.prototype.neg=function(e){if(this.inf)return this;var n=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var o=this.precomputed,c=function(a){return a.neg()};n.precomputed={naf:o.naf&&{wnd:o.naf.wnd,points:o.naf.points.map(c)},doubles:o.doubles&&{step:o.doubles.step,points:o.doubles.points.map(c)}}}return n};Point$3.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function JPoint$1(t,e,n,o){base$8.BasePoint.call(this,t,"jacobian"),e===null&&n===null&&o===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new BN$c(0)):(this.x=new BN$c(e,16),this.y=new BN$c(n,16),this.z=new BN$c(o,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}inherits_browser(JPoint$1,base$8.BasePoint);ShortCurve$1.prototype.jpoint=function(e,n,o){return new JPoint$1(this,e,n,o)};JPoint$1.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),n=e.redSqr(),o=this.x.redMul(n),c=this.y.redMul(n).redMul(e);return this.curve.point(o,c)};JPoint$1.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};JPoint$1.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var n=e.z.redSqr(),o=this.z.redSqr(),c=this.x.redMul(n),a=e.x.redMul(o),l=this.y.redMul(n.redMul(e.z)),b=e.y.redMul(o.redMul(this.z)),v=c.redSub(a),A=l.redSub(b);if(v.cmpn(0)===0)return A.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var S=v.redSqr(),M=S.redMul(v),B=c.redMul(S),P=A.redSqr().redIAdd(M).redISub(B).redISub(B),L=A.redMul(B.redISub(P)).redISub(l.redMul(M)),F=this.z.redMul(e.z).redMul(v);return this.curve.jpoint(P,L,F)};JPoint$1.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var n=this.z.redSqr(),o=this.x,c=e.x.redMul(n),a=this.y,l=e.y.redMul(n).redMul(this.z),b=o.redSub(c),v=a.redSub(l);if(b.cmpn(0)===0)return v.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var A=b.redSqr(),S=A.redMul(b),M=o.redMul(A),B=v.redSqr().redIAdd(S).redISub(M).redISub(M),P=v.redMul(M.redISub(B)).redISub(a.redMul(S)),L=this.z.redMul(b);return this.curve.jpoint(B,P,L)};JPoint$1.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var n;if(this.curve.zeroA||this.curve.threeA){var o=this;for(n=0;n<e;n++)o=o.dbl();return o}var c=this.curve.a,a=this.curve.tinv,l=this.x,b=this.y,v=this.z,A=v.redSqr().redSqr(),S=b.redAdd(b);for(n=0;n<e;n++){var M=l.redSqr(),B=S.redSqr(),P=B.redSqr(),L=M.redAdd(M).redIAdd(M).redIAdd(c.redMul(A)),F=l.redMul(B),U=L.redSqr().redISub(F.redAdd(F)),q=F.redISub(U),X=L.redMul(q);X=X.redIAdd(X).redISub(P);var ee=S.redMul(v);n+1<e&&(A=A.redMul(P)),l=U,v=ee,S=X}return this.curve.jpoint(l,S.redMul(a),v)};JPoint$1.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};JPoint$1.prototype._zeroDbl=function(){var e,n,o;if(this.zOne){var c=this.x.redSqr(),a=this.y.redSqr(),l=a.redSqr(),b=this.x.redAdd(a).redSqr().redISub(c).redISub(l);b=b.redIAdd(b);var v=c.redAdd(c).redIAdd(c),A=v.redSqr().redISub(b).redISub(b),S=l.redIAdd(l);S=S.redIAdd(S),S=S.redIAdd(S),e=A,n=v.redMul(b.redISub(A)).redISub(S),o=this.y.redAdd(this.y)}else{var M=this.x.redSqr(),B=this.y.redSqr(),P=B.redSqr(),L=this.x.redAdd(B).redSqr().redISub(M).redISub(P);L=L.redIAdd(L);var F=M.redAdd(M).redIAdd(M),U=F.redSqr(),q=P.redIAdd(P);q=q.redIAdd(q),q=q.redIAdd(q),e=U.redISub(L).redISub(L),n=F.redMul(L.redISub(e)).redISub(q),o=this.y.redMul(this.z),o=o.redIAdd(o)}return this.curve.jpoint(e,n,o)};JPoint$1.prototype._threeDbl=function(){var e,n,o;if(this.zOne){var c=this.x.redSqr(),a=this.y.redSqr(),l=a.redSqr(),b=this.x.redAdd(a).redSqr().redISub(c).redISub(l);b=b.redIAdd(b);var v=c.redAdd(c).redIAdd(c).redIAdd(this.curve.a),A=v.redSqr().redISub(b).redISub(b);e=A;var S=l.redIAdd(l);S=S.redIAdd(S),S=S.redIAdd(S),n=v.redMul(b.redISub(A)).redISub(S),o=this.y.redAdd(this.y)}else{var M=this.z.redSqr(),B=this.y.redSqr(),P=this.x.redMul(B),L=this.x.redSub(M).redMul(this.x.redAdd(M));L=L.redAdd(L).redIAdd(L);var F=P.redIAdd(P);F=F.redIAdd(F);var U=F.redAdd(F);e=L.redSqr().redISub(U),o=this.y.redAdd(this.z).redSqr().redISub(B).redISub(M);var q=B.redSqr();q=q.redIAdd(q),q=q.redIAdd(q),q=q.redIAdd(q),n=L.redMul(F.redISub(e)).redISub(q)}return this.curve.jpoint(e,n,o)};JPoint$1.prototype._dbl=function(){var e=this.curve.a,n=this.x,o=this.y,c=this.z,a=c.redSqr().redSqr(),l=n.redSqr(),b=o.redSqr(),v=l.redAdd(l).redIAdd(l).redIAdd(e.redMul(a)),A=n.redAdd(n);A=A.redIAdd(A);var S=A.redMul(b),M=v.redSqr().redISub(S.redAdd(S)),B=S.redISub(M),P=b.redSqr();P=P.redIAdd(P),P=P.redIAdd(P),P=P.redIAdd(P);var L=v.redMul(B).redISub(P),F=o.redAdd(o).redMul(c);return this.curve.jpoint(M,L,F)};JPoint$1.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),n=this.y.redSqr(),o=this.z.redSqr(),c=n.redSqr(),a=e.redAdd(e).redIAdd(e),l=a.redSqr(),b=this.x.redAdd(n).redSqr().redISub(e).redISub(c);b=b.redIAdd(b),b=b.redAdd(b).redIAdd(b),b=b.redISub(l);var v=b.redSqr(),A=c.redIAdd(c);A=A.redIAdd(A),A=A.redIAdd(A),A=A.redIAdd(A);var S=a.redIAdd(b).redSqr().redISub(l).redISub(v).redISub(A),M=n.redMul(S);M=M.redIAdd(M),M=M.redIAdd(M);var B=this.x.redMul(v).redISub(M);B=B.redIAdd(B),B=B.redIAdd(B);var P=this.y.redMul(S.redMul(A.redISub(S)).redISub(b.redMul(v)));P=P.redIAdd(P),P=P.redIAdd(P),P=P.redIAdd(P);var L=this.z.redAdd(b).redSqr().redISub(o).redISub(v);return this.curve.jpoint(B,P,L)};JPoint$1.prototype.mul=function(e,n){return e=new BN$c(e,n),this.curve._wnafMul(this,e)};JPoint$1.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var n=this.z.redSqr(),o=e.z.redSqr();if(this.x.redMul(o).redISub(e.x.redMul(n)).cmpn(0)!==0)return!1;var c=n.redMul(this.z),a=o.redMul(e.z);return this.y.redMul(a).redISub(e.y.redMul(c)).cmpn(0)===0};JPoint$1.prototype.eqXToP=function(e){var n=this.z.redSqr(),o=e.toRed(this.curve.red).redMul(n);if(this.x.cmp(o)===0)return!0;for(var c=e.clone(),a=this.curve.redN.redMul(n);;){if(c.iadd(this.curve.n),c.cmp(this.curve.p)>=0)return!1;if(o.redIAdd(a),this.x.cmp(o)===0)return!0}};JPoint$1.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};JPoint$1.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var curve_1=createCommonjsModule(function(t,e){var n=e;n.base=base$8,n.short=short_1,n.mont=null,n.edwards=null}),curves_1=createCommonjsModule(function(t,e){var n=e,o=utils_1$1$1.assert;function c(b){b.type==="short"?this.curve=new curve_1.short(b):b.type==="edwards"?this.curve=new curve_1.edwards(b):this.curve=new curve_1.mont(b),this.g=this.curve.g,this.n=this.curve.n,this.hash=b.hash,o(this.g.validate(),"Invalid curve"),o(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}n.PresetCurve=c;function a(b,v){Object.defineProperty(n,b,{configurable:!0,enumerable:!0,get:function(){var A=new c(v);return Object.defineProperty(n,b,{configurable:!0,enumerable:!0,value:A}),A}})}a("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:hash$4.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),a("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:hash$4.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),a("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:hash$4.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),a("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:hash$4.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),a("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:hash$4.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),a("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:hash$4.sha256,gRed:!1,g:["9"]}),a("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:hash$4.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var l;try{l=null.crash()}catch{l=void 0}a("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:hash$4.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",l]})});function HmacDRBG$1(t){if(!(this instanceof HmacDRBG$1))return new HmacDRBG$1(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=utils_1$4.toArray(t.entropy,t.entropyEnc||"hex"),n=utils_1$4.toArray(t.nonce,t.nonceEnc||"hex"),o=utils_1$4.toArray(t.pers,t.persEnc||"hex");minimalisticAssert(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,n,o)}var hmacDrbg$1=HmacDRBG$1;HmacDRBG$1.prototype._init=function(e,n,o){var c=e.concat(n).concat(o);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var a=0;a<this.V.length;a++)this.K[a]=0,this.V[a]=1;this._update(c),this._reseed=1,this.reseedInterval=281474976710656};HmacDRBG$1.prototype._hmac=function(){return new hash$4.hmac(this.hash,this.K)};HmacDRBG$1.prototype._update=function(e){var n=this._hmac().update(this.V).update([0]);e&&(n=n.update(e)),this.K=n.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())};HmacDRBG$1.prototype.reseed=function(e,n,o,c){typeof n!="string"&&(c=o,o=n,n=null),e=utils_1$4.toArray(e,n),o=utils_1$4.toArray(o,c),minimalisticAssert(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(o||[])),this._reseed=1};HmacDRBG$1.prototype.generate=function(e,n,o,c){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof n!="string"&&(c=o,o=n,n=null),o&&(o=utils_1$4.toArray(o,c||"hex"),this._update(o));for(var a=[];a.length<e;)this.V=this._hmac().update(this.V).digest(),a=a.concat(this.V);var l=a.slice(0,e);return this._update(o),this._reseed++,utils_1$4.encode(l,n)};var assert$3$1=utils_1$1$1.assert;function KeyPair$3(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var key$3=KeyPair$3;KeyPair$3.fromPublic=function(e,n,o){return n instanceof KeyPair$3?n:new KeyPair$3(e,{pub:n,pubEnc:o})};KeyPair$3.fromPrivate=function(e,n,o){return n instanceof KeyPair$3?n:new KeyPair$3(e,{priv:n,privEnc:o})};KeyPair$3.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};KeyPair$3.prototype.getPublic=function(e,n){return typeof e=="string"&&(n=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),n?this.pub.encode(n,e):this.pub};KeyPair$3.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv};KeyPair$3.prototype._importPrivate=function(e,n){this.priv=new BN$c(e,n||16),this.priv=this.priv.umod(this.ec.curve.n)};KeyPair$3.prototype._importPublic=function(e,n){if(e.x||e.y){this.ec.curve.type==="mont"?assert$3$1(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&assert$3$1(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,n)};KeyPair$3.prototype.derive=function(e){return e.validate()||assert$3$1(e.validate(),"public point not validated"),e.mul(this.priv).getX()};KeyPair$3.prototype.sign=function(e,n,o){return this.ec.sign(e,this,n,o)};KeyPair$3.prototype.verify=function(e,n){return this.ec.verify(e,n,this)};KeyPair$3.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var assert$4$1=utils_1$1$1.assert;function Signature$3(t,e){if(t instanceof Signature$3)return t;this._importDER(t,e)||(assert$4$1(t.r&&t.s,"Signature without r or s"),this.r=new BN$c(t.r,16),this.s=new BN$c(t.s,16),t.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}var signature$2=Signature$3;function Position$1(){this.place=0}function getLength$1(t,e){var n=t[e.place++];if(!(n&128))return n;var o=n&15;if(o===0||o>4)return!1;for(var c=0,a=0,l=e.place;a<o;a++,l++)c<<=8,c|=t[l],c>>>=0;return c<=127?!1:(e.place=l,c)}function rmPadding$1(t){for(var e=0,n=t.length-1;!t[e]&&!(t[e+1]&128)&&e<n;)e++;return e===0?t:t.slice(e)}Signature$3.prototype._importDER=function(e,n){e=utils_1$1$1.toArray(e,n);var o=new Position$1;if(e[o.place++]!==48)return!1;var c=getLength$1(e,o);if(c===!1||c+o.place!==e.length||e[o.place++]!==2)return!1;var a=getLength$1(e,o);if(a===!1)return!1;var l=e.slice(o.place,a+o.place);if(o.place+=a,e[o.place++]!==2)return!1;var b=getLength$1(e,o);if(b===!1||e.length!==b+o.place)return!1;var v=e.slice(o.place,b+o.place);if(l[0]===0)if(l[1]&128)l=l.slice(1);else return!1;if(v[0]===0)if(v[1]&128)v=v.slice(1);else return!1;return this.r=new BN$c(l),this.s=new BN$c(v),this.recoveryParam=null,!0};function constructLength$1(t,e){if(e<128){t.push(e);return}var n=1+(Math.log(e)/Math.LN2>>>3);for(t.push(n|128);--n;)t.push(e>>>(n<<3)&255);t.push(e)}Signature$3.prototype.toDER=function(e){var n=this.r.toArray(),o=this.s.toArray();for(n[0]&128&&(n=[0].concat(n)),o[0]&128&&(o=[0].concat(o)),n=rmPadding$1(n),o=rmPadding$1(o);!o[0]&&!(o[1]&128);)o=o.slice(1);var c=[2];constructLength$1(c,n.length),c=c.concat(n),c.push(2),constructLength$1(c,o.length);var a=c.concat(o),l=[48];return constructLength$1(l,a.length),l=l.concat(a),utils_1$1$1.encode(l,e)};var rand=function(){throw new Error("unsupported")},assert$5$1=utils_1$1$1.assert;function EC(t){if(!(this instanceof EC))return new EC(t);typeof t=="string"&&(assert$5$1(Object.prototype.hasOwnProperty.call(curves_1,t),"Unknown curve "+t),t=curves_1[t]),t instanceof curves_1.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}var ec$1=EC;EC.prototype.keyPair=function(e){return new key$3(this,e)};EC.prototype.keyFromPrivate=function(e,n){return key$3.fromPrivate(this,e,n)};EC.prototype.keyFromPublic=function(e,n){return key$3.fromPublic(this,e,n)};EC.prototype.genKeyPair=function(e){e||(e={});for(var n=new hmacDrbg$1({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||rand(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),o=this.n.byteLength(),c=this.n.sub(new BN$c(2));;){var a=new BN$c(n.generate(o));if(!(a.cmp(c)>0))return a.iaddn(1),this.keyFromPrivate(a)}};EC.prototype._truncateToN=function(e,n){var o=e.byteLength()*8-this.n.bitLength();return o>0&&(e=e.ushrn(o)),!n&&e.cmp(this.n)>=0?e.sub(this.n):e};EC.prototype.sign=function(e,n,o,c){typeof o=="object"&&(c=o,o=null),c||(c={}),n=this.keyFromPrivate(n,o),e=this._truncateToN(new BN$c(e,16));for(var a=this.n.byteLength(),l=n.getPrivate().toArray("be",a),b=e.toArray("be",a),v=new hmacDrbg$1({hash:this.hash,entropy:l,nonce:b,pers:c.pers,persEnc:c.persEnc||"utf8"}),A=this.n.sub(new BN$c(1)),S=0;;S++){var M=c.k?c.k(S):new BN$c(v.generate(this.n.byteLength()));if(M=this._truncateToN(M,!0),!(M.cmpn(1)<=0||M.cmp(A)>=0)){var B=this.g.mul(M);if(!B.isInfinity()){var P=B.getX(),L=P.umod(this.n);if(L.cmpn(0)!==0){var F=M.invm(this.n).mul(L.mul(n.getPrivate()).iadd(e));if(F=F.umod(this.n),F.cmpn(0)!==0){var U=(B.getY().isOdd()?1:0)|(P.cmp(L)!==0?2:0);return c.canonical&&F.cmp(this.nh)>0&&(F=this.n.sub(F),U^=1),new signature$2({r:L,s:F,recoveryParam:U})}}}}}};EC.prototype.verify=function(e,n,o,c){e=this._truncateToN(new BN$c(e,16)),o=this.keyFromPublic(o,c),n=new signature$2(n,"hex");var a=n.r,l=n.s;if(a.cmpn(1)<0||a.cmp(this.n)>=0||l.cmpn(1)<0||l.cmp(this.n)>=0)return!1;var b=l.invm(this.n),v=b.mul(e).umod(this.n),A=b.mul(a).umod(this.n),S;return this.curve._maxwellTrick?(S=this.g.jmulAdd(v,o.getPublic(),A),S.isInfinity()?!1:S.eqXToP(a)):(S=this.g.mulAdd(v,o.getPublic(),A),S.isInfinity()?!1:S.getX().umod(this.n).cmp(a)===0)};EC.prototype.recoverPubKey=function(t,e,n,o){assert$5$1((3&n)===n,"The recovery param is more than two bits"),e=new signature$2(e,o);var c=this.n,a=new BN$c(t),l=e.r,b=e.s,v=n&1,A=n>>1;if(l.cmp(this.curve.p.umod(this.curve.n))>=0&&A)throw new Error("Unable to find sencond key candinate");A?l=this.curve.pointFromX(l.add(this.curve.n),v):l=this.curve.pointFromX(l,v);var S=e.r.invm(c),M=c.sub(a).mul(S).umod(c),B=b.mul(S).umod(c);return this.g.mulAdd(M,l,B)};EC.prototype.getKeyRecoveryParam=function(t,e,n,o){if(e=new signature$2(e,o),e.recoveryParam!==null)return e.recoveryParam;for(var c=0;c<4;c++){var a;try{a=this.recoverPubKey(t,e,c)}catch{continue}if(a.eq(n))return c}throw new Error("Unable to find valid recovery factor")};var elliptic_1=createCommonjsModule(function(t,e){var n=e;n.version="6.5.4",n.utils=utils_1$1$1,n.rand=function(){throw new Error("unsupported")},n.curve=curve_1,n.curves=curves_1,n.ec=ec$1,n.eddsa=null}),EC$1=elliptic_1.ec;const version$g="signing-key/5.7.0",logger$h=new Logger(version$g);let _curve=null;function getCurve(){return _curve||(_curve=new EC$1("secp256k1")),_curve}class SigningKey{constructor(e){defineReadOnly(this,"curve","secp256k1"),defineReadOnly(this,"privateKey",hexlify(e)),hexDataLength(this.privateKey)!==32&&logger$h.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");const n=getCurve().keyFromPrivate(arrayify(this.privateKey));defineReadOnly(this,"publicKey","0x"+n.getPublic(!1,"hex")),defineReadOnly(this,"compressedPublicKey","0x"+n.getPublic(!0,"hex")),defineReadOnly(this,"_isSigningKey",!0)}_addPoint(e){const n=getCurve().keyFromPublic(arrayify(this.publicKey)),o=getCurve().keyFromPublic(arrayify(e));return"0x"+n.pub.add(o.pub).encodeCompressed("hex")}signDigest(e){const n=getCurve().keyFromPrivate(arrayify(this.privateKey)),o=arrayify(e);o.length!==32&&logger$h.throwArgumentError("bad digest length","digest",e);const c=n.sign(o,{canonical:!0});return splitSignature({recoveryParam:c.recoveryParam,r:hexZeroPad("0x"+c.r.toString(16),32),s:hexZeroPad("0x"+c.s.toString(16),32)})}computeSharedSecret(e){const n=getCurve().keyFromPrivate(arrayify(this.privateKey)),o=getCurve().keyFromPublic(arrayify(computePublicKey(e)));return hexZeroPad("0x"+n.derive(o.getPublic()).toString(16),32)}static isSigningKey(e){return!!(e&&e._isSigningKey)}}function recoverPublicKey(t,e){const n=splitSignature(e),o={r:arrayify(n.r),s:arrayify(n.s)};return"0x"+getCurve().recoverPubKey(arrayify(t),o,n.recoveryParam).encode("hex",!1)}function computePublicKey(t,e){const n=arrayify(t);if(n.length===32){const o=new SigningKey(n);return e?"0x"+getCurve().keyFromPrivate(n).getPublic(!0,"hex"):o.publicKey}else{if(n.length===33)return e?hexlify(n):"0x"+getCurve().keyFromPublic(n).getPublic(!1,"hex");if(n.length===65)return e?"0x"+getCurve().keyFromPublic(n).getPublic(!0,"hex"):hexlify(n)}return logger$h.throwArgumentError("invalid public or private key","key","[REDACTED]")}const version$f="transactions/5.7.0",logger$g=new Logger(version$f);var TransactionTypes;(function(t){t[t.legacy=0]="legacy",t[t.eip2930=1]="eip2930",t[t.eip1559=2]="eip1559"})(TransactionTypes||(TransactionTypes={}));function handleAddress(t){return t==="0x"?null:getAddress(t)}function handleNumber(t){return t==="0x"?Zero$1:BigNumber.from(t)}const transactionFields=[{name:"nonce",maxLength:32,numeric:!0},{name:"gasPrice",maxLength:32,numeric:!0},{name:"gasLimit",maxLength:32,numeric:!0},{name:"to",length:20},{name:"value",maxLength:32,numeric:!0},{name:"data"}],allowedTransactionKeys$1={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,type:!0,value:!0};function computeAddress(t){const e=computePublicKey(t);return getAddress(hexDataSlice(keccak256(hexDataSlice(e,1)),12))}function recoverAddress(t,e){return computeAddress(recoverPublicKey(arrayify(t),e))}function formatNumber(t,e){const n=stripZeros(BigNumber.from(t).toHexString());return n.length>32&&logger$g.throwArgumentError("invalid length for "+e,"transaction:"+e,t),n}function accessSetify(t,e){return{address:getAddress(t),storageKeys:(e||[]).map((n,o)=>(hexDataLength(n)!==32&&logger$g.throwArgumentError("invalid access list storageKey",`accessList[${t}:${o}]`,n),n.toLowerCase()))}}function accessListify(t){if(Array.isArray(t))return t.map((n,o)=>Array.isArray(n)?(n.length>2&&logger$g.throwArgumentError("access list expected to be [ address, storageKeys[] ]",`value[${o}]`,n),accessSetify(n[0],n[1])):accessSetify(n.address,n.storageKeys));const e=Object.keys(t).map(n=>{const o=t[n].reduce((c,a)=>(c[a]=!0,c),{});return accessSetify(n,Object.keys(o).sort())});return e.sort((n,o)=>n.address.localeCompare(o.address)),e}function formatAccessList(t){return accessListify(t).map(e=>[e.address,e.storageKeys])}function _serializeEip1559(t,e){if(t.gasPrice!=null){const o=BigNumber.from(t.gasPrice),c=BigNumber.from(t.maxFeePerGas||0);o.eq(c)||logger$g.throwArgumentError("mismatch EIP-1559 gasPrice != maxFeePerGas","tx",{gasPrice:o,maxFeePerGas:c})}const n=[formatNumber(t.chainId||0,"chainId"),formatNumber(t.nonce||0,"nonce"),formatNumber(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),formatNumber(t.maxFeePerGas||0,"maxFeePerGas"),formatNumber(t.gasLimit||0,"gasLimit"),t.to!=null?getAddress(t.to):"0x",formatNumber(t.value||0,"value"),t.data||"0x",formatAccessList(t.accessList||[])];if(e){const o=splitSignature(e);n.push(formatNumber(o.recoveryParam,"recoveryParam")),n.push(stripZeros(o.r)),n.push(stripZeros(o.s))}return hexConcat(["0x02",encode$n(n)])}function _serializeEip2930(t,e){const n=[formatNumber(t.chainId||0,"chainId"),formatNumber(t.nonce||0,"nonce"),formatNumber(t.gasPrice||0,"gasPrice"),formatNumber(t.gasLimit||0,"gasLimit"),t.to!=null?getAddress(t.to):"0x",formatNumber(t.value||0,"value"),t.data||"0x",formatAccessList(t.accessList||[])];if(e){const o=splitSignature(e);n.push(formatNumber(o.recoveryParam,"recoveryParam")),n.push(stripZeros(o.r)),n.push(stripZeros(o.s))}return hexConcat(["0x01",encode$n(n)])}function _serialize(t,e){checkProperties(t,allowedTransactionKeys$1);const n=[];transactionFields.forEach(function(l){let b=t[l.name]||[];const v={};l.numeric&&(v.hexPad="left"),b=arrayify(hexlify(b,v)),l.length&&b.length!==l.length&&b.length>0&&logger$g.throwArgumentError("invalid length for "+l.name,"transaction:"+l.name,b),l.maxLength&&(b=stripZeros(b),b.length>l.maxLength&&logger$g.throwArgumentError("invalid length for "+l.name,"transaction:"+l.name,b)),n.push(hexlify(b))});let o=0;if(t.chainId!=null?(o=t.chainId,typeof o!="number"&&logger$g.throwArgumentError("invalid transaction.chainId","transaction",t)):e&&!isBytesLike(e)&&e.v>28&&(o=Math.floor((e.v-35)/2)),o!==0&&(n.push(hexlify(o)),n.push("0x"),n.push("0x")),!e)return encode$n(n);const c=splitSignature(e);let a=27+c.recoveryParam;return o!==0?(n.pop(),n.pop(),n.pop(),a+=o*2+8,c.v>28&&c.v!==a&&logger$g.throwArgumentError("transaction.chainId/signature.v mismatch","signature",e)):c.v!==a&&logger$g.throwArgumentError("transaction.chainId/signature.v mismatch","signature",e),n.push(hexlify(a)),n.push(stripZeros(arrayify(c.r))),n.push(stripZeros(arrayify(c.s))),encode$n(n)}function serialize$1(t,e){if(t.type==null||t.type===0)return t.accessList!=null&&logger$g.throwArgumentError("untyped transactions do not support accessList; include type: 1","transaction",t),_serialize(t,e);switch(t.type){case 1:return _serializeEip2930(t,e);case 2:return _serializeEip1559(t,e)}return logger$g.throwError(`unsupported transaction type: ${t.type}`,Logger.errors.UNSUPPORTED_OPERATION,{operation:"serializeTransaction",transactionType:t.type})}function _parseEipSignature(t,e,n){try{const o=handleNumber(e[0]).toNumber();if(o!==0&&o!==1)throw new Error("bad recid");t.v=o}catch{logger$g.throwArgumentError("invalid v for transaction type: 1","v",e[0])}t.r=hexZeroPad(e[1],32),t.s=hexZeroPad(e[2],32);try{const o=keccak256(n(t));t.from=recoverAddress(o,{r:t.r,s:t.s,recoveryParam:t.v})}catch{}}function _parseEip1559(t){const e=decode$m(t.slice(1));e.length!==9&&e.length!==12&&logger$g.throwArgumentError("invalid component count for transaction type: 2","payload",hexlify(t));const n=handleNumber(e[2]),o=handleNumber(e[3]),c={type:2,chainId:handleNumber(e[0]).toNumber(),nonce:handleNumber(e[1]).toNumber(),maxPriorityFeePerGas:n,maxFeePerGas:o,gasPrice:null,gasLimit:handleNumber(e[4]),to:handleAddress(e[5]),value:handleNumber(e[6]),data:e[7],accessList:accessListify(e[8])};return e.length===9||(c.hash=keccak256(t),_parseEipSignature(c,e.slice(9),_serializeEip1559)),c}function _parseEip2930(t){const e=decode$m(t.slice(1));e.length!==8&&e.length!==11&&logger$g.throwArgumentError("invalid component count for transaction type: 1","payload",hexlify(t));const n={type:1,chainId:handleNumber(e[0]).toNumber(),nonce:handleNumber(e[1]).toNumber(),gasPrice:handleNumber(e[2]),gasLimit:handleNumber(e[3]),to:handleAddress(e[4]),value:handleNumber(e[5]),data:e[6],accessList:accessListify(e[7])};return e.length===8||(n.hash=keccak256(t),_parseEipSignature(n,e.slice(8),_serializeEip2930)),n}function _parse(t){const e=decode$m(t);e.length!==9&&e.length!==6&&logger$g.throwArgumentError("invalid raw transaction","rawTransaction",t);const n={nonce:handleNumber(e[0]).toNumber(),gasPrice:handleNumber(e[1]),gasLimit:handleNumber(e[2]),to:handleAddress(e[3]),value:handleNumber(e[4]),data:e[5],chainId:0};if(e.length===6)return n;try{n.v=BigNumber.from(e[6]).toNumber()}catch{return n}if(n.r=hexZeroPad(e[7],32),n.s=hexZeroPad(e[8],32),BigNumber.from(n.r).isZero()&&BigNumber.from(n.s).isZero())n.chainId=n.v,n.v=0;else{n.chainId=Math.floor((n.v-35)/2),n.chainId<0&&(n.chainId=0);let o=n.v-27;const c=e.slice(0,6);n.chainId!==0&&(c.push(hexlify(n.chainId)),c.push("0x"),c.push("0x"),o-=n.chainId*2+8);const a=keccak256(encode$n(c));try{n.from=recoverAddress(a,{r:hexlify(n.r),s:hexlify(n.s),recoveryParam:o})}catch{}n.hash=keccak256(t)}return n.type=null,n}function parse$1(t){const e=arrayify(t);if(e[0]>127)return _parse(e);switch(e[0]){case 1:return _parseEip2930(e);case 2:return _parseEip1559(e)}return logger$g.throwError(`unsupported transaction type: ${e[0]}`,Logger.errors.UNSUPPORTED_OPERATION,{operation:"parseTransaction",transactionType:e[0]})}const version$e="contracts/5.7.0";var __awaiter$6=function(t,e,n,o){function c(a){return a instanceof n?a:new n(function(l){l(a)})}return new(n||(n=Promise))(function(a,l){function b(S){try{A(o.next(S))}catch(M){l(M)}}function v(S){try{A(o.throw(S))}catch(M){l(M)}}function A(S){S.done?a(S.value):c(S.value).then(b,v)}A((o=o.apply(t,e||[])).next())})};const logger$f=new Logger(version$e);function resolveName(t,e){return __awaiter$6(this,void 0,void 0,function*(){const n=yield e;typeof n!="string"&&logger$f.throwArgumentError("invalid address or ENS name","name",n);try{return getAddress(n)}catch{}t||logger$f.throwError("a provider or signer is needed to resolve ENS names",Logger.errors.UNSUPPORTED_OPERATION,{operation:"resolveName"});const o=yield t.resolveName(n);return o==null&&logger$f.throwArgumentError("resolver or addr is not configured for ENS name","name",n),o})}function resolveAddresses(t,e,n){return __awaiter$6(this,void 0,void 0,function*(){return Array.isArray(n)?yield Promise.all(n.map((o,c)=>resolveAddresses(t,Array.isArray(e)?e[c]:e[o.name],o))):n.type==="address"?yield resolveName(t,e):n.type==="tuple"?yield resolveAddresses(t,e,n.components):n.baseType==="array"?Array.isArray(e)?yield Promise.all(e.map(o=>resolveAddresses(t,o,n.arrayChildren))):Promise.reject(logger$f.makeError("invalid value for array",Logger.errors.INVALID_ARGUMENT,{argument:"value",value:e})):e})}function populateTransaction(t,e,n){return __awaiter$6(this,void 0,void 0,function*(){let o={};n.length===e.inputs.length+1&&typeof n[n.length-1]=="object"&&(o=shallowCopy(n.pop())),logger$f.checkArgumentCount(n.length,e.inputs.length,"passed to contract"),t.signer?o.from?o.from=resolveProperties({override:resolveName(t.signer,o.from),signer:t.signer.getAddress()}).then(A=>__awaiter$6(this,void 0,void 0,function*(){return getAddress(A.signer)!==A.override&&logger$f.throwError("Contract with a Signer cannot override from",Logger.errors.UNSUPPORTED_OPERATION,{operation:"overrides.from"}),A.override})):o.from=t.signer.getAddress():o.from&&(o.from=resolveName(t.provider,o.from));const c=yield resolveProperties({args:resolveAddresses(t.signer||t.provider,n,e.inputs),address:t.resolvedAddress,overrides:resolveProperties(o)||{}}),a=t.interface.encodeFunctionData(e,c.args),l={data:a,to:c.address},b=c.overrides;if(b.nonce!=null&&(l.nonce=BigNumber.from(b.nonce).toNumber()),b.gasLimit!=null&&(l.gasLimit=BigNumber.from(b.gasLimit)),b.gasPrice!=null&&(l.gasPrice=BigNumber.from(b.gasPrice)),b.maxFeePerGas!=null&&(l.maxFeePerGas=BigNumber.from(b.maxFeePerGas)),b.maxPriorityFeePerGas!=null&&(l.maxPriorityFeePerGas=BigNumber.from(b.maxPriorityFeePerGas)),b.from!=null&&(l.from=b.from),b.type!=null&&(l.type=b.type),b.accessList!=null&&(l.accessList=accessListify(b.accessList)),l.gasLimit==null&&e.gas!=null){let A=21e3;const S=arrayify(a);for(let M=0;M<S.length;M++)A+=4,S[M]&&(A+=64);l.gasLimit=BigNumber.from(e.gas).add(A)}if(b.value){const A=BigNumber.from(b.value);!A.isZero()&&!e.payable&&logger$f.throwError("non-payable method cannot override value",Logger.errors.UNSUPPORTED_OPERATION,{operation:"overrides.value",value:o.value}),l.value=A}b.customData&&(l.customData=shallowCopy(b.customData)),b.ccipReadEnabled&&(l.ccipReadEnabled=!!b.ccipReadEnabled),delete o.nonce,delete o.gasLimit,delete o.gasPrice,delete o.from,delete o.value,delete o.type,delete o.accessList,delete o.maxFeePerGas,delete o.maxPriorityFeePerGas,delete o.customData,delete o.ccipReadEnabled;const v=Object.keys(o).filter(A=>o[A]!=null);return v.length&&logger$f.throwError(`cannot override ${v.map(A=>JSON.stringify(A)).join(",")}`,Logger.errors.UNSUPPORTED_OPERATION,{operation:"overrides",overrides:v}),l})}function buildPopulate(t,e){return function(...n){return populateTransaction(t,e,n)}}function buildEstimate(t,e){const n=t.signer||t.provider;return function(...o){return __awaiter$6(this,void 0,void 0,function*(){n||logger$f.throwError("estimate require a provider or signer",Logger.errors.UNSUPPORTED_OPERATION,{operation:"estimateGas"});const c=yield populateTransaction(t,e,o);return yield n.estimateGas(c)})}}function addContractWait(t,e){const n=e.wait.bind(e);e.wait=o=>n(o).then(c=>(c.events=c.logs.map(a=>{let l=deepCopy(a),b=null;try{b=t.interface.parseLog(a)}catch{}return b&&(l.args=b.args,l.decode=(v,A)=>t.interface.decodeEventLog(b.eventFragment,v,A),l.event=b.name,l.eventSignature=b.signature),l.removeListener=()=>t.provider,l.getBlock=()=>t.provider.getBlock(c.blockHash),l.getTransaction=()=>t.provider.getTransaction(c.transactionHash),l.getTransactionReceipt=()=>Promise.resolve(c),l}),c))}function buildCall(t,e,n){const o=t.signer||t.provider;return function(...c){return __awaiter$6(this,void 0,void 0,function*(){let a;if(c.length===e.inputs.length+1&&typeof c[c.length-1]=="object"){const v=shallowCopy(c.pop());v.blockTag!=null&&(a=yield v.blockTag),delete v.blockTag,c.push(v)}t.deployTransaction!=null&&(yield t._deployed(a));const l=yield populateTransaction(t,e,c),b=yield o.call(l,a);try{let v=t.interface.decodeFunctionResult(e,b);return n&&e.outputs.length===1&&(v=v[0]),v}catch(v){throw v.code===Logger.errors.CALL_EXCEPTION&&(v.address=t.address,v.args=c,v.transaction=l),v}})}}function buildSend(t,e){return function(...n){return __awaiter$6(this,void 0,void 0,function*(){t.signer||logger$f.throwError("sending a transaction requires a signer",Logger.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction"}),t.deployTransaction!=null&&(yield t._deployed());const o=yield populateTransaction(t,e,n),c=yield t.signer.sendTransaction(o);return addContractWait(t,c),c})}}function buildDefault(t,e,n){return e.constant?buildCall(t,e,n):buildSend(t,e)}function getEventTag$1(t){return t.address&&(t.topics==null||t.topics.length===0)?"*":(t.address||"*")+"@"+(t.topics?t.topics.map(e=>Array.isArray(e)?e.join("|"):e).join(":"):"")}class RunningEvent{constructor(e,n){defineReadOnly(this,"tag",e),defineReadOnly(this,"filter",n),this._listeners=[]}addListener(e,n){this._listeners.push({listener:e,once:n})}removeListener(e){let n=!1;this._listeners=this._listeners.filter(o=>n||o.listener!==e?!0:(n=!0,!1))}removeAllListeners(){this._listeners=[]}listeners(){return this._listeners.map(e=>e.listener)}listenerCount(){return this._listeners.length}run(e){const n=this.listenerCount();return this._listeners=this._listeners.filter(o=>{const c=e.slice();return setTimeout(()=>{o.listener.apply(this,c)},0),!o.once}),n}prepareEvent(e){}getEmit(e){return[e]}}class ErrorRunningEvent extends RunningEvent{constructor(){super("error",null)}}class FragmentRunningEvent extends RunningEvent{constructor(e,n,o,c){const a={address:e};let l=n.getEventTopic(o);c?(l!==c[0]&&logger$f.throwArgumentError("topic mismatch","topics",c),a.topics=c.slice()):a.topics=[l],super(getEventTag$1(a),a),defineReadOnly(this,"address",e),defineReadOnly(this,"interface",n),defineReadOnly(this,"fragment",o)}prepareEvent(e){super.prepareEvent(e),e.event=this.fragment.name,e.eventSignature=this.fragment.format(),e.decode=(n,o)=>this.interface.decodeEventLog(this.fragment,n,o);try{e.args=this.interface.decodeEventLog(this.fragment,e.data,e.topics)}catch(n){e.args=null,e.decodeError=n}}getEmit(e){const n=checkResultErrors(e.args);if(n.length)throw n[0].error;const o=(e.args||[]).slice();return o.push(e),o}}class WildcardRunningEvent extends RunningEvent{constructor(e,n){super("*",{address:e}),defineReadOnly(this,"address",e),defineReadOnly(this,"interface",n)}prepareEvent(e){super.prepareEvent(e);try{const n=this.interface.parseLog(e);e.event=n.name,e.eventSignature=n.signature,e.decode=(o,c)=>this.interface.decodeEventLog(n.eventFragment,o,c),e.args=n.args}catch{}}}class BaseContract{constructor(e,n,o){defineReadOnly(this,"interface",getStatic(new.target,"getInterface")(n)),o==null?(defineReadOnly(this,"provider",null),defineReadOnly(this,"signer",null)):Signer.isSigner(o)?(defineReadOnly(this,"provider",o.provider||null),defineReadOnly(this,"signer",o)):Provider.isProvider(o)?(defineReadOnly(this,"provider",o),defineReadOnly(this,"signer",null)):logger$f.throwArgumentError("invalid signer or provider","signerOrProvider",o),defineReadOnly(this,"callStatic",{}),defineReadOnly(this,"estimateGas",{}),defineReadOnly(this,"functions",{}),defineReadOnly(this,"populateTransaction",{}),defineReadOnly(this,"filters",{});{const l={};Object.keys(this.interface.events).forEach(b=>{const v=this.interface.events[b];defineReadOnly(this.filters,b,(...A)=>({address:this.address,topics:this.interface.encodeFilterTopics(v,A)})),l[v.name]||(l[v.name]=[]),l[v.name].push(b)}),Object.keys(l).forEach(b=>{const v=l[b];v.length===1?defineReadOnly(this.filters,b,this.filters[v[0]]):logger$f.warn(`Duplicate definition of ${b} (${v.join(", ")})`)})}if(defineReadOnly(this,"_runningEvents",{}),defineReadOnly(this,"_wrappedEmits",{}),e==null&&logger$f.throwArgumentError("invalid contract address or ENS name","addressOrName",e),defineReadOnly(this,"address",e),this.provider)defineReadOnly(this,"resolvedAddress",resolveName(this.provider,e));else try{defineReadOnly(this,"resolvedAddress",Promise.resolve(getAddress(e)))}catch{logger$f.throwError("provider is required to use ENS name as contract address",Logger.errors.UNSUPPORTED_OPERATION,{operation:"new Contract"})}this.resolvedAddress.catch(l=>{});const c={},a={};Object.keys(this.interface.functions).forEach(l=>{const b=this.interface.functions[l];if(a[l]){logger$f.warn(`Duplicate ABI entry for ${JSON.stringify(l)}`);return}a[l]=!0;{const v=b.name;c[`%${v}`]||(c[`%${v}`]=[]),c[`%${v}`].push(l)}this[l]==null&&defineReadOnly(this,l,buildDefault(this,b,!0)),this.functions[l]==null&&defineReadOnly(this.functions,l,buildDefault(this,b,!1)),this.callStatic[l]==null&&defineReadOnly(this.callStatic,l,buildCall(this,b,!0)),this.populateTransaction[l]==null&&defineReadOnly(this.populateTransaction,l,buildPopulate(this,b)),this.estimateGas[l]==null&&defineReadOnly(this.estimateGas,l,buildEstimate(this,b))}),Object.keys(c).forEach(l=>{const b=c[l];if(b.length>1)return;l=l.substring(1);const v=b[0];try{this[l]==null&&defineReadOnly(this,l,this[v])}catch{}this.functions[l]==null&&defineReadOnly(this.functions,l,this.functions[v]),this.callStatic[l]==null&&defineReadOnly(this.callStatic,l,this.callStatic[v]),this.populateTransaction[l]==null&&defineReadOnly(this.populateTransaction,l,this.populateTransaction[v]),this.estimateGas[l]==null&&defineReadOnly(this.estimateGas,l,this.estimateGas[v])})}static getContractAddress(e){return getContractAddress(e)}static getInterface(e){return Interface.isInterface(e)?e:new Interface(e)}deployed(){return this._deployed()}_deployed(e){return this._deployedPromise||(this.deployTransaction?this._deployedPromise=this.deployTransaction.wait().then(()=>this):this._deployedPromise=this.provider.getCode(this.address,e).then(n=>(n==="0x"&&logger$f.throwError("contract not deployed",Logger.errors.UNSUPPORTED_OPERATION,{contractAddress:this.address,operation:"getDeployed"}),this))),this._deployedPromise}fallback(e){this.signer||logger$f.throwError("sending a transactions require a signer",Logger.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction(fallback)"});const n=shallowCopy(e||{});return["from","to"].forEach(function(o){n[o]!=null&&logger$f.throwError("cannot override "+o,Logger.errors.UNSUPPORTED_OPERATION,{operation:o})}),n.to=this.resolvedAddress,this.deployed().then(()=>this.signer.sendTransaction(n))}connect(e){typeof e=="string"&&(e=new VoidSigner(e,this.provider));const n=new this.constructor(this.address,this.interface,e);return this.deployTransaction&&defineReadOnly(n,"deployTransaction",this.deployTransaction),n}attach(e){return new this.constructor(e,this.interface,this.signer||this.provider)}static isIndexed(e){return Indexed.isIndexed(e)}_normalizeRunningEvent(e){return this._runningEvents[e.tag]?this._runningEvents[e.tag]:e}_getRunningEvent(e){if(typeof e=="string"){if(e==="error")return this._normalizeRunningEvent(new ErrorRunningEvent);if(e==="event")return this._normalizeRunningEvent(new RunningEvent("event",null));if(e==="*")return this._normalizeRunningEvent(new WildcardRunningEvent(this.address,this.interface));const n=this.interface.getEvent(e);return this._normalizeRunningEvent(new FragmentRunningEvent(this.address,this.interface,n))}if(e.topics&&e.topics.length>0){try{const o=e.topics[0];if(typeof o!="string")throw new Error("invalid topic");const c=this.interface.getEvent(o);return this._normalizeRunningEvent(new FragmentRunningEvent(this.address,this.interface,c,e.topics))}catch{}const n={address:this.address,topics:e.topics};return this._normalizeRunningEvent(new RunningEvent(getEventTag$1(n),n))}return this._normalizeRunningEvent(new WildcardRunningEvent(this.address,this.interface))}_checkRunningEvents(e){if(e.listenerCount()===0){delete this._runningEvents[e.tag];const n=this._wrappedEmits[e.tag];n&&e.filter&&(this.provider.off(e.filter,n),delete this._wrappedEmits[e.tag])}}_wrapEvent(e,n,o){const c=deepCopy(n);return c.removeListener=()=>{o&&(e.removeListener(o),this._checkRunningEvents(e))},c.getBlock=()=>this.provider.getBlock(n.blockHash),c.getTransaction=()=>this.provider.getTransaction(n.transactionHash),c.getTransactionReceipt=()=>this.provider.getTransactionReceipt(n.transactionHash),e.prepareEvent(c),c}_addEventListener(e,n,o){if(this.provider||logger$f.throwError("events require a provider or a signer with a provider",Logger.errors.UNSUPPORTED_OPERATION,{operation:"once"}),e.addListener(n,o),this._runningEvents[e.tag]=e,!this._wrappedEmits[e.tag]){const c=a=>{let l=this._wrapEvent(e,a,n);if(l.decodeError==null)try{const b=e.getEmit(l);this.emit(e.filter,...b)}catch(b){l.decodeError=b.error}e.filter!=null&&this.emit("event",l),l.decodeError!=null&&this.emit("error",l.decodeError,l)};this._wrappedEmits[e.tag]=c,e.filter!=null&&this.provider.on(e.filter,c)}}queryFilter(e,n,o){const c=this._getRunningEvent(e),a=shallowCopy(c.filter);return typeof n=="string"&&isHexString(n,32)?(o!=null&&logger$f.throwArgumentError("cannot specify toBlock with blockhash","toBlock",o),a.blockHash=n):(a.fromBlock=n??0,a.toBlock=o??"latest"),this.provider.getLogs(a).then(l=>l.map(b=>this._wrapEvent(c,b,null)))}on(e,n){return this._addEventListener(this._getRunningEvent(e),n,!1),this}once(e,n){return this._addEventListener(this._getRunningEvent(e),n,!0),this}emit(e,...n){if(!this.provider)return!1;const o=this._getRunningEvent(e),c=o.run(n)>0;return this._checkRunningEvents(o),c}listenerCount(e){return this.provider?e==null?Object.keys(this._runningEvents).reduce((n,o)=>n+this._runningEvents[o].listenerCount(),0):this._getRunningEvent(e).listenerCount():0}listeners(e){if(!this.provider)return[];if(e==null){const n=[];for(let o in this._runningEvents)this._runningEvents[o].listeners().forEach(c=>{n.push(c)});return n}return this._getRunningEvent(e).listeners()}removeAllListeners(e){if(!this.provider)return this;if(e==null){for(const o in this._runningEvents){const c=this._runningEvents[o];c.removeAllListeners(),this._checkRunningEvents(c)}return this}const n=this._getRunningEvent(e);return n.removeAllListeners(),this._checkRunningEvents(n),this}off(e,n){if(!this.provider)return this;const o=this._getRunningEvent(e);return o.removeListener(n),this._checkRunningEvents(o),this}removeListener(e,n){return this.off(e,n)}}class Contract extends BaseContract{}class BaseX{constructor(e){defineReadOnly(this,"alphabet",e),defineReadOnly(this,"base",e.length),defineReadOnly(this,"_alphabetMap",{}),defineReadOnly(this,"_leader",e.charAt(0));for(let n=0;n<e.length;n++)this._alphabetMap[e.charAt(n)]=n}encode(e){let n=arrayify(e);if(n.length===0)return"";let o=[0];for(let a=0;a<n.length;++a){let l=n[a];for(let b=0;b<o.length;++b)l+=o[b]<<8,o[b]=l%this.base,l=l/this.base|0;for(;l>0;)o.push(l%this.base),l=l/this.base|0}let c="";for(let a=0;n[a]===0&&a<n.length-1;++a)c+=this._leader;for(let a=o.length-1;a>=0;--a)c+=this.alphabet[o[a]];return c}decode(e){if(typeof e!="string")throw new TypeError("Expected String");let n=[];if(e.length===0)return new Uint8Array(n);n.push(0);for(let o=0;o<e.length;o++){let c=this._alphabetMap[e[o]];if(c===void 0)throw new Error("Non-base"+this.base+" character");let a=c;for(let l=0;l<n.length;++l)a+=n[l]*this.base,n[l]=a&255,a>>=8;for(;a>0;)n.push(a&255),a>>=8}for(let o=0;e[o]===this._leader&&o<e.length-1;++o)n.push(0);return arrayify(new Uint8Array(n.reverse()))}}new BaseX("abcdefghijklmnopqrstuvwxyz234567");const Base58=new BaseX("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");var SupportedAlgorithm;(function(t){t.sha256="sha256",t.sha512="sha512"})(SupportedAlgorithm||(SupportedAlgorithm={}));const version$d="sha2/5.7.0",logger$e=new Logger(version$d);function ripemd160$2(t){return"0x"+hash$4.ripemd160().update(arrayify(t)).digest("hex")}function sha256$5(t){return"0x"+hash$4.sha256().update(arrayify(t)).digest("hex")}function computeHmac(t,e,n){return SupportedAlgorithm[t]||logger$e.throwError("unsupported algorithm "+t,Logger.errors.UNSUPPORTED_OPERATION,{operation:"hmac",algorithm:t}),"0x"+hash$4.hmac(hash$4[t],arrayify(e)).update(arrayify(n)).digest("hex")}function pbkdf2$4(t,e,n,o,c){t=arrayify(t),e=arrayify(e);let a,l=1;const b=new Uint8Array(o),v=new Uint8Array(e.length+4);v.set(e);let A,S;for(let M=1;M<=l;M++){v[e.length]=M>>24&255,v[e.length+1]=M>>16&255,v[e.length+2]=M>>8&255,v[e.length+3]=M&255;let B=arrayify(computeHmac(c,t,v));a||(a=B.length,S=new Uint8Array(a),l=Math.ceil(o/a),A=o-(l-1)*a),S.set(B);for(let F=1;F<n;F++){B=arrayify(computeHmac(c,t,B));for(let U=0;U<a;U++)S[U]^=B[U]}const P=(M-1)*a,L=M===l?A:a;b.set(arrayify(S).slice(0,L),P)}return hexlify(b)}const version$c="wordlists/5.7.0",logger$d=new Logger(version$c);class Wordlist{constructor(e){logger$d.checkAbstract(new.target,Wordlist),defineReadOnly(this,"locale",e)}split(e){return e.toLowerCase().split(/ +/g)}join(e){return e.join(" ")}static check(e){const n=[];for(let o=0;o<2048;o++){const c=e.getWord(o);if(o!==e.getWordIndex(c))return"0x";n.push(c)}return id(n.join(`
`)+`
`)}static register(e,n){n||(n=e.locale)}}const words="AbandonAbilityAbleAboutAboveAbsentAbsorbAbstractAbsurdAbuseAccessAccidentAccountAccuseAchieveAcidAcousticAcquireAcrossActActionActorActressActualAdaptAddAddictAddressAdjustAdmitAdultAdvanceAdviceAerobicAffairAffordAfraidAgainAgeAgentAgreeAheadAimAirAirportAisleAlarmAlbumAlcoholAlertAlienAllAlleyAllowAlmostAloneAlphaAlreadyAlsoAlterAlwaysAmateurAmazingAmongAmountAmusedAnalystAnchorAncientAngerAngleAngryAnimalAnkleAnnounceAnnualAnotherAnswerAntennaAntiqueAnxietyAnyApartApologyAppearAppleApproveAprilArchArcticAreaArenaArgueArmArmedArmorArmyAroundArrangeArrestArriveArrowArtArtefactArtistArtworkAskAspectAssaultAssetAssistAssumeAsthmaAthleteAtomAttackAttendAttitudeAttractAuctionAuditAugustAuntAuthorAutoAutumnAverageAvocadoAvoidAwakeAwareAwayAwesomeAwfulAwkwardAxisBabyBachelorBaconBadgeBagBalanceBalconyBallBambooBananaBannerBarBarelyBargainBarrelBaseBasicBasketBattleBeachBeanBeautyBecauseBecomeBeefBeforeBeginBehaveBehindBelieveBelowBeltBenchBenefitBestBetrayBetterBetweenBeyondBicycleBidBikeBindBiologyBirdBirthBitterBlackBladeBlameBlanketBlastBleakBlessBlindBloodBlossomBlouseBlueBlurBlushBoardBoatBodyBoilBombBoneBonusBookBoostBorderBoringBorrowBossBottomBounceBoxBoyBracketBrainBrandBrassBraveBreadBreezeBrickBridgeBriefBrightBringBriskBroccoliBrokenBronzeBroomBrotherBrownBrushBubbleBuddyBudgetBuffaloBuildBulbBulkBulletBundleBunkerBurdenBurgerBurstBusBusinessBusyButterBuyerBuzzCabbageCabinCableCactusCageCakeCallCalmCameraCampCanCanalCancelCandyCannonCanoeCanvasCanyonCapableCapitalCaptainCarCarbonCardCargoCarpetCarryCartCaseCashCasinoCastleCasualCatCatalogCatchCategoryCattleCaughtCauseCautionCaveCeilingCeleryCementCensusCenturyCerealCertainChairChalkChampionChangeChaosChapterChargeChaseChatCheapCheckCheeseChefCherryChestChickenChiefChildChimneyChoiceChooseChronicChuckleChunkChurnCigarCinnamonCircleCitizenCityCivilClaimClapClarifyClawClayCleanClerkCleverClickClientCliffClimbClinicClipClockClogCloseClothCloudClownClubClumpClusterClutchCoachCoastCoconutCodeCoffeeCoilCoinCollectColorColumnCombineComeComfortComicCommonCompanyConcertConductConfirmCongressConnectConsiderControlConvinceCookCoolCopperCopyCoralCoreCornCorrectCostCottonCouchCountryCoupleCourseCousinCoverCoyoteCrackCradleCraftCramCraneCrashCraterCrawlCrazyCreamCreditCreekCrewCricketCrimeCrispCriticCropCrossCrouchCrowdCrucialCruelCruiseCrumbleCrunchCrushCryCrystalCubeCultureCupCupboardCuriousCurrentCurtainCurveCushionCustomCuteCycleDadDamageDampDanceDangerDaringDashDaughterDawnDayDealDebateDebrisDecadeDecemberDecideDeclineDecorateDecreaseDeerDefenseDefineDefyDegreeDelayDeliverDemandDemiseDenialDentistDenyDepartDependDepositDepthDeputyDeriveDescribeDesertDesignDeskDespairDestroyDetailDetectDevelopDeviceDevoteDiagramDialDiamondDiaryDiceDieselDietDifferDigitalDignityDilemmaDinnerDinosaurDirectDirtDisagreeDiscoverDiseaseDishDismissDisorderDisplayDistanceDivertDivideDivorceDizzyDoctorDocumentDogDollDolphinDomainDonateDonkeyDonorDoorDoseDoubleDoveDraftDragonDramaDrasticDrawDreamDressDriftDrillDrinkDripDriveDropDrumDryDuckDumbDuneDuringDustDutchDutyDwarfDynamicEagerEagleEarlyEarnEarthEasilyEastEasyEchoEcologyEconomyEdgeEditEducateEffortEggEightEitherElbowElderElectricElegantElementElephantElevatorEliteElseEmbarkEmbodyEmbraceEmergeEmotionEmployEmpowerEmptyEnableEnactEndEndlessEndorseEnemyEnergyEnforceEngageEngineEnhanceEnjoyEnlistEnoughEnrichEnrollEnsureEnterEntireEntryEnvelopeEpisodeEqualEquipEraEraseErodeErosionErrorEruptEscapeEssayEssenceEstateEternalEthicsEvidenceEvilEvokeEvolveExactExampleExcessExchangeExciteExcludeExcuseExecuteExerciseExhaustExhibitExileExistExitExoticExpandExpectExpireExplainExposeExpressExtendExtraEyeEyebrowFabricFaceFacultyFadeFaintFaithFallFalseFameFamilyFamousFanFancyFantasyFarmFashionFatFatalFatherFatigueFaultFavoriteFeatureFebruaryFederalFeeFeedFeelFemaleFenceFestivalFetchFeverFewFiberFictionFieldFigureFileFilmFilterFinalFindFineFingerFinishFireFirmFirstFiscalFishFitFitnessFixFlagFlameFlashFlatFlavorFleeFlightFlipFloatFlockFloorFlowerFluidFlushFlyFoamFocusFogFoilFoldFollowFoodFootForceForestForgetForkFortuneForumForwardFossilFosterFoundFoxFragileFrameFrequentFreshFriendFringeFrogFrontFrostFrownFrozenFruitFuelFunFunnyFurnaceFuryFutureGadgetGainGalaxyGalleryGameGapGarageGarbageGardenGarlicGarmentGasGaspGateGatherGaugeGazeGeneralGeniusGenreGentleGenuineGestureGhostGiantGiftGiggleGingerGiraffeGirlGiveGladGlanceGlareGlassGlideGlimpseGlobeGloomGloryGloveGlowGlueGoatGoddessGoldGoodGooseGorillaGospelGossipGovernGownGrabGraceGrainGrantGrapeGrassGravityGreatGreenGridGriefGritGroceryGroupGrowGruntGuardGuessGuideGuiltGuitarGunGymHabitHairHalfHammerHamsterHandHappyHarborHardHarshHarvestHatHaveHawkHazardHeadHealthHeartHeavyHedgehogHeightHelloHelmetHelpHenHeroHiddenHighHillHintHipHireHistoryHobbyHockeyHoldHoleHolidayHollowHomeHoneyHoodHopeHornHorrorHorseHospitalHostHotelHourHoverHubHugeHumanHumbleHumorHundredHungryHuntHurdleHurryHurtHusbandHybridIceIconIdeaIdentifyIdleIgnoreIllIllegalIllnessImageImitateImmenseImmuneImpactImposeImproveImpulseInchIncludeIncomeIncreaseIndexIndicateIndoorIndustryInfantInflictInformInhaleInheritInitialInjectInjuryInmateInnerInnocentInputInquiryInsaneInsectInsideInspireInstallIntactInterestIntoInvestInviteInvolveIronIslandIsolateIssueItemIvoryJacketJaguarJarJazzJealousJeansJellyJewelJobJoinJokeJourneyJoyJudgeJuiceJumpJungleJuniorJunkJustKangarooKeenKeepKetchupKeyKickKidKidneyKindKingdomKissKitKitchenKiteKittenKiwiKneeKnifeKnockKnowLabLabelLaborLadderLadyLakeLampLanguageLaptopLargeLaterLatinLaughLaundryLavaLawLawnLawsuitLayerLazyLeaderLeafLearnLeaveLectureLeftLegLegalLegendLeisureLemonLendLengthLensLeopardLessonLetterLevelLiarLibertyLibraryLicenseLifeLiftLightLikeLimbLimitLinkLionLiquidListLittleLiveLizardLoadLoanLobsterLocalLockLogicLonelyLongLoopLotteryLoudLoungeLoveLoyalLuckyLuggageLumberLunarLunchLuxuryLyricsMachineMadMagicMagnetMaidMailMainMajorMakeMammalManManageMandateMangoMansionManualMapleMarbleMarchMarginMarineMarketMarriageMaskMassMasterMatchMaterialMathMatrixMatterMaximumMazeMeadowMeanMeasureMeatMechanicMedalMediaMelodyMeltMemberMemoryMentionMenuMercyMergeMeritMerryMeshMessageMetalMethodMiddleMidnightMilkMillionMimicMindMinimumMinorMinuteMiracleMirrorMiseryMissMistakeMixMixedMixtureMobileModelModifyMomMomentMonitorMonkeyMonsterMonthMoonMoralMoreMorningMosquitoMotherMotionMotorMountainMouseMoveMovieMuchMuffinMuleMultiplyMuscleMuseumMushroomMusicMustMutualMyselfMysteryMythNaiveNameNapkinNarrowNastyNationNatureNearNeckNeedNegativeNeglectNeitherNephewNerveNestNetNetworkNeutralNeverNewsNextNiceNightNobleNoiseNomineeNoodleNormalNorthNoseNotableNoteNothingNoticeNovelNowNuclearNumberNurseNutOakObeyObjectObligeObscureObserveObtainObviousOccurOceanOctoberOdorOffOfferOfficeOftenOilOkayOldOliveOlympicOmitOnceOneOnionOnlineOnlyOpenOperaOpinionOpposeOptionOrangeOrbitOrchardOrderOrdinaryOrganOrientOriginalOrphanOstrichOtherOutdoorOuterOutputOutsideOvalOvenOverOwnOwnerOxygenOysterOzonePactPaddlePagePairPalacePalmPandaPanelPanicPantherPaperParadeParentParkParrotPartyPassPatchPathPatientPatrolPatternPausePavePaymentPeacePeanutPearPeasantPelicanPenPenaltyPencilPeoplePepperPerfectPermitPersonPetPhonePhotoPhrasePhysicalPianoPicnicPicturePiecePigPigeonPillPilotPinkPioneerPipePistolPitchPizzaPlacePlanetPlasticPlatePlayPleasePledgePluckPlugPlungePoemPoetPointPolarPolePolicePondPonyPoolPopularPortionPositionPossiblePostPotatoPotteryPovertyPowderPowerPracticePraisePredictPreferPreparePresentPrettyPreventPricePridePrimaryPrintPriorityPrisonPrivatePrizeProblemProcessProduceProfitProgramProjectPromoteProofPropertyProsperProtectProudProvidePublicPuddingPullPulpPulsePumpkinPunchPupilPuppyPurchasePurityPurposePursePushPutPuzzlePyramidQualityQuantumQuarterQuestionQuickQuitQuizQuoteRabbitRaccoonRaceRackRadarRadioRailRainRaiseRallyRampRanchRandomRangeRapidRareRateRatherRavenRawRazorReadyRealReasonRebelRebuildRecallReceiveRecipeRecordRecycleReduceReflectReformRefuseRegionRegretRegularRejectRelaxReleaseReliefRelyRemainRememberRemindRemoveRenderRenewRentReopenRepairRepeatReplaceReportRequireRescueResembleResistResourceResponseResultRetireRetreatReturnReunionRevealReviewRewardRhythmRibRibbonRiceRichRideRidgeRifleRightRigidRingRiotRippleRiskRitualRivalRiverRoadRoastRobotRobustRocketRomanceRoofRookieRoomRoseRotateRoughRoundRouteRoyalRubberRudeRugRuleRunRunwayRuralSadSaddleSadnessSafeSailSaladSalmonSalonSaltSaluteSameSampleSandSatisfySatoshiSauceSausageSaveSayScaleScanScareScatterSceneSchemeSchoolScienceScissorsScorpionScoutScrapScreenScriptScrubSeaSearchSeasonSeatSecondSecretSectionSecuritySeedSeekSegmentSelectSellSeminarSeniorSenseSentenceSeriesServiceSessionSettleSetupSevenShadowShaftShallowShareShedShellSheriffShieldShiftShineShipShiverShockShoeShootShopShortShoulderShoveShrimpShrugShuffleShySiblingSickSideSiegeSightSignSilentSilkSillySilverSimilarSimpleSinceSingSirenSisterSituateSixSizeSkateSketchSkiSkillSkinSkirtSkullSlabSlamSleepSlenderSliceSlideSlightSlimSloganSlotSlowSlushSmallSmartSmileSmokeSmoothSnackSnakeSnapSniffSnowSoapSoccerSocialSockSodaSoftSolarSoldierSolidSolutionSolveSomeoneSongSoonSorrySortSoulSoundSoupSourceSouthSpaceSpareSpatialSpawnSpeakSpecialSpeedSpellSpendSphereSpiceSpiderSpikeSpinSpiritSplitSpoilSponsorSpoonSportSpotSpraySpreadSpringSpySquareSqueezeSquirrelStableStadiumStaffStageStairsStampStandStartStateStaySteakSteelStemStepStereoStickStillStingStockStomachStoneStoolStoryStoveStrategyStreetStrikeStrongStruggleStudentStuffStumbleStyleSubjectSubmitSubwaySuccessSuchSuddenSufferSugarSuggestSuitSummerSunSunnySunsetSuperSupplySupremeSureSurfaceSurgeSurpriseSurroundSurveySuspectSustainSwallowSwampSwapSwarmSwearSweetSwiftSwimSwingSwitchSwordSymbolSymptomSyrupSystemTableTackleTagTailTalentTalkTankTapeTargetTaskTasteTattooTaxiTeachTeamTellTenTenantTennisTentTermTestTextThankThatThemeThenTheoryThereTheyThingThisThoughtThreeThriveThrowThumbThunderTicketTideTigerTiltTimberTimeTinyTipTiredTissueTitleToastTobaccoTodayToddlerToeTogetherToiletTokenTomatoTomorrowToneTongueTonightToolToothTopTopicToppleTorchTornadoTortoiseTossTotalTouristTowardTowerTownToyTrackTradeTrafficTragicTrainTransferTrapTrashTravelTrayTreatTreeTrendTrialTribeTrickTriggerTrimTripTrophyTroubleTruckTrueTrulyTrumpetTrustTruthTryTubeTuitionTumbleTunaTunnelTurkeyTurnTurtleTwelveTwentyTwiceTwinTwistTwoTypeTypicalUglyUmbrellaUnableUnawareUncleUncoverUnderUndoUnfairUnfoldUnhappyUniformUniqueUnitUniverseUnknownUnlockUntilUnusualUnveilUpdateUpgradeUpholdUponUpperUpsetUrbanUrgeUsageUseUsedUsefulUselessUsualUtilityVacantVacuumVagueValidValleyValveVanVanishVaporVariousVastVaultVehicleVelvetVendorVentureVenueVerbVerifyVersionVeryVesselVeteranViableVibrantViciousVictoryVideoViewVillageVintageViolinVirtualVirusVisaVisitVisualVitalVividVocalVoiceVoidVolcanoVolumeVoteVoyageWageWagonWaitWalkWallWalnutWantWarfareWarmWarriorWashWaspWasteWaterWaveWayWealthWeaponWearWeaselWeatherWebWeddingWeekendWeirdWelcomeWestWetWhaleWhatWheatWheelWhenWhereWhipWhisperWideWidthWifeWildWillWinWindowWineWingWinkWinnerWinterWireWisdomWiseWishWitnessWolfWomanWonderWoodWoolWordWorkWorldWorryWorthWrapWreckWrestleWristWriteWrongYardYearYellowYouYoungYouthZebraZeroZoneZoo";let wordlist=null;function loadWords(t){if(wordlist==null&&(wordlist=words.replace(/([A-Z])/g," $1").toLowerCase().substring(1).split(" "),Wordlist.check(t)!=="0x3c8acc1e7b08d8e76f9fda015ef48dc8c710a73cb7e0f77b2c18a9b5a7adde60"))throw wordlist=null,new Error("BIP39 Wordlist for en (English) FAILED")}class LangEn extends Wordlist{constructor(){super("en")}getWord(e){return loadWords(this),wordlist[e]}getWordIndex(e){return loadWords(this),wordlist.indexOf(e)}}const langEn=new LangEn;Wordlist.register(langEn);const wordlists$1={en:langEn},version$b="hdnode/5.7.0",logger$c=new Logger(version$b),N=BigNumber.from("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),MasterSecret=toUtf8Bytes("Bitcoin seed"),HardenedBit=2147483648;function getUpperMask(t){return(1<<t)-1<<8-t}function getLowerMask(t){return(1<<t)-1}function bytes32(t){return hexZeroPad(hexlify(t),32)}function base58check(t){return Base58.encode(concat([t,hexDataSlice(sha256$5(sha256$5(t)),0,4)]))}function getWordlist(t){if(t==null)return wordlists$1.en;if(typeof t=="string"){const e=wordlists$1[t];return e==null&&logger$c.throwArgumentError("unknown locale","wordlist",t),e}return t}const _constructorGuard$1={},defaultPath="m/44'/60'/0'/0/0";class HDNode{constructor(e,n,o,c,a,l,b,v){if(e!==_constructorGuard$1)throw new Error("HDNode constructor cannot be called directly");if(n){const A=new SigningKey(n);defineReadOnly(this,"privateKey",A.privateKey),defineReadOnly(this,"publicKey",A.compressedPublicKey)}else defineReadOnly(this,"privateKey",null),defineReadOnly(this,"publicKey",hexlify(o));defineReadOnly(this,"parentFingerprint",c),defineReadOnly(this,"fingerprint",hexDataSlice(ripemd160$2(sha256$5(this.publicKey)),0,4)),defineReadOnly(this,"address",computeAddress(this.publicKey)),defineReadOnly(this,"chainCode",a),defineReadOnly(this,"index",l),defineReadOnly(this,"depth",b),v==null?(defineReadOnly(this,"mnemonic",null),defineReadOnly(this,"path",null)):typeof v=="string"?(defineReadOnly(this,"mnemonic",null),defineReadOnly(this,"path",v)):(defineReadOnly(this,"mnemonic",v),defineReadOnly(this,"path",v.path))}get extendedKey(){if(this.depth>=256)throw new Error("Depth too large!");return base58check(concat([this.privateKey!=null?"0x0488ADE4":"0x0488B21E",hexlify(this.depth),this.parentFingerprint,hexZeroPad(hexlify(this.index),4),this.chainCode,this.privateKey!=null?concat(["0x00",this.privateKey]):this.publicKey]))}neuter(){return new HDNode(_constructorGuard$1,null,this.publicKey,this.parentFingerprint,this.chainCode,this.index,this.depth,this.path)}_derive(e){if(e>4294967295)throw new Error("invalid index - "+String(e));let n=this.path;n&&(n+="/"+(e&~HardenedBit));const o=new Uint8Array(37);if(e&HardenedBit){if(!this.privateKey)throw new Error("cannot derive child of neutered node");o.set(arrayify(this.privateKey),1),n&&(n+="'")}else o.set(arrayify(this.publicKey));for(let M=24;M>=0;M-=8)o[33+(M>>3)]=e>>24-M&255;const c=arrayify(computeHmac(SupportedAlgorithm.sha512,this.chainCode,o)),a=c.slice(0,32),l=c.slice(32);let b=null,v=null;this.privateKey?b=bytes32(BigNumber.from(a).add(this.privateKey).mod(N)):v=new SigningKey(hexlify(a))._addPoint(this.publicKey);let A=n;const S=this.mnemonic;return S&&(A=Object.freeze({phrase:S.phrase,path:n,locale:S.locale||"en"})),new HDNode(_constructorGuard$1,b,v,this.fingerprint,bytes32(l),e,this.depth+1,A)}derivePath(e){const n=e.split("/");if(n.length===0||n[0]==="m"&&this.depth!==0)throw new Error("invalid path - "+e);n[0]==="m"&&n.shift();let o=this;for(let c=0;c<n.length;c++){const a=n[c];if(a.match(/^[0-9]+'$/)){const l=parseInt(a.substring(0,a.length-1));if(l>=HardenedBit)throw new Error("invalid path index - "+a);o=o._derive(HardenedBit+l)}else if(a.match(/^[0-9]+$/)){const l=parseInt(a);if(l>=HardenedBit)throw new Error("invalid path index - "+a);o=o._derive(l)}else throw new Error("invalid path component - "+a)}return o}static _fromSeed(e,n){const o=arrayify(e);if(o.length<16||o.length>64)throw new Error("invalid seed");const c=arrayify(computeHmac(SupportedAlgorithm.sha512,MasterSecret,o));return new HDNode(_constructorGuard$1,bytes32(c.slice(0,32)),null,"0x00000000",bytes32(c.slice(32)),0,0,n)}static fromMnemonic(e,n,o){return o=getWordlist(o),e=entropyToMnemonic$1(mnemonicToEntropy$1(e,o),o),HDNode._fromSeed(mnemonicToSeed$1(e,n),{phrase:e,path:"m",locale:o.locale})}static fromSeed(e){return HDNode._fromSeed(e,null)}static fromExtendedKey(e){const n=Base58.decode(e);(n.length!==82||base58check(n.slice(0,78))!==e)&&logger$c.throwArgumentError("invalid extended key","extendedKey","[REDACTED]");const o=n[4],c=hexlify(n.slice(5,9)),a=parseInt(hexlify(n.slice(9,13)).substring(2),16),l=hexlify(n.slice(13,45)),b=n.slice(45,78);switch(hexlify(n.slice(0,4))){case"0x0488b21e":case"0x043587cf":return new HDNode(_constructorGuard$1,null,hexlify(b),c,l,a,o,null);case"0x0488ade4":case"0x04358394 ":if(b[0]!==0)break;return new HDNode(_constructorGuard$1,hexlify(b.slice(1)),null,c,l,a,o,null)}return logger$c.throwArgumentError("invalid extended key","extendedKey","[REDACTED]")}}function mnemonicToSeed$1(t,e){e||(e="");const n=toUtf8Bytes("mnemonic"+e,UnicodeNormalizationForm.NFKD);return pbkdf2$4(toUtf8Bytes(t,UnicodeNormalizationForm.NFKD),n,2048,64,"sha512")}function mnemonicToEntropy$1(t,e){e=getWordlist(e),logger$c.checkNormalize();const n=e.split(t);if(n.length%3!==0)throw new Error("invalid mnemonic");const o=arrayify(new Uint8Array(Math.ceil(11*n.length/8)));let c=0;for(let A=0;A<n.length;A++){let S=e.getWordIndex(n[A].normalize("NFKD"));if(S===-1)throw new Error("invalid mnemonic");for(let M=0;M<11;M++)S&1<<10-M&&(o[c>>3]|=1<<7-c%8),c++}const a=32*n.length/3,l=n.length/3,b=getUpperMask(l);if((arrayify(sha256$5(o.slice(0,a/8)))[0]&b)!==(o[o.length-1]&b))throw new Error("invalid checksum");return hexlify(o.slice(0,a/8))}function entropyToMnemonic$1(t,e){if(e=getWordlist(e),t=arrayify(t),t.length%4!==0||t.length<16||t.length>32)throw new Error("invalid entropy");const n=[0];let o=11;for(let l=0;l<t.length;l++)o>8?(n[n.length-1]<<=8,n[n.length-1]|=t[l],o-=8):(n[n.length-1]<<=o,n[n.length-1]|=t[l]>>8-o,n.push(t[l]&getLowerMask(8-o)),o+=3);const c=t.length/4,a=arrayify(sha256$5(t))[0]&getUpperMask(c);return n[n.length-1]<<=c,n[n.length-1]|=a>>8-c,e.join(n.map(l=>e.getWord(l)))}const version$a="random/5.7.0",logger$b=new Logger(version$a);function getGlobal(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global$1<"u")return global$1;throw new Error("unable to locate global object")}const anyGlobal=getGlobal();let crypto$7=anyGlobal.crypto||anyGlobal.msCrypto;(!crypto$7||!crypto$7.getRandomValues)&&(logger$b.warn("WARNING: Missing strong random number source"),crypto$7={getRandomValues:function(t){return logger$b.throwError("no secure random source avaialble",Logger.errors.UNSUPPORTED_OPERATION,{operation:"crypto.getRandomValues"})}});function randomBytes$3(t){(t<=0||t>1024||t%1||t!=t)&&logger$b.throwArgumentError("invalid length","length",t);const e=new Uint8Array(t);return crypto$7.getRandomValues(e),arrayify(e)}var aesJs={exports:{}};(function(t,e){(function(n){function o(w){return parseInt(w)===w}function c(w){if(!o(w.length))return!1;for(var I=0;I<w.length;I++)if(!o(w[I])||w[I]<0||w[I]>255)return!1;return!0}function a(w,I){if(w.buffer&&ArrayBuffer.isView(w)&&w.name==="Uint8Array")return I&&(w.slice?w=w.slice():w=Array.prototype.slice.call(w)),w;if(Array.isArray(w)){if(!c(w))throw new Error("Array contains invalid value: "+w);return new Uint8Array(w)}if(o(w.length)&&c(w))return new Uint8Array(w);throw new Error("unsupported array-like object")}function l(w){return new Uint8Array(w)}function b(w,I,C,V,O){(V!=null||O!=null)&&(w.slice?w=w.slice(V,O):w=Array.prototype.slice.call(w,V,O)),I.set(w,C)}var v=function(){function w(C){var V=[],O=0;for(C=encodeURI(C);O<C.length;){var j=C.charCodeAt(O++);j===37?(V.push(parseInt(C.substr(O,2),16)),O+=2):V.push(j)}return a(V)}function I(C){for(var V=[],O=0;O<C.length;){var j=C[O];j<128?(V.push(String.fromCharCode(j)),O++):j>191&&j<224?(V.push(String.fromCharCode((j&31)<<6|C[O+1]&63)),O+=2):(V.push(String.fromCharCode((j&15)<<12|(C[O+1]&63)<<6|C[O+2]&63)),O+=3)}return V.join("")}return{toBytes:w,fromBytes:I}}(),A=function(){function w(V){for(var O=[],j=0;j<V.length;j+=2)O.push(parseInt(V.substr(j,2),16));return O}var I="0123456789abcdef";function C(V){for(var O=[],j=0;j<V.length;j++){var D=V[j];O.push(I[(D&240)>>4]+I[D&15])}return O.join("")}return{toBytes:w,fromBytes:C}}(),S={16:10,24:12,32:14},M=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],B=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],P=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],L=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],F=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],U=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],q=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],X=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],ee=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],te=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],ce=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],ue=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],Ae=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],we=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],pe=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];function Ce(w){for(var I=[],C=0;C<w.length;C+=4)I.push(w[C]<<24|w[C+1]<<16|w[C+2]<<8|w[C+3]);return I}var T=function(w){if(!(this instanceof T))throw Error("AES must be instanitated with `new`");Object.defineProperty(this,"key",{value:a(w,!0)}),this._prepare()};T.prototype._prepare=function(){var w=S[this.key.length];if(w==null)throw new Error("invalid key size (must be 16, 24 or 32 bytes)");this._Ke=[],this._Kd=[];for(var I=0;I<=w;I++)this._Ke.push([0,0,0,0]),this._Kd.push([0,0,0,0]);for(var C=(w+1)*4,V=this.key.length/4,O=Ce(this.key),j,I=0;I<V;I++)j=I>>2,this._Ke[j][I%4]=O[I],this._Kd[w-j][I%4]=O[I];for(var D=0,Q=V,oe;Q<C;){if(oe=O[V-1],O[0]^=B[oe>>16&255]<<24^B[oe>>8&255]<<16^B[oe&255]<<8^B[oe>>24&255]^M[D]<<24,D+=1,V!=8)for(var I=1;I<V;I++)O[I]^=O[I-1];else{for(var I=1;I<V/2;I++)O[I]^=O[I-1];oe=O[V/2-1],O[V/2]^=B[oe&255]^B[oe>>8&255]<<8^B[oe>>16&255]<<16^B[oe>>24&255]<<24;for(var I=V/2+1;I<V;I++)O[I]^=O[I-1]}for(var I=0,de,Z;I<V&&Q<C;)de=Q>>2,Z=Q%4,this._Ke[de][Z]=O[I],this._Kd[w-de][Z]=O[I++],Q++}for(var de=1;de<w;de++)for(var Z=0;Z<4;Z++)oe=this._Kd[de][Z],this._Kd[de][Z]=ue[oe>>24&255]^Ae[oe>>16&255]^we[oe>>8&255]^pe[oe&255]},T.prototype.encrypt=function(w){if(w.length!=16)throw new Error("invalid plaintext size (must be 16 bytes)");for(var I=this._Ke.length-1,C=[0,0,0,0],V=Ce(w),O=0;O<4;O++)V[O]^=this._Ke[0][O];for(var j=1;j<I;j++){for(var O=0;O<4;O++)C[O]=L[V[O]>>24&255]^F[V[(O+1)%4]>>16&255]^U[V[(O+2)%4]>>8&255]^q[V[(O+3)%4]&255]^this._Ke[j][O];V=C.slice()}for(var D=l(16),Q,O=0;O<4;O++)Q=this._Ke[I][O],D[4*O]=(B[V[O]>>24&255]^Q>>24)&255,D[4*O+1]=(B[V[(O+1)%4]>>16&255]^Q>>16)&255,D[4*O+2]=(B[V[(O+2)%4]>>8&255]^Q>>8)&255,D[4*O+3]=(B[V[(O+3)%4]&255]^Q)&255;return D},T.prototype.decrypt=function(w){if(w.length!=16)throw new Error("invalid ciphertext size (must be 16 bytes)");for(var I=this._Kd.length-1,C=[0,0,0,0],V=Ce(w),O=0;O<4;O++)V[O]^=this._Kd[0][O];for(var j=1;j<I;j++){for(var O=0;O<4;O++)C[O]=X[V[O]>>24&255]^ee[V[(O+3)%4]>>16&255]^te[V[(O+2)%4]>>8&255]^ce[V[(O+1)%4]&255]^this._Kd[j][O];V=C.slice()}for(var D=l(16),Q,O=0;O<4;O++)Q=this._Kd[I][O],D[4*O]=(P[V[O]>>24&255]^Q>>24)&255,D[4*O+1]=(P[V[(O+3)%4]>>16&255]^Q>>16)&255,D[4*O+2]=(P[V[(O+2)%4]>>8&255]^Q>>8)&255,D[4*O+3]=(P[V[(O+1)%4]&255]^Q)&255;return D};var u=function(w){if(!(this instanceof u))throw Error("AES must be instanitated with `new`");this.description="Electronic Code Block",this.name="ecb",this._aes=new T(w)};u.prototype.encrypt=function(w){if(w=a(w),w.length%16!==0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var I=l(w.length),C=l(16),V=0;V<w.length;V+=16)b(w,C,0,V,V+16),C=this._aes.encrypt(C),b(C,I,V);return I},u.prototype.decrypt=function(w){if(w=a(w),w.length%16!==0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var I=l(w.length),C=l(16),V=0;V<w.length;V+=16)b(w,C,0,V,V+16),C=this._aes.decrypt(C),b(C,I,V);return I};var p=function(w,I){if(!(this instanceof p))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Block Chaining",this.name="cbc",!I)I=l(16);else if(I.length!=16)throw new Error("invalid initialation vector size (must be 16 bytes)");this._lastCipherblock=a(I,!0),this._aes=new T(w)};p.prototype.encrypt=function(w){if(w=a(w),w.length%16!==0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var I=l(w.length),C=l(16),V=0;V<w.length;V+=16){b(w,C,0,V,V+16);for(var O=0;O<16;O++)C[O]^=this._lastCipherblock[O];this._lastCipherblock=this._aes.encrypt(C),b(this._lastCipherblock,I,V)}return I},p.prototype.decrypt=function(w){if(w=a(w),w.length%16!==0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var I=l(w.length),C=l(16),V=0;V<w.length;V+=16){b(w,C,0,V,V+16),C=this._aes.decrypt(C);for(var O=0;O<16;O++)I[V+O]=C[O]^this._lastCipherblock[O];b(w,this._lastCipherblock,0,V,V+16)}return I};var m=function(w,I,C){if(!(this instanceof m))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Feedback",this.name="cfb",!I)I=l(16);else if(I.length!=16)throw new Error("invalid initialation vector size (must be 16 size)");C||(C=1),this.segmentSize=C,this._shiftRegister=a(I,!0),this._aes=new T(w)};m.prototype.encrypt=function(w){if(w.length%this.segmentSize!=0)throw new Error("invalid plaintext size (must be segmentSize bytes)");for(var I=a(w,!0),C,V=0;V<I.length;V+=this.segmentSize){C=this._aes.encrypt(this._shiftRegister);for(var O=0;O<this.segmentSize;O++)I[V+O]^=C[O];b(this._shiftRegister,this._shiftRegister,0,this.segmentSize),b(I,this._shiftRegister,16-this.segmentSize,V,V+this.segmentSize)}return I},m.prototype.decrypt=function(w){if(w.length%this.segmentSize!=0)throw new Error("invalid ciphertext size (must be segmentSize bytes)");for(var I=a(w,!0),C,V=0;V<I.length;V+=this.segmentSize){C=this._aes.encrypt(this._shiftRegister);for(var O=0;O<this.segmentSize;O++)I[V+O]^=C[O];b(this._shiftRegister,this._shiftRegister,0,this.segmentSize),b(w,this._shiftRegister,16-this.segmentSize,V,V+this.segmentSize)}return I};var y=function(w,I){if(!(this instanceof y))throw Error("AES must be instanitated with `new`");if(this.description="Output Feedback",this.name="ofb",!I)I=l(16);else if(I.length!=16)throw new Error("invalid initialation vector size (must be 16 bytes)");this._lastPrecipher=a(I,!0),this._lastPrecipherIndex=16,this._aes=new T(w)};y.prototype.encrypt=function(w){for(var I=a(w,!0),C=0;C<I.length;C++)this._lastPrecipherIndex===16&&(this._lastPrecipher=this._aes.encrypt(this._lastPrecipher),this._lastPrecipherIndex=0),I[C]^=this._lastPrecipher[this._lastPrecipherIndex++];return I},y.prototype.decrypt=y.prototype.encrypt;var E=function(w){if(!(this instanceof E))throw Error("Counter must be instanitated with `new`");w!==0&&!w&&(w=1),typeof w=="number"?(this._counter=l(16),this.setValue(w)):this.setBytes(w)};E.prototype.setValue=function(w){if(typeof w!="number"||parseInt(w)!=w)throw new Error("invalid counter value (must be an integer)");for(var I=15;I>=0;--I)this._counter[I]=w%256,w=w>>8},E.prototype.setBytes=function(w){if(w=a(w,!0),w.length!=16)throw new Error("invalid counter bytes size (must be 16 bytes)");this._counter=w},E.prototype.increment=function(){for(var w=15;w>=0;w--)if(this._counter[w]===255)this._counter[w]=0;else{this._counter[w]++;break}};var $=function(w,I){if(!(this instanceof $))throw Error("AES must be instanitated with `new`");this.description="Counter",this.name="ctr",I instanceof E||(I=new E(I)),this._counter=I,this._remainingCounter=null,this._remainingCounterIndex=16,this._aes=new T(w)};$.prototype.encrypt=function(w){for(var I=a(w,!0),C=0;C<I.length;C++)this._remainingCounterIndex===16&&(this._remainingCounter=this._aes.encrypt(this._counter._counter),this._remainingCounterIndex=0,this._counter.increment()),I[C]^=this._remainingCounter[this._remainingCounterIndex++];return I},$.prototype.decrypt=$.prototype.encrypt;function k(w){w=a(w,!0);var I=16-w.length%16,C=l(w.length+I);b(w,C);for(var V=w.length;V<C.length;V++)C[V]=I;return C}function _(w){if(w=a(w,!0),w.length<16)throw new Error("PKCS#7 invalid length");var I=w[w.length-1];if(I>16)throw new Error("PKCS#7 padding byte out of range");for(var C=w.length-I,V=0;V<I;V++)if(w[C+V]!==I)throw new Error("PKCS#7 invalid padding byte");var O=l(C);return b(w,O,0,0,C),O}var d={AES:T,Counter:E,ModeOfOperation:{ecb:u,cbc:p,cfb:m,ofb:y,ctr:$},utils:{hex:A,utf8:v},padding:{pkcs7:{pad:k,strip:_}},_arrayTest:{coerceArray:a,createArray:l,copyArray:b}};t.exports=d})()})(aesJs);var aesJsExports=aesJs.exports;const aes$6=getDefaultExportFromCjs$1(aesJsExports),version$9="json-wallets/5.7.0";function looseArrayify(t){return typeof t=="string"&&t.substring(0,2)!=="0x"&&(t="0x"+t),arrayify(t)}function zpad(t,e){for(t=String(t);t.length<e;)t="0"+t;return t}function getPassword(t){return typeof t=="string"?toUtf8Bytes(t,UnicodeNormalizationForm.NFKC):arrayify(t)}function searchPath(t,e){let n=t;const o=e.toLowerCase().split("/");for(let c=0;c<o.length;c++){let a=null;for(const l in n)if(l.toLowerCase()===o[c]){a=n[l];break}if(a===null)return null;n=a}return n}function uuidV4(t){const e=arrayify(t);e[6]=e[6]&15|64,e[8]=e[8]&63|128;const n=hexlify(e);return[n.substring(2,10),n.substring(10,14),n.substring(14,18),n.substring(18,22),n.substring(22,34)].join("-")}const logger$a=new Logger(version$9);class CrowdsaleAccount extends Description{isCrowdsaleAccount(e){return!!(e&&e._isCrowdsaleAccount)}}function decrypt$2(t,e){const n=JSON.parse(t);e=getPassword(e);const o=getAddress(searchPath(n,"ethaddr")),c=looseArrayify(searchPath(n,"encseed"));(!c||c.length%16!==0)&&logger$a.throwArgumentError("invalid encseed","json",t);const a=arrayify(pbkdf2$4(e,e,2e3,32,"sha256")).slice(0,16),l=c.slice(0,16),b=c.slice(16),v=new aes$6.ModeOfOperation.cbc(a,l),A=aes$6.padding.pkcs7.strip(arrayify(v.decrypt(b)));let S="";for(let P=0;P<A.length;P++)S+=String.fromCharCode(A[P]);const M=toUtf8Bytes(S),B=keccak256(M);return new CrowdsaleAccount({_isCrowdsaleAccount:!0,address:o,privateKey:B})}function isCrowdsaleWallet(t){let e=null;try{e=JSON.parse(t)}catch{return!1}return e.encseed&&e.ethaddr}function isKeystoreWallet(t){let e=null;try{e=JSON.parse(t)}catch{return!1}return!(!e.version||parseInt(e.version)!==e.version||parseInt(e.version)!==3)}var scrypt$1={exports:{}};(function(t,e){(function(n){function c(F){const U=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);let q=1779033703,X=3144134277,ee=1013904242,te=2773480762,ce=1359893119,ue=2600822924,Ae=528734635,we=1541459225;const pe=new Uint32Array(64);function Ce($){let k=0,_=$.length;for(;_>=64;){let d=q,w=X,I=ee,C=te,V=ce,O=ue,j=Ae,D=we,Q,oe,de,Z,H;for(oe=0;oe<16;oe++)de=k+oe*4,pe[oe]=($[de]&255)<<24|($[de+1]&255)<<16|($[de+2]&255)<<8|$[de+3]&255;for(oe=16;oe<64;oe++)Q=pe[oe-2],Z=(Q>>>17|Q<<15)^(Q>>>19|Q<<13)^Q>>>10,Q=pe[oe-15],H=(Q>>>7|Q<<25)^(Q>>>18|Q<<14)^Q>>>3,pe[oe]=(Z+pe[oe-7]|0)+(H+pe[oe-16]|0)|0;for(oe=0;oe<64;oe++)Z=(((V>>>6|V<<26)^(V>>>11|V<<21)^(V>>>25|V<<7))+(V&O^~V&j)|0)+(D+(U[oe]+pe[oe]|0)|0)|0,H=((d>>>2|d<<30)^(d>>>13|d<<19)^(d>>>22|d<<10))+(d&w^d&I^w&I)|0,D=j,j=O,O=V,V=C+Z|0,C=I,I=w,w=d,d=Z+H|0;q=q+d|0,X=X+w|0,ee=ee+I|0,te=te+C|0,ce=ce+V|0,ue=ue+O|0,Ae=Ae+j|0,we=we+D|0,k+=64,_-=64}}Ce(F);let T,u=F.length%64,p=F.length/536870912|0,m=F.length<<3,y=u<56?56:120,E=F.slice(F.length-u,F.length);for(E.push(128),T=u+1;T<y;T++)E.push(0);return E.push(p>>>24&255),E.push(p>>>16&255),E.push(p>>>8&255),E.push(p>>>0&255),E.push(m>>>24&255),E.push(m>>>16&255),E.push(m>>>8&255),E.push(m>>>0&255),Ce(E),[q>>>24&255,q>>>16&255,q>>>8&255,q>>>0&255,X>>>24&255,X>>>16&255,X>>>8&255,X>>>0&255,ee>>>24&255,ee>>>16&255,ee>>>8&255,ee>>>0&255,te>>>24&255,te>>>16&255,te>>>8&255,te>>>0&255,ce>>>24&255,ce>>>16&255,ce>>>8&255,ce>>>0&255,ue>>>24&255,ue>>>16&255,ue>>>8&255,ue>>>0&255,Ae>>>24&255,Ae>>>16&255,Ae>>>8&255,Ae>>>0&255,we>>>24&255,we>>>16&255,we>>>8&255,we>>>0&255]}function a(F,U,q){F=F.length<=64?F:c(F);const X=64+U.length+4,ee=new Array(X),te=new Array(64);let ce,ue=[];for(ce=0;ce<64;ce++)ee[ce]=54;for(ce=0;ce<F.length;ce++)ee[ce]^=F[ce];for(ce=0;ce<U.length;ce++)ee[64+ce]=U[ce];for(ce=X-4;ce<X;ce++)ee[ce]=0;for(ce=0;ce<64;ce++)te[ce]=92;for(ce=0;ce<F.length;ce++)te[ce]^=F[ce];function Ae(){for(let we=X-1;we>=X-4;we--){if(ee[we]++,ee[we]<=255)return;ee[we]=0}}for(;q>=32;)Ae(),ue=ue.concat(c(te.concat(c(ee)))),q-=32;return q>0&&(Ae(),ue=ue.concat(c(te.concat(c(ee))).slice(0,q))),ue}function l(F,U,q,X,ee){let te;for(S(F,(2*q-1)*16,ee,0,16),te=0;te<2*q;te++)A(F,te*16,ee,16),v(ee,X),S(ee,0,F,U+te*16,16);for(te=0;te<q;te++)S(F,U+te*2*16,F,te*16,16);for(te=0;te<q;te++)S(F,U+(te*2+1)*16,F,(te+q)*16,16)}function b(F,U){return F<<U|F>>>32-U}function v(F,U){S(F,0,U,0,16);for(let q=8;q>0;q-=2)U[4]^=b(U[0]+U[12],7),U[8]^=b(U[4]+U[0],9),U[12]^=b(U[8]+U[4],13),U[0]^=b(U[12]+U[8],18),U[9]^=b(U[5]+U[1],7),U[13]^=b(U[9]+U[5],9),U[1]^=b(U[13]+U[9],13),U[5]^=b(U[1]+U[13],18),U[14]^=b(U[10]+U[6],7),U[2]^=b(U[14]+U[10],9),U[6]^=b(U[2]+U[14],13),U[10]^=b(U[6]+U[2],18),U[3]^=b(U[15]+U[11],7),U[7]^=b(U[3]+U[15],9),U[11]^=b(U[7]+U[3],13),U[15]^=b(U[11]+U[7],18),U[1]^=b(U[0]+U[3],7),U[2]^=b(U[1]+U[0],9),U[3]^=b(U[2]+U[1],13),U[0]^=b(U[3]+U[2],18),U[6]^=b(U[5]+U[4],7),U[7]^=b(U[6]+U[5],9),U[4]^=b(U[7]+U[6],13),U[5]^=b(U[4]+U[7],18),U[11]^=b(U[10]+U[9],7),U[8]^=b(U[11]+U[10],9),U[9]^=b(U[8]+U[11],13),U[10]^=b(U[9]+U[8],18),U[12]^=b(U[15]+U[14],7),U[13]^=b(U[12]+U[15],9),U[14]^=b(U[13]+U[12],13),U[15]^=b(U[14]+U[13],18);for(let q=0;q<16;++q)F[q]+=U[q]}function A(F,U,q,X){for(let ee=0;ee<X;ee++)q[ee]^=F[U+ee]}function S(F,U,q,X,ee){for(;ee--;)q[X++]=F[U++]}function M(F){if(!F||typeof F.length!="number")return!1;for(let U=0;U<F.length;U++){const q=F[U];if(typeof q!="number"||q%1||q<0||q>=256)return!1}return!0}function B(F,U){if(typeof F!="number"||F%1)throw new Error("invalid "+U);return F}function P(F,U,q,X,ee,te,ce){if(q=B(q,"N"),X=B(X,"r"),ee=B(ee,"p"),te=B(te,"dkLen"),q===0||q&q-1)throw new Error("N must be power of 2");if(q>2147483647/128/X)throw new Error("N too large");if(X>2147483647/128/ee)throw new Error("r too large");if(!M(F))throw new Error("password must be an array or buffer");if(F=Array.prototype.slice.call(F),!M(U))throw new Error("salt must be an array or buffer");U=Array.prototype.slice.call(U);let ue=a(F,U,ee*128*X);const Ae=new Uint32Array(ee*32*X);for(let V=0;V<Ae.length;V++){const O=V*4;Ae[V]=(ue[O+3]&255)<<24|(ue[O+2]&255)<<16|(ue[O+1]&255)<<8|(ue[O+0]&255)<<0}const we=new Uint32Array(64*X),pe=new Uint32Array(32*X*q),Ce=32*X,T=new Uint32Array(16),u=new Uint32Array(16),p=ee*q*2;let m=0,y=null,E=!1,$=0,k=0,_,d;const w=ce?parseInt(1e3/X):4294967295,I=typeof setImmediate<"u"?setImmediate:setTimeout,C=function(){if(E)return ce(new Error("cancelled"),m/p);let V;switch($){case 0:d=k*32*X,S(Ae,d,we,0,Ce),$=1,_=0;case 1:V=q-_,V>w&&(V=w);for(let j=0;j<V;j++)S(we,0,pe,(_+j)*Ce,Ce),l(we,Ce,X,T,u);if(_+=V,m+=V,ce){const j=parseInt(1e3*m/p);if(j!==y){if(E=ce(null,m/p),E)break;y=j}}if(_<q)break;_=0,$=2;case 2:V=q-_,V>w&&(V=w);for(let j=0;j<V;j++){const D=(2*X-1)*16,Q=we[D]&q-1;A(pe,Q*Ce,we,Ce),l(we,Ce,X,T,u)}if(_+=V,m+=V,ce){const j=parseInt(1e3*m/p);if(j!==y){if(E=ce(null,m/p),E)break;y=j}}if(_<q)break;if(S(we,0,Ae,d,Ce),k++,k<ee){$=0;break}ue=[];for(let j=0;j<Ae.length;j++)ue.push(Ae[j]>>0&255),ue.push(Ae[j]>>8&255),ue.push(Ae[j]>>16&255),ue.push(Ae[j]>>24&255);const O=a(F,ue,te);return ce&&ce(null,1,O),O}ce&&I(C)};if(!ce)for(;;){const V=C();if(V!=null)return V}C()}const L={scrypt:function(F,U,q,X,ee,te,ce){return new Promise(function(ue,Ae){let we=0;ce&&ce(0),P(F,U,q,X,ee,te,function(pe,Ce,T){if(pe)Ae(pe);else if(T)ce&&we!==1&&ce(1),ue(new Uint8Array(T));else if(ce&&Ce!==we)return we=Ce,ce(Ce)})})},syncScrypt:function(F,U,q,X,ee,te){return new Uint8Array(P(F,U,q,X,ee,te))}};t.exports=L})()})(scrypt$1);var scryptExports=scrypt$1.exports;const scrypt=getDefaultExportFromCjs$1(scryptExports);var __awaiter$5=function(t,e,n,o){function c(a){return a instanceof n?a:new n(function(l){l(a)})}return new(n||(n=Promise))(function(a,l){function b(S){try{A(o.next(S))}catch(M){l(M)}}function v(S){try{A(o.throw(S))}catch(M){l(M)}}function A(S){S.done?a(S.value):c(S.value).then(b,v)}A((o=o.apply(t,e||[])).next())})};const logger$9=new Logger(version$9);function hasMnemonic$1(t){return t!=null&&t.mnemonic&&t.mnemonic.phrase}class KeystoreAccount extends Description{isKeystoreAccount(e){return!!(e&&e._isKeystoreAccount)}}function _decrypt(t,e,n){if(searchPath(t,"crypto/cipher")==="aes-128-ctr"){const c=looseArrayify(searchPath(t,"crypto/cipherparams/iv")),a=new aes$6.Counter(c),l=new aes$6.ModeOfOperation.ctr(e,a);return arrayify(l.decrypt(n))}return null}function _getAccount(t,e){const n=looseArrayify(searchPath(t,"crypto/ciphertext"));if(hexlify(keccak256(concat([e.slice(16,32),n]))).substring(2)!==searchPath(t,"crypto/mac").toLowerCase())throw new Error("invalid password");const c=_decrypt(t,e.slice(0,16),n);c||logger$9.throwError("unsupported cipher",Logger.errors.UNSUPPORTED_OPERATION,{operation:"decrypt"});const a=e.slice(32,64),l=computeAddress(c);if(t.address){let v=t.address.toLowerCase();if(v.substring(0,2)!=="0x"&&(v="0x"+v),getAddress(v)!==l)throw new Error("address mismatch")}const b={_isKeystoreAccount:!0,address:l,privateKey:hexlify(c)};if(searchPath(t,"x-ethers/version")==="0.1"){const v=looseArrayify(searchPath(t,"x-ethers/mnemonicCiphertext")),A=looseArrayify(searchPath(t,"x-ethers/mnemonicCounter")),S=new aes$6.Counter(A),M=new aes$6.ModeOfOperation.ctr(a,S),B=searchPath(t,"x-ethers/path")||defaultPath,P=searchPath(t,"x-ethers/locale")||"en",L=arrayify(M.decrypt(v));try{const F=entropyToMnemonic$1(L,P),U=HDNode.fromMnemonic(F,null,P).derivePath(B);if(U.privateKey!=b.privateKey)throw new Error("mnemonic mismatch");b.mnemonic=U.mnemonic}catch(F){if(F.code!==Logger.errors.INVALID_ARGUMENT||F.argument!=="wordlist")throw F}}return new KeystoreAccount(b)}function pbkdf2Sync(t,e,n,o,c){return arrayify(pbkdf2$4(t,e,n,o,c))}function pbkdf2$3(t,e,n,o,c){return Promise.resolve(pbkdf2Sync(t,e,n,o,c))}function _computeKdfKey(t,e,n,o,c){const a=getPassword(e),l=searchPath(t,"crypto/kdf");if(l&&typeof l=="string"){const b=function(v,A){return logger$9.throwArgumentError("invalid key-derivation function parameters",v,A)};if(l.toLowerCase()==="scrypt"){const v=looseArrayify(searchPath(t,"crypto/kdfparams/salt")),A=parseInt(searchPath(t,"crypto/kdfparams/n")),S=parseInt(searchPath(t,"crypto/kdfparams/r")),M=parseInt(searchPath(t,"crypto/kdfparams/p"));(!A||!S||!M)&&b("kdf",l),A&A-1&&b("N",A);const B=parseInt(searchPath(t,"crypto/kdfparams/dklen"));return B!==32&&b("dklen",B),o(a,v,A,S,M,64,c)}else if(l.toLowerCase()==="pbkdf2"){const v=looseArrayify(searchPath(t,"crypto/kdfparams/salt"));let A=null;const S=searchPath(t,"crypto/kdfparams/prf");S==="hmac-sha256"?A="sha256":S==="hmac-sha512"?A="sha512":b("prf",S);const M=parseInt(searchPath(t,"crypto/kdfparams/c")),B=parseInt(searchPath(t,"crypto/kdfparams/dklen"));return B!==32&&b("dklen",B),n(a,v,M,B,A)}}return logger$9.throwArgumentError("unsupported key-derivation function","kdf",l)}function decryptSync(t,e){const n=JSON.parse(t),o=_computeKdfKey(n,e,pbkdf2Sync,scrypt.syncScrypt);return _getAccount(n,o)}function decrypt$1(t,e,n){return __awaiter$5(this,void 0,void 0,function*(){const o=JSON.parse(t),c=yield _computeKdfKey(o,e,pbkdf2$3,scrypt.scrypt,n);return _getAccount(o,c)})}function encrypt(t,e,n,o){try{if(getAddress(t.address)!==computeAddress(t.privateKey))throw new Error("address/privateKey mismatch");if(hasMnemonic$1(t)){const U=t.mnemonic;if(HDNode.fromMnemonic(U.phrase,null,U.locale).derivePath(U.path||defaultPath).privateKey!=t.privateKey)throw new Error("mnemonic mismatch")}}catch(U){return Promise.reject(U)}typeof n=="function"&&!o&&(o=n,n={}),n||(n={});const c=arrayify(t.privateKey),a=getPassword(e);let l=null,b=null,v=null;if(hasMnemonic$1(t)){const U=t.mnemonic;l=arrayify(mnemonicToEntropy$1(U.phrase,U.locale||"en")),b=U.path||defaultPath,v=U.locale||"en"}let A=n.client;A||(A="ethers.js");let S=null;n.salt?S=arrayify(n.salt):S=randomBytes$3(32);let M=null;if(n.iv){if(M=arrayify(n.iv),M.length!==16)throw new Error("invalid iv")}else M=randomBytes$3(16);let B=null;if(n.uuid){if(B=arrayify(n.uuid),B.length!==16)throw new Error("invalid uuid")}else B=randomBytes$3(16);let P=1<<17,L=8,F=1;return n.scrypt&&(n.scrypt.N&&(P=n.scrypt.N),n.scrypt.r&&(L=n.scrypt.r),n.scrypt.p&&(F=n.scrypt.p)),scrypt.scrypt(a,S,P,L,F,64,o).then(U=>{U=arrayify(U);const q=U.slice(0,16),X=U.slice(16,32),ee=U.slice(32,64),te=new aes$6.Counter(M),ce=new aes$6.ModeOfOperation.ctr(q,te),ue=arrayify(ce.encrypt(c)),Ae=keccak256(concat([X,ue])),we={address:t.address.substring(2).toLowerCase(),id:uuidV4(B),version:3,crypto:{cipher:"aes-128-ctr",cipherparams:{iv:hexlify(M).substring(2)},ciphertext:hexlify(ue).substring(2),kdf:"scrypt",kdfparams:{salt:hexlify(S).substring(2),n:P,dklen:32,p:F,r:L},mac:Ae.substring(2)}};if(l){const pe=randomBytes$3(16),Ce=new aes$6.Counter(pe),T=new aes$6.ModeOfOperation.ctr(ee,Ce),u=arrayify(T.encrypt(l)),p=new Date,m=p.getUTCFullYear()+"-"+zpad(p.getUTCMonth()+1,2)+"-"+zpad(p.getUTCDate(),2)+"T"+zpad(p.getUTCHours(),2)+"-"+zpad(p.getUTCMinutes(),2)+"-"+zpad(p.getUTCSeconds(),2)+".0Z";we["x-ethers"]={client:A,gethFilename:"UTC--"+m+"--"+we.address,mnemonicCounter:hexlify(pe).substring(2),mnemonicCiphertext:hexlify(u).substring(2),path:b,locale:v,version:"0.1"}}return JSON.stringify(we)})}function decryptJsonWallet(t,e,n){if(isCrowdsaleWallet(t)){n&&n(0);const o=decrypt$2(t,e);return n&&n(1),Promise.resolve(o)}return isKeystoreWallet(t)?decrypt$1(t,e,n):Promise.reject(new Error("invalid JSON wallet"))}function decryptJsonWalletSync(t,e){if(isCrowdsaleWallet(t))return decrypt$2(t,e);if(isKeystoreWallet(t))return decryptSync(t,e);throw new Error("invalid JSON wallet")}const version$8="wallet/5.7.0";var __awaiter$4=function(t,e,n,o){function c(a){return a instanceof n?a:new n(function(l){l(a)})}return new(n||(n=Promise))(function(a,l){function b(S){try{A(o.next(S))}catch(M){l(M)}}function v(S){try{A(o.throw(S))}catch(M){l(M)}}function A(S){S.done?a(S.value):c(S.value).then(b,v)}A((o=o.apply(t,e||[])).next())})};const logger$8=new Logger(version$8);function isAccount(t){return t!=null&&isHexString(t.privateKey,32)&&t.address!=null}function hasMnemonic(t){const e=t.mnemonic;return e&&e.phrase}class Wallet extends Signer{constructor(e,n){if(super(),isAccount(e)){const o=new SigningKey(e.privateKey);if(defineReadOnly(this,"_signingKey",()=>o),defineReadOnly(this,"address",computeAddress(this.publicKey)),this.address!==getAddress(e.address)&&logger$8.throwArgumentError("privateKey/address mismatch","privateKey","[REDACTED]"),hasMnemonic(e)){const c=e.mnemonic;defineReadOnly(this,"_mnemonic",()=>({phrase:c.phrase,path:c.path||defaultPath,locale:c.locale||"en"}));const a=this.mnemonic,l=HDNode.fromMnemonic(a.phrase,null,a.locale).derivePath(a.path);computeAddress(l.privateKey)!==this.address&&logger$8.throwArgumentError("mnemonic/address mismatch","privateKey","[REDACTED]")}else defineReadOnly(this,"_mnemonic",()=>null)}else{if(SigningKey.isSigningKey(e))e.curve!=="secp256k1"&&logger$8.throwArgumentError("unsupported curve; must be secp256k1","privateKey","[REDACTED]"),defineReadOnly(this,"_signingKey",()=>e);else{typeof e=="string"&&e.match(/^[0-9a-f]*$/i)&&e.length===64&&(e="0x"+e);const o=new SigningKey(e);defineReadOnly(this,"_signingKey",()=>o)}defineReadOnly(this,"_mnemonic",()=>null),defineReadOnly(this,"address",computeAddress(this.publicKey))}n&&!Provider.isProvider(n)&&logger$8.throwArgumentError("invalid provider","provider",n),defineReadOnly(this,"provider",n||null)}get mnemonic(){return this._mnemonic()}get privateKey(){return this._signingKey().privateKey}get publicKey(){return this._signingKey().publicKey}getAddress(){return Promise.resolve(this.address)}connect(e){return new Wallet(this,e)}signTransaction(e){return resolveProperties(e).then(n=>{n.from!=null&&(getAddress(n.from)!==this.address&&logger$8.throwArgumentError("transaction from address mismatch","transaction.from",e.from),delete n.from);const o=this._signingKey().signDigest(keccak256(serialize$1(n)));return serialize$1(n,o)})}signMessage(e){return __awaiter$4(this,void 0,void 0,function*(){return joinSignature(this._signingKey().signDigest(hashMessage(e)))})}_signTypedData(e,n,o){return __awaiter$4(this,void 0,void 0,function*(){const c=yield TypedDataEncoder.resolveNames(e,n,o,a=>(this.provider==null&&logger$8.throwError("cannot resolve ENS names without a provider",Logger.errors.UNSUPPORTED_OPERATION,{operation:"resolveName",value:a}),this.provider.resolveName(a)));return joinSignature(this._signingKey().signDigest(TypedDataEncoder.hash(c.domain,n,c.value)))})}encrypt(e,n,o){if(typeof n=="function"&&!o&&(o=n,n={}),o&&typeof o!="function")throw new Error("invalid callback");return n||(n={}),encrypt(this,e,n,o)}static createRandom(e){let n=randomBytes$3(16);e||(e={}),e.extraEntropy&&(n=arrayify(hexDataSlice(keccak256(concat([n,e.extraEntropy])),0,16)));const o=entropyToMnemonic$1(n,e.locale);return Wallet.fromMnemonic(o,e.path,e.locale)}static fromEncryptedJson(e,n,o){return decryptJsonWallet(e,n,o).then(c=>new Wallet(c))}static fromEncryptedJsonSync(e,n){return new Wallet(decryptJsonWalletSync(e,n))}static fromMnemonic(e,n,o){return n||(n=defaultPath),new Wallet(HDNode.fromMnemonic(e,null,o).derivePath(n))}}function verifyMessage(t,e){return recoverAddress(hashMessage(t),e)}const version$7="networks/5.7.1",logger$7=new Logger(version$7);function isRenetworkable(t){return t&&typeof t.renetwork=="function"}function ethDefaultProvider(t){const e=function(n,o){o==null&&(o={});const c=[];if(n.InfuraProvider&&o.infura!=="-")try{c.push(new n.InfuraProvider(t,o.infura))}catch{}if(n.EtherscanProvider&&o.etherscan!=="-")try{c.push(new n.EtherscanProvider(t,o.etherscan))}catch{}if(n.AlchemyProvider&&o.alchemy!=="-")try{c.push(new n.AlchemyProvider(t,o.alchemy))}catch{}if(n.PocketProvider&&o.pocket!=="-"){const a=["goerli","ropsten","rinkeby","sepolia"];try{const l=new n.PocketProvider(t,o.pocket);l.network&&a.indexOf(l.network.name)===-1&&c.push(l)}catch{}}if(n.CloudflareProvider&&o.cloudflare!=="-")try{c.push(new n.CloudflareProvider(t))}catch{}if(n.AnkrProvider&&o.ankr!=="-")try{const a=["ropsten"],l=new n.AnkrProvider(t,o.ankr);l.network&&a.indexOf(l.network.name)===-1&&c.push(l)}catch{}if(c.length===0)return null;if(n.FallbackProvider){let a=1;return o.quorum!=null?a=o.quorum:t==="homestead"&&(a=2),new n.FallbackProvider(c,a)}return c[0]};return e.renetwork=function(n){return ethDefaultProvider(n)},e}function etcDefaultProvider(t,e){const n=function(o,c){return o.JsonRpcProvider?new o.JsonRpcProvider(t,e):null};return n.renetwork=function(o){return etcDefaultProvider(t,o)},n}const homestead={chainId:1,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"homestead",_defaultProvider:ethDefaultProvider("homestead")},ropsten={chainId:3,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"ropsten",_defaultProvider:ethDefaultProvider("ropsten")},classicMordor={chainId:63,name:"classicMordor",_defaultProvider:etcDefaultProvider("https://www.ethercluster.com/mordor","classicMordor")},networks$2={unspecified:{chainId:0,name:"unspecified"},homestead,mainnet:homestead,morden:{chainId:2,name:"morden"},ropsten,testnet:ropsten,rinkeby:{chainId:4,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"rinkeby",_defaultProvider:ethDefaultProvider("rinkeby")},kovan:{chainId:42,name:"kovan",_defaultProvider:ethDefaultProvider("kovan")},goerli:{chainId:5,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"goerli",_defaultProvider:ethDefaultProvider("goerli")},kintsugi:{chainId:1337702,name:"kintsugi"},sepolia:{chainId:11155111,name:"sepolia",_defaultProvider:ethDefaultProvider("sepolia")},classic:{chainId:61,name:"classic",_defaultProvider:etcDefaultProvider("https://www.ethercluster.com/etc","classic")},classicMorden:{chainId:62,name:"classicMorden"},classicMordor,classicTestnet:classicMordor,classicKotti:{chainId:6,name:"classicKotti",_defaultProvider:etcDefaultProvider("https://www.ethercluster.com/kotti","classicKotti")},xdai:{chainId:100,name:"xdai"},matic:{chainId:137,name:"matic",_defaultProvider:ethDefaultProvider("matic")},maticmum:{chainId:80001,name:"maticmum"},optimism:{chainId:10,name:"optimism",_defaultProvider:ethDefaultProvider("optimism")},"optimism-kovan":{chainId:69,name:"optimism-kovan"},"optimism-goerli":{chainId:420,name:"optimism-goerli"},arbitrum:{chainId:42161,name:"arbitrum"},"arbitrum-rinkeby":{chainId:421611,name:"arbitrum-rinkeby"},"arbitrum-goerli":{chainId:421613,name:"arbitrum-goerli"},bnb:{chainId:56,name:"bnb"},bnbt:{chainId:97,name:"bnbt"}};function getNetwork(t){if(t==null)return null;if(typeof t=="number"){for(const o in networks$2){const c=networks$2[o];if(c.chainId===t)return{name:c.name,chainId:c.chainId,ensAddress:c.ensAddress||null,_defaultProvider:c._defaultProvider||null}}return{chainId:t,name:"unknown"}}if(typeof t=="string"){const o=networks$2[t];return o==null?null:{name:o.name,chainId:o.chainId,ensAddress:o.ensAddress,_defaultProvider:o._defaultProvider||null}}const e=networks$2[t.name];if(!e)return typeof t.chainId!="number"&&logger$7.throwArgumentError("invalid network chainId","network",t),t;t.chainId!==0&&t.chainId!==e.chainId&&logger$7.throwArgumentError("network chainId mismatch","network",t);let n=t._defaultProvider||null;return n==null&&e._defaultProvider&&(isRenetworkable(e._defaultProvider)?n=e._defaultProvider.renetwork(t):n=e._defaultProvider),{name:t.name,chainId:e.chainId,ensAddress:t.ensAddress||e.ensAddress||null,_defaultProvider:n}}const version$6="web/5.7.1";var __awaiter$3=function(t,e,n,o){function c(a){return a instanceof n?a:new n(function(l){l(a)})}return new(n||(n=Promise))(function(a,l){function b(S){try{A(o.next(S))}catch(M){l(M)}}function v(S){try{A(o.throw(S))}catch(M){l(M)}}function A(S){S.done?a(S.value):c(S.value).then(b,v)}A((o=o.apply(t,e||[])).next())})};function getUrl(t,e){return __awaiter$3(this,void 0,void 0,function*(){e==null&&(e={});const n={method:e.method||"GET",headers:e.headers||{},body:e.body||void 0};if(e.skipFetchSetup!==!0&&(n.mode="cors",n.cache="no-cache",n.credentials="same-origin",n.redirect="follow",n.referrer="client"),e.fetchOptions!=null){const l=e.fetchOptions;l.mode&&(n.mode=l.mode),l.cache&&(n.cache=l.cache),l.credentials&&(n.credentials=l.credentials),l.redirect&&(n.redirect=l.redirect),l.referrer&&(n.referrer=l.referrer)}const o=yield fetch(t,n),c=yield o.arrayBuffer(),a={};return o.headers.forEach?o.headers.forEach((l,b)=>{a[b.toLowerCase()]=l}):o.headers.keys().forEach(l=>{a[l.toLowerCase()]=o.headers.get(l)}),{headers:a,statusCode:o.status,statusMessage:o.statusText,body:arrayify(new Uint8Array(c))}})}var __awaiter$2=function(t,e,n,o){function c(a){return a instanceof n?a:new n(function(l){l(a)})}return new(n||(n=Promise))(function(a,l){function b(S){try{A(o.next(S))}catch(M){l(M)}}function v(S){try{A(o.throw(S))}catch(M){l(M)}}function A(S){S.done?a(S.value):c(S.value).then(b,v)}A((o=o.apply(t,e||[])).next())})};const logger$6=new Logger(version$6);function staller(t){return new Promise(e=>{setTimeout(e,t)})}function bodyify(t,e){if(t==null)return null;if(typeof t=="string")return t;if(isBytesLike(t)){if(e&&(e.split("/")[0]==="text"||e.split(";")[0].trim()==="application/json"))try{return toUtf8String(t)}catch{}return hexlify(t)}return t}function unpercent(t){return toUtf8Bytes(t.replace(/%([0-9a-f][0-9a-f])/gi,(e,n)=>String.fromCharCode(parseInt(n,16))))}function _fetchData(t,e,n){const o=typeof t=="object"&&t.throttleLimit!=null?t.throttleLimit:12;logger$6.assertArgument(o>0&&o%1===0,"invalid connection throttle limit","connection.throttleLimit",o);const c=typeof t=="object"?t.throttleCallback:null,a=typeof t=="object"&&typeof t.throttleSlotInterval=="number"?t.throttleSlotInterval:100;logger$6.assertArgument(a>0&&a%1===0,"invalid connection throttle slot interval","connection.throttleSlotInterval",a);const l=typeof t=="object"?!!t.errorPassThrough:!1,b={};let v=null;const A={method:"GET"};let S=!1,M=2*60*1e3;if(typeof t=="string")v=t;else if(typeof t=="object"){if((t==null||t.url==null)&&logger$6.throwArgumentError("missing URL","connection.url",t),v=t.url,typeof t.timeout=="number"&&t.timeout>0&&(M=t.timeout),t.headers)for(const q in t.headers)b[q.toLowerCase()]={key:q,value:String(t.headers[q])},["if-none-match","if-modified-since"].indexOf(q.toLowerCase())>=0&&(S=!0);if(A.allowGzip=!!t.allowGzip,t.user!=null&&t.password!=null){v.substring(0,6)!=="https:"&&t.allowInsecureAuthentication!==!0&&logger$6.throwError("basic authentication requires a secure https url",Logger.errors.INVALID_ARGUMENT,{argument:"url",url:v,user:t.user,password:"[REDACTED]"});const q=t.user+":"+t.password;b.authorization={key:"Authorization",value:"Basic "+encode$m(toUtf8Bytes(q))}}t.skipFetchSetup!=null&&(A.skipFetchSetup=!!t.skipFetchSetup),t.fetchOptions!=null&&(A.fetchOptions=shallowCopy(t.fetchOptions))}const B=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),P=v?v.match(B):null;if(P)try{const q={statusCode:200,statusMessage:"OK",headers:{"content-type":P[1]||"text/plain"},body:P[2]?decode$l(P[3]):unpercent(P[3])};let X=q.body;return n&&(X=n(q.body,q)),Promise.resolve(X)}catch(q){logger$6.throwError("processing response error",Logger.errors.SERVER_ERROR,{body:bodyify(P[1],P[2]),error:q,requestBody:null,requestMethod:"GET",url:v})}e&&(A.method="POST",A.body=e,b["content-type"]==null&&(b["content-type"]={key:"Content-Type",value:"application/octet-stream"}),b["content-length"]==null&&(b["content-length"]={key:"Content-Length",value:String(e.length)}));const L={};Object.keys(b).forEach(q=>{const X=b[q];L[X.key]=X.value}),A.headers=L;const F=function(){let q=null;return{promise:new Promise(function(te,ce){M&&(q=setTimeout(()=>{q!=null&&(q=null,ce(logger$6.makeError("timeout",Logger.errors.TIMEOUT,{requestBody:bodyify(A.body,L["content-type"]),requestMethod:A.method,timeout:M,url:v})))},M))}),cancel:function(){q!=null&&(clearTimeout(q),q=null)}}}(),U=function(){return __awaiter$2(this,void 0,void 0,function*(){for(let q=0;q<o;q++){let X=null;try{if(X=yield getUrl(v,A),q<o){if(X.statusCode===301||X.statusCode===302){const te=X.headers.location||"";if(A.method==="GET"&&te.match(/^https:/)){v=X.headers.location;continue}}else if(X.statusCode===429){let te=!0;if(c&&(te=yield c(q,v)),te){let ce=0;const ue=X.headers["retry-after"];typeof ue=="string"&&ue.match(/^[1-9][0-9]*$/)?ce=parseInt(ue)*1e3:ce=a*parseInt(String(Math.random()*Math.pow(2,q))),yield staller(ce);continue}}}}catch(te){X=te.response,X==null&&(F.cancel(),logger$6.throwError("missing response",Logger.errors.SERVER_ERROR,{requestBody:bodyify(A.body,L["content-type"]),requestMethod:A.method,serverError:te,url:v}))}let ee=X.body;if(S&&X.statusCode===304?ee=null:!l&&(X.statusCode<200||X.statusCode>=300)&&(F.cancel(),logger$6.throwError("bad response",Logger.errors.SERVER_ERROR,{status:X.statusCode,headers:X.headers,body:bodyify(ee,X.headers?X.headers["content-type"]:null),requestBody:bodyify(A.body,L["content-type"]),requestMethod:A.method,url:v})),n)try{const te=yield n(ee,X);return F.cancel(),te}catch(te){if(te.throttleRetry&&q<o){let ce=!0;if(c&&(ce=yield c(q,v)),ce){const ue=a*parseInt(String(Math.random()*Math.pow(2,q)));yield staller(ue);continue}}F.cancel(),logger$6.throwError("processing response error",Logger.errors.SERVER_ERROR,{body:bodyify(ee,X.headers?X.headers["content-type"]:null),error:te,requestBody:bodyify(A.body,L["content-type"]),requestMethod:A.method,url:v})}return F.cancel(),ee}return logger$6.throwError("failed response",Logger.errors.SERVER_ERROR,{requestBody:bodyify(A.body,L["content-type"]),requestMethod:A.method,url:v})})}();return Promise.race([F.promise,U])}function fetchJson(t,e,n){let o=(a,l)=>{let b=null;if(a!=null)try{b=JSON.parse(toUtf8String(a))}catch(v){logger$6.throwError("invalid JSON",Logger.errors.SERVER_ERROR,{body:a,error:v})}return n&&(b=n(b,l)),b},c=null;if(e!=null){c=toUtf8Bytes(e);const a=typeof t=="string"?{url:t}:shallowCopy(t);a.headers?Object.keys(a.headers).filter(b=>b.toLowerCase()==="content-type").length!==0||(a.headers=shallowCopy(a.headers),a.headers["content-type"]="application/json"):a.headers={"content-type":"application/json"},t=a}return _fetchData(t,c,o)}function poll(t,e){return e||(e={}),e=shallowCopy(e),e.floor==null&&(e.floor=0),e.ceiling==null&&(e.ceiling=1e4),e.interval==null&&(e.interval=250),new Promise(function(n,o){let c=null,a=!1;const l=()=>a?!1:(a=!0,c&&clearTimeout(c),!0);e.timeout&&(c=setTimeout(()=>{l()&&o(new Error("timeout"))},e.timeout));const b=e.retryLimit;let v=0;function A(){return t().then(function(S){if(S!==void 0)l()&&n(S);else if(e.oncePoll)e.oncePoll.once("poll",A);else if(e.onceBlock)e.onceBlock.once("block",A);else if(!a){if(v++,v>b){l()&&o(new Error("retry limit reached"));return}let M=e.interval*parseInt(String(Math.random()*Math.pow(2,v)));M<e.floor&&(M=e.floor),M>e.ceiling&&(M=e.ceiling),setTimeout(A,M)}return null},function(S){l()&&o(S)})}A()})}var ALPHABET$5="qpzry9x8gf2tvdw0s3jn54khce6mua7l",ALPHABET_MAP$1={};for(var z=0;z<ALPHABET$5.length;z++){var x=ALPHABET$5.charAt(z);if(ALPHABET_MAP$1[x]!==void 0)throw new TypeError(x+" is ambiguous");ALPHABET_MAP$1[x]=z}function polymodStep$1(t){var e=t>>25;return(t&33554431)<<5^-(e>>0&1)&996825010^-(e>>1&1)&642813549^-(e>>2&1)&513874426^-(e>>3&1)&1027748829^-(e>>4&1)&705979059}function prefixChk$1(t){for(var e=1,n=0;n<t.length;++n){var o=t.charCodeAt(n);if(o<33||o>126)return"Invalid prefix ("+t+")";e=polymodStep$1(e)^o>>5}for(e=polymodStep$1(e),n=0;n<t.length;++n){var c=t.charCodeAt(n);e=polymodStep$1(e)^c&31}return e}function encode$l(t,e,n){if(n=n||90,t.length+7+e.length>n)throw new TypeError("Exceeds length limit");t=t.toLowerCase();var o=prefixChk$1(t);if(typeof o=="string")throw new Error(o);for(var c=t+"1",a=0;a<e.length;++a){var l=e[a];if(l>>5)throw new Error("Non 5-bit word");o=polymodStep$1(o)^l,c+=ALPHABET$5.charAt(l)}for(a=0;a<6;++a)o=polymodStep$1(o);for(o^=1,a=0;a<6;++a){var b=o>>(5-a)*5&31;c+=ALPHABET$5.charAt(b)}return c}function __decode(t,e){if(e=e||90,t.length<8)return t+" too short";if(t.length>e)return"Exceeds length limit";var n=t.toLowerCase(),o=t.toUpperCase();if(t!==n&&t!==o)return"Mixed-case string "+t;t=n;var c=t.lastIndexOf("1");if(c===-1)return"No separator character for "+t;if(c===0)return"Missing prefix for "+t;var a=t.slice(0,c),l=t.slice(c+1);if(l.length<6)return"Data too short";var b=prefixChk$1(a);if(typeof b=="string")return b;for(var v=[],A=0;A<l.length;++A){var S=l.charAt(A),M=ALPHABET_MAP$1[S];if(M===void 0)return"Unknown character "+S;b=polymodStep$1(b)^M,!(A+6>=l.length)&&v.push(M)}return b!==1?"Invalid checksum for "+t:{prefix:a,words:v}}function decodeUnsafe(){var t=__decode.apply(null,arguments);if(typeof t=="object")return t}function decode$k(t){var e=__decode.apply(null,arguments);if(typeof e=="object")return e;throw new Error(e)}function convert$3(t,e,n,o){for(var c=0,a=0,l=(1<<n)-1,b=[],v=0;v<t.length;++v)for(c=c<<e|t[v],a+=e;a>=n;)a-=n,b.push(c>>a&l);if(o)a>0&&b.push(c<<n-a&l);else{if(a>=e)return"Excess padding";if(c<<n-a&l)return"Non-zero padding"}return b}function toWordsUnsafe(t){var e=convert$3(t,8,5,!0);if(Array.isArray(e))return e}function toWords$1(t){var e=convert$3(t,8,5,!0);if(Array.isArray(e))return e;throw new Error(e)}function fromWordsUnsafe$1(t){var e=convert$3(t,5,8,!1);if(Array.isArray(e))return e}function fromWords$1(t){var e=convert$3(t,5,8,!1);if(Array.isArray(e))return e;throw new Error(e)}var bech32={decodeUnsafe,decode:decode$k,encode:encode$l,toWordsUnsafe,toWords:toWords$1,fromWordsUnsafe:fromWordsUnsafe$1,fromWords:fromWords$1};const bech32$1=getDefaultExportFromCjs$1(bech32),version$5="providers/5.7.2",logger$5=new Logger(version$5);class Formatter{constructor(){this.formats=this.getDefaultFormats()}getDefaultFormats(){const e={},n=this.address.bind(this),o=this.bigNumber.bind(this),c=this.blockTag.bind(this),a=this.data.bind(this),l=this.hash.bind(this),b=this.hex.bind(this),v=this.number.bind(this),A=this.type.bind(this),S=M=>this.data(M,!0);return e.transaction={hash:l,type:A,accessList:Formatter.allowNull(this.accessList.bind(this),null),blockHash:Formatter.allowNull(l,null),blockNumber:Formatter.allowNull(v,null),transactionIndex:Formatter.allowNull(v,null),confirmations:Formatter.allowNull(v,null),from:n,gasPrice:Formatter.allowNull(o),maxPriorityFeePerGas:Formatter.allowNull(o),maxFeePerGas:Formatter.allowNull(o),gasLimit:o,to:Formatter.allowNull(n,null),value:o,nonce:v,data:a,r:Formatter.allowNull(this.uint256),s:Formatter.allowNull(this.uint256),v:Formatter.allowNull(v),creates:Formatter.allowNull(n,null),raw:Formatter.allowNull(a)},e.transactionRequest={from:Formatter.allowNull(n),nonce:Formatter.allowNull(v),gasLimit:Formatter.allowNull(o),gasPrice:Formatter.allowNull(o),maxPriorityFeePerGas:Formatter.allowNull(o),maxFeePerGas:Formatter.allowNull(o),to:Formatter.allowNull(n),value:Formatter.allowNull(o),data:Formatter.allowNull(S),type:Formatter.allowNull(v),accessList:Formatter.allowNull(this.accessList.bind(this),null)},e.receiptLog={transactionIndex:v,blockNumber:v,transactionHash:l,address:n,topics:Formatter.arrayOf(l),data:a,logIndex:v,blockHash:l},e.receipt={to:Formatter.allowNull(this.address,null),from:Formatter.allowNull(this.address,null),contractAddress:Formatter.allowNull(n,null),transactionIndex:v,root:Formatter.allowNull(b),gasUsed:o,logsBloom:Formatter.allowNull(a),blockHash:l,transactionHash:l,logs:Formatter.arrayOf(this.receiptLog.bind(this)),blockNumber:v,confirmations:Formatter.allowNull(v,null),cumulativeGasUsed:o,effectiveGasPrice:Formatter.allowNull(o),status:Formatter.allowNull(v),type:A},e.block={hash:Formatter.allowNull(l),parentHash:l,number:v,timestamp:v,nonce:Formatter.allowNull(b),difficulty:this.difficulty.bind(this),gasLimit:o,gasUsed:o,miner:Formatter.allowNull(n),extraData:a,transactions:Formatter.allowNull(Formatter.arrayOf(l)),baseFeePerGas:Formatter.allowNull(o)},e.blockWithTransactions=shallowCopy(e.block),e.blockWithTransactions.transactions=Formatter.allowNull(Formatter.arrayOf(this.transactionResponse.bind(this))),e.filter={fromBlock:Formatter.allowNull(c,void 0),toBlock:Formatter.allowNull(c,void 0),blockHash:Formatter.allowNull(l,void 0),address:Formatter.allowNull(n,void 0),topics:Formatter.allowNull(this.topics.bind(this),void 0)},e.filterLog={blockNumber:Formatter.allowNull(v),blockHash:Formatter.allowNull(l),transactionIndex:v,removed:Formatter.allowNull(this.boolean.bind(this)),address:n,data:Formatter.allowFalsish(a,"0x"),topics:Formatter.arrayOf(l),transactionHash:l,logIndex:v},e}accessList(e){return accessListify(e||[])}number(e){return e==="0x"?0:BigNumber.from(e).toNumber()}type(e){return e==="0x"||e==null?0:BigNumber.from(e).toNumber()}bigNumber(e){return BigNumber.from(e)}boolean(e){if(typeof e=="boolean")return e;if(typeof e=="string"){if(e=e.toLowerCase(),e==="true")return!0;if(e==="false")return!1}throw new Error("invalid boolean - "+e)}hex(e,n){return typeof e=="string"&&(!n&&e.substring(0,2)!=="0x"&&(e="0x"+e),isHexString(e))?e.toLowerCase():logger$5.throwArgumentError("invalid hash","value",e)}data(e,n){const o=this.hex(e,n);if(o.length%2!==0)throw new Error("invalid data; odd-length - "+e);return o}address(e){return getAddress(e)}callAddress(e){if(!isHexString(e,32))return null;const n=getAddress(hexDataSlice(e,12));return n===AddressZero?null:n}contractAddress(e){return getContractAddress(e)}blockTag(e){if(e==null)return"latest";if(e==="earliest")return"0x0";switch(e){case"earliest":return"0x0";case"latest":case"pending":case"safe":case"finalized":return e}if(typeof e=="number"||isHexString(e))return hexValue(e);throw new Error("invalid blockTag")}hash(e,n){const o=this.hex(e,n);return hexDataLength(o)!==32?logger$5.throwArgumentError("invalid hash","value",e):o}difficulty(e){if(e==null)return null;const n=BigNumber.from(e);try{return n.toNumber()}catch{}return null}uint256(e){if(!isHexString(e))throw new Error("invalid uint256");return hexZeroPad(e,32)}_block(e,n){e.author!=null&&e.miner==null&&(e.miner=e.author);const o=e._difficulty!=null?e._difficulty:e.difficulty,c=Formatter.check(n,e);return c._difficulty=o==null?null:BigNumber.from(o),c}block(e){return this._block(e,this.formats.block)}blockWithTransactions(e){return this._block(e,this.formats.blockWithTransactions)}transactionRequest(e){return Formatter.check(this.formats.transactionRequest,e)}transactionResponse(e){e.gas!=null&&e.gasLimit==null&&(e.gasLimit=e.gas),e.to&&BigNumber.from(e.to).isZero()&&(e.to="0x0000000000000000000000000000000000000000"),e.input!=null&&e.data==null&&(e.data=e.input),e.to==null&&e.creates==null&&(e.creates=this.contractAddress(e)),(e.type===1||e.type===2)&&e.accessList==null&&(e.accessList=[]);const n=Formatter.check(this.formats.transaction,e);if(e.chainId!=null){let o=e.chainId;isHexString(o)&&(o=BigNumber.from(o).toNumber()),n.chainId=o}else{let o=e.networkId;o==null&&n.v==null&&(o=e.chainId),isHexString(o)&&(o=BigNumber.from(o).toNumber()),typeof o!="number"&&n.v!=null&&(o=(n.v-35)/2,o<0&&(o=0),o=parseInt(o)),typeof o!="number"&&(o=0),n.chainId=o}return n.blockHash&&n.blockHash.replace(/0/g,"")==="x"&&(n.blockHash=null),n}transaction(e){return parse$1(e)}receiptLog(e){return Formatter.check(this.formats.receiptLog,e)}receipt(e){const n=Formatter.check(this.formats.receipt,e);if(n.root!=null)if(n.root.length<=4){const o=BigNumber.from(n.root).toNumber();o===0||o===1?(n.status!=null&&n.status!==o&&logger$5.throwArgumentError("alt-root-status/status mismatch","value",{root:n.root,status:n.status}),n.status=o,delete n.root):logger$5.throwArgumentError("invalid alt-root-status","value.root",n.root)}else n.root.length!==66&&logger$5.throwArgumentError("invalid root hash","value.root",n.root);return n.status!=null&&(n.byzantium=!0),n}topics(e){return Array.isArray(e)?e.map(n=>this.topics(n)):e!=null?this.hash(e,!0):null}filter(e){return Formatter.check(this.formats.filter,e)}filterLog(e){return Formatter.check(this.formats.filterLog,e)}static check(e,n){const o={};for(const c in e)try{const a=e[c](n[c]);a!==void 0&&(o[c]=a)}catch(a){throw a.checkKey=c,a.checkValue=n[c],a}return o}static allowNull(e,n){return function(o){return o==null?n:e(o)}}static allowFalsish(e,n){return function(o){return o?e(o):n}}static arrayOf(e){return function(n){if(!Array.isArray(n))throw new Error("not an array");const o=[];return n.forEach(function(c){o.push(e(c))}),o}}}var __awaiter$1=function(t,e,n,o){function c(a){return a instanceof n?a:new n(function(l){l(a)})}return new(n||(n=Promise))(function(a,l){function b(S){try{A(o.next(S))}catch(M){l(M)}}function v(S){try{A(o.throw(S))}catch(M){l(M)}}function A(S){S.done?a(S.value):c(S.value).then(b,v)}A((o=o.apply(t,e||[])).next())})};const logger$4=new Logger(version$5),MAX_CCIP_REDIRECTS=10;function checkTopic(t){return t==null?"null":(hexDataLength(t)!==32&&logger$4.throwArgumentError("invalid topic","topic",t),t.toLowerCase())}function serializeTopics(t){for(t=t.slice();t.length>0&&t[t.length-1]==null;)t.pop();return t.map(e=>{if(Array.isArray(e)){const n={};e.forEach(c=>{n[checkTopic(c)]=!0});const o=Object.keys(n);return o.sort(),o.join("|")}else return checkTopic(e)}).join("&")}function deserializeTopics(t){return t===""?[]:t.split(/&/g).map(e=>{if(e==="")return[];const n=e.split("|").map(o=>o==="null"?null:o);return n.length===1?n[0]:n})}function getEventTag(t){if(typeof t=="string"){if(t=t.toLowerCase(),hexDataLength(t)===32)return"tx:"+t;if(t.indexOf(":")===-1)return t}else{if(Array.isArray(t))return"filter:*:"+serializeTopics(t);if(ForkEvent.isForkEvent(t))throw logger$4.warn("not implemented"),new Error("not implemented");if(t&&typeof t=="object")return"filter:"+(t.address||"*")+":"+serializeTopics(t.topics||[])}throw new Error("invalid event - "+t)}function getTime(){return new Date().getTime()}function stall(t){return new Promise(e=>{setTimeout(e,t)})}const PollableEvents=["block","network","pending","poll"];class Event{constructor(e,n,o){defineReadOnly(this,"tag",e),defineReadOnly(this,"listener",n),defineReadOnly(this,"once",o),this._lastBlockNumber=-2,this._inflight=!1}get event(){switch(this.type){case"tx":return this.hash;case"filter":return this.filter}return this.tag}get type(){return this.tag.split(":")[0]}get hash(){const e=this.tag.split(":");return e[0]!=="tx"?null:e[1]}get filter(){const e=this.tag.split(":");if(e[0]!=="filter")return null;const n=e[1],o=deserializeTopics(e[2]),c={};return o.length>0&&(c.topics=o),n&&n!=="*"&&(c.address=n),c}pollable(){return this.tag.indexOf(":")>=0||PollableEvents.indexOf(this.tag)>=0}}const coinInfos={0:{symbol:"btc",p2pkh:0,p2sh:5,prefix:"bc"},2:{symbol:"ltc",p2pkh:48,p2sh:50,prefix:"ltc"},3:{symbol:"doge",p2pkh:30,p2sh:22},60:{symbol:"eth",ilk:"eth"},61:{symbol:"etc",ilk:"eth"},700:{symbol:"xdai",ilk:"eth"}};function bytes32ify(t){return hexZeroPad(BigNumber.from(t).toHexString(),32)}function base58Encode(t){return Base58.encode(concat([t,hexDataSlice(sha256$5(sha256$5(t)),0,4)]))}const matcherIpfs=new RegExp("^(ipfs)://(.*)$","i"),matchers=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),matcherIpfs,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];function _parseString(t,e){try{return toUtf8String(_parseBytes(t,e))}catch{}return null}function _parseBytes(t,e){if(t==="0x")return null;const n=BigNumber.from(hexDataSlice(t,e,e+32)).toNumber(),o=BigNumber.from(hexDataSlice(t,n,n+32)).toNumber();return hexDataSlice(t,n+32,n+32+o)}function getIpfsLink(t){return t.match(/^ipfs:\/\/ipfs\//i)?t=t.substring(12):t.match(/^ipfs:\/\//i)?t=t.substring(7):logger$4.throwArgumentError("unsupported IPFS format","link",t),`https://gateway.ipfs.io/ipfs/${t}`}function numPad(t){const e=arrayify(t);if(e.length>32)throw new Error("internal; should not happen");const n=new Uint8Array(32);return n.set(e,32-e.length),n}function bytesPad(t){if(t.length%32===0)return t;const e=new Uint8Array(Math.ceil(t.length/32)*32);return e.set(t),e}function encodeBytes(t){const e=[];let n=0;for(let o=0;o<t.length;o++)e.push(null),n+=32;for(let o=0;o<t.length;o++){const c=arrayify(t[o]);e[o]=numPad(n),e.push(numPad(c.length)),e.push(bytesPad(c)),n+=32+Math.ceil(c.length/32)*32}return hexConcat(e)}class Resolver{constructor(e,n,o,c){defineReadOnly(this,"provider",e),defineReadOnly(this,"name",o),defineReadOnly(this,"address",e.formatter.address(n)),defineReadOnly(this,"_resolvedAddress",c)}supportsWildcard(){return this._supportsEip2544||(this._supportsEip2544=this.provider.call({to:this.address,data:"0x01ffc9a79061b92300000000000000000000000000000000000000000000000000000000"}).then(e=>BigNumber.from(e).eq(1)).catch(e=>{if(e.code===Logger.errors.CALL_EXCEPTION)return!1;throw this._supportsEip2544=null,e})),this._supportsEip2544}_fetch(e,n){return __awaiter$1(this,void 0,void 0,function*(){const o={to:this.address,ccipReadEnabled:!0,data:hexConcat([e,namehash(this.name),n||"0x"])};let c=!1;(yield this.supportsWildcard())&&(c=!0,o.data=hexConcat(["0x9061b923",encodeBytes([dnsEncode(this.name),o.data])]));try{let a=yield this.provider.call(o);return arrayify(a).length%32===4&&logger$4.throwError("resolver threw error",Logger.errors.CALL_EXCEPTION,{transaction:o,data:a}),c&&(a=_parseBytes(a,0)),a}catch(a){if(a.code===Logger.errors.CALL_EXCEPTION)return null;throw a}})}_fetchBytes(e,n){return __awaiter$1(this,void 0,void 0,function*(){const o=yield this._fetch(e,n);return o!=null?_parseBytes(o,0):null})}_getAddress(e,n){const o=coinInfos[String(e)];if(o==null&&logger$4.throwError(`unsupported coin type: ${e}`,Logger.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`}),o.ilk==="eth")return this.provider.formatter.address(n);const c=arrayify(n);if(o.p2pkh!=null){const a=n.match(/^0x76a9([0-9a-f][0-9a-f])([0-9a-f]*)88ac$/);if(a){const l=parseInt(a[1],16);if(a[2].length===l*2&&l>=1&&l<=75)return base58Encode(concat([[o.p2pkh],"0x"+a[2]]))}}if(o.p2sh!=null){const a=n.match(/^0xa9([0-9a-f][0-9a-f])([0-9a-f]*)87$/);if(a){const l=parseInt(a[1],16);if(a[2].length===l*2&&l>=1&&l<=75)return base58Encode(concat([[o.p2sh],"0x"+a[2]]))}}if(o.prefix!=null){const a=c[1];let l=c[0];if(l===0?a!==20&&a!==32&&(l=-1):l=-1,l>=0&&c.length===2+a&&a>=1&&a<=75){const b=bech32$1.toWords(c.slice(2));return b.unshift(l),bech32$1.encode(o.prefix,b)}}return null}getAddress(e){return __awaiter$1(this,void 0,void 0,function*(){if(e==null&&(e=60),e===60)try{const c=yield this._fetch("0x3b3b57de");return c==="0x"||c===HashZero?null:this.provider.formatter.callAddress(c)}catch(c){if(c.code===Logger.errors.CALL_EXCEPTION)return null;throw c}const n=yield this._fetchBytes("0xf1cb7e06",bytes32ify(e));if(n==null||n==="0x")return null;const o=this._getAddress(e,n);return o==null&&logger$4.throwError("invalid or unsupported coin data",Logger.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`,coinType:e,data:n}),o})}getAvatar(){return __awaiter$1(this,void 0,void 0,function*(){const e=[{type:"name",content:this.name}];try{const n=yield this.getText("avatar");if(n==null)return null;for(let o=0;o<matchers.length;o++){const c=n.match(matchers[o]);if(c==null)continue;const a=c[1].toLowerCase();switch(a){case"https":return e.push({type:"url",content:n}),{linkage:e,url:n};case"data":return e.push({type:"data",content:n}),{linkage:e,url:n};case"ipfs":return e.push({type:"ipfs",content:n}),{linkage:e,url:getIpfsLink(n)};case"erc721":case"erc1155":{const l=a==="erc721"?"0xc87b56dd":"0x0e89341c";e.push({type:a,content:n});const b=this._resolvedAddress||(yield this.getAddress()),v=(c[2]||"").split("/");if(v.length!==2)return null;const A=yield this.provider.formatter.address(v[0]),S=hexZeroPad(BigNumber.from(v[1]).toHexString(),32);if(a==="erc721"){const F=this.provider.formatter.callAddress(yield this.provider.call({to:A,data:hexConcat(["0x6352211e",S])}));if(b!==F)return null;e.push({type:"owner",content:F})}else if(a==="erc1155"){const F=BigNumber.from(yield this.provider.call({to:A,data:hexConcat(["0x00fdd58e",hexZeroPad(b,32),S])}));if(F.isZero())return null;e.push({type:"balance",content:F.toString()})}const M={to:this.provider.formatter.address(v[0]),data:hexConcat([l,S])};let B=_parseString(yield this.provider.call(M),0);if(B==null)return null;e.push({type:"metadata-url-base",content:B}),a==="erc1155"&&(B=B.replace("{id}",S.substring(2)),e.push({type:"metadata-url-expanded",content:B})),B.match(/^ipfs:/i)&&(B=getIpfsLink(B)),e.push({type:"metadata-url",content:B});const P=yield fetchJson(B);if(!P)return null;e.push({type:"metadata",content:JSON.stringify(P)});let L=P.image;if(typeof L!="string")return null;if(!L.match(/^(https:\/\/|data:)/i)){if(L.match(matcherIpfs)==null)return null;e.push({type:"url-ipfs",content:L}),L=getIpfsLink(L)}return e.push({type:"url",content:L}),{linkage:e,url:L}}}}}catch{}return null})}getContentHash(){return __awaiter$1(this,void 0,void 0,function*(){const e=yield this._fetchBytes("0xbc1c58d1");if(e==null||e==="0x")return null;const n=e.match(/^0xe3010170(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(n){const l=parseInt(n[3],16);if(n[4].length===l*2)return"ipfs://"+Base58.encode("0x"+n[1])}const o=e.match(/^0xe5010172(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(o){const l=parseInt(o[3],16);if(o[4].length===l*2)return"ipns://"+Base58.encode("0x"+o[1])}const c=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(c&&c[1].length===32*2)return"bzz://"+c[1];const a=e.match(/^0x90b2c605([0-9a-f]*)$/);if(a&&a[1].length===34*2){const l={"=":"","+":"-","/":"_"};return"sia://"+encode$m("0x"+a[1]).replace(/[=+\/]/g,v=>l[v])}return logger$4.throwError("invalid or unsupported content hash data",Logger.errors.UNSUPPORTED_OPERATION,{operation:"getContentHash()",data:e})})}getText(e){return __awaiter$1(this,void 0,void 0,function*(){let n=toUtf8Bytes(e);n=concat([bytes32ify(64),bytes32ify(n.length),n]),n.length%32!==0&&(n=concat([n,hexZeroPad("0x",32-e.length%32)]));const o=yield this._fetchBytes("0x59d1d43c",hexlify(n));return o==null||o==="0x"?null:toUtf8String(o)})}}let defaultFormatter=null,nextPollId=1;class BaseProvider extends Provider{constructor(e){if(super(),this._events=[],this._emitted={block:-2},this.disableCcipRead=!1,this.formatter=new.target.getFormatter(),defineReadOnly(this,"anyNetwork",e==="any"),this.anyNetwork&&(e=this.detectNetwork()),e instanceof Promise)this._networkPromise=e,e.catch(n=>{}),this._ready().catch(n=>{});else{const n=getStatic(new.target,"getNetwork")(e);n?(defineReadOnly(this,"_network",n),this.emit("network",n,null)):logger$4.throwArgumentError("invalid network","network",e)}this._maxInternalBlockNumber=-1024,this._lastBlockNumber=-2,this._maxFilterBlockRange=10,this._pollingInterval=4e3,this._fastQueryDate=0}_ready(){return __awaiter$1(this,void 0,void 0,function*(){if(this._network==null){let e=null;if(this._networkPromise)try{e=yield this._networkPromise}catch{}e==null&&(e=yield this.detectNetwork()),e||logger$4.throwError("no network detected",Logger.errors.UNKNOWN_ERROR,{}),this._network==null&&(this.anyNetwork?this._network=e:defineReadOnly(this,"_network",e),this.emit("network",e,null))}return this._network})}get ready(){return poll(()=>this._ready().then(e=>e,e=>{if(!(e.code===Logger.errors.NETWORK_ERROR&&e.event==="noNetwork"))throw e}))}static getFormatter(){return defaultFormatter==null&&(defaultFormatter=new Formatter),defaultFormatter}static getNetwork(e){return getNetwork(e??"homestead")}ccipReadFetch(e,n,o){return __awaiter$1(this,void 0,void 0,function*(){if(this.disableCcipRead||o.length===0)return null;const c=e.to.toLowerCase(),a=n.toLowerCase(),l=[];for(let b=0;b<o.length;b++){const v=o[b],A=v.replace("{sender}",c).replace("{data}",a),S=v.indexOf("{data}")>=0?null:JSON.stringify({data:a,sender:c}),M=yield fetchJson({url:A,errorPassThrough:!0},S,(P,L)=>(P.status=L.statusCode,P));if(M.data)return M.data;const B=M.message||"unknown error";if(M.status>=400&&M.status<500)return logger$4.throwError(`response not found during CCIP fetch: ${B}`,Logger.errors.SERVER_ERROR,{url:v,errorMessage:B});l.push(B)}return logger$4.throwError(`error encountered during CCIP fetch: ${l.map(b=>JSON.stringify(b)).join(", ")}`,Logger.errors.SERVER_ERROR,{urls:o,errorMessages:l})})}_getInternalBlockNumber(e){return __awaiter$1(this,void 0,void 0,function*(){if(yield this._ready(),e>0)for(;this._internalBlockNumber;){const c=this._internalBlockNumber;try{const a=yield c;if(getTime()-a.respTime<=e)return a.blockNumber;break}catch{if(this._internalBlockNumber===c)break}}const n=getTime(),o=resolveProperties({blockNumber:this.perform("getBlockNumber",{}),networkError:this.getNetwork().then(c=>null,c=>c)}).then(({blockNumber:c,networkError:a})=>{if(a)throw this._internalBlockNumber===o&&(this._internalBlockNumber=null),a;const l=getTime();return c=BigNumber.from(c).toNumber(),c<this._maxInternalBlockNumber&&(c=this._maxInternalBlockNumber),this._maxInternalBlockNumber=c,this._setFastBlockNumber(c),{blockNumber:c,reqTime:n,respTime:l}});return this._internalBlockNumber=o,o.catch(c=>{this._internalBlockNumber===o&&(this._internalBlockNumber=null)}),(yield o).blockNumber})}poll(){return __awaiter$1(this,void 0,void 0,function*(){const e=nextPollId++,n=[];let o=null;try{o=yield this._getInternalBlockNumber(100+this.pollingInterval/2)}catch(c){this.emit("error",c);return}if(this._setFastBlockNumber(o),this.emit("poll",e,o),o===this._lastBlockNumber){this.emit("didPoll",e);return}if(this._emitted.block===-2&&(this._emitted.block=o-1),Math.abs(this._emitted.block-o)>1e3)logger$4.warn(`network block skew detected; skipping block events (emitted=${this._emitted.block} blockNumber${o})`),this.emit("error",logger$4.makeError("network block skew detected",Logger.errors.NETWORK_ERROR,{blockNumber:o,event:"blockSkew",previousBlockNumber:this._emitted.block})),this.emit("block",o);else for(let c=this._emitted.block+1;c<=o;c++)this.emit("block",c);this._emitted.block!==o&&(this._emitted.block=o,Object.keys(this._emitted).forEach(c=>{if(c==="block")return;const a=this._emitted[c];a!=="pending"&&o-a>12&&delete this._emitted[c]})),this._lastBlockNumber===-2&&(this._lastBlockNumber=o-1),this._events.forEach(c=>{switch(c.type){case"tx":{const a=c.hash;let l=this.getTransactionReceipt(a).then(b=>(!b||b.blockNumber==null||(this._emitted["t:"+a]=b.blockNumber,this.emit(a,b)),null)).catch(b=>{this.emit("error",b)});n.push(l);break}case"filter":{if(!c._inflight){c._inflight=!0,c._lastBlockNumber===-2&&(c._lastBlockNumber=o-1);const a=c.filter;a.fromBlock=c._lastBlockNumber+1,a.toBlock=o;const l=a.toBlock-this._maxFilterBlockRange;l>a.fromBlock&&(a.fromBlock=l),a.fromBlock<0&&(a.fromBlock=0);const b=this.getLogs(a).then(v=>{c._inflight=!1,v.length!==0&&v.forEach(A=>{A.blockNumber>c._lastBlockNumber&&(c._lastBlockNumber=A.blockNumber),this._emitted["b:"+A.blockHash]=A.blockNumber,this._emitted["t:"+A.transactionHash]=A.blockNumber,this.emit(a,A)})}).catch(v=>{this.emit("error",v),c._inflight=!1});n.push(b)}break}}}),this._lastBlockNumber=o,Promise.all(n).then(()=>{this.emit("didPoll",e)}).catch(c=>{this.emit("error",c)})})}resetEventsBlock(e){this._lastBlockNumber=e-1,this.polling&&this.poll()}get network(){return this._network}detectNetwork(){return __awaiter$1(this,void 0,void 0,function*(){return logger$4.throwError("provider does not support network detection",Logger.errors.UNSUPPORTED_OPERATION,{operation:"provider.detectNetwork"})})}getNetwork(){return __awaiter$1(this,void 0,void 0,function*(){const e=yield this._ready(),n=yield this.detectNetwork();if(e.chainId!==n.chainId){if(this.anyNetwork)return this._network=n,this._lastBlockNumber=-2,this._fastBlockNumber=null,this._fastBlockNumberPromise=null,this._fastQueryDate=0,this._emitted.block=-2,this._maxInternalBlockNumber=-1024,this._internalBlockNumber=null,this.emit("network",n,e),yield stall(0),this._network;const o=logger$4.makeError("underlying network changed",Logger.errors.NETWORK_ERROR,{event:"changed",network:e,detectedNetwork:n});throw this.emit("error",o),o}return e})}get blockNumber(){return this._getInternalBlockNumber(100+this.pollingInterval/2).then(e=>{this._setFastBlockNumber(e)},e=>{}),this._fastBlockNumber!=null?this._fastBlockNumber:-1}get polling(){return this._poller!=null}set polling(e){e&&!this._poller?(this._poller=setInterval(()=>{this.poll()},this.pollingInterval),this._bootstrapPoll||(this._bootstrapPoll=setTimeout(()=>{this.poll(),this._bootstrapPoll=setTimeout(()=>{this._poller||this.poll(),this._bootstrapPoll=null},this.pollingInterval)},0))):!e&&this._poller&&(clearInterval(this._poller),this._poller=null)}get pollingInterval(){return this._pollingInterval}set pollingInterval(e){if(typeof e!="number"||e<=0||parseInt(String(e))!=e)throw new Error("invalid polling interval");this._pollingInterval=e,this._poller&&(clearInterval(this._poller),this._poller=setInterval(()=>{this.poll()},this._pollingInterval))}_getFastBlockNumber(){const e=getTime();return e-this._fastQueryDate>2*this._pollingInterval&&(this._fastQueryDate=e,this._fastBlockNumberPromise=this.getBlockNumber().then(n=>((this._fastBlockNumber==null||n>this._fastBlockNumber)&&(this._fastBlockNumber=n),this._fastBlockNumber))),this._fastBlockNumberPromise}_setFastBlockNumber(e){this._fastBlockNumber!=null&&e<this._fastBlockNumber||(this._fastQueryDate=getTime(),(this._fastBlockNumber==null||e>this._fastBlockNumber)&&(this._fastBlockNumber=e,this._fastBlockNumberPromise=Promise.resolve(e)))}waitForTransaction(e,n,o){return __awaiter$1(this,void 0,void 0,function*(){return this._waitForTransaction(e,n??1,o||0,null)})}_waitForTransaction(e,n,o,c){return __awaiter$1(this,void 0,void 0,function*(){const a=yield this.getTransactionReceipt(e);return(a?a.confirmations:0)>=n?a:new Promise((l,b)=>{const v=[];let A=!1;const S=function(){return A?!0:(A=!0,v.forEach(B=>{B()}),!1)},M=B=>{B.confirmations<n||S()||l(B)};if(this.on(e,M),v.push(()=>{this.removeListener(e,M)}),c){let B=c.startBlock,P=null;const L=F=>__awaiter$1(this,void 0,void 0,function*(){A||(yield stall(1e3),this.getTransactionCount(c.from).then(U=>__awaiter$1(this,void 0,void 0,function*(){if(!A){if(U<=c.nonce)B=F;else{{const q=yield this.getTransaction(e);if(q&&q.blockNumber!=null)return}for(P==null&&(P=B-3,P<c.startBlock&&(P=c.startBlock));P<=F;){if(A)return;const q=yield this.getBlockWithTransactions(P);for(let X=0;X<q.transactions.length;X++){const ee=q.transactions[X];if(ee.hash===e)return;if(ee.from===c.from&&ee.nonce===c.nonce){if(A)return;const te=yield this.waitForTransaction(ee.hash,n);if(S())return;let ce="replaced";ee.data===c.data&&ee.to===c.to&&ee.value.eq(c.value)?ce="repriced":ee.data==="0x"&&ee.from===ee.to&&ee.value.isZero()&&(ce="cancelled"),b(logger$4.makeError("transaction was replaced",Logger.errors.TRANSACTION_REPLACED,{cancelled:ce==="replaced"||ce==="cancelled",reason:ce,replacement:this._wrapTransaction(ee),hash:e,receipt:te}));return}}P++}}A||this.once("block",L)}}),U=>{A||this.once("block",L)}))});if(A)return;this.once("block",L),v.push(()=>{this.removeListener("block",L)})}if(typeof o=="number"&&o>0){const B=setTimeout(()=>{S()||b(logger$4.makeError("timeout exceeded",Logger.errors.TIMEOUT,{timeout:o}))},o);B.unref&&B.unref(),v.push(()=>{clearTimeout(B)})}})})}getBlockNumber(){return __awaiter$1(this,void 0,void 0,function*(){return this._getInternalBlockNumber(0)})}getGasPrice(){return __awaiter$1(this,void 0,void 0,function*(){yield this.getNetwork();const e=yield this.perform("getGasPrice",{});try{return BigNumber.from(e)}catch(n){return logger$4.throwError("bad result from backend",Logger.errors.SERVER_ERROR,{method:"getGasPrice",result:e,error:n})}})}getBalance(e,n){return __awaiter$1(this,void 0,void 0,function*(){yield this.getNetwork();const o=yield resolveProperties({address:this._getAddress(e),blockTag:this._getBlockTag(n)}),c=yield this.perform("getBalance",o);try{return BigNumber.from(c)}catch(a){return logger$4.throwError("bad result from backend",Logger.errors.SERVER_ERROR,{method:"getBalance",params:o,result:c,error:a})}})}getTransactionCount(e,n){return __awaiter$1(this,void 0,void 0,function*(){yield this.getNetwork();const o=yield resolveProperties({address:this._getAddress(e),blockTag:this._getBlockTag(n)}),c=yield this.perform("getTransactionCount",o);try{return BigNumber.from(c).toNumber()}catch(a){return logger$4.throwError("bad result from backend",Logger.errors.SERVER_ERROR,{method:"getTransactionCount",params:o,result:c,error:a})}})}getCode(e,n){return __awaiter$1(this,void 0,void 0,function*(){yield this.getNetwork();const o=yield resolveProperties({address:this._getAddress(e),blockTag:this._getBlockTag(n)}),c=yield this.perform("getCode",o);try{return hexlify(c)}catch(a){return logger$4.throwError("bad result from backend",Logger.errors.SERVER_ERROR,{method:"getCode",params:o,result:c,error:a})}})}getStorageAt(e,n,o){return __awaiter$1(this,void 0,void 0,function*(){yield this.getNetwork();const c=yield resolveProperties({address:this._getAddress(e),blockTag:this._getBlockTag(o),position:Promise.resolve(n).then(l=>hexValue(l))}),a=yield this.perform("getStorageAt",c);try{return hexlify(a)}catch(l){return logger$4.throwError("bad result from backend",Logger.errors.SERVER_ERROR,{method:"getStorageAt",params:c,result:a,error:l})}})}_wrapTransaction(e,n,o){if(n!=null&&hexDataLength(n)!==32)throw new Error("invalid response - sendTransaction");const c=e;return n!=null&&e.hash!==n&&logger$4.throwError("Transaction hash mismatch from Provider.sendTransaction.",Logger.errors.UNKNOWN_ERROR,{expectedHash:e.hash,returnedHash:n}),c.wait=(a,l)=>__awaiter$1(this,void 0,void 0,function*(){a==null&&(a=1),l==null&&(l=0);let b;a!==0&&o!=null&&(b={data:e.data,from:e.from,nonce:e.nonce,to:e.to,value:e.value,startBlock:o});const v=yield this._waitForTransaction(e.hash,a,l,b);return v==null&&a===0?null:(this._emitted["t:"+e.hash]=v.blockNumber,v.status===0&&logger$4.throwError("transaction failed",Logger.errors.CALL_EXCEPTION,{transactionHash:e.hash,transaction:e,receipt:v}),v)}),c}sendTransaction(e){return __awaiter$1(this,void 0,void 0,function*(){yield this.getNetwork();const n=yield Promise.resolve(e).then(a=>hexlify(a)),o=this.formatter.transaction(e);o.confirmations==null&&(o.confirmations=0);const c=yield this._getInternalBlockNumber(100+2*this.pollingInterval);try{const a=yield this.perform("sendTransaction",{signedTransaction:n});return this._wrapTransaction(o,a,c)}catch(a){throw a.transaction=o,a.transactionHash=o.hash,a}})}_getTransactionRequest(e){return __awaiter$1(this,void 0,void 0,function*(){const n=yield e,o={};return["from","to"].forEach(c=>{n[c]!=null&&(o[c]=Promise.resolve(n[c]).then(a=>a?this._getAddress(a):null))}),["gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","value"].forEach(c=>{n[c]!=null&&(o[c]=Promise.resolve(n[c]).then(a=>a?BigNumber.from(a):null))}),["type"].forEach(c=>{n[c]!=null&&(o[c]=Promise.resolve(n[c]).then(a=>a??null))}),n.accessList&&(o.accessList=this.formatter.accessList(n.accessList)),["data"].forEach(c=>{n[c]!=null&&(o[c]=Promise.resolve(n[c]).then(a=>a?hexlify(a):null))}),this.formatter.transactionRequest(yield resolveProperties(o))})}_getFilter(e){return __awaiter$1(this,void 0,void 0,function*(){e=yield e;const n={};return e.address!=null&&(n.address=this._getAddress(e.address)),["blockHash","topics"].forEach(o=>{e[o]!=null&&(n[o]=e[o])}),["fromBlock","toBlock"].forEach(o=>{e[o]!=null&&(n[o]=this._getBlockTag(e[o]))}),this.formatter.filter(yield resolveProperties(n))})}_call(e,n,o){return __awaiter$1(this,void 0,void 0,function*(){o>=MAX_CCIP_REDIRECTS&&logger$4.throwError("CCIP read exceeded maximum redirections",Logger.errors.SERVER_ERROR,{redirects:o,transaction:e});const c=e.to,a=yield this.perform("call",{transaction:e,blockTag:n});if(o>=0&&n==="latest"&&c!=null&&a.substring(0,10)==="0x556f1830"&&hexDataLength(a)%32===4)try{const l=hexDataSlice(a,4),b=hexDataSlice(l,0,32);BigNumber.from(b).eq(c)||logger$4.throwError("CCIP Read sender did not match",Logger.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:a});const v=[],A=BigNumber.from(hexDataSlice(l,32,64)).toNumber(),S=BigNumber.from(hexDataSlice(l,A,A+32)).toNumber(),M=hexDataSlice(l,A+32);for(let q=0;q<S;q++){const X=_parseString(M,q*32);X==null&&logger$4.throwError("CCIP Read contained corrupt URL string",Logger.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:a}),v.push(X)}const B=_parseBytes(l,64);BigNumber.from(hexDataSlice(l,100,128)).isZero()||logger$4.throwError("CCIP Read callback selector included junk",Logger.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:a});const P=hexDataSlice(l,96,100),L=_parseBytes(l,128),F=yield this.ccipReadFetch(e,B,v);F==null&&logger$4.throwError("CCIP Read disabled or provided no URLs",Logger.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:a});const U={to:c,data:hexConcat([P,encodeBytes([F,L])])};return this._call(U,n,o+1)}catch(l){if(l.code===Logger.errors.SERVER_ERROR)throw l}try{return hexlify(a)}catch(l){return logger$4.throwError("bad result from backend",Logger.errors.SERVER_ERROR,{method:"call",params:{transaction:e,blockTag:n},result:a,error:l})}})}call(e,n){return __awaiter$1(this,void 0,void 0,function*(){yield this.getNetwork();const o=yield resolveProperties({transaction:this._getTransactionRequest(e),blockTag:this._getBlockTag(n),ccipReadEnabled:Promise.resolve(e.ccipReadEnabled)});return this._call(o.transaction,o.blockTag,o.ccipReadEnabled?0:-1)})}estimateGas(e){return __awaiter$1(this,void 0,void 0,function*(){yield this.getNetwork();const n=yield resolveProperties({transaction:this._getTransactionRequest(e)}),o=yield this.perform("estimateGas",n);try{return BigNumber.from(o)}catch(c){return logger$4.throwError("bad result from backend",Logger.errors.SERVER_ERROR,{method:"estimateGas",params:n,result:o,error:c})}})}_getAddress(e){return __awaiter$1(this,void 0,void 0,function*(){e=yield e,typeof e!="string"&&logger$4.throwArgumentError("invalid address or ENS name","name",e);const n=yield this.resolveName(e);return n==null&&logger$4.throwError("ENS name not configured",Logger.errors.UNSUPPORTED_OPERATION,{operation:`resolveName(${JSON.stringify(e)})`}),n})}_getBlock(e,n){return __awaiter$1(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;let o=-128;const c={includeTransactions:!!n};if(isHexString(e,32))c.blockHash=e;else try{c.blockTag=yield this._getBlockTag(e),isHexString(c.blockTag)&&(o=parseInt(c.blockTag.substring(2),16))}catch{logger$4.throwArgumentError("invalid block hash or block tag","blockHashOrBlockTag",e)}return poll(()=>__awaiter$1(this,void 0,void 0,function*(){const a=yield this.perform("getBlock",c);if(a==null)return c.blockHash!=null&&this._emitted["b:"+c.blockHash]==null||c.blockTag!=null&&o>this._emitted.block?null:void 0;if(n){let l=null;for(let v=0;v<a.transactions.length;v++){const A=a.transactions[v];if(A.blockNumber==null)A.confirmations=0;else if(A.confirmations==null){l==null&&(l=yield this._getInternalBlockNumber(100+2*this.pollingInterval));let S=l-A.blockNumber+1;S<=0&&(S=1),A.confirmations=S}}const b=this.formatter.blockWithTransactions(a);return b.transactions=b.transactions.map(v=>this._wrapTransaction(v)),b}return this.formatter.block(a)}),{oncePoll:this})})}getBlock(e){return this._getBlock(e,!1)}getBlockWithTransactions(e){return this._getBlock(e,!0)}getTransaction(e){return __awaiter$1(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;const n={transactionHash:this.formatter.hash(e,!0)};return poll(()=>__awaiter$1(this,void 0,void 0,function*(){const o=yield this.perform("getTransaction",n);if(o==null)return this._emitted["t:"+e]==null?null:void 0;const c=this.formatter.transactionResponse(o);if(c.blockNumber==null)c.confirmations=0;else if(c.confirmations==null){let l=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-c.blockNumber+1;l<=0&&(l=1),c.confirmations=l}return this._wrapTransaction(c)}),{oncePoll:this})})}getTransactionReceipt(e){return __awaiter$1(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;const n={transactionHash:this.formatter.hash(e,!0)};return poll(()=>__awaiter$1(this,void 0,void 0,function*(){const o=yield this.perform("getTransactionReceipt",n);if(o==null)return this._emitted["t:"+e]==null?null:void 0;if(o.blockHash==null)return;const c=this.formatter.receipt(o);if(c.blockNumber==null)c.confirmations=0;else if(c.confirmations==null){let l=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-c.blockNumber+1;l<=0&&(l=1),c.confirmations=l}return c}),{oncePoll:this})})}getLogs(e){return __awaiter$1(this,void 0,void 0,function*(){yield this.getNetwork();const n=yield resolveProperties({filter:this._getFilter(e)}),o=yield this.perform("getLogs",n);return o.forEach(c=>{c.removed==null&&(c.removed=!1)}),Formatter.arrayOf(this.formatter.filterLog.bind(this.formatter))(o)})}getEtherPrice(){return __awaiter$1(this,void 0,void 0,function*(){return yield this.getNetwork(),this.perform("getEtherPrice",{})})}_getBlockTag(e){return __awaiter$1(this,void 0,void 0,function*(){if(e=yield e,typeof e=="number"&&e<0){e%1&&logger$4.throwArgumentError("invalid BlockTag","blockTag",e);let n=yield this._getInternalBlockNumber(100+2*this.pollingInterval);return n+=e,n<0&&(n=0),this.formatter.blockTag(n)}return this.formatter.blockTag(e)})}getResolver(e){return __awaiter$1(this,void 0,void 0,function*(){let n=e;for(;;){if(n===""||n==="."||e!=="eth"&&n==="eth")return null;const o=yield this._getResolver(n,"getResolver");if(o!=null){const c=new Resolver(this,o,e);return n!==e&&!(yield c.supportsWildcard())?null:c}n=n.split(".").slice(1).join(".")}})}_getResolver(e,n){return __awaiter$1(this,void 0,void 0,function*(){n==null&&(n="ENS");const o=yield this.getNetwork();o.ensAddress||logger$4.throwError("network does not support ENS",Logger.errors.UNSUPPORTED_OPERATION,{operation:n,network:o.name});try{const c=yield this.call({to:o.ensAddress,data:"0x0178b8bf"+namehash(e).substring(2)});return this.formatter.callAddress(c)}catch{}return null})}resolveName(e){return __awaiter$1(this,void 0,void 0,function*(){e=yield e;try{return Promise.resolve(this.formatter.address(e))}catch(o){if(isHexString(e))throw o}typeof e!="string"&&logger$4.throwArgumentError("invalid ENS name","name",e);const n=yield this.getResolver(e);return n?yield n.getAddress():null})}lookupAddress(e){return __awaiter$1(this,void 0,void 0,function*(){e=yield e,e=this.formatter.address(e);const n=e.substring(2).toLowerCase()+".addr.reverse",o=yield this._getResolver(n,"lookupAddress");if(o==null)return null;const c=_parseString(yield this.call({to:o,data:"0x691f3431"+namehash(n).substring(2)}),0);return(yield this.resolveName(c))!=e?null:c})}getAvatar(e){return __awaiter$1(this,void 0,void 0,function*(){let n=null;if(isHexString(e)){const a=this.formatter.address(e).substring(2).toLowerCase()+".addr.reverse",l=yield this._getResolver(a,"getAvatar");if(!l)return null;n=new Resolver(this,l,a);try{const b=yield n.getAvatar();if(b)return b.url}catch(b){if(b.code!==Logger.errors.CALL_EXCEPTION)throw b}try{const b=_parseString(yield this.call({to:l,data:"0x691f3431"+namehash(a).substring(2)}),0);n=yield this.getResolver(b)}catch(b){if(b.code!==Logger.errors.CALL_EXCEPTION)throw b;return null}}else if(n=yield this.getResolver(e),!n)return null;const o=yield n.getAvatar();return o==null?null:o.url})}perform(e,n){return logger$4.throwError(e+" not implemented",Logger.errors.NOT_IMPLEMENTED,{operation:e})}_startEvent(e){this.polling=this._events.filter(n=>n.pollable()).length>0}_stopEvent(e){this.polling=this._events.filter(n=>n.pollable()).length>0}_addEventListener(e,n,o){const c=new Event(getEventTag(e),n,o);return this._events.push(c),this._startEvent(c),this}on(e,n){return this._addEventListener(e,n,!1)}once(e,n){return this._addEventListener(e,n,!0)}emit(e,...n){let o=!1,c=[],a=getEventTag(e);return this._events=this._events.filter(l=>l.tag!==a?!0:(setTimeout(()=>{l.listener.apply(this,n)},0),o=!0,l.once?(c.push(l),!1):!0)),c.forEach(l=>{this._stopEvent(l)}),o}listenerCount(e){if(!e)return this._events.length;let n=getEventTag(e);return this._events.filter(o=>o.tag===n).length}listeners(e){if(e==null)return this._events.map(o=>o.listener);let n=getEventTag(e);return this._events.filter(o=>o.tag===n).map(o=>o.listener)}off(e,n){if(n==null)return this.removeAllListeners(e);const o=[];let c=!1,a=getEventTag(e);return this._events=this._events.filter(l=>l.tag!==a||l.listener!=n||c?!0:(c=!0,o.push(l),!1)),o.forEach(l=>{this._stopEvent(l)}),this}removeAllListeners(e){let n=[];if(e==null)n=this._events,this._events=[];else{const o=getEventTag(e);this._events=this._events.filter(c=>c.tag!==o?!0:(n.push(c),!1))}return n.forEach(o=>{this._stopEvent(o)}),this}}var __awaiter=function(t,e,n,o){function c(a){return a instanceof n?a:new n(function(l){l(a)})}return new(n||(n=Promise))(function(a,l){function b(S){try{A(o.next(S))}catch(M){l(M)}}function v(S){try{A(o.throw(S))}catch(M){l(M)}}function A(S){S.done?a(S.value):c(S.value).then(b,v)}A((o=o.apply(t,e||[])).next())})};const logger$3=new Logger(version$5),errorGas=["call","estimateGas"];function spelunk(t,e){if(t==null)return null;if(typeof t.message=="string"&&t.message.match("reverted")){const n=isHexString(t.data)?t.data:null;if(!e||n)return{message:t.message,data:n}}if(typeof t=="object"){for(const n in t){const o=spelunk(t[n],e);if(o)return o}return null}if(typeof t=="string")try{return spelunk(JSON.parse(t),e)}catch{}return null}function checkError(t,e,n){const o=n.transaction||n.signedTransaction;if(t==="call"){const a=spelunk(e,!0);if(a)return a.data;logger$3.throwError("missing revert data in call exception; Transaction reverted without a reason string",Logger.errors.CALL_EXCEPTION,{data:"0x",transaction:o,error:e})}if(t==="estimateGas"){let a=spelunk(e.body,!1);a==null&&(a=spelunk(e,!1)),a&&logger$3.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",Logger.errors.UNPREDICTABLE_GAS_LIMIT,{reason:a.message,method:t,transaction:o,error:e})}let c=e.message;throw e.code===Logger.errors.SERVER_ERROR&&e.error&&typeof e.error.message=="string"?c=e.error.message:typeof e.body=="string"?c=e.body:typeof e.responseText=="string"&&(c=e.responseText),c=(c||"").toLowerCase(),c.match(/insufficient funds|base fee exceeds gas limit|InsufficientFunds/i)&&logger$3.throwError("insufficient funds for intrinsic transaction cost",Logger.errors.INSUFFICIENT_FUNDS,{error:e,method:t,transaction:o}),c.match(/nonce (is )?too low/i)&&logger$3.throwError("nonce has already been used",Logger.errors.NONCE_EXPIRED,{error:e,method:t,transaction:o}),c.match(/replacement transaction underpriced|transaction gas price.*too low/i)&&logger$3.throwError("replacement fee too low",Logger.errors.REPLACEMENT_UNDERPRICED,{error:e,method:t,transaction:o}),c.match(/only replay-protected/i)&&logger$3.throwError("legacy pre-eip-155 transactions not supported",Logger.errors.UNSUPPORTED_OPERATION,{error:e,method:t,transaction:o}),errorGas.indexOf(t)>=0&&c.match(/gas required exceeds allowance|always failing transaction|execution reverted|revert/)&&logger$3.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",Logger.errors.UNPREDICTABLE_GAS_LIMIT,{error:e,method:t,transaction:o}),e}function timer(t){return new Promise(function(e){setTimeout(e,t)})}function getResult(t){if(t.error){const e=new Error(t.error.message);throw e.code=t.error.code,e.data=t.error.data,e}return t.result}function getLowerCase(t){return t&&t.toLowerCase()}const _constructorGuard={};class JsonRpcSigner extends Signer{constructor(e,n,o){if(super(),e!==_constructorGuard)throw new Error("do not call the JsonRpcSigner constructor directly; use provider.getSigner");defineReadOnly(this,"provider",n),o==null&&(o=0),typeof o=="string"?(defineReadOnly(this,"_address",this.provider.formatter.address(o)),defineReadOnly(this,"_index",null)):typeof o=="number"?(defineReadOnly(this,"_index",o),defineReadOnly(this,"_address",null)):logger$3.throwArgumentError("invalid address or index","addressOrIndex",o)}connect(e){return logger$3.throwError("cannot alter JSON-RPC Signer connection",Logger.errors.UNSUPPORTED_OPERATION,{operation:"connect"})}connectUnchecked(){return new UncheckedJsonRpcSigner(_constructorGuard,this.provider,this._address||this._index)}getAddress(){return this._address?Promise.resolve(this._address):this.provider.send("eth_accounts",[]).then(e=>(e.length<=this._index&&logger$3.throwError("unknown account #"+this._index,Logger.errors.UNSUPPORTED_OPERATION,{operation:"getAddress"}),this.provider.formatter.address(e[this._index])))}sendUncheckedTransaction(e){e=shallowCopy(e);const n=this.getAddress().then(o=>(o&&(o=o.toLowerCase()),o));if(e.gasLimit==null){const o=shallowCopy(e);o.from=n,e.gasLimit=this.provider.estimateGas(o)}return e.to!=null&&(e.to=Promise.resolve(e.to).then(o=>__awaiter(this,void 0,void 0,function*(){if(o==null)return null;const c=yield this.provider.resolveName(o);return c==null&&logger$3.throwArgumentError("provided ENS name resolves to null","tx.to",o),c}))),resolveProperties({tx:resolveProperties(e),sender:n}).then(({tx:o,sender:c})=>{o.from!=null?o.from.toLowerCase()!==c&&logger$3.throwArgumentError("from address mismatch","transaction",e):o.from=c;const a=this.provider.constructor.hexlifyTransaction(o,{from:!0});return this.provider.send("eth_sendTransaction",[a]).then(l=>l,l=>(typeof l.message=="string"&&l.message.match(/user denied/i)&&logger$3.throwError("user rejected transaction",Logger.errors.ACTION_REJECTED,{action:"sendTransaction",transaction:o}),checkError("sendTransaction",l,a)))})}signTransaction(e){return logger$3.throwError("signing transactions is unsupported",Logger.errors.UNSUPPORTED_OPERATION,{operation:"signTransaction"})}sendTransaction(e){return __awaiter(this,void 0,void 0,function*(){const n=yield this.provider._getInternalBlockNumber(100+2*this.provider.pollingInterval),o=yield this.sendUncheckedTransaction(e);try{return yield poll(()=>__awaiter(this,void 0,void 0,function*(){const c=yield this.provider.getTransaction(o);if(c!==null)return this.provider._wrapTransaction(c,o,n)}),{oncePoll:this.provider})}catch(c){throw c.transactionHash=o,c}})}signMessage(e){return __awaiter(this,void 0,void 0,function*(){const n=typeof e=="string"?toUtf8Bytes(e):e,o=yield this.getAddress();try{return yield this.provider.send("personal_sign",[hexlify(n),o.toLowerCase()])}catch(c){throw typeof c.message=="string"&&c.message.match(/user denied/i)&&logger$3.throwError("user rejected signing",Logger.errors.ACTION_REJECTED,{action:"signMessage",from:o,messageData:e}),c}})}_legacySignMessage(e){return __awaiter(this,void 0,void 0,function*(){const n=typeof e=="string"?toUtf8Bytes(e):e,o=yield this.getAddress();try{return yield this.provider.send("eth_sign",[o.toLowerCase(),hexlify(n)])}catch(c){throw typeof c.message=="string"&&c.message.match(/user denied/i)&&logger$3.throwError("user rejected signing",Logger.errors.ACTION_REJECTED,{action:"_legacySignMessage",from:o,messageData:e}),c}})}_signTypedData(e,n,o){return __awaiter(this,void 0,void 0,function*(){const c=yield TypedDataEncoder.resolveNames(e,n,o,l=>this.provider.resolveName(l)),a=yield this.getAddress();try{return yield this.provider.send("eth_signTypedData_v4",[a.toLowerCase(),JSON.stringify(TypedDataEncoder.getPayload(c.domain,n,c.value))])}catch(l){throw typeof l.message=="string"&&l.message.match(/user denied/i)&&logger$3.throwError("user rejected signing",Logger.errors.ACTION_REJECTED,{action:"_signTypedData",from:a,messageData:{domain:c.domain,types:n,value:c.value}}),l}})}unlock(e){return __awaiter(this,void 0,void 0,function*(){const n=this.provider,o=yield this.getAddress();return n.send("personal_unlockAccount",[o.toLowerCase(),e,null])})}}class UncheckedJsonRpcSigner extends JsonRpcSigner{sendTransaction(e){return this.sendUncheckedTransaction(e).then(n=>({hash:n,nonce:null,gasLimit:null,gasPrice:null,data:null,value:null,chainId:null,confirmations:0,from:null,wait:o=>this.provider.waitForTransaction(n,o)}))}}const allowedTransactionKeys={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0,type:!0,accessList:!0,maxFeePerGas:!0,maxPriorityFeePerGas:!0};class JsonRpcProvider extends BaseProvider{constructor(e,n){let o=n;o==null&&(o=new Promise((c,a)=>{setTimeout(()=>{this.detectNetwork().then(l=>{c(l)},l=>{a(l)})},0)})),super(o),e||(e=getStatic(this.constructor,"defaultUrl")()),typeof e=="string"?defineReadOnly(this,"connection",Object.freeze({url:e})):defineReadOnly(this,"connection",Object.freeze(shallowCopy(e))),this._nextId=42}get _cache(){return this._eventLoopCache==null&&(this._eventLoopCache={}),this._eventLoopCache}static defaultUrl(){return"http://localhost:8545"}detectNetwork(){return this._cache.detectNetwork||(this._cache.detectNetwork=this._uncachedDetectNetwork(),setTimeout(()=>{this._cache.detectNetwork=null},0)),this._cache.detectNetwork}_uncachedDetectNetwork(){return __awaiter(this,void 0,void 0,function*(){yield timer(0);let e=null;try{e=yield this.send("eth_chainId",[])}catch{try{e=yield this.send("net_version",[])}catch{}}if(e!=null){const n=getStatic(this.constructor,"getNetwork");try{return n(BigNumber.from(e).toNumber())}catch(o){return logger$3.throwError("could not detect network",Logger.errors.NETWORK_ERROR,{chainId:e,event:"invalidNetwork",serverError:o})}}return logger$3.throwError("could not detect network",Logger.errors.NETWORK_ERROR,{event:"noNetwork"})})}getSigner(e){return new JsonRpcSigner(_constructorGuard,this,e)}getUncheckedSigner(e){return this.getSigner(e).connectUnchecked()}listAccounts(){return this.send("eth_accounts",[]).then(e=>e.map(n=>this.formatter.address(n)))}send(e,n){const o={method:e,params:n,id:this._nextId++,jsonrpc:"2.0"};this.emit("debug",{action:"request",request:deepCopy(o),provider:this});const c=["eth_chainId","eth_blockNumber"].indexOf(e)>=0;if(c&&this._cache[e])return this._cache[e];const a=fetchJson(this.connection,JSON.stringify(o),getResult).then(l=>(this.emit("debug",{action:"response",request:o,response:l,provider:this}),l),l=>{throw this.emit("debug",{action:"response",error:l,request:o,provider:this}),l});return c&&(this._cache[e]=a,setTimeout(()=>{this._cache[e]=null},0)),a}prepareRequest(e,n){switch(e){case"getBlockNumber":return["eth_blockNumber",[]];case"getGasPrice":return["eth_gasPrice",[]];case"getBalance":return["eth_getBalance",[getLowerCase(n.address),n.blockTag]];case"getTransactionCount":return["eth_getTransactionCount",[getLowerCase(n.address),n.blockTag]];case"getCode":return["eth_getCode",[getLowerCase(n.address),n.blockTag]];case"getStorageAt":return["eth_getStorageAt",[getLowerCase(n.address),hexZeroPad(n.position,32),n.blockTag]];case"sendTransaction":return["eth_sendRawTransaction",[n.signedTransaction]];case"getBlock":return n.blockTag?["eth_getBlockByNumber",[n.blockTag,!!n.includeTransactions]]:n.blockHash?["eth_getBlockByHash",[n.blockHash,!!n.includeTransactions]]:null;case"getTransaction":return["eth_getTransactionByHash",[n.transactionHash]];case"getTransactionReceipt":return["eth_getTransactionReceipt",[n.transactionHash]];case"call":return["eth_call",[getStatic(this.constructor,"hexlifyTransaction")(n.transaction,{from:!0}),n.blockTag]];case"estimateGas":return["eth_estimateGas",[getStatic(this.constructor,"hexlifyTransaction")(n.transaction,{from:!0})]];case"getLogs":return n.filter&&n.filter.address!=null&&(n.filter.address=getLowerCase(n.filter.address)),["eth_getLogs",[n.filter]]}return null}perform(e,n){return __awaiter(this,void 0,void 0,function*(){if(e==="call"||e==="estimateGas"){const c=n.transaction;if(c&&c.type!=null&&BigNumber.from(c.type).isZero()&&c.maxFeePerGas==null&&c.maxPriorityFeePerGas==null){const a=yield this.getFeeData();a.maxFeePerGas==null&&a.maxPriorityFeePerGas==null&&(n=shallowCopy(n),n.transaction=shallowCopy(c),delete n.transaction.type)}}const o=this.prepareRequest(e,n);o==null&&logger$3.throwError(e+" not implemented",Logger.errors.NOT_IMPLEMENTED,{operation:e});try{return yield this.send(o[0],o[1])}catch(c){return checkError(e,c,n)}})}_startEvent(e){e.tag==="pending"&&this._startPending(),super._startEvent(e)}_startPending(){if(this._pendingFilter!=null)return;const e=this,n=this.send("eth_newPendingTransactionFilter",[]);this._pendingFilter=n,n.then(function(o){function c(){e.send("eth_getFilterChanges",[o]).then(function(a){if(e._pendingFilter!=n)return null;let l=Promise.resolve();return a.forEach(function(b){e._emitted["t:"+b.toLowerCase()]="pending",l=l.then(function(){return e.getTransaction(b).then(function(v){return e.emit("pending",v),null})})}),l.then(function(){return timer(1e3)})}).then(function(){if(e._pendingFilter!=n){e.send("eth_uninstallFilter",[o]);return}return setTimeout(function(){c()},0),null}).catch(a=>{})}return c(),o}).catch(o=>{})}_stopEvent(e){e.tag==="pending"&&this.listenerCount("pending")===0&&(this._pendingFilter=null),super._stopEvent(e)}static hexlifyTransaction(e,n){const o=shallowCopy(allowedTransactionKeys);if(n)for(const a in n)n[a]&&(o[a]=!0);checkProperties(e,o);const c={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(function(a){if(e[a]==null)return;const l=hexValue(BigNumber.from(e[a]));a==="gasLimit"&&(a="gas"),c[a]=l}),["from","to","data"].forEach(function(a){e[a]!=null&&(c[a]=hexlify(e[a]))}),e.accessList&&(c.accessList=accessListify(e.accessList)),c}}const logger$2=new Logger(version$5);let _nextId=1;function buildWeb3LegacyFetcher(t,e){const n="Web3LegacyFetcher";return function(o,c){const a={method:o,params:c,id:_nextId++,jsonrpc:"2.0"};return new Promise((l,b)=>{this.emit("debug",{action:"request",fetcher:n,request:deepCopy(a),provider:this}),e(a,(v,A)=>{if(v)return this.emit("debug",{action:"response",fetcher:n,error:v,request:a,provider:this}),b(v);if(this.emit("debug",{action:"response",fetcher:n,request:a,response:A,provider:this}),A.error){const S=new Error(A.error.message);return S.code=A.error.code,S.data=A.error.data,b(S)}l(A.result)})})}}function buildEip1193Fetcher(t){return function(e,n){n==null&&(n=[]);const o={method:e,params:n};return this.emit("debug",{action:"request",fetcher:"Eip1193Fetcher",request:deepCopy(o),provider:this}),t.request(o).then(c=>(this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:o,response:c,provider:this}),c),c=>{throw this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:o,error:c,provider:this}),c})}}class Web3Provider extends JsonRpcProvider{constructor(e,n){e==null&&logger$2.throwArgumentError("missing provider","provider",e);let o=null,c=null,a=null;typeof e=="function"?(o="unknown:",c=e):(o=e.host||e.path||"",!o&&e.isMetaMask&&(o="metamask"),a=e,e.request?(o===""&&(o="eip-1193:"),c=buildEip1193Fetcher(e)):e.sendAsync?c=buildWeb3LegacyFetcher(e,e.sendAsync.bind(e)):e.send?c=buildWeb3LegacyFetcher(e,e.send.bind(e)):logger$2.throwArgumentError("unsupported provider","provider",e),o||(o="unknown:")),super(o,n),defineReadOnly(this,"jsonRpcFetchFunc",c),defineReadOnly(this,"provider",a)}send(e,n){return this.jsonRpcFetchFunc(e,n)}}const version$4="units/5.7.0",logger$1=new Logger(version$4),names=["wei","kwei","mwei","gwei","szabo","finney","ether"];function parseUnits(t,e){if(typeof t!="string"&&logger$1.throwArgumentError("value must be a string","value",t),typeof e=="string"){const n=names.indexOf(e);n!==-1&&(e=3*n)}return parseFixed(t,e??18)}var src$6={},sha256$4={},_md={},_assert={};Object.defineProperty(_assert,"__esModule",{value:!0});_assert.output=_assert.exists=_assert.hash=_assert.bytes=_assert.bool=_assert.number=_assert.isBytes=void 0;function number$1(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`positive integer expected, not ${t}`)}_assert.number=number$1;function bool$1(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}_assert.bool=bool$1;function isBytes$1(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}_assert.isBytes=isBytes$1;function bytes(t,...e){if(!isBytes$1(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${t.length}`)}_assert.bytes=bytes;function hash$3(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");number$1(t.outputLen),number$1(t.blockLen)}_assert.hash=hash$3;function exists(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}_assert.exists=exists;function output(t,e){bytes(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}_assert.output=output;const assert$h={number:number$1,bool:bool$1,bytes,hash:hash$3,exists,output};_assert.default=assert$h;var utils$h={},crypto$6={};Object.defineProperty(crypto$6,"__esModule",{value:!0});crypto$6.crypto=void 0;crypto$6.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.randomBytes=t.wrapXOFConstructorWithOpts=t.wrapConstructorWithOpts=t.wrapConstructor=t.checkOpts=t.Hash=t.concatBytes=t.toBytes=t.utf8ToBytes=t.asyncLoop=t.nextTick=t.hexToBytes=t.bytesToHex=t.byteSwap32=t.byteSwapIfBE=t.byteSwap=t.isLE=t.rotl=t.rotr=t.createView=t.u32=t.u8=t.isBytes=void 0;const e=crypto$6,n=_assert;function o(u){return u instanceof Uint8Array||u!=null&&typeof u=="object"&&u.constructor.name==="Uint8Array"}t.isBytes=o;const c=u=>new Uint8Array(u.buffer,u.byteOffset,u.byteLength);t.u8=c;const a=u=>new Uint32Array(u.buffer,u.byteOffset,Math.floor(u.byteLength/4));t.u32=a;const l=u=>new DataView(u.buffer,u.byteOffset,u.byteLength);t.createView=l;const b=(u,p)=>u<<32-p|u>>>p;t.rotr=b;const v=(u,p)=>u<<p|u>>>32-p>>>0;t.rotl=v,t.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;const A=u=>u<<24&4278190080|u<<8&16711680|u>>>8&65280|u>>>24&255;t.byteSwap=A,t.byteSwapIfBE=t.isLE?u=>u:u=>(0,t.byteSwap)(u);function S(u){for(let p=0;p<u.length;p++)u[p]=(0,t.byteSwap)(u[p])}t.byteSwap32=S;const M=Array.from({length:256},(u,p)=>p.toString(16).padStart(2,"0"));function B(u){(0,n.bytes)(u);let p="";for(let m=0;m<u.length;m++)p+=M[u[m]];return p}t.bytesToHex=B;const P={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function L(u){if(u>=P._0&&u<=P._9)return u-P._0;if(u>=P._A&&u<=P._F)return u-(P._A-10);if(u>=P._a&&u<=P._f)return u-(P._a-10)}function F(u){if(typeof u!="string")throw new Error("hex string expected, got "+typeof u);const p=u.length,m=p/2;if(p%2)throw new Error("padded hex string expected, got unpadded hex of length "+p);const y=new Uint8Array(m);for(let E=0,$=0;E<m;E++,$+=2){const k=L(u.charCodeAt($)),_=L(u.charCodeAt($+1));if(k===void 0||_===void 0){const d=u[$]+u[$+1];throw new Error('hex string expected, got non-hex character "'+d+'" at index '+$)}y[E]=k*16+_}return y}t.hexToBytes=F;const U=async()=>{};t.nextTick=U;async function q(u,p,m){let y=Date.now();for(let E=0;E<u;E++){m(E);const $=Date.now()-y;$>=0&&$<p||(await (0,t.nextTick)(),y+=$)}}t.asyncLoop=q;function X(u){if(typeof u!="string")throw new Error(`utf8ToBytes expected string, got ${typeof u}`);return new Uint8Array(new TextEncoder().encode(u))}t.utf8ToBytes=X;function ee(u){return typeof u=="string"&&(u=X(u)),(0,n.bytes)(u),u}t.toBytes=ee;function te(...u){let p=0;for(let y=0;y<u.length;y++){const E=u[y];(0,n.bytes)(E),p+=E.length}const m=new Uint8Array(p);for(let y=0,E=0;y<u.length;y++){const $=u[y];m.set($,E),E+=$.length}return m}t.concatBytes=te;class ce{clone(){return this._cloneInto()}}t.Hash=ce;const ue={}.toString;function Ae(u,p){if(p!==void 0&&ue.call(p)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(u,p)}t.checkOpts=Ae;function we(u){const p=y=>u().update(ee(y)).digest(),m=u();return p.outputLen=m.outputLen,p.blockLen=m.blockLen,p.create=()=>u(),p}t.wrapConstructor=we;function pe(u){const p=(y,E)=>u(E).update(ee(y)).digest(),m=u({});return p.outputLen=m.outputLen,p.blockLen=m.blockLen,p.create=y=>u(y),p}t.wrapConstructorWithOpts=pe;function Ce(u){const p=(y,E)=>u(E).update(ee(y)).digest(),m=u({});return p.outputLen=m.outputLen,p.blockLen=m.blockLen,p.create=y=>u(y),p}t.wrapXOFConstructorWithOpts=Ce;function T(u=32){if(e.crypto&&typeof e.crypto.getRandomValues=="function")return e.crypto.getRandomValues(new Uint8Array(u));throw new Error("crypto.getRandomValues must be defined")}t.randomBytes=T})(utils$h);Object.defineProperty(_md,"__esModule",{value:!0});_md.HashMD=_md.Maj=_md.Chi=void 0;const _assert_js_1$1=_assert,utils_js_1$5=utils$h;function setBigUint64(t,e,n,o){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,o);const c=BigInt(32),a=BigInt(4294967295),l=Number(n>>c&a),b=Number(n&a),v=o?4:0,A=o?0:4;t.setUint32(e+v,l,o),t.setUint32(e+A,b,o)}const Chi=(t,e,n)=>t&e^~t&n;_md.Chi=Chi;const Maj=(t,e,n)=>t&e^t&n^e&n;_md.Maj=Maj;class HashMD extends utils_js_1$5.Hash{constructor(e,n,o,c){super(),this.blockLen=e,this.outputLen=n,this.padOffset=o,this.isLE=c,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=(0,utils_js_1$5.createView)(this.buffer)}update(e){(0,_assert_js_1$1.exists)(this);const{view:n,buffer:o,blockLen:c}=this;e=(0,utils_js_1$5.toBytes)(e);const a=e.length;for(let l=0;l<a;){const b=Math.min(c-this.pos,a-l);if(b===c){const v=(0,utils_js_1$5.createView)(e);for(;c<=a-l;l+=c)this.process(v,l);continue}o.set(e.subarray(l,l+b),this.pos),this.pos+=b,l+=b,this.pos===c&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){(0,_assert_js_1$1.exists)(this),(0,_assert_js_1$1.output)(e,this),this.finished=!0;const{buffer:n,view:o,blockLen:c,isLE:a}=this;let{pos:l}=this;n[l++]=128,this.buffer.subarray(l).fill(0),this.padOffset>c-l&&(this.process(o,0),l=0);for(let M=l;M<c;M++)n[M]=0;setBigUint64(o,c-8,BigInt(this.length*8),a),this.process(o,0);const b=(0,utils_js_1$5.createView)(e),v=this.outputLen;if(v%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const A=v/4,S=this.get();if(A>S.length)throw new Error("_sha2: outputLen bigger than state");for(let M=0;M<A;M++)b.setUint32(4*M,S[M],a)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const o=e.slice(0,n);return this.destroy(),o}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:o,length:c,finished:a,destroyed:l,pos:b}=this;return e.length=c,e.pos=b,e.finished=a,e.destroyed=l,c%n&&e.buffer.set(o),e}}_md.HashMD=HashMD;Object.defineProperty(sha256$4,"__esModule",{value:!0});sha256$4.sha224=sha256_1$3=sha256$4.sha256=void 0;const _md_js_1$3=_md,utils_js_1$4=utils$h,SHA256_K=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),SHA256_IV=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),SHA256_W=new Uint32Array(64);class SHA256 extends _md_js_1$3.HashMD{constructor(){super(64,32,8,!1),this.A=SHA256_IV[0]|0,this.B=SHA256_IV[1]|0,this.C=SHA256_IV[2]|0,this.D=SHA256_IV[3]|0,this.E=SHA256_IV[4]|0,this.F=SHA256_IV[5]|0,this.G=SHA256_IV[6]|0,this.H=SHA256_IV[7]|0}get(){const{A:e,B:n,C:o,D:c,E:a,F:l,G:b,H:v}=this;return[e,n,o,c,a,l,b,v]}set(e,n,o,c,a,l,b,v){this.A=e|0,this.B=n|0,this.C=o|0,this.D=c|0,this.E=a|0,this.F=l|0,this.G=b|0,this.H=v|0}process(e,n){for(let M=0;M<16;M++,n+=4)SHA256_W[M]=e.getUint32(n,!1);for(let M=16;M<64;M++){const B=SHA256_W[M-15],P=SHA256_W[M-2],L=(0,utils_js_1$4.rotr)(B,7)^(0,utils_js_1$4.rotr)(B,18)^B>>>3,F=(0,utils_js_1$4.rotr)(P,17)^(0,utils_js_1$4.rotr)(P,19)^P>>>10;SHA256_W[M]=F+SHA256_W[M-7]+L+SHA256_W[M-16]|0}let{A:o,B:c,C:a,D:l,E:b,F:v,G:A,H:S}=this;for(let M=0;M<64;M++){const B=(0,utils_js_1$4.rotr)(b,6)^(0,utils_js_1$4.rotr)(b,11)^(0,utils_js_1$4.rotr)(b,25),P=S+B+(0,_md_js_1$3.Chi)(b,v,A)+SHA256_K[M]+SHA256_W[M]|0,F=((0,utils_js_1$4.rotr)(o,2)^(0,utils_js_1$4.rotr)(o,13)^(0,utils_js_1$4.rotr)(o,22))+(0,_md_js_1$3.Maj)(o,c,a)|0;S=A,A=v,v=b,b=l+P|0,l=a,a=c,c=o,o=P+F|0}o=o+this.A|0,c=c+this.B|0,a=a+this.C|0,l=l+this.D|0,b=b+this.E|0,v=v+this.F|0,A=A+this.G|0,S=S+this.H|0,this.set(o,c,a,l,b,v,A,S)}roundClean(){SHA256_W.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class SHA224 extends SHA256{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}var sha256_1$3=sha256$4.sha256=(0,utils_js_1$4.wrapConstructor)(()=>new SHA256);sha256$4.sha224=(0,utils_js_1$4.wrapConstructor)(()=>new SHA224);var sha512$2={},_u64={};Object.defineProperty(_u64,"__esModule",{value:!0});_u64.add5L=_u64.add5H=_u64.add4H=_u64.add4L=_u64.add3H=_u64.add3L=_u64.add=_u64.rotlBL=_u64.rotlBH=_u64.rotlSL=_u64.rotlSH=_u64.rotr32L=_u64.rotr32H=_u64.rotrBL=_u64.rotrBH=_u64.rotrSL=_u64.rotrSH=_u64.shrSL=_u64.shrSH=_u64.toBig=_u64.split=_u64.fromBig=void 0;const U32_MASK64=BigInt(2**32-1),_32n=BigInt(32);function fromBig(t,e=!1){return e?{h:Number(t&U32_MASK64),l:Number(t>>_32n&U32_MASK64)}:{h:Number(t>>_32n&U32_MASK64)|0,l:Number(t&U32_MASK64)|0}}_u64.fromBig=fromBig;function split(t,e=!1){let n=new Uint32Array(t.length),o=new Uint32Array(t.length);for(let c=0;c<t.length;c++){const{h:a,l}=fromBig(t[c],e);[n[c],o[c]]=[a,l]}return[n,o]}_u64.split=split;const toBig=(t,e)=>BigInt(t>>>0)<<_32n|BigInt(e>>>0);_u64.toBig=toBig;const shrSH=(t,e,n)=>t>>>n;_u64.shrSH=shrSH;const shrSL=(t,e,n)=>t<<32-n|e>>>n;_u64.shrSL=shrSL;const rotrSH=(t,e,n)=>t>>>n|e<<32-n;_u64.rotrSH=rotrSH;const rotrSL=(t,e,n)=>t<<32-n|e>>>n;_u64.rotrSL=rotrSL;const rotrBH=(t,e,n)=>t<<64-n|e>>>n-32;_u64.rotrBH=rotrBH;const rotrBL=(t,e,n)=>t>>>n-32|e<<64-n;_u64.rotrBL=rotrBL;const rotr32H=(t,e)=>e;_u64.rotr32H=rotr32H;const rotr32L=(t,e)=>t;_u64.rotr32L=rotr32L;const rotlSH=(t,e,n)=>t<<n|e>>>32-n;_u64.rotlSH=rotlSH;const rotlSL=(t,e,n)=>e<<n|t>>>32-n;_u64.rotlSL=rotlSL;const rotlBH=(t,e,n)=>e<<n-32|t>>>64-n;_u64.rotlBH=rotlBH;const rotlBL=(t,e,n)=>t<<n-32|e>>>64-n;_u64.rotlBL=rotlBL;function add(t,e,n,o){const c=(e>>>0)+(o>>>0);return{h:t+n+(c/2**32|0)|0,l:c|0}}_u64.add=add;const add3L=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0);_u64.add3L=add3L;const add3H=(t,e,n,o)=>e+n+o+(t/2**32|0)|0;_u64.add3H=add3H;const add4L=(t,e,n,o)=>(t>>>0)+(e>>>0)+(n>>>0)+(o>>>0);_u64.add4L=add4L;const add4H=(t,e,n,o,c)=>e+n+o+c+(t/2**32|0)|0;_u64.add4H=add4H;const add5L=(t,e,n,o,c)=>(t>>>0)+(e>>>0)+(n>>>0)+(o>>>0)+(c>>>0);_u64.add5L=add5L;const add5H=(t,e,n,o,c,a)=>e+n+o+c+a+(t/2**32|0)|0;_u64.add5H=add5H;const u64$2={fromBig,split,toBig,shrSH,shrSL,rotrSH,rotrSL,rotrBH,rotrBL,rotr32H,rotr32L,rotlSH,rotlSL,rotlBH,rotlBL,add,add3L,add3H,add4L,add4H,add5H,add5L};_u64.default=u64$2;Object.defineProperty(sha512$2,"__esModule",{value:!0});sha512$2.sha384=sha512$2.sha512_256=sha512$2.sha512_224=sha512_1$2=sha512$2.sha512=sha512$2.SHA512=void 0;const _md_js_1$2=_md,_u64_js_1=_u64,utils_js_1$3=utils$h,[SHA512_Kh,SHA512_Kl]=_u64_js_1.default.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),SHA512_W_H=new Uint32Array(80),SHA512_W_L=new Uint32Array(80);let SHA512$1=class extends _md_js_1$2.HashMD{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:o,Bl:c,Ch:a,Cl:l,Dh:b,Dl:v,Eh:A,El:S,Fh:M,Fl:B,Gh:P,Gl:L,Hh:F,Hl:U}=this;return[e,n,o,c,a,l,b,v,A,S,M,B,P,L,F,U]}set(e,n,o,c,a,l,b,v,A,S,M,B,P,L,F,U){this.Ah=e|0,this.Al=n|0,this.Bh=o|0,this.Bl=c|0,this.Ch=a|0,this.Cl=l|0,this.Dh=b|0,this.Dl=v|0,this.Eh=A|0,this.El=S|0,this.Fh=M|0,this.Fl=B|0,this.Gh=P|0,this.Gl=L|0,this.Hh=F|0,this.Hl=U|0}process(e,n){for(let ee=0;ee<16;ee++,n+=4)SHA512_W_H[ee]=e.getUint32(n),SHA512_W_L[ee]=e.getUint32(n+=4);for(let ee=16;ee<80;ee++){const te=SHA512_W_H[ee-15]|0,ce=SHA512_W_L[ee-15]|0,ue=_u64_js_1.default.rotrSH(te,ce,1)^_u64_js_1.default.rotrSH(te,ce,8)^_u64_js_1.default.shrSH(te,ce,7),Ae=_u64_js_1.default.rotrSL(te,ce,1)^_u64_js_1.default.rotrSL(te,ce,8)^_u64_js_1.default.shrSL(te,ce,7),we=SHA512_W_H[ee-2]|0,pe=SHA512_W_L[ee-2]|0,Ce=_u64_js_1.default.rotrSH(we,pe,19)^_u64_js_1.default.rotrBH(we,pe,61)^_u64_js_1.default.shrSH(we,pe,6),T=_u64_js_1.default.rotrSL(we,pe,19)^_u64_js_1.default.rotrBL(we,pe,61)^_u64_js_1.default.shrSL(we,pe,6),u=_u64_js_1.default.add4L(Ae,T,SHA512_W_L[ee-7],SHA512_W_L[ee-16]),p=_u64_js_1.default.add4H(u,ue,Ce,SHA512_W_H[ee-7],SHA512_W_H[ee-16]);SHA512_W_H[ee]=p|0,SHA512_W_L[ee]=u|0}let{Ah:o,Al:c,Bh:a,Bl:l,Ch:b,Cl:v,Dh:A,Dl:S,Eh:M,El:B,Fh:P,Fl:L,Gh:F,Gl:U,Hh:q,Hl:X}=this;for(let ee=0;ee<80;ee++){const te=_u64_js_1.default.rotrSH(M,B,14)^_u64_js_1.default.rotrSH(M,B,18)^_u64_js_1.default.rotrBH(M,B,41),ce=_u64_js_1.default.rotrSL(M,B,14)^_u64_js_1.default.rotrSL(M,B,18)^_u64_js_1.default.rotrBL(M,B,41),ue=M&P^~M&F,Ae=B&L^~B&U,we=_u64_js_1.default.add5L(X,ce,Ae,SHA512_Kl[ee],SHA512_W_L[ee]),pe=_u64_js_1.default.add5H(we,q,te,ue,SHA512_Kh[ee],SHA512_W_H[ee]),Ce=we|0,T=_u64_js_1.default.rotrSH(o,c,28)^_u64_js_1.default.rotrBH(o,c,34)^_u64_js_1.default.rotrBH(o,c,39),u=_u64_js_1.default.rotrSL(o,c,28)^_u64_js_1.default.rotrBL(o,c,34)^_u64_js_1.default.rotrBL(o,c,39),p=o&a^o&b^a&b,m=c&l^c&v^l&v;q=F|0,X=U|0,F=P|0,U=L|0,P=M|0,L=B|0,{h:M,l:B}=_u64_js_1.default.add(A|0,S|0,pe|0,Ce|0),A=b|0,S=v|0,b=a|0,v=l|0,a=o|0,l=c|0;const y=_u64_js_1.default.add3L(Ce,u,m);o=_u64_js_1.default.add3H(y,pe,T,p),c=y|0}({h:o,l:c}=_u64_js_1.default.add(this.Ah|0,this.Al|0,o|0,c|0)),{h:a,l}=_u64_js_1.default.add(this.Bh|0,this.Bl|0,a|0,l|0),{h:b,l:v}=_u64_js_1.default.add(this.Ch|0,this.Cl|0,b|0,v|0),{h:A,l:S}=_u64_js_1.default.add(this.Dh|0,this.Dl|0,A|0,S|0),{h:M,l:B}=_u64_js_1.default.add(this.Eh|0,this.El|0,M|0,B|0),{h:P,l:L}=_u64_js_1.default.add(this.Fh|0,this.Fl|0,P|0,L|0),{h:F,l:U}=_u64_js_1.default.add(this.Gh|0,this.Gl|0,F|0,U|0),{h:q,l:X}=_u64_js_1.default.add(this.Hh|0,this.Hl|0,q|0,X|0),this.set(o,c,a,l,b,v,A,S,M,B,P,L,F,U,q,X)}roundClean(){SHA512_W_H.fill(0),SHA512_W_L.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};sha512$2.SHA512=SHA512$1;class SHA512_224 extends SHA512$1{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}}class SHA512_256 extends SHA512$1{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}}class SHA384 extends SHA512$1{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}}var sha512_1$2=sha512$2.sha512=(0,utils_js_1$3.wrapConstructor)(()=>new SHA512$1);sha512$2.sha512_224=(0,utils_js_1$3.wrapConstructor)(()=>new SHA512_224);sha512$2.sha512_256=(0,utils_js_1$3.wrapConstructor)(()=>new SHA512_256);sha512$2.sha384=(0,utils_js_1$3.wrapConstructor)(()=>new SHA384);var pbkdf2$2={},hmac$1={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.hmac=t.HMAC=void 0;const e=_assert,n=utils$h;class o extends n.Hash{constructor(l,b){super(),this.finished=!1,this.destroyed=!1,(0,e.hash)(l);const v=(0,n.toBytes)(b);if(this.iHash=l.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const A=this.blockLen,S=new Uint8Array(A);S.set(v.length>A?l.create().update(v).digest():v);for(let M=0;M<S.length;M++)S[M]^=54;this.iHash.update(S),this.oHash=l.create();for(let M=0;M<S.length;M++)S[M]^=106;this.oHash.update(S),S.fill(0)}update(l){return(0,e.exists)(this),this.iHash.update(l),this}digestInto(l){(0,e.exists)(this),(0,e.bytes)(l,this.outputLen),this.finished=!0,this.iHash.digestInto(l),this.oHash.update(l),this.oHash.digestInto(l),this.destroy()}digest(){const l=new Uint8Array(this.oHash.outputLen);return this.digestInto(l),l}_cloneInto(l){l||(l=Object.create(Object.getPrototypeOf(this),{}));const{oHash:b,iHash:v,finished:A,destroyed:S,blockLen:M,outputLen:B}=this;return l=l,l.finished=A,l.destroyed=S,l.blockLen=M,l.outputLen=B,l.oHash=b._cloneInto(l.oHash),l.iHash=v._cloneInto(l.iHash),l}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}t.HMAC=o;const c=(a,l,b)=>new o(a,l).update(b).digest();t.hmac=c,t.hmac.create=(a,l)=>new o(a,l)})(hmac$1);Object.defineProperty(pbkdf2$2,"__esModule",{value:!0});pbkdf2$2.pbkdf2Async=pbkdf2$2.pbkdf2=void 0;const _assert_js_1=_assert,hmac_js_1=hmac$1,utils_js_1$2=utils$h;function pbkdf2Init(t,e,n,o){(0,_assert_js_1.hash)(t);const c=(0,utils_js_1$2.checkOpts)({dkLen:32,asyncTick:10},o),{c:a,dkLen:l,asyncTick:b}=c;if((0,_assert_js_1.number)(a),(0,_assert_js_1.number)(l),(0,_assert_js_1.number)(b),a<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const v=(0,utils_js_1$2.toBytes)(e),A=(0,utils_js_1$2.toBytes)(n),S=new Uint8Array(l),M=hmac_js_1.hmac.create(t,v),B=M._cloneInto().update(A);return{c:a,dkLen:l,asyncTick:b,DK:S,PRF:M,PRFSalt:B}}function pbkdf2Output(t,e,n,o,c){return t.destroy(),e.destroy(),o&&o.destroy(),c.fill(0),n}function pbkdf2$1(t,e,n,o){const{c,dkLen:a,DK:l,PRF:b,PRFSalt:v}=pbkdf2Init(t,e,n,o);let A;const S=new Uint8Array(4),M=(0,utils_js_1$2.createView)(S),B=new Uint8Array(b.outputLen);for(let P=1,L=0;L<a;P++,L+=b.outputLen){const F=l.subarray(L,L+b.outputLen);M.setInt32(0,P,!1),(A=v._cloneInto(A)).update(S).digestInto(B),F.set(B.subarray(0,F.length));for(let U=1;U<c;U++){b._cloneInto(A).update(B).digestInto(B);for(let q=0;q<F.length;q++)F[q]^=B[q]}}return pbkdf2Output(b,v,l,A,B)}pbkdf2$2.pbkdf2=pbkdf2$1;async function pbkdf2Async(t,e,n,o){const{c,dkLen:a,asyncTick:l,DK:b,PRF:v,PRFSalt:A}=pbkdf2Init(t,e,n,o);let S;const M=new Uint8Array(4),B=(0,utils_js_1$2.createView)(M),P=new Uint8Array(v.outputLen);for(let L=1,F=0;F<a;L++,F+=v.outputLen){const U=b.subarray(F,F+v.outputLen);B.setInt32(0,L,!1),(S=A._cloneInto(S)).update(M).digestInto(P),U.set(P.subarray(0,U.length)),await (0,utils_js_1$2.asyncLoop)(c-1,l,()=>{v._cloneInto(S).update(P).digestInto(P);for(let q=0;q<U.length;q++)U[q]^=P[q]})}return pbkdf2Output(v,A,b,S,P)}pbkdf2$2.pbkdf2Async=pbkdf2Async;var _wordlists={};const require$$0$2=["abdikace","abeceda","adresa","agrese","akce","aktovka","alej","alkohol","amputace","ananas","andulka","anekdota","anketa","antika","anulovat","archa","arogance","asfalt","asistent","aspirace","astma","astronom","atlas","atletika","atol","autobus","azyl","babka","bachor","bacil","baculka","badatel","bageta","bagr","bahno","bakterie","balada","baletka","balkon","balonek","balvan","balza","bambus","bankomat","barbar","baret","barman","baroko","barva","baterka","batoh","bavlna","bazalka","bazilika","bazuka","bedna","beran","beseda","bestie","beton","bezinka","bezmoc","beztak","bicykl","bidlo","biftek","bikiny","bilance","biograf","biolog","bitva","bizon","blahobyt","blatouch","blecha","bledule","blesk","blikat","blizna","blokovat","bloudit","blud","bobek","bobr","bodlina","bodnout","bohatost","bojkot","bojovat","bokorys","bolest","borec","borovice","bota","boubel","bouchat","bouda","boule","bourat","boxer","bradavka","brambora","branka","bratr","brepta","briketa","brko","brloh","bronz","broskev","brunetka","brusinka","brzda","brzy","bublina","bubnovat","buchta","buditel","budka","budova","bufet","bujarost","bukvice","buldok","bulva","bunda","bunkr","burza","butik","buvol","buzola","bydlet","bylina","bytovka","bzukot","capart","carevna","cedr","cedule","cejch","cejn","cela","celer","celkem","celnice","cenina","cennost","cenovka","centrum","cenzor","cestopis","cetka","chalupa","chapadlo","charita","chata","chechtat","chemie","chichot","chirurg","chlad","chleba","chlubit","chmel","chmura","chobot","chochol","chodba","cholera","chomout","chopit","choroba","chov","chrapot","chrlit","chrt","chrup","chtivost","chudina","chutnat","chvat","chvilka","chvost","chyba","chystat","chytit","cibule","cigareta","cihelna","cihla","cinkot","cirkus","cisterna","citace","citrus","cizinec","cizost","clona","cokoliv","couvat","ctitel","ctnost","cudnost","cuketa","cukr","cupot","cvaknout","cval","cvik","cvrkot","cyklista","daleko","dareba","datel","datum","dcera","debata","dechovka","decibel","deficit","deflace","dekl","dekret","demokrat","deprese","derby","deska","detektiv","dikobraz","diktovat","dioda","diplom","disk","displej","divadlo","divoch","dlaha","dlouho","dluhopis","dnes","dobro","dobytek","docent","dochutit","dodnes","dohled","dohoda","dohra","dojem","dojnice","doklad","dokola","doktor","dokument","dolar","doleva","dolina","doma","dominant","domluvit","domov","donutit","dopad","dopis","doplnit","doposud","doprovod","dopustit","dorazit","dorost","dort","dosah","doslov","dostatek","dosud","dosyta","dotaz","dotek","dotknout","doufat","doutnat","dovozce","dozadu","doznat","dozorce","drahota","drak","dramatik","dravec","draze","drdol","drobnost","drogerie","drozd","drsnost","drtit","drzost","duben","duchovno","dudek","duha","duhovka","dusit","dusno","dutost","dvojice","dvorec","dynamit","ekolog","ekonomie","elektron","elipsa","email","emise","emoce","empatie","epizoda","epocha","epopej","epos","esej","esence","eskorta","eskymo","etiketa","euforie","evoluce","exekuce","exkurze","expedice","exploze","export","extrakt","facka","fajfka","fakulta","fanatik","fantazie","farmacie","favorit","fazole","federace","fejeton","fenka","fialka","figurant","filozof","filtr","finance","finta","fixace","fjord","flanel","flirt","flotila","fond","fosfor","fotbal","fotka","foton","frakce","freska","fronta","fukar","funkce","fyzika","galeje","garant","genetika","geolog","gilotina","glazura","glejt","golem","golfista","gotika","graf","gramofon","granule","grep","gril","grog","groteska","guma","hadice","hadr","hala","halenka","hanba","hanopis","harfa","harpuna","havran","hebkost","hejkal","hejno","hejtman","hektar","helma","hematom","herec","herna","heslo","hezky","historik","hladovka","hlasivky","hlava","hledat","hlen","hlodavec","hloh","hloupost","hltat","hlubina","hluchota","hmat","hmota","hmyz","hnis","hnojivo","hnout","hoblina","hoboj","hoch","hodiny","hodlat","hodnota","hodovat","hojnost","hokej","holinka","holka","holub","homole","honitba","honorace","horal","horda","horizont","horko","horlivec","hormon","hornina","horoskop","horstvo","hospoda","hostina","hotovost","houba","houf","houpat","houska","hovor","hradba","hranice","hravost","hrazda","hrbolek","hrdina","hrdlo","hrdost","hrnek","hrobka","hromada","hrot","hrouda","hrozen","hrstka","hrubost","hryzat","hubenost","hubnout","hudba","hukot","humr","husita","hustota","hvozd","hybnost","hydrant","hygiena","hymna","hysterik","idylka","ihned","ikona","iluze","imunita","infekce","inflace","inkaso","inovace","inspekce","internet","invalida","investor","inzerce","ironie","jablko","jachta","jahoda","jakmile","jakost","jalovec","jantar","jarmark","jaro","jasan","jasno","jatka","javor","jazyk","jedinec","jedle","jednatel","jehlan","jekot","jelen","jelito","jemnost","jenom","jepice","jeseter","jevit","jezdec","jezero","jinak","jindy","jinoch","jiskra","jistota","jitrnice","jizva","jmenovat","jogurt","jurta","kabaret","kabel","kabinet","kachna","kadet","kadidlo","kahan","kajak","kajuta","kakao","kaktus","kalamita","kalhoty","kalibr","kalnost","kamera","kamkoliv","kamna","kanibal","kanoe","kantor","kapalina","kapela","kapitola","kapka","kaple","kapota","kapr","kapusta","kapybara","karamel","karotka","karton","kasa","katalog","katedra","kauce","kauza","kavalec","kazajka","kazeta","kazivost","kdekoliv","kdesi","kedluben","kemp","keramika","kino","klacek","kladivo","klam","klapot","klasika","klaun","klec","klenba","klepat","klesnout","klid","klima","klisna","klobouk","klokan","klopa","kloub","klubovna","klusat","kluzkost","kmen","kmitat","kmotr","kniha","knot","koalice","koberec","kobka","kobliha","kobyla","kocour","kohout","kojenec","kokos","koktejl","kolaps","koleda","kolize","kolo","komando","kometa","komik","komnata","komora","kompas","komunita","konat","koncept","kondice","konec","konfese","kongres","konina","konkurs","kontakt","konzerva","kopanec","kopie","kopnout","koprovka","korbel","korektor","kormidlo","koroptev","korpus","koruna","koryto","korzet","kosatec","kostka","kotel","kotleta","kotoul","koukat","koupelna","kousek","kouzlo","kovboj","koza","kozoroh","krabice","krach","krajina","kralovat","krasopis","kravata","kredit","krejcar","kresba","kreveta","kriket","kritik","krize","krkavec","krmelec","krmivo","krocan","krok","kronika","kropit","kroupa","krovka","krtek","kruhadlo","krupice","krutost","krvinka","krychle","krypta","krystal","kryt","kudlanka","kufr","kujnost","kukla","kulajda","kulich","kulka","kulomet","kultura","kuna","kupodivu","kurt","kurzor","kutil","kvalita","kvasinka","kvestor","kynolog","kyselina","kytara","kytice","kytka","kytovec","kyvadlo","labrador","lachtan","ladnost","laik","lakomec","lamela","lampa","lanovka","lasice","laso","lastura","latinka","lavina","lebka","leckdy","leden","lednice","ledovka","ledvina","legenda","legie","legrace","lehce","lehkost","lehnout","lektvar","lenochod","lentilka","lepenka","lepidlo","letadlo","letec","letmo","letokruh","levhart","levitace","levobok","libra","lichotka","lidojed","lidskost","lihovina","lijavec","lilek","limetka","linie","linka","linoleum","listopad","litina","litovat","lobista","lodivod","logika","logoped","lokalita","loket","lomcovat","lopata","lopuch","lord","losos","lotr","loudal","louh","louka","louskat","lovec","lstivost","lucerna","lucifer","lump","lusk","lustrace","lvice","lyra","lyrika","lysina","madam","madlo","magistr","mahagon","majetek","majitel","majorita","makak","makovice","makrela","malba","malina","malovat","malvice","maminka","mandle","manko","marnost","masakr","maskot","masopust","matice","matrika","maturita","mazanec","mazivo","mazlit","mazurka","mdloba","mechanik","meditace","medovina","melasa","meloun","mentolka","metla","metoda","metr","mezera","migrace","mihnout","mihule","mikina","mikrofon","milenec","milimetr","milost","mimika","mincovna","minibar","minomet","minulost","miska","mistr","mixovat","mladost","mlha","mlhovina","mlok","mlsat","mluvit","mnich","mnohem","mobil","mocnost","modelka","modlitba","mohyla","mokro","molekula","momentka","monarcha","monokl","monstrum","montovat","monzun","mosaz","moskyt","most","motivace","motorka","motyka","moucha","moudrost","mozaika","mozek","mozol","mramor","mravenec","mrkev","mrtvola","mrzet","mrzutost","mstitel","mudrc","muflon","mulat","mumie","munice","muset","mutace","muzeum","muzikant","myslivec","mzda","nabourat","nachytat","nadace","nadbytek","nadhoz","nadobro","nadpis","nahlas","nahnat","nahodile","nahradit","naivita","najednou","najisto","najmout","naklonit","nakonec","nakrmit","nalevo","namazat","namluvit","nanometr","naoko","naopak","naostro","napadat","napevno","naplnit","napnout","naposled","naprosto","narodit","naruby","narychlo","nasadit","nasekat","naslepo","nastat","natolik","navenek","navrch","navzdory","nazvat","nebe","nechat","necky","nedaleko","nedbat","neduh","negace","nehet","nehoda","nejen","nejprve","neklid","nelibost","nemilost","nemoc","neochota","neonka","nepokoj","nerost","nerv","nesmysl","nesoulad","netvor","neuron","nevina","nezvykle","nicota","nijak","nikam","nikdy","nikl","nikterak","nitro","nocleh","nohavice","nominace","nora","norek","nositel","nosnost","nouze","noviny","novota","nozdra","nuda","nudle","nuget","nutit","nutnost","nutrie","nymfa","obal","obarvit","obava","obdiv","obec","obehnat","obejmout","obezita","obhajoba","obilnice","objasnit","objekt","obklopit","oblast","oblek","obliba","obloha","obluda","obnos","obohatit","obojek","obout","obrazec","obrna","obruba","obrys","obsah","obsluha","obstarat","obuv","obvaz","obvinit","obvod","obvykle","obyvatel","obzor","ocas","ocel","ocenit","ochladit","ochota","ochrana","ocitnout","odboj","odbyt","odchod","odcizit","odebrat","odeslat","odevzdat","odezva","odhadce","odhodit","odjet","odjinud","odkaz","odkoupit","odliv","odluka","odmlka","odolnost","odpad","odpis","odplout","odpor","odpustit","odpykat","odrazka","odsoudit","odstup","odsun","odtok","odtud","odvaha","odveta","odvolat","odvracet","odznak","ofina","ofsajd","ohlas","ohnisko","ohrada","ohrozit","ohryzek","okap","okenice","oklika","okno","okouzlit","okovy","okrasa","okres","okrsek","okruh","okupant","okurka","okusit","olejnina","olizovat","omak","omeleta","omezit","omladina","omlouvat","omluva","omyl","onehdy","opakovat","opasek","operace","opice","opilost","opisovat","opora","opozice","opravdu","oproti","orbital","orchestr","orgie","orlice","orloj","ortel","osada","oschnout","osika","osivo","oslava","oslepit","oslnit","oslovit","osnova","osoba","osolit","ospalec","osten","ostraha","ostuda","ostych","osvojit","oteplit","otisk","otop","otrhat","otrlost","otrok","otruby","otvor","ovanout","ovar","oves","ovlivnit","ovoce","oxid","ozdoba","pachatel","pacient","padouch","pahorek","pakt","palanda","palec","palivo","paluba","pamflet","pamlsek","panenka","panika","panna","panovat","panstvo","pantofle","paprika","parketa","parodie","parta","paruka","paryba","paseka","pasivita","pastelka","patent","patrona","pavouk","pazneht","pazourek","pecka","pedagog","pejsek","peklo","peloton","penalta","pendrek","penze","periskop","pero","pestrost","petarda","petice","petrolej","pevnina","pexeso","pianista","piha","pijavice","pikle","piknik","pilina","pilnost","pilulka","pinzeta","pipeta","pisatel","pistole","pitevna","pivnice","pivovar","placenta","plakat","plamen","planeta","plastika","platit","plavidlo","plaz","plech","plemeno","plenta","ples","pletivo","plevel","plivat","plnit","plno","plocha","plodina","plomba","plout","pluk","plyn","pobavit","pobyt","pochod","pocit","poctivec","podat","podcenit","podepsat","podhled","podivit","podklad","podmanit","podnik","podoba","podpora","podraz","podstata","podvod","podzim","poezie","pohanka","pohnutka","pohovor","pohroma","pohyb","pointa","pojistka","pojmout","pokazit","pokles","pokoj","pokrok","pokuta","pokyn","poledne","polibek","polknout","poloha","polynom","pomalu","pominout","pomlka","pomoc","pomsta","pomyslet","ponechat","ponorka","ponurost","popadat","popel","popisek","poplach","poprosit","popsat","popud","poradce","porce","porod","porucha","poryv","posadit","posed","posila","poskok","poslanec","posoudit","pospolu","postava","posudek","posyp","potah","potkan","potlesk","potomek","potrava","potupa","potvora","poukaz","pouto","pouzdro","povaha","povidla","povlak","povoz","povrch","povstat","povyk","povzdech","pozdrav","pozemek","poznatek","pozor","pozvat","pracovat","prahory","praktika","prales","praotec","praporek","prase","pravda","princip","prkno","probudit","procento","prodej","profese","prohra","projekt","prolomit","promile","pronikat","propad","prorok","prosba","proton","proutek","provaz","prskavka","prsten","prudkost","prut","prvek","prvohory","psanec","psovod","pstruh","ptactvo","puberta","puch","pudl","pukavec","puklina","pukrle","pult","pumpa","punc","pupen","pusa","pusinka","pustina","putovat","putyka","pyramida","pysk","pytel","racek","rachot","radiace","radnice","radon","raft","ragby","raketa","rakovina","rameno","rampouch","rande","rarach","rarita","rasovna","rastr","ratolest","razance","razidlo","reagovat","reakce","recept","redaktor","referent","reflex","rejnok","reklama","rekord","rekrut","rektor","reputace","revize","revma","revolver","rezerva","riskovat","riziko","robotika","rodokmen","rohovka","rokle","rokoko","romaneto","ropovod","ropucha","rorejs","rosol","rostlina","rotmistr","rotoped","rotunda","roubenka","roucho","roup","roura","rovina","rovnice","rozbor","rozchod","rozdat","rozeznat","rozhodce","rozinka","rozjezd","rozkaz","rozloha","rozmar","rozpad","rozruch","rozsah","roztok","rozum","rozvod","rubrika","ruchadlo","rukavice","rukopis","ryba","rybolov","rychlost","rydlo","rypadlo","rytina","ryzost","sadista","sahat","sako","samec","samizdat","samota","sanitka","sardinka","sasanka","satelit","sazba","sazenice","sbor","schovat","sebranka","secese","sedadlo","sediment","sedlo","sehnat","sejmout","sekera","sekta","sekunda","sekvoje","semeno","seno","servis","sesadit","seshora","seskok","seslat","sestra","sesuv","sesypat","setba","setina","setkat","setnout","setrvat","sever","seznam","shoda","shrnout","sifon","silnice","sirka","sirotek","sirup","situace","skafandr","skalisko","skanzen","skaut","skeptik","skica","skladba","sklenice","sklo","skluz","skoba","skokan","skoro","skripta","skrz","skupina","skvost","skvrna","slabika","sladidlo","slanina","slast","slavnost","sledovat","slepec","sleva","slezina","slib","slina","sliznice","slon","sloupek","slovo","sluch","sluha","slunce","slupka","slza","smaragd","smetana","smilstvo","smlouva","smog","smrad","smrk","smrtka","smutek","smysl","snad","snaha","snob","sobota","socha","sodovka","sokol","sopka","sotva","souboj","soucit","soudce","souhlas","soulad","soumrak","souprava","soused","soutok","souviset","spalovna","spasitel","spis","splav","spodek","spojenec","spolu","sponzor","spornost","spousta","sprcha","spustit","sranda","sraz","srdce","srna","srnec","srovnat","srpen","srst","srub","stanice","starosta","statika","stavba","stehno","stezka","stodola","stolek","stopa","storno","stoupat","strach","stres","strhnout","strom","struna","studna","stupnice","stvol","styk","subjekt","subtropy","suchar","sudost","sukno","sundat","sunout","surikata","surovina","svah","svalstvo","svetr","svatba","svazek","svisle","svitek","svoboda","svodidlo","svorka","svrab","sykavka","sykot","synek","synovec","sypat","sypkost","syrovost","sysel","sytost","tabletka","tabule","tahoun","tajemno","tajfun","tajga","tajit","tajnost","taktika","tamhle","tampon","tancovat","tanec","tanker","tapeta","tavenina","tazatel","technika","tehdy","tekutina","telefon","temnota","tendence","tenista","tenor","teplota","tepna","teprve","terapie","termoska","textil","ticho","tiskopis","titulek","tkadlec","tkanina","tlapka","tleskat","tlukot","tlupa","tmel","toaleta","topinka","topol","torzo","touha","toulec","tradice","traktor","tramp","trasa","traverza","trefit","trest","trezor","trhavina","trhlina","trochu","trojice","troska","trouba","trpce","trpitel","trpkost","trubec","truchlit","truhlice","trus","trvat","tudy","tuhnout","tuhost","tundra","turista","turnaj","tuzemsko","tvaroh","tvorba","tvrdost","tvrz","tygr","tykev","ubohost","uboze","ubrat","ubrousek","ubrus","ubytovna","ucho","uctivost","udivit","uhradit","ujednat","ujistit","ujmout","ukazatel","uklidnit","uklonit","ukotvit","ukrojit","ulice","ulita","ulovit","umyvadlo","unavit","uniforma","uniknout","upadnout","uplatnit","uplynout","upoutat","upravit","uran","urazit","usednout","usilovat","usmrtit","usnadnit","usnout","usoudit","ustlat","ustrnout","utahovat","utkat","utlumit","utonout","utopenec","utrousit","uvalit","uvolnit","uvozovka","uzdravit","uzel","uzenina","uzlina","uznat","vagon","valcha","valoun","vana","vandal","vanilka","varan","varhany","varovat","vcelku","vchod","vdova","vedro","vegetace","vejce","velbloud","veletrh","velitel","velmoc","velryba","venkov","veranda","verze","veselka","veskrze","vesnice","vespodu","vesta","veterina","veverka","vibrace","vichr","videohra","vidina","vidle","vila","vinice","viset","vitalita","vize","vizitka","vjezd","vklad","vkus","vlajka","vlak","vlasec","vlevo","vlhkost","vliv","vlnovka","vloupat","vnucovat","vnuk","voda","vodivost","vodoznak","vodstvo","vojensky","vojna","vojsko","volant","volba","volit","volno","voskovka","vozidlo","vozovna","vpravo","vrabec","vracet","vrah","vrata","vrba","vrcholek","vrhat","vrstva","vrtule","vsadit","vstoupit","vstup","vtip","vybavit","vybrat","vychovat","vydat","vydra","vyfotit","vyhledat","vyhnout","vyhodit","vyhradit","vyhubit","vyjasnit","vyjet","vyjmout","vyklopit","vykonat","vylekat","vymazat","vymezit","vymizet","vymyslet","vynechat","vynikat","vynutit","vypadat","vyplatit","vypravit","vypustit","vyrazit","vyrovnat","vyrvat","vyslovit","vysoko","vystavit","vysunout","vysypat","vytasit","vytesat","vytratit","vyvinout","vyvolat","vyvrhel","vyzdobit","vyznat","vzadu","vzbudit","vzchopit","vzdor","vzduch","vzdychat","vzestup","vzhledem","vzkaz","vzlykat","vznik","vzorek","vzpoura","vztah","vztek","xylofon","zabrat","zabydlet","zachovat","zadarmo","zadusit","zafoukat","zahltit","zahodit","zahrada","zahynout","zajatec","zajet","zajistit","zaklepat","zakoupit","zalepit","zamezit","zamotat","zamyslet","zanechat","zanikat","zaplatit","zapojit","zapsat","zarazit","zastavit","zasunout","zatajit","zatemnit","zatknout","zaujmout","zavalit","zavelet","zavinit","zavolat","zavrtat","zazvonit","zbavit","zbrusu","zbudovat","zbytek","zdaleka","zdarma","zdatnost","zdivo","zdobit","zdroj","zdvih","zdymadlo","zelenina","zeman","zemina","zeptat","zezadu","zezdola","zhatit","zhltnout","zhluboka","zhotovit","zhruba","zima","zimnice","zjemnit","zklamat","zkoumat","zkratka","zkumavka","zlato","zlehka","zloba","zlom","zlost","zlozvyk","zmapovat","zmar","zmatek","zmije","zmizet","zmocnit","zmodrat","zmrzlina","zmutovat","znak","znalost","znamenat","znovu","zobrazit","zotavit","zoubek","zoufale","zplodit","zpomalit","zprava","zprostit","zprudka","zprvu","zrada","zranit","zrcadlo","zrnitost","zrno","zrovna","zrychlit","zrzavost","zticha","ztratit","zubovina","zubr","zvednout","zvenku","zvesela","zvon","zvrat","zvukovod","zvyk"],require$$1$2=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],require$$2$2=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],require$$3=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],require$$4$1=["abaisser","abandon","abdiquer","abeille","abolir","aborder","aboutir","aboyer","abrasif","abreuver","abriter","abroger","abrupt","absence","absolu","absurde","abusif","abyssal","academie","acajou","acarien","accabler","accepter","acclamer","accolade","accroche","accuser","acerbe","achat","acheter","aciduler","acier","acompte","acquerir","acronyme","acteur","actif","actuel","adepte","adequat","adhesif","adjectif","adjuger","admettre","admirer","adopter","adorer","adoucir","adresse","adroit","adulte","adverbe","aerer","aeronef","affaire","affecter","affiche","affreux","affubler","agacer","agencer","agile","agiter","agrafer","agreable","agrume","aider","aiguille","ailier","aimable","aisance","ajouter","ajuster","alarmer","alchimie","alerte","algebre","algue","aliener","aliment","alleger","alliage","allouer","allumer","alourdir","alpaga","altesse","alveole","amateur","ambigu","ambre","amenager","amertume","amidon","amiral","amorcer","amour","amovible","amphibie","ampleur","amusant","analyse","anaphore","anarchie","anatomie","ancien","aneantir","angle","angoisse","anguleux","animal","annexer","annonce","annuel","anodin","anomalie","anonyme","anormal","antenne","antidote","anxieux","apaiser","aperitif","aplanir","apologie","appareil","appeler","apporter","appuyer","aquarium","aqueduc","arbitre","arbuste","ardeur","ardoise","argent","arlequin","armature","armement","armoire","armure","arpenter","arracher","arriver","arroser","arsenic","arteriel","article","aspect","asphalte","aspirer","assaut","asservir","assiette","associer","assurer","asticot","astre","astuce","atelier","atome","atrium","atroce","attaque","attentif","attirer","attraper","aubaine","auberge","audace","audible","augurer","aurore","automne","autruche","avaler","avancer","avarice","avenir","averse","aveugle","aviateur","avide","avion","aviser","avoine","avouer","avril","axial","axiome","badge","bafouer","bagage","baguette","baignade","balancer","balcon","baleine","balisage","bambin","bancaire","bandage","banlieue","banniere","banquier","barbier","baril","baron","barque","barrage","bassin","bastion","bataille","bateau","batterie","baudrier","bavarder","belette","belier","belote","benefice","berceau","berger","berline","bermuda","besace","besogne","betail","beurre","biberon","bicycle","bidule","bijou","bilan","bilingue","billard","binaire","biologie","biopsie","biotype","biscuit","bison","bistouri","bitume","bizarre","blafard","blague","blanchir","blessant","blinder","blond","bloquer","blouson","bobard","bobine","boire","boiser","bolide","bonbon","bondir","bonheur","bonifier","bonus","bordure","borne","botte","boucle","boueux","bougie","boulon","bouquin","bourse","boussole","boutique","boxeur","branche","brasier","brave","brebis","breche","breuvage","bricoler","brigade","brillant","brioche","brique","brochure","broder","bronzer","brousse","broyeur","brume","brusque","brutal","bruyant","buffle","buisson","bulletin","bureau","burin","bustier","butiner","butoir","buvable","buvette","cabanon","cabine","cachette","cadeau","cadre","cafeine","caillou","caisson","calculer","calepin","calibre","calmer","calomnie","calvaire","camarade","camera","camion","campagne","canal","caneton","canon","cantine","canular","capable","caporal","caprice","capsule","capter","capuche","carabine","carbone","caresser","caribou","carnage","carotte","carreau","carton","cascade","casier","casque","cassure","causer","caution","cavalier","caverne","caviar","cedille","ceinture","celeste","cellule","cendrier","censurer","central","cercle","cerebral","cerise","cerner","cerveau","cesser","chagrin","chaise","chaleur","chambre","chance","chapitre","charbon","chasseur","chaton","chausson","chavirer","chemise","chenille","chequier","chercher","cheval","chien","chiffre","chignon","chimere","chiot","chlorure","chocolat","choisir","chose","chouette","chrome","chute","cigare","cigogne","cimenter","cinema","cintrer","circuler","cirer","cirque","citerne","citoyen","citron","civil","clairon","clameur","claquer","classe","clavier","client","cligner","climat","clivage","cloche","clonage","cloporte","cobalt","cobra","cocasse","cocotier","coder","codifier","coffre","cogner","cohesion","coiffer","coincer","colere","colibri","colline","colmater","colonel","combat","comedie","commande","compact","concert","conduire","confier","congeler","connoter","consonne","contact","convexe","copain","copie","corail","corbeau","cordage","corniche","corpus","correct","cortege","cosmique","costume","coton","coude","coupure","courage","couteau","couvrir","coyote","crabe","crainte","cravate","crayon","creature","crediter","cremeux","creuser","crevette","cribler","crier","cristal","critere","croire","croquer","crotale","crucial","cruel","crypter","cubique","cueillir","cuillere","cuisine","cuivre","culminer","cultiver","cumuler","cupide","curatif","curseur","cyanure","cycle","cylindre","cynique","daigner","damier","danger","danseur","dauphin","debattre","debiter","deborder","debrider","debutant","decaler","decembre","dechirer","decider","declarer","decorer","decrire","decupler","dedale","deductif","deesse","defensif","defiler","defrayer","degager","degivrer","deglutir","degrafer","dejeuner","delice","deloger","demander","demeurer","demolir","denicher","denouer","dentelle","denuder","depart","depenser","dephaser","deplacer","deposer","deranger","derober","desastre","descente","desert","designer","desobeir","dessiner","destrier","detacher","detester","detourer","detresse","devancer","devenir","deviner","devoir","diable","dialogue","diamant","dicter","differer","digerer","digital","digne","diluer","dimanche","diminuer","dioxyde","directif","diriger","discuter","disposer","dissiper","distance","divertir","diviser","docile","docteur","dogme","doigt","domaine","domicile","dompter","donateur","donjon","donner","dopamine","dortoir","dorure","dosage","doseur","dossier","dotation","douanier","double","douceur","douter","doyen","dragon","draper","dresser","dribbler","droiture","duperie","duplexe","durable","durcir","dynastie","eblouir","ecarter","echarpe","echelle","eclairer","eclipse","eclore","ecluse","ecole","economie","ecorce","ecouter","ecraser","ecremer","ecrivain","ecrou","ecume","ecureuil","edifier","eduquer","effacer","effectif","effigie","effort","effrayer","effusion","egaliser","egarer","ejecter","elaborer","elargir","electron","elegant","elephant","eleve","eligible","elitisme","eloge","elucider","eluder","emballer","embellir","embryon","emeraude","emission","emmener","emotion","emouvoir","empereur","employer","emporter","emprise","emulsion","encadrer","enchere","enclave","encoche","endiguer","endosser","endroit","enduire","energie","enfance","enfermer","enfouir","engager","engin","englober","enigme","enjamber","enjeu","enlever","ennemi","ennuyeux","enrichir","enrobage","enseigne","entasser","entendre","entier","entourer","entraver","enumerer","envahir","enviable","envoyer","enzyme","eolien","epaissir","epargne","epatant","epaule","epicerie","epidemie","epier","epilogue","epine","episode","epitaphe","epoque","epreuve","eprouver","epuisant","equerre","equipe","eriger","erosion","erreur","eruption","escalier","espadon","espece","espiegle","espoir","esprit","esquiver","essayer","essence","essieu","essorer","estime","estomac","estrade","etagere","etaler","etanche","etatique","eteindre","etendoir","eternel","ethanol","ethique","ethnie","etirer","etoffer","etoile","etonnant","etourdir","etrange","etroit","etude","euphorie","evaluer","evasion","eventail","evidence","eviter","evolutif","evoquer","exact","exagerer","exaucer","exceller","excitant","exclusif","excuse","executer","exemple","exercer","exhaler","exhorter","exigence","exiler","exister","exotique","expedier","explorer","exposer","exprimer","exquis","extensif","extraire","exulter","fable","fabuleux","facette","facile","facture","faiblir","falaise","fameux","famille","farceur","farfelu","farine","farouche","fasciner","fatal","fatigue","faucon","fautif","faveur","favori","febrile","feconder","federer","felin","femme","femur","fendoir","feodal","fermer","feroce","ferveur","festival","feuille","feutre","fevrier","fiasco","ficeler","fictif","fidele","figure","filature","filetage","filiere","filleul","filmer","filou","filtrer","financer","finir","fiole","firme","fissure","fixer","flairer","flamme","flasque","flatteur","fleau","fleche","fleur","flexion","flocon","flore","fluctuer","fluide","fluvial","folie","fonderie","fongible","fontaine","forcer","forgeron","formuler","fortune","fossile","foudre","fougere","fouiller","foulure","fourmi","fragile","fraise","franchir","frapper","frayeur","fregate","freiner","frelon","fremir","frenesie","frere","friable","friction","frisson","frivole","froid","fromage","frontal","frotter","fruit","fugitif","fuite","fureur","furieux","furtif","fusion","futur","gagner","galaxie","galerie","gambader","garantir","gardien","garnir","garrigue","gazelle","gazon","geant","gelatine","gelule","gendarme","general","genie","genou","gentil","geologie","geometre","geranium","germe","gestuel","geyser","gibier","gicler","girafe","givre","glace","glaive","glisser","globe","gloire","glorieux","golfeur","gomme","gonfler","gorge","gorille","goudron","gouffre","goulot","goupille","gourmand","goutte","graduel","graffiti","graine","grand","grappin","gratuit","gravir","grenat","griffure","griller","grimper","grogner","gronder","grotte","groupe","gruger","grutier","gruyere","guepard","guerrier","guide","guimauve","guitare","gustatif","gymnaste","gyrostat","habitude","hachoir","halte","hameau","hangar","hanneton","haricot","harmonie","harpon","hasard","helium","hematome","herbe","herisson","hermine","heron","hesiter","heureux","hiberner","hibou","hilarant","histoire","hiver","homard","hommage","homogene","honneur","honorer","honteux","horde","horizon","horloge","hormone","horrible","houleux","housse","hublot","huileux","humain","humble","humide","humour","hurler","hydromel","hygiene","hymne","hypnose","idylle","ignorer","iguane","illicite","illusion","image","imbiber","imiter","immense","immobile","immuable","impact","imperial","implorer","imposer","imprimer","imputer","incarner","incendie","incident","incliner","incolore","indexer","indice","inductif","inedit","ineptie","inexact","infini","infliger","informer","infusion","ingerer","inhaler","inhiber","injecter","injure","innocent","inoculer","inonder","inscrire","insecte","insigne","insolite","inspirer","instinct","insulter","intact","intense","intime","intrigue","intuitif","inutile","invasion","inventer","inviter","invoquer","ironique","irradier","irreel","irriter","isoler","ivoire","ivresse","jaguar","jaillir","jambe","janvier","jardin","jauger","jaune","javelot","jetable","jeton","jeudi","jeunesse","joindre","joncher","jongler","joueur","jouissif","journal","jovial","joyau","joyeux","jubiler","jugement","junior","jupon","juriste","justice","juteux","juvenile","kayak","kimono","kiosque","label","labial","labourer","lacerer","lactose","lagune","laine","laisser","laitier","lambeau","lamelle","lampe","lanceur","langage","lanterne","lapin","largeur","larme","laurier","lavabo","lavoir","lecture","legal","leger","legume","lessive","lettre","levier","lexique","lezard","liasse","liberer","libre","licence","licorne","liege","lievre","ligature","ligoter","ligue","limer","limite","limonade","limpide","lineaire","lingot","lionceau","liquide","lisiere","lister","lithium","litige","littoral","livreur","logique","lointain","loisir","lombric","loterie","louer","lourd","loutre","louve","loyal","lubie","lucide","lucratif","lueur","lugubre","luisant","lumiere","lunaire","lundi","luron","lutter","luxueux","machine","magasin","magenta","magique","maigre","maillon","maintien","mairie","maison","majorer","malaxer","malefice","malheur","malice","mallette","mammouth","mandater","maniable","manquant","manteau","manuel","marathon","marbre","marchand","mardi","maritime","marqueur","marron","marteler","mascotte","massif","materiel","matiere","matraque","maudire","maussade","mauve","maximal","mechant","meconnu","medaille","medecin","mediter","meduse","meilleur","melange","melodie","membre","memoire","menacer","mener","menhir","mensonge","mentor","mercredi","merite","merle","messager","mesure","metal","meteore","methode","metier","meuble","miauler","microbe","miette","mignon","migrer","milieu","million","mimique","mince","mineral","minimal","minorer","minute","miracle","miroiter","missile","mixte","mobile","moderne","moelleux","mondial","moniteur","monnaie","monotone","monstre","montagne","monument","moqueur","morceau","morsure","mortier","moteur","motif","mouche","moufle","moulin","mousson","mouton","mouvant","multiple","munition","muraille","murene","murmure","muscle","museum","musicien","mutation","muter","mutuel","myriade","myrtille","mystere","mythique","nageur","nappe","narquois","narrer","natation","nation","nature","naufrage","nautique","navire","nebuleux","nectar","nefaste","negation","negliger","negocier","neige","nerveux","nettoyer","neurone","neutron","neveu","niche","nickel","nitrate","niveau","noble","nocif","nocturne","noirceur","noisette","nomade","nombreux","nommer","normatif","notable","notifier","notoire","nourrir","nouveau","novateur","novembre","novice","nuage","nuancer","nuire","nuisible","numero","nuptial","nuque","nutritif","obeir","objectif","obliger","obscur","observer","obstacle","obtenir","obturer","occasion","occuper","ocean","octobre","octroyer","octupler","oculaire","odeur","odorant","offenser","officier","offrir","ogive","oiseau","oisillon","olfactif","olivier","ombrage","omettre","onctueux","onduler","onereux","onirique","opale","opaque","operer","opinion","opportun","opprimer","opter","optique","orageux","orange","orbite","ordonner","oreille","organe","orgueil","orifice","ornement","orque","ortie","osciller","osmose","ossature","otarie","ouragan","ourson","outil","outrager","ouvrage","ovation","oxyde","oxygene","ozone","paisible","palace","palmares","palourde","palper","panache","panda","pangolin","paniquer","panneau","panorama","pantalon","papaye","papier","papoter","papyrus","paradoxe","parcelle","paresse","parfumer","parler","parole","parrain","parsemer","partager","parure","parvenir","passion","pasteque","paternel","patience","patron","pavillon","pavoiser","payer","paysage","peigne","peintre","pelage","pelican","pelle","pelouse","peluche","pendule","penetrer","penible","pensif","penurie","pepite","peplum","perdrix","perforer","periode","permuter","perplexe","persil","perte","peser","petale","petit","petrir","peuple","pharaon","phobie","phoque","photon","phrase","physique","piano","pictural","piece","pierre","pieuvre","pilote","pinceau","pipette","piquer","pirogue","piscine","piston","pivoter","pixel","pizza","placard","plafond","plaisir","planer","plaque","plastron","plateau","pleurer","plexus","pliage","plomb","plonger","pluie","plumage","pochette","poesie","poete","pointe","poirier","poisson","poivre","polaire","policier","pollen","polygone","pommade","pompier","ponctuel","ponderer","poney","portique","position","posseder","posture","potager","poteau","potion","pouce","poulain","poumon","pourpre","poussin","pouvoir","prairie","pratique","precieux","predire","prefixe","prelude","prenom","presence","pretexte","prevoir","primitif","prince","prison","priver","probleme","proceder","prodige","profond","progres","proie","projeter","prologue","promener","propre","prospere","proteger","prouesse","proverbe","prudence","pruneau","psychose","public","puceron","puiser","pulpe","pulsar","punaise","punitif","pupitre","purifier","puzzle","pyramide","quasar","querelle","question","quietude","quitter","quotient","racine","raconter","radieux","ragondin","raideur","raisin","ralentir","rallonge","ramasser","rapide","rasage","ratisser","ravager","ravin","rayonner","reactif","reagir","realiser","reanimer","recevoir","reciter","reclamer","recolter","recruter","reculer","recycler","rediger","redouter","refaire","reflexe","reformer","refrain","refuge","regalien","region","reglage","regulier","reiterer","rejeter","rejouer","relatif","relever","relief","remarque","remede","remise","remonter","remplir","remuer","renard","renfort","renifler","renoncer","rentrer","renvoi","replier","reporter","reprise","reptile","requin","reserve","resineux","resoudre","respect","rester","resultat","retablir","retenir","reticule","retomber","retracer","reunion","reussir","revanche","revivre","revolte","revulsif","richesse","rideau","rieur","rigide","rigoler","rincer","riposter","risible","risque","rituel","rival","riviere","rocheux","romance","rompre","ronce","rondin","roseau","rosier","rotatif","rotor","rotule","rouge","rouille","rouleau","routine","royaume","ruban","rubis","ruche","ruelle","rugueux","ruiner","ruisseau","ruser","rustique","rythme","sabler","saboter","sabre","sacoche","safari","sagesse","saisir","salade","salive","salon","saluer","samedi","sanction","sanglier","sarcasme","sardine","saturer","saugrenu","saumon","sauter","sauvage","savant","savonner","scalpel","scandale","scelerat","scenario","sceptre","schema","science","scinder","score","scrutin","sculpter","seance","secable","secher","secouer","secreter","sedatif","seduire","seigneur","sejour","selectif","semaine","sembler","semence","seminal","senateur","sensible","sentence","separer","sequence","serein","sergent","serieux","serrure","serum","service","sesame","sevir","sevrage","sextuple","sideral","siecle","sieger","siffler","sigle","signal","silence","silicium","simple","sincere","sinistre","siphon","sirop","sismique","situer","skier","social","socle","sodium","soigneux","soldat","soleil","solitude","soluble","sombre","sommeil","somnoler","sonde","songeur","sonnette","sonore","sorcier","sortir","sosie","sottise","soucieux","soudure","souffle","soulever","soupape","source","soutirer","souvenir","spacieux","spatial","special","sphere","spiral","stable","station","sternum","stimulus","stipuler","strict","studieux","stupeur","styliste","sublime","substrat","subtil","subvenir","succes","sucre","suffixe","suggerer","suiveur","sulfate","superbe","supplier","surface","suricate","surmener","surprise","sursaut","survie","suspect","syllabe","symbole","symetrie","synapse","syntaxe","systeme","tabac","tablier","tactile","tailler","talent","talisman","talonner","tambour","tamiser","tangible","tapis","taquiner","tarder","tarif","tartine","tasse","tatami","tatouage","taupe","taureau","taxer","temoin","temporel","tenaille","tendre","teneur","tenir","tension","terminer","terne","terrible","tetine","texte","theme","theorie","therapie","thorax","tibia","tiede","timide","tirelire","tiroir","tissu","titane","titre","tituber","toboggan","tolerant","tomate","tonique","tonneau","toponyme","torche","tordre","tornade","torpille","torrent","torse","tortue","totem","toucher","tournage","tousser","toxine","traction","trafic","tragique","trahir","train","trancher","travail","trefle","tremper","tresor","treuil","triage","tribunal","tricoter","trilogie","triomphe","tripler","triturer","trivial","trombone","tronc","tropical","troupeau","tuile","tulipe","tumulte","tunnel","turbine","tuteur","tutoyer","tuyau","tympan","typhon","typique","tyran","ubuesque","ultime","ultrason","unanime","unifier","union","unique","unitaire","univers","uranium","urbain","urticant","usage","usine","usuel","usure","utile","utopie","vacarme","vaccin","vagabond","vague","vaillant","vaincre","vaisseau","valable","valise","vallon","valve","vampire","vanille","vapeur","varier","vaseux","vassal","vaste","vecteur","vedette","vegetal","vehicule","veinard","veloce","vendredi","venerer","venger","venimeux","ventouse","verdure","verin","vernir","verrou","verser","vertu","veston","veteran","vetuste","vexant","vexer","viaduc","viande","victoire","vidange","video","vignette","vigueur","vilain","village","vinaigre","violon","vipere","virement","virtuose","virus","visage","viseur","vision","visqueux","visuel","vital","vitesse","viticole","vitrine","vivace","vivipare","vocation","voguer","voile","voisin","voiture","volaille","volcan","voltiger","volume","vorace","vortex","voter","vouloir","voyage","voyelle","wagon","xenon","yacht","zebre","zenith","zeste","zoologie"],require$$5=["abaco","abbaglio","abbinato","abete","abisso","abolire","abrasivo","abrogato","accadere","accenno","accusato","acetone","achille","acido","acqua","acre","acrilico","acrobata","acuto","adagio","addebito","addome","adeguato","aderire","adipe","adottare","adulare","affabile","affetto","affisso","affranto","aforisma","afoso","africano","agave","agente","agevole","aggancio","agire","agitare","agonismo","agricolo","agrumeto","aguzzo","alabarda","alato","albatro","alberato","albo","albume","alce","alcolico","alettone","alfa","algebra","aliante","alibi","alimento","allagato","allegro","allievo","allodola","allusivo","almeno","alogeno","alpaca","alpestre","altalena","alterno","alticcio","altrove","alunno","alveolo","alzare","amalgama","amanita","amarena","ambito","ambrato","ameba","america","ametista","amico","ammasso","ammenda","ammirare","ammonito","amore","ampio","ampliare","amuleto","anacardo","anagrafe","analista","anarchia","anatra","anca","ancella","ancora","andare","andrea","anello","angelo","angolare","angusto","anima","annegare","annidato","anno","annuncio","anonimo","anticipo","anzi","apatico","apertura","apode","apparire","appetito","appoggio","approdo","appunto","aprile","arabica","arachide","aragosta","araldica","arancio","aratura","arazzo","arbitro","archivio","ardito","arenile","argento","argine","arguto","aria","armonia","arnese","arredato","arringa","arrosto","arsenico","arso","artefice","arzillo","asciutto","ascolto","asepsi","asettico","asfalto","asino","asola","aspirato","aspro","assaggio","asse","assoluto","assurdo","asta","astenuto","astice","astratto","atavico","ateismo","atomico","atono","attesa","attivare","attorno","attrito","attuale","ausilio","austria","autista","autonomo","autunno","avanzato","avere","avvenire","avviso","avvolgere","azione","azoto","azzimo","azzurro","babele","baccano","bacino","baco","badessa","badilata","bagnato","baita","balcone","baldo","balena","ballata","balzano","bambino","bandire","baraonda","barbaro","barca","baritono","barlume","barocco","basilico","basso","batosta","battuto","baule","bava","bavosa","becco","beffa","belgio","belva","benda","benevole","benigno","benzina","bere","berlina","beta","bibita","bici","bidone","bifido","biga","bilancia","bimbo","binocolo","biologo","bipede","bipolare","birbante","birra","biscotto","bisesto","bisnonno","bisonte","bisturi","bizzarro","blando","blatta","bollito","bonifico","bordo","bosco","botanico","bottino","bozzolo","braccio","bradipo","brama","branca","bravura","bretella","brevetto","brezza","briglia","brillante","brindare","broccolo","brodo","bronzina","brullo","bruno","bubbone","buca","budino","buffone","buio","bulbo","buono","burlone","burrasca","bussola","busta","cadetto","caduco","calamaro","calcolo","calesse","calibro","calmo","caloria","cambusa","camerata","camicia","cammino","camola","campale","canapa","candela","cane","canino","canotto","cantina","capace","capello","capitolo","capogiro","cappero","capra","capsula","carapace","carcassa","cardo","carisma","carovana","carretto","cartolina","casaccio","cascata","caserma","caso","cassone","castello","casuale","catasta","catena","catrame","cauto","cavillo","cedibile","cedrata","cefalo","celebre","cellulare","cena","cenone","centesimo","ceramica","cercare","certo","cerume","cervello","cesoia","cespo","ceto","chela","chiaro","chicca","chiedere","chimera","china","chirurgo","chitarra","ciao","ciclismo","cifrare","cigno","cilindro","ciottolo","circa","cirrosi","citrico","cittadino","ciuffo","civetta","civile","classico","clinica","cloro","cocco","codardo","codice","coerente","cognome","collare","colmato","colore","colposo","coltivato","colza","coma","cometa","commando","comodo","computer","comune","conciso","condurre","conferma","congelare","coniuge","connesso","conoscere","consumo","continuo","convegno","coperto","copione","coppia","copricapo","corazza","cordata","coricato","cornice","corolla","corpo","corredo","corsia","cortese","cosmico","costante","cottura","covato","cratere","cravatta","creato","credere","cremoso","crescita","creta","criceto","crinale","crisi","critico","croce","cronaca","crostata","cruciale","crusca","cucire","cuculo","cugino","cullato","cupola","curatore","cursore","curvo","cuscino","custode","dado","daino","dalmata","damerino","daniela","dannoso","danzare","datato","davanti","davvero","debutto","decennio","deciso","declino","decollo","decreto","dedicato","definito","deforme","degno","delegare","delfino","delirio","delta","demenza","denotato","dentro","deposito","derapata","derivare","deroga","descritto","deserto","desiderio","desumere","detersivo","devoto","diametro","dicembre","diedro","difeso","diffuso","digerire","digitale","diluvio","dinamico","dinnanzi","dipinto","diploma","dipolo","diradare","dire","dirotto","dirupo","disagio","discreto","disfare","disgelo","disposto","distanza","disumano","dito","divano","divelto","dividere","divorato","doblone","docente","doganale","dogma","dolce","domato","domenica","dominare","dondolo","dono","dormire","dote","dottore","dovuto","dozzina","drago","druido","dubbio","dubitare","ducale","duna","duomo","duplice","duraturo","ebano","eccesso","ecco","eclissi","economia","edera","edicola","edile","editoria","educare","egemonia","egli","egoismo","egregio","elaborato","elargire","elegante","elencato","eletto","elevare","elfico","elica","elmo","elsa","eluso","emanato","emblema","emesso","emiro","emotivo","emozione","empirico","emulo","endemico","enduro","energia","enfasi","enoteca","entrare","enzima","epatite","epilogo","episodio","epocale","eppure","equatore","erario","erba","erboso","erede","eremita","erigere","ermetico","eroe","erosivo","errante","esagono","esame","esanime","esaudire","esca","esempio","esercito","esibito","esigente","esistere","esito","esofago","esortato","esoso","espanso","espresso","essenza","esso","esteso","estimare","estonia","estroso","esultare","etilico","etnico","etrusco","etto","euclideo","europa","evaso","evidenza","evitato","evoluto","evviva","fabbrica","faccenda","fachiro","falco","famiglia","fanale","fanfara","fango","fantasma","fare","farfalla","farinoso","farmaco","fascia","fastoso","fasullo","faticare","fato","favoloso","febbre","fecola","fede","fegato","felpa","feltro","femmina","fendere","fenomeno","fermento","ferro","fertile","fessura","festivo","fetta","feudo","fiaba","fiducia","fifa","figurato","filo","finanza","finestra","finire","fiore","fiscale","fisico","fiume","flacone","flamenco","flebo","flemma","florido","fluente","fluoro","fobico","focaccia","focoso","foderato","foglio","folata","folclore","folgore","fondente","fonetico","fonia","fontana","forbito","forchetta","foresta","formica","fornaio","foro","fortezza","forzare","fosfato","fosso","fracasso","frana","frassino","fratello","freccetta","frenata","fresco","frigo","frollino","fronde","frugale","frutta","fucilata","fucsia","fuggente","fulmine","fulvo","fumante","fumetto","fumoso","fune","funzione","fuoco","furbo","furgone","furore","fuso","futile","gabbiano","gaffe","galateo","gallina","galoppo","gambero","gamma","garanzia","garbo","garofano","garzone","gasdotto","gasolio","gastrico","gatto","gaudio","gazebo","gazzella","geco","gelatina","gelso","gemello","gemmato","gene","genitore","gennaio","genotipo","gergo","ghepardo","ghiaccio","ghisa","giallo","gilda","ginepro","giocare","gioiello","giorno","giove","girato","girone","gittata","giudizio","giurato","giusto","globulo","glutine","gnomo","gobba","golf","gomito","gommone","gonfio","gonna","governo","gracile","grado","grafico","grammo","grande","grattare","gravoso","grazia","greca","gregge","grifone","grigio","grinza","grotta","gruppo","guadagno","guaio","guanto","guardare","gufo","guidare","ibernato","icona","identico","idillio","idolo","idra","idrico","idrogeno","igiene","ignaro","ignorato","ilare","illeso","illogico","illudere","imballo","imbevuto","imbocco","imbuto","immane","immerso","immolato","impacco","impeto","impiego","importo","impronta","inalare","inarcare","inattivo","incanto","incendio","inchino","incisivo","incluso","incontro","incrocio","incubo","indagine","india","indole","inedito","infatti","infilare","inflitto","ingaggio","ingegno","inglese","ingordo","ingrosso","innesco","inodore","inoltrare","inondato","insano","insetto","insieme","insonnia","insulina","intasato","intero","intonaco","intuito","inumidire","invalido","invece","invito","iperbole","ipnotico","ipotesi","ippica","iride","irlanda","ironico","irrigato","irrorare","isolato","isotopo","isterico","istituto","istrice","italia","iterare","labbro","labirinto","lacca","lacerato","lacrima","lacuna","laddove","lago","lampo","lancetta","lanterna","lardoso","larga","laringe","lastra","latenza","latino","lattuga","lavagna","lavoro","legale","leggero","lembo","lentezza","lenza","leone","lepre","lesivo","lessato","lesto","letterale","leva","levigato","libero","lido","lievito","lilla","limatura","limitare","limpido","lineare","lingua","liquido","lira","lirica","lisca","lite","litigio","livrea","locanda","lode","logica","lombare","londra","longevo","loquace","lorenzo","loto","lotteria","luce","lucidato","lumaca","luminoso","lungo","lupo","luppolo","lusinga","lusso","lutto","macabro","macchina","macero","macinato","madama","magico","maglia","magnete","magro","maiolica","malafede","malgrado","malinteso","malsano","malto","malumore","mana","mancia","mandorla","mangiare","manifesto","mannaro","manovra","mansarda","mantide","manubrio","mappa","maratona","marcire","maretta","marmo","marsupio","maschera","massaia","mastino","materasso","matricola","mattone","maturo","mazurca","meandro","meccanico","mecenate","medesimo","meditare","mega","melassa","melis","melodia","meninge","meno","mensola","mercurio","merenda","merlo","meschino","mese","messere","mestolo","metallo","metodo","mettere","miagolare","mica","micelio","michele","microbo","midollo","miele","migliore","milano","milite","mimosa","minerale","mini","minore","mirino","mirtillo","miscela","missiva","misto","misurare","mitezza","mitigare","mitra","mittente","mnemonico","modello","modifica","modulo","mogano","mogio","mole","molosso","monastero","monco","mondina","monetario","monile","monotono","monsone","montato","monviso","mora","mordere","morsicato","mostro","motivato","motosega","motto","movenza","movimento","mozzo","mucca","mucosa","muffa","mughetto","mugnaio","mulatto","mulinello","multiplo","mummia","munto","muovere","murale","musa","muscolo","musica","mutevole","muto","nababbo","nafta","nanometro","narciso","narice","narrato","nascere","nastrare","naturale","nautica","naviglio","nebulosa","necrosi","negativo","negozio","nemmeno","neofita","neretto","nervo","nessuno","nettuno","neutrale","neve","nevrotico","nicchia","ninfa","nitido","nobile","nocivo","nodo","nome","nomina","nordico","normale","norvegese","nostrano","notare","notizia","notturno","novella","nucleo","nulla","numero","nuovo","nutrire","nuvola","nuziale","oasi","obbedire","obbligo","obelisco","oblio","obolo","obsoleto","occasione","occhio","occidente","occorrere","occultare","ocra","oculato","odierno","odorare","offerta","offrire","offuscato","oggetto","oggi","ognuno","olandese","olfatto","oliato","oliva","ologramma","oltre","omaggio","ombelico","ombra","omega","omissione","ondoso","onere","onice","onnivoro","onorevole","onta","operato","opinione","opposto","oracolo","orafo","ordine","orecchino","orefice","orfano","organico","origine","orizzonte","orma","ormeggio","ornativo","orologio","orrendo","orribile","ortensia","ortica","orzata","orzo","osare","oscurare","osmosi","ospedale","ospite","ossa","ossidare","ostacolo","oste","otite","otre","ottagono","ottimo","ottobre","ovale","ovest","ovino","oviparo","ovocito","ovunque","ovviare","ozio","pacchetto","pace","pacifico","padella","padrone","paese","paga","pagina","palazzina","palesare","pallido","palo","palude","pandoro","pannello","paolo","paonazzo","paprica","parabola","parcella","parere","pargolo","pari","parlato","parola","partire","parvenza","parziale","passivo","pasticca","patacca","patologia","pattume","pavone","peccato","pedalare","pedonale","peggio","peloso","penare","pendice","penisola","pennuto","penombra","pensare","pentola","pepe","pepita","perbene","percorso","perdonato","perforare","pergamena","periodo","permesso","perno","perplesso","persuaso","pertugio","pervaso","pesatore","pesista","peso","pestifero","petalo","pettine","petulante","pezzo","piacere","pianta","piattino","piccino","picozza","piega","pietra","piffero","pigiama","pigolio","pigro","pila","pilifero","pillola","pilota","pimpante","pineta","pinna","pinolo","pioggia","piombo","piramide","piretico","pirite","pirolisi","pitone","pizzico","placebo","planare","plasma","platano","plenario","pochezza","poderoso","podismo","poesia","poggiare","polenta","poligono","pollice","polmonite","polpetta","polso","poltrona","polvere","pomice","pomodoro","ponte","popoloso","porfido","poroso","porpora","porre","portata","posa","positivo","possesso","postulato","potassio","potere","pranzo","prassi","pratica","precluso","predica","prefisso","pregiato","prelievo","premere","prenotare","preparato","presenza","pretesto","prevalso","prima","principe","privato","problema","procura","produrre","profumo","progetto","prolunga","promessa","pronome","proposta","proroga","proteso","prova","prudente","prugna","prurito","psiche","pubblico","pudica","pugilato","pugno","pulce","pulito","pulsante","puntare","pupazzo","pupilla","puro","quadro","qualcosa","quasi","querela","quota","raccolto","raddoppio","radicale","radunato","raffica","ragazzo","ragione","ragno","ramarro","ramingo","ramo","randagio","rantolare","rapato","rapina","rappreso","rasatura","raschiato","rasente","rassegna","rastrello","rata","ravveduto","reale","recepire","recinto","recluta","recondito","recupero","reddito","redimere","regalato","registro","regola","regresso","relazione","remare","remoto","renna","replica","reprimere","reputare","resa","residente","responso","restauro","rete","retina","retorica","rettifica","revocato","riassunto","ribadire","ribelle","ribrezzo","ricarica","ricco","ricevere","riciclato","ricordo","ricreduto","ridicolo","ridurre","rifasare","riflesso","riforma","rifugio","rigare","rigettato","righello","rilassato","rilevato","rimanere","rimbalzo","rimedio","rimorchio","rinascita","rincaro","rinforzo","rinnovo","rinomato","rinsavito","rintocco","rinuncia","rinvenire","riparato","ripetuto","ripieno","riportare","ripresa","ripulire","risata","rischio","riserva","risibile","riso","rispetto","ristoro","risultato","risvolto","ritardo","ritegno","ritmico","ritrovo","riunione","riva","riverso","rivincita","rivolto","rizoma","roba","robotico","robusto","roccia","roco","rodaggio","rodere","roditore","rogito","rollio","romantico","rompere","ronzio","rosolare","rospo","rotante","rotondo","rotula","rovescio","rubizzo","rubrica","ruga","rullino","rumine","rumoroso","ruolo","rupe","russare","rustico","sabato","sabbiare","sabotato","sagoma","salasso","saldatura","salgemma","salivare","salmone","salone","saltare","saluto","salvo","sapere","sapido","saporito","saraceno","sarcasmo","sarto","sassoso","satellite","satira","satollo","saturno","savana","savio","saziato","sbadiglio","sbalzo","sbancato","sbarra","sbattere","sbavare","sbendare","sbirciare","sbloccato","sbocciato","sbrinare","sbruffone","sbuffare","scabroso","scadenza","scala","scambiare","scandalo","scapola","scarso","scatenare","scavato","scelto","scenico","scettro","scheda","schiena","sciarpa","scienza","scindere","scippo","sciroppo","scivolo","sclerare","scodella","scolpito","scomparto","sconforto","scoprire","scorta","scossone","scozzese","scriba","scrollare","scrutinio","scuderia","scultore","scuola","scuro","scusare","sdebitare","sdoganare","seccatura","secondo","sedano","seggiola","segnalato","segregato","seguito","selciato","selettivo","sella","selvaggio","semaforo","sembrare","seme","seminato","sempre","senso","sentire","sepolto","sequenza","serata","serbato","sereno","serio","serpente","serraglio","servire","sestina","setola","settimana","sfacelo","sfaldare","sfamato","sfarzoso","sfaticato","sfera","sfida","sfilato","sfinge","sfocato","sfoderare","sfogo","sfoltire","sforzato","sfratto","sfruttato","sfuggito","sfumare","sfuso","sgabello","sgarbato","sgonfiare","sgorbio","sgrassato","sguardo","sibilo","siccome","sierra","sigla","signore","silenzio","sillaba","simbolo","simpatico","simulato","sinfonia","singolo","sinistro","sino","sintesi","sinusoide","sipario","sisma","sistole","situato","slitta","slogatura","sloveno","smarrito","smemorato","smentito","smeraldo","smilzo","smontare","smottato","smussato","snellire","snervato","snodo","sobbalzo","sobrio","soccorso","sociale","sodale","soffitto","sogno","soldato","solenne","solido","sollazzo","solo","solubile","solvente","somatico","somma","sonda","sonetto","sonnifero","sopire","soppeso","sopra","sorgere","sorpasso","sorriso","sorso","sorteggio","sorvolato","sospiro","sosta","sottile","spada","spalla","spargere","spatola","spavento","spazzola","specie","spedire","spegnere","spelatura","speranza","spessore","spettrale","spezzato","spia","spigoloso","spillato","spinoso","spirale","splendido","sportivo","sposo","spranga","sprecare","spronato","spruzzo","spuntino","squillo","sradicare","srotolato","stabile","stacco","staffa","stagnare","stampato","stantio","starnuto","stasera","statuto","stelo","steppa","sterzo","stiletto","stima","stirpe","stivale","stizzoso","stonato","storico","strappo","stregato","stridulo","strozzare","strutto","stuccare","stufo","stupendo","subentro","succoso","sudore","suggerito","sugo","sultano","suonare","superbo","supporto","surgelato","surrogato","sussurro","sutura","svagare","svedese","sveglio","svelare","svenuto","svezia","sviluppo","svista","svizzera","svolta","svuotare","tabacco","tabulato","tacciare","taciturno","tale","talismano","tampone","tannino","tara","tardivo","targato","tariffa","tarpare","tartaruga","tasto","tattico","taverna","tavolata","tazza","teca","tecnico","telefono","temerario","tempo","temuto","tendone","tenero","tensione","tentacolo","teorema","terme","terrazzo","terzetto","tesi","tesserato","testato","tetro","tettoia","tifare","tigella","timbro","tinto","tipico","tipografo","tiraggio","tiro","titanio","titolo","titubante","tizio","tizzone","toccare","tollerare","tolto","tombola","tomo","tonfo","tonsilla","topazio","topologia","toppa","torba","tornare","torrone","tortora","toscano","tossire","tostatura","totano","trabocco","trachea","trafila","tragedia","tralcio","tramonto","transito","trapano","trarre","trasloco","trattato","trave","treccia","tremolio","trespolo","tributo","tricheco","trifoglio","trillo","trincea","trio","tristezza","triturato","trivella","tromba","trono","troppo","trottola","trovare","truccato","tubatura","tuffato","tulipano","tumulto","tunisia","turbare","turchino","tuta","tutela","ubicato","uccello","uccisore","udire","uditivo","uffa","ufficio","uguale","ulisse","ultimato","umano","umile","umorismo","uncinetto","ungere","ungherese","unicorno","unificato","unisono","unitario","unte","uovo","upupa","uragano","urgenza","urlo","usanza","usato","uscito","usignolo","usuraio","utensile","utilizzo","utopia","vacante","vaccinato","vagabondo","vagliato","valanga","valgo","valico","valletta","valoroso","valutare","valvola","vampata","vangare","vanitoso","vano","vantaggio","vanvera","vapore","varano","varcato","variante","vasca","vedetta","vedova","veduto","vegetale","veicolo","velcro","velina","velluto","veloce","venato","vendemmia","vento","verace","verbale","vergogna","verifica","vero","verruca","verticale","vescica","vessillo","vestale","veterano","vetrina","vetusto","viandante","vibrante","vicenda","vichingo","vicinanza","vidimare","vigilia","vigneto","vigore","vile","villano","vimini","vincitore","viola","vipera","virgola","virologo","virulento","viscoso","visione","vispo","vissuto","visura","vita","vitello","vittima","vivanda","vivido","viziare","voce","voga","volatile","volere","volpe","voragine","vulcano","zampogna","zanna","zappato","zattera","zavorra","zefiro","zelante","zelo","zenzero","zerbino","zibetto","zinco","zircone","zitto","zolla","zotico","zucchero","zufolo","zulu","zuppa"],require$$6$1=["abaco","abdomen","abeja","abierto","abogado","abono","aborto","abrazo","abrir","abuelo","abuso","acabar","academia","acceso","accion","aceite","acelga","acento","aceptar","acido","aclarar","acne","acoger","acoso","activo","acto","actriz","actuar","acudir","acuerdo","acusar","adicto","admitir","adoptar","adorno","aduana","adulto","aereo","afectar","aficion","afinar","afirmar","agil","agitar","agonia","agosto","agotar","agregar","agrio","agua","agudo","aguila","aguja","ahogo","ahorro","aire","aislar","ajedrez","ajeno","ajuste","alacran","alambre","alarma","alba","album","alcalde","aldea","alegre","alejar","alerta","aleta","alfiler","alga","algodon","aliado","aliento","alivio","alma","almeja","almibar","altar","alteza","altivo","alto","altura","alumno","alzar","amable","amante","amapola","amargo","amasar","ambar","ambito","ameno","amigo","amistad","amor","amparo","amplio","ancho","anciano","ancla","andar","anden","anemia","angulo","anillo","animo","anis","anotar","antena","antiguo","antojo","anual","anular","anuncio","anadir","anejo","ano","apagar","aparato","apetito","apio","aplicar","apodo","aporte","apoyo","aprender","aprobar","apuesta","apuro","arado","arana","arar","arbitro","arbol","arbusto","archivo","arco","arder","ardilla","arduo","area","arido","aries","armonia","arnes","aroma","arpa","arpon","arreglo","arroz","arruga","arte","artista","asa","asado","asalto","ascenso","asegurar","aseo","asesor","asiento","asilo","asistir","asno","asombro","aspero","astilla","astro","astuto","asumir","asunto","atajo","ataque","atar","atento","ateo","atico","atleta","atomo","atraer","atroz","atun","audaz","audio","auge","aula","aumento","ausente","autor","aval","avance","avaro","ave","avellana","avena","avestruz","avion","aviso","ayer","ayuda","ayuno","azafran","azar","azote","azucar","azufre","azul","baba","babor","bache","bahia","baile","bajar","balanza","balcon","balde","bambu","banco","banda","bano","barba","barco","barniz","barro","bascula","baston","basura","batalla","bateria","batir","batuta","baul","bazar","bebe","bebida","bello","besar","beso","bestia","bicho","bien","bingo","blanco","bloque","blusa","boa","bobina","bobo","boca","bocina","boda","bodega","boina","bola","bolero","bolsa","bomba","bondad","bonito","bono","bonsai","borde","borrar","bosque","bote","botin","boveda","bozal","bravo","brazo","brecha","breve","brillo","brinco","brisa","broca","broma","bronce","brote","bruja","brusco","bruto","buceo","bucle","bueno","buey","bufanda","bufon","buho","buitre","bulto","burbuja","burla","burro","buscar","butaca","buzon","caballo","cabeza","cabina","cabra","cacao","cadaver","cadena","caer","cafe","caida","caiman","caja","cajon","cal","calamar","calcio","caldo","calidad","calle","calma","calor","calvo","cama","cambio","camello","camino","campo","cancer","candil","canela","canguro","canica","canto","cana","canon","caoba","caos","capaz","capitan","capote","captar","capucha","cara","carbon","carcel","careta","carga","carino","carne","carpeta","carro","carta","casa","casco","casero","caspa","castor","catorce","catre","caudal","causa","cazo","cebolla","ceder","cedro","celda","celebre","celoso","celula","cemento","ceniza","centro","cerca","cerdo","cereza","cero","cerrar","certeza","cesped","cetro","chacal","chaleco","champu","chancla","chapa","charla","chico","chiste","chivo","choque","choza","chuleta","chupar","ciclon","ciego","cielo","cien","cierto","cifra","cigarro","cima","cinco","cine","cinta","cipres","circo","ciruela","cisne","cita","ciudad","clamor","clan","claro","clase","clave","cliente","clima","clinica","cobre","coccion","cochino","cocina","coco","codigo","codo","cofre","coger","cohete","cojin","cojo","cola","colcha","colegio","colgar","colina","collar","colmo","columna","combate","comer","comida","comodo","compra","conde","conejo","conga","conocer","consejo","contar","copa","copia","corazon","corbata","corcho","cordon","corona","correr","coser","cosmos","costa","craneo","crater","crear","crecer","creido","crema","cria","crimen","cripta","crisis","cromo","cronica","croqueta","crudo","cruz","cuadro","cuarto","cuatro","cubo","cubrir","cuchara","cuello","cuento","cuerda","cuesta","cueva","cuidar","culebra","culpa","culto","cumbre","cumplir","cuna","cuneta","cuota","cupon","cupula","curar","curioso","curso","curva","cutis","dama","danza","dar","dardo","datil","deber","debil","decada","decir","dedo","defensa","definir","dejar","delfin","delgado","delito","demora","denso","dental","deporte","derecho","derrota","desayuno","deseo","desfile","desnudo","destino","desvio","detalle","detener","deuda","dia","diablo","diadema","diamante","diana","diario","dibujo","dictar","diente","dieta","diez","dificil","digno","dilema","diluir","dinero","directo","dirigir","disco","diseno","disfraz","diva","divino","doble","doce","dolor","domingo","don","donar","dorado","dormir","dorso","dos","dosis","dragon","droga","ducha","duda","duelo","dueno","dulce","duo","duque","durar","dureza","duro","ebano","ebrio","echar","eco","ecuador","edad","edicion","edificio","editor","educar","efecto","eficaz","eje","ejemplo","elefante","elegir","elemento","elevar","elipse","elite","elixir","elogio","eludir","embudo","emitir","emocion","empate","empeno","empleo","empresa","enano","encargo","enchufe","encia","enemigo","enero","enfado","enfermo","engano","enigma","enlace","enorme","enredo","ensayo","ensenar","entero","entrar","envase","envio","epoca","equipo","erizo","escala","escena","escolar","escribir","escudo","esencia","esfera","esfuerzo","espada","espejo","espia","esposa","espuma","esqui","estar","este","estilo","estufa","etapa","eterno","etica","etnia","evadir","evaluar","evento","evitar","exacto","examen","exceso","excusa","exento","exigir","exilio","existir","exito","experto","explicar","exponer","extremo","fabrica","fabula","fachada","facil","factor","faena","faja","falda","fallo","falso","faltar","fama","familia","famoso","faraon","farmacia","farol","farsa","fase","fatiga","fauna","favor","fax","febrero","fecha","feliz","feo","feria","feroz","fertil","fervor","festin","fiable","fianza","fiar","fibra","ficcion","ficha","fideo","fiebre","fiel","fiera","fiesta","figura","fijar","fijo","fila","filete","filial","filtro","fin","finca","fingir","finito","firma","flaco","flauta","flecha","flor","flota","fluir","flujo","fluor","fobia","foca","fogata","fogon","folio","folleto","fondo","forma","forro","fortuna","forzar","fosa","foto","fracaso","fragil","franja","frase","fraude","freir","freno","fresa","frio","frito","fruta","fuego","fuente","fuerza","fuga","fumar","funcion","funda","furgon","furia","fusil","futbol","futuro","gacela","gafas","gaita","gajo","gala","galeria","gallo","gamba","ganar","gancho","ganga","ganso","garaje","garza","gasolina","gastar","gato","gavilan","gemelo","gemir","gen","genero","genio","gente","geranio","gerente","germen","gesto","gigante","gimnasio","girar","giro","glaciar","globo","gloria","gol","golfo","goloso","golpe","goma","gordo","gorila","gorra","gota","goteo","gozar","grada","grafico","grano","grasa","gratis","grave","grieta","grillo","gripe","gris","grito","grosor","grua","grueso","grumo","grupo","guante","guapo","guardia","guerra","guia","guino","guion","guiso","guitarra","gusano","gustar","haber","habil","hablar","hacer","hacha","hada","hallar","hamaca","harina","haz","hazana","hebilla","hebra","hecho","helado","helio","hembra","herir","hermano","heroe","hervir","hielo","hierro","higado","higiene","hijo","himno","historia","hocico","hogar","hoguera","hoja","hombre","hongo","honor","honra","hora","hormiga","horno","hostil","hoyo","hueco","huelga","huerta","hueso","huevo","huida","huir","humano","humedo","humilde","humo","hundir","huracan","hurto","icono","ideal","idioma","idolo","iglesia","iglu","igual","ilegal","ilusion","imagen","iman","imitar","impar","imperio","imponer","impulso","incapaz","indice","inerte","infiel","informe","ingenio","inicio","inmenso","inmune","innato","insecto","instante","interes","intimo","intuir","inutil","invierno","ira","iris","ironia","isla","islote","jabali","jabon","jamon","jarabe","jardin","jarra","jaula","jazmin","jefe","jeringa","jinete","jornada","joroba","joven","joya","juerga","jueves","juez","jugador","jugo","juguete","juicio","junco","jungla","junio","juntar","jupiter","jurar","justo","juvenil","juzgar","kilo","koala","labio","lacio","lacra","lado","ladron","lagarto","lagrima","laguna","laico","lamer","lamina","lampara","lana","lancha","langosta","lanza","lapiz","largo","larva","lastima","lata","latex","latir","laurel","lavar","lazo","leal","leccion","leche","lector","leer","legion","legumbre","lejano","lengua","lento","lena","leon","leopardo","lesion","letal","letra","leve","leyenda","libertad","libro","licor","lider","lidiar","lienzo","liga","ligero","lima","limite","limon","limpio","lince","lindo","linea","lingote","lino","linterna","liquido","liso","lista","litera","litio","litro","llaga","llama","llanto","llave","llegar","llenar","llevar","llorar","llover","lluvia","lobo","locion","loco","locura","logica","logro","lombriz","lomo","lonja","lote","lucha","lucir","lugar","lujo","luna","lunes","lupa","lustro","luto","luz","maceta","macho","madera","madre","maduro","maestro","mafia","magia","mago","maiz","maldad","maleta","malla","malo","mama","mambo","mamut","manco","mando","manejar","manga","maniqui","manjar","mano","manso","manta","manana","mapa","maquina","mar","marco","marea","marfil","margen","marido","marmol","marron","martes","marzo","masa","mascara","masivo","matar","materia","matiz","matriz","maximo","mayor","mazorca","mecha","medalla","medio","medula","mejilla","mejor","melena","melon","memoria","menor","mensaje","mente","menu","mercado","merengue","merito","mes","meson","meta","meter","metodo","metro","mezcla","miedo","miel","miembro","miga","mil","milagro","militar","millon","mimo","mina","minero","minimo","minuto","miope","mirar","misa","miseria","misil","mismo","mitad","mito","mochila","mocion","moda","modelo","moho","mojar","molde","moler","molino","momento","momia","monarca","moneda","monja","monto","mono","morada","morder","moreno","morir","morro","morsa","mortal","mosca","mostrar","motivo","mover","movil","mozo","mucho","mudar","mueble","muela","muerte","muestra","mugre","mujer","mula","muleta","multa","mundo","muneca","mural","muro","musculo","museo","musgo","musica","muslo","nacar","nacion","nadar","naipe","naranja","nariz","narrar","nasal","natal","nativo","natural","nausea","naval","nave","navidad","necio","nectar","negar","negocio","negro","neon","nervio","neto","neutro","nevar","nevera","nicho","nido","niebla","nieto","ninez","nino","nitido","nivel","nobleza","noche","nomina","noria","norma","norte","nota","noticia","novato","novela","novio","nube","nuca","nucleo","nudillo","nudo","nuera","nueve","nuez","nulo","numero","nutria","oasis","obeso","obispo","objeto","obra","obrero","observar","obtener","obvio","oca","ocaso","oceano","ochenta","ocho","ocio","ocre","octavo","octubre","oculto","ocupar","ocurrir","odiar","odio","odisea","oeste","ofensa","oferta","oficio","ofrecer","ogro","oido","oir","ojo","ola","oleada","olfato","olivo","olla","olmo","olor","olvido","ombligo","onda","onza","opaco","opcion","opera","opinar","oponer","optar","optica","opuesto","oracion","orador","oral","orbita","orca","orden","oreja","organo","orgia","orgullo","oriente","origen","orilla","oro","orquesta","oruga","osadia","oscuro","osezno","oso","ostra","otono","otro","oveja","ovulo","oxido","oxigeno","oyente","ozono","pacto","padre","paella","pagina","pago","pais","pajaro","palabra","palco","paleta","palido","palma","paloma","palpar","pan","panal","panico","pantera","panuelo","papa","papel","papilla","paquete","parar","parcela","pared","parir","paro","parpado","parque","parrafo","parte","pasar","paseo","pasion","paso","pasta","pata","patio","patria","pausa","pauta","pavo","payaso","peaton","pecado","pecera","pecho","pedal","pedir","pegar","peine","pelar","peldano","pelea","peligro","pellejo","pelo","peluca","pena","pensar","penon","peon","peor","pepino","pequeno","pera","percha","perder","pereza","perfil","perico","perla","permiso","perro","persona","pesa","pesca","pesimo","pestana","petalo","petroleo","pez","pezuna","picar","pichon","pie","piedra","pierna","pieza","pijama","pilar","piloto","pimienta","pino","pintor","pinza","pina","piojo","pipa","pirata","pisar","piscina","piso","pista","piton","pizca","placa","plan","plata","playa","plaza","pleito","pleno","plomo","pluma","plural","pobre","poco","poder","podio","poema","poesia","poeta","polen","policia","pollo","polvo","pomada","pomelo","pomo","pompa","poner","porcion","portal","posada","poseer","posible","poste","potencia","potro","pozo","prado","precoz","pregunta","premio","prensa","preso","previo","primo","principe","prision","privar","proa","probar","proceso","producto","proeza","profesor","programa","prole","promesa","pronto","propio","proximo","prueba","publico","puchero","pudor","pueblo","puerta","puesto","pulga","pulir","pulmon","pulpo","pulso","puma","punto","punal","puno","pupa","pupila","pure","quedar","queja","quemar","querer","queso","quieto","quimica","quince","quitar","rabano","rabia","rabo","racion","radical","raiz","rama","rampa","rancho","rango","rapaz","rapido","rapto","rasgo","raspa","rato","rayo","raza","razon","reaccion","realidad","rebano","rebote","recaer","receta","rechazo","recoger","recreo","recto","recurso","red","redondo","reducir","reflejo","reforma","refran","refugio","regalo","regir","regla","regreso","rehen","reino","reir","reja","relato","relevo","relieve","relleno","reloj","remar","remedio","remo","rencor","rendir","renta","reparto","repetir","reposo","reptil","res","rescate","resina","respeto","resto","resumen","retiro","retorno","retrato","reunir","reves","revista","rey","rezar","rico","riego","rienda","riesgo","rifa","rigido","rigor","rincon","rinon","rio","riqueza","risa","ritmo","rito","rizo","roble","roce","rociar","rodar","rodeo","rodilla","roer","rojizo","rojo","romero","romper","ron","ronco","ronda","ropa","ropero","rosa","rosca","rostro","rotar","rubi","rubor","rudo","rueda","rugir","ruido","ruina","ruleta","rulo","rumbo","rumor","ruptura","ruta","rutina","sabado","saber","sabio","sable","sacar","sagaz","sagrado","sala","saldo","salero","salir","salmon","salon","salsa","salto","salud","salvar","samba","sancion","sandia","sanear","sangre","sanidad","sano","santo","sapo","saque","sardina","sarten","sastre","satan","sauna","saxofon","seccion","seco","secreto","secta","sed","seguir","seis","sello","selva","semana","semilla","senda","sensor","senal","senor","separar","sepia","sequia","ser","serie","sermon","servir","sesenta","sesion","seta","setenta","severo","sexo","sexto","sidra","siesta","siete","siglo","signo","silaba","silbar","silencio","silla","simbolo","simio","sirena","sistema","sitio","situar","sobre","socio","sodio","sol","solapa","soldado","soledad","solido","soltar","solucion","sombra","sondeo","sonido","sonoro","sonrisa","sopa","soplar","soporte","sordo","sorpresa","sorteo","sosten","sotano","suave","subir","suceso","sudor","suegra","suelo","sueno","suerte","sufrir","sujeto","sultan","sumar","superar","suplir","suponer","supremo","sur","surco","sureno","surgir","susto","sutil","tabaco","tabique","tabla","tabu","taco","tacto","tajo","talar","talco","talento","talla","talon","tamano","tambor","tango","tanque","tapa","tapete","tapia","tapon","taquilla","tarde","tarea","tarifa","tarjeta","tarot","tarro","tarta","tatuaje","tauro","taza","tazon","teatro","techo","tecla","tecnica","tejado","tejer","tejido","tela","telefono","tema","temor","templo","tenaz","tender","tener","tenis","tenso","teoria","terapia","terco","termino","ternura","terror","tesis","tesoro","testigo","tetera","texto","tez","tibio","tiburon","tiempo","tienda","tierra","tieso","tigre","tijera","tilde","timbre","timido","timo","tinta","tio","tipico","tipo","tira","tiron","titan","titere","titulo","tiza","toalla","tobillo","tocar","tocino","todo","toga","toldo","tomar","tono","tonto","topar","tope","toque","torax","torero","tormenta","torneo","toro","torpedo","torre","torso","tortuga","tos","tosco","toser","toxico","trabajo","tractor","traer","trafico","trago","traje","tramo","trance","trato","trauma","trazar","trebol","tregua","treinta","tren","trepar","tres","tribu","trigo","tripa","triste","triunfo","trofeo","trompa","tronco","tropa","trote","trozo","truco","trueno","trufa","tuberia","tubo","tuerto","tumba","tumor","tunel","tunica","turbina","turismo","turno","tutor","ubicar","ulcera","umbral","unidad","unir","universo","uno","untar","una","urbano","urbe","urgente","urna","usar","usuario","util","utopia","uva","vaca","vacio","vacuna","vagar","vago","vaina","vajilla","vale","valido","valle","valor","valvula","vampiro","vara","variar","varon","vaso","vecino","vector","vehiculo","veinte","vejez","vela","velero","veloz","vena","vencer","venda","veneno","vengar","venir","venta","venus","ver","verano","verbo","verde","vereda","verja","verso","verter","via","viaje","vibrar","vicio","victima","vida","video","vidrio","viejo","viernes","vigor","vil","villa","vinagre","vino","vinedo","violin","viral","virgo","virtud","visor","vispera","vista","vitamina","viudo","vivaz","vivero","vivir","vivo","volcan","volumen","volver","voraz","votar","voto","voz","vuelo","vulgar","yacer","yate","yegua","yema","yerno","yeso","yodo","yoga","yogur","zafiro","zanja","zapato","zarza","zona","zorro","zumo","zurdo"],require$$7=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],require$$8=["abacate","abaixo","abalar","abater","abduzir","abelha","aberto","abismo","abotoar","abranger","abreviar","abrigar","abrupto","absinto","absoluto","absurdo","abutre","acabado","acalmar","acampar","acanhar","acaso","aceitar","acelerar","acenar","acervo","acessar","acetona","achatar","acidez","acima","acionado","acirrar","aclamar","aclive","acolhida","acomodar","acoplar","acordar","acumular","acusador","adaptar","adega","adentro","adepto","adequar","aderente","adesivo","adeus","adiante","aditivo","adjetivo","adjunto","admirar","adorar","adquirir","adubo","adverso","advogado","aeronave","afastar","aferir","afetivo","afinador","afivelar","aflito","afluente","afrontar","agachar","agarrar","agasalho","agenciar","agilizar","agiota","agitado","agora","agradar","agreste","agrupar","aguardar","agulha","ajoelhar","ajudar","ajustar","alameda","alarme","alastrar","alavanca","albergue","albino","alcatra","aldeia","alecrim","alegria","alertar","alface","alfinete","algum","alheio","aliar","alicate","alienar","alinhar","aliviar","almofada","alocar","alpiste","alterar","altitude","alucinar","alugar","aluno","alusivo","alvo","amaciar","amador","amarelo","amassar","ambas","ambiente","ameixa","amenizar","amido","amistoso","amizade","amolador","amontoar","amoroso","amostra","amparar","ampliar","ampola","anagrama","analisar","anarquia","anatomia","andaime","anel","anexo","angular","animar","anjo","anomalia","anotado","ansioso","anterior","anuidade","anunciar","anzol","apagador","apalpar","apanhado","apego","apelido","apertada","apesar","apetite","apito","aplauso","aplicada","apoio","apontar","aposta","aprendiz","aprovar","aquecer","arame","aranha","arara","arcada","ardente","areia","arejar","arenito","aresta","argiloso","argola","arma","arquivo","arraial","arrebate","arriscar","arroba","arrumar","arsenal","arterial","artigo","arvoredo","asfaltar","asilado","aspirar","assador","assinar","assoalho","assunto","astral","atacado","atadura","atalho","atarefar","atear","atender","aterro","ateu","atingir","atirador","ativo","atoleiro","atracar","atrevido","atriz","atual","atum","auditor","aumentar","aura","aurora","autismo","autoria","autuar","avaliar","avante","avaria","avental","avesso","aviador","avisar","avulso","axila","azarar","azedo","azeite","azulejo","babar","babosa","bacalhau","bacharel","bacia","bagagem","baiano","bailar","baioneta","bairro","baixista","bajular","baleia","baliza","balsa","banal","bandeira","banho","banir","banquete","barato","barbado","baronesa","barraca","barulho","baseado","bastante","batata","batedor","batida","batom","batucar","baunilha","beber","beijo","beirada","beisebol","beldade","beleza","belga","beliscar","bendito","bengala","benzer","berimbau","berlinda","berro","besouro","bexiga","bezerro","bico","bicudo","bienal","bifocal","bifurcar","bigorna","bilhete","bimestre","bimotor","biologia","biombo","biosfera","bipolar","birrento","biscoito","bisneto","bispo","bissexto","bitola","bizarro","blindado","bloco","bloquear","boato","bobagem","bocado","bocejo","bochecha","boicotar","bolada","boletim","bolha","bolo","bombeiro","bonde","boneco","bonita","borbulha","borda","boreal","borracha","bovino","boxeador","branco","brasa","braveza","breu","briga","brilho","brincar","broa","brochura","bronzear","broto","bruxo","bucha","budismo","bufar","bule","buraco","busca","busto","buzina","cabana","cabelo","cabide","cabo","cabrito","cacau","cacetada","cachorro","cacique","cadastro","cadeado","cafezal","caiaque","caipira","caixote","cajado","caju","calafrio","calcular","caldeira","calibrar","calmante","calota","camada","cambista","camisa","camomila","campanha","camuflar","canavial","cancelar","caneta","canguru","canhoto","canivete","canoa","cansado","cantar","canudo","capacho","capela","capinar","capotar","capricho","captador","capuz","caracol","carbono","cardeal","careca","carimbar","carneiro","carpete","carreira","cartaz","carvalho","casaco","casca","casebre","castelo","casulo","catarata","cativar","caule","causador","cautelar","cavalo","caverna","cebola","cedilha","cegonha","celebrar","celular","cenoura","censo","centeio","cercar","cerrado","certeiro","cerveja","cetim","cevada","chacota","chaleira","chamado","chapada","charme","chatice","chave","chefe","chegada","cheiro","cheque","chicote","chifre","chinelo","chocalho","chover","chumbo","chutar","chuva","cicatriz","ciclone","cidade","cidreira","ciente","cigana","cimento","cinto","cinza","ciranda","circuito","cirurgia","citar","clareza","clero","clicar","clone","clube","coado","coagir","cobaia","cobertor","cobrar","cocada","coelho","coentro","coeso","cogumelo","coibir","coifa","coiote","colar","coleira","colher","colidir","colmeia","colono","coluna","comando","combinar","comentar","comitiva","comover","complexo","comum","concha","condor","conectar","confuso","congelar","conhecer","conjugar","consumir","contrato","convite","cooperar","copeiro","copiador","copo","coquetel","coragem","cordial","corneta","coronha","corporal","correio","cortejo","coruja","corvo","cosseno","costela","cotonete","couro","couve","covil","cozinha","cratera","cravo","creche","credor","creme","crer","crespo","criada","criminal","crioulo","crise","criticar","crosta","crua","cruzeiro","cubano","cueca","cuidado","cujo","culatra","culminar","culpar","cultura","cumprir","cunhado","cupido","curativo","curral","cursar","curto","cuspir","custear","cutelo","damasco","datar","debater","debitar","deboche","debulhar","decalque","decimal","declive","decote","decretar","dedal","dedicado","deduzir","defesa","defumar","degelo","degrau","degustar","deitado","deixar","delator","delegado","delinear","delonga","demanda","demitir","demolido","dentista","depenado","depilar","depois","depressa","depurar","deriva","derramar","desafio","desbotar","descanso","desenho","desfiado","desgaste","desigual","deslize","desmamar","desova","despesa","destaque","desviar","detalhar","detentor","detonar","detrito","deusa","dever","devido","devotado","dezena","diagrama","dialeto","didata","difuso","digitar","dilatado","diluente","diminuir","dinastia","dinheiro","diocese","direto","discreta","disfarce","disparo","disquete","dissipar","distante","ditador","diurno","diverso","divisor","divulgar","dizer","dobrador","dolorido","domador","dominado","donativo","donzela","dormente","dorsal","dosagem","dourado","doutor","drenagem","drible","drogaria","duelar","duende","dueto","duplo","duquesa","durante","duvidoso","eclodir","ecoar","ecologia","edificar","edital","educado","efeito","efetivar","ejetar","elaborar","eleger","eleitor","elenco","elevador","eliminar","elogiar","embargo","embolado","embrulho","embutido","emenda","emergir","emissor","empatia","empenho","empinado","empolgar","emprego","empurrar","emulador","encaixe","encenado","enchente","encontro","endeusar","endossar","enfaixar","enfeite","enfim","engajado","engenho","englobar","engomado","engraxar","enguia","enjoar","enlatar","enquanto","enraizar","enrolado","enrugar","ensaio","enseada","ensino","ensopado","entanto","enteado","entidade","entortar","entrada","entulho","envergar","enviado","envolver","enxame","enxerto","enxofre","enxuto","epiderme","equipar","ereto","erguido","errata","erva","ervilha","esbanjar","esbelto","escama","escola","escrita","escuta","esfinge","esfolar","esfregar","esfumado","esgrima","esmalte","espanto","espelho","espiga","esponja","espreita","espumar","esquerda","estaca","esteira","esticar","estofado","estrela","estudo","esvaziar","etanol","etiqueta","euforia","europeu","evacuar","evaporar","evasivo","eventual","evidente","evoluir","exagero","exalar","examinar","exato","exausto","excesso","excitar","exclamar","executar","exemplo","exibir","exigente","exonerar","expandir","expelir","expirar","explanar","exposto","expresso","expulsar","externo","extinto","extrato","fabricar","fabuloso","faceta","facial","fada","fadiga","faixa","falar","falta","familiar","fandango","fanfarra","fantoche","fardado","farelo","farinha","farofa","farpa","fartura","fatia","fator","favorita","faxina","fazenda","fechado","feijoada","feirante","felino","feminino","fenda","feno","fera","feriado","ferrugem","ferver","festejar","fetal","feudal","fiapo","fibrose","ficar","ficheiro","figurado","fileira","filho","filme","filtrar","firmeza","fisgada","fissura","fita","fivela","fixador","fixo","flacidez","flamingo","flanela","flechada","flora","flutuar","fluxo","focal","focinho","fofocar","fogo","foguete","foice","folgado","folheto","forjar","formiga","forno","forte","fosco","fossa","fragata","fralda","frango","frasco","fraterno","freira","frente","fretar","frieza","friso","fritura","fronha","frustrar","fruteira","fugir","fulano","fuligem","fundar","fungo","funil","furador","furioso","futebol","gabarito","gabinete","gado","gaiato","gaiola","gaivota","galega","galho","galinha","galocha","ganhar","garagem","garfo","gargalo","garimpo","garoupa","garrafa","gasoduto","gasto","gata","gatilho","gaveta","gazela","gelado","geleia","gelo","gemada","gemer","gemido","generoso","gengiva","genial","genoma","genro","geologia","gerador","germinar","gesso","gestor","ginasta","gincana","gingado","girafa","girino","glacial","glicose","global","glorioso","goela","goiaba","golfe","golpear","gordura","gorjeta","gorro","gostoso","goteira","governar","gracejo","gradual","grafite","gralha","grampo","granada","gratuito","graveto","graxa","grego","grelhar","greve","grilo","grisalho","gritaria","grosso","grotesco","grudado","grunhido","gruta","guache","guarani","guaxinim","guerrear","guiar","guincho","guisado","gula","guloso","guru","habitar","harmonia","haste","haver","hectare","herdar","heresia","hesitar","hiato","hibernar","hidratar","hiena","hino","hipismo","hipnose","hipoteca","hoje","holofote","homem","honesto","honrado","hormonal","hospedar","humorado","iate","ideia","idoso","ignorado","igreja","iguana","ileso","ilha","iludido","iluminar","ilustrar","imagem","imediato","imenso","imersivo","iminente","imitador","imortal","impacto","impedir","implante","impor","imprensa","impune","imunizar","inalador","inapto","inativo","incenso","inchar","incidir","incluir","incolor","indeciso","indireto","indutor","ineficaz","inerente","infantil","infestar","infinito","inflamar","informal","infrator","ingerir","inibido","inicial","inimigo","injetar","inocente","inodoro","inovador","inox","inquieto","inscrito","inseto","insistir","inspetor","instalar","insulto","intacto","integral","intimar","intocado","intriga","invasor","inverno","invicto","invocar","iogurte","iraniano","ironizar","irreal","irritado","isca","isento","isolado","isqueiro","italiano","janeiro","jangada","janta","jararaca","jardim","jarro","jasmim","jato","javali","jazida","jejum","joaninha","joelhada","jogador","joia","jornal","jorrar","jovem","juba","judeu","judoca","juiz","julgador","julho","jurado","jurista","juro","justa","labareda","laboral","lacre","lactante","ladrilho","lagarta","lagoa","laje","lamber","lamentar","laminar","lampejo","lanche","lapidar","lapso","laranja","lareira","largura","lasanha","lastro","lateral","latido","lavanda","lavoura","lavrador","laxante","lazer","lealdade","lebre","legado","legendar","legista","leigo","leiloar","leitura","lembrete","leme","lenhador","lentilha","leoa","lesma","leste","letivo","letreiro","levar","leveza","levitar","liberal","libido","liderar","ligar","ligeiro","limitar","limoeiro","limpador","linda","linear","linhagem","liquidez","listagem","lisura","litoral","livro","lixa","lixeira","locador","locutor","lojista","lombo","lona","longe","lontra","lorde","lotado","loteria","loucura","lousa","louvar","luar","lucidez","lucro","luneta","lustre","lutador","luva","macaco","macete","machado","macio","madeira","madrinha","magnata","magreza","maior","mais","malandro","malha","malote","maluco","mamilo","mamoeiro","mamute","manada","mancha","mandato","manequim","manhoso","manivela","manobrar","mansa","manter","manusear","mapeado","maquinar","marcador","maresia","marfim","margem","marinho","marmita","maroto","marquise","marreco","martelo","marujo","mascote","masmorra","massagem","mastigar","matagal","materno","matinal","matutar","maxilar","medalha","medida","medusa","megafone","meiga","melancia","melhor","membro","memorial","menino","menos","mensagem","mental","merecer","mergulho","mesada","mesclar","mesmo","mesquita","mestre","metade","meteoro","metragem","mexer","mexicano","micro","migalha","migrar","milagre","milenar","milhar","mimado","minerar","minhoca","ministro","minoria","miolo","mirante","mirtilo","misturar","mocidade","moderno","modular","moeda","moer","moinho","moita","moldura","moleza","molho","molinete","molusco","montanha","moqueca","morango","morcego","mordomo","morena","mosaico","mosquete","mostarda","motel","motim","moto","motriz","muda","muito","mulata","mulher","multar","mundial","munido","muralha","murcho","muscular","museu","musical","nacional","nadador","naja","namoro","narina","narrado","nascer","nativa","natureza","navalha","navegar","navio","neblina","nebuloso","negativa","negociar","negrito","nervoso","neta","neural","nevasca","nevoeiro","ninar","ninho","nitidez","nivelar","nobreza","noite","noiva","nomear","nominal","nordeste","nortear","notar","noticiar","noturno","novelo","novilho","novo","nublado","nudez","numeral","nupcial","nutrir","nuvem","obcecado","obedecer","objetivo","obrigado","obscuro","obstetra","obter","obturar","ocidente","ocioso","ocorrer","oculista","ocupado","ofegante","ofensiva","oferenda","oficina","ofuscado","ogiva","olaria","oleoso","olhar","oliveira","ombro","omelete","omisso","omitir","ondulado","oneroso","ontem","opcional","operador","oponente","oportuno","oposto","orar","orbitar","ordem","ordinal","orfanato","orgasmo","orgulho","oriental","origem","oriundo","orla","ortodoxo","orvalho","oscilar","ossada","osso","ostentar","otimismo","ousadia","outono","outubro","ouvido","ovelha","ovular","oxidar","oxigenar","pacato","paciente","pacote","pactuar","padaria","padrinho","pagar","pagode","painel","pairar","paisagem","palavra","palestra","palheta","palito","palmada","palpitar","pancada","panela","panfleto","panqueca","pantanal","papagaio","papelada","papiro","parafina","parcial","pardal","parede","partida","pasmo","passado","pastel","patamar","patente","patinar","patrono","paulada","pausar","peculiar","pedalar","pedestre","pediatra","pedra","pegada","peitoral","peixe","pele","pelicano","penca","pendurar","peneira","penhasco","pensador","pente","perceber","perfeito","pergunta","perito","permitir","perna","perplexo","persiana","pertence","peruca","pescado","pesquisa","pessoa","petiscar","piada","picado","piedade","pigmento","pilastra","pilhado","pilotar","pimenta","pincel","pinguim","pinha","pinote","pintar","pioneiro","pipoca","piquete","piranha","pires","pirueta","piscar","pistola","pitanga","pivete","planta","plaqueta","platina","plebeu","plumagem","pluvial","pneu","poda","poeira","poetisa","polegada","policiar","poluente","polvilho","pomar","pomba","ponderar","pontaria","populoso","porta","possuir","postal","pote","poupar","pouso","povoar","praia","prancha","prato","praxe","prece","predador","prefeito","premiar","prensar","preparar","presilha","pretexto","prevenir","prezar","primata","princesa","prisma","privado","processo","produto","profeta","proibido","projeto","prometer","propagar","prosa","protetor","provador","publicar","pudim","pular","pulmonar","pulseira","punhal","punir","pupilo","pureza","puxador","quadra","quantia","quarto","quase","quebrar","queda","queijo","quente","querido","quimono","quina","quiosque","rabanada","rabisco","rachar","racionar","radial","raiar","rainha","raio","raiva","rajada","ralado","ramal","ranger","ranhura","rapadura","rapel","rapidez","raposa","raquete","raridade","rasante","rascunho","rasgar","raspador","rasteira","rasurar","ratazana","ratoeira","realeza","reanimar","reaver","rebaixar","rebelde","rebolar","recado","recente","recheio","recibo","recordar","recrutar","recuar","rede","redimir","redonda","reduzida","reenvio","refinar","refletir","refogar","refresco","refugiar","regalia","regime","regra","reinado","reitor","rejeitar","relativo","remador","remendo","remorso","renovado","reparo","repelir","repleto","repolho","represa","repudiar","requerer","resenha","resfriar","resgatar","residir","resolver","respeito","ressaca","restante","resumir","retalho","reter","retirar","retomada","retratar","revelar","revisor","revolta","riacho","rica","rigidez","rigoroso","rimar","ringue","risada","risco","risonho","robalo","rochedo","rodada","rodeio","rodovia","roedor","roleta","romano","roncar","rosado","roseira","rosto","rota","roteiro","rotina","rotular","rouco","roupa","roxo","rubro","rugido","rugoso","ruivo","rumo","rupestre","russo","sabor","saciar","sacola","sacudir","sadio","safira","saga","sagrada","saibro","salada","saleiro","salgado","saliva","salpicar","salsicha","saltar","salvador","sambar","samurai","sanar","sanfona","sangue","sanidade","sapato","sarda","sargento","sarjeta","saturar","saudade","saxofone","sazonal","secar","secular","seda","sedento","sediado","sedoso","sedutor","segmento","segredo","segundo","seiva","seleto","selvagem","semanal","semente","senador","senhor","sensual","sentado","separado","sereia","seringa","serra","servo","setembro","setor","sigilo","silhueta","silicone","simetria","simpatia","simular","sinal","sincero","singular","sinopse","sintonia","sirene","siri","situado","soberano","sobra","socorro","sogro","soja","solda","soletrar","solteiro","sombrio","sonata","sondar","sonegar","sonhador","sono","soprano","soquete","sorrir","sorteio","sossego","sotaque","soterrar","sovado","sozinho","suavizar","subida","submerso","subsolo","subtrair","sucata","sucesso","suco","sudeste","sufixo","sugador","sugerir","sujeito","sulfato","sumir","suor","superior","suplicar","suposto","suprimir","surdina","surfista","surpresa","surreal","surtir","suspiro","sustento","tabela","tablete","tabuada","tacho","tagarela","talher","talo","talvez","tamanho","tamborim","tampa","tangente","tanto","tapar","tapioca","tardio","tarefa","tarja","tarraxa","tatuagem","taurino","taxativo","taxista","teatral","tecer","tecido","teclado","tedioso","teia","teimar","telefone","telhado","tempero","tenente","tensor","tentar","termal","terno","terreno","tese","tesoura","testado","teto","textura","texugo","tiara","tigela","tijolo","timbrar","timidez","tingido","tinteiro","tiragem","titular","toalha","tocha","tolerar","tolice","tomada","tomilho","tonel","tontura","topete","tora","torcido","torneio","torque","torrada","torto","tostar","touca","toupeira","toxina","trabalho","tracejar","tradutor","trafegar","trajeto","trama","trancar","trapo","traseiro","tratador","travar","treino","tremer","trepidar","trevo","triagem","tribo","triciclo","tridente","trilogia","trindade","triplo","triturar","triunfal","trocar","trombeta","trova","trunfo","truque","tubular","tucano","tudo","tulipa","tupi","turbo","turma","turquesa","tutelar","tutorial","uivar","umbigo","unha","unidade","uniforme","urologia","urso","urtiga","urubu","usado","usina","usufruir","vacina","vadiar","vagaroso","vaidoso","vala","valente","validade","valores","vantagem","vaqueiro","varanda","vareta","varrer","vascular","vasilha","vassoura","vazar","vazio","veado","vedar","vegetar","veicular","veleiro","velhice","veludo","vencedor","vendaval","venerar","ventre","verbal","verdade","vereador","vergonha","vermelho","verniz","versar","vertente","vespa","vestido","vetorial","viaduto","viagem","viajar","viatura","vibrador","videira","vidraria","viela","viga","vigente","vigiar","vigorar","vilarejo","vinco","vinheta","vinil","violeta","virada","virtude","visitar","visto","vitral","viveiro","vizinho","voador","voar","vogal","volante","voleibol","voltagem","volumoso","vontade","vulto","vuvuzela","xadrez","xarope","xeque","xeretar","xerife","xingar","zangado","zarpar","zebu","zelador","zombar","zoologia","zumbido"],require$$9=["abandon","ability","able","about","above","absent","absorb","abstract","absurd","abuse","access","accident","account","accuse","achieve","acid","acoustic","acquire","across","act","action","actor","actress","actual","adapt","add","addict","address","adjust","admit","adult","advance","advice","aerobic","affair","afford","afraid","again","age","agent","agree","ahead","aim","air","airport","aisle","alarm","album","alcohol","alert","alien","all","alley","allow","almost","alone","alpha","already","also","alter","always","amateur","amazing","among","amount","amused","analyst","anchor","ancient","anger","angle","angry","animal","ankle","announce","annual","another","answer","antenna","antique","anxiety","any","apart","apology","appear","apple","approve","april","arch","arctic","area","arena","argue","arm","armed","armor","army","around","arrange","arrest","arrive","arrow","art","artefact","artist","artwork","ask","aspect","assault","asset","assist","assume","asthma","athlete","atom","attack","attend","attitude","attract","auction","audit","august","aunt","author","auto","autumn","average","avocado","avoid","awake","aware","away","awesome","awful","awkward","axis","baby","bachelor","bacon","badge","bag","balance","balcony","ball","bamboo","banana","banner","bar","barely","bargain","barrel","base","basic","basket","battle","beach","bean","beauty","because","become","beef","before","begin","behave","behind","believe","below","belt","bench","benefit","best","betray","better","between","beyond","bicycle","bid","bike","bind","biology","bird","birth","bitter","black","blade","blame","blanket","blast","bleak","bless","blind","blood","blossom","blouse","blue","blur","blush","board","boat","body","boil","bomb","bone","bonus","book","boost","border","boring","borrow","boss","bottom","bounce","box","boy","bracket","brain","brand","brass","brave","bread","breeze","brick","bridge","brief","bright","bring","brisk","broccoli","broken","bronze","broom","brother","brown","brush","bubble","buddy","budget","buffalo","build","bulb","bulk","bullet","bundle","bunker","burden","burger","burst","bus","business","busy","butter","buyer","buzz","cabbage","cabin","cable","cactus","cage","cake","call","calm","camera","camp","can","canal","cancel","candy","cannon","canoe","canvas","canyon","capable","capital","captain","car","carbon","card","cargo","carpet","carry","cart","case","cash","casino","castle","casual","cat","catalog","catch","category","cattle","caught","cause","caution","cave","ceiling","celery","cement","census","century","cereal","certain","chair","chalk","champion","change","chaos","chapter","charge","chase","chat","cheap","check","cheese","chef","cherry","chest","chicken","chief","child","chimney","choice","choose","chronic","chuckle","chunk","churn","cigar","cinnamon","circle","citizen","city","civil","claim","clap","clarify","claw","clay","clean","clerk","clever","click","client","cliff","climb","clinic","clip","clock","clog","close","cloth","cloud","clown","club","clump","cluster","clutch","coach","coast","coconut","code","coffee","coil","coin","collect","color","column","combine","come","comfort","comic","common","company","concert","conduct","confirm","congress","connect","consider","control","convince","cook","cool","copper","copy","coral","core","corn","correct","cost","cotton","couch","country","couple","course","cousin","cover","coyote","crack","cradle","craft","cram","crane","crash","crater","crawl","crazy","cream","credit","creek","crew","cricket","crime","crisp","critic","crop","cross","crouch","crowd","crucial","cruel","cruise","crumble","crunch","crush","cry","crystal","cube","culture","cup","cupboard","curious","current","curtain","curve","cushion","custom","cute","cycle","dad","damage","damp","dance","danger","daring","dash","daughter","dawn","day","deal","debate","debris","decade","december","decide","decline","decorate","decrease","deer","defense","define","defy","degree","delay","deliver","demand","demise","denial","dentist","deny","depart","depend","deposit","depth","deputy","derive","describe","desert","design","desk","despair","destroy","detail","detect","develop","device","devote","diagram","dial","diamond","diary","dice","diesel","diet","differ","digital","dignity","dilemma","dinner","dinosaur","direct","dirt","disagree","discover","disease","dish","dismiss","disorder","display","distance","divert","divide","divorce","dizzy","doctor","document","dog","doll","dolphin","domain","donate","donkey","donor","door","dose","double","dove","draft","dragon","drama","drastic","draw","dream","dress","drift","drill","drink","drip","drive","drop","drum","dry","duck","dumb","dune","during","dust","dutch","duty","dwarf","dynamic","eager","eagle","early","earn","earth","easily","east","easy","echo","ecology","economy","edge","edit","educate","effort","egg","eight","either","elbow","elder","electric","elegant","element","elephant","elevator","elite","else","embark","embody","embrace","emerge","emotion","employ","empower","empty","enable","enact","end","endless","endorse","enemy","energy","enforce","engage","engine","enhance","enjoy","enlist","enough","enrich","enroll","ensure","enter","entire","entry","envelope","episode","equal","equip","era","erase","erode","erosion","error","erupt","escape","essay","essence","estate","eternal","ethics","evidence","evil","evoke","evolve","exact","example","excess","exchange","excite","exclude","excuse","execute","exercise","exhaust","exhibit","exile","exist","exit","exotic","expand","expect","expire","explain","expose","express","extend","extra","eye","eyebrow","fabric","face","faculty","fade","faint","faith","fall","false","fame","family","famous","fan","fancy","fantasy","farm","fashion","fat","fatal","father","fatigue","fault","favorite","feature","february","federal","fee","feed","feel","female","fence","festival","fetch","fever","few","fiber","fiction","field","figure","file","film","filter","final","find","fine","finger","finish","fire","firm","first","fiscal","fish","fit","fitness","fix","flag","flame","flash","flat","flavor","flee","flight","flip","float","flock","floor","flower","fluid","flush","fly","foam","focus","fog","foil","fold","follow","food","foot","force","forest","forget","fork","fortune","forum","forward","fossil","foster","found","fox","fragile","frame","frequent","fresh","friend","fringe","frog","front","frost","frown","frozen","fruit","fuel","fun","funny","furnace","fury","future","gadget","gain","galaxy","gallery","game","gap","garage","garbage","garden","garlic","garment","gas","gasp","gate","gather","gauge","gaze","general","genius","genre","gentle","genuine","gesture","ghost","giant","gift","giggle","ginger","giraffe","girl","give","glad","glance","glare","glass","glide","glimpse","globe","gloom","glory","glove","glow","glue","goat","goddess","gold","good","goose","gorilla","gospel","gossip","govern","gown","grab","grace","grain","grant","grape","grass","gravity","great","green","grid","grief","grit","grocery","group","grow","grunt","guard","guess","guide","guilt","guitar","gun","gym","habit","hair","half","hammer","hamster","hand","happy","harbor","hard","harsh","harvest","hat","have","hawk","hazard","head","health","heart","heavy","hedgehog","height","hello","helmet","help","hen","hero","hidden","high","hill","hint","hip","hire","history","hobby","hockey","hold","hole","holiday","hollow","home","honey","hood","hope","horn","horror","horse","hospital","host","hotel","hour","hover","hub","huge","human","humble","humor","hundred","hungry","hunt","hurdle","hurry","hurt","husband","hybrid","ice","icon","idea","identify","idle","ignore","ill","illegal","illness","image","imitate","immense","immune","impact","impose","improve","impulse","inch","include","income","increase","index","indicate","indoor","industry","infant","inflict","inform","inhale","inherit","initial","inject","injury","inmate","inner","innocent","input","inquiry","insane","insect","inside","inspire","install","intact","interest","into","invest","invite","involve","iron","island","isolate","issue","item","ivory","jacket","jaguar","jar","jazz","jealous","jeans","jelly","jewel","job","join","joke","journey","joy","judge","juice","jump","jungle","junior","junk","just","kangaroo","keen","keep","ketchup","key","kick","kid","kidney","kind","kingdom","kiss","kit","kitchen","kite","kitten","kiwi","knee","knife","knock","know","lab","label","labor","ladder","lady","lake","lamp","language","laptop","large","later","latin","laugh","laundry","lava","law","lawn","lawsuit","layer","lazy","leader","leaf","learn","leave","lecture","left","leg","legal","legend","leisure","lemon","lend","length","lens","leopard","lesson","letter","level","liar","liberty","library","license","life","lift","light","like","limb","limit","link","lion","liquid","list","little","live","lizard","load","loan","lobster","local","lock","logic","lonely","long","loop","lottery","loud","lounge","love","loyal","lucky","luggage","lumber","lunar","lunch","luxury","lyrics","machine","mad","magic","magnet","maid","mail","main","major","make","mammal","man","manage","mandate","mango","mansion","manual","maple","marble","march","margin","marine","market","marriage","mask","mass","master","match","material","math","matrix","matter","maximum","maze","meadow","mean","measure","meat","mechanic","medal","media","melody","melt","member","memory","mention","menu","mercy","merge","merit","merry","mesh","message","metal","method","middle","midnight","milk","million","mimic","mind","minimum","minor","minute","miracle","mirror","misery","miss","mistake","mix","mixed","mixture","mobile","model","modify","mom","moment","monitor","monkey","monster","month","moon","moral","more","morning","mosquito","mother","motion","motor","mountain","mouse","move","movie","much","muffin","mule","multiply","muscle","museum","mushroom","music","must","mutual","myself","mystery","myth","naive","name","napkin","narrow","nasty","nation","nature","near","neck","need","negative","neglect","neither","nephew","nerve","nest","net","network","neutral","never","news","next","nice","night","noble","noise","nominee","noodle","normal","north","nose","notable","note","nothing","notice","novel","now","nuclear","number","nurse","nut","oak","obey","object","oblige","obscure","observe","obtain","obvious","occur","ocean","october","odor","off","offer","office","often","oil","okay","old","olive","olympic","omit","once","one","onion","online","only","open","opera","opinion","oppose","option","orange","orbit","orchard","order","ordinary","organ","orient","original","orphan","ostrich","other","outdoor","outer","output","outside","oval","oven","over","own","owner","oxygen","oyster","ozone","pact","paddle","page","pair","palace","palm","panda","panel","panic","panther","paper","parade","parent","park","parrot","party","pass","patch","path","patient","patrol","pattern","pause","pave","payment","peace","peanut","pear","peasant","pelican","pen","penalty","pencil","people","pepper","perfect","permit","person","pet","phone","photo","phrase","physical","piano","picnic","picture","piece","pig","pigeon","pill","pilot","pink","pioneer","pipe","pistol","pitch","pizza","place","planet","plastic","plate","play","please","pledge","pluck","plug","plunge","poem","poet","point","polar","pole","police","pond","pony","pool","popular","portion","position","possible","post","potato","pottery","poverty","powder","power","practice","praise","predict","prefer","prepare","present","pretty","prevent","price","pride","primary","print","priority","prison","private","prize","problem","process","produce","profit","program","project","promote","proof","property","prosper","protect","proud","provide","public","pudding","pull","pulp","pulse","pumpkin","punch","pupil","puppy","purchase","purity","purpose","purse","push","put","puzzle","pyramid","quality","quantum","quarter","question","quick","quit","quiz","quote","rabbit","raccoon","race","rack","radar","radio","rail","rain","raise","rally","ramp","ranch","random","range","rapid","rare","rate","rather","raven","raw","razor","ready","real","reason","rebel","rebuild","recall","receive","recipe","record","recycle","reduce","reflect","reform","refuse","region","regret","regular","reject","relax","release","relief","rely","remain","remember","remind","remove","render","renew","rent","reopen","repair","repeat","replace","report","require","rescue","resemble","resist","resource","response","result","retire","retreat","return","reunion","reveal","review","reward","rhythm","rib","ribbon","rice","rich","ride","ridge","rifle","right","rigid","ring","riot","ripple","risk","ritual","rival","river","road","roast","robot","robust","rocket","romance","roof","rookie","room","rose","rotate","rough","round","route","royal","rubber","rude","rug","rule","run","runway","rural","sad","saddle","sadness","safe","sail","salad","salmon","salon","salt","salute","same","sample","sand","satisfy","satoshi","sauce","sausage","save","say","scale","scan","scare","scatter","scene","scheme","school","science","scissors","scorpion","scout","scrap","screen","script","scrub","sea","search","season","seat","second","secret","section","security","seed","seek","segment","select","sell","seminar","senior","sense","sentence","series","service","session","settle","setup","seven","shadow","shaft","shallow","share","shed","shell","sheriff","shield","shift","shine","ship","shiver","shock","shoe","shoot","shop","short","shoulder","shove","shrimp","shrug","shuffle","shy","sibling","sick","side","siege","sight","sign","silent","silk","silly","silver","similar","simple","since","sing","siren","sister","situate","six","size","skate","sketch","ski","skill","skin","skirt","skull","slab","slam","sleep","slender","slice","slide","slight","slim","slogan","slot","slow","slush","small","smart","smile","smoke","smooth","snack","snake","snap","sniff","snow","soap","soccer","social","sock","soda","soft","solar","soldier","solid","solution","solve","someone","song","soon","sorry","sort","soul","sound","soup","source","south","space","spare","spatial","spawn","speak","special","speed","spell","spend","sphere","spice","spider","spike","spin","spirit","split","spoil","sponsor","spoon","sport","spot","spray","spread","spring","spy","square","squeeze","squirrel","stable","stadium","staff","stage","stairs","stamp","stand","start","state","stay","steak","steel","stem","step","stereo","stick","still","sting","stock","stomach","stone","stool","story","stove","strategy","street","strike","strong","struggle","student","stuff","stumble","style","subject","submit","subway","success","such","sudden","suffer","sugar","suggest","suit","summer","sun","sunny","sunset","super","supply","supreme","sure","surface","surge","surprise","surround","survey","suspect","sustain","swallow","swamp","swap","swarm","swear","sweet","swift","swim","swing","switch","sword","symbol","symptom","syrup","system","table","tackle","tag","tail","talent","talk","tank","tape","target","task","taste","tattoo","taxi","teach","team","tell","ten","tenant","tennis","tent","term","test","text","thank","that","theme","then","theory","there","they","thing","this","thought","three","thrive","throw","thumb","thunder","ticket","tide","tiger","tilt","timber","time","tiny","tip","tired","tissue","title","toast","tobacco","today","toddler","toe","together","toilet","token","tomato","tomorrow","tone","tongue","tonight","tool","tooth","top","topic","topple","torch","tornado","tortoise","toss","total","tourist","toward","tower","town","toy","track","trade","traffic","tragic","train","transfer","trap","trash","travel","tray","treat","tree","trend","trial","tribe","trick","trigger","trim","trip","trophy","trouble","truck","true","truly","trumpet","trust","truth","try","tube","tuition","tumble","tuna","tunnel","turkey","turn","turtle","twelve","twenty","twice","twin","twist","two","type","typical","ugly","umbrella","unable","unaware","uncle","uncover","under","undo","unfair","unfold","unhappy","uniform","unique","unit","universe","unknown","unlock","until","unusual","unveil","update","upgrade","uphold","upon","upper","upset","urban","urge","usage","use","used","useful","useless","usual","utility","vacant","vacuum","vague","valid","valley","valve","van","vanish","vapor","various","vast","vault","vehicle","velvet","vendor","venture","venue","verb","verify","version","very","vessel","veteran","viable","vibrant","vicious","victory","video","view","village","vintage","violin","virtual","virus","visa","visit","visual","vital","vivid","vocal","voice","void","volcano","volume","vote","voyage","wage","wagon","wait","walk","wall","walnut","want","warfare","warm","warrior","wash","wasp","waste","water","wave","way","wealth","weapon","wear","weasel","weather","web","wedding","weekend","weird","welcome","west","wet","whale","what","wheat","wheel","when","where","whip","whisper","wide","width","wife","wild","will","win","window","wine","wing","wink","winner","winter","wire","wisdom","wise","wish","witness","wolf","woman","wonder","wood","wool","word","work","world","worry","worth","wrap","wreck","wrestle","wrist","write","wrong","yard","year","yellow","you","young","youth","zebra","zero","zone","zoo"];Object.defineProperty(_wordlists,"__esModule",{value:!0});const wordlists={};_wordlists.wordlists=wordlists;let _default$2;var _default_1=_wordlists._default=_default$2;try{_default_1=_wordlists._default=_default$2=require$$0$2,wordlists.czech=_default$2}catch{}try{_default_1=_wordlists._default=_default$2=require$$1$2,wordlists.chinese_simplified=_default$2}catch{}try{_default_1=_wordlists._default=_default$2=require$$2$2,wordlists.chinese_traditional=_default$2}catch{}try{_default_1=_wordlists._default=_default$2=require$$3,wordlists.korean=_default$2}catch{}try{_default_1=_wordlists._default=_default$2=require$$4$1,wordlists.french=_default$2}catch{}try{_default_1=_wordlists._default=_default$2=require$$5,wordlists.italian=_default$2}catch{}try{_default_1=_wordlists._default=_default$2=require$$6$1,wordlists.spanish=_default$2}catch{}try{_default_1=_wordlists._default=_default$2=require$$7,wordlists.japanese=_default$2,wordlists.JA=_default$2}catch{}try{_default_1=_wordlists._default=_default$2=require$$8,wordlists.portuguese=_default$2}catch{}try{_default_1=_wordlists._default=_default$2=require$$9,wordlists.english=_default$2,wordlists.EN=_default$2}catch{}Object.defineProperty(src$6,"__esModule",{value:!0});const sha256_1$2=sha256$4,sha512_1$1=sha512$2,pbkdf2_1=pbkdf2$2,utils_1$3=utils$h,_wordlists_1=_wordlists;let DEFAULT_WORDLIST=_wordlists_1._default;const INVALID_MNEMONIC="Invalid mnemonic",INVALID_ENTROPY="Invalid entropy",INVALID_CHECKSUM="Invalid mnemonic checksum",WORDLIST_REQUIRED=`A wordlist is required but a default could not be found.
Please pass a 2048 word array explicitly.`;function normalize(t){return(t||"").normalize("NFKD")}function lpad(t,e,n){for(;t.length<n;)t=e+t;return t}function binaryToByte(t){return parseInt(t,2)}function bytesToBinary(t){return t.map(e=>lpad(e.toString(2),"0",8)).join("")}function deriveChecksumBits(t){const n=t.length*8/32,o=sha256_1$2.sha256(Uint8Array.from(t));return bytesToBinary(Array.from(o)).slice(0,n)}function salt(t){return"mnemonic"+(t||"")}function mnemonicToSeedSync(t,e){const n=Uint8Array.from(Buffer$1$1.from(normalize(t),"utf8")),o=Uint8Array.from(Buffer$1$1.from(salt(normalize(e)),"utf8")),c=pbkdf2_1.pbkdf2(sha512_1$1.sha512,n,o,{c:2048,dkLen:64});return Buffer$1$1.from(c)}var mnemonicToSeedSync_1=src$6.mnemonicToSeedSync=mnemonicToSeedSync;function mnemonicToSeed(t,e){const n=Uint8Array.from(Buffer$1$1.from(normalize(t),"utf8")),o=Uint8Array.from(Buffer$1$1.from(salt(normalize(e)),"utf8"));return pbkdf2_1.pbkdf2Async(sha512_1$1.sha512,n,o,{c:2048,dkLen:64}).then(c=>Buffer$1$1.from(c))}src$6.mnemonicToSeed=mnemonicToSeed;function mnemonicToEntropy(t,e){if(e=e||DEFAULT_WORDLIST,!e)throw new Error(WORDLIST_REQUIRED);const n=normalize(t).split(" ");if(n.length%3!==0)throw new Error(INVALID_MNEMONIC);const o=n.map(S=>{const M=e.indexOf(S);if(M===-1)throw new Error(INVALID_MNEMONIC);return lpad(M.toString(2),"0",11)}).join(""),c=Math.floor(o.length/33)*32,a=o.slice(0,c),l=o.slice(c),b=a.match(/(.{1,8})/g).map(binaryToByte);if(b.length<16)throw new Error(INVALID_ENTROPY);if(b.length>32)throw new Error(INVALID_ENTROPY);if(b.length%4!==0)throw new Error(INVALID_ENTROPY);const v=Buffer$1$1.from(b);if(deriveChecksumBits(v)!==l)throw new Error(INVALID_CHECKSUM);return v.toString("hex")}src$6.mnemonicToEntropy=mnemonicToEntropy;function entropyToMnemonic(t,e){if(Buffer$1$1.isBuffer(t)||(t=Buffer$1$1.from(t,"hex")),e=e||DEFAULT_WORDLIST,!e)throw new Error(WORDLIST_REQUIRED);if(t.length<16)throw new TypeError(INVALID_ENTROPY);if(t.length>32)throw new TypeError(INVALID_ENTROPY);if(t.length%4!==0)throw new TypeError(INVALID_ENTROPY);const n=bytesToBinary(Array.from(t)),o=deriveChecksumBits(t),l=(n+o).match(/(.{1,11})/g).map(b=>{const v=binaryToByte(b);return e[v]});return e[0]===""?l.join(""):l.join(" ")}src$6.entropyToMnemonic=entropyToMnemonic;function generateMnemonic(t,e,n){if(t=t||128,t%32!==0)throw new TypeError(INVALID_ENTROPY);return e=e||(o=>Buffer$1$1.from(utils_1$3.randomBytes(o))),entropyToMnemonic(e(t/8),n)}var generateMnemonic_1=src$6.generateMnemonic=generateMnemonic;function validateMnemonic(t,e){try{mnemonicToEntropy(t,e)}catch{return!1}return!0}var validateMnemonic_1=src$6.validateMnemonic=validateMnemonic;function setDefaultWordlist(t){const e=_wordlists_1.wordlists[t];if(e)DEFAULT_WORDLIST=e;else throw new Error('Could not find wordlist for language "'+t+'"')}src$6.setDefaultWordlist=setDefaultWordlist;function getDefaultWordlist(){if(!DEFAULT_WORDLIST)throw new Error("No Default Wordlist set");return Object.keys(_wordlists_1.wordlists).filter(t=>t==="JA"||t==="EN"?!1:_wordlists_1.wordlists[t].every((e,n)=>e===DEFAULT_WORDLIST[n]))[0]}src$6.getDefaultWordlist=getDefaultWordlist;var _wordlists_2=_wordlists;src$6.wordlists=_wordlists_2.wordlists;class Web3Wallet{address;publicKey;provider;_privateKey}const generateDID$2=t=>`did:ethr:${t}`;class EVMWallet extends Web3Wallet{did;chainId;constructor(e,n){if(super(),!e)throw new Error("Mnemonic is required to generate wallet");const o=Wallet.fromMnemonic(e),a=new Wallet(o.privateKey,n).connect(n);this.address=a.address,this.publicKey=a.publicKey,this._privateKey=a.privateKey,this.did=generateDID$2(this.address),this.provider=n,this.chainId=n.network.chainId}async switchNetwork(e){if(this.chainId===e)return;const n=CHAIN_AVAILABLES.find(c=>c.id===e);if(!n)throw new Error("Chain not available");if(!this.provider)throw new Error("Provider not available");const o=new JsonRpcProvider(n.rpcUrl,n.id);this.provider=o,this.chainId=e}async sendTransaction(e){if(!this._privateKey)throw new Error("Private key is required to send token");const{to:n,value:o,contractAddress:c=AddressZero}=e;try{const a=new Wallet(this._privateKey,this.provider);if(n.toLowerCase()===c.toLowerCase())throw new Error("Sending tokens to ERC20 contract address is not allowed.");const l=parseUnits(o.toString());let b;if(c.toLowerCase()===AddressZero.toLowerCase())Logger$1.log("[INFO] Sending native token"),b=await a.sendTransaction({to:n,value:l});else{Logger$1.log("[INFO] Sending erc20 token");const A=["function balanceOf(address) view returns (uint)","function transfer(address to, uint amount) returns (boolean)"],S=new Wallet(this._privateKey,this.provider);b=await new Contract(c,A,S).transfer(n,l)}Logger$1.log("[INFO] Transaction Hash:",b.hash);const v=await b.wait();return Logger$1.log("[INFO] Transaction confirmed"),v}catch(a){throw a}}async signMessage(e){if(!this._privateKey)throw new Error("Private key is required to sign message");return new Wallet(this._privateKey,this.provider).signMessage(e)}async signTransaction(e){if(!this._privateKey)throw new Error("Private key is required to sign transaction");return new Wallet(this._privateKey,this.provider).signTransaction(e)}async getSigner(){if(!this._privateKey)throw new Error("Private key is required to get signer");if(!this.provider)throw new Error("Provider is required to get signer");return new Wallet(this._privateKey,this.provider).connect(this.provider)}verifySignature(e,n){if(!this.publicKey)throw new Error("Public key is required to verify signature");return verifyMessage(e,n)===this.address}}class ExternalEVMWallet extends Web3Wallet{constructor(e,n=!1){if(super(),this.provider=e,!n)throw new Error("Use create method to initialize ExternalEVMWallet");this.chainId=e.network.chainId,this.externalProvider=e,this._signer=e.getSigner()}chainId;externalProvider;_signer;static async create(e){const n=new Web3Provider(window.ethereum,e);await n.send("eth_requestAccounts",[]);const o=new ExternalEVMWallet(n,!0);return o.address=await o._signer.getAddress(),o}async switchNetwork(e){const n=CHAIN_AVAILABLES.find(c=>c.id===e);if(!n)throw new Error("Chain not available");if(n.type!=="evm")throw new Error("Only EVM chain is supported with external wallet.");const o=hexValue(e);await this.externalProvider.send("wallet_switchEthereumChain",[{chainId:o}]),this.chainId=e}async sendTransaction(e){return this._signer.sendTransaction(e)}async signMessage(e){return this._signer.signMessage(e)}async signTransaction(e){return this._signer.signTransaction(e)}async getSigner(){return this._signer}verifySignature(e,n){return verifyMessage(e,n)===this.address}}const generateWalletFromMnemonic$2=async(t={})=>{const{mnemonic:e=generateMnemonic_1(),chainId:n}=t;if(!validateMnemonic_1(e))throw new Error("Invalid mnemonic");const o=CHAIN_AVAILABLES.find(l=>l.id===n)||CHAIN_DEFAULT,c=new JsonRpcProvider(o.rpcUrl,o.id);return new EVMWallet(e,c)},connectWithExternalWallet=async t=>{if(!window.ethereum)throw new Error(`
      No web3 wallet extension found. 
      Install browser extensions like Metamask or Rabby wallet to connect with the app using your existing or hardware wallet.
    `);return await ExternalEVMWallet.create(t?.chainId||CHAIN_DEFAULT.id)},evmWallet=Object.freeze({connectWithExternalWallet,generateWalletFromMnemonic:generateWalletFromMnemonic$2,generateDID:generateDID$2});var src$5={},bip32={},crypto$5={},ripemd160$1={};Object.defineProperty(ripemd160$1,"__esModule",{value:!0});ripemd160$1.ripemd160=ripemd160$1.RIPEMD160=void 0;const _md_js_1$1=_md,utils_js_1$1=utils$h,Rho=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),Id=new Uint8Array(new Array(16).fill(0).map((t,e)=>e)),Pi=Id.map(t=>(9*t+5)%16);let idxL=[Id],idxR=[Pi];for(let t=0;t<4;t++)for(let e of[idxL,idxR])e.push(e[t].map(n=>Rho[n]));const shifts=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(t=>new Uint8Array(t)),shiftsL=idxL.map((t,e)=>t.map(n=>shifts[e][n])),shiftsR=idxR.map((t,e)=>t.map(n=>shifts[e][n])),Kl=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),Kr=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]);function f$1(t,e,n,o){return t===0?e^n^o:t===1?e&n|~e&o:t===2?(e|~n)^o:t===3?e&o|n&~o:e^(n|~o)}const R_BUF=new Uint32Array(16);let RIPEMD160$4=class extends _md_js_1$1.HashMD{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:e,h1:n,h2:o,h3:c,h4:a}=this;return[e,n,o,c,a]}set(e,n,o,c,a){this.h0=e|0,this.h1=n|0,this.h2=o|0,this.h3=c|0,this.h4=a|0}process(e,n){for(let P=0;P<16;P++,n+=4)R_BUF[P]=e.getUint32(n,!0);let o=this.h0|0,c=o,a=this.h1|0,l=a,b=this.h2|0,v=b,A=this.h3|0,S=A,M=this.h4|0,B=M;for(let P=0;P<5;P++){const L=4-P,F=Kl[P],U=Kr[P],q=idxL[P],X=idxR[P],ee=shiftsL[P],te=shiftsR[P];for(let ce=0;ce<16;ce++){const ue=(0,utils_js_1$1.rotl)(o+f$1(P,a,b,A)+R_BUF[q[ce]]+F,ee[ce])+M|0;o=M,M=A,A=(0,utils_js_1$1.rotl)(b,10)|0,b=a,a=ue}for(let ce=0;ce<16;ce++){const ue=(0,utils_js_1$1.rotl)(c+f$1(L,l,v,S)+R_BUF[X[ce]]+U,te[ce])+B|0;c=B,B=S,S=(0,utils_js_1$1.rotl)(v,10)|0,v=l,l=ue}}this.set(this.h1+b+S|0,this.h2+A+B|0,this.h3+M+c|0,this.h4+o+l|0,this.h0+a+v|0)}roundClean(){R_BUF.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}};ripemd160$1.RIPEMD160=RIPEMD160$4;ripemd160$1.ripemd160=(0,utils_js_1$1.wrapConstructor)(()=>new RIPEMD160$4);Object.defineProperty(crypto$5,"__esModule",{value:!0});crypto$5.hmacSHA512=crypto$5.hash160=void 0;const hmac_1=hmac$1,ripemd160_1=ripemd160$1,sha256_1$1=sha256$4,sha512_1=sha512$2;function hash160(t){const e=(0,sha256_1$1.sha256)(Uint8Array.from(t));return Buffer$1$1.from((0,ripemd160_1.ripemd160)(e))}crypto$5.hash160=hash160;function hmacSHA512(t,e){return Buffer$1$1.from((0,hmac_1.hmac)(sha512_1.sha512,t,e))}crypto$5.hmacSHA512=hmacSHA512;var testecc={};Object.defineProperty(testecc,"__esModule",{value:!0});testecc.testEcc=void 0;const h$1=t=>Buffer$1$1.from(t,"hex");function testEcc(t){if(assert$g(t.isPoint(h$1("0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"))),assert$g(!t.isPoint(h$1("030000000000000000000000000000000000000000000000000000000000000005"))),assert$g(t.isPrivate(h$1("79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"))),assert$g(t.isPrivate(h$1("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140"))),assert$g(!t.isPrivate(h$1("0000000000000000000000000000000000000000000000000000000000000000"))),assert$g(!t.isPrivate(h$1("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"))),assert$g(!t.isPrivate(h$1("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364142"))),assert$g(Buffer$1$1.from(t.pointFromScalar(h$1("b1121e4088a66a28f5b6b0f5844943ecd9f610196d7bb83b25214b60452c09af"))).equals(h$1("02b07ba9dca9523b7ef4bd97703d43d20399eb698e194704791a25ce77a400df99"))),t.xOnlyPointAddTweak){assert$g(t.xOnlyPointAddTweak(h$1("79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),h$1("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140"))===null);let e=t.xOnlyPointAddTweak(h$1("1617d38ed8d8657da4d4761e8057bc396ea9e4b9d29776d4be096016dbd2509b"),h$1("a8397a935f0dfceba6ba9618f6451ef4d80637abf4e6af2669fbc9de6a8fd2ac"));assert$g(Buffer$1$1.from(e.xOnlyPubkey).equals(h$1("e478f99dab91052ab39a33ea35fd5e6e4933f4d28023cd597c9a1f6760346adf"))&&e.parity===1),e=t.xOnlyPointAddTweak(h$1("2c0b7cf95324a07d05398b240174dc0c2be444d96b159aa6c7f7b1e668680991"),h$1("823c3cd2142744b075a87eade7e1b8678ba308d566226a0056ca2b7a76f86b47"))}assert$g(Buffer$1$1.from(t.pointAddScalar(h$1("0379be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),h$1("0000000000000000000000000000000000000000000000000000000000000003"))).equals(h$1("02c6047f9441ed7d6d3045406e95c07cd85c778e4b8cef3ca7abac09b95c709ee5"))),assert$g(Buffer$1$1.from(t.privateAdd(h$1("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd036413e"),h$1("0000000000000000000000000000000000000000000000000000000000000002"))).equals(h$1("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140"))),t.privateNegate&&(assert$g(Buffer$1$1.from(t.privateNegate(h$1("0000000000000000000000000000000000000000000000000000000000000001"))).equals(h$1("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140"))),assert$g(Buffer$1$1.from(t.privateNegate(h$1("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd036413e"))).equals(h$1("0000000000000000000000000000000000000000000000000000000000000003"))),assert$g(Buffer$1$1.from(t.privateNegate(h$1("b1121e4088a66a28f5b6b0f5844943ecd9f610196d7bb83b25214b60452c09af"))).equals(h$1("4eede1bf775995d70a494f0a7bb6bc11e0b8cccd41cce8009ab1132c8b0a3792")))),assert$g(Buffer$1$1.from(t.sign(h$1("5e9f0a0d593efdcf78ac923bc3313e4e7d408d574354ee2b3288c0da9fbba6ed"),h$1("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140"))).equals(h$1("54c4a33c6423d689378f160a7ff8b61330444abb58fb470f96ea16d99d4a2fed07082304410efa6b2943111b6a4e0aaa7b7db55a07e9861d1fb3cb1f421044a5"))),assert$g(t.verify(h$1("5e9f0a0d593efdcf78ac923bc3313e4e7d408d574354ee2b3288c0da9fbba6ed"),h$1("0379be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),h$1("54c4a33c6423d689378f160a7ff8b61330444abb58fb470f96ea16d99d4a2fed07082304410efa6b2943111b6a4e0aaa7b7db55a07e9861d1fb3cb1f421044a5"))),t.signSchnorr&&assert$g(Buffer$1$1.from(t.signSchnorr(h$1("7e2d58d8b3bcdf1abadec7829054f90dda9805aab56c77333024b9d0a508b75c"),h$1("c90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b14e5c9"),h$1("c87aa53824b4d7ae2eb035a2b5bbbccc080e76cdc6d1692c4b0b62d798e6d906"))).equals(h$1("5831aaeed7b44bb74e5eab94ba9d4294c49bcf2a60728d8b4c200f50dd313c1bab745879a5ad954a72c45a91c3a51d3c7adea98d82f8481e0e1e03674a6f3fb7"))),t.verifySchnorr&&assert$g(t.verifySchnorr(h$1("7e2d58d8b3bcdf1abadec7829054f90dda9805aab56c77333024b9d0a508b75c"),h$1("dd308afec5777e13121fa72b9cc1b7cc0139715309b086c960e18fd969774eb8"),h$1("5831aaeed7b44bb74e5eab94ba9d4294c49bcf2a60728d8b4c200f50dd313c1bab745879a5ad954a72c45a91c3a51d3c7adea98d82f8481e0e1e03674a6f3fb7")))}testecc.testEcc=testEcc;function assert$g(t){if(!t)throw new Error("ecc library invalid")}var lib$2={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.bytes=t.stringToBytes=t.str=t.bytesToString=t.hex=t.utf8=t.bech32m=t.bech32=t.base58check=t.createBase58check=t.base58xmr=t.base58xrp=t.base58flickr=t.base58=t.base64urlnopad=t.base64url=t.base64nopad=t.base64=t.base32crockford=t.base32hex=t.base32=t.base16=t.utils=t.assertNumber=void 0;function e(u){if(!Number.isSafeInteger(u))throw new Error(`Wrong integer: ${u}`)}t.assertNumber=e;function n(u){return u instanceof Uint8Array||u!=null&&typeof u=="object"&&u.constructor.name==="Uint8Array"}function o(...u){const p=$=>$,m=($,k)=>_=>$(k(_)),y=u.map($=>$.encode).reduceRight(m,p),E=u.map($=>$.decode).reduce(m,p);return{encode:y,decode:E}}function c(u){return{encode:p=>{if(!Array.isArray(p)||p.length&&typeof p[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return p.map(m=>{if(m<0||m>=u.length)throw new Error(`Digit index outside alphabet: ${m} (alphabet: ${u.length})`);return u[m]})},decode:p=>{if(!Array.isArray(p)||p.length&&typeof p[0]!="string")throw new Error("alphabet.decode input should be array of strings");return p.map(m=>{if(typeof m!="string")throw new Error(`alphabet.decode: not string element=${m}`);const y=u.indexOf(m);if(y===-1)throw new Error(`Unknown letter: "${m}". Allowed: ${u}`);return y})}}}function a(u=""){if(typeof u!="string")throw new Error("join separator should be string");return{encode:p=>{if(!Array.isArray(p)||p.length&&typeof p[0]!="string")throw new Error("join.encode input should be array of strings");for(let m of p)if(typeof m!="string")throw new Error(`join.encode: non-string input=${m}`);return p.join(u)},decode:p=>{if(typeof p!="string")throw new Error("join.decode input should be string");return p.split(u)}}}function l(u,p="="){if(typeof p!="string")throw new Error("padding chr should be string");return{encode(m){if(!Array.isArray(m)||m.length&&typeof m[0]!="string")throw new Error("padding.encode input should be array of strings");for(let y of m)if(typeof y!="string")throw new Error(`padding.encode: non-string input=${y}`);for(;m.length*u%8;)m.push(p);return m},decode(m){if(!Array.isArray(m)||m.length&&typeof m[0]!="string")throw new Error("padding.encode input should be array of strings");for(let E of m)if(typeof E!="string")throw new Error(`padding.decode: non-string input=${E}`);let y=m.length;if(y*u%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;y>0&&m[y-1]===p;y--)if(!((y-1)*u%8))throw new Error("Invalid padding: string has too much padding");return m.slice(0,y)}}}function b(u){if(typeof u!="function")throw new Error("normalize fn should be function");return{encode:p=>p,decode:p=>u(p)}}function v(u,p,m){if(p<2)throw new Error(`convertRadix: wrong from=${p}, base cannot be less than 2`);if(m<2)throw new Error(`convertRadix: wrong to=${m}, base cannot be less than 2`);if(!Array.isArray(u))throw new Error("convertRadix: data should be array");if(!u.length)return[];let y=0;const E=[],$=Array.from(u);for($.forEach(k=>{if(k<0||k>=p)throw new Error(`Wrong integer: ${k}`)});;){let k=0,_=!0;for(let d=y;d<$.length;d++){const w=$[d],I=p*k+w;if(!Number.isSafeInteger(I)||p*k/p!==k||I-w!==p*k)throw new Error("convertRadix: carry overflow");k=I%m;const C=Math.floor(I/m);if($[d]=C,!Number.isSafeInteger(C)||C*m+k!==I)throw new Error("convertRadix: carry overflow");if(_)C?_=!1:y=d;else continue}if(E.push(k),_)break}for(let k=0;k<u.length-1&&u[k]===0;k++)E.push(0);return E.reverse()}const A=(u,p)=>p?A(p,u%p):u,S=(u,p)=>u+(p-A(u,p));function M(u,p,m,y){if(!Array.isArray(u))throw new Error("convertRadix2: data should be array");if(p<=0||p>32)throw new Error(`convertRadix2: wrong from=${p}`);if(m<=0||m>32)throw new Error(`convertRadix2: wrong to=${m}`);if(S(p,m)>32)throw new Error(`convertRadix2: carry overflow from=${p} to=${m} carryBits=${S(p,m)}`);let E=0,$=0;const k=2**m-1,_=[];for(const d of u){if(d>=2**p)throw new Error(`convertRadix2: invalid data word=${d} from=${p}`);if(E=E<<p|d,$+p>32)throw new Error(`convertRadix2: carry overflow pos=${$} from=${p}`);for($+=p;$>=m;$-=m)_.push((E>>$-m&k)>>>0);E&=2**$-1}if(E=E<<m-$&k,!y&&$>=p)throw new Error("Excess padding");if(!y&&E)throw new Error(`Non-zero padding: ${E}`);return y&&$>0&&_.push(E>>>0),_}function B(u){return{encode:p=>{if(!n(p))throw new Error("radix.encode input should be Uint8Array");return v(Array.from(p),2**8,u)},decode:p=>{if(!Array.isArray(p)||p.length&&typeof p[0]!="number")throw new Error("radix.decode input should be array of numbers");return Uint8Array.from(v(p,u,2**8))}}}function P(u,p=!1){if(u<=0||u>32)throw new Error("radix2: bits should be in (0..32]");if(S(8,u)>32||S(u,8)>32)throw new Error("radix2: carry overflow");return{encode:m=>{if(!n(m))throw new Error("radix2.encode input should be Uint8Array");return M(Array.from(m),8,u,!p)},decode:m=>{if(!Array.isArray(m)||m.length&&typeof m[0]!="number")throw new Error("radix2.decode input should be array of numbers");return Uint8Array.from(M(m,u,8,p))}}}function L(u){if(typeof u!="function")throw new Error("unsafeWrapper fn should be function");return function(...p){try{return u.apply(null,p)}catch{}}}function F(u,p){if(typeof p!="function")throw new Error("checksum fn should be function");return{encode(m){if(!n(m))throw new Error("checksum.encode: input should be Uint8Array");const y=p(m).slice(0,u),E=new Uint8Array(m.length+u);return E.set(m),E.set(y,m.length),E},decode(m){if(!n(m))throw new Error("checksum.decode: input should be Uint8Array");const y=m.slice(0,-u),E=p(y).slice(0,u),$=m.slice(-u);for(let k=0;k<u;k++)if(E[k]!==$[k])throw new Error("Invalid checksum");return y}}}t.utils={alphabet:c,chain:o,checksum:F,convertRadix:v,convertRadix2:M,radix:B,radix2:P,join:a,padding:l},t.base16=o(P(4),c("0123456789ABCDEF"),a("")),t.base32=o(P(5),c("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),l(5),a("")),t.base32hex=o(P(5),c("0123456789ABCDEFGHIJKLMNOPQRSTUV"),l(5),a("")),t.base32crockford=o(P(5),c("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),a(""),b(u=>u.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1"))),t.base64=o(P(6),c("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),l(6),a("")),t.base64nopad=o(P(6),c("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),a("")),t.base64url=o(P(6),c("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),l(6),a("")),t.base64urlnopad=o(P(6),c("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),a(""));const U=u=>o(B(58),c(u),a(""));t.base58=U("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),t.base58flickr=U("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),t.base58xrp=U("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const q=[0,2,3,5,6,7,9,10,11];t.base58xmr={encode(u){let p="";for(let m=0;m<u.length;m+=8){const y=u.subarray(m,m+8);p+=t.base58.encode(y).padStart(q[y.length],"1")}return p},decode(u){let p=[];for(let m=0;m<u.length;m+=11){const y=u.slice(m,m+11),E=q.indexOf(y.length),$=t.base58.decode(y);for(let k=0;k<$.length-E;k++)if($[k]!==0)throw new Error("base58xmr: wrong padding");p=p.concat(Array.from($.slice($.length-E)))}return Uint8Array.from(p)}};const X=u=>o(F(4,p=>u(u(p))),t.base58);t.createBase58check=X,t.base58check=t.createBase58check;const ee=o(c("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),a("")),te=[996825010,642813549,513874426,1027748829,705979059];function ce(u){const p=u>>25;let m=(u&33554431)<<5;for(let y=0;y<te.length;y++)(p>>y&1)===1&&(m^=te[y]);return m}function ue(u,p,m=1){const y=u.length;let E=1;for(let $=0;$<y;$++){const k=u.charCodeAt($);if(k<33||k>126)throw new Error(`Invalid prefix (${u})`);E=ce(E)^k>>5}E=ce(E);for(let $=0;$<y;$++)E=ce(E)^u.charCodeAt($)&31;for(let $ of p)E=ce(E)^$;for(let $=0;$<6;$++)E=ce(E);return E^=m,ee.encode(M([E%2**30],30,5,!1))}function Ae(u){const p=u==="bech32"?1:734539939,m=P(5),y=m.decode,E=m.encode,$=L(y);function k(I,C,V=90){if(typeof I!="string")throw new Error(`bech32.encode prefix should be string, not ${typeof I}`);if(!Array.isArray(C)||C.length&&typeof C[0]!="number")throw new Error(`bech32.encode words should be array of numbers, not ${typeof C}`);if(I.length===0)throw new TypeError(`Invalid prefix length ${I.length}`);const O=I.length+7+C.length;if(V!==!1&&O>V)throw new TypeError(`Length ${O} exceeds limit ${V}`);const j=I.toLowerCase(),D=ue(j,C,p);return`${j}1${ee.encode(C)}${D}`}function _(I,C=90){if(typeof I!="string")throw new Error(`bech32.decode input should be string, not ${typeof I}`);if(I.length<8||C!==!1&&I.length>C)throw new TypeError(`Wrong string length: ${I.length} (${I}). Expected (8..${C})`);const V=I.toLowerCase();if(I!==V&&I!==I.toUpperCase())throw new Error("String must be lowercase or uppercase");const O=V.lastIndexOf("1");if(O===0||O===-1)throw new Error('Letter "1" must be present between prefix and data only');const j=V.slice(0,O),D=V.slice(O+1);if(D.length<6)throw new Error("Data must be at least 6 characters long");const Q=ee.decode(D).slice(0,-6),oe=ue(j,Q,p);if(!D.endsWith(oe))throw new Error(`Invalid checksum in ${I}: expected "${oe}"`);return{prefix:j,words:Q}}const d=L(_);function w(I){const{prefix:C,words:V}=_(I,!1);return{prefix:C,words:V,bytes:y(V)}}return{encode:k,decode:_,decodeToBytes:w,decodeUnsafe:d,fromWords:y,fromWordsUnsafe:$,toWords:E}}t.bech32=Ae("bech32"),t.bech32m=Ae("bech32m"),t.utf8={encode:u=>new TextDecoder().decode(u),decode:u=>new TextEncoder().encode(u)},t.hex=o(P(4),c("0123456789abcdef"),a(""),b(u=>{if(typeof u!="string"||u.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof u} with length ${u.length}`);return u.toLowerCase()}));const we={utf8:t.utf8,hex:t.hex,base16:t.base16,base32:t.base32,base64:t.base64,base64url:t.base64url,base58:t.base58,base58xmr:t.base58xmr},pe="Invalid encoding type. Available types: utf8, hex, base16, base32, base64, base64url, base58, base58xmr",Ce=(u,p)=>{if(typeof u!="string"||!we.hasOwnProperty(u))throw new TypeError(pe);if(!n(p))throw new TypeError("bytesToString() expects Uint8Array");return we[u].encode(p)};t.bytesToString=Ce,t.str=t.bytesToString;const T=(u,p)=>{if(!we.hasOwnProperty(u))throw new TypeError(pe);if(typeof p!="string")throw new TypeError("stringToBytes() expects string");return we[u].decode(p)};t.stringToBytes=T,t.bytes=t.stringToBytes})(lib$2);var types$6={Array:function(t){return t!=null&&t.constructor===Array},Boolean:function(t){return typeof t=="boolean"},Function:function(t){return typeof t=="function"},Nil:function(t){return t==null},Number:function(t){return typeof t=="number"},Object:function(t){return typeof t=="object"},String:function(t){return typeof t=="string"},"":function(){return!0}};types$6.Null=types$6.Nil;for(var typeName$1 in types$6)types$6[typeName$1].toJSON=function(t){return t}.bind(null,typeName$1);var native$1=types$6,native=native$1;function getTypeName(t){return t.name||t.toString().match(/function (.*?)\s*\(/)[1]}function getValueTypeName$1(t){return native.Nil(t)?"":getTypeName(t.constructor)}function getValue(t){return native.Function(t)?"":native.String(t)?JSON.stringify(t):t&&native.Object(t)?"":t}function captureStackTrace(t,e){Error.captureStackTrace&&Error.captureStackTrace(t,e)}function tfJSON$1(t){return native.Function(t)?t.toJSON?t.toJSON():getTypeName(t):native.Array(t)?"Array":t&&native.Object(t)?"Object":t!==void 0?t:""}function tfErrorString(t,e,n){var o=getValue(e);return"Expected "+tfJSON$1(t)+", got"+(n!==""?" "+n:"")+(o!==""?" "+o:"")}function TfTypeError$1(t,e,n){n=n||getValueTypeName$1(e),this.message=tfErrorString(t,e,n),captureStackTrace(this,TfTypeError$1),this.__type=t,this.__value=e,this.__valueTypeName=n}TfTypeError$1.prototype=Object.create(Error.prototype);TfTypeError$1.prototype.constructor=TfTypeError$1;function tfPropertyErrorString(t,e,n,o,c){var a='" of type ';return e==="key"&&(a='" with key type '),tfErrorString('property "'+tfJSON$1(n)+a+tfJSON$1(t),o,c)}function TfPropertyTypeError$1(t,e,n,o,c){t?(c=c||getValueTypeName$1(o),this.message=tfPropertyErrorString(t,n,e,o,c)):this.message='Unexpected property "'+e+'"',captureStackTrace(this,TfTypeError$1),this.__label=n,this.__property=e,this.__type=t,this.__value=o,this.__valueTypeName=c}TfPropertyTypeError$1.prototype=Object.create(Error.prototype);TfPropertyTypeError$1.prototype.constructor=TfTypeError$1;function tfCustomError(t,e){return new TfTypeError$1(t,{},e)}function tfSubError$1(t,e,n){return t instanceof TfPropertyTypeError$1?(e=e+"."+t.__property,t=new TfPropertyTypeError$1(t.__type,e,t.__label,t.__value,t.__valueTypeName)):t instanceof TfTypeError$1&&(t=new TfPropertyTypeError$1(t.__type,e,n,t.__value,t.__valueTypeName)),captureStackTrace(t),t}var errors$1={TfTypeError:TfTypeError$1,TfPropertyTypeError:TfPropertyTypeError$1,tfCustomError,tfSubError:tfSubError$1,tfJSON:tfJSON$1,getValueTypeName:getValueTypeName$1},extra,hasRequiredExtra;function requireExtra(){if(hasRequiredExtra)return extra;hasRequiredExtra=1;var t=native$1,e=errors$1;function n(ue){return Buffer$1$1.isBuffer(ue)}function o(ue){return typeof ue=="string"&&/^([0-9a-f]{2})+$/i.test(ue)}function c(ue,Ae){var we=ue.toJSON();function pe(Ce){if(!ue(Ce))return!1;if(Ce.length===Ae)return!0;throw e.tfCustomError(we+"(Length: "+Ae+")",we+"(Length: "+Ce.length+")")}return pe.toJSON=function(){return we},pe}var a=c.bind(null,t.Array),l=c.bind(null,n),b=c.bind(null,o),v=c.bind(null,t.String);function A(ue,Ae,we){we=we||t.Number;function pe(Ce,T){return we(Ce,T)&&Ce>ue&&Ce<Ae}return pe.toJSON=function(){return`${we.toJSON()} between [${ue}, ${Ae}]`},pe}var S=Math.pow(2,53)-1;function M(ue){return typeof ue=="number"&&isFinite(ue)}function B(ue){return ue<<24>>24===ue}function P(ue){return ue<<16>>16===ue}function L(ue){return(ue|0)===ue}function F(ue){return typeof ue=="number"&&ue>=-S&&ue<=S&&Math.floor(ue)===ue}function U(ue){return(ue&255)===ue}function q(ue){return(ue&65535)===ue}function X(ue){return ue>>>0===ue}function ee(ue){return typeof ue=="number"&&ue>=0&&ue<=S&&Math.floor(ue)===ue}var te={ArrayN:a,Buffer:n,BufferN:l,Finite:M,Hex:o,HexN:b,Int8:B,Int16:P,Int32:L,Int53:F,Range:A,StringN:v,UInt8:U,UInt16:q,UInt32:X,UInt53:ee};for(var ce in te)te[ce].toJSON=function(ue){return ue}.bind(null,ce);return extra=te,extra}var ERRORS=errors$1,NATIVE=native$1,tfJSON=ERRORS.tfJSON,TfTypeError=ERRORS.TfTypeError,TfPropertyTypeError=ERRORS.TfPropertyTypeError,tfSubError=ERRORS.tfSubError,getValueTypeName=ERRORS.getValueTypeName,TYPES={arrayOf:function(e,n){e=compile(e),n=n||{};function o(c,a){return!NATIVE.Array(c)||NATIVE.Nil(c)||n.minLength!==void 0&&c.length<n.minLength||n.maxLength!==void 0&&c.length>n.maxLength||n.length!==void 0&&c.length!==n.length?!1:c.every(function(l,b){try{return typeforce$5(e,l,a)}catch(v){throw tfSubError(v,b)}})}return o.toJSON=function(){var c="["+tfJSON(e)+"]";return n.length!==void 0?c+="{"+n.length+"}":(n.minLength!==void 0||n.maxLength!==void 0)&&(c+="{"+(n.minLength===void 0?0:n.minLength)+","+(n.maxLength===void 0?1/0:n.maxLength)+"}"),c},o},maybe:function t(e){e=compile(e);function n(o,c){return NATIVE.Nil(o)||e(o,c,t)}return n.toJSON=function(){return"?"+tfJSON(e)},n},map:function(e,n){e=compile(e),n&&(n=compile(n));function o(c,a){if(!NATIVE.Object(c)||NATIVE.Nil(c))return!1;for(var l in c){try{n&&typeforce$5(n,l,a)}catch(v){throw tfSubError(v,l,"key")}try{var b=c[l];typeforce$5(e,b,a)}catch(v){throw tfSubError(v,l)}}return!0}return n?o.toJSON=function(){return"{"+tfJSON(n)+": "+tfJSON(e)+"}"}:o.toJSON=function(){return"{"+tfJSON(e)+"}"},o},object:function(e){var n={};for(var o in e)n[o]=compile(e[o]);function c(a,l){if(!NATIVE.Object(a)||NATIVE.Nil(a))return!1;var b;try{for(b in n){var v=n[b],A=a[b];typeforce$5(v,A,l)}}catch(S){throw tfSubError(S,b)}if(l){for(b in a)if(!n[b])throw new TfPropertyTypeError(void 0,b)}return!0}return c.toJSON=function(){return tfJSON(n)},c},anyOf:function(){var e=[].slice.call(arguments).map(compile);function n(o,c){return e.some(function(a){try{return typeforce$5(a,o,c)}catch{return!1}})}return n.toJSON=function(){return e.map(tfJSON).join("|")},n},allOf:function(){var e=[].slice.call(arguments).map(compile);function n(o,c){return e.every(function(a){try{return typeforce$5(a,o,c)}catch{return!1}})}return n.toJSON=function(){return e.map(tfJSON).join(" & ")},n},quacksLike:function(e){function n(o){return e===getValueTypeName(o)}return n.toJSON=function(){return e},n},tuple:function(){var e=[].slice.call(arguments).map(compile);function n(o,c){return NATIVE.Nil(o)||NATIVE.Nil(o.length)||c&&o.length!==e.length?!1:e.every(function(a,l){try{return typeforce$5(a,o[l],c)}catch(b){throw tfSubError(b,l)}})}return n.toJSON=function(){return"("+e.map(tfJSON).join(", ")+")"},n},value:function(e){function n(o){return o===e}return n.toJSON=function(){return e},n}};TYPES.oneOf=TYPES.anyOf;function compile(t){if(NATIVE.String(t))return t[0]==="?"?TYPES.maybe(t.slice(1)):NATIVE[t]||TYPES.quacksLike(t);if(t&&NATIVE.Object(t)){if(NATIVE.Array(t)){if(t.length!==1)throw new TypeError("Expected compile() parameter of type Array of length 1");return TYPES.arrayOf(t[0])}return TYPES.object(t)}else if(NATIVE.Function(t))return t;return TYPES.value(t)}function typeforce$5(t,e,n,o){if(NATIVE.Function(t)){if(t(e,n))return!0;throw new TfTypeError(o||t,e)}return typeforce$5(compile(t),e,n)}for(var typeName in NATIVE)typeforce$5[typeName]=NATIVE[typeName];for(typeName in TYPES)typeforce$5[typeName]=TYPES[typeName];var EXTRA=requireExtra();for(typeName in EXTRA)typeforce$5[typeName]=EXTRA[typeName];typeforce$5.compile=compile;typeforce$5.TfTypeError=TfTypeError;typeforce$5.TfPropertyTypeError=TfPropertyTypeError;var typeforce_1=typeforce$5,safeBuffer$3={exports:{}};(function(t,e){var n=require$$0$3,o=n.Buffer;function c(l,b){for(var v in l)b[v]=l[v]}o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?t.exports=n:(c(n,e),e.Buffer=a);function a(l,b,v){return o(l,b,v)}a.prototype=Object.create(o.prototype),c(o,a),a.from=function(l,b,v){if(typeof l=="number")throw new TypeError("Argument must not be a number");return o(l,b,v)},a.alloc=function(l,b,v){if(typeof l!="number")throw new TypeError("Argument must be a number");var A=o(l);return b!==void 0?typeof v=="string"?A.fill(b,v):A.fill(b):A.fill(0),A},a.allocUnsafe=function(l){if(typeof l!="number")throw new TypeError("Argument must be a number");return o(l)},a.allocUnsafeSlow=function(l){if(typeof l!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(l)}})(safeBuffer$3,safeBuffer$3.exports);var safeBufferExports$2=safeBuffer$3.exports,readableBrowser$1={exports:{}},events={exports:{}},R=typeof Reflect=="object"?Reflect:null,ReflectApply=R&&typeof R.apply=="function"?R.apply:function(e,n,o){return Function.prototype.apply.call(e,n,o)},ReflectOwnKeys;R&&typeof R.ownKeys=="function"?ReflectOwnKeys=R.ownKeys:Object.getOwnPropertySymbols?ReflectOwnKeys=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:ReflectOwnKeys=function(e){return Object.getOwnPropertyNames(e)};function ProcessEmitWarning(t){console&&console.warn&&console.warn(t)}var NumberIsNaN=Number.isNaN||function(e){return e!==e};function EventEmitter$1(){EventEmitter$1.init.call(this)}events.exports=EventEmitter$1;events.exports.once=once$2;EventEmitter$1.EventEmitter=EventEmitter$1;EventEmitter$1.prototype._events=void 0;EventEmitter$1.prototype._eventsCount=0;EventEmitter$1.prototype._maxListeners=void 0;var defaultMaxListeners=10;function checkListener(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(EventEmitter$1,"defaultMaxListeners",{enumerable:!0,get:function(){return defaultMaxListeners},set:function(t){if(typeof t!="number"||t<0||NumberIsNaN(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");defaultMaxListeners=t}});EventEmitter$1.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};EventEmitter$1.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||NumberIsNaN(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function _getMaxListeners(t){return t._maxListeners===void 0?EventEmitter$1.defaultMaxListeners:t._maxListeners}EventEmitter$1.prototype.getMaxListeners=function(){return _getMaxListeners(this)};EventEmitter$1.prototype.emit=function(e){for(var n=[],o=1;o<arguments.length;o++)n.push(arguments[o]);var c=e==="error",a=this._events;if(a!==void 0)c=c&&a.error===void 0;else if(!c)return!1;if(c){var l;if(n.length>0&&(l=n[0]),l instanceof Error)throw l;var b=new Error("Unhandled error."+(l?" ("+l.message+")":""));throw b.context=l,b}var v=a[e];if(v===void 0)return!1;if(typeof v=="function")ReflectApply(v,this,n);else for(var A=v.length,S=arrayClone(v,A),o=0;o<A;++o)ReflectApply(S[o],this,n);return!0};function _addListener(t,e,n,o){var c,a,l;if(checkListener(n),a=t._events,a===void 0?(a=t._events=Object.create(null),t._eventsCount=0):(a.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),a=t._events),l=a[e]),l===void 0)l=a[e]=n,++t._eventsCount;else if(typeof l=="function"?l=a[e]=o?[n,l]:[l,n]:o?l.unshift(n):l.push(n),c=_getMaxListeners(t),c>0&&l.length>c&&!l.warned){l.warned=!0;var b=new Error("Possible EventEmitter memory leak detected. "+l.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");b.name="MaxListenersExceededWarning",b.emitter=t,b.type=e,b.count=l.length,ProcessEmitWarning(b)}return t}EventEmitter$1.prototype.addListener=function(e,n){return _addListener(this,e,n,!1)};EventEmitter$1.prototype.on=EventEmitter$1.prototype.addListener;EventEmitter$1.prototype.prependListener=function(e,n){return _addListener(this,e,n,!0)};function onceWrapper(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _onceWrap(t,e,n){var o={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},c=onceWrapper.bind(o);return c.listener=n,o.wrapFn=c,c}EventEmitter$1.prototype.once=function(e,n){return checkListener(n),this.on(e,_onceWrap(this,e,n)),this};EventEmitter$1.prototype.prependOnceListener=function(e,n){return checkListener(n),this.prependListener(e,_onceWrap(this,e,n)),this};EventEmitter$1.prototype.removeListener=function(e,n){var o,c,a,l,b;if(checkListener(n),c=this._events,c===void 0)return this;if(o=c[e],o===void 0)return this;if(o===n||o.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete c[e],c.removeListener&&this.emit("removeListener",e,o.listener||n));else if(typeof o!="function"){for(a=-1,l=o.length-1;l>=0;l--)if(o[l]===n||o[l].listener===n){b=o[l].listener,a=l;break}if(a<0)return this;a===0?o.shift():spliceOne(o,a),o.length===1&&(c[e]=o[0]),c.removeListener!==void 0&&this.emit("removeListener",e,b||n)}return this};EventEmitter$1.prototype.off=EventEmitter$1.prototype.removeListener;EventEmitter$1.prototype.removeAllListeners=function(e){var n,o,c;if(o=this._events,o===void 0)return this;if(o.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):o[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete o[e]),this;if(arguments.length===0){var a=Object.keys(o),l;for(c=0;c<a.length;++c)l=a[c],l!=="removeListener"&&this.removeAllListeners(l);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=o[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(c=n.length-1;c>=0;c--)this.removeListener(e,n[c]);return this};function _listeners(t,e,n){var o=t._events;if(o===void 0)return[];var c=o[e];return c===void 0?[]:typeof c=="function"?n?[c.listener||c]:[c]:n?unwrapListeners(c):arrayClone(c,c.length)}EventEmitter$1.prototype.listeners=function(e){return _listeners(this,e,!0)};EventEmitter$1.prototype.rawListeners=function(e){return _listeners(this,e,!1)};EventEmitter$1.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):listenerCount.call(t,e)};EventEmitter$1.prototype.listenerCount=listenerCount;function listenerCount(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}EventEmitter$1.prototype.eventNames=function(){return this._eventsCount>0?ReflectOwnKeys(this._events):[]};function arrayClone(t,e){for(var n=new Array(e),o=0;o<e;++o)n[o]=t[o];return n}function spliceOne(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function unwrapListeners(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function once$2(t,e){return new Promise(function(n,o){function c(l){t.removeListener(e,a),o(l)}function a(){typeof t.removeListener=="function"&&t.removeListener("error",c),n([].slice.call(arguments))}eventTargetAgnosticAddListener(t,e,a,{once:!0}),e!=="error"&&addErrorHandlerIfEventEmitter(t,c,{once:!0})})}function addErrorHandlerIfEventEmitter(t,e,n){typeof t.on=="function"&&eventTargetAgnosticAddListener(t,"error",e,n)}function eventTargetAgnosticAddListener(t,e,n,o){if(typeof t.on=="function")o.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function c(a){o.once&&t.removeEventListener(e,c),n(a)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var eventsExports=events.exports,streamBrowser$2=eventsExports.EventEmitter,util$3={},types$5={},shams$1=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},n=Symbol("test"),o=Object(n);if(typeof n=="string"||Object.prototype.toString.call(n)!=="[object Symbol]"||Object.prototype.toString.call(o)!=="[object Symbol]")return!1;var c=42;e[n]=c;for(n in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var a=Object.getOwnPropertySymbols(e);if(a.length!==1||a[0]!==n||!Object.prototype.propertyIsEnumerable.call(e,n))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var l=Object.getOwnPropertyDescriptor(e,n);if(l.value!==c||l.enumerable!==!0)return!1}return!0},hasSymbols$2=shams$1,shams=function(){return hasSymbols$2()&&!!Symbol.toStringTag},esErrors=Error,_eval=EvalError,range$3=RangeError,ref$1=ReferenceError,syntax=SyntaxError,type$1=TypeError,uri=URIError,origSymbol=typeof Symbol<"u"&&Symbol,hasSymbolSham=shams$1,hasSymbols$1=function(){return typeof origSymbol!="function"||typeof Symbol!="function"||typeof origSymbol("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:hasSymbolSham()},test={__proto__:null,foo:{}},$Object=Object,hasProto$1=function(){return{__proto__:test}.foo===test.foo&&!(test instanceof $Object)},ERROR_MESSAGE="Function.prototype.bind called on incompatible ",toStr$3=Object.prototype.toString,max=Math.max,funcType="[object Function]",concatty=function(e,n){for(var o=[],c=0;c<e.length;c+=1)o[c]=e[c];for(var a=0;a<n.length;a+=1)o[a+e.length]=n[a];return o},slicy=function(e,n){for(var o=[],c=n||0,a=0;c<e.length;c+=1,a+=1)o[a]=e[c];return o},joiny=function(t,e){for(var n="",o=0;o<t.length;o+=1)n+=t[o],o+1<t.length&&(n+=e);return n},implementation$1=function(e){var n=this;if(typeof n!="function"||toStr$3.apply(n)!==funcType)throw new TypeError(ERROR_MESSAGE+n);for(var o=slicy(arguments,1),c,a=function(){if(this instanceof c){var S=n.apply(this,concatty(o,arguments));return Object(S)===S?S:this}return n.apply(e,concatty(o,arguments))},l=max(0,n.length-o.length),b=[],v=0;v<l;v++)b[v]="$"+v;if(c=Function("binder","return function ("+joiny(b,",")+"){ return binder.apply(this,arguments); }")(a),n.prototype){var A=function(){};A.prototype=n.prototype,c.prototype=new A,A.prototype=null}return c},implementation=implementation$1,functionBind=Function.prototype.bind||implementation,call$1=Function.prototype.call,$hasOwn=Object.prototype.hasOwnProperty,bind$1=functionBind,hasown=bind$1.call(call$1,$hasOwn),undefined$1,$Error=esErrors,$EvalError=_eval,$RangeError=range$3,$ReferenceError=ref$1,$SyntaxError$1=syntax,$TypeError$2=type$1,$URIError=uri,$Function=Function,getEvalledConstructor=function(t){try{return $Function('"use strict"; return ('+t+").constructor;")()}catch{}},$gOPD$1=Object.getOwnPropertyDescriptor;if($gOPD$1)try{$gOPD$1({},"")}catch{$gOPD$1=null}var throwTypeError=function(){throw new $TypeError$2},ThrowTypeError=$gOPD$1?function(){try{return arguments.callee,throwTypeError}catch{try{return $gOPD$1(arguments,"callee").get}catch{return throwTypeError}}}():throwTypeError,hasSymbols=hasSymbols$1(),hasProto=hasProto$1(),getProto$1=Object.getPrototypeOf||(hasProto?function(t){return t.__proto__}:null),needsEval={},TypedArray=typeof Uint8Array>"u"||!getProto$1?undefined$1:getProto$1(Uint8Array),INTRINSICS={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?undefined$1:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?undefined$1:ArrayBuffer,"%ArrayIteratorPrototype%":hasSymbols&&getProto$1?getProto$1([][Symbol.iterator]()):undefined$1,"%AsyncFromSyncIteratorPrototype%":undefined$1,"%AsyncFunction%":needsEval,"%AsyncGenerator%":needsEval,"%AsyncGeneratorFunction%":needsEval,"%AsyncIteratorPrototype%":needsEval,"%Atomics%":typeof Atomics>"u"?undefined$1:Atomics,"%BigInt%":typeof BigInt>"u"?undefined$1:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?undefined$1:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?undefined$1:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?undefined$1:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":$Error,"%eval%":eval,"%EvalError%":$EvalError,"%Float32Array%":typeof Float32Array>"u"?undefined$1:Float32Array,"%Float64Array%":typeof Float64Array>"u"?undefined$1:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?undefined$1:FinalizationRegistry,"%Function%":$Function,"%GeneratorFunction%":needsEval,"%Int8Array%":typeof Int8Array>"u"?undefined$1:Int8Array,"%Int16Array%":typeof Int16Array>"u"?undefined$1:Int16Array,"%Int32Array%":typeof Int32Array>"u"?undefined$1:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":hasSymbols&&getProto$1?getProto$1(getProto$1([][Symbol.iterator]())):undefined$1,"%JSON%":typeof JSON=="object"?JSON:undefined$1,"%Map%":typeof Map>"u"?undefined$1:Map,"%MapIteratorPrototype%":typeof Map>"u"||!hasSymbols||!getProto$1?undefined$1:getProto$1(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?undefined$1:Promise,"%Proxy%":typeof Proxy>"u"?undefined$1:Proxy,"%RangeError%":$RangeError,"%ReferenceError%":$ReferenceError,"%Reflect%":typeof Reflect>"u"?undefined$1:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?undefined$1:Set,"%SetIteratorPrototype%":typeof Set>"u"||!hasSymbols||!getProto$1?undefined$1:getProto$1(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?undefined$1:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":hasSymbols&&getProto$1?getProto$1(""[Symbol.iterator]()):undefined$1,"%Symbol%":hasSymbols?Symbol:undefined$1,"%SyntaxError%":$SyntaxError$1,"%ThrowTypeError%":ThrowTypeError,"%TypedArray%":TypedArray,"%TypeError%":$TypeError$2,"%Uint8Array%":typeof Uint8Array>"u"?undefined$1:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?undefined$1:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?undefined$1:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?undefined$1:Uint32Array,"%URIError%":$URIError,"%WeakMap%":typeof WeakMap>"u"?undefined$1:WeakMap,"%WeakRef%":typeof WeakRef>"u"?undefined$1:WeakRef,"%WeakSet%":typeof WeakSet>"u"?undefined$1:WeakSet};if(getProto$1)try{null.error}catch(t){var errorProto=getProto$1(getProto$1(t));INTRINSICS["%Error.prototype%"]=errorProto}var doEval=function t(e){var n;if(e==="%AsyncFunction%")n=getEvalledConstructor("async function () {}");else if(e==="%GeneratorFunction%")n=getEvalledConstructor("function* () {}");else if(e==="%AsyncGeneratorFunction%")n=getEvalledConstructor("async function* () {}");else if(e==="%AsyncGenerator%"){var o=t("%AsyncGeneratorFunction%");o&&(n=o.prototype)}else if(e==="%AsyncIteratorPrototype%"){var c=t("%AsyncGenerator%");c&&getProto$1&&(n=getProto$1(c.prototype))}return INTRINSICS[e]=n,n},LEGACY_ALIASES={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},bind=functionBind,hasOwn=hasown,$concat=bind.call(Function.call,Array.prototype.concat),$spliceApply=bind.call(Function.apply,Array.prototype.splice),$replace=bind.call(Function.call,String.prototype.replace),$strSlice=bind.call(Function.call,String.prototype.slice),$exec=bind.call(Function.call,RegExp.prototype.exec),rePropName=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=function(e){var n=$strSlice(e,0,1),o=$strSlice(e,-1);if(n==="%"&&o!=="%")throw new $SyntaxError$1("invalid intrinsic syntax, expected closing `%`");if(o==="%"&&n!=="%")throw new $SyntaxError$1("invalid intrinsic syntax, expected opening `%`");var c=[];return $replace(e,rePropName,function(a,l,b,v){c[c.length]=b?$replace(v,reEscapeChar,"$1"):l||a}),c},getBaseIntrinsic=function(e,n){var o=e,c;if(hasOwn(LEGACY_ALIASES,o)&&(c=LEGACY_ALIASES[o],o="%"+c[0]+"%"),hasOwn(INTRINSICS,o)){var a=INTRINSICS[o];if(a===needsEval&&(a=doEval(o)),typeof a>"u"&&!n)throw new $TypeError$2("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:c,name:o,value:a}}throw new $SyntaxError$1("intrinsic "+e+" does not exist!")},getIntrinsic=function(e,n){if(typeof e!="string"||e.length===0)throw new $TypeError$2("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof n!="boolean")throw new $TypeError$2('"allowMissing" argument must be a boolean');if($exec(/^%?[^%]*%?$/,e)===null)throw new $SyntaxError$1("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var o=stringToPath(e),c=o.length>0?o[0]:"",a=getBaseIntrinsic("%"+c+"%",n),l=a.name,b=a.value,v=!1,A=a.alias;A&&(c=A[0],$spliceApply(o,$concat([0,1],A)));for(var S=1,M=!0;S<o.length;S+=1){var B=o[S],P=$strSlice(B,0,1),L=$strSlice(B,-1);if((P==='"'||P==="'"||P==="`"||L==='"'||L==="'"||L==="`")&&P!==L)throw new $SyntaxError$1("property names with quotes must have matching quotes");if((B==="constructor"||!M)&&(v=!0),c+="."+B,l="%"+c+"%",hasOwn(INTRINSICS,l))b=INTRINSICS[l];else if(b!=null){if(!(B in b)){if(!n)throw new $TypeError$2("base intrinsic for "+e+" exists, but the property is not available.");return}if($gOPD$1&&S+1>=o.length){var F=$gOPD$1(b,B);M=!!F,M&&"get"in F&&!("originalValue"in F.get)?b=F.get:b=b[B]}else M=hasOwn(b,B),b=b[B];M&&!v&&(INTRINSICS[l]=b)}}return b},callBind$2={exports:{}},esDefineProperty,hasRequiredEsDefineProperty;function requireEsDefineProperty(){if(hasRequiredEsDefineProperty)return esDefineProperty;hasRequiredEsDefineProperty=1;var t=getIntrinsic,e=t("%Object.defineProperty%",!0)||!1;if(e)try{e({},"a",{value:1})}catch{e=!1}return esDefineProperty=e,esDefineProperty}var GetIntrinsic$2=getIntrinsic,$gOPD=GetIntrinsic$2("%Object.getOwnPropertyDescriptor%",!0);if($gOPD)try{$gOPD([],"length")}catch{$gOPD=null}var gopd$1=$gOPD,$defineProperty$1=requireEsDefineProperty(),$SyntaxError=syntax,$TypeError$1=type$1,gopd=gopd$1,defineDataProperty=function(e,n,o){if(!e||typeof e!="object"&&typeof e!="function")throw new $TypeError$1("`obj` must be an object or a function`");if(typeof n!="string"&&typeof n!="symbol")throw new $TypeError$1("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new $TypeError$1("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new $TypeError$1("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new $TypeError$1("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new $TypeError$1("`loose`, if provided, must be a boolean");var c=arguments.length>3?arguments[3]:null,a=arguments.length>4?arguments[4]:null,l=arguments.length>5?arguments[5]:null,b=arguments.length>6?arguments[6]:!1,v=!!gopd&&gopd(e,n);if($defineProperty$1)$defineProperty$1(e,n,{configurable:l===null&&v?v.configurable:!l,enumerable:c===null&&v?v.enumerable:!c,value:o,writable:a===null&&v?v.writable:!a});else if(b||!c&&!a&&!l)e[n]=o;else throw new $SyntaxError("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},$defineProperty=requireEsDefineProperty(),hasPropertyDescriptors=function(){return!!$defineProperty};hasPropertyDescriptors.hasArrayLengthDefineBug=function(){if(!$defineProperty)return null;try{return $defineProperty([],"length",{value:1}).length!==1}catch{return!0}};var hasPropertyDescriptors_1=hasPropertyDescriptors,GetIntrinsic$1=getIntrinsic,define$1=defineDataProperty,hasDescriptors=hasPropertyDescriptors_1(),gOPD$1=gopd$1,$TypeError=type$1,$floor=GetIntrinsic$1("%Math.floor%"),setFunctionLength=function(e,n){if(typeof e!="function")throw new $TypeError("`fn` is not a function");if(typeof n!="number"||n<0||n>4294967295||$floor(n)!==n)throw new $TypeError("`length` must be a positive 32-bit integer");var o=arguments.length>2&&!!arguments[2],c=!0,a=!0;if("length"in e&&gOPD$1){var l=gOPD$1(e,"length");l&&!l.configurable&&(c=!1),l&&!l.writable&&(a=!1)}return(c||a||!o)&&(hasDescriptors?define$1(e,"length",n,!0,!0):define$1(e,"length",n)),e};(function(t){var e=functionBind,n=getIntrinsic,o=setFunctionLength,c=type$1,a=n("%Function.prototype.apply%"),l=n("%Function.prototype.call%"),b=n("%Reflect.apply%",!0)||e.call(l,a),v=requireEsDefineProperty(),A=n("%Math.max%");t.exports=function(B){if(typeof B!="function")throw new c("a function is required");var P=b(e,l,arguments);return o(P,1+A(0,B.length-(arguments.length-1)),!0)};var S=function(){return b(e,a,arguments)};v?v(t.exports,"apply",{value:S}):t.exports.apply=S})(callBind$2);var callBindExports=callBind$2.exports,GetIntrinsic=getIntrinsic,callBind$1=callBindExports,$indexOf$1=callBind$1(GetIntrinsic("String.prototype.indexOf")),callBound$2=function(e,n){var o=GetIntrinsic(e,!!n);return typeof o=="function"&&$indexOf$1(e,".prototype.")>-1?callBind$1(o):o},hasToStringTag$3=shams(),callBound$1=callBound$2,$toString$1=callBound$1("Object.prototype.toString"),isStandardArguments=function(e){return hasToStringTag$3&&e&&typeof e=="object"&&Symbol.toStringTag in e?!1:$toString$1(e)==="[object Arguments]"},isLegacyArguments=function(e){return isStandardArguments(e)?!0:e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&$toString$1(e)!=="[object Array]"&&$toString$1(e.callee)==="[object Function]"},supportsStandardArguments=function(){return isStandardArguments(arguments)}();isStandardArguments.isLegacyArguments=isLegacyArguments;var isArguments=supportsStandardArguments?isStandardArguments:isLegacyArguments,toStr$2=Object.prototype.toString,fnToStr$1=Function.prototype.toString,isFnRegex=/^\s*(?:function)?\*/,hasToStringTag$2=shams(),getProto=Object.getPrototypeOf,getGeneratorFunc=function(){if(!hasToStringTag$2)return!1;try{return Function("return function*() {}")()}catch{}},GeneratorFunction,isGeneratorFunction=function(e){if(typeof e!="function")return!1;if(isFnRegex.test(fnToStr$1.call(e)))return!0;if(!hasToStringTag$2){var n=toStr$2.call(e);return n==="[object GeneratorFunction]"}if(!getProto)return!1;if(typeof GeneratorFunction>"u"){var o=getGeneratorFunc();GeneratorFunction=o?getProto(o):!1}return getProto(e)===GeneratorFunction},fnToStr=Function.prototype.toString,reflectApply=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,badArrayLike,isCallableMarker;if(typeof reflectApply=="function"&&typeof Object.defineProperty=="function")try{badArrayLike=Object.defineProperty({},"length",{get:function(){throw isCallableMarker}}),isCallableMarker={},reflectApply(function(){throw 42},null,badArrayLike)}catch(t){t!==isCallableMarker&&(reflectApply=null)}else reflectApply=null;var constructorRegex=/^\s*class\b/,isES6ClassFn=function(e){try{var n=fnToStr.call(e);return constructorRegex.test(n)}catch{return!1}},tryFunctionObject=function(e){try{return isES6ClassFn(e)?!1:(fnToStr.call(e),!0)}catch{return!1}},toStr$1=Object.prototype.toString,objectClass="[object Object]",fnClass="[object Function]",genClass="[object GeneratorFunction]",ddaClass="[object HTMLAllCollection]",ddaClass2="[object HTML document.all class]",ddaClass3="[object HTMLCollection]",hasToStringTag$1=typeof Symbol=="function"&&!!Symbol.toStringTag,isIE68=!(0 in[,]),isDDA=function(){return!1};if(typeof document=="object"){var all=document.all;toStr$1.call(all)===toStr$1.call(document.all)&&(isDDA=function(e){if((isIE68||!e)&&(typeof e>"u"||typeof e=="object"))try{var n=toStr$1.call(e);return(n===ddaClass||n===ddaClass2||n===ddaClass3||n===objectClass)&&e("")==null}catch{}return!1})}var isCallable$1=reflectApply?function(e){if(isDDA(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;try{reflectApply(e,null,badArrayLike)}catch(n){if(n!==isCallableMarker)return!1}return!isES6ClassFn(e)&&tryFunctionObject(e)}:function(e){if(isDDA(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;if(hasToStringTag$1)return tryFunctionObject(e);if(isES6ClassFn(e))return!1;var n=toStr$1.call(e);return n!==fnClass&&n!==genClass&&!/^\[object HTML/.test(n)?!1:tryFunctionObject(e)},isCallable=isCallable$1,toStr=Object.prototype.toString,hasOwnProperty=Object.prototype.hasOwnProperty,forEachArray=function(e,n,o){for(var c=0,a=e.length;c<a;c++)hasOwnProperty.call(e,c)&&(o==null?n(e[c],c,e):n.call(o,e[c],c,e))},forEachString=function(e,n,o){for(var c=0,a=e.length;c<a;c++)o==null?n(e.charAt(c),c,e):n.call(o,e.charAt(c),c,e)},forEachObject=function(e,n,o){for(var c in e)hasOwnProperty.call(e,c)&&(o==null?n(e[c],c,e):n.call(o,e[c],c,e))},forEach$1=function(e,n,o){if(!isCallable(n))throw new TypeError("iterator must be a function");var c;arguments.length>=3&&(c=o),toStr.call(e)==="[object Array]"?forEachArray(e,n,c):typeof e=="string"?forEachString(e,n,c):forEachObject(e,n,c)},forEach_1=forEach$1,possibleTypedArrayNames=["Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"],possibleNames=possibleTypedArrayNames,g$1=typeof globalThis>"u"?commonjsGlobal:globalThis,availableTypedArrays$1=function(){for(var e=[],n=0;n<possibleNames.length;n++)typeof g$1[possibleNames[n]]=="function"&&(e[e.length]=possibleNames[n]);return e},forEach=forEach_1,availableTypedArrays=availableTypedArrays$1,callBind=callBindExports,callBound=callBound$2,gOPD=gopd$1,$toString=callBound("Object.prototype.toString"),hasToStringTag=shams(),g=typeof globalThis>"u"?commonjsGlobal:globalThis,typedArrays=availableTypedArrays(),$slice=callBound("String.prototype.slice"),getPrototypeOf=Object.getPrototypeOf,$indexOf=callBound("Array.prototype.indexOf",!0)||function(e,n){for(var o=0;o<e.length;o+=1)if(e[o]===n)return o;return-1},cache={__proto__:null};hasToStringTag&&gOPD&&getPrototypeOf?forEach(typedArrays,function(t){var e=new g[t];if(Symbol.toStringTag in e){var n=getPrototypeOf(e),o=gOPD(n,Symbol.toStringTag);if(!o){var c=getPrototypeOf(n);o=gOPD(c,Symbol.toStringTag)}cache["$"+t]=callBind(o.get)}}):forEach(typedArrays,function(t){var e=new g[t],n=e.slice||e.set;n&&(cache["$"+t]=callBind(n))});var tryTypedArrays=function(e){var n=!1;return forEach(cache,function(o,c){if(!n)try{"$"+o(e)===c&&(n=$slice(c,1))}catch{}}),n},trySlices=function(e){var n=!1;return forEach(cache,function(o,c){if(!n)try{o(e),n=$slice(c,1)}catch{}}),n},whichTypedArray$1=function(e){if(!e||typeof e!="object")return!1;if(!hasToStringTag){var n=$slice($toString(e),8,-1);return $indexOf(typedArrays,n)>-1?n:n!=="Object"?!1:trySlices(e)}return gOPD?tryTypedArrays(e):null},whichTypedArray=whichTypedArray$1,isTypedArray=function(e){return!!whichTypedArray(e)};(function(t){var e=isArguments,n=isGeneratorFunction,o=whichTypedArray$1,c=isTypedArray;function a($e){return $e.call.bind($e)}var l=typeof BigInt<"u",b=typeof Symbol<"u",v=a(Object.prototype.toString),A=a(Number.prototype.valueOf),S=a(String.prototype.valueOf),M=a(Boolean.prototype.valueOf);if(l)var B=a(BigInt.prototype.valueOf);if(b)var P=a(Symbol.prototype.valueOf);function L($e,$t){if(typeof $e!="object")return!1;try{return $t($e),!0}catch{return!1}}t.isArgumentsObject=e,t.isGeneratorFunction=n,t.isTypedArray=c;function F($e){return typeof Promise<"u"&&$e instanceof Promise||$e!==null&&typeof $e=="object"&&typeof $e.then=="function"&&typeof $e.catch=="function"}t.isPromise=F;function U($e){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView($e):c($e)||C($e)}t.isArrayBufferView=U;function q($e){return o($e)==="Uint8Array"}t.isUint8Array=q;function X($e){return o($e)==="Uint8ClampedArray"}t.isUint8ClampedArray=X;function ee($e){return o($e)==="Uint16Array"}t.isUint16Array=ee;function te($e){return o($e)==="Uint32Array"}t.isUint32Array=te;function ce($e){return o($e)==="Int8Array"}t.isInt8Array=ce;function ue($e){return o($e)==="Int16Array"}t.isInt16Array=ue;function Ae($e){return o($e)==="Int32Array"}t.isInt32Array=Ae;function we($e){return o($e)==="Float32Array"}t.isFloat32Array=we;function pe($e){return o($e)==="Float64Array"}t.isFloat64Array=pe;function Ce($e){return o($e)==="BigInt64Array"}t.isBigInt64Array=Ce;function T($e){return o($e)==="BigUint64Array"}t.isBigUint64Array=T;function u($e){return v($e)==="[object Map]"}u.working=typeof Map<"u"&&u(new Map);function p($e){return typeof Map>"u"?!1:u.working?u($e):$e instanceof Map}t.isMap=p;function m($e){return v($e)==="[object Set]"}m.working=typeof Set<"u"&&m(new Set);function y($e){return typeof Set>"u"?!1:m.working?m($e):$e instanceof Set}t.isSet=y;function E($e){return v($e)==="[object WeakMap]"}E.working=typeof WeakMap<"u"&&E(new WeakMap);function $($e){return typeof WeakMap>"u"?!1:E.working?E($e):$e instanceof WeakMap}t.isWeakMap=$;function k($e){return v($e)==="[object WeakSet]"}k.working=typeof WeakSet<"u"&&k(new WeakSet);function _($e){return k($e)}t.isWeakSet=_;function d($e){return v($e)==="[object ArrayBuffer]"}d.working=typeof ArrayBuffer<"u"&&d(new ArrayBuffer);function w($e){return typeof ArrayBuffer>"u"?!1:d.working?d($e):$e instanceof ArrayBuffer}t.isArrayBuffer=w;function I($e){return v($e)==="[object DataView]"}I.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&I(new DataView(new ArrayBuffer(1),0,1));function C($e){return typeof DataView>"u"?!1:I.working?I($e):$e instanceof DataView}t.isDataView=C;var V=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function O($e){return v($e)==="[object SharedArrayBuffer]"}function j($e){return typeof V>"u"?!1:(typeof O.working>"u"&&(O.working=O(new V)),O.working?O($e):$e instanceof V)}t.isSharedArrayBuffer=j;function D($e){return v($e)==="[object AsyncFunction]"}t.isAsyncFunction=D;function Q($e){return v($e)==="[object Map Iterator]"}t.isMapIterator=Q;function oe($e){return v($e)==="[object Set Iterator]"}t.isSetIterator=oe;function de($e){return v($e)==="[object Generator]"}t.isGeneratorObject=de;function Z($e){return v($e)==="[object WebAssembly.Module]"}t.isWebAssemblyCompiledModule=Z;function H($e){return L($e,A)}t.isNumberObject=H;function ge($e){return L($e,S)}t.isStringObject=ge;function Me($e){return L($e,M)}t.isBooleanObject=Me;function ke($e){return l&&L($e,B)}t.isBigIntObject=ke;function Ie($e){return b&&L($e,P)}t.isSymbolObject=Ie;function et($e){return H($e)||ge($e)||Me($e)||ke($e)||Ie($e)}t.isBoxedPrimitive=et;function Fe($e){return typeof Uint8Array<"u"&&(w($e)||j($e))}t.isAnyArrayBuffer=Fe,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function($e){Object.defineProperty(t,$e,{enumerable:!1,value:function(){throw new Error($e+" is not supported in userland")}})})})(types$5);var isBufferBrowser=function(e){return e&&typeof e=="object"&&typeof e.copy=="function"&&typeof e.fill=="function"&&typeof e.readUInt8=="function"};(function(t){var e={},n=Object.getOwnPropertyDescriptors||function(V){for(var O=Object.keys(V),j={},D=0;D<O.length;D++)j[O[D]]=Object.getOwnPropertyDescriptor(V,O[D]);return j},o=/%[sdj%]/g;t.format=function(C){if(!ue(C)){for(var V=[],O=0;O<arguments.length;O++)V.push(b(arguments[O]));return V.join(" ")}for(var O=1,j=arguments,D=j.length,Q=String(C).replace(o,function(de){if(de==="%%")return"%";if(O>=D)return de;switch(de){case"%s":return String(j[O++]);case"%d":return Number(j[O++]);case"%j":try{return JSON.stringify(j[O++])}catch{return"[Circular]"}default:return de}}),oe=j[O];O<D;oe=j[++O])ee(oe)||!Ce(oe)?Q+=" "+oe:Q+=" "+b(oe);return Q},t.deprecate=function(C,V){if(typeof process$1<"u"&&process$1.noDeprecation===!0)return C;if(typeof process$1>"u")return function(){return t.deprecate(C,V).apply(this,arguments)};var O=!1;function j(){if(!O){if(process$1.throwDeprecation)throw new Error(V);process$1.traceDeprecation?console.trace(V):console.error(V),O=!0}return C.apply(this,arguments)}return j};var c={},a=/^$/;if(e.NODE_DEBUG){var l=e.NODE_DEBUG;l=l.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),a=new RegExp("^"+l+"$","i")}t.debuglog=function(C){if(C=C.toUpperCase(),!c[C])if(a.test(C)){var V=process$1.pid;c[C]=function(){var O=t.format.apply(t,arguments);console.error("%s %d: %s",C,V,O)}}else c[C]=function(){};return c[C]};function b(C,V){var O={seen:[],stylize:A};return arguments.length>=3&&(O.depth=arguments[2]),arguments.length>=4&&(O.colors=arguments[3]),X(V)?O.showHidden=V:V&&t._extend(O,V),we(O.showHidden)&&(O.showHidden=!1),we(O.depth)&&(O.depth=2),we(O.colors)&&(O.colors=!1),we(O.customInspect)&&(O.customInspect=!0),O.colors&&(O.stylize=v),M(O,C,O.depth)}t.inspect=b,b.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},b.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function v(C,V){var O=b.styles[V];return O?"\x1b["+b.colors[O][0]+"m"+C+"\x1b["+b.colors[O][1]+"m":C}function A(C,V){return C}function S(C){var V={};return C.forEach(function(O,j){V[O]=!0}),V}function M(C,V,O){if(C.customInspect&&V&&p(V.inspect)&&V.inspect!==t.inspect&&!(V.constructor&&V.constructor.prototype===V)){var j=V.inspect(O,C);return ue(j)||(j=M(C,j,O)),j}var D=B(C,V);if(D)return D;var Q=Object.keys(V),oe=S(Q);if(C.showHidden&&(Q=Object.getOwnPropertyNames(V)),u(V)&&(Q.indexOf("message")>=0||Q.indexOf("description")>=0))return P(V);if(Q.length===0){if(p(V)){var de=V.name?": "+V.name:"";return C.stylize("[Function"+de+"]","special")}if(pe(V))return C.stylize(RegExp.prototype.toString.call(V),"regexp");if(T(V))return C.stylize(Date.prototype.toString.call(V),"date");if(u(V))return P(V)}var Z="",H=!1,ge=["{","}"];if(q(V)&&(H=!0,ge=["[","]"]),p(V)){var Me=V.name?": "+V.name:"";Z=" [Function"+Me+"]"}if(pe(V)&&(Z=" "+RegExp.prototype.toString.call(V)),T(V)&&(Z=" "+Date.prototype.toUTCString.call(V)),u(V)&&(Z=" "+P(V)),Q.length===0&&(!H||V.length==0))return ge[0]+Z+ge[1];if(O<0)return pe(V)?C.stylize(RegExp.prototype.toString.call(V),"regexp"):C.stylize("[Object]","special");C.seen.push(V);var ke;return H?ke=L(C,V,O,oe,Q):ke=Q.map(function(Ie){return F(C,V,O,oe,Ie,H)}),C.seen.pop(),U(ke,Z,ge)}function B(C,V){if(we(V))return C.stylize("undefined","undefined");if(ue(V)){var O="'"+JSON.stringify(V).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return C.stylize(O,"string")}if(ce(V))return C.stylize(""+V,"number");if(X(V))return C.stylize(""+V,"boolean");if(ee(V))return C.stylize("null","null")}function P(C){return"["+Error.prototype.toString.call(C)+"]"}function L(C,V,O,j,D){for(var Q=[],oe=0,de=V.length;oe<de;++oe)_(V,String(oe))?Q.push(F(C,V,O,j,String(oe),!0)):Q.push("");return D.forEach(function(Z){Z.match(/^\d+$/)||Q.push(F(C,V,O,j,Z,!0))}),Q}function F(C,V,O,j,D,Q){var oe,de,Z;if(Z=Object.getOwnPropertyDescriptor(V,D)||{value:V[D]},Z.get?Z.set?de=C.stylize("[Getter/Setter]","special"):de=C.stylize("[Getter]","special"):Z.set&&(de=C.stylize("[Setter]","special")),_(j,D)||(oe="["+D+"]"),de||(C.seen.indexOf(Z.value)<0?(ee(O)?de=M(C,Z.value,null):de=M(C,Z.value,O-1),de.indexOf(`
`)>-1&&(Q?de=de.split(`
`).map(function(H){return"  "+H}).join(`
`).slice(2):de=`
`+de.split(`
`).map(function(H){return"   "+H}).join(`
`))):de=C.stylize("[Circular]","special")),we(oe)){if(Q&&D.match(/^\d+$/))return de;oe=JSON.stringify(""+D),oe.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(oe=oe.slice(1,-1),oe=C.stylize(oe,"name")):(oe=oe.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),oe=C.stylize(oe,"string"))}return oe+": "+de}function U(C,V,O){var j=C.reduce(function(D,Q){return Q.indexOf(`
`)>=0,D+Q.replace(/\u001b\[\d\d?m/g,"").length+1},0);return j>60?O[0]+(V===""?"":V+`
 `)+" "+C.join(`,
  `)+" "+O[1]:O[0]+V+" "+C.join(", ")+" "+O[1]}t.types=types$5;function q(C){return Array.isArray(C)}t.isArray=q;function X(C){return typeof C=="boolean"}t.isBoolean=X;function ee(C){return C===null}t.isNull=ee;function te(C){return C==null}t.isNullOrUndefined=te;function ce(C){return typeof C=="number"}t.isNumber=ce;function ue(C){return typeof C=="string"}t.isString=ue;function Ae(C){return typeof C=="symbol"}t.isSymbol=Ae;function we(C){return C===void 0}t.isUndefined=we;function pe(C){return Ce(C)&&y(C)==="[object RegExp]"}t.isRegExp=pe,t.types.isRegExp=pe;function Ce(C){return typeof C=="object"&&C!==null}t.isObject=Ce;function T(C){return Ce(C)&&y(C)==="[object Date]"}t.isDate=T,t.types.isDate=T;function u(C){return Ce(C)&&(y(C)==="[object Error]"||C instanceof Error)}t.isError=u,t.types.isNativeError=u;function p(C){return typeof C=="function"}t.isFunction=p;function m(C){return C===null||typeof C=="boolean"||typeof C=="number"||typeof C=="string"||typeof C=="symbol"||typeof C>"u"}t.isPrimitive=m,t.isBuffer=isBufferBrowser;function y(C){return Object.prototype.toString.call(C)}function E(C){return C<10?"0"+C.toString(10):C.toString(10)}var $=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function k(){var C=new Date,V=[E(C.getHours()),E(C.getMinutes()),E(C.getSeconds())].join(":");return[C.getDate(),$[C.getMonth()],V].join(" ")}t.log=function(){console.log("%s - %s",k(),t.format.apply(t,arguments))},t.inherits=inherits_browserExports,t._extend=function(C,V){if(!V||!Ce(V))return C;for(var O=Object.keys(V),j=O.length;j--;)C[O[j]]=V[O[j]];return C};function _(C,V){return Object.prototype.hasOwnProperty.call(C,V)}var d=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;t.promisify=function(V){if(typeof V!="function")throw new TypeError('The "original" argument must be of type Function');if(d&&V[d]){var O=V[d];if(typeof O!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(O,d,{value:O,enumerable:!1,writable:!1,configurable:!0}),O}function O(){for(var j,D,Q=new Promise(function(Z,H){j=Z,D=H}),oe=[],de=0;de<arguments.length;de++)oe.push(arguments[de]);oe.push(function(Z,H){Z?D(Z):j(H)});try{V.apply(this,oe)}catch(Z){D(Z)}return Q}return Object.setPrototypeOf(O,Object.getPrototypeOf(V)),d&&Object.defineProperty(O,d,{value:O,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(O,n(V))},t.promisify.custom=d;function w(C,V){if(!C){var O=new Error("Promise was rejected with a falsy value");O.reason=C,C=O}return V(C)}function I(C){if(typeof C!="function")throw new TypeError('The "original" argument must be of type Function');function V(){for(var O=[],j=0;j<arguments.length;j++)O.push(arguments[j]);var D=O.pop();if(typeof D!="function")throw new TypeError("The last argument must be of type Function");var Q=this,oe=function(){return D.apply(Q,arguments)};C.apply(this,O).then(function(de){process$1.nextTick(oe.bind(null,null,de))},function(de){process$1.nextTick(w.bind(null,de,oe))})}return Object.setPrototypeOf(V,Object.getPrototypeOf(C)),Object.defineProperties(V,n(C)),V}t.callbackify=I})(util$3);var buffer_list$1,hasRequiredBuffer_list$1;function requireBuffer_list$1(){if(hasRequiredBuffer_list$1)return buffer_list$1;hasRequiredBuffer_list$1=1;function t(L,F){var U=Object.keys(L);if(Object.getOwnPropertySymbols){var q=Object.getOwnPropertySymbols(L);F&&(q=q.filter(function(X){return Object.getOwnPropertyDescriptor(L,X).enumerable})),U.push.apply(U,q)}return U}function e(L){for(var F=1;F<arguments.length;F++){var U=arguments[F]!=null?arguments[F]:{};F%2?t(Object(U),!0).forEach(function(q){n(L,q,U[q])}):Object.getOwnPropertyDescriptors?Object.defineProperties(L,Object.getOwnPropertyDescriptors(U)):t(Object(U)).forEach(function(q){Object.defineProperty(L,q,Object.getOwnPropertyDescriptor(U,q))})}return L}function n(L,F,U){return F=l(F),F in L?Object.defineProperty(L,F,{value:U,enumerable:!0,configurable:!0,writable:!0}):L[F]=U,L}function o(L,F){if(!(L instanceof F))throw new TypeError("Cannot call a class as a function")}function c(L,F){for(var U=0;U<F.length;U++){var q=F[U];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(L,l(q.key),q)}}function a(L,F,U){return F&&c(L.prototype,F),U&&c(L,U),Object.defineProperty(L,"prototype",{writable:!1}),L}function l(L){var F=b(L,"string");return typeof F=="symbol"?F:String(F)}function b(L,F){if(typeof L!="object"||L===null)return L;var U=L[Symbol.toPrimitive];if(U!==void 0){var q=U.call(L,F||"default");if(typeof q!="object")return q;throw new TypeError("@@toPrimitive must return a primitive value.")}return(F==="string"?String:Number)(L)}var v=require$$0$3,A=v.Buffer,S=util$3,M=S.inspect,B=M&&M.custom||"inspect";function P(L,F,U){A.prototype.copy.call(L,F,U)}return buffer_list$1=function(){function L(){o(this,L),this.head=null,this.tail=null,this.length=0}return a(L,[{key:"push",value:function(U){var q={data:U,next:null};this.length>0?this.tail.next=q:this.head=q,this.tail=q,++this.length}},{key:"unshift",value:function(U){var q={data:U,next:this.head};this.length===0&&(this.tail=q),this.head=q,++this.length}},{key:"shift",value:function(){if(this.length!==0){var U=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,U}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(U){if(this.length===0)return"";for(var q=this.head,X=""+q.data;q=q.next;)X+=U+q.data;return X}},{key:"concat",value:function(U){if(this.length===0)return A.alloc(0);for(var q=A.allocUnsafe(U>>>0),X=this.head,ee=0;X;)P(X.data,q,ee),ee+=X.data.length,X=X.next;return q}},{key:"consume",value:function(U,q){var X;return U<this.head.data.length?(X=this.head.data.slice(0,U),this.head.data=this.head.data.slice(U)):U===this.head.data.length?X=this.shift():X=q?this._getString(U):this._getBuffer(U),X}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(U){var q=this.head,X=1,ee=q.data;for(U-=ee.length;q=q.next;){var te=q.data,ce=U>te.length?te.length:U;if(ce===te.length?ee+=te:ee+=te.slice(0,U),U-=ce,U===0){ce===te.length?(++X,q.next?this.head=q.next:this.head=this.tail=null):(this.head=q,q.data=te.slice(ce));break}++X}return this.length-=X,ee}},{key:"_getBuffer",value:function(U){var q=A.allocUnsafe(U),X=this.head,ee=1;for(X.data.copy(q),U-=X.data.length;X=X.next;){var te=X.data,ce=U>te.length?te.length:U;if(te.copy(q,q.length-U,0,ce),U-=ce,U===0){ce===te.length?(++ee,X.next?this.head=X.next:this.head=this.tail=null):(this.head=X,X.data=te.slice(ce));break}++ee}return this.length-=ee,q}},{key:B,value:function(U,q){return M(this,e(e({},q),{},{depth:0,customInspect:!1}))}}]),L}(),buffer_list$1}function destroy$1(t,e){var n=this,o=this._readableState&&this._readableState.destroyed,c=this._writableState&&this._writableState.destroyed;return o||c?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process$1.nextTick(emitErrorNT$1,this,t)):process$1.nextTick(emitErrorNT$1,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(a){!e&&a?n._writableState?n._writableState.errorEmitted?process$1.nextTick(emitCloseNT,n):(n._writableState.errorEmitted=!0,process$1.nextTick(emitErrorAndCloseNT,n,a)):process$1.nextTick(emitErrorAndCloseNT,n,a):e?(process$1.nextTick(emitCloseNT,n),e(a)):process$1.nextTick(emitCloseNT,n)}),this)}function emitErrorAndCloseNT(t,e){emitErrorNT$1(t,e),emitCloseNT(t)}function emitCloseNT(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function undestroy$1(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function emitErrorNT$1(t,e){t.emit("error",e)}function errorOrDestroy(t,e){var n=t._readableState,o=t._writableState;n&&n.autoDestroy||o&&o.autoDestroy?t.destroy(e):t.emit("error",e)}var destroy_1$2={destroy:destroy$1,undestroy:undestroy$1,errorOrDestroy},errorsBrowser$1={};function _inheritsLoose(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var codes={};function createErrorType(t,e,n){n||(n=Error);function o(a,l,b){return typeof e=="string"?e:e(a,l,b)}var c=function(a){_inheritsLoose(l,a);function l(b,v,A){return a.call(this,o(b,v,A))||this}return l}(n);c.prototype.name=n.name,c.prototype.code=t,codes[t]=c}function oneOf(t,e){if(Array.isArray(t)){var n=t.length;return t=t.map(function(o){return String(o)}),n>2?"one of ".concat(e," ").concat(t.slice(0,n-1).join(", "),", or ")+t[n-1]:n===2?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}else return"of ".concat(e," ").concat(String(t))}function startsWith(t,e,n){return t.substr(!n||n<0?0:+n,e.length)===e}function endsWith(t,e,n){return(n===void 0||n>t.length)&&(n=t.length),t.substring(n-e.length,n)===e}function includes(t,e,n){return typeof n!="number"&&(n=0),n+e.length>t.length?!1:t.indexOf(e,n)!==-1}createErrorType("ERR_INVALID_OPT_VALUE",function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'},TypeError);createErrorType("ERR_INVALID_ARG_TYPE",function(t,e,n){var o;typeof e=="string"&&startsWith(e,"not ")?(o="must not be",e=e.replace(/^not /,"")):o="must be";var c;if(endsWith(t," argument"))c="The ".concat(t," ").concat(o," ").concat(oneOf(e,"type"));else{var a=includes(t,".")?"property":"argument";c='The "'.concat(t,'" ').concat(a," ").concat(o," ").concat(oneOf(e,"type"))}return c+=". Received type ".concat(typeof n),c},TypeError);createErrorType("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");createErrorType("ERR_METHOD_NOT_IMPLEMENTED",function(t){return"The "+t+" method is not implemented"});createErrorType("ERR_STREAM_PREMATURE_CLOSE","Premature close");createErrorType("ERR_STREAM_DESTROYED",function(t){return"Cannot call "+t+" after a stream was destroyed"});createErrorType("ERR_MULTIPLE_CALLBACK","Callback called multiple times");createErrorType("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");createErrorType("ERR_STREAM_WRITE_AFTER_END","write after end");createErrorType("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);createErrorType("ERR_UNKNOWN_ENCODING",function(t){return"Unknown encoding: "+t},TypeError);createErrorType("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");errorsBrowser$1.codes=codes;var ERR_INVALID_OPT_VALUE=errorsBrowser$1.codes.ERR_INVALID_OPT_VALUE;function highWaterMarkFrom(t,e,n){return t.highWaterMark!=null?t.highWaterMark:e?t[n]:null}function getHighWaterMark(t,e,n,o){var c=highWaterMarkFrom(e,o,n);if(c!=null){if(!(isFinite(c)&&Math.floor(c)===c)||c<0){var a=o?n:"highWaterMark";throw new ERR_INVALID_OPT_VALUE(a,c)}return Math.floor(c)}return t.objectMode?16:16*1024}var state$1={getHighWaterMark},browser$e=deprecate;function deprecate(t,e){if(config("noDeprecation"))return t;var n=!1;function o(){if(!n){if(config("throwDeprecation"))throw new Error(e);config("traceDeprecation")?console.trace(e):console.warn(e),n=!0}return t.apply(this,arguments)}return o}function config(t){try{if(!commonjsGlobal.localStorage)return!1}catch{return!1}var e=commonjsGlobal.localStorage[t];return e==null?!1:String(e).toLowerCase()==="true"}var _stream_writable$2,hasRequired_stream_writable$2;function require_stream_writable$2(){if(hasRequired_stream_writable$2)return _stream_writable$2;hasRequired_stream_writable$2=1,_stream_writable$2=we;function t(j){var D=this;this.next=null,this.entry=null,this.finish=function(){O(D,j)}}var e;we.WritableState=ue;var n={deprecate:browser$e},o=streamBrowser$2,c=require$$0$3.Buffer,a=(typeof commonjsGlobal<"u"?commonjsGlobal:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function l(j){return c.from(j)}function b(j){return c.isBuffer(j)||j instanceof a}var v=destroy_1$2,A=state$1,S=A.getHighWaterMark,M=errorsBrowser$1.codes,B=M.ERR_INVALID_ARG_TYPE,P=M.ERR_METHOD_NOT_IMPLEMENTED,L=M.ERR_MULTIPLE_CALLBACK,F=M.ERR_STREAM_CANNOT_PIPE,U=M.ERR_STREAM_DESTROYED,q=M.ERR_STREAM_NULL_VALUES,X=M.ERR_STREAM_WRITE_AFTER_END,ee=M.ERR_UNKNOWN_ENCODING,te=v.errorOrDestroy;inherits_browserExports(we,o);function ce(){}function ue(j,D,Q){e=e||require_stream_duplex$2(),j=j||{},typeof Q!="boolean"&&(Q=D instanceof e),this.objectMode=!!j.objectMode,Q&&(this.objectMode=this.objectMode||!!j.writableObjectMode),this.highWaterMark=S(this,j,"writableHighWaterMark",Q),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var oe=j.decodeStrings===!1;this.decodeStrings=!oe,this.defaultEncoding=j.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(de){E(D,de)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=j.emitClose!==!1,this.autoDestroy=!!j.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new t(this)}ue.prototype.getBuffer=function(){for(var D=this.bufferedRequest,Q=[];D;)Q.push(D),D=D.next;return Q},function(){try{Object.defineProperty(ue.prototype,"buffer",{get:n.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var Ae;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(Ae=Function.prototype[Symbol.hasInstance],Object.defineProperty(we,Symbol.hasInstance,{value:function(D){return Ae.call(this,D)?!0:this!==we?!1:D&&D._writableState instanceof ue}})):Ae=function(D){return D instanceof this};function we(j){e=e||require_stream_duplex$2();var D=this instanceof e;if(!D&&!Ae.call(we,this))return new we(j);this._writableState=new ue(j,this,D),this.writable=!0,j&&(typeof j.write=="function"&&(this._write=j.write),typeof j.writev=="function"&&(this._writev=j.writev),typeof j.destroy=="function"&&(this._destroy=j.destroy),typeof j.final=="function"&&(this._final=j.final)),o.call(this)}we.prototype.pipe=function(){te(this,new F)};function pe(j,D){var Q=new X;te(j,Q),process$1.nextTick(D,Q)}function Ce(j,D,Q,oe){var de;return Q===null?de=new q:typeof Q!="string"&&!D.objectMode&&(de=new B("chunk",["string","Buffer"],Q)),de?(te(j,de),process$1.nextTick(oe,de),!1):!0}we.prototype.write=function(j,D,Q){var oe=this._writableState,de=!1,Z=!oe.objectMode&&b(j);return Z&&!c.isBuffer(j)&&(j=l(j)),typeof D=="function"&&(Q=D,D=null),Z?D="buffer":D||(D=oe.defaultEncoding),typeof Q!="function"&&(Q=ce),oe.ending?pe(this,Q):(Z||Ce(this,oe,j,Q))&&(oe.pendingcb++,de=u(this,oe,Z,j,D,Q)),de},we.prototype.cork=function(){this._writableState.corked++},we.prototype.uncork=function(){var j=this._writableState;j.corked&&(j.corked--,!j.writing&&!j.corked&&!j.bufferProcessing&&j.bufferedRequest&&_(this,j))},we.prototype.setDefaultEncoding=function(D){if(typeof D=="string"&&(D=D.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((D+"").toLowerCase())>-1))throw new ee(D);return this._writableState.defaultEncoding=D,this},Object.defineProperty(we.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function T(j,D,Q){return!j.objectMode&&j.decodeStrings!==!1&&typeof D=="string"&&(D=c.from(D,Q)),D}Object.defineProperty(we.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function u(j,D,Q,oe,de,Z){if(!Q){var H=T(D,oe,de);oe!==H&&(Q=!0,de="buffer",oe=H)}var ge=D.objectMode?1:oe.length;D.length+=ge;var Me=D.length<D.highWaterMark;if(Me||(D.needDrain=!0),D.writing||D.corked){var ke=D.lastBufferedRequest;D.lastBufferedRequest={chunk:oe,encoding:de,isBuf:Q,callback:Z,next:null},ke?ke.next=D.lastBufferedRequest:D.bufferedRequest=D.lastBufferedRequest,D.bufferedRequestCount+=1}else p(j,D,!1,ge,oe,de,Z);return Me}function p(j,D,Q,oe,de,Z,H){D.writelen=oe,D.writecb=H,D.writing=!0,D.sync=!0,D.destroyed?D.onwrite(new U("write")):Q?j._writev(de,D.onwrite):j._write(de,Z,D.onwrite),D.sync=!1}function m(j,D,Q,oe,de){--D.pendingcb,Q?(process$1.nextTick(de,oe),process$1.nextTick(C,j,D),j._writableState.errorEmitted=!0,te(j,oe)):(de(oe),j._writableState.errorEmitted=!0,te(j,oe),C(j,D))}function y(j){j.writing=!1,j.writecb=null,j.length-=j.writelen,j.writelen=0}function E(j,D){var Q=j._writableState,oe=Q.sync,de=Q.writecb;if(typeof de!="function")throw new L;if(y(Q),D)m(j,Q,oe,D,de);else{var Z=d(Q)||j.destroyed;!Z&&!Q.corked&&!Q.bufferProcessing&&Q.bufferedRequest&&_(j,Q),oe?process$1.nextTick($,j,Q,Z,de):$(j,Q,Z,de)}}function $(j,D,Q,oe){Q||k(j,D),D.pendingcb--,oe(),C(j,D)}function k(j,D){D.length===0&&D.needDrain&&(D.needDrain=!1,j.emit("drain"))}function _(j,D){D.bufferProcessing=!0;var Q=D.bufferedRequest;if(j._writev&&Q&&Q.next){var oe=D.bufferedRequestCount,de=new Array(oe),Z=D.corkedRequestsFree;Z.entry=Q;for(var H=0,ge=!0;Q;)de[H]=Q,Q.isBuf||(ge=!1),Q=Q.next,H+=1;de.allBuffers=ge,p(j,D,!0,D.length,de,"",Z.finish),D.pendingcb++,D.lastBufferedRequest=null,Z.next?(D.corkedRequestsFree=Z.next,Z.next=null):D.corkedRequestsFree=new t(D),D.bufferedRequestCount=0}else{for(;Q;){var Me=Q.chunk,ke=Q.encoding,Ie=Q.callback,et=D.objectMode?1:Me.length;if(p(j,D,!1,et,Me,ke,Ie),Q=Q.next,D.bufferedRequestCount--,D.writing)break}Q===null&&(D.lastBufferedRequest=null)}D.bufferedRequest=Q,D.bufferProcessing=!1}we.prototype._write=function(j,D,Q){Q(new P("_write()"))},we.prototype._writev=null,we.prototype.end=function(j,D,Q){var oe=this._writableState;return typeof j=="function"?(Q=j,j=null,D=null):typeof D=="function"&&(Q=D,D=null),j!=null&&this.write(j,D),oe.corked&&(oe.corked=1,this.uncork()),oe.ending||V(this,oe,Q),this},Object.defineProperty(we.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function d(j){return j.ending&&j.length===0&&j.bufferedRequest===null&&!j.finished&&!j.writing}function w(j,D){j._final(function(Q){D.pendingcb--,Q&&te(j,Q),D.prefinished=!0,j.emit("prefinish"),C(j,D)})}function I(j,D){!D.prefinished&&!D.finalCalled&&(typeof j._final=="function"&&!D.destroyed?(D.pendingcb++,D.finalCalled=!0,process$1.nextTick(w,j,D)):(D.prefinished=!0,j.emit("prefinish")))}function C(j,D){var Q=d(D);if(Q&&(I(j,D),D.pendingcb===0&&(D.finished=!0,j.emit("finish"),D.autoDestroy))){var oe=j._readableState;(!oe||oe.autoDestroy&&oe.endEmitted)&&j.destroy()}return Q}function V(j,D,Q){D.ending=!0,C(j,D),Q&&(D.finished?process$1.nextTick(Q):j.once("finish",Q)),D.ended=!0,j.writable=!1}function O(j,D,Q){var oe=j.entry;for(j.entry=null;oe;){var de=oe.callback;D.pendingcb--,de(Q),oe=oe.next}D.corkedRequestsFree.next=j}return Object.defineProperty(we.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(D){this._writableState&&(this._writableState.destroyed=D)}}),we.prototype.destroy=v.destroy,we.prototype._undestroy=v.undestroy,we.prototype._destroy=function(j,D){D(j)},_stream_writable$2}var _stream_duplex$2,hasRequired_stream_duplex$2;function require_stream_duplex$2(){if(hasRequired_stream_duplex$2)return _stream_duplex$2;hasRequired_stream_duplex$2=1;var t=Object.keys||function(A){var S=[];for(var M in A)S.push(M);return S};_stream_duplex$2=l;var e=require_stream_readable$2(),n=require_stream_writable$2();inherits_browserExports(l,e);for(var o=t(n.prototype),c=0;c<o.length;c++){var a=o[c];l.prototype[a]||(l.prototype[a]=n.prototype[a])}function l(A){if(!(this instanceof l))return new l(A);e.call(this,A),n.call(this,A),this.allowHalfOpen=!0,A&&(A.readable===!1&&(this.readable=!1),A.writable===!1&&(this.writable=!1),A.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",b)))}Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(l.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(l.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function b(){this._writableState.ended||process$1.nextTick(v,this)}function v(A){A.end()}return Object.defineProperty(l.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(S){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=S,this._writableState.destroyed=S)}}),_stream_duplex$2}var string_decoder={},safeBuffer$2={exports:{}};(function(t,e){var n=require$$0$3,o=n.Buffer;function c(l,b){for(var v in l)b[v]=l[v]}o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?t.exports=n:(c(n,e),e.Buffer=a);function a(l,b,v){return o(l,b,v)}c(o,a),a.from=function(l,b,v){if(typeof l=="number")throw new TypeError("Argument must not be a number");return o(l,b,v)},a.alloc=function(l,b,v){if(typeof l!="number")throw new TypeError("Argument must be a number");var A=o(l);return b!==void 0?typeof v=="string"?A.fill(b,v):A.fill(b):A.fill(0),A},a.allocUnsafe=function(l){if(typeof l!="number")throw new TypeError("Argument must be a number");return o(l)},a.allocUnsafeSlow=function(l){if(typeof l!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(l)}})(safeBuffer$2,safeBuffer$2.exports);var safeBufferExports$1=safeBuffer$2.exports,Buffer$C=safeBufferExports$1.Buffer,isEncoding=Buffer$C.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function _normalizeEncoding(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function normalizeEncoding(t){var e=_normalizeEncoding(t);if(typeof e!="string"&&(Buffer$C.isEncoding===isEncoding||!isEncoding(t)))throw new Error("Unknown encoding: "+t);return e||t}string_decoder.StringDecoder=StringDecoder$1;function StringDecoder$1(t){this.encoding=normalizeEncoding(t);var e;switch(this.encoding){case"utf16le":this.text=utf16Text,this.end=utf16End,e=4;break;case"utf8":this.fillLast=utf8FillLast,e=4;break;case"base64":this.text=base64Text,this.end=base64End,e=3;break;default:this.write=simpleWrite,this.end=simpleEnd;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=Buffer$C.allocUnsafe(e)}StringDecoder$1.prototype.write=function(t){if(t.length===0)return"";var e,n;if(this.lastNeed){if(e=this.fillLast(t),e===void 0)return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<t.length?e?e+this.text(t,n):this.text(t,n):e||""};StringDecoder$1.prototype.end=utf8End;StringDecoder$1.prototype.text=utf8Text;StringDecoder$1.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function utf8CheckByte(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function utf8CheckIncomplete(t,e,n){var o=e.length-1;if(o<n)return 0;var c=utf8CheckByte(e[o]);return c>=0?(c>0&&(t.lastNeed=c-1),c):--o<n||c===-2?0:(c=utf8CheckByte(e[o]),c>=0?(c>0&&(t.lastNeed=c-2),c):--o<n||c===-2?0:(c=utf8CheckByte(e[o]),c>=0?(c>0&&(c===2?c=0:t.lastNeed=c-3),c):0))}function utf8CheckExtraBytes(t,e,n){if((e[0]&192)!==128)return t.lastNeed=0,"";if(t.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return t.lastNeed=1,"";if(t.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return t.lastNeed=2,""}}function utf8FillLast(t){var e=this.lastTotal-this.lastNeed,n=utf8CheckExtraBytes(this,t);if(n!==void 0)return n;if(this.lastNeed<=t.length)return t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length}function utf8Text(t,e){var n=utf8CheckIncomplete(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=n;var o=t.length-(n-this.lastNeed);return t.copy(this.lastChar,0,o),t.toString("utf8",e,o)}function utf8End(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"":e}function utf16Text(t,e){if((t.length-e)%2===0){var n=t.toString("utf16le",e);if(n){var o=n.charCodeAt(n.length-1);if(o>=55296&&o<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function utf16End(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,n)}return e}function base64Text(t,e){var n=(t.length-e)%3;return n===0?t.toString("base64",e):(this.lastNeed=3-n,this.lastTotal=3,n===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-n))}function base64End(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function simpleWrite(t){return t.toString(this.encoding)}function simpleEnd(t){return t&&t.length?this.write(t):""}var ERR_STREAM_PREMATURE_CLOSE=errorsBrowser$1.codes.ERR_STREAM_PREMATURE_CLOSE;function once$1(t){var e=!1;return function(){if(!e){e=!0;for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];t.apply(this,o)}}}function noop$1(){}function isRequest$1(t){return t.setHeader&&typeof t.abort=="function"}function eos$1(t,e,n){if(typeof e=="function")return eos$1(t,null,e);e||(e={}),n=once$1(n||noop$1);var o=e.readable||e.readable!==!1&&t.readable,c=e.writable||e.writable!==!1&&t.writable,a=function(){t.writable||b()},l=t._writableState&&t._writableState.finished,b=function(){c=!1,l=!0,o||n.call(t)},v=t._readableState&&t._readableState.endEmitted,A=function(){o=!1,v=!0,c||n.call(t)},S=function(L){n.call(t,L)},M=function(){var L;if(o&&!v)return(!t._readableState||!t._readableState.ended)&&(L=new ERR_STREAM_PREMATURE_CLOSE),n.call(t,L);if(c&&!l)return(!t._writableState||!t._writableState.ended)&&(L=new ERR_STREAM_PREMATURE_CLOSE),n.call(t,L)},B=function(){t.req.on("finish",b)};return isRequest$1(t)?(t.on("complete",b),t.on("abort",M),t.req?B():t.on("request",B)):c&&!t._writableState&&(t.on("end",a),t.on("close",a)),t.on("end",A),t.on("finish",b),e.error!==!1&&t.on("error",S),t.on("close",M),function(){t.removeListener("complete",b),t.removeListener("abort",M),t.removeListener("request",B),t.req&&t.req.removeListener("finish",b),t.removeListener("end",a),t.removeListener("close",a),t.removeListener("finish",b),t.removeListener("end",A),t.removeListener("error",S),t.removeListener("close",M)}}var endOfStream$1=eos$1,async_iterator$1,hasRequiredAsync_iterator$1;function requireAsync_iterator$1(){if(hasRequiredAsync_iterator$1)return async_iterator$1;hasRequiredAsync_iterator$1=1;var t;function e(ee,te,ce){return te=n(te),te in ee?Object.defineProperty(ee,te,{value:ce,enumerable:!0,configurable:!0,writable:!0}):ee[te]=ce,ee}function n(ee){var te=o(ee,"string");return typeof te=="symbol"?te:String(te)}function o(ee,te){if(typeof ee!="object"||ee===null)return ee;var ce=ee[Symbol.toPrimitive];if(ce!==void 0){var ue=ce.call(ee,te||"default");if(typeof ue!="object")return ue;throw new TypeError("@@toPrimitive must return a primitive value.")}return(te==="string"?String:Number)(ee)}var c=endOfStream$1,a=Symbol("lastResolve"),l=Symbol("lastReject"),b=Symbol("error"),v=Symbol("ended"),A=Symbol("lastPromise"),S=Symbol("handlePromise"),M=Symbol("stream");function B(ee,te){return{value:ee,done:te}}function P(ee){var te=ee[a];if(te!==null){var ce=ee[M].read();ce!==null&&(ee[A]=null,ee[a]=null,ee[l]=null,te(B(ce,!1)))}}function L(ee){process$1.nextTick(P,ee)}function F(ee,te){return function(ce,ue){ee.then(function(){if(te[v]){ce(B(void 0,!0));return}te[S](ce,ue)},ue)}}var U=Object.getPrototypeOf(function(){}),q=Object.setPrototypeOf((t={get stream(){return this[M]},next:function(){var te=this,ce=this[b];if(ce!==null)return Promise.reject(ce);if(this[v])return Promise.resolve(B(void 0,!0));if(this[M].destroyed)return new Promise(function(pe,Ce){process$1.nextTick(function(){te[b]?Ce(te[b]):pe(B(void 0,!0))})});var ue=this[A],Ae;if(ue)Ae=new Promise(F(ue,this));else{var we=this[M].read();if(we!==null)return Promise.resolve(B(we,!1));Ae=new Promise(this[S])}return this[A]=Ae,Ae}},e(t,Symbol.asyncIterator,function(){return this}),e(t,"return",function(){var te=this;return new Promise(function(ce,ue){te[M].destroy(null,function(Ae){if(Ae){ue(Ae);return}ce(B(void 0,!0))})})}),t),U),X=function(te){var ce,ue=Object.create(q,(ce={},e(ce,M,{value:te,writable:!0}),e(ce,a,{value:null,writable:!0}),e(ce,l,{value:null,writable:!0}),e(ce,b,{value:null,writable:!0}),e(ce,v,{value:te._readableState.endEmitted,writable:!0}),e(ce,S,{value:function(we,pe){var Ce=ue[M].read();Ce?(ue[A]=null,ue[a]=null,ue[l]=null,we(B(Ce,!1))):(ue[a]=we,ue[l]=pe)},writable:!0}),ce));return ue[A]=null,c(te,function(Ae){if(Ae&&Ae.code!=="ERR_STREAM_PREMATURE_CLOSE"){var we=ue[l];we!==null&&(ue[A]=null,ue[a]=null,ue[l]=null,we(Ae)),ue[b]=Ae;return}var pe=ue[a];pe!==null&&(ue[A]=null,ue[a]=null,ue[l]=null,pe(B(void 0,!0))),ue[v]=!0}),te.on("readable",L.bind(null,ue)),ue};return async_iterator$1=X,async_iterator$1}var fromBrowser$1,hasRequiredFromBrowser$1;function requireFromBrowser$1(){return hasRequiredFromBrowser$1||(hasRequiredFromBrowser$1=1,fromBrowser$1=function(){throw new Error("Readable.from is not available in the browser")}),fromBrowser$1}var _stream_readable$2,hasRequired_stream_readable$2;function require_stream_readable$2(){if(hasRequired_stream_readable$2)return _stream_readable$2;hasRequired_stream_readable$2=1,_stream_readable$2=pe;var t;pe.ReadableState=we,eventsExports.EventEmitter;var e=function(H,ge){return H.listeners(ge).length},n=streamBrowser$2,o=require$$0$3.Buffer,c=(typeof commonjsGlobal<"u"?commonjsGlobal:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function a(Z){return o.from(Z)}function l(Z){return o.isBuffer(Z)||Z instanceof c}var b=util$3,v;b&&b.debuglog?v=b.debuglog("stream"):v=function(){};var A=requireBuffer_list$1(),S=destroy_1$2,M=state$1,B=M.getHighWaterMark,P=errorsBrowser$1.codes,L=P.ERR_INVALID_ARG_TYPE,F=P.ERR_STREAM_PUSH_AFTER_EOF,U=P.ERR_METHOD_NOT_IMPLEMENTED,q=P.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,X,ee,te;inherits_browserExports(pe,n);var ce=S.errorOrDestroy,ue=["error","close","destroy","pause","resume"];function Ae(Z,H,ge){if(typeof Z.prependListener=="function")return Z.prependListener(H,ge);!Z._events||!Z._events[H]?Z.on(H,ge):Array.isArray(Z._events[H])?Z._events[H].unshift(ge):Z._events[H]=[ge,Z._events[H]]}function we(Z,H,ge){t=t||require_stream_duplex$2(),Z=Z||{},typeof ge!="boolean"&&(ge=H instanceof t),this.objectMode=!!Z.objectMode,ge&&(this.objectMode=this.objectMode||!!Z.readableObjectMode),this.highWaterMark=B(this,Z,"readableHighWaterMark",ge),this.buffer=new A,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=Z.emitClose!==!1,this.autoDestroy=!!Z.autoDestroy,this.destroyed=!1,this.defaultEncoding=Z.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,Z.encoding&&(X||(X=string_decoder.StringDecoder),this.decoder=new X(Z.encoding),this.encoding=Z.encoding)}function pe(Z){if(t=t||require_stream_duplex$2(),!(this instanceof pe))return new pe(Z);var H=this instanceof t;this._readableState=new we(Z,this,H),this.readable=!0,Z&&(typeof Z.read=="function"&&(this._read=Z.read),typeof Z.destroy=="function"&&(this._destroy=Z.destroy)),n.call(this)}Object.defineProperty(pe.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(H){this._readableState&&(this._readableState.destroyed=H)}}),pe.prototype.destroy=S.destroy,pe.prototype._undestroy=S.undestroy,pe.prototype._destroy=function(Z,H){H(Z)},pe.prototype.push=function(Z,H){var ge=this._readableState,Me;return ge.objectMode?Me=!0:typeof Z=="string"&&(H=H||ge.defaultEncoding,H!==ge.encoding&&(Z=o.from(Z,H),H=""),Me=!0),Ce(this,Z,H,!1,Me)},pe.prototype.unshift=function(Z){return Ce(this,Z,null,!0,!1)};function Ce(Z,H,ge,Me,ke){v("readableAddChunk",H);var Ie=Z._readableState;if(H===null)Ie.reading=!1,E(Z,Ie);else{var et;if(ke||(et=u(Ie,H)),et)ce(Z,et);else if(Ie.objectMode||H&&H.length>0)if(typeof H!="string"&&!Ie.objectMode&&Object.getPrototypeOf(H)!==o.prototype&&(H=a(H)),Me)Ie.endEmitted?ce(Z,new q):T(Z,Ie,H,!0);else if(Ie.ended)ce(Z,new F);else{if(Ie.destroyed)return!1;Ie.reading=!1,Ie.decoder&&!ge?(H=Ie.decoder.write(H),Ie.objectMode||H.length!==0?T(Z,Ie,H,!1):_(Z,Ie)):T(Z,Ie,H,!1)}else Me||(Ie.reading=!1,_(Z,Ie))}return!Ie.ended&&(Ie.length<Ie.highWaterMark||Ie.length===0)}function T(Z,H,ge,Me){H.flowing&&H.length===0&&!H.sync?(H.awaitDrain=0,Z.emit("data",ge)):(H.length+=H.objectMode?1:ge.length,Me?H.buffer.unshift(ge):H.buffer.push(ge),H.needReadable&&$(Z)),_(Z,H)}function u(Z,H){var ge;return!l(H)&&typeof H!="string"&&H!==void 0&&!Z.objectMode&&(ge=new L("chunk",["string","Buffer","Uint8Array"],H)),ge}pe.prototype.isPaused=function(){return this._readableState.flowing===!1},pe.prototype.setEncoding=function(Z){X||(X=string_decoder.StringDecoder);var H=new X(Z);this._readableState.decoder=H,this._readableState.encoding=this._readableState.decoder.encoding;for(var ge=this._readableState.buffer.head,Me="";ge!==null;)Me+=H.write(ge.data),ge=ge.next;return this._readableState.buffer.clear(),Me!==""&&this._readableState.buffer.push(Me),this._readableState.length=Me.length,this};var p=1073741824;function m(Z){return Z>=p?Z=p:(Z--,Z|=Z>>>1,Z|=Z>>>2,Z|=Z>>>4,Z|=Z>>>8,Z|=Z>>>16,Z++),Z}function y(Z,H){return Z<=0||H.length===0&&H.ended?0:H.objectMode?1:Z!==Z?H.flowing&&H.length?H.buffer.head.data.length:H.length:(Z>H.highWaterMark&&(H.highWaterMark=m(Z)),Z<=H.length?Z:H.ended?H.length:(H.needReadable=!0,0))}pe.prototype.read=function(Z){v("read",Z),Z=parseInt(Z,10);var H=this._readableState,ge=Z;if(Z!==0&&(H.emittedReadable=!1),Z===0&&H.needReadable&&((H.highWaterMark!==0?H.length>=H.highWaterMark:H.length>0)||H.ended))return v("read: emitReadable",H.length,H.ended),H.length===0&&H.ended?Q(this):$(this),null;if(Z=y(Z,H),Z===0&&H.ended)return H.length===0&&Q(this),null;var Me=H.needReadable;v("need readable",Me),(H.length===0||H.length-Z<H.highWaterMark)&&(Me=!0,v("length less than watermark",Me)),H.ended||H.reading?(Me=!1,v("reading or ended",Me)):Me&&(v("do read"),H.reading=!0,H.sync=!0,H.length===0&&(H.needReadable=!0),this._read(H.highWaterMark),H.sync=!1,H.reading||(Z=y(ge,H)));var ke;return Z>0?ke=D(Z,H):ke=null,ke===null?(H.needReadable=H.length<=H.highWaterMark,Z=0):(H.length-=Z,H.awaitDrain=0),H.length===0&&(H.ended||(H.needReadable=!0),ge!==Z&&H.ended&&Q(this)),ke!==null&&this.emit("data",ke),ke};function E(Z,H){if(v("onEofChunk"),!H.ended){if(H.decoder){var ge=H.decoder.end();ge&&ge.length&&(H.buffer.push(ge),H.length+=H.objectMode?1:ge.length)}H.ended=!0,H.sync?$(Z):(H.needReadable=!1,H.emittedReadable||(H.emittedReadable=!0,k(Z)))}}function $(Z){var H=Z._readableState;v("emitReadable",H.needReadable,H.emittedReadable),H.needReadable=!1,H.emittedReadable||(v("emitReadable",H.flowing),H.emittedReadable=!0,process$1.nextTick(k,Z))}function k(Z){var H=Z._readableState;v("emitReadable_",H.destroyed,H.length,H.ended),!H.destroyed&&(H.length||H.ended)&&(Z.emit("readable"),H.emittedReadable=!1),H.needReadable=!H.flowing&&!H.ended&&H.length<=H.highWaterMark,j(Z)}function _(Z,H){H.readingMore||(H.readingMore=!0,process$1.nextTick(d,Z,H))}function d(Z,H){for(;!H.reading&&!H.ended&&(H.length<H.highWaterMark||H.flowing&&H.length===0);){var ge=H.length;if(v("maybeReadMore read 0"),Z.read(0),ge===H.length)break}H.readingMore=!1}pe.prototype._read=function(Z){ce(this,new U("_read()"))},pe.prototype.pipe=function(Z,H){var ge=this,Me=this._readableState;switch(Me.pipesCount){case 0:Me.pipes=Z;break;case 1:Me.pipes=[Me.pipes,Z];break;default:Me.pipes.push(Z);break}Me.pipesCount+=1,v("pipe count=%d opts=%j",Me.pipesCount,H);var ke=(!H||H.end!==!1)&&Z!==process$1.stdout&&Z!==process$1.stderr,Ie=ke?Fe:At;Me.endEmitted?process$1.nextTick(Ie):ge.once("end",Ie),Z.on("unpipe",et);function et(ze,Ge){v("onunpipe"),ze===ge&&Ge&&Ge.hasUnpiped===!1&&(Ge.hasUnpiped=!0,He())}function Fe(){v("onend"),Z.end()}var $e=w(ge);Z.on("drain",$e);var $t=!1;function He(){v("cleanup"),Z.removeListener("close",De),Z.removeListener("finish",qe),Z.removeListener("drain",$e),Z.removeListener("error",St),Z.removeListener("unpipe",et),ge.removeListener("end",Fe),ge.removeListener("end",At),ge.removeListener("data",Ye),$t=!0,Me.awaitDrain&&(!Z._writableState||Z._writableState.needDrain)&&$e()}ge.on("data",Ye);function Ye(ze){v("ondata");var Ge=Z.write(ze);v("dest.write",Ge),Ge===!1&&((Me.pipesCount===1&&Me.pipes===Z||Me.pipesCount>1&&de(Me.pipes,Z)!==-1)&&!$t&&(v("false write response, pause",Me.awaitDrain),Me.awaitDrain++),ge.pause())}function St(ze){v("onerror",ze),At(),Z.removeListener("error",St),e(Z,"error")===0&&ce(Z,ze)}Ae(Z,"error",St);function De(){Z.removeListener("finish",qe),At()}Z.once("close",De);function qe(){v("onfinish"),Z.removeListener("close",De),At()}Z.once("finish",qe);function At(){v("unpipe"),ge.unpipe(Z)}return Z.emit("pipe",ge),Me.flowing||(v("pipe resume"),ge.resume()),Z};function w(Z){return function(){var ge=Z._readableState;v("pipeOnDrain",ge.awaitDrain),ge.awaitDrain&&ge.awaitDrain--,ge.awaitDrain===0&&e(Z,"data")&&(ge.flowing=!0,j(Z))}}pe.prototype.unpipe=function(Z){var H=this._readableState,ge={hasUnpiped:!1};if(H.pipesCount===0)return this;if(H.pipesCount===1)return Z&&Z!==H.pipes?this:(Z||(Z=H.pipes),H.pipes=null,H.pipesCount=0,H.flowing=!1,Z&&Z.emit("unpipe",this,ge),this);if(!Z){var Me=H.pipes,ke=H.pipesCount;H.pipes=null,H.pipesCount=0,H.flowing=!1;for(var Ie=0;Ie<ke;Ie++)Me[Ie].emit("unpipe",this,{hasUnpiped:!1});return this}var et=de(H.pipes,Z);return et===-1?this:(H.pipes.splice(et,1),H.pipesCount-=1,H.pipesCount===1&&(H.pipes=H.pipes[0]),Z.emit("unpipe",this,ge),this)},pe.prototype.on=function(Z,H){var ge=n.prototype.on.call(this,Z,H),Me=this._readableState;return Z==="data"?(Me.readableListening=this.listenerCount("readable")>0,Me.flowing!==!1&&this.resume()):Z==="readable"&&!Me.endEmitted&&!Me.readableListening&&(Me.readableListening=Me.needReadable=!0,Me.flowing=!1,Me.emittedReadable=!1,v("on readable",Me.length,Me.reading),Me.length?$(this):Me.reading||process$1.nextTick(C,this)),ge},pe.prototype.addListener=pe.prototype.on,pe.prototype.removeListener=function(Z,H){var ge=n.prototype.removeListener.call(this,Z,H);return Z==="readable"&&process$1.nextTick(I,this),ge},pe.prototype.removeAllListeners=function(Z){var H=n.prototype.removeAllListeners.apply(this,arguments);return(Z==="readable"||Z===void 0)&&process$1.nextTick(I,this),H};function I(Z){var H=Z._readableState;H.readableListening=Z.listenerCount("readable")>0,H.resumeScheduled&&!H.paused?H.flowing=!0:Z.listenerCount("data")>0&&Z.resume()}function C(Z){v("readable nexttick read 0"),Z.read(0)}pe.prototype.resume=function(){var Z=this._readableState;return Z.flowing||(v("resume"),Z.flowing=!Z.readableListening,V(this,Z)),Z.paused=!1,this};function V(Z,H){H.resumeScheduled||(H.resumeScheduled=!0,process$1.nextTick(O,Z,H))}function O(Z,H){v("resume",H.reading),H.reading||Z.read(0),H.resumeScheduled=!1,Z.emit("resume"),j(Z),H.flowing&&!H.reading&&Z.read(0)}pe.prototype.pause=function(){return v("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(v("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function j(Z){var H=Z._readableState;for(v("flow",H.flowing);H.flowing&&Z.read()!==null;);}pe.prototype.wrap=function(Z){var H=this,ge=this._readableState,Me=!1;Z.on("end",function(){if(v("wrapped end"),ge.decoder&&!ge.ended){var et=ge.decoder.end();et&&et.length&&H.push(et)}H.push(null)}),Z.on("data",function(et){if(v("wrapped data"),ge.decoder&&(et=ge.decoder.write(et)),!(ge.objectMode&&et==null)&&!(!ge.objectMode&&(!et||!et.length))){var Fe=H.push(et);Fe||(Me=!0,Z.pause())}});for(var ke in Z)this[ke]===void 0&&typeof Z[ke]=="function"&&(this[ke]=function(Fe){return function(){return Z[Fe].apply(Z,arguments)}}(ke));for(var Ie=0;Ie<ue.length;Ie++)Z.on(ue[Ie],this.emit.bind(this,ue[Ie]));return this._read=function(et){v("wrapped _read",et),Me&&(Me=!1,Z.resume())},this},typeof Symbol=="function"&&(pe.prototype[Symbol.asyncIterator]=function(){return ee===void 0&&(ee=requireAsync_iterator$1()),ee(this)}),Object.defineProperty(pe.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(pe.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(pe.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(H){this._readableState&&(this._readableState.flowing=H)}}),pe._fromList=D,Object.defineProperty(pe.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function D(Z,H){if(H.length===0)return null;var ge;return H.objectMode?ge=H.buffer.shift():!Z||Z>=H.length?(H.decoder?ge=H.buffer.join(""):H.buffer.length===1?ge=H.buffer.first():ge=H.buffer.concat(H.length),H.buffer.clear()):ge=H.buffer.consume(Z,H.decoder),ge}function Q(Z){var H=Z._readableState;v("endReadable",H.endEmitted),H.endEmitted||(H.ended=!0,process$1.nextTick(oe,H,Z))}function oe(Z,H){if(v("endReadableNT",Z.endEmitted,Z.length),!Z.endEmitted&&Z.length===0&&(Z.endEmitted=!0,H.readable=!1,H.emit("end"),Z.autoDestroy)){var ge=H._writableState;(!ge||ge.autoDestroy&&ge.finished)&&H.destroy()}}typeof Symbol=="function"&&(pe.from=function(Z,H){return te===void 0&&(te=requireFromBrowser$1()),te(pe,Z,H)});function de(Z,H){for(var ge=0,Me=Z.length;ge<Me;ge++)if(Z[ge]===H)return ge;return-1}return _stream_readable$2}var _stream_transform$2=Transform$9,_require$codes$1=errorsBrowser$1.codes,ERR_METHOD_NOT_IMPLEMENTED=_require$codes$1.ERR_METHOD_NOT_IMPLEMENTED,ERR_MULTIPLE_CALLBACK=_require$codes$1.ERR_MULTIPLE_CALLBACK,ERR_TRANSFORM_ALREADY_TRANSFORMING=_require$codes$1.ERR_TRANSFORM_ALREADY_TRANSFORMING,ERR_TRANSFORM_WITH_LENGTH_0=_require$codes$1.ERR_TRANSFORM_WITH_LENGTH_0,Duplex$1=require_stream_duplex$2();inherits_browserExports(Transform$9,Duplex$1);function afterTransform$1(t,e){var n=this._transformState;n.transforming=!1;var o=n.writecb;if(o===null)return this.emit("error",new ERR_MULTIPLE_CALLBACK);n.writechunk=null,n.writecb=null,e!=null&&this.push(e),o(t);var c=this._readableState;c.reading=!1,(c.needReadable||c.length<c.highWaterMark)&&this._read(c.highWaterMark)}function Transform$9(t){if(!(this instanceof Transform$9))return new Transform$9(t);Duplex$1.call(this,t),this._transformState={afterTransform:afterTransform$1.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",prefinish$1)}function prefinish$1(){var t=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(e,n){done$1(t,e,n)}):done$1(this,null,null)}Transform$9.prototype.push=function(t,e){return this._transformState.needTransform=!1,Duplex$1.prototype.push.call(this,t,e)};Transform$9.prototype._transform=function(t,e,n){n(new ERR_METHOD_NOT_IMPLEMENTED("_transform()"))};Transform$9.prototype._write=function(t,e,n){var o=this._transformState;if(o.writecb=n,o.writechunk=t,o.writeencoding=e,!o.transforming){var c=this._readableState;(o.needTransform||c.needReadable||c.length<c.highWaterMark)&&this._read(c.highWaterMark)}};Transform$9.prototype._read=function(t){var e=this._transformState;e.writechunk!==null&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};Transform$9.prototype._destroy=function(t,e){Duplex$1.prototype._destroy.call(this,t,function(n){e(n)})};function done$1(t,e,n){if(e)return t.emit("error",e);if(n!=null&&t.push(n),t._writableState.length)throw new ERR_TRANSFORM_WITH_LENGTH_0;if(t._transformState.transforming)throw new ERR_TRANSFORM_ALREADY_TRANSFORMING;return t.push(null)}var _stream_passthrough$2=PassThrough$1,Transform$8=_stream_transform$2;inherits_browserExports(PassThrough$1,Transform$8);function PassThrough$1(t){if(!(this instanceof PassThrough$1))return new PassThrough$1(t);Transform$8.call(this,t)}PassThrough$1.prototype._transform=function(t,e,n){n(null,t)};var eos;function once(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}var _require$codes=errorsBrowser$1.codes,ERR_MISSING_ARGS=_require$codes.ERR_MISSING_ARGS,ERR_STREAM_DESTROYED=_require$codes.ERR_STREAM_DESTROYED;function noop(t){if(t)throw t}function isRequest(t){return t.setHeader&&typeof t.abort=="function"}function destroyer(t,e,n,o){o=once(o);var c=!1;t.on("close",function(){c=!0}),eos===void 0&&(eos=endOfStream$1),eos(t,{readable:e,writable:n},function(l){if(l)return o(l);c=!0,o()});var a=!1;return function(l){if(!c&&!a){if(a=!0,isRequest(t))return t.abort();if(typeof t.destroy=="function")return t.destroy();o(l||new ERR_STREAM_DESTROYED("pipe"))}}}function call(t){t()}function pipe(t,e){return t.pipe(e)}function popCallback(t){return!t.length||typeof t[t.length-1]!="function"?noop:t.pop()}function pipeline(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var o=popCallback(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new ERR_MISSING_ARGS("streams");var c,a=e.map(function(l,b){var v=b<e.length-1,A=b>0;return destroyer(l,v,A,function(S){c||(c=S),S&&a.forEach(call),!v&&(a.forEach(call),o(c))})});return e.reduce(pipe)}var pipeline_1$1=pipeline;(function(t,e){e=t.exports=require_stream_readable$2(),e.Stream=e,e.Readable=e,e.Writable=require_stream_writable$2(),e.Duplex=require_stream_duplex$2(),e.Transform=_stream_transform$2,e.PassThrough=_stream_passthrough$2,e.finished=endOfStream$1,e.pipeline=pipeline_1$1})(readableBrowser$1,readableBrowser$1.exports);var readableBrowserExports$1=readableBrowser$1.exports,Buffer$B=safeBufferExports$2.Buffer,Transform$7=readableBrowserExports$1.Transform,inherits$p=inherits_browserExports;function throwIfNotStringOrBuffer(t,e){if(!Buffer$B.isBuffer(t)&&typeof t!="string")throw new TypeError(e+" must be a string or a buffer")}function HashBase$2(t){Transform$7.call(this),this._block=Buffer$B.allocUnsafe(t),this._blockSize=t,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}inherits$p(HashBase$2,Transform$7);HashBase$2.prototype._transform=function(t,e,n){var o=null;try{this.update(t,e)}catch(c){o=c}n(o)};HashBase$2.prototype._flush=function(t){var e=null;try{this.push(this.digest())}catch(n){e=n}t(e)};HashBase$2.prototype.update=function(t,e){if(throwIfNotStringOrBuffer(t,"Data"),this._finalized)throw new Error("Digest already called");Buffer$B.isBuffer(t)||(t=Buffer$B.from(t,e));for(var n=this._block,o=0;this._blockOffset+t.length-o>=this._blockSize;){for(var c=this._blockOffset;c<this._blockSize;)n[c++]=t[o++];this._update(),this._blockOffset=0}for(;o<t.length;)n[this._blockOffset++]=t[o++];for(var a=0,l=t.length*8;l>0;++a)this._length[a]+=l,l=this._length[a]/4294967296|0,l>0&&(this._length[a]-=4294967296*l);return this};HashBase$2.prototype._update=function(){throw new Error("_update is not implemented")};HashBase$2.prototype.digest=function(t){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var e=this._digest();t!==void 0&&(e=e.toString(t)),this._block.fill(0),this._blockOffset=0;for(var n=0;n<4;++n)this._length[n]=0;return e};HashBase$2.prototype._digest=function(){throw new Error("_digest is not implemented")};var hashBase=HashBase$2,inherits$o=inherits_browserExports,HashBase$1=hashBase,Buffer$A=safeBufferExports$2.Buffer,ARRAY16$1=new Array(16);function MD5$3(){HashBase$1.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}inherits$o(MD5$3,HashBase$1);MD5$3.prototype._update=function(){for(var t=ARRAY16$1,e=0;e<16;++e)t[e]=this._block.readInt32LE(e*4);var n=this._a,o=this._b,c=this._c,a=this._d;n=fnF(n,o,c,a,t[0],3614090360,7),a=fnF(a,n,o,c,t[1],3905402710,12),c=fnF(c,a,n,o,t[2],606105819,17),o=fnF(o,c,a,n,t[3],3250441966,22),n=fnF(n,o,c,a,t[4],4118548399,7),a=fnF(a,n,o,c,t[5],1200080426,12),c=fnF(c,a,n,o,t[6],2821735955,17),o=fnF(o,c,a,n,t[7],4249261313,22),n=fnF(n,o,c,a,t[8],1770035416,7),a=fnF(a,n,o,c,t[9],2336552879,12),c=fnF(c,a,n,o,t[10],4294925233,17),o=fnF(o,c,a,n,t[11],2304563134,22),n=fnF(n,o,c,a,t[12],1804603682,7),a=fnF(a,n,o,c,t[13],4254626195,12),c=fnF(c,a,n,o,t[14],2792965006,17),o=fnF(o,c,a,n,t[15],1236535329,22),n=fnG(n,o,c,a,t[1],4129170786,5),a=fnG(a,n,o,c,t[6],3225465664,9),c=fnG(c,a,n,o,t[11],643717713,14),o=fnG(o,c,a,n,t[0],3921069994,20),n=fnG(n,o,c,a,t[5],3593408605,5),a=fnG(a,n,o,c,t[10],38016083,9),c=fnG(c,a,n,o,t[15],3634488961,14),o=fnG(o,c,a,n,t[4],3889429448,20),n=fnG(n,o,c,a,t[9],568446438,5),a=fnG(a,n,o,c,t[14],3275163606,9),c=fnG(c,a,n,o,t[3],4107603335,14),o=fnG(o,c,a,n,t[8],1163531501,20),n=fnG(n,o,c,a,t[13],2850285829,5),a=fnG(a,n,o,c,t[2],4243563512,9),c=fnG(c,a,n,o,t[7],1735328473,14),o=fnG(o,c,a,n,t[12],2368359562,20),n=fnH(n,o,c,a,t[5],4294588738,4),a=fnH(a,n,o,c,t[8],2272392833,11),c=fnH(c,a,n,o,t[11],1839030562,16),o=fnH(o,c,a,n,t[14],4259657740,23),n=fnH(n,o,c,a,t[1],2763975236,4),a=fnH(a,n,o,c,t[4],1272893353,11),c=fnH(c,a,n,o,t[7],4139469664,16),o=fnH(o,c,a,n,t[10],3200236656,23),n=fnH(n,o,c,a,t[13],681279174,4),a=fnH(a,n,o,c,t[0],3936430074,11),c=fnH(c,a,n,o,t[3],3572445317,16),o=fnH(o,c,a,n,t[6],76029189,23),n=fnH(n,o,c,a,t[9],3654602809,4),a=fnH(a,n,o,c,t[12],3873151461,11),c=fnH(c,a,n,o,t[15],530742520,16),o=fnH(o,c,a,n,t[2],3299628645,23),n=fnI(n,o,c,a,t[0],4096336452,6),a=fnI(a,n,o,c,t[7],1126891415,10),c=fnI(c,a,n,o,t[14],2878612391,15),o=fnI(o,c,a,n,t[5],4237533241,21),n=fnI(n,o,c,a,t[12],1700485571,6),a=fnI(a,n,o,c,t[3],2399980690,10),c=fnI(c,a,n,o,t[10],4293915773,15),o=fnI(o,c,a,n,t[1],2240044497,21),n=fnI(n,o,c,a,t[8],1873313359,6),a=fnI(a,n,o,c,t[15],4264355552,10),c=fnI(c,a,n,o,t[6],2734768916,15),o=fnI(o,c,a,n,t[13],1309151649,21),n=fnI(n,o,c,a,t[4],4149444226,6),a=fnI(a,n,o,c,t[11],3174756917,10),c=fnI(c,a,n,o,t[2],718787259,15),o=fnI(o,c,a,n,t[9],3951481745,21),this._a=this._a+n|0,this._b=this._b+o|0,this._c=this._c+c|0,this._d=this._d+a|0};MD5$3.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var t=Buffer$A.allocUnsafe(16);return t.writeInt32LE(this._a,0),t.writeInt32LE(this._b,4),t.writeInt32LE(this._c,8),t.writeInt32LE(this._d,12),t};function rotl$1(t,e){return t<<e|t>>>32-e}function fnF(t,e,n,o,c,a,l){return rotl$1(t+(e&n|~e&o)+c+a|0,l)+e|0}function fnG(t,e,n,o,c,a,l){return rotl$1(t+(e&o|n&~o)+c+a|0,l)+e|0}function fnH(t,e,n,o,c,a,l){return rotl$1(t+(e^n^o)+c+a|0,l)+e|0}function fnI(t,e,n,o,c,a,l){return rotl$1(t+(n^(e|~o))+c+a|0,l)+e|0}var md5_js=MD5$3,Buffer$z=require$$0$3.Buffer,inherits$n=inherits_browserExports,HashBase=hashBase,ARRAY16=new Array(16),zl=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],zr=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],sl=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],sr=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],hl=[0,1518500249,1859775393,2400959708,2840853838],hr=[1352829926,1548603684,1836072691,2053994217,0];function RIPEMD160$3(){HashBase.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}inherits$n(RIPEMD160$3,HashBase);RIPEMD160$3.prototype._update=function(){for(var t=ARRAY16,e=0;e<16;++e)t[e]=this._block.readInt32LE(e*4);for(var n=this._a|0,o=this._b|0,c=this._c|0,a=this._d|0,l=this._e|0,b=this._a|0,v=this._b|0,A=this._c|0,S=this._d|0,M=this._e|0,B=0;B<80;B+=1){var P,L;B<16?(P=fn1(n,o,c,a,l,t[zl[B]],hl[0],sl[B]),L=fn5(b,v,A,S,M,t[zr[B]],hr[0],sr[B])):B<32?(P=fn2(n,o,c,a,l,t[zl[B]],hl[1],sl[B]),L=fn4(b,v,A,S,M,t[zr[B]],hr[1],sr[B])):B<48?(P=fn3(n,o,c,a,l,t[zl[B]],hl[2],sl[B]),L=fn3(b,v,A,S,M,t[zr[B]],hr[2],sr[B])):B<64?(P=fn4(n,o,c,a,l,t[zl[B]],hl[3],sl[B]),L=fn2(b,v,A,S,M,t[zr[B]],hr[3],sr[B])):(P=fn5(n,o,c,a,l,t[zl[B]],hl[4],sl[B]),L=fn1(b,v,A,S,M,t[zr[B]],hr[4],sr[B])),n=l,l=a,a=rotl(c,10),c=o,o=P,b=M,M=S,S=rotl(A,10),A=v,v=L}var F=this._b+c+S|0;this._b=this._c+a+M|0,this._c=this._d+l+b|0,this._d=this._e+n+v|0,this._e=this._a+o+A|0,this._a=F};RIPEMD160$3.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var t=Buffer$z.alloc?Buffer$z.alloc(20):new Buffer$z(20);return t.writeInt32LE(this._a,0),t.writeInt32LE(this._b,4),t.writeInt32LE(this._c,8),t.writeInt32LE(this._d,12),t.writeInt32LE(this._e,16),t};function rotl(t,e){return t<<e|t>>>32-e}function fn1(t,e,n,o,c,a,l,b){return rotl(t+(e^n^o)+a+l|0,b)+c|0}function fn2(t,e,n,o,c,a,l,b){return rotl(t+(e&n|~e&o)+a+l|0,b)+c|0}function fn3(t,e,n,o,c,a,l,b){return rotl(t+((e|~n)^o)+a+l|0,b)+c|0}function fn4(t,e,n,o,c,a,l,b){return rotl(t+(e&o|n&~o)+a+l|0,b)+c|0}function fn5(t,e,n,o,c,a,l,b){return rotl(t+(e^(n|~o))+a+l|0,b)+c|0}var ripemd160=RIPEMD160$3,sha_js={exports:{}},Buffer$y=safeBufferExports$2.Buffer;function Hash$7(t,e){this._block=Buffer$y.alloc(t),this._finalSize=e,this._blockSize=t,this._len=0}Hash$7.prototype.update=function(t,e){typeof t=="string"&&(e=e||"utf8",t=Buffer$y.from(t,e));for(var n=this._block,o=this._blockSize,c=t.length,a=this._len,l=0;l<c;){for(var b=a%o,v=Math.min(c-l,o-b),A=0;A<v;A++)n[b+A]=t[l+A];a+=v,l+=v,a%o===0&&this._update(n)}return this._len+=c,this};Hash$7.prototype.digest=function(t){var e=this._len%this._blockSize;this._block[e]=128,this._block.fill(0,e+1),e>=this._finalSize&&(this._update(this._block),this._block.fill(0));var n=this._len*8;if(n<=4294967295)this._block.writeUInt32BE(n,this._blockSize-4);else{var o=(n&4294967295)>>>0,c=(n-o)/4294967296;this._block.writeUInt32BE(c,this._blockSize-8),this._block.writeUInt32BE(o,this._blockSize-4)}this._update(this._block);var a=this._hash();return t?a.toString(t):a};Hash$7.prototype._update=function(){throw new Error("_update must be implemented by subclass")};var hash$2=Hash$7,inherits$m=inherits_browserExports,Hash$6=hash$2,Buffer$x=safeBufferExports$2.Buffer,K$3=[1518500249,1859775393,-1894007588,-899497514],W$5=new Array(80);function Sha(){this.init(),this._w=W$5,Hash$6.call(this,64,56)}inherits$m(Sha,Hash$6);Sha.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function rotl5$1(t){return t<<5|t>>>27}function rotl30$1(t){return t<<30|t>>>2}function ft$1(t,e,n,o){return t===0?e&n|~e&o:t===2?e&n|e&o|n&o:e^n^o}Sha.prototype._update=function(t){for(var e=this._w,n=this._a|0,o=this._b|0,c=this._c|0,a=this._d|0,l=this._e|0,b=0;b<16;++b)e[b]=t.readInt32BE(b*4);for(;b<80;++b)e[b]=e[b-3]^e[b-8]^e[b-14]^e[b-16];for(var v=0;v<80;++v){var A=~~(v/20),S=rotl5$1(n)+ft$1(A,o,c,a)+l+e[v]+K$3[A]|0;l=a,a=c,c=rotl30$1(o),o=n,n=S}this._a=n+this._a|0,this._b=o+this._b|0,this._c=c+this._c|0,this._d=a+this._d|0,this._e=l+this._e|0};Sha.prototype._hash=function(){var t=Buffer$x.allocUnsafe(20);return t.writeInt32BE(this._a|0,0),t.writeInt32BE(this._b|0,4),t.writeInt32BE(this._c|0,8),t.writeInt32BE(this._d|0,12),t.writeInt32BE(this._e|0,16),t};var sha$3=Sha,inherits$l=inherits_browserExports,Hash$5=hash$2,Buffer$w=safeBufferExports$2.Buffer,K$2=[1518500249,1859775393,-1894007588,-899497514],W$4=new Array(80);function Sha1(){this.init(),this._w=W$4,Hash$5.call(this,64,56)}inherits$l(Sha1,Hash$5);Sha1.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function rotl1(t){return t<<1|t>>>31}function rotl5(t){return t<<5|t>>>27}function rotl30(t){return t<<30|t>>>2}function ft(t,e,n,o){return t===0?e&n|~e&o:t===2?e&n|e&o|n&o:e^n^o}Sha1.prototype._update=function(t){for(var e=this._w,n=this._a|0,o=this._b|0,c=this._c|0,a=this._d|0,l=this._e|0,b=0;b<16;++b)e[b]=t.readInt32BE(b*4);for(;b<80;++b)e[b]=rotl1(e[b-3]^e[b-8]^e[b-14]^e[b-16]);for(var v=0;v<80;++v){var A=~~(v/20),S=rotl5(n)+ft(A,o,c,a)+l+e[v]+K$2[A]|0;l=a,a=c,c=rotl30(o),o=n,n=S}this._a=n+this._a|0,this._b=o+this._b|0,this._c=c+this._c|0,this._d=a+this._d|0,this._e=l+this._e|0};Sha1.prototype._hash=function(){var t=Buffer$w.allocUnsafe(20);return t.writeInt32BE(this._a|0,0),t.writeInt32BE(this._b|0,4),t.writeInt32BE(this._c|0,8),t.writeInt32BE(this._d|0,12),t.writeInt32BE(this._e|0,16),t};var sha1$3=Sha1,inherits$k=inherits_browserExports,Hash$4=hash$2,Buffer$v=safeBufferExports$2.Buffer,K$1=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],W$3=new Array(64);function Sha256$1(){this.init(),this._w=W$3,Hash$4.call(this,64,56)}inherits$k(Sha256$1,Hash$4);Sha256$1.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this};function ch(t,e,n){return n^t&(e^n)}function maj$1(t,e,n){return t&e|n&(t|e)}function sigma0$1(t){return(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10)}function sigma1$1(t){return(t>>>6|t<<26)^(t>>>11|t<<21)^(t>>>25|t<<7)}function gamma0(t){return(t>>>7|t<<25)^(t>>>18|t<<14)^t>>>3}function gamma1(t){return(t>>>17|t<<15)^(t>>>19|t<<13)^t>>>10}Sha256$1.prototype._update=function(t){for(var e=this._w,n=this._a|0,o=this._b|0,c=this._c|0,a=this._d|0,l=this._e|0,b=this._f|0,v=this._g|0,A=this._h|0,S=0;S<16;++S)e[S]=t.readInt32BE(S*4);for(;S<64;++S)e[S]=gamma1(e[S-2])+e[S-7]+gamma0(e[S-15])+e[S-16]|0;for(var M=0;M<64;++M){var B=A+sigma1$1(l)+ch(l,b,v)+K$1[M]+e[M]|0,P=sigma0$1(n)+maj$1(n,o,c)|0;A=v,v=b,b=l,l=a+B|0,a=c,c=o,o=n,n=B+P|0}this._a=n+this._a|0,this._b=o+this._b|0,this._c=c+this._c|0,this._d=a+this._d|0,this._e=l+this._e|0,this._f=b+this._f|0,this._g=v+this._g|0,this._h=A+this._h|0};Sha256$1.prototype._hash=function(){var t=Buffer$v.allocUnsafe(32);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t.writeInt32BE(this._h,28),t};var sha256$3=Sha256$1,inherits$j=inherits_browserExports,Sha256=sha256$3,Hash$3=hash$2,Buffer$u=safeBufferExports$2.Buffer,W$2=new Array(64);function Sha224(){this.init(),this._w=W$2,Hash$3.call(this,64,56)}inherits$j(Sha224,Sha256);Sha224.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this};Sha224.prototype._hash=function(){var t=Buffer$u.allocUnsafe(28);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t};var sha224$1=Sha224,inherits$i=inherits_browserExports,Hash$2=hash$2,Buffer$t=safeBufferExports$2.Buffer,K=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],W$1=new Array(160);function Sha512(){this.init(),this._w=W$1,Hash$2.call(this,128,112)}inherits$i(Sha512,Hash$2);Sha512.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this};function Ch(t,e,n){return n^t&(e^n)}function maj(t,e,n){return t&e|n&(t|e)}function sigma0(t,e){return(t>>>28|e<<4)^(e>>>2|t<<30)^(e>>>7|t<<25)}function sigma1(t,e){return(t>>>14|e<<18)^(t>>>18|e<<14)^(e>>>9|t<<23)}function Gamma0(t,e){return(t>>>1|e<<31)^(t>>>8|e<<24)^t>>>7}function Gamma0l(t,e){return(t>>>1|e<<31)^(t>>>8|e<<24)^(t>>>7|e<<25)}function Gamma1(t,e){return(t>>>19|e<<13)^(e>>>29|t<<3)^t>>>6}function Gamma1l(t,e){return(t>>>19|e<<13)^(e>>>29|t<<3)^(t>>>6|e<<26)}function getCarry(t,e){return t>>>0<e>>>0?1:0}Sha512.prototype._update=function(t){for(var e=this._w,n=this._ah|0,o=this._bh|0,c=this._ch|0,a=this._dh|0,l=this._eh|0,b=this._fh|0,v=this._gh|0,A=this._hh|0,S=this._al|0,M=this._bl|0,B=this._cl|0,P=this._dl|0,L=this._el|0,F=this._fl|0,U=this._gl|0,q=this._hl|0,X=0;X<32;X+=2)e[X]=t.readInt32BE(X*4),e[X+1]=t.readInt32BE(X*4+4);for(;X<160;X+=2){var ee=e[X-30],te=e[X-15*2+1],ce=Gamma0(ee,te),ue=Gamma0l(te,ee);ee=e[X-2*2],te=e[X-2*2+1];var Ae=Gamma1(ee,te),we=Gamma1l(te,ee),pe=e[X-7*2],Ce=e[X-7*2+1],T=e[X-16*2],u=e[X-16*2+1],p=ue+Ce|0,m=ce+pe+getCarry(p,ue)|0;p=p+we|0,m=m+Ae+getCarry(p,we)|0,p=p+u|0,m=m+T+getCarry(p,u)|0,e[X]=m,e[X+1]=p}for(var y=0;y<160;y+=2){m=e[y],p=e[y+1];var E=maj(n,o,c),$=maj(S,M,B),k=sigma0(n,S),_=sigma0(S,n),d=sigma1(l,L),w=sigma1(L,l),I=K[y],C=K[y+1],V=Ch(l,b,v),O=Ch(L,F,U),j=q+w|0,D=A+d+getCarry(j,q)|0;j=j+O|0,D=D+V+getCarry(j,O)|0,j=j+C|0,D=D+I+getCarry(j,C)|0,j=j+p|0,D=D+m+getCarry(j,p)|0;var Q=_+$|0,oe=k+E+getCarry(Q,_)|0;A=v,q=U,v=b,U=F,b=l,F=L,L=P+j|0,l=a+D+getCarry(L,P)|0,a=c,P=B,c=o,B=M,o=n,M=S,S=j+Q|0,n=D+oe+getCarry(S,j)|0}this._al=this._al+S|0,this._bl=this._bl+M|0,this._cl=this._cl+B|0,this._dl=this._dl+P|0,this._el=this._el+L|0,this._fl=this._fl+F|0,this._gl=this._gl+U|0,this._hl=this._hl+q|0,this._ah=this._ah+n+getCarry(this._al,S)|0,this._bh=this._bh+o+getCarry(this._bl,M)|0,this._ch=this._ch+c+getCarry(this._cl,B)|0,this._dh=this._dh+a+getCarry(this._dl,P)|0,this._eh=this._eh+l+getCarry(this._el,L)|0,this._fh=this._fh+b+getCarry(this._fl,F)|0,this._gh=this._gh+v+getCarry(this._gl,U)|0,this._hh=this._hh+A+getCarry(this._hl,q)|0};Sha512.prototype._hash=function(){var t=Buffer$t.allocUnsafe(64);function e(n,o,c){t.writeInt32BE(n,c),t.writeInt32BE(o,c+4)}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),e(this._gh,this._gl,48),e(this._hh,this._hl,56),t};var sha512$1=Sha512,inherits$h=inherits_browserExports,SHA512=sha512$1,Hash$1=hash$2,Buffer$s=safeBufferExports$2.Buffer,W=new Array(160);function Sha384(){this.init(),this._w=W,Hash$1.call(this,128,112)}inherits$h(Sha384,SHA512);Sha384.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this};Sha384.prototype._hash=function(){var t=Buffer$s.allocUnsafe(48);function e(n,o,c){t.writeInt32BE(n,c),t.writeInt32BE(o,c+4)}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),t};var sha384$1=Sha384,exports=sha_js.exports=function(e){e=e.toLowerCase();var n=exports[e];if(!n)throw new Error(e+" is not supported (we accept pull requests)");return new n};exports.sha=sha$3;exports.sha1=sha1$3;exports.sha224=sha224$1;exports.sha256=sha256$3;exports.sha384=sha384$1;exports.sha512=sha512$1;var sha_jsExports=sha_js.exports,streamBrowser$1,hasRequiredStreamBrowser;function requireStreamBrowser(){return hasRequiredStreamBrowser||(hasRequiredStreamBrowser=1,streamBrowser$1=eventsExports.EventEmitter),streamBrowser$1}var buffer_list,hasRequiredBuffer_list;function requireBuffer_list(){if(hasRequiredBuffer_list)return buffer_list;hasRequiredBuffer_list=1;function t(L,F){var U=Object.keys(L);if(Object.getOwnPropertySymbols){var q=Object.getOwnPropertySymbols(L);F&&(q=q.filter(function(X){return Object.getOwnPropertyDescriptor(L,X).enumerable})),U.push.apply(U,q)}return U}function e(L){for(var F=1;F<arguments.length;F++){var U=arguments[F]!=null?arguments[F]:{};F%2?t(Object(U),!0).forEach(function(q){n(L,q,U[q])}):Object.getOwnPropertyDescriptors?Object.defineProperties(L,Object.getOwnPropertyDescriptors(U)):t(Object(U)).forEach(function(q){Object.defineProperty(L,q,Object.getOwnPropertyDescriptor(U,q))})}return L}function n(L,F,U){return F=l(F),F in L?Object.defineProperty(L,F,{value:U,enumerable:!0,configurable:!0,writable:!0}):L[F]=U,L}function o(L,F){if(!(L instanceof F))throw new TypeError("Cannot call a class as a function")}function c(L,F){for(var U=0;U<F.length;U++){var q=F[U];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(L,l(q.key),q)}}function a(L,F,U){return F&&c(L.prototype,F),U&&c(L,U),Object.defineProperty(L,"prototype",{writable:!1}),L}function l(L){var F=b(L,"string");return typeof F=="symbol"?F:String(F)}function b(L,F){if(typeof L!="object"||L===null)return L;var U=L[Symbol.toPrimitive];if(U!==void 0){var q=U.call(L,F||"default");if(typeof q!="object")return q;throw new TypeError("@@toPrimitive must return a primitive value.")}return(F==="string"?String:Number)(L)}var v=require$$0$3,A=v.Buffer,S=util$3,M=S.inspect,B=M&&M.custom||"inspect";function P(L,F,U){A.prototype.copy.call(L,F,U)}return buffer_list=function(){function L(){o(this,L),this.head=null,this.tail=null,this.length=0}return a(L,[{key:"push",value:function(U){var q={data:U,next:null};this.length>0?this.tail.next=q:this.head=q,this.tail=q,++this.length}},{key:"unshift",value:function(U){var q={data:U,next:this.head};this.length===0&&(this.tail=q),this.head=q,++this.length}},{key:"shift",value:function(){if(this.length!==0){var U=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,U}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(U){if(this.length===0)return"";for(var q=this.head,X=""+q.data;q=q.next;)X+=U+q.data;return X}},{key:"concat",value:function(U){if(this.length===0)return A.alloc(0);for(var q=A.allocUnsafe(U>>>0),X=this.head,ee=0;X;)P(X.data,q,ee),ee+=X.data.length,X=X.next;return q}},{key:"consume",value:function(U,q){var X;return U<this.head.data.length?(X=this.head.data.slice(0,U),this.head.data=this.head.data.slice(U)):U===this.head.data.length?X=this.shift():X=q?this._getString(U):this._getBuffer(U),X}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(U){var q=this.head,X=1,ee=q.data;for(U-=ee.length;q=q.next;){var te=q.data,ce=U>te.length?te.length:U;if(ce===te.length?ee+=te:ee+=te.slice(0,U),U-=ce,U===0){ce===te.length?(++X,q.next?this.head=q.next:this.head=this.tail=null):(this.head=q,q.data=te.slice(ce));break}++X}return this.length-=X,ee}},{key:"_getBuffer",value:function(U){var q=A.allocUnsafe(U),X=this.head,ee=1;for(X.data.copy(q),U-=X.data.length;X=X.next;){var te=X.data,ce=U>te.length?te.length:U;if(te.copy(q,q.length-U,0,ce),U-=ce,U===0){ce===te.length?(++ee,X.next?this.head=X.next:this.head=this.tail=null):(this.head=X,X.data=te.slice(ce));break}++ee}return this.length-=ee,q}},{key:B,value:function(U,q){return M(this,e(e({},q),{},{depth:0,customInspect:!1}))}}]),L}(),buffer_list}var destroy_1$1,hasRequiredDestroy;function requireDestroy(){if(hasRequiredDestroy)return destroy_1$1;hasRequiredDestroy=1;function t(l,b){var v=this,A=this._readableState&&this._readableState.destroyed,S=this._writableState&&this._writableState.destroyed;return A||S?(b?b(l):l&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process$1.nextTick(c,this,l)):process$1.nextTick(c,this,l)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(l||null,function(M){!b&&M?v._writableState?v._writableState.errorEmitted?process$1.nextTick(n,v):(v._writableState.errorEmitted=!0,process$1.nextTick(e,v,M)):process$1.nextTick(e,v,M):b?(process$1.nextTick(n,v),b(M)):process$1.nextTick(n,v)}),this)}function e(l,b){c(l,b),n(l)}function n(l){l._writableState&&!l._writableState.emitClose||l._readableState&&!l._readableState.emitClose||l.emit("close")}function o(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function c(l,b){l.emit("error",b)}function a(l,b){var v=l._readableState,A=l._writableState;v&&v.autoDestroy||A&&A.autoDestroy?l.destroy(b):l.emit("error",b)}return destroy_1$1={destroy:t,undestroy:o,errorOrDestroy:a},destroy_1$1}var errorsBrowser={},hasRequiredErrorsBrowser;function requireErrorsBrowser(){if(hasRequiredErrorsBrowser)return errorsBrowser;hasRequiredErrorsBrowser=1;function t(b,v){b.prototype=Object.create(v.prototype),b.prototype.constructor=b,b.__proto__=v}var e={};function n(b,v,A){A||(A=Error);function S(B,P,L){return typeof v=="string"?v:v(B,P,L)}var M=function(B){t(P,B);function P(L,F,U){return B.call(this,S(L,F,U))||this}return P}(A);M.prototype.name=A.name,M.prototype.code=b,e[b]=M}function o(b,v){if(Array.isArray(b)){var A=b.length;return b=b.map(function(S){return String(S)}),A>2?"one of ".concat(v," ").concat(b.slice(0,A-1).join(", "),", or ")+b[A-1]:A===2?"one of ".concat(v," ").concat(b[0]," or ").concat(b[1]):"of ".concat(v," ").concat(b[0])}else return"of ".concat(v," ").concat(String(b))}function c(b,v,A){return b.substr(!A||A<0?0:+A,v.length)===v}function a(b,v,A){return(A===void 0||A>b.length)&&(A=b.length),b.substring(A-v.length,A)===v}function l(b,v,A){return typeof A!="number"&&(A=0),A+v.length>b.length?!1:b.indexOf(v,A)!==-1}return n("ERR_INVALID_OPT_VALUE",function(b,v){return'The value "'+v+'" is invalid for option "'+b+'"'},TypeError),n("ERR_INVALID_ARG_TYPE",function(b,v,A){var S;typeof v=="string"&&c(v,"not ")?(S="must not be",v=v.replace(/^not /,"")):S="must be";var M;if(a(b," argument"))M="The ".concat(b," ").concat(S," ").concat(o(v,"type"));else{var B=l(b,".")?"property":"argument";M='The "'.concat(b,'" ').concat(B," ").concat(S," ").concat(o(v,"type"))}return M+=". Received type ".concat(typeof A),M},TypeError),n("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),n("ERR_METHOD_NOT_IMPLEMENTED",function(b){return"The "+b+" method is not implemented"}),n("ERR_STREAM_PREMATURE_CLOSE","Premature close"),n("ERR_STREAM_DESTROYED",function(b){return"Cannot call "+b+" after a stream was destroyed"}),n("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),n("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),n("ERR_STREAM_WRITE_AFTER_END","write after end"),n("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),n("ERR_UNKNOWN_ENCODING",function(b){return"Unknown encoding: "+b},TypeError),n("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),errorsBrowser.codes=e,errorsBrowser}var state,hasRequiredState;function requireState(){if(hasRequiredState)return state;hasRequiredState=1;var t=requireErrorsBrowser().codes.ERR_INVALID_OPT_VALUE;function e(o,c,a){return o.highWaterMark!=null?o.highWaterMark:c?o[a]:null}function n(o,c,a,l){var b=e(c,l,a);if(b!=null){if(!(isFinite(b)&&Math.floor(b)===b)||b<0){var v=l?a:"highWaterMark";throw new t(v,b)}return Math.floor(b)}return o.objectMode?16:16*1024}return state={getHighWaterMark:n},state}var _stream_writable$1,hasRequired_stream_writable$1;function require_stream_writable$1(){if(hasRequired_stream_writable$1)return _stream_writable$1;hasRequired_stream_writable$1=1,_stream_writable$1=we;function t(j){var D=this;this.next=null,this.entry=null,this.finish=function(){O(D,j)}}var e;we.WritableState=ue;var n={deprecate:browser$e},o=requireStreamBrowser(),c=require$$0$3.Buffer,a=(typeof commonjsGlobal<"u"?commonjsGlobal:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function l(j){return c.from(j)}function b(j){return c.isBuffer(j)||j instanceof a}var v=requireDestroy(),A=requireState(),S=A.getHighWaterMark,M=requireErrorsBrowser().codes,B=M.ERR_INVALID_ARG_TYPE,P=M.ERR_METHOD_NOT_IMPLEMENTED,L=M.ERR_MULTIPLE_CALLBACK,F=M.ERR_STREAM_CANNOT_PIPE,U=M.ERR_STREAM_DESTROYED,q=M.ERR_STREAM_NULL_VALUES,X=M.ERR_STREAM_WRITE_AFTER_END,ee=M.ERR_UNKNOWN_ENCODING,te=v.errorOrDestroy;inherits_browserExports(we,o);function ce(){}function ue(j,D,Q){e=e||require_stream_duplex$1(),j=j||{},typeof Q!="boolean"&&(Q=D instanceof e),this.objectMode=!!j.objectMode,Q&&(this.objectMode=this.objectMode||!!j.writableObjectMode),this.highWaterMark=S(this,j,"writableHighWaterMark",Q),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var oe=j.decodeStrings===!1;this.decodeStrings=!oe,this.defaultEncoding=j.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(de){E(D,de)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=j.emitClose!==!1,this.autoDestroy=!!j.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new t(this)}ue.prototype.getBuffer=function(){for(var D=this.bufferedRequest,Q=[];D;)Q.push(D),D=D.next;return Q},function(){try{Object.defineProperty(ue.prototype,"buffer",{get:n.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var Ae;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(Ae=Function.prototype[Symbol.hasInstance],Object.defineProperty(we,Symbol.hasInstance,{value:function(D){return Ae.call(this,D)?!0:this!==we?!1:D&&D._writableState instanceof ue}})):Ae=function(D){return D instanceof this};function we(j){e=e||require_stream_duplex$1();var D=this instanceof e;if(!D&&!Ae.call(we,this))return new we(j);this._writableState=new ue(j,this,D),this.writable=!0,j&&(typeof j.write=="function"&&(this._write=j.write),typeof j.writev=="function"&&(this._writev=j.writev),typeof j.destroy=="function"&&(this._destroy=j.destroy),typeof j.final=="function"&&(this._final=j.final)),o.call(this)}we.prototype.pipe=function(){te(this,new F)};function pe(j,D){var Q=new X;te(j,Q),process$1.nextTick(D,Q)}function Ce(j,D,Q,oe){var de;return Q===null?de=new q:typeof Q!="string"&&!D.objectMode&&(de=new B("chunk",["string","Buffer"],Q)),de?(te(j,de),process$1.nextTick(oe,de),!1):!0}we.prototype.write=function(j,D,Q){var oe=this._writableState,de=!1,Z=!oe.objectMode&&b(j);return Z&&!c.isBuffer(j)&&(j=l(j)),typeof D=="function"&&(Q=D,D=null),Z?D="buffer":D||(D=oe.defaultEncoding),typeof Q!="function"&&(Q=ce),oe.ending?pe(this,Q):(Z||Ce(this,oe,j,Q))&&(oe.pendingcb++,de=u(this,oe,Z,j,D,Q)),de},we.prototype.cork=function(){this._writableState.corked++},we.prototype.uncork=function(){var j=this._writableState;j.corked&&(j.corked--,!j.writing&&!j.corked&&!j.bufferProcessing&&j.bufferedRequest&&_(this,j))},we.prototype.setDefaultEncoding=function(D){if(typeof D=="string"&&(D=D.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((D+"").toLowerCase())>-1))throw new ee(D);return this._writableState.defaultEncoding=D,this},Object.defineProperty(we.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function T(j,D,Q){return!j.objectMode&&j.decodeStrings!==!1&&typeof D=="string"&&(D=c.from(D,Q)),D}Object.defineProperty(we.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function u(j,D,Q,oe,de,Z){if(!Q){var H=T(D,oe,de);oe!==H&&(Q=!0,de="buffer",oe=H)}var ge=D.objectMode?1:oe.length;D.length+=ge;var Me=D.length<D.highWaterMark;if(Me||(D.needDrain=!0),D.writing||D.corked){var ke=D.lastBufferedRequest;D.lastBufferedRequest={chunk:oe,encoding:de,isBuf:Q,callback:Z,next:null},ke?ke.next=D.lastBufferedRequest:D.bufferedRequest=D.lastBufferedRequest,D.bufferedRequestCount+=1}else p(j,D,!1,ge,oe,de,Z);return Me}function p(j,D,Q,oe,de,Z,H){D.writelen=oe,D.writecb=H,D.writing=!0,D.sync=!0,D.destroyed?D.onwrite(new U("write")):Q?j._writev(de,D.onwrite):j._write(de,Z,D.onwrite),D.sync=!1}function m(j,D,Q,oe,de){--D.pendingcb,Q?(process$1.nextTick(de,oe),process$1.nextTick(C,j,D),j._writableState.errorEmitted=!0,te(j,oe)):(de(oe),j._writableState.errorEmitted=!0,te(j,oe),C(j,D))}function y(j){j.writing=!1,j.writecb=null,j.length-=j.writelen,j.writelen=0}function E(j,D){var Q=j._writableState,oe=Q.sync,de=Q.writecb;if(typeof de!="function")throw new L;if(y(Q),D)m(j,Q,oe,D,de);else{var Z=d(Q)||j.destroyed;!Z&&!Q.corked&&!Q.bufferProcessing&&Q.bufferedRequest&&_(j,Q),oe?process$1.nextTick($,j,Q,Z,de):$(j,Q,Z,de)}}function $(j,D,Q,oe){Q||k(j,D),D.pendingcb--,oe(),C(j,D)}function k(j,D){D.length===0&&D.needDrain&&(D.needDrain=!1,j.emit("drain"))}function _(j,D){D.bufferProcessing=!0;var Q=D.bufferedRequest;if(j._writev&&Q&&Q.next){var oe=D.bufferedRequestCount,de=new Array(oe),Z=D.corkedRequestsFree;Z.entry=Q;for(var H=0,ge=!0;Q;)de[H]=Q,Q.isBuf||(ge=!1),Q=Q.next,H+=1;de.allBuffers=ge,p(j,D,!0,D.length,de,"",Z.finish),D.pendingcb++,D.lastBufferedRequest=null,Z.next?(D.corkedRequestsFree=Z.next,Z.next=null):D.corkedRequestsFree=new t(D),D.bufferedRequestCount=0}else{for(;Q;){var Me=Q.chunk,ke=Q.encoding,Ie=Q.callback,et=D.objectMode?1:Me.length;if(p(j,D,!1,et,Me,ke,Ie),Q=Q.next,D.bufferedRequestCount--,D.writing)break}Q===null&&(D.lastBufferedRequest=null)}D.bufferedRequest=Q,D.bufferProcessing=!1}we.prototype._write=function(j,D,Q){Q(new P("_write()"))},we.prototype._writev=null,we.prototype.end=function(j,D,Q){var oe=this._writableState;return typeof j=="function"?(Q=j,j=null,D=null):typeof D=="function"&&(Q=D,D=null),j!=null&&this.write(j,D),oe.corked&&(oe.corked=1,this.uncork()),oe.ending||V(this,oe,Q),this},Object.defineProperty(we.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function d(j){return j.ending&&j.length===0&&j.bufferedRequest===null&&!j.finished&&!j.writing}function w(j,D){j._final(function(Q){D.pendingcb--,Q&&te(j,Q),D.prefinished=!0,j.emit("prefinish"),C(j,D)})}function I(j,D){!D.prefinished&&!D.finalCalled&&(typeof j._final=="function"&&!D.destroyed?(D.pendingcb++,D.finalCalled=!0,process$1.nextTick(w,j,D)):(D.prefinished=!0,j.emit("prefinish")))}function C(j,D){var Q=d(D);if(Q&&(I(j,D),D.pendingcb===0&&(D.finished=!0,j.emit("finish"),D.autoDestroy))){var oe=j._readableState;(!oe||oe.autoDestroy&&oe.endEmitted)&&j.destroy()}return Q}function V(j,D,Q){D.ending=!0,C(j,D),Q&&(D.finished?process$1.nextTick(Q):j.once("finish",Q)),D.ended=!0,j.writable=!1}function O(j,D,Q){var oe=j.entry;for(j.entry=null;oe;){var de=oe.callback;D.pendingcb--,de(Q),oe=oe.next}D.corkedRequestsFree.next=j}return Object.defineProperty(we.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(D){this._writableState&&(this._writableState.destroyed=D)}}),we.prototype.destroy=v.destroy,we.prototype._undestroy=v.undestroy,we.prototype._destroy=function(j,D){D(j)},_stream_writable$1}var _stream_duplex$1,hasRequired_stream_duplex$1;function require_stream_duplex$1(){if(hasRequired_stream_duplex$1)return _stream_duplex$1;hasRequired_stream_duplex$1=1;var t=Object.keys||function(A){var S=[];for(var M in A)S.push(M);return S};_stream_duplex$1=l;var e=require_stream_readable$1(),n=require_stream_writable$1();inherits_browserExports(l,e);for(var o=t(n.prototype),c=0;c<o.length;c++){var a=o[c];l.prototype[a]||(l.prototype[a]=n.prototype[a])}function l(A){if(!(this instanceof l))return new l(A);e.call(this,A),n.call(this,A),this.allowHalfOpen=!0,A&&(A.readable===!1&&(this.readable=!1),A.writable===!1&&(this.writable=!1),A.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",b)))}Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(l.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(l.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function b(){this._writableState.ended||process$1.nextTick(v,this)}function v(A){A.end()}return Object.defineProperty(l.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(S){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=S,this._writableState.destroyed=S)}}),_stream_duplex$1}var endOfStream,hasRequiredEndOfStream;function requireEndOfStream(){if(hasRequiredEndOfStream)return endOfStream;hasRequiredEndOfStream=1;var t=requireErrorsBrowser().codes.ERR_STREAM_PREMATURE_CLOSE;function e(a){var l=!1;return function(){if(!l){l=!0;for(var b=arguments.length,v=new Array(b),A=0;A<b;A++)v[A]=arguments[A];a.apply(this,v)}}}function n(){}function o(a){return a.setHeader&&typeof a.abort=="function"}function c(a,l,b){if(typeof l=="function")return c(a,null,l);l||(l={}),b=e(b||n);var v=l.readable||l.readable!==!1&&a.readable,A=l.writable||l.writable!==!1&&a.writable,S=function(){a.writable||B()},M=a._writableState&&a._writableState.finished,B=function(){A=!1,M=!0,v||b.call(a)},P=a._readableState&&a._readableState.endEmitted,L=function(){v=!1,P=!0,A||b.call(a)},F=function(ee){b.call(a,ee)},U=function(){var ee;if(v&&!P)return(!a._readableState||!a._readableState.ended)&&(ee=new t),b.call(a,ee);if(A&&!M)return(!a._writableState||!a._writableState.ended)&&(ee=new t),b.call(a,ee)},q=function(){a.req.on("finish",B)};return o(a)?(a.on("complete",B),a.on("abort",U),a.req?q():a.on("request",q)):A&&!a._writableState&&(a.on("end",S),a.on("close",S)),a.on("end",L),a.on("finish",B),l.error!==!1&&a.on("error",F),a.on("close",U),function(){a.removeListener("complete",B),a.removeListener("abort",U),a.removeListener("request",q),a.req&&a.req.removeListener("finish",B),a.removeListener("end",S),a.removeListener("close",S),a.removeListener("finish",B),a.removeListener("end",L),a.removeListener("error",F),a.removeListener("close",U)}}return endOfStream=c,endOfStream}var async_iterator,hasRequiredAsync_iterator;function requireAsync_iterator(){if(hasRequiredAsync_iterator)return async_iterator;hasRequiredAsync_iterator=1;var t;function e(ee,te,ce){return te=n(te),te in ee?Object.defineProperty(ee,te,{value:ce,enumerable:!0,configurable:!0,writable:!0}):ee[te]=ce,ee}function n(ee){var te=o(ee,"string");return typeof te=="symbol"?te:String(te)}function o(ee,te){if(typeof ee!="object"||ee===null)return ee;var ce=ee[Symbol.toPrimitive];if(ce!==void 0){var ue=ce.call(ee,te||"default");if(typeof ue!="object")return ue;throw new TypeError("@@toPrimitive must return a primitive value.")}return(te==="string"?String:Number)(ee)}var c=requireEndOfStream(),a=Symbol("lastResolve"),l=Symbol("lastReject"),b=Symbol("error"),v=Symbol("ended"),A=Symbol("lastPromise"),S=Symbol("handlePromise"),M=Symbol("stream");function B(ee,te){return{value:ee,done:te}}function P(ee){var te=ee[a];if(te!==null){var ce=ee[M].read();ce!==null&&(ee[A]=null,ee[a]=null,ee[l]=null,te(B(ce,!1)))}}function L(ee){process$1.nextTick(P,ee)}function F(ee,te){return function(ce,ue){ee.then(function(){if(te[v]){ce(B(void 0,!0));return}te[S](ce,ue)},ue)}}var U=Object.getPrototypeOf(function(){}),q=Object.setPrototypeOf((t={get stream(){return this[M]},next:function(){var te=this,ce=this[b];if(ce!==null)return Promise.reject(ce);if(this[v])return Promise.resolve(B(void 0,!0));if(this[M].destroyed)return new Promise(function(pe,Ce){process$1.nextTick(function(){te[b]?Ce(te[b]):pe(B(void 0,!0))})});var ue=this[A],Ae;if(ue)Ae=new Promise(F(ue,this));else{var we=this[M].read();if(we!==null)return Promise.resolve(B(we,!1));Ae=new Promise(this[S])}return this[A]=Ae,Ae}},e(t,Symbol.asyncIterator,function(){return this}),e(t,"return",function(){var te=this;return new Promise(function(ce,ue){te[M].destroy(null,function(Ae){if(Ae){ue(Ae);return}ce(B(void 0,!0))})})}),t),U),X=function(te){var ce,ue=Object.create(q,(ce={},e(ce,M,{value:te,writable:!0}),e(ce,a,{value:null,writable:!0}),e(ce,l,{value:null,writable:!0}),e(ce,b,{value:null,writable:!0}),e(ce,v,{value:te._readableState.endEmitted,writable:!0}),e(ce,S,{value:function(we,pe){var Ce=ue[M].read();Ce?(ue[A]=null,ue[a]=null,ue[l]=null,we(B(Ce,!1))):(ue[a]=we,ue[l]=pe)},writable:!0}),ce));return ue[A]=null,c(te,function(Ae){if(Ae&&Ae.code!=="ERR_STREAM_PREMATURE_CLOSE"){var we=ue[l];we!==null&&(ue[A]=null,ue[a]=null,ue[l]=null,we(Ae)),ue[b]=Ae;return}var pe=ue[a];pe!==null&&(ue[A]=null,ue[a]=null,ue[l]=null,pe(B(void 0,!0))),ue[v]=!0}),te.on("readable",L.bind(null,ue)),ue};return async_iterator=X,async_iterator}var fromBrowser,hasRequiredFromBrowser;function requireFromBrowser(){return hasRequiredFromBrowser||(hasRequiredFromBrowser=1,fromBrowser=function(){throw new Error("Readable.from is not available in the browser")}),fromBrowser}var _stream_readable$1,hasRequired_stream_readable$1;function require_stream_readable$1(){if(hasRequired_stream_readable$1)return _stream_readable$1;hasRequired_stream_readable$1=1,_stream_readable$1=pe;var t;pe.ReadableState=we,eventsExports.EventEmitter;var e=function(H,ge){return H.listeners(ge).length},n=requireStreamBrowser(),o=require$$0$3.Buffer,c=(typeof commonjsGlobal<"u"?commonjsGlobal:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function a(Z){return o.from(Z)}function l(Z){return o.isBuffer(Z)||Z instanceof c}var b=util$3,v;b&&b.debuglog?v=b.debuglog("stream"):v=function(){};var A=requireBuffer_list(),S=requireDestroy(),M=requireState(),B=M.getHighWaterMark,P=requireErrorsBrowser().codes,L=P.ERR_INVALID_ARG_TYPE,F=P.ERR_STREAM_PUSH_AFTER_EOF,U=P.ERR_METHOD_NOT_IMPLEMENTED,q=P.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,X,ee,te;inherits_browserExports(pe,n);var ce=S.errorOrDestroy,ue=["error","close","destroy","pause","resume"];function Ae(Z,H,ge){if(typeof Z.prependListener=="function")return Z.prependListener(H,ge);!Z._events||!Z._events[H]?Z.on(H,ge):Array.isArray(Z._events[H])?Z._events[H].unshift(ge):Z._events[H]=[ge,Z._events[H]]}function we(Z,H,ge){t=t||require_stream_duplex$1(),Z=Z||{},typeof ge!="boolean"&&(ge=H instanceof t),this.objectMode=!!Z.objectMode,ge&&(this.objectMode=this.objectMode||!!Z.readableObjectMode),this.highWaterMark=B(this,Z,"readableHighWaterMark",ge),this.buffer=new A,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=Z.emitClose!==!1,this.autoDestroy=!!Z.autoDestroy,this.destroyed=!1,this.defaultEncoding=Z.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,Z.encoding&&(X||(X=string_decoder.StringDecoder),this.decoder=new X(Z.encoding),this.encoding=Z.encoding)}function pe(Z){if(t=t||require_stream_duplex$1(),!(this instanceof pe))return new pe(Z);var H=this instanceof t;this._readableState=new we(Z,this,H),this.readable=!0,Z&&(typeof Z.read=="function"&&(this._read=Z.read),typeof Z.destroy=="function"&&(this._destroy=Z.destroy)),n.call(this)}Object.defineProperty(pe.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(H){this._readableState&&(this._readableState.destroyed=H)}}),pe.prototype.destroy=S.destroy,pe.prototype._undestroy=S.undestroy,pe.prototype._destroy=function(Z,H){H(Z)},pe.prototype.push=function(Z,H){var ge=this._readableState,Me;return ge.objectMode?Me=!0:typeof Z=="string"&&(H=H||ge.defaultEncoding,H!==ge.encoding&&(Z=o.from(Z,H),H=""),Me=!0),Ce(this,Z,H,!1,Me)},pe.prototype.unshift=function(Z){return Ce(this,Z,null,!0,!1)};function Ce(Z,H,ge,Me,ke){v("readableAddChunk",H);var Ie=Z._readableState;if(H===null)Ie.reading=!1,E(Z,Ie);else{var et;if(ke||(et=u(Ie,H)),et)ce(Z,et);else if(Ie.objectMode||H&&H.length>0)if(typeof H!="string"&&!Ie.objectMode&&Object.getPrototypeOf(H)!==o.prototype&&(H=a(H)),Me)Ie.endEmitted?ce(Z,new q):T(Z,Ie,H,!0);else if(Ie.ended)ce(Z,new F);else{if(Ie.destroyed)return!1;Ie.reading=!1,Ie.decoder&&!ge?(H=Ie.decoder.write(H),Ie.objectMode||H.length!==0?T(Z,Ie,H,!1):_(Z,Ie)):T(Z,Ie,H,!1)}else Me||(Ie.reading=!1,_(Z,Ie))}return!Ie.ended&&(Ie.length<Ie.highWaterMark||Ie.length===0)}function T(Z,H,ge,Me){H.flowing&&H.length===0&&!H.sync?(H.awaitDrain=0,Z.emit("data",ge)):(H.length+=H.objectMode?1:ge.length,Me?H.buffer.unshift(ge):H.buffer.push(ge),H.needReadable&&$(Z)),_(Z,H)}function u(Z,H){var ge;return!l(H)&&typeof H!="string"&&H!==void 0&&!Z.objectMode&&(ge=new L("chunk",["string","Buffer","Uint8Array"],H)),ge}pe.prototype.isPaused=function(){return this._readableState.flowing===!1},pe.prototype.setEncoding=function(Z){X||(X=string_decoder.StringDecoder);var H=new X(Z);this._readableState.decoder=H,this._readableState.encoding=this._readableState.decoder.encoding;for(var ge=this._readableState.buffer.head,Me="";ge!==null;)Me+=H.write(ge.data),ge=ge.next;return this._readableState.buffer.clear(),Me!==""&&this._readableState.buffer.push(Me),this._readableState.length=Me.length,this};var p=1073741824;function m(Z){return Z>=p?Z=p:(Z--,Z|=Z>>>1,Z|=Z>>>2,Z|=Z>>>4,Z|=Z>>>8,Z|=Z>>>16,Z++),Z}function y(Z,H){return Z<=0||H.length===0&&H.ended?0:H.objectMode?1:Z!==Z?H.flowing&&H.length?H.buffer.head.data.length:H.length:(Z>H.highWaterMark&&(H.highWaterMark=m(Z)),Z<=H.length?Z:H.ended?H.length:(H.needReadable=!0,0))}pe.prototype.read=function(Z){v("read",Z),Z=parseInt(Z,10);var H=this._readableState,ge=Z;if(Z!==0&&(H.emittedReadable=!1),Z===0&&H.needReadable&&((H.highWaterMark!==0?H.length>=H.highWaterMark:H.length>0)||H.ended))return v("read: emitReadable",H.length,H.ended),H.length===0&&H.ended?Q(this):$(this),null;if(Z=y(Z,H),Z===0&&H.ended)return H.length===0&&Q(this),null;var Me=H.needReadable;v("need readable",Me),(H.length===0||H.length-Z<H.highWaterMark)&&(Me=!0,v("length less than watermark",Me)),H.ended||H.reading?(Me=!1,v("reading or ended",Me)):Me&&(v("do read"),H.reading=!0,H.sync=!0,H.length===0&&(H.needReadable=!0),this._read(H.highWaterMark),H.sync=!1,H.reading||(Z=y(ge,H)));var ke;return Z>0?ke=D(Z,H):ke=null,ke===null?(H.needReadable=H.length<=H.highWaterMark,Z=0):(H.length-=Z,H.awaitDrain=0),H.length===0&&(H.ended||(H.needReadable=!0),ge!==Z&&H.ended&&Q(this)),ke!==null&&this.emit("data",ke),ke};function E(Z,H){if(v("onEofChunk"),!H.ended){if(H.decoder){var ge=H.decoder.end();ge&&ge.length&&(H.buffer.push(ge),H.length+=H.objectMode?1:ge.length)}H.ended=!0,H.sync?$(Z):(H.needReadable=!1,H.emittedReadable||(H.emittedReadable=!0,k(Z)))}}function $(Z){var H=Z._readableState;v("emitReadable",H.needReadable,H.emittedReadable),H.needReadable=!1,H.emittedReadable||(v("emitReadable",H.flowing),H.emittedReadable=!0,process$1.nextTick(k,Z))}function k(Z){var H=Z._readableState;v("emitReadable_",H.destroyed,H.length,H.ended),!H.destroyed&&(H.length||H.ended)&&(Z.emit("readable"),H.emittedReadable=!1),H.needReadable=!H.flowing&&!H.ended&&H.length<=H.highWaterMark,j(Z)}function _(Z,H){H.readingMore||(H.readingMore=!0,process$1.nextTick(d,Z,H))}function d(Z,H){for(;!H.reading&&!H.ended&&(H.length<H.highWaterMark||H.flowing&&H.length===0);){var ge=H.length;if(v("maybeReadMore read 0"),Z.read(0),ge===H.length)break}H.readingMore=!1}pe.prototype._read=function(Z){ce(this,new U("_read()"))},pe.prototype.pipe=function(Z,H){var ge=this,Me=this._readableState;switch(Me.pipesCount){case 0:Me.pipes=Z;break;case 1:Me.pipes=[Me.pipes,Z];break;default:Me.pipes.push(Z);break}Me.pipesCount+=1,v("pipe count=%d opts=%j",Me.pipesCount,H);var ke=(!H||H.end!==!1)&&Z!==process$1.stdout&&Z!==process$1.stderr,Ie=ke?Fe:At;Me.endEmitted?process$1.nextTick(Ie):ge.once("end",Ie),Z.on("unpipe",et);function et(ze,Ge){v("onunpipe"),ze===ge&&Ge&&Ge.hasUnpiped===!1&&(Ge.hasUnpiped=!0,He())}function Fe(){v("onend"),Z.end()}var $e=w(ge);Z.on("drain",$e);var $t=!1;function He(){v("cleanup"),Z.removeListener("close",De),Z.removeListener("finish",qe),Z.removeListener("drain",$e),Z.removeListener("error",St),Z.removeListener("unpipe",et),ge.removeListener("end",Fe),ge.removeListener("end",At),ge.removeListener("data",Ye),$t=!0,Me.awaitDrain&&(!Z._writableState||Z._writableState.needDrain)&&$e()}ge.on("data",Ye);function Ye(ze){v("ondata");var Ge=Z.write(ze);v("dest.write",Ge),Ge===!1&&((Me.pipesCount===1&&Me.pipes===Z||Me.pipesCount>1&&de(Me.pipes,Z)!==-1)&&!$t&&(v("false write response, pause",Me.awaitDrain),Me.awaitDrain++),ge.pause())}function St(ze){v("onerror",ze),At(),Z.removeListener("error",St),e(Z,"error")===0&&ce(Z,ze)}Ae(Z,"error",St);function De(){Z.removeListener("finish",qe),At()}Z.once("close",De);function qe(){v("onfinish"),Z.removeListener("close",De),At()}Z.once("finish",qe);function At(){v("unpipe"),ge.unpipe(Z)}return Z.emit("pipe",ge),Me.flowing||(v("pipe resume"),ge.resume()),Z};function w(Z){return function(){var ge=Z._readableState;v("pipeOnDrain",ge.awaitDrain),ge.awaitDrain&&ge.awaitDrain--,ge.awaitDrain===0&&e(Z,"data")&&(ge.flowing=!0,j(Z))}}pe.prototype.unpipe=function(Z){var H=this._readableState,ge={hasUnpiped:!1};if(H.pipesCount===0)return this;if(H.pipesCount===1)return Z&&Z!==H.pipes?this:(Z||(Z=H.pipes),H.pipes=null,H.pipesCount=0,H.flowing=!1,Z&&Z.emit("unpipe",this,ge),this);if(!Z){var Me=H.pipes,ke=H.pipesCount;H.pipes=null,H.pipesCount=0,H.flowing=!1;for(var Ie=0;Ie<ke;Ie++)Me[Ie].emit("unpipe",this,{hasUnpiped:!1});return this}var et=de(H.pipes,Z);return et===-1?this:(H.pipes.splice(et,1),H.pipesCount-=1,H.pipesCount===1&&(H.pipes=H.pipes[0]),Z.emit("unpipe",this,ge),this)},pe.prototype.on=function(Z,H){var ge=n.prototype.on.call(this,Z,H),Me=this._readableState;return Z==="data"?(Me.readableListening=this.listenerCount("readable")>0,Me.flowing!==!1&&this.resume()):Z==="readable"&&!Me.endEmitted&&!Me.readableListening&&(Me.readableListening=Me.needReadable=!0,Me.flowing=!1,Me.emittedReadable=!1,v("on readable",Me.length,Me.reading),Me.length?$(this):Me.reading||process$1.nextTick(C,this)),ge},pe.prototype.addListener=pe.prototype.on,pe.prototype.removeListener=function(Z,H){var ge=n.prototype.removeListener.call(this,Z,H);return Z==="readable"&&process$1.nextTick(I,this),ge},pe.prototype.removeAllListeners=function(Z){var H=n.prototype.removeAllListeners.apply(this,arguments);return(Z==="readable"||Z===void 0)&&process$1.nextTick(I,this),H};function I(Z){var H=Z._readableState;H.readableListening=Z.listenerCount("readable")>0,H.resumeScheduled&&!H.paused?H.flowing=!0:Z.listenerCount("data")>0&&Z.resume()}function C(Z){v("readable nexttick read 0"),Z.read(0)}pe.prototype.resume=function(){var Z=this._readableState;return Z.flowing||(v("resume"),Z.flowing=!Z.readableListening,V(this,Z)),Z.paused=!1,this};function V(Z,H){H.resumeScheduled||(H.resumeScheduled=!0,process$1.nextTick(O,Z,H))}function O(Z,H){v("resume",H.reading),H.reading||Z.read(0),H.resumeScheduled=!1,Z.emit("resume"),j(Z),H.flowing&&!H.reading&&Z.read(0)}pe.prototype.pause=function(){return v("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(v("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function j(Z){var H=Z._readableState;for(v("flow",H.flowing);H.flowing&&Z.read()!==null;);}pe.prototype.wrap=function(Z){var H=this,ge=this._readableState,Me=!1;Z.on("end",function(){if(v("wrapped end"),ge.decoder&&!ge.ended){var et=ge.decoder.end();et&&et.length&&H.push(et)}H.push(null)}),Z.on("data",function(et){if(v("wrapped data"),ge.decoder&&(et=ge.decoder.write(et)),!(ge.objectMode&&et==null)&&!(!ge.objectMode&&(!et||!et.length))){var Fe=H.push(et);Fe||(Me=!0,Z.pause())}});for(var ke in Z)this[ke]===void 0&&typeof Z[ke]=="function"&&(this[ke]=function(Fe){return function(){return Z[Fe].apply(Z,arguments)}}(ke));for(var Ie=0;Ie<ue.length;Ie++)Z.on(ue[Ie],this.emit.bind(this,ue[Ie]));return this._read=function(et){v("wrapped _read",et),Me&&(Me=!1,Z.resume())},this},typeof Symbol=="function"&&(pe.prototype[Symbol.asyncIterator]=function(){return ee===void 0&&(ee=requireAsync_iterator()),ee(this)}),Object.defineProperty(pe.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(pe.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(pe.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(H){this._readableState&&(this._readableState.flowing=H)}}),pe._fromList=D,Object.defineProperty(pe.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function D(Z,H){if(H.length===0)return null;var ge;return H.objectMode?ge=H.buffer.shift():!Z||Z>=H.length?(H.decoder?ge=H.buffer.join(""):H.buffer.length===1?ge=H.buffer.first():ge=H.buffer.concat(H.length),H.buffer.clear()):ge=H.buffer.consume(Z,H.decoder),ge}function Q(Z){var H=Z._readableState;v("endReadable",H.endEmitted),H.endEmitted||(H.ended=!0,process$1.nextTick(oe,H,Z))}function oe(Z,H){if(v("endReadableNT",Z.endEmitted,Z.length),!Z.endEmitted&&Z.length===0&&(Z.endEmitted=!0,H.readable=!1,H.emit("end"),Z.autoDestroy)){var ge=H._writableState;(!ge||ge.autoDestroy&&ge.finished)&&H.destroy()}}typeof Symbol=="function"&&(pe.from=function(Z,H){return te===void 0&&(te=requireFromBrowser()),te(pe,Z,H)});function de(Z,H){for(var ge=0,Me=Z.length;ge<Me;ge++)if(Z[ge]===H)return ge;return-1}return _stream_readable$1}var _stream_transform$1,hasRequired_stream_transform;function require_stream_transform(){if(hasRequired_stream_transform)return _stream_transform$1;hasRequired_stream_transform=1,_stream_transform$1=b;var t=requireErrorsBrowser().codes,e=t.ERR_METHOD_NOT_IMPLEMENTED,n=t.ERR_MULTIPLE_CALLBACK,o=t.ERR_TRANSFORM_ALREADY_TRANSFORMING,c=t.ERR_TRANSFORM_WITH_LENGTH_0,a=require_stream_duplex$1();inherits_browserExports(b,a);function l(S,M){var B=this._transformState;B.transforming=!1;var P=B.writecb;if(P===null)return this.emit("error",new n);B.writechunk=null,B.writecb=null,M!=null&&this.push(M),P(S);var L=this._readableState;L.reading=!1,(L.needReadable||L.length<L.highWaterMark)&&this._read(L.highWaterMark)}function b(S){if(!(this instanceof b))return new b(S);a.call(this,S),this._transformState={afterTransform:l.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,S&&(typeof S.transform=="function"&&(this._transform=S.transform),typeof S.flush=="function"&&(this._flush=S.flush)),this.on("prefinish",v)}function v(){var S=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(M,B){A(S,M,B)}):A(this,null,null)}b.prototype.push=function(S,M){return this._transformState.needTransform=!1,a.prototype.push.call(this,S,M)},b.prototype._transform=function(S,M,B){B(new e("_transform()"))},b.prototype._write=function(S,M,B){var P=this._transformState;if(P.writecb=B,P.writechunk=S,P.writeencoding=M,!P.transforming){var L=this._readableState;(P.needTransform||L.needReadable||L.length<L.highWaterMark)&&this._read(L.highWaterMark)}},b.prototype._read=function(S){var M=this._transformState;M.writechunk!==null&&!M.transforming?(M.transforming=!0,this._transform(M.writechunk,M.writeencoding,M.afterTransform)):M.needTransform=!0},b.prototype._destroy=function(S,M){a.prototype._destroy.call(this,S,function(B){M(B)})};function A(S,M,B){if(M)return S.emit("error",M);if(B!=null&&S.push(B),S._writableState.length)throw new c;if(S._transformState.transforming)throw new o;return S.push(null)}return _stream_transform$1}var _stream_passthrough$1,hasRequired_stream_passthrough;function require_stream_passthrough(){if(hasRequired_stream_passthrough)return _stream_passthrough$1;hasRequired_stream_passthrough=1,_stream_passthrough$1=e;var t=require_stream_transform();inherits_browserExports(e,t);function e(n){if(!(this instanceof e))return new e(n);t.call(this,n)}return e.prototype._transform=function(n,o,c){c(null,n)},_stream_passthrough$1}var pipeline_1,hasRequiredPipeline;function requirePipeline(){if(hasRequiredPipeline)return pipeline_1;hasRequiredPipeline=1;var t;function e(B){var P=!1;return function(){P||(P=!0,B.apply(void 0,arguments))}}var n=requireErrorsBrowser().codes,o=n.ERR_MISSING_ARGS,c=n.ERR_STREAM_DESTROYED;function a(B){if(B)throw B}function l(B){return B.setHeader&&typeof B.abort=="function"}function b(B,P,L,F){F=e(F);var U=!1;B.on("close",function(){U=!0}),t===void 0&&(t=requireEndOfStream()),t(B,{readable:P,writable:L},function(X){if(X)return F(X);U=!0,F()});var q=!1;return function(X){if(!U&&!q){if(q=!0,l(B))return B.abort();if(typeof B.destroy=="function")return B.destroy();F(X||new c("pipe"))}}}function v(B){B()}function A(B,P){return B.pipe(P)}function S(B){return!B.length||typeof B[B.length-1]!="function"?a:B.pop()}function M(){for(var B=arguments.length,P=new Array(B),L=0;L<B;L++)P[L]=arguments[L];var F=S(P);if(Array.isArray(P[0])&&(P=P[0]),P.length<2)throw new o("streams");var U,q=P.map(function(X,ee){var te=ee<P.length-1,ce=ee>0;return b(X,te,ce,function(ue){U||(U=ue),ue&&q.forEach(v),!te&&(q.forEach(v),F(U))})});return P.reduce(A)}return pipeline_1=M,pipeline_1}var streamBrowserify=Stream$1,EE=eventsExports.EventEmitter,inherits$g=inherits_browserExports;inherits$g(Stream$1,EE);Stream$1.Readable=require_stream_readable$1();Stream$1.Writable=require_stream_writable$1();Stream$1.Duplex=require_stream_duplex$1();Stream$1.Transform=require_stream_transform();Stream$1.PassThrough=require_stream_passthrough();Stream$1.finished=requireEndOfStream();Stream$1.pipeline=requirePipeline();Stream$1.Stream=Stream$1;function Stream$1(){EE.call(this)}Stream$1.prototype.pipe=function(t,e){var n=this;function o(S){t.writable&&t.write(S)===!1&&n.pause&&n.pause()}n.on("data",o);function c(){n.readable&&n.resume&&n.resume()}t.on("drain",c),!t._isStdio&&(!e||e.end!==!1)&&(n.on("end",l),n.on("close",b));var a=!1;function l(){a||(a=!0,t.end())}function b(){a||(a=!0,typeof t.destroy=="function"&&t.destroy())}function v(S){if(A(),EE.listenerCount(this,"error")===0)throw S}n.on("error",v),t.on("error",v);function A(){n.removeListener("data",o),t.removeListener("drain",c),n.removeListener("end",l),n.removeListener("close",b),n.removeListener("error",v),t.removeListener("error",v),n.removeListener("end",A),n.removeListener("close",A),t.removeListener("close",A)}return n.on("end",A),n.on("close",A),t.on("close",A),t.emit("pipe",n),t};var Buffer$r=safeBufferExports$2.Buffer,Transform$6=streamBrowserify.Transform,StringDecoder=string_decoder.StringDecoder,inherits$f=inherits_browserExports;function CipherBase$1(t){Transform$6.call(this),this.hashMode=typeof t=="string",this.hashMode?this[t]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}inherits$f(CipherBase$1,Transform$6);CipherBase$1.prototype.update=function(t,e,n){typeof t=="string"&&(t=Buffer$r.from(t,e));var o=this._update(t);return this.hashMode?this:(n&&(o=this._toString(o,n)),o)};CipherBase$1.prototype.setAutoPadding=function(){};CipherBase$1.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")};CipherBase$1.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")};CipherBase$1.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")};CipherBase$1.prototype._transform=function(t,e,n){var o;try{this.hashMode?this._update(t):this.push(this._update(t))}catch(c){o=c}finally{n(o)}};CipherBase$1.prototype._flush=function(t){var e;try{this.push(this.__final())}catch(n){e=n}t(e)};CipherBase$1.prototype._finalOrDigest=function(t){var e=this.__final()||Buffer$r.alloc(0);return t&&(e=this._toString(e,t,!0)),e};CipherBase$1.prototype._toString=function(t,e,n){if(this._decoder||(this._decoder=new StringDecoder(e),this._encoding=e),this._encoding!==e)throw new Error("can't switch encodings");var o=this._decoder.write(t);return n&&(o+=this._decoder.end()),o};var cipherBase=CipherBase$1,inherits$e=inherits_browserExports,MD5$2=md5_js,RIPEMD160$2=ripemd160,sha$2=sha_jsExports,Base$5=cipherBase;function Hash(t){Base$5.call(this,"digest"),this._hash=t}inherits$e(Hash,Base$5);Hash.prototype._update=function(t){this._hash.update(t)};Hash.prototype._final=function(){return this._hash.digest()};var browser$d=function(e){return e=e.toLowerCase(),e==="md5"?new MD5$2:e==="rmd160"||e==="ripemd160"?new RIPEMD160$2:new Hash(sha$2(e))},_Buffer$2=safeBufferExports$2.Buffer;function base$7(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),n=0;n<e.length;n++)e[n]=255;for(var o=0;o<t.length;o++){var c=t.charAt(o),a=c.charCodeAt(0);if(e[a]!==255)throw new TypeError(c+" is ambiguous");e[a]=o}var l=t.length,b=t.charAt(0),v=Math.log(l)/Math.log(256),A=Math.log(256)/Math.log(l);function S(P){if((Array.isArray(P)||P instanceof Uint8Array)&&(P=_Buffer$2.from(P)),!_Buffer$2.isBuffer(P))throw new TypeError("Expected Buffer");if(P.length===0)return"";for(var L=0,F=0,U=0,q=P.length;U!==q&&P[U]===0;)U++,L++;for(var X=(q-U)*A+1>>>0,ee=new Uint8Array(X);U!==q;){for(var te=P[U],ce=0,ue=X-1;(te!==0||ce<F)&&ue!==-1;ue--,ce++)te+=256*ee[ue]>>>0,ee[ue]=te%l>>>0,te=te/l>>>0;if(te!==0)throw new Error("Non-zero carry");F=ce,U++}for(var Ae=X-F;Ae!==X&&ee[Ae]===0;)Ae++;for(var we=b.repeat(L);Ae<X;++Ae)we+=t.charAt(ee[Ae]);return we}function M(P){if(typeof P!="string")throw new TypeError("Expected String");if(P.length===0)return _Buffer$2.alloc(0);for(var L=0,F=0,U=0;P[L]===b;)F++,L++;for(var q=(P.length-L)*v+1>>>0,X=new Uint8Array(q);P[L];){var ee=e[P.charCodeAt(L)];if(ee===255)return;for(var te=0,ce=q-1;(ee!==0||te<U)&&ce!==-1;ce--,te++)ee+=l*X[ce]>>>0,X[ce]=ee%256>>>0,ee=ee/256>>>0;if(ee!==0)throw new Error("Non-zero carry");U=te,L++}for(var ue=q-U;ue!==q&&X[ue]===0;)ue++;var Ae=_Buffer$2.allocUnsafe(F+(q-ue));Ae.fill(0,0,F);for(var we=F;ue!==q;)Ae[we++]=X[ue++];return Ae}function B(P){var L=M(P);if(L)return L;throw new Error("Non-base"+l+" character")}return{encode:S,decodeUnsafe:M,decode:B}}var src$4=base$7,basex$3=src$4,ALPHABET$4="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",bs58$4=basex$3(ALPHABET$4),base58$1=bs58$4,Buffer$q=safeBufferExports$2.Buffer,base$6=function(t){function e(a){var l=t(a);return base58$1.encode(Buffer$q.concat([a,l],a.length+4))}function n(a){var l=a.slice(0,-4),b=a.slice(-4),v=t(l);if(!(b[0]^v[0]|b[1]^v[1]|b[2]^v[2]|b[3]^v[3]))return l}function o(a){var l=base58$1.decodeUnsafe(a);if(l)return n(l)}function c(a){var l=base58$1.decode(a),b=n(l);if(!b)throw new Error("Invalid checksum");return b}return{encode:e,decode:c,decodeUnsafe:o}},createHash$3=browser$d,bs58checkBase$1=base$6;function sha256x2$1(t){var e=createHash$3("sha256").update(t).digest();return createHash$3("sha256").update(e).digest()}var bs58check$6=bs58checkBase$1(sha256x2$1),bs58check$5=bs58check$6;function decodeRaw(t,e){if(e!==void 0&&t[0]!==e)throw new Error("Invalid network version");if(t.length===33)return{version:t[0],privateKey:t.slice(1,33),compressed:!1};if(t.length!==34)throw new Error("Invalid WIF length");if(t[33]!==1)throw new Error("Invalid compression flag");return{version:t[0],privateKey:t.slice(1,33),compressed:!0}}function encodeRaw(t,e,n){var o=new Buffer$1$1(n?34:33);return o.writeUInt8(t,0),e.copy(o,1),n&&(o[33]=1),o}function decode$j(t,e){return decodeRaw(bs58check$5.decode(t),e)}function encode$k(t,e,n){return typeof t=="number"?bs58check$5.encode(encodeRaw(t,e,n)):bs58check$5.encode(encodeRaw(t.version,t.privateKey,t.compressed))}var wif$1={decode:decode$j,decodeRaw,encode:encode$k,encodeRaw};Object.defineProperty(bip32,"__esModule",{value:!0});bip32.BIP32Factory=void 0;const crypto$4=crypto$5,testecc_1=testecc,base_1=lib$2,sha256_1=sha256$4,typeforce$4=typeforce_1,wif=wif$1,_bs58check=(0,base_1.base58check)(sha256_1.sha256),bs58check$4={encode:t=>_bs58check.encode(Uint8Array.from(t)),decode:t=>Buffer$1$1.from(_bs58check.decode(t))};function BIP32Factory(t){(0,testecc_1.testEcc)(t);const e=typeforce$4.BufferN(32),n=typeforce$4.compile({wif:typeforce$4.UInt8,bip32:{public:typeforce$4.UInt32,private:typeforce$4.UInt32}}),o={messagePrefix:`Bitcoin Signed Message:
`,bech32:"bc",bip32:{public:76067358,private:76066276},pubKeyHash:0,scriptHash:5,wif:128},c=2147483648,a=Math.pow(2,31)-1;function l(q){return typeforce$4.String(q)&&q.match(/^(m\/)?(\d+'?\/)*\d+'?$/)!==null}function b(q){return typeforce$4.UInt32(q)&&q<=a}function v(q){return q.length===32?q:q.slice(1,33)}class A{constructor(X,ee){this.__D=X,this.__Q=ee,this.lowR=!1}get publicKey(){return this.__Q===void 0&&(this.__Q=Buffer$1$1.from(t.pointFromScalar(this.__D,!0))),this.__Q}get privateKey(){return this.__D}sign(X,ee){if(!this.privateKey)throw new Error("Missing private key");if(ee===void 0&&(ee=this.lowR),ee===!1)return Buffer$1$1.from(t.sign(X,this.privateKey));{let te=Buffer$1$1.from(t.sign(X,this.privateKey));const ce=Buffer$1$1.alloc(32,0);let ue=0;for(;te[0]>127;)ue++,ce.writeUIntLE(ue,0,6),te=Buffer$1$1.from(t.sign(X,this.privateKey,ce));return te}}signSchnorr(X){if(!this.privateKey)throw new Error("Missing private key");if(!t.signSchnorr)throw new Error("signSchnorr not supported by ecc library");return Buffer$1$1.from(t.signSchnorr(X,this.privateKey))}verify(X,ee){return t.verify(X,this.publicKey,ee)}verifySchnorr(X,ee){if(!t.verifySchnorr)throw new Error("verifySchnorr not supported by ecc library");return t.verifySchnorr(X,this.publicKey.subarray(1,33),ee)}}class S extends A{constructor(X,ee,te,ce,ue=0,Ae=0,we=0){super(X,ee),this.chainCode=te,this.network=ce,this.__DEPTH=ue,this.__INDEX=Ae,this.__PARENT_FINGERPRINT=we,typeforce$4(n,ce)}get depth(){return this.__DEPTH}get index(){return this.__INDEX}get parentFingerprint(){return this.__PARENT_FINGERPRINT}get identifier(){return crypto$4.hash160(this.publicKey)}get fingerprint(){return this.identifier.slice(0,4)}get compressed(){return!0}isNeutered(){return this.__D===void 0}neutered(){return F(this.publicKey,this.chainCode,this.network,this.depth,this.index,this.parentFingerprint)}toBase58(){const X=this.network,ee=this.isNeutered()?X.bip32.public:X.bip32.private,te=Buffer$1$1.allocUnsafe(78);return te.writeUInt32BE(ee,0),te.writeUInt8(this.depth,4),te.writeUInt32BE(this.parentFingerprint,5),te.writeUInt32BE(this.index,9),this.chainCode.copy(te,13),this.isNeutered()?this.publicKey.copy(te,45):(te.writeUInt8(0,45),this.privateKey.copy(te,46)),bs58check$4.encode(te)}toWIF(){if(!this.privateKey)throw new TypeError("Missing private key");return wif.encode(this.network.wif,this.privateKey,!0)}derive(X){typeforce$4(typeforce$4.UInt32,X);const ee=X>=c,te=Buffer$1$1.allocUnsafe(37);if(ee){if(this.isNeutered())throw new TypeError("Missing private key for hardened child key");te[0]=0,this.privateKey.copy(te,1),te.writeUInt32BE(X,33)}else this.publicKey.copy(te,0),te.writeUInt32BE(X,33);const ce=crypto$4.hmacSHA512(this.chainCode,te),ue=ce.slice(0,32),Ae=ce.slice(32);if(!t.isPrivate(ue))return this.derive(X+1);let we;if(this.isNeutered()){const pe=Buffer$1$1.from(t.pointAddScalar(this.publicKey,ue,!0));if(pe===null)return this.derive(X+1);we=F(pe,Ae,this.network,this.depth+1,X,this.fingerprint.readUInt32BE(0))}else{const pe=Buffer$1$1.from(t.privateAdd(this.privateKey,ue));if(pe==null)return this.derive(X+1);we=P(pe,Ae,this.network,this.depth+1,X,this.fingerprint.readUInt32BE(0))}return we}deriveHardened(X){return typeforce$4(b,X),this.derive(X+c)}derivePath(X){typeforce$4(l,X);let ee=X.split("/");if(ee[0]==="m"){if(this.parentFingerprint)throw new TypeError("Expected master, got child");ee=ee.slice(1)}return ee.reduce((te,ce)=>{let ue;return ce.slice(-1)==="'"?(ue=parseInt(ce.slice(0,-1),10),te.deriveHardened(ue)):(ue=parseInt(ce,10),te.derive(ue))},this)}tweak(X){return this.privateKey?this.tweakFromPrivateKey(X):this.tweakFromPublicKey(X)}tweakFromPublicKey(X){const ee=v(this.publicKey);if(!t.xOnlyPointAddTweak)throw new Error("xOnlyPointAddTweak not supported by ecc library");const te=t.xOnlyPointAddTweak(ee,X);if(!te||te.xOnlyPubkey===null)throw new Error("Cannot tweak public key!");const ce=Buffer$1$1.from([te.parity===0?2:3]),ue=Buffer$1$1.concat([ce,te.xOnlyPubkey]);return new A(void 0,ue)}tweakFromPrivateKey(X){const ee=this.publicKey[0]===3||this.publicKey[0]===4&&(this.publicKey[64]&1)===1,te=(()=>{if(ee){if(t.privateNegate)return t.privateNegate(this.privateKey);throw new Error("privateNegate not supported by ecc library")}else return this.privateKey})(),ce=t.privateAdd(te,X);if(!ce)throw new Error("Invalid tweaked private key!");return new A(Buffer$1$1.from(ce),void 0)}}function M(q,X){const ee=bs58check$4.decode(q);if(ee.length!==78)throw new TypeError("Invalid buffer length");X=X||o;const te=ee.readUInt32BE(0);if(te!==X.bip32.private&&te!==X.bip32.public)throw new TypeError("Invalid network version");const ce=ee[4],ue=ee.readUInt32BE(5);if(ce===0&&ue!==0)throw new TypeError("Invalid parent fingerprint");const Ae=ee.readUInt32BE(9);if(ce===0&&Ae!==0)throw new TypeError("Invalid index");const we=ee.slice(13,45);let pe;if(te===X.bip32.private){if(ee.readUInt8(45)!==0)throw new TypeError("Invalid private key");const Ce=ee.slice(46,78);pe=P(Ce,we,X,ce,Ae,ue)}else{const Ce=ee.slice(45,78);pe=F(Ce,we,X,ce,Ae,ue)}return pe}function B(q,X,ee){return P(q,X,ee)}function P(q,X,ee,te,ce,ue){if(typeforce$4({privateKey:e,chainCode:e},{privateKey:q,chainCode:X}),ee=ee||o,!t.isPrivate(q))throw new TypeError("Private key not in range [1, n)");return new S(q,void 0,X,ee,te,ce,ue)}function L(q,X,ee){return F(q,X,ee)}function F(q,X,ee,te,ce,ue){if(typeforce$4({publicKey:typeforce$4.BufferN(33),chainCode:e},{publicKey:q,chainCode:X}),ee=ee||o,!t.isPoint(q))throw new TypeError("Point is not on the curve");return new S(void 0,q,X,ee,te,ce,ue)}function U(q,X){if(typeforce$4(typeforce$4.Buffer,q),q.length<16)throw new TypeError("Seed should be at least 128 bits");if(q.length>64)throw new TypeError("Seed should be at most 512 bits");X=X||o;const ee=crypto$4.hmacSHA512(Buffer$1$1.from("Bitcoin seed","utf8"),q),te=ee.slice(0,32),ce=ee.slice(32);return B(te,ce,X)}return{fromSeed:U,fromBase58:M,fromPublicKey:L,fromPrivateKey:B}}bip32.BIP32Factory=BIP32Factory;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.BIP32Factory=t.default=void 0;var e=bip32;Object.defineProperty(t,"default",{enumerable:!0,get:function(){return e.BIP32Factory}}),Object.defineProperty(t,"BIP32Factory",{enumerable:!0,get:function(){return e.BIP32Factory}})})(src$5);var src$3={},address={},networks$1={};Object.defineProperty(networks$1,"__esModule",{value:!0});networks$1.testnet=networks$1.regtest=networks$1.bitcoin=void 0;networks$1.bitcoin={messagePrefix:`Bitcoin Signed Message:
`,bech32:"bc",bip32:{public:76067358,private:76066276},pubKeyHash:0,scriptHash:5,wif:128};networks$1.regtest={messagePrefix:`Bitcoin Signed Message:
`,bech32:"bcrt",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239};networks$1.testnet={messagePrefix:`Bitcoin Signed Message:
`,bech32:"tb",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239};var payments$3={},embed={},script={},bip66$1={};Object.defineProperty(bip66$1,"__esModule",{value:!0});bip66$1.encode=bip66$1.decode=bip66$1.check=void 0;function check$d(t){if(t.length<8||t.length>72||t[0]!==48||t[1]!==t.length-2||t[2]!==2)return!1;const e=t[3];if(e===0||5+e>=t.length||t[4+e]!==2)return!1;const n=t[5+e];return!(n===0||6+e+n!==t.length||t[4]&128||e>1&&t[4]===0&&!(t[5]&128)||t[e+6]&128||n>1&&t[e+6]===0&&!(t[e+7]&128))}bip66$1.check=check$d;function decode$i(t){if(t.length<8)throw new Error("DER sequence length is too short");if(t.length>72)throw new Error("DER sequence length is too long");if(t[0]!==48)throw new Error("Expected DER sequence");if(t[1]!==t.length-2)throw new Error("DER sequence length is invalid");if(t[2]!==2)throw new Error("Expected DER integer");const e=t[3];if(e===0)throw new Error("R length is zero");if(5+e>=t.length)throw new Error("R length is too long");if(t[4+e]!==2)throw new Error("Expected DER integer (2)");const n=t[5+e];if(n===0)throw new Error("S length is zero");if(6+e+n!==t.length)throw new Error("S length is invalid");if(t[4]&128)throw new Error("R value is negative");if(e>1&&t[4]===0&&!(t[5]&128))throw new Error("R value excessively padded");if(t[e+6]&128)throw new Error("S value is negative");if(n>1&&t[e+6]===0&&!(t[e+7]&128))throw new Error("S value excessively padded");return{r:t.slice(4,4+e),s:t.slice(6+e)}}bip66$1.decode=decode$i;function encode$j(t,e){const n=t.length,o=e.length;if(n===0)throw new Error("R length is zero");if(o===0)throw new Error("S length is zero");if(n>33)throw new Error("R length is too long");if(o>33)throw new Error("S length is too long");if(t[0]&128)throw new Error("R value is negative");if(e[0]&128)throw new Error("S value is negative");if(n>1&&t[0]===0&&!(t[1]&128))throw new Error("R value excessively padded");if(o>1&&e[0]===0&&!(e[1]&128))throw new Error("S value excessively padded");const c=Buffer$1$1.allocUnsafe(6+n+o);return c[0]=48,c[1]=c.length-2,c[2]=2,c[3]=t.length,t.copy(c,4),c[4+n]=2,c[5+n]=e.length,e.copy(c,6+n),c}bip66$1.encode=encode$j;var ops={};Object.defineProperty(ops,"__esModule",{value:!0});ops.REVERSE_OPS=ops.OPS=void 0;const OPS$8={OP_FALSE:0,OP_0:0,OP_PUSHDATA1:76,OP_PUSHDATA2:77,OP_PUSHDATA4:78,OP_1NEGATE:79,OP_RESERVED:80,OP_TRUE:81,OP_1:81,OP_2:82,OP_3:83,OP_4:84,OP_5:85,OP_6:86,OP_7:87,OP_8:88,OP_9:89,OP_10:90,OP_11:91,OP_12:92,OP_13:93,OP_14:94,OP_15:95,OP_16:96,OP_NOP:97,OP_VER:98,OP_IF:99,OP_NOTIF:100,OP_VERIF:101,OP_VERNOTIF:102,OP_ELSE:103,OP_ENDIF:104,OP_VERIFY:105,OP_RETURN:106,OP_TOALTSTACK:107,OP_FROMALTSTACK:108,OP_2DROP:109,OP_2DUP:110,OP_3DUP:111,OP_2OVER:112,OP_2ROT:113,OP_2SWAP:114,OP_IFDUP:115,OP_DEPTH:116,OP_DROP:117,OP_DUP:118,OP_NIP:119,OP_OVER:120,OP_PICK:121,OP_ROLL:122,OP_ROT:123,OP_SWAP:124,OP_TUCK:125,OP_CAT:126,OP_SUBSTR:127,OP_LEFT:128,OP_RIGHT:129,OP_SIZE:130,OP_INVERT:131,OP_AND:132,OP_OR:133,OP_XOR:134,OP_EQUAL:135,OP_EQUALVERIFY:136,OP_RESERVED1:137,OP_RESERVED2:138,OP_1ADD:139,OP_1SUB:140,OP_2MUL:141,OP_2DIV:142,OP_NEGATE:143,OP_ABS:144,OP_NOT:145,OP_0NOTEQUAL:146,OP_ADD:147,OP_SUB:148,OP_MUL:149,OP_DIV:150,OP_MOD:151,OP_LSHIFT:152,OP_RSHIFT:153,OP_BOOLAND:154,OP_BOOLOR:155,OP_NUMEQUAL:156,OP_NUMEQUALVERIFY:157,OP_NUMNOTEQUAL:158,OP_LESSTHAN:159,OP_GREATERTHAN:160,OP_LESSTHANOREQUAL:161,OP_GREATERTHANOREQUAL:162,OP_MIN:163,OP_MAX:164,OP_WITHIN:165,OP_RIPEMD160:166,OP_SHA1:167,OP_SHA256:168,OP_HASH160:169,OP_HASH256:170,OP_CODESEPARATOR:171,OP_CHECKSIG:172,OP_CHECKSIGVERIFY:173,OP_CHECKMULTISIG:174,OP_CHECKMULTISIGVERIFY:175,OP_NOP1:176,OP_NOP2:177,OP_CHECKLOCKTIMEVERIFY:177,OP_NOP3:178,OP_CHECKSEQUENCEVERIFY:178,OP_NOP4:179,OP_NOP5:180,OP_NOP6:181,OP_NOP7:182,OP_NOP8:183,OP_NOP9:184,OP_NOP10:185,OP_CHECKSIGADD:186,OP_PUBKEYHASH:253,OP_PUBKEY:254,OP_INVALIDOPCODE:255};ops.OPS=OPS$8;const REVERSE_OPS={};ops.REVERSE_OPS=REVERSE_OPS;for(const t of Object.keys(OPS$8)){const e=OPS$8[t];REVERSE_OPS[e]=t}var push_data={};Object.defineProperty(push_data,"__esModule",{value:!0});push_data.decode=push_data.encode=push_data.encodingLength=void 0;const ops_1=ops;function encodingLength$2(t){return t<ops_1.OPS.OP_PUSHDATA1?1:t<=255?2:t<=65535?3:5}push_data.encodingLength=encodingLength$2;function encode$i(t,e,n){const o=encodingLength$2(e);return o===1?t.writeUInt8(e,n):o===2?(t.writeUInt8(ops_1.OPS.OP_PUSHDATA1,n),t.writeUInt8(e,n+1)):o===3?(t.writeUInt8(ops_1.OPS.OP_PUSHDATA2,n),t.writeUInt16LE(e,n+1)):(t.writeUInt8(ops_1.OPS.OP_PUSHDATA4,n),t.writeUInt32LE(e,n+1)),o}push_data.encode=encode$i;function decode$h(t,e){const n=t.readUInt8(e);let o,c;if(n<ops_1.OPS.OP_PUSHDATA1)o=n,c=1;else if(n===ops_1.OPS.OP_PUSHDATA1){if(e+2>t.length)return null;o=t.readUInt8(e+1),c=2}else if(n===ops_1.OPS.OP_PUSHDATA2){if(e+3>t.length)return null;o=t.readUInt16LE(e+1),c=3}else{if(e+5>t.length)return null;if(n!==ops_1.OPS.OP_PUSHDATA4)throw new Error("Unexpected opcode");o=t.readUInt32LE(e+1),c=5}return{opcode:n,number:o,size:c}}push_data.decode=decode$h;var script_number={};Object.defineProperty(script_number,"__esModule",{value:!0});script_number.encode=script_number.decode=void 0;function decode$g(t,e,n){e=e||4,n=n===void 0?!0:n;const o=t.length;if(o===0)return 0;if(o>e)throw new TypeError("Script number overflow");if(n&&!(t[o-1]&127)&&(o<=1||!(t[o-2]&128)))throw new Error("Non-minimally encoded script number");if(o===5){const a=t.readUInt32LE(0),l=t.readUInt8(4);return l&128?-((l&-129)*4294967296+a):l*4294967296+a}let c=0;for(let a=0;a<o;++a)c|=t[a]<<8*a;return t[o-1]&128?-(c&~(128<<8*(o-1))):c}script_number.decode=decode$g;function scriptNumSize(t){return t>2147483647?5:t>8388607?4:t>32767?3:t>127?2:t>0?1:0}function encode$h(t){let e=Math.abs(t);const n=scriptNumSize(e),o=Buffer$1$1.allocUnsafe(n),c=t<0;for(let a=0;a<n;++a)o.writeUInt8(e&255,a),e>>=8;return o[n-1]&128?o.writeUInt8(c?128:0,n-1):c&&(o[n-1]|=128),o}script_number.encode=encode$h;var script_signature={},types$4={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.oneOf=t.Null=t.BufferN=t.Function=t.UInt32=t.UInt8=t.tuple=t.maybe=t.Hex=t.Buffer=t.String=t.Boolean=t.Array=t.Number=t.Hash256bit=t.Hash160bit=t.Buffer256bit=t.isTaptree=t.isTapleaf=t.TAPLEAF_VERSION_MASK=t.Network=t.ECPoint=t.Satoshi=t.Signer=t.BIP32Path=t.UInt31=t.isPoint=t.typeforce=void 0;const e=require$$0$3;t.typeforce=typeforce_1;const n=e.Buffer.alloc(32,0),o=e.Buffer.from("fffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f","hex");function c(P){if(!e.Buffer.isBuffer(P)||P.length<33)return!1;const L=P[0],F=P.slice(1,33);if(F.compare(n)===0||F.compare(o)>=0)return!1;if((L===2||L===3)&&P.length===33)return!0;const U=P.slice(33);return U.compare(n)===0||U.compare(o)>=0?!1:L===4&&P.length===65}t.isPoint=c;const a=Math.pow(2,31)-1;function l(P){return t.typeforce.UInt32(P)&&P<=a}t.UInt31=l;function b(P){return t.typeforce.String(P)&&!!P.match(/^(m\/)?(\d+'?\/)*\d+'?$/)}t.BIP32Path=b,b.toJSON=()=>"BIP32 derivation path";function v(P){return(t.typeforce.Buffer(P.publicKey)||typeof P.getPublicKey=="function")&&typeof P.sign=="function"}t.Signer=v;const A=21*1e14;function S(P){return t.typeforce.UInt53(P)&&P<=A}t.Satoshi=S,t.ECPoint=t.typeforce.quacksLike("Point"),t.Network=t.typeforce.compile({messagePrefix:t.typeforce.oneOf(t.typeforce.Buffer,t.typeforce.String),bip32:{public:t.typeforce.UInt32,private:t.typeforce.UInt32},pubKeyHash:t.typeforce.UInt8,scriptHash:t.typeforce.UInt8,wif:t.typeforce.UInt8}),t.TAPLEAF_VERSION_MASK=254;function M(P){return!P||!("output"in P)||!e.Buffer.isBuffer(P.output)?!1:P.version!==void 0?(P.version&t.TAPLEAF_VERSION_MASK)===P.version:!0}t.isTapleaf=M;function B(P){return(0,t.Array)(P)?P.length!==2?!1:P.every(L=>B(L)):M(P)}t.isTaptree=B,t.Buffer256bit=t.typeforce.BufferN(32),t.Hash160bit=t.typeforce.BufferN(20),t.Hash256bit=t.typeforce.BufferN(32),t.Number=t.typeforce.Number,t.Array=t.typeforce.Array,t.Boolean=t.typeforce.Boolean,t.String=t.typeforce.String,t.Buffer=t.typeforce.Buffer,t.Hex=t.typeforce.Hex,t.maybe=t.typeforce.maybe,t.tuple=t.typeforce.tuple,t.UInt8=t.typeforce.UInt8,t.UInt32=t.typeforce.UInt32,t.Function=t.typeforce.Function,t.BufferN=t.typeforce.BufferN,t.Null=t.typeforce.Null,t.oneOf=t.typeforce.oneOf})(types$4);Object.defineProperty(script_signature,"__esModule",{value:!0});script_signature.encode=script_signature.decode=void 0;const bip66=bip66$1,types$3=types$4,{typeforce:typeforce$3}=types$3,ZERO$1=Buffer$1$1.alloc(1,0);function toDER(t){let e=0;for(;t[e]===0;)++e;return e===t.length?ZERO$1:(t=t.slice(e),t[0]&128?Buffer$1$1.concat([ZERO$1,t],1+t.length):t)}function fromDER(t){t[0]===0&&(t=t.slice(1));const e=Buffer$1$1.alloc(32,0),n=Math.max(0,32-t.length);return t.copy(e,n),e}function decode$f(t){const e=t.readUInt8(t.length-1),n=e&-129;if(n<=0||n>=4)throw new Error("Invalid hashType "+e);const o=bip66.decode(t.slice(0,-1)),c=fromDER(o.r),a=fromDER(o.s);return{signature:Buffer$1$1.concat([c,a],64),hashType:e}}script_signature.decode=decode$f;function encode$g(t,e){typeforce$3({signature:types$3.BufferN(64),hashType:types$3.UInt8},{signature:t,hashType:e});const n=e&-129;if(n<=0||n>=4)throw new Error("Invalid hashType "+e);const o=Buffer$1$1.allocUnsafe(1);o.writeUInt8(e,0);const c=toDER(t.slice(0,32)),a=toDER(t.slice(32,64));return Buffer$1$1.concat([bip66.encode(c,a),o])}script_signature.encode=encode$g;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.signature=t.number=t.isCanonicalScriptSignature=t.isDefinedHashType=t.isCanonicalPubKey=t.toStack=t.fromASM=t.toASM=t.decompile=t.compile=t.countNonPushOnlyOPs=t.isPushOnly=t.OPS=void 0;const e=bip66$1,n=ops;Object.defineProperty(t,"OPS",{enumerable:!0,get:function(){return n.OPS}});const o=push_data,c=script_number,a=script_signature,l=types$4,{typeforce:b}=l,v=n.OPS.OP_RESERVED;function A(pe){return l.Number(pe)&&(pe===n.OPS.OP_0||pe>=n.OPS.OP_1&&pe<=n.OPS.OP_16||pe===n.OPS.OP_1NEGATE)}function S(pe){return l.Buffer(pe)||A(pe)}function M(pe){return l.Array(pe)&&pe.every(S)}t.isPushOnly=M;function B(pe){return pe.length-pe.filter(S).length}t.countNonPushOnlyOPs=B;function P(pe){if(pe.length===0)return n.OPS.OP_0;if(pe.length===1){if(pe[0]>=1&&pe[0]<=16)return v+pe[0];if(pe[0]===129)return n.OPS.OP_1NEGATE}}function L(pe){return Buffer$1$1.isBuffer(pe)}function F(pe){return l.Array(pe)}function U(pe){return Buffer$1$1.isBuffer(pe)}function q(pe){if(L(pe))return pe;b(l.Array,pe);const Ce=pe.reduce((p,m)=>U(m)?m.length===1&&P(m)!==void 0?p+1:p+o.encodingLength(m.length)+m.length:p+1,0),T=Buffer$1$1.allocUnsafe(Ce);let u=0;if(pe.forEach(p=>{if(U(p)){const m=P(p);if(m!==void 0){T.writeUInt8(m,u),u+=1;return}u+=o.encode(T,p.length,u),p.copy(T,u),u+=p.length}else T.writeUInt8(p,u),u+=1}),u!==T.length)throw new Error("Could not decode chunks");return T}t.compile=q;function X(pe){if(F(pe))return pe;b(l.Buffer,pe);const Ce=[];let T=0;for(;T<pe.length;){const u=pe[T];if(u>n.OPS.OP_0&&u<=n.OPS.OP_PUSHDATA4){const p=o.decode(pe,T);if(p===null||(T+=p.size,T+p.number>pe.length))return null;const m=pe.slice(T,T+p.number);T+=p.number;const y=P(m);y!==void 0?Ce.push(y):Ce.push(m)}else Ce.push(u),T+=1}return Ce}t.decompile=X;function ee(pe){return L(pe)&&(pe=X(pe)),pe.map(Ce=>{if(U(Ce)){const T=P(Ce);if(T===void 0)return Ce.toString("hex");Ce=T}return n.REVERSE_OPS[Ce]}).join(" ")}t.toASM=ee;function te(pe){return b(l.String,pe),q(pe.split(" ").map(Ce=>n.OPS[Ce]!==void 0?n.OPS[Ce]:(b(l.Hex,Ce),Buffer$1$1.from(Ce,"hex"))))}t.fromASM=te;function ce(pe){return pe=X(pe),b(M,pe),pe.map(Ce=>U(Ce)?Ce:Ce===n.OPS.OP_0?Buffer$1$1.allocUnsafe(0):c.encode(Ce-v))}t.toStack=ce;function ue(pe){return l.isPoint(pe)}t.isCanonicalPubKey=ue;function Ae(pe){const Ce=pe&-129;return Ce>0&&Ce<4}t.isDefinedHashType=Ae;function we(pe){return!Buffer$1$1.isBuffer(pe)||!Ae(pe[pe.length-1])?!1:e.check(pe.slice(0,-1))}t.isCanonicalScriptSignature=we,t.number=c,t.signature=a})(script);var lazy$8={};Object.defineProperty(lazy$8,"__esModule",{value:!0});lazy$8.value=lazy$8.prop=void 0;function prop(t,e,n){Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get(){const o=n.call(this);return this[e]=o,o},set(o){Object.defineProperty(this,e,{configurable:!0,enumerable:!0,value:o,writable:!0})}})}lazy$8.prop=prop;function value(t){let e;return()=>(e!==void 0||(e=t()),e)}lazy$8.value=value;Object.defineProperty(embed,"__esModule",{value:!0});embed.p2data=void 0;const networks_1$8=networks$1,bscript$b=script,types_1$9=types$4,lazy$7=lazy$8,OPS$7=bscript$b.OPS;function stacksEqual$4(t,e){return t.length!==e.length?!1:t.every((n,o)=>n.equals(e[o]))}function p2data(t,e){if(!t.data&&!t.output)throw new TypeError("Not enough data");e=Object.assign({validate:!0},e||{}),(0,types_1$9.typeforce)({network:types_1$9.typeforce.maybe(types_1$9.typeforce.Object),output:types_1$9.typeforce.maybe(types_1$9.typeforce.Buffer),data:types_1$9.typeforce.maybe(types_1$9.typeforce.arrayOf(types_1$9.typeforce.Buffer))},t);const o={name:"embed",network:t.network||networks_1$8.bitcoin};if(lazy$7.prop(o,"output",()=>{if(t.data)return bscript$b.compile([OPS$7.OP_RETURN].concat(t.data))}),lazy$7.prop(o,"data",()=>{if(t.output)return bscript$b.decompile(t.output).slice(1)}),e.validate&&t.output){const c=bscript$b.decompile(t.output);if(c[0]!==OPS$7.OP_RETURN)throw new TypeError("Output is invalid");if(!c.slice(1).every(types_1$9.typeforce.Buffer))throw new TypeError("Output is invalid");if(t.data&&!stacksEqual$4(t.data,o.data))throw new TypeError("Data mismatch")}return Object.assign(o,t)}embed.p2data=p2data;var p2ms$1={};Object.defineProperty(p2ms$1,"__esModule",{value:!0});p2ms$1.p2ms=void 0;const networks_1$7=networks$1,bscript$a=script,types_1$8=types$4,lazy$6=lazy$8,OPS$6=bscript$a.OPS,OP_INT_BASE=OPS$6.OP_RESERVED;function stacksEqual$3(t,e){return t.length!==e.length?!1:t.every((n,o)=>n.equals(e[o]))}function p2ms(t,e){if(!t.input&&!t.output&&!(t.pubkeys&&t.m!==void 0)&&!t.signatures)throw new TypeError("Not enough data");e=Object.assign({validate:!0},e||{});function n(v){return bscript$a.isCanonicalScriptSignature(v)||(e.allowIncomplete&&v===OPS$6.OP_0)!==void 0}(0,types_1$8.typeforce)({network:types_1$8.typeforce.maybe(types_1$8.typeforce.Object),m:types_1$8.typeforce.maybe(types_1$8.typeforce.Number),n:types_1$8.typeforce.maybe(types_1$8.typeforce.Number),output:types_1$8.typeforce.maybe(types_1$8.typeforce.Buffer),pubkeys:types_1$8.typeforce.maybe(types_1$8.typeforce.arrayOf(types_1$8.isPoint)),signatures:types_1$8.typeforce.maybe(types_1$8.typeforce.arrayOf(n)),input:types_1$8.typeforce.maybe(types_1$8.typeforce.Buffer)},t);const c={network:t.network||networks_1$7.bitcoin};let a=[],l=!1;function b(v){l||(l=!0,a=bscript$a.decompile(v),c.m=a[0]-OP_INT_BASE,c.n=a[a.length-2]-OP_INT_BASE,c.pubkeys=a.slice(1,-2))}if(lazy$6.prop(c,"output",()=>{if(t.m&&c.n&&t.pubkeys)return bscript$a.compile([].concat(OP_INT_BASE+t.m,t.pubkeys,OP_INT_BASE+c.n,OPS$6.OP_CHECKMULTISIG))}),lazy$6.prop(c,"m",()=>{if(c.output)return b(c.output),c.m}),lazy$6.prop(c,"n",()=>{if(c.pubkeys)return c.pubkeys.length}),lazy$6.prop(c,"pubkeys",()=>{if(t.output)return b(t.output),c.pubkeys}),lazy$6.prop(c,"signatures",()=>{if(t.input)return bscript$a.decompile(t.input).slice(1)}),lazy$6.prop(c,"input",()=>{if(t.signatures)return bscript$a.compile([OPS$6.OP_0].concat(t.signatures))}),lazy$6.prop(c,"witness",()=>{if(c.input)return[]}),lazy$6.prop(c,"name",()=>{if(!(!c.m||!c.n))return`p2ms(${c.m} of ${c.n})`}),e.validate){if(t.output){if(b(t.output),!types_1$8.typeforce.Number(a[0]))throw new TypeError("Output is invalid");if(!types_1$8.typeforce.Number(a[a.length-2]))throw new TypeError("Output is invalid");if(a[a.length-1]!==OPS$6.OP_CHECKMULTISIG)throw new TypeError("Output is invalid");if(c.m<=0||c.n>16||c.m>c.n||c.n!==a.length-3)throw new TypeError("Output is invalid");if(!c.pubkeys.every(v=>(0,types_1$8.isPoint)(v)))throw new TypeError("Output is invalid");if(t.m!==void 0&&t.m!==c.m)throw new TypeError("m mismatch");if(t.n!==void 0&&t.n!==c.n)throw new TypeError("n mismatch");if(t.pubkeys&&!stacksEqual$3(t.pubkeys,c.pubkeys))throw new TypeError("Pubkeys mismatch")}if(t.pubkeys){if(t.n!==void 0&&t.n!==t.pubkeys.length)throw new TypeError("Pubkey count mismatch");if(c.n=t.pubkeys.length,c.n<c.m)throw new TypeError("Pubkey count cannot be less than m")}if(t.signatures){if(t.signatures.length<c.m)throw new TypeError("Not enough signatures provided");if(t.signatures.length>c.m)throw new TypeError("Too many signatures provided")}if(t.input){if(t.input[0]!==OPS$6.OP_0)throw new TypeError("Input is invalid");if(c.signatures.length===0||!c.signatures.every(n))throw new TypeError("Input has invalid signature(s)");if(t.signatures&&!stacksEqual$3(t.signatures,c.signatures))throw new TypeError("Signature mismatch");if(t.m!==void 0&&t.m!==t.signatures.length)throw new TypeError("Signature count mismatch")}}return Object.assign(c,t)}p2ms$1.p2ms=p2ms;var p2pk$1={};Object.defineProperty(p2pk$1,"__esModule",{value:!0});p2pk$1.p2pk=void 0;const networks_1$6=networks$1,bscript$9=script,types_1$7=types$4,lazy$5=lazy$8,OPS$5=bscript$9.OPS;function p2pk(t,e){if(!t.input&&!t.output&&!t.pubkey&&!t.input&&!t.signature)throw new TypeError("Not enough data");e=Object.assign({validate:!0},e||{}),(0,types_1$7.typeforce)({network:types_1$7.typeforce.maybe(types_1$7.typeforce.Object),output:types_1$7.typeforce.maybe(types_1$7.typeforce.Buffer),pubkey:types_1$7.typeforce.maybe(types_1$7.isPoint),signature:types_1$7.typeforce.maybe(bscript$9.isCanonicalScriptSignature),input:types_1$7.typeforce.maybe(types_1$7.typeforce.Buffer)},t);const n=lazy$5.value(()=>bscript$9.decompile(t.input)),c={name:"p2pk",network:t.network||networks_1$6.bitcoin};if(lazy$5.prop(c,"output",()=>{if(t.pubkey)return bscript$9.compile([t.pubkey,OPS$5.OP_CHECKSIG])}),lazy$5.prop(c,"pubkey",()=>{if(t.output)return t.output.slice(1,-1)}),lazy$5.prop(c,"signature",()=>{if(t.input)return n()[0]}),lazy$5.prop(c,"input",()=>{if(t.signature)return bscript$9.compile([t.signature])}),lazy$5.prop(c,"witness",()=>{if(c.input)return[]}),e.validate){if(t.output){if(t.output[t.output.length-1]!==OPS$5.OP_CHECKSIG)throw new TypeError("Output is invalid");if(!(0,types_1$7.isPoint)(c.pubkey))throw new TypeError("Output pubkey is invalid");if(t.pubkey&&!t.pubkey.equals(c.pubkey))throw new TypeError("Pubkey mismatch")}if(t.signature&&t.input&&!t.input.equals(c.input))throw new TypeError("Signature mismatch");if(t.input){if(n().length!==1)throw new TypeError("Input is invalid");if(!bscript$9.isCanonicalScriptSignature(c.signature))throw new TypeError("Input has invalid signature")}}return Object.assign(c,t)}p2pk$1.p2pk=p2pk;var p2pkh$1={},crypto$3={},sha1$2={};Object.defineProperty(sha1$2,"__esModule",{value:!0});sha1$2.sha1=void 0;const _md_js_1=_md,utils_js_1=utils$h,SHA1_IV=new Uint32Array([1732584193,4023233417,2562383102,271733878,3285377520]),SHA1_W=new Uint32Array(80);class SHA1 extends _md_js_1.HashMD{constructor(){super(64,20,8,!1),this.A=SHA1_IV[0]|0,this.B=SHA1_IV[1]|0,this.C=SHA1_IV[2]|0,this.D=SHA1_IV[3]|0,this.E=SHA1_IV[4]|0}get(){const{A:e,B:n,C:o,D:c,E:a}=this;return[e,n,o,c,a]}set(e,n,o,c,a){this.A=e|0,this.B=n|0,this.C=o|0,this.D=c|0,this.E=a|0}process(e,n){for(let v=0;v<16;v++,n+=4)SHA1_W[v]=e.getUint32(n,!1);for(let v=16;v<80;v++)SHA1_W[v]=(0,utils_js_1.rotl)(SHA1_W[v-3]^SHA1_W[v-8]^SHA1_W[v-14]^SHA1_W[v-16],1);let{A:o,B:c,C:a,D:l,E:b}=this;for(let v=0;v<80;v++){let A,S;v<20?(A=(0,_md_js_1.Chi)(c,a,l),S=1518500249):v<40?(A=c^a^l,S=1859775393):v<60?(A=(0,_md_js_1.Maj)(c,a,l),S=2400959708):(A=c^a^l,S=3395469782);const M=(0,utils_js_1.rotl)(o,5)+A+b+S+SHA1_W[v]|0;b=l,l=a,a=(0,utils_js_1.rotl)(c,30),c=o,o=M}o=o+this.A|0,c=c+this.B|0,a=a+this.C|0,l=l+this.D|0,b=b+this.E|0,this.set(o,c,a,l,b)}roundClean(){SHA1_W.fill(0)}destroy(){this.set(0,0,0,0,0),this.buffer.fill(0)}}sha1$2.sha1=(0,utils_js_1.wrapConstructor)(()=>new SHA1);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.taggedHash=t.TAGGED_HASH_PREFIXES=t.TAGS=t.hash256=t.hash160=t.sha256=t.sha1=t.ripemd160=void 0;const e=ripemd160$1,n=sha1$2,o=sha256$4;function c(S){return Buffer$1$1.from((0,e.ripemd160)(Uint8Array.from(S)))}t.ripemd160=c;function a(S){return Buffer$1$1.from((0,n.sha1)(Uint8Array.from(S)))}t.sha1=a;function l(S){return Buffer$1$1.from((0,o.sha256)(Uint8Array.from(S)))}t.sha256=l;function b(S){return Buffer$1$1.from((0,e.ripemd160)((0,o.sha256)(Uint8Array.from(S))))}t.hash160=b;function v(S){return Buffer$1$1.from((0,o.sha256)((0,o.sha256)(Uint8Array.from(S))))}t.hash256=v,t.TAGS=["BIP0340/challenge","BIP0340/aux","BIP0340/nonce","TapLeaf","TapBranch","TapSighash","TapTweak","KeyAgg list","KeyAgg coefficient"],t.TAGGED_HASH_PREFIXES={"BIP0340/challenge":Buffer$1$1.from([123,181,45,122,159,239,88,50,62,177,191,122,64,125,179,130,210,243,242,216,27,177,34,79,73,254,81,143,109,72,211,124,123,181,45,122,159,239,88,50,62,177,191,122,64,125,179,130,210,243,242,216,27,177,34,79,73,254,81,143,109,72,211,124]),"BIP0340/aux":Buffer$1$1.from([241,239,78,94,192,99,202,218,109,148,202,250,157,152,126,160,105,38,88,57,236,193,31,151,45,119,165,46,216,193,204,144,241,239,78,94,192,99,202,218,109,148,202,250,157,152,126,160,105,38,88,57,236,193,31,151,45,119,165,46,216,193,204,144]),"BIP0340/nonce":Buffer$1$1.from([7,73,119,52,167,155,203,53,91,155,140,125,3,79,18,28,244,52,215,62,247,45,218,25,135,0,97,251,82,191,235,47,7,73,119,52,167,155,203,53,91,155,140,125,3,79,18,28,244,52,215,62,247,45,218,25,135,0,97,251,82,191,235,47]),TapLeaf:Buffer$1$1.from([174,234,143,220,66,8,152,49,5,115,75,88,8,29,30,38,56,211,95,28,181,64,8,212,211,87,202,3,190,120,233,238,174,234,143,220,66,8,152,49,5,115,75,88,8,29,30,38,56,211,95,28,181,64,8,212,211,87,202,3,190,120,233,238]),TapBranch:Buffer$1$1.from([25,65,161,242,229,110,185,95,162,169,241,148,190,92,1,247,33,111,51,237,130,176,145,70,52,144,208,91,245,22,160,21,25,65,161,242,229,110,185,95,162,169,241,148,190,92,1,247,33,111,51,237,130,176,145,70,52,144,208,91,245,22,160,21]),TapSighash:Buffer$1$1.from([244,10,72,223,75,42,112,200,180,146,75,242,101,70,97,237,61,149,253,102,163,19,235,135,35,117,151,198,40,228,160,49,244,10,72,223,75,42,112,200,180,146,75,242,101,70,97,237,61,149,253,102,163,19,235,135,35,117,151,198,40,228,160,49]),TapTweak:Buffer$1$1.from([232,15,225,99,156,156,160,80,227,175,27,57,193,67,198,62,66,156,188,235,21,217,64,251,181,197,161,244,175,87,197,233,232,15,225,99,156,156,160,80,227,175,27,57,193,67,198,62,66,156,188,235,21,217,64,251,181,197,161,244,175,87,197,233]),"KeyAgg list":Buffer$1$1.from([72,28,151,28,60,11,70,215,240,178,117,174,89,141,78,44,126,215,49,156,89,74,92,110,199,158,160,212,153,2,148,240,72,28,151,28,60,11,70,215,240,178,117,174,89,141,78,44,126,215,49,156,89,74,92,110,199,158,160,212,153,2,148,240]),"KeyAgg coefficient":Buffer$1$1.from([191,201,4,3,77,28,136,232,200,14,34,229,61,36,86,109,100,130,78,214,66,114,129,192,145,0,249,77,205,82,201,129,191,201,4,3,77,28,136,232,200,14,34,229,61,36,86,109,100,130,78,214,66,114,129,192,145,0,249,77,205,82,201,129])};function A(S,M){return l(Buffer$1$1.concat([t.TAGGED_HASH_PREFIXES[S],M]))}t.taggedHash=A})(crypto$3);function base$5(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),n=0;n<e.length;n++)e[n]=255;for(var o=0;o<t.length;o++){var c=t.charAt(o),a=c.charCodeAt(0);if(e[a]!==255)throw new TypeError(c+" is ambiguous");e[a]=o}var l=t.length,b=t.charAt(0),v=Math.log(l)/Math.log(256),A=Math.log(256)/Math.log(l);function S(P){if(P instanceof Uint8Array||(ArrayBuffer.isView(P)?P=new Uint8Array(P.buffer,P.byteOffset,P.byteLength):Array.isArray(P)&&(P=Uint8Array.from(P))),!(P instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(P.length===0)return"";for(var L=0,F=0,U=0,q=P.length;U!==q&&P[U]===0;)U++,L++;for(var X=(q-U)*A+1>>>0,ee=new Uint8Array(X);U!==q;){for(var te=P[U],ce=0,ue=X-1;(te!==0||ce<F)&&ue!==-1;ue--,ce++)te+=256*ee[ue]>>>0,ee[ue]=te%l>>>0,te=te/l>>>0;if(te!==0)throw new Error("Non-zero carry");F=ce,U++}for(var Ae=X-F;Ae!==X&&ee[Ae]===0;)Ae++;for(var we=b.repeat(L);Ae<X;++Ae)we+=t.charAt(ee[Ae]);return we}function M(P){if(typeof P!="string")throw new TypeError("Expected String");if(P.length===0)return new Uint8Array;for(var L=0,F=0,U=0;P[L]===b;)F++,L++;for(var q=(P.length-L)*v+1>>>0,X=new Uint8Array(q);P[L];){var ee=e[P.charCodeAt(L)];if(ee===255)return;for(var te=0,ce=q-1;(ee!==0||te<U)&&ce!==-1;ce--,te++)ee+=l*X[ce]>>>0,X[ce]=ee%256>>>0,ee=ee/256>>>0;if(ee!==0)throw new Error("Non-zero carry");U=te,L++}for(var ue=q-U;ue!==q&&X[ue]===0;)ue++;for(var Ae=new Uint8Array(F+(q-ue)),we=F;ue!==q;)Ae[we++]=X[ue++];return Ae}function B(P){var L=M(P);if(L)return L;throw new Error("Non-base"+l+" character")}return{encode:S,decodeUnsafe:M,decode:B}}var src$2=base$5;const basex$2=src$2,ALPHABET$3="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";var bs58$3=basex$2(ALPHABET$3),base58=bs58$3,base$4=function(t){function e(a){var l=Uint8Array.from(a),b=t(l),v=l.length+4,A=new Uint8Array(v);return A.set(l,0),A.set(b.subarray(0,4),l.length),base58.encode(A,v)}function n(a){var l=a.slice(0,-4),b=a.slice(-4),v=t(l);if(!(b[0]^v[0]|b[1]^v[1]|b[2]^v[2]|b[3]^v[3]))return l}function o(a){var l=base58.decodeUnsafe(a);if(l)return n(l)}function c(a){var l=base58.decode(a),b=n(l);if(!b)throw new Error("Invalid checksum");return b}return{encode:e,decode:c,decodeUnsafe:o}},{sha256:sha256$2}=sha256$4,bs58checkBase=base$4;function sha256x2(t){return sha256$2(sha256$2(t))}var bs58check$3=bs58checkBase(sha256x2);Object.defineProperty(p2pkh$1,"__esModule",{value:!0});p2pkh$1.p2pkh=void 0;const bcrypto$5=crypto$3,networks_1$5=networks$1,bscript$8=script,types_1$6=types$4,lazy$4=lazy$8,bs58check$2=bs58check$3,OPS$4=bscript$8.OPS;function p2pkh(t,e){if(!t.address&&!t.hash&&!t.output&&!t.pubkey&&!t.input)throw new TypeError("Not enough data");e=Object.assign({validate:!0},e||{}),(0,types_1$6.typeforce)({network:types_1$6.typeforce.maybe(types_1$6.typeforce.Object),address:types_1$6.typeforce.maybe(types_1$6.typeforce.String),hash:types_1$6.typeforce.maybe(types_1$6.typeforce.BufferN(20)),output:types_1$6.typeforce.maybe(types_1$6.typeforce.BufferN(25)),pubkey:types_1$6.typeforce.maybe(types_1$6.isPoint),signature:types_1$6.typeforce.maybe(bscript$8.isCanonicalScriptSignature),input:types_1$6.typeforce.maybe(types_1$6.typeforce.Buffer)},t);const n=lazy$4.value(()=>{const l=Buffer$1$1.from(bs58check$2.decode(t.address)),b=l.readUInt8(0),v=l.slice(1);return{version:b,hash:v}}),o=lazy$4.value(()=>bscript$8.decompile(t.input)),c=t.network||networks_1$5.bitcoin,a={name:"p2pkh",network:c};if(lazy$4.prop(a,"address",()=>{if(!a.hash)return;const l=Buffer$1$1.allocUnsafe(21);return l.writeUInt8(c.pubKeyHash,0),a.hash.copy(l,1),bs58check$2.encode(l)}),lazy$4.prop(a,"hash",()=>{if(t.output)return t.output.slice(3,23);if(t.address)return n().hash;if(t.pubkey||a.pubkey)return bcrypto$5.hash160(t.pubkey||a.pubkey)}),lazy$4.prop(a,"output",()=>{if(a.hash)return bscript$8.compile([OPS$4.OP_DUP,OPS$4.OP_HASH160,a.hash,OPS$4.OP_EQUALVERIFY,OPS$4.OP_CHECKSIG])}),lazy$4.prop(a,"pubkey",()=>{if(t.input)return o()[1]}),lazy$4.prop(a,"signature",()=>{if(t.input)return o()[0]}),lazy$4.prop(a,"input",()=>{if(t.pubkey&&t.signature)return bscript$8.compile([t.signature,t.pubkey])}),lazy$4.prop(a,"witness",()=>{if(a.input)return[]}),e.validate){let l=Buffer$1$1.from([]);if(t.address){if(n().version!==c.pubKeyHash)throw new TypeError("Invalid version or Network mismatch");if(n().hash.length!==20)throw new TypeError("Invalid address");l=n().hash}if(t.hash){if(l.length>0&&!l.equals(t.hash))throw new TypeError("Hash mismatch");l=t.hash}if(t.output){if(t.output.length!==25||t.output[0]!==OPS$4.OP_DUP||t.output[1]!==OPS$4.OP_HASH160||t.output[2]!==20||t.output[23]!==OPS$4.OP_EQUALVERIFY||t.output[24]!==OPS$4.OP_CHECKSIG)throw new TypeError("Output is invalid");const b=t.output.slice(3,23);if(l.length>0&&!l.equals(b))throw new TypeError("Hash mismatch");l=b}if(t.pubkey){const b=bcrypto$5.hash160(t.pubkey);if(l.length>0&&!l.equals(b))throw new TypeError("Hash mismatch");l=b}if(t.input){const b=o();if(b.length!==2)throw new TypeError("Input is invalid");if(!bscript$8.isCanonicalScriptSignature(b[0]))throw new TypeError("Input has invalid signature");if(!(0,types_1$6.isPoint)(b[1]))throw new TypeError("Input has invalid pubkey");if(t.signature&&!t.signature.equals(b[0]))throw new TypeError("Signature mismatch");if(t.pubkey&&!t.pubkey.equals(b[1]))throw new TypeError("Pubkey mismatch");const v=bcrypto$5.hash160(b[1]);if(l.length>0&&!l.equals(v))throw new TypeError("Hash mismatch")}}return Object.assign(a,t)}p2pkh$1.p2pkh=p2pkh;var p2sh$1={};Object.defineProperty(p2sh$1,"__esModule",{value:!0});p2sh$1.p2sh=void 0;const bcrypto$4=crypto$3,networks_1$4=networks$1,bscript$7=script,types_1$5=types$4,lazy$3=lazy$8,bs58check$1=bs58check$3,OPS$3=bscript$7.OPS;function stacksEqual$2(t,e){return t.length!==e.length?!1:t.every((n,o)=>n.equals(e[o]))}function p2sh(t,e){if(!t.address&&!t.hash&&!t.output&&!t.redeem&&!t.input)throw new TypeError("Not enough data");e=Object.assign({validate:!0},e||{}),(0,types_1$5.typeforce)({network:types_1$5.typeforce.maybe(types_1$5.typeforce.Object),address:types_1$5.typeforce.maybe(types_1$5.typeforce.String),hash:types_1$5.typeforce.maybe(types_1$5.typeforce.BufferN(20)),output:types_1$5.typeforce.maybe(types_1$5.typeforce.BufferN(23)),redeem:types_1$5.typeforce.maybe({network:types_1$5.typeforce.maybe(types_1$5.typeforce.Object),output:types_1$5.typeforce.maybe(types_1$5.typeforce.Buffer),input:types_1$5.typeforce.maybe(types_1$5.typeforce.Buffer),witness:types_1$5.typeforce.maybe(types_1$5.typeforce.arrayOf(types_1$5.typeforce.Buffer))}),input:types_1$5.typeforce.maybe(types_1$5.typeforce.Buffer),witness:types_1$5.typeforce.maybe(types_1$5.typeforce.arrayOf(types_1$5.typeforce.Buffer))},t);let n=t.network;n||(n=t.redeem&&t.redeem.network||networks_1$4.bitcoin);const o={network:n},c=lazy$3.value(()=>{const b=Buffer$1$1.from(bs58check$1.decode(t.address)),v=b.readUInt8(0),A=b.slice(1);return{version:v,hash:A}}),a=lazy$3.value(()=>bscript$7.decompile(t.input)),l=lazy$3.value(()=>{const b=a(),v=b[b.length-1];return{network:n,output:v===OPS$3.OP_FALSE?Buffer$1$1.from([]):v,input:bscript$7.compile(b.slice(0,-1)),witness:t.witness||[]}});if(lazy$3.prop(o,"address",()=>{if(!o.hash)return;const b=Buffer$1$1.allocUnsafe(21);return b.writeUInt8(o.network.scriptHash,0),o.hash.copy(b,1),bs58check$1.encode(b)}),lazy$3.prop(o,"hash",()=>{if(t.output)return t.output.slice(2,22);if(t.address)return c().hash;if(o.redeem&&o.redeem.output)return bcrypto$4.hash160(o.redeem.output)}),lazy$3.prop(o,"output",()=>{if(o.hash)return bscript$7.compile([OPS$3.OP_HASH160,o.hash,OPS$3.OP_EQUAL])}),lazy$3.prop(o,"redeem",()=>{if(t.input)return l()}),lazy$3.prop(o,"input",()=>{if(!(!t.redeem||!t.redeem.input||!t.redeem.output))return bscript$7.compile([].concat(bscript$7.decompile(t.redeem.input),t.redeem.output))}),lazy$3.prop(o,"witness",()=>{if(o.redeem&&o.redeem.witness)return o.redeem.witness;if(o.input)return[]}),lazy$3.prop(o,"name",()=>{const b=["p2sh"];return o.redeem!==void 0&&o.redeem.name!==void 0&&b.push(o.redeem.name),b.join("-")}),e.validate){let b=Buffer$1$1.from([]);if(t.address){if(c().version!==n.scriptHash)throw new TypeError("Invalid version or Network mismatch");if(c().hash.length!==20)throw new TypeError("Invalid address");b=c().hash}if(t.hash){if(b.length>0&&!b.equals(t.hash))throw new TypeError("Hash mismatch");b=t.hash}if(t.output){if(t.output.length!==23||t.output[0]!==OPS$3.OP_HASH160||t.output[1]!==20||t.output[22]!==OPS$3.OP_EQUAL)throw new TypeError("Output is invalid");const A=t.output.slice(2,22);if(b.length>0&&!b.equals(A))throw new TypeError("Hash mismatch");b=A}const v=A=>{if(A.output){const S=bscript$7.decompile(A.output);if(!S||S.length<1)throw new TypeError("Redeem.output too short");if(A.output.byteLength>520)throw new TypeError("Redeem.output unspendable if larger than 520 bytes");if(bscript$7.countNonPushOnlyOPs(S)>201)throw new TypeError("Redeem.output unspendable with more than 201 non-push ops");const M=bcrypto$4.hash160(A.output);if(b.length>0&&!b.equals(M))throw new TypeError("Hash mismatch");b=M}if(A.input){const S=A.input.length>0,M=A.witness&&A.witness.length>0;if(!S&&!M)throw new TypeError("Empty input");if(S&&M)throw new TypeError("Input and witness provided");if(S){const B=bscript$7.decompile(A.input);if(!bscript$7.isPushOnly(B))throw new TypeError("Non push-only scriptSig")}}};if(t.input){const A=a();if(!A||A.length<1)throw new TypeError("Input too short");if(!Buffer$1$1.isBuffer(l().output))throw new TypeError("Input is invalid");v(l())}if(t.redeem){if(t.redeem.network&&t.redeem.network!==n)throw new TypeError("Network mismatch");if(t.input){const A=l();if(t.redeem.output&&!t.redeem.output.equals(A.output))throw new TypeError("Redeem.output mismatch");if(t.redeem.input&&!t.redeem.input.equals(A.input))throw new TypeError("Redeem.input mismatch")}v(t.redeem)}if(t.witness&&t.redeem&&t.redeem.witness&&!stacksEqual$2(t.redeem.witness,t.witness))throw new TypeError("Witness and redeem.witness mismatch")}return Object.assign(o,t)}p2sh$1.p2sh=p2sh;var p2wpkh$1={},dist$2={};Object.defineProperty(dist$2,"__esModule",{value:!0});dist$2.bech32m=dist$2.bech32=void 0;const ALPHABET$2="qpzry9x8gf2tvdw0s3jn54khce6mua7l",ALPHABET_MAP={};for(let t=0;t<ALPHABET$2.length;t++){const e=ALPHABET$2.charAt(t);ALPHABET_MAP[e]=t}function polymodStep(t){const e=t>>25;return(t&33554431)<<5^-(e>>0&1)&996825010^-(e>>1&1)&642813549^-(e>>2&1)&513874426^-(e>>3&1)&1027748829^-(e>>4&1)&705979059}function prefixChk(t){let e=1;for(let n=0;n<t.length;++n){const o=t.charCodeAt(n);if(o<33||o>126)return"Invalid prefix ("+t+")";e=polymodStep(e)^o>>5}e=polymodStep(e);for(let n=0;n<t.length;++n){const o=t.charCodeAt(n);e=polymodStep(e)^o&31}return e}function convert$2(t,e,n,o){let c=0,a=0;const l=(1<<n)-1,b=[];for(let v=0;v<t.length;++v)for(c=c<<e|t[v],a+=e;a>=n;)a-=n,b.push(c>>a&l);if(o)a>0&&b.push(c<<n-a&l);else{if(a>=e)return"Excess padding";if(c<<n-a&l)return"Non-zero padding"}return b}function toWords(t){return convert$2(t,8,5,!0)}function fromWordsUnsafe(t){const e=convert$2(t,5,8,!1);if(Array.isArray(e))return e}function fromWords(t){const e=convert$2(t,5,8,!1);if(Array.isArray(e))return e;throw new Error(e)}function getLibraryFromEncoding(t){let e;t==="bech32"?e=1:e=734539939;function n(l,b,v){if(v=v||90,l.length+7+b.length>v)throw new TypeError("Exceeds length limit");l=l.toLowerCase();let A=prefixChk(l);if(typeof A=="string")throw new Error(A);let S=l+"1";for(let M=0;M<b.length;++M){const B=b[M];if(B>>5)throw new Error("Non 5-bit word");A=polymodStep(A)^B,S+=ALPHABET$2.charAt(B)}for(let M=0;M<6;++M)A=polymodStep(A);A^=e;for(let M=0;M<6;++M){const B=A>>(5-M)*5&31;S+=ALPHABET$2.charAt(B)}return S}function o(l,b){if(b=b||90,l.length<8)return l+" too short";if(l.length>b)return"Exceeds length limit";const v=l.toLowerCase(),A=l.toUpperCase();if(l!==v&&l!==A)return"Mixed-case string "+l;l=v;const S=l.lastIndexOf("1");if(S===-1)return"No separator character for "+l;if(S===0)return"Missing prefix for "+l;const M=l.slice(0,S),B=l.slice(S+1);if(B.length<6)return"Data too short";let P=prefixChk(M);if(typeof P=="string")return P;const L=[];for(let F=0;F<B.length;++F){const U=B.charAt(F),q=ALPHABET_MAP[U];if(q===void 0)return"Unknown character "+U;P=polymodStep(P)^q,!(F+6>=B.length)&&L.push(q)}return P!==e?"Invalid checksum for "+l:{prefix:M,words:L}}function c(l,b){const v=o(l,b);if(typeof v=="object")return v}function a(l,b){const v=o(l,b);if(typeof v=="object")return v;throw new Error(v)}return{decodeUnsafe:c,decode:a,encode:n,toWords,fromWordsUnsafe,fromWords}}dist$2.bech32=getLibraryFromEncoding("bech32");dist$2.bech32m=getLibraryFromEncoding("bech32m");Object.defineProperty(p2wpkh$1,"__esModule",{value:!0});p2wpkh$1.p2wpkh=void 0;const bcrypto$3=crypto$3,networks_1$3=networks$1,bscript$6=script,types_1$4=types$4,lazy$2=lazy$8,bech32_1$3=dist$2,OPS$2=bscript$6.OPS,EMPTY_BUFFER$2=Buffer$1$1.alloc(0);function p2wpkh(t,e){if(!t.address&&!t.hash&&!t.output&&!t.pubkey&&!t.witness)throw new TypeError("Not enough data");e=Object.assign({validate:!0},e||{}),(0,types_1$4.typeforce)({address:types_1$4.typeforce.maybe(types_1$4.typeforce.String),hash:types_1$4.typeforce.maybe(types_1$4.typeforce.BufferN(20)),input:types_1$4.typeforce.maybe(types_1$4.typeforce.BufferN(0)),network:types_1$4.typeforce.maybe(types_1$4.typeforce.Object),output:types_1$4.typeforce.maybe(types_1$4.typeforce.BufferN(22)),pubkey:types_1$4.typeforce.maybe(types_1$4.isPoint),signature:types_1$4.typeforce.maybe(bscript$6.isCanonicalScriptSignature),witness:types_1$4.typeforce.maybe(types_1$4.typeforce.arrayOf(types_1$4.typeforce.Buffer))},t);const n=lazy$2.value(()=>{const a=bech32_1$3.bech32.decode(t.address),l=a.words.shift(),b=bech32_1$3.bech32.fromWords(a.words);return{version:l,prefix:a.prefix,data:Buffer$1$1.from(b)}}),o=t.network||networks_1$3.bitcoin,c={name:"p2wpkh",network:o};if(lazy$2.prop(c,"address",()=>{if(!c.hash)return;const a=bech32_1$3.bech32.toWords(c.hash);return a.unshift(0),bech32_1$3.bech32.encode(o.bech32,a)}),lazy$2.prop(c,"hash",()=>{if(t.output)return t.output.slice(2,22);if(t.address)return n().data;if(t.pubkey||c.pubkey)return bcrypto$3.hash160(t.pubkey||c.pubkey)}),lazy$2.prop(c,"output",()=>{if(c.hash)return bscript$6.compile([OPS$2.OP_0,c.hash])}),lazy$2.prop(c,"pubkey",()=>{if(t.pubkey)return t.pubkey;if(t.witness)return t.witness[1]}),lazy$2.prop(c,"signature",()=>{if(t.witness)return t.witness[0]}),lazy$2.prop(c,"input",()=>{if(c.witness)return EMPTY_BUFFER$2}),lazy$2.prop(c,"witness",()=>{if(t.pubkey&&t.signature)return[t.signature,t.pubkey]}),e.validate){let a=Buffer$1$1.from([]);if(t.address){if(o&&o.bech32!==n().prefix)throw new TypeError("Invalid prefix or Network mismatch");if(n().version!==0)throw new TypeError("Invalid address version");if(n().data.length!==20)throw new TypeError("Invalid address data");a=n().data}if(t.hash){if(a.length>0&&!a.equals(t.hash))throw new TypeError("Hash mismatch");a=t.hash}if(t.output){if(t.output.length!==22||t.output[0]!==OPS$2.OP_0||t.output[1]!==20)throw new TypeError("Output is invalid");if(a.length>0&&!a.equals(t.output.slice(2)))throw new TypeError("Hash mismatch");a=t.output.slice(2)}if(t.pubkey){const l=bcrypto$3.hash160(t.pubkey);if(a.length>0&&!a.equals(l))throw new TypeError("Hash mismatch");if(a=l,!(0,types_1$4.isPoint)(t.pubkey)||t.pubkey.length!==33)throw new TypeError("Invalid pubkey for p2wpkh")}if(t.witness){if(t.witness.length!==2)throw new TypeError("Witness is invalid");if(!bscript$6.isCanonicalScriptSignature(t.witness[0]))throw new TypeError("Witness has invalid signature");if(!(0,types_1$4.isPoint)(t.witness[1])||t.witness[1].length!==33)throw new TypeError("Witness has invalid pubkey");if(t.signature&&!t.signature.equals(t.witness[0]))throw new TypeError("Signature mismatch");if(t.pubkey&&!t.pubkey.equals(t.witness[1]))throw new TypeError("Pubkey mismatch");const l=bcrypto$3.hash160(t.witness[1]);if(a.length>0&&!a.equals(l))throw new TypeError("Hash mismatch")}}return Object.assign(c,t)}p2wpkh$1.p2wpkh=p2wpkh;var p2wsh$1={};Object.defineProperty(p2wsh$1,"__esModule",{value:!0});p2wsh$1.p2wsh=void 0;const bcrypto$2=crypto$3,networks_1$2=networks$1,bscript$5=script,types_1$3=types$4,lazy$1=lazy$8,bech32_1$2=dist$2,OPS$1=bscript$5.OPS,EMPTY_BUFFER$1=Buffer$1$1.alloc(0);function stacksEqual$1(t,e){return t.length!==e.length?!1:t.every((n,o)=>n.equals(e[o]))}function chunkHasUncompressedPubkey(t){return!!(Buffer$1$1.isBuffer(t)&&t.length===65&&t[0]===4&&(0,types_1$3.isPoint)(t))}function p2wsh(t,e){if(!t.address&&!t.hash&&!t.output&&!t.redeem&&!t.witness)throw new TypeError("Not enough data");e=Object.assign({validate:!0},e||{}),(0,types_1$3.typeforce)({network:types_1$3.typeforce.maybe(types_1$3.typeforce.Object),address:types_1$3.typeforce.maybe(types_1$3.typeforce.String),hash:types_1$3.typeforce.maybe(types_1$3.typeforce.BufferN(32)),output:types_1$3.typeforce.maybe(types_1$3.typeforce.BufferN(34)),redeem:types_1$3.typeforce.maybe({input:types_1$3.typeforce.maybe(types_1$3.typeforce.Buffer),network:types_1$3.typeforce.maybe(types_1$3.typeforce.Object),output:types_1$3.typeforce.maybe(types_1$3.typeforce.Buffer),witness:types_1$3.typeforce.maybe(types_1$3.typeforce.arrayOf(types_1$3.typeforce.Buffer))}),input:types_1$3.typeforce.maybe(types_1$3.typeforce.BufferN(0)),witness:types_1$3.typeforce.maybe(types_1$3.typeforce.arrayOf(types_1$3.typeforce.Buffer))},t);const n=lazy$1.value(()=>{const l=bech32_1$2.bech32.decode(t.address),b=l.words.shift(),v=bech32_1$2.bech32.fromWords(l.words);return{version:b,prefix:l.prefix,data:Buffer$1$1.from(v)}}),o=lazy$1.value(()=>bscript$5.decompile(t.redeem.input));let c=t.network;c||(c=t.redeem&&t.redeem.network||networks_1$2.bitcoin);const a={network:c};if(lazy$1.prop(a,"address",()=>{if(!a.hash)return;const l=bech32_1$2.bech32.toWords(a.hash);return l.unshift(0),bech32_1$2.bech32.encode(c.bech32,l)}),lazy$1.prop(a,"hash",()=>{if(t.output)return t.output.slice(2);if(t.address)return n().data;if(a.redeem&&a.redeem.output)return bcrypto$2.sha256(a.redeem.output)}),lazy$1.prop(a,"output",()=>{if(a.hash)return bscript$5.compile([OPS$1.OP_0,a.hash])}),lazy$1.prop(a,"redeem",()=>{if(t.witness)return{output:t.witness[t.witness.length-1],input:EMPTY_BUFFER$1,witness:t.witness.slice(0,-1)}}),lazy$1.prop(a,"input",()=>{if(a.witness)return EMPTY_BUFFER$1}),lazy$1.prop(a,"witness",()=>{if(t.redeem&&t.redeem.input&&t.redeem.input.length>0&&t.redeem.output&&t.redeem.output.length>0){const l=bscript$5.toStack(o());return a.redeem=Object.assign({witness:l},t.redeem),a.redeem.input=EMPTY_BUFFER$1,[].concat(l,t.redeem.output)}if(t.redeem&&t.redeem.output&&t.redeem.witness)return[].concat(t.redeem.witness,t.redeem.output)}),lazy$1.prop(a,"name",()=>{const l=["p2wsh"];return a.redeem!==void 0&&a.redeem.name!==void 0&&l.push(a.redeem.name),l.join("-")}),e.validate){let l=Buffer$1$1.from([]);if(t.address){if(n().prefix!==c.bech32)throw new TypeError("Invalid prefix or Network mismatch");if(n().version!==0)throw new TypeError("Invalid address version");if(n().data.length!==32)throw new TypeError("Invalid address data");l=n().data}if(t.hash){if(l.length>0&&!l.equals(t.hash))throw new TypeError("Hash mismatch");l=t.hash}if(t.output){if(t.output.length!==34||t.output[0]!==OPS$1.OP_0||t.output[1]!==32)throw new TypeError("Output is invalid");const b=t.output.slice(2);if(l.length>0&&!l.equals(b))throw new TypeError("Hash mismatch");l=b}if(t.redeem){if(t.redeem.network&&t.redeem.network!==c)throw new TypeError("Network mismatch");if(t.redeem.input&&t.redeem.input.length>0&&t.redeem.witness&&t.redeem.witness.length>0)throw new TypeError("Ambiguous witness source");if(t.redeem.output){const b=bscript$5.decompile(t.redeem.output);if(!b||b.length<1)throw new TypeError("Redeem.output is invalid");if(t.redeem.output.byteLength>3600)throw new TypeError("Redeem.output unspendable if larger than 3600 bytes");if(bscript$5.countNonPushOnlyOPs(b)>201)throw new TypeError("Redeem.output unspendable with more than 201 non-push ops");const v=bcrypto$2.sha256(t.redeem.output);if(l.length>0&&!l.equals(v))throw new TypeError("Hash mismatch");l=v}if(t.redeem.input&&!bscript$5.isPushOnly(o()))throw new TypeError("Non push-only scriptSig");if(t.witness&&t.redeem.witness&&!stacksEqual$1(t.witness,t.redeem.witness))throw new TypeError("Witness and redeem.witness mismatch");if(t.redeem.input&&o().some(chunkHasUncompressedPubkey)||t.redeem.output&&(bscript$5.decompile(t.redeem.output)||[]).some(chunkHasUncompressedPubkey))throw new TypeError("redeem.input or redeem.output contains uncompressed pubkey")}if(t.witness&&t.witness.length>0){const b=t.witness[t.witness.length-1];if(t.redeem&&t.redeem.output&&!t.redeem.output.equals(b))throw new TypeError("Witness and redeem.output mismatch");if(t.witness.some(chunkHasUncompressedPubkey)||(bscript$5.decompile(b)||[]).some(chunkHasUncompressedPubkey))throw new TypeError("Witness contains uncompressed pubkey")}}return Object.assign(a,t)}p2wsh$1.p2wsh=p2wsh;var p2tr$1={},ecc_lib={};Object.defineProperty(ecc_lib,"__esModule",{value:!0});ecc_lib.getEccLib=ecc_lib.initEccLib=void 0;const _ECCLIB_CACHE={};function initEccLib(t){t?t!==_ECCLIB_CACHE.eccLib&&(verifyEcc(t),_ECCLIB_CACHE.eccLib=t):_ECCLIB_CACHE.eccLib=t}ecc_lib.initEccLib=initEccLib;function getEccLib(){if(!_ECCLIB_CACHE.eccLib)throw new Error("No ECC Library provided. You must call initEccLib() with a valid TinySecp256k1Interface instance");return _ECCLIB_CACHE.eccLib}ecc_lib.getEccLib=getEccLib;const h=t=>Buffer$1$1.from(t,"hex");function verifyEcc(t){assert$f(typeof t.isXOnlyPoint=="function"),assert$f(t.isXOnlyPoint(h("79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"))),assert$f(t.isXOnlyPoint(h("fffffffffffffffffffffffffffffffffffffffffffffffffffffffeeffffc2e"))),assert$f(t.isXOnlyPoint(h("f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9"))),assert$f(t.isXOnlyPoint(h("0000000000000000000000000000000000000000000000000000000000000001"))),assert$f(!t.isXOnlyPoint(h("0000000000000000000000000000000000000000000000000000000000000000"))),assert$f(!t.isXOnlyPoint(h("fffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"))),assert$f(typeof t.xOnlyPointAddTweak=="function"),tweakAddVectors.forEach(e=>{const n=t.xOnlyPointAddTweak(h(e.pubkey),h(e.tweak));e.result===null?assert$f(n===null):(assert$f(n!==null),assert$f(n.parity===e.parity),assert$f(Buffer$1$1.from(n.xOnlyPubkey).equals(h(e.result))))})}function assert$f(t){if(!t)throw new Error("ecc library invalid")}const tweakAddVectors=[{pubkey:"79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798",tweak:"fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140",parity:-1,result:null},{pubkey:"1617d38ed8d8657da4d4761e8057bc396ea9e4b9d29776d4be096016dbd2509b",tweak:"a8397a935f0dfceba6ba9618f6451ef4d80637abf4e6af2669fbc9de6a8fd2ac",parity:1,result:"e478f99dab91052ab39a33ea35fd5e6e4933f4d28023cd597c9a1f6760346adf"},{pubkey:"2c0b7cf95324a07d05398b240174dc0c2be444d96b159aa6c7f7b1e668680991",tweak:"823c3cd2142744b075a87eade7e1b8678ba308d566226a0056ca2b7a76f86b47",parity:0,result:"9534f8dc8c6deda2dc007655981c78b49c5d96c778fbf363462a11ec9dfd948c"}];var bip341={},bufferutils={},Buffer$p=safeBufferExports$2.Buffer,MAX_SAFE_INTEGER$1=9007199254740991;function checkUInt53$1(t){if(t<0||t>MAX_SAFE_INTEGER$1||t%1!==0)throw new RangeError("value out of range")}function encode$f(t,e,n){if(checkUInt53$1(t),e||(e=Buffer$p.allocUnsafe(encodingLength$1(t))),!Buffer$p.isBuffer(e))throw new TypeError("buffer must be a Buffer instance");return n||(n=0),t<253?(e.writeUInt8(t,n),encode$f.bytes=1):t<=65535?(e.writeUInt8(253,n),e.writeUInt16LE(t,n+1),encode$f.bytes=3):t<=4294967295?(e.writeUInt8(254,n),e.writeUInt32LE(t,n+1),encode$f.bytes=5):(e.writeUInt8(255,n),e.writeUInt32LE(t>>>0,n+1),e.writeUInt32LE(t/4294967296|0,n+5),encode$f.bytes=9),e}function decode$e(t,e){if(!Buffer$p.isBuffer(t))throw new TypeError("buffer must be a Buffer instance");e||(e=0);var n=t.readUInt8(e);if(n<253)return decode$e.bytes=1,n;if(n===253)return decode$e.bytes=3,t.readUInt16LE(e+1);if(n===254)return decode$e.bytes=5,t.readUInt32LE(e+1);decode$e.bytes=9;var o=t.readUInt32LE(e+1),c=t.readUInt32LE(e+5),a=c*4294967296+o;return checkUInt53$1(a),a}function encodingLength$1(t){return checkUInt53$1(t),t<253?1:t<=65535?3:t<=4294967295?5:9}var varuintBitcoin={encode:encode$f,decode:decode$e,encodingLength:encodingLength$1};Object.defineProperty(bufferutils,"__esModule",{value:!0});bufferutils.BufferReader=bufferutils.BufferWriter=bufferutils.cloneBuffer=bufferutils.reverseBuffer=bufferutils.writeUInt64LE=bufferutils.readUInt64LE=bufferutils.varuint=void 0;const types$2=types$4,{typeforce:typeforce$2}=types$2,varuint$7=varuintBitcoin;bufferutils.varuint=varuint$7;function verifuint$1(t,e){if(typeof t!="number")throw new Error("cannot write a non-number as a number");if(t<0)throw new Error("specified a negative value for writing an unsigned value");if(t>e)throw new Error("RangeError: value out of range");if(Math.floor(t)!==t)throw new Error("value has a fractional component")}function readUInt64LE$1(t,e){const n=t.readUInt32LE(e);let o=t.readUInt32LE(e+4);return o*=4294967296,verifuint$1(o+n,9007199254740991),o+n}bufferutils.readUInt64LE=readUInt64LE$1;function writeUInt64LE$1(t,e,n){return verifuint$1(e,9007199254740991),t.writeInt32LE(e&-1,n),t.writeUInt32LE(Math.floor(e/4294967296),n+4),n+8}bufferutils.writeUInt64LE=writeUInt64LE$1;function reverseBuffer$1(t){if(t.length<1)return t;let e=t.length-1,n=0;for(let o=0;o<t.length/2;o++)n=t[o],t[o]=t[e],t[e]=n,e--;return t}bufferutils.reverseBuffer=reverseBuffer$1;function cloneBuffer(t){const e=Buffer$1$1.allocUnsafe(t.length);return t.copy(e),e}bufferutils.cloneBuffer=cloneBuffer;class BufferWriter{static withCapacity(e){return new BufferWriter(Buffer$1$1.alloc(e))}constructor(e,n=0){this.buffer=e,this.offset=n,typeforce$2(types$2.tuple(types$2.Buffer,types$2.UInt32),[e,n])}writeUInt8(e){this.offset=this.buffer.writeUInt8(e,this.offset)}writeInt32(e){this.offset=this.buffer.writeInt32LE(e,this.offset)}writeUInt32(e){this.offset=this.buffer.writeUInt32LE(e,this.offset)}writeUInt64(e){this.offset=writeUInt64LE$1(this.buffer,e,this.offset)}writeVarInt(e){varuint$7.encode(e,this.buffer,this.offset),this.offset+=varuint$7.encode.bytes}writeSlice(e){if(this.buffer.length<this.offset+e.length)throw new Error("Cannot write slice out of bounds");this.offset+=e.copy(this.buffer,this.offset)}writeVarSlice(e){this.writeVarInt(e.length),this.writeSlice(e)}writeVector(e){this.writeVarInt(e.length),e.forEach(n=>this.writeVarSlice(n))}end(){if(this.buffer.length===this.offset)return this.buffer;throw new Error(`buffer size ${this.buffer.length}, offset ${this.offset}`)}}bufferutils.BufferWriter=BufferWriter;class BufferReader{constructor(e,n=0){this.buffer=e,this.offset=n,typeforce$2(types$2.tuple(types$2.Buffer,types$2.UInt32),[e,n])}readUInt8(){const e=this.buffer.readUInt8(this.offset);return this.offset++,e}readInt32(){const e=this.buffer.readInt32LE(this.offset);return this.offset+=4,e}readUInt32(){const e=this.buffer.readUInt32LE(this.offset);return this.offset+=4,e}readUInt64(){const e=readUInt64LE$1(this.buffer,this.offset);return this.offset+=8,e}readVarInt(){const e=varuint$7.decode(this.buffer,this.offset);return this.offset+=varuint$7.decode.bytes,e}readSlice(e){if(this.buffer.length<this.offset+e)throw new Error("Cannot read slice out of bounds");const n=this.buffer.slice(this.offset,this.offset+e);return this.offset+=e,n}readVarSlice(){return this.readSlice(this.readVarInt())}readVector(){const e=this.readVarInt(),n=[];for(let o=0;o<e;o++)n.push(this.readVarSlice());return n}}bufferutils.BufferReader=BufferReader;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.tweakKey=t.tapTweakHash=t.tapleafHash=t.findScriptPath=t.toHashTree=t.rootHashFromPath=t.MAX_TAPTREE_DEPTH=t.LEAF_VERSION_TAPSCRIPT=void 0;const e=require$$0$3,n=ecc_lib,o=crypto$3,c=bufferutils,a=types$4;t.LEAF_VERSION_TAPSCRIPT=192,t.MAX_TAPTREE_DEPTH=128;const l=F=>"left"in F&&"right"in F;function b(F,U){if(F.length<33)throw new TypeError(`The control-block length is too small. Got ${F.length}, expected min 33.`);const q=(F.length-33)/32;let X=U;for(let ee=0;ee<q;ee++){const te=F.slice(33+32*ee,65+32*ee);X.compare(te)<0?X=P(X,te):X=P(te,X)}return X}t.rootHashFromPath=b;function v(F){if((0,a.isTapleaf)(F))return{hash:S(F)};const U=[v(F[0]),v(F[1])];U.sort((ee,te)=>ee.hash.compare(te.hash));const[q,X]=U;return{hash:P(q.hash,X.hash),left:q,right:X}}t.toHashTree=v;function A(F,U){if(l(F)){const q=A(F.left,U);if(q!==void 0)return[...q,F.right.hash];const X=A(F.right,U);if(X!==void 0)return[...X,F.left.hash]}else if(F.hash.equals(U))return[]}t.findScriptPath=A;function S(F){const U=F.version||t.LEAF_VERSION_TAPSCRIPT;return o.taggedHash("TapLeaf",e.Buffer.concat([e.Buffer.from([U]),L(F.output)]))}t.tapleafHash=S;function M(F,U){return o.taggedHash("TapTweak",e.Buffer.concat(U?[F,U]:[F]))}t.tapTweakHash=M;function B(F,U){if(!e.Buffer.isBuffer(F)||F.length!==32||U&&U.length!==32)return null;const q=M(F,U),X=(0,n.getEccLib)().xOnlyPointAddTweak(F,q);return!X||X.xOnlyPubkey===null?null:{parity:X.parity,x:e.Buffer.from(X.xOnlyPubkey)}}t.tweakKey=B;function P(F,U){return o.taggedHash("TapBranch",e.Buffer.concat([F,U]))}function L(F){const U=c.varuint.encodingLength(F.length),q=e.Buffer.allocUnsafe(U);return c.varuint.encode(F.length,q),e.Buffer.concat([q,F])}})(bip341);Object.defineProperty(p2tr$1,"__esModule",{value:!0});p2tr$1.p2tr=void 0;const buffer_1$1=require$$0$3,networks_1$1=networks$1,bscript$4=script,types_1$2=types$4,ecc_lib_1=ecc_lib,bip341_1$2=bip341,lazy=lazy$8,bech32_1$1=dist$2,OPS=bscript$4.OPS,TAPROOT_WITNESS_VERSION=1,ANNEX_PREFIX=80;function p2tr(t,e){if(!t.address&&!t.output&&!t.pubkey&&!t.internalPubkey&&!(t.witness&&t.witness.length>1))throw new TypeError("Not enough data");e=Object.assign({validate:!0},e||{}),(0,types_1$2.typeforce)({address:types_1$2.typeforce.maybe(types_1$2.typeforce.String),input:types_1$2.typeforce.maybe(types_1$2.typeforce.BufferN(0)),network:types_1$2.typeforce.maybe(types_1$2.typeforce.Object),output:types_1$2.typeforce.maybe(types_1$2.typeforce.BufferN(34)),internalPubkey:types_1$2.typeforce.maybe(types_1$2.typeforce.BufferN(32)),hash:types_1$2.typeforce.maybe(types_1$2.typeforce.BufferN(32)),pubkey:types_1$2.typeforce.maybe(types_1$2.typeforce.BufferN(32)),signature:types_1$2.typeforce.maybe(types_1$2.typeforce.anyOf(types_1$2.typeforce.BufferN(64),types_1$2.typeforce.BufferN(65))),witness:types_1$2.typeforce.maybe(types_1$2.typeforce.arrayOf(types_1$2.typeforce.Buffer)),scriptTree:types_1$2.typeforce.maybe(types_1$2.isTaptree),redeem:types_1$2.typeforce.maybe({output:types_1$2.typeforce.maybe(types_1$2.typeforce.Buffer),redeemVersion:types_1$2.typeforce.maybe(types_1$2.typeforce.Number),witness:types_1$2.typeforce.maybe(types_1$2.typeforce.arrayOf(types_1$2.typeforce.Buffer))}),redeemVersion:types_1$2.typeforce.maybe(types_1$2.typeforce.Number)},t);const n=lazy.value(()=>{const b=bech32_1$1.bech32m.decode(t.address),v=b.words.shift(),A=bech32_1$1.bech32m.fromWords(b.words);return{version:v,prefix:b.prefix,data:buffer_1$1.Buffer.from(A)}}),o=lazy.value(()=>{if(!(!t.witness||!t.witness.length))return t.witness.length>=2&&t.witness[t.witness.length-1][0]===ANNEX_PREFIX?t.witness.slice(0,-1):t.witness.slice()}),c=lazy.value(()=>{if(t.scriptTree)return(0,bip341_1$2.toHashTree)(t.scriptTree);if(t.hash)return{hash:t.hash}}),a=t.network||networks_1$1.bitcoin,l={name:"p2tr",network:a};if(lazy.prop(l,"address",()=>{if(!l.pubkey)return;const b=bech32_1$1.bech32m.toWords(l.pubkey);return b.unshift(TAPROOT_WITNESS_VERSION),bech32_1$1.bech32m.encode(a.bech32,b)}),lazy.prop(l,"hash",()=>{const b=c();if(b)return b.hash;const v=o();if(v&&v.length>1){const A=v[v.length-1],S=A[0]&types_1$2.TAPLEAF_VERSION_MASK,M=v[v.length-2],B=(0,bip341_1$2.tapleafHash)({output:M,version:S});return(0,bip341_1$2.rootHashFromPath)(A,B)}return null}),lazy.prop(l,"output",()=>{if(l.pubkey)return bscript$4.compile([OPS.OP_1,l.pubkey])}),lazy.prop(l,"redeemVersion",()=>t.redeemVersion?t.redeemVersion:t.redeem&&t.redeem.redeemVersion!==void 0&&t.redeem.redeemVersion!==null?t.redeem.redeemVersion:bip341_1$2.LEAF_VERSION_TAPSCRIPT),lazy.prop(l,"redeem",()=>{const b=o();if(!(!b||b.length<2))return{output:b[b.length-2],witness:b.slice(0,-2),redeemVersion:b[b.length-1][0]&types_1$2.TAPLEAF_VERSION_MASK}}),lazy.prop(l,"pubkey",()=>{if(t.pubkey)return t.pubkey;if(t.output)return t.output.slice(2);if(t.address)return n().data;if(l.internalPubkey){const b=(0,bip341_1$2.tweakKey)(l.internalPubkey,l.hash);if(b)return b.x}}),lazy.prop(l,"internalPubkey",()=>{if(t.internalPubkey)return t.internalPubkey;const b=o();if(b&&b.length>1)return b[b.length-1].slice(1,33)}),lazy.prop(l,"signature",()=>{if(t.signature)return t.signature;const b=o();if(!(!b||b.length!==1))return b[0]}),lazy.prop(l,"witness",()=>{if(t.witness)return t.witness;const b=c();if(b&&t.redeem&&t.redeem.output&&t.internalPubkey){const v=(0,bip341_1$2.tapleafHash)({output:t.redeem.output,version:l.redeemVersion}),A=(0,bip341_1$2.findScriptPath)(b,v);if(!A)return;const S=(0,bip341_1$2.tweakKey)(t.internalPubkey,b.hash);if(!S)return;const M=buffer_1$1.Buffer.concat([buffer_1$1.Buffer.from([l.redeemVersion|S.parity]),t.internalPubkey].concat(A));return[t.redeem.output,M]}if(t.signature)return[t.signature]}),e.validate){let b=buffer_1$1.Buffer.from([]);if(t.address){if(a&&a.bech32!==n().prefix)throw new TypeError("Invalid prefix or Network mismatch");if(n().version!==TAPROOT_WITNESS_VERSION)throw new TypeError("Invalid address version");if(n().data.length!==32)throw new TypeError("Invalid address data");b=n().data}if(t.pubkey){if(b.length>0&&!b.equals(t.pubkey))throw new TypeError("Pubkey mismatch");b=t.pubkey}if(t.output){if(t.output.length!==34||t.output[0]!==OPS.OP_1||t.output[1]!==32)throw new TypeError("Output is invalid");if(b.length>0&&!b.equals(t.output.slice(2)))throw new TypeError("Pubkey mismatch");b=t.output.slice(2)}if(t.internalPubkey){const S=(0,bip341_1$2.tweakKey)(t.internalPubkey,l.hash);if(b.length>0&&!b.equals(S.x))throw new TypeError("Pubkey mismatch");b=S.x}if(b&&b.length&&!(0,ecc_lib_1.getEccLib)().isXOnlyPoint(b))throw new TypeError("Invalid pubkey for p2tr");const v=c();if(t.hash&&v&&!t.hash.equals(v.hash))throw new TypeError("Hash mismatch");if(t.redeem&&t.redeem.output&&v){const S=(0,bip341_1$2.tapleafHash)({output:t.redeem.output,version:l.redeemVersion});if(!(0,bip341_1$2.findScriptPath)(v,S))throw new TypeError("Redeem script not in tree")}const A=o();if(t.redeem&&l.redeem){if(t.redeem.redeemVersion&&t.redeem.redeemVersion!==l.redeem.redeemVersion)throw new TypeError("Redeem.redeemVersion and witness mismatch");if(t.redeem.output){if(bscript$4.decompile(t.redeem.output).length===0)throw new TypeError("Redeem.output is invalid");if(l.redeem.output&&!t.redeem.output.equals(l.redeem.output))throw new TypeError("Redeem.output and witness mismatch")}if(t.redeem.witness&&l.redeem.witness&&!stacksEqual(t.redeem.witness,l.redeem.witness))throw new TypeError("Redeem.witness and witness mismatch")}if(A&&A.length)if(A.length===1){if(t.signature&&!t.signature.equals(A[0]))throw new TypeError("Signature mismatch")}else{const S=A[A.length-1];if(S.length<33)throw new TypeError(`The control-block length is too small. Got ${S.length}, expected min 33.`);if((S.length-33)%32!==0)throw new TypeError(`The control-block length of ${S.length} is incorrect!`);const M=(S.length-33)/32;if(M>128)throw new TypeError(`The script path is too long. Got ${M}, expected max 128.`);const B=S.slice(1,33);if(t.internalPubkey&&!t.internalPubkey.equals(B))throw new TypeError("Internal pubkey mismatch");if(!(0,ecc_lib_1.getEccLib)().isXOnlyPoint(B))throw new TypeError("Invalid internalPubkey for p2tr witness");const P=S[0]&types_1$2.TAPLEAF_VERSION_MASK,L=A[A.length-2],F=(0,bip341_1$2.tapleafHash)({output:L,version:P}),U=(0,bip341_1$2.rootHashFromPath)(S,F),q=(0,bip341_1$2.tweakKey)(B,U);if(!q)throw new TypeError("Invalid outputKey for p2tr witness");if(b.length&&!b.equals(q.x))throw new TypeError("Pubkey mismatch for p2tr witness");if(q.parity!==(S[0]&1))throw new Error("Incorrect parity")}}return Object.assign(l,t)}p2tr$1.p2tr=p2tr;function stacksEqual(t,e){return t.length!==e.length?!1:t.every((n,o)=>n.equals(e[o]))}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.p2tr=t.p2wsh=t.p2wpkh=t.p2sh=t.p2pkh=t.p2pk=t.p2ms=t.embed=void 0;const e=embed;Object.defineProperty(t,"embed",{enumerable:!0,get:function(){return e.p2data}});const n=p2ms$1;Object.defineProperty(t,"p2ms",{enumerable:!0,get:function(){return n.p2ms}});const o=p2pk$1;Object.defineProperty(t,"p2pk",{enumerable:!0,get:function(){return o.p2pk}});const c=p2pkh$1;Object.defineProperty(t,"p2pkh",{enumerable:!0,get:function(){return c.p2pkh}});const a=p2sh$1;Object.defineProperty(t,"p2sh",{enumerable:!0,get:function(){return a.p2sh}});const l=p2wpkh$1;Object.defineProperty(t,"p2wpkh",{enumerable:!0,get:function(){return l.p2wpkh}});const b=p2wsh$1;Object.defineProperty(t,"p2wsh",{enumerable:!0,get:function(){return b.p2wsh}});const v=p2tr$1;Object.defineProperty(t,"p2tr",{enumerable:!0,get:function(){return v.p2tr}})})(payments$3);Object.defineProperty(address,"__esModule",{value:!0});address.toOutputScript=address.fromOutputScript=address.toBech32=address.toBase58Check=address.fromBech32=address.fromBase58Check=void 0;const networks=networks$1,payments$2=payments$3,bscript$3=script,types_1$1=types$4,bech32_1=dist$2,bs58check=bs58check$3,FUTURE_SEGWIT_MAX_SIZE=40,FUTURE_SEGWIT_MIN_SIZE=2,FUTURE_SEGWIT_MAX_VERSION=16,FUTURE_SEGWIT_MIN_VERSION=2,FUTURE_SEGWIT_VERSION_DIFF=80,FUTURE_SEGWIT_VERSION_WARNING="WARNING: Sending to a future segwit version address can lead to loss of funds. End users MUST be warned carefully in the GUI and asked if they wish to proceed with caution. Wallets should verify the segwit version from the output of fromBech32, then decide when it is safe to use which version of segwit.";function _toFutureSegwitAddress(t,e){const n=t.slice(2);if(n.length<FUTURE_SEGWIT_MIN_SIZE||n.length>FUTURE_SEGWIT_MAX_SIZE)throw new TypeError("Invalid program length for segwit address");const o=t[0]-FUTURE_SEGWIT_VERSION_DIFF;if(o<FUTURE_SEGWIT_MIN_VERSION||o>FUTURE_SEGWIT_MAX_VERSION)throw new TypeError("Invalid version for segwit address");if(t[1]!==n.length)throw new TypeError("Invalid script for segwit address");return console.warn(FUTURE_SEGWIT_VERSION_WARNING),toBech32(n,o,e.bech32)}function fromBase58Check(t){const e=Buffer$1$1.from(bs58check.decode(t));if(e.length<21)throw new TypeError(t+" is too short");if(e.length>21)throw new TypeError(t+" is too long");const n=e.readUInt8(0),o=e.slice(1);return{version:n,hash:o}}address.fromBase58Check=fromBase58Check;function fromBech32(t){let e,n;try{e=bech32_1.bech32.decode(t)}catch{}if(e){if(n=e.words[0],n!==0)throw new TypeError(t+" uses wrong encoding")}else if(e=bech32_1.bech32m.decode(t),n=e.words[0],n===0)throw new TypeError(t+" uses wrong encoding");const o=bech32_1.bech32.fromWords(e.words.slice(1));return{version:n,prefix:e.prefix,data:Buffer$1$1.from(o)}}address.fromBech32=fromBech32;function toBase58Check(t,e){(0,types_1$1.typeforce)((0,types_1$1.tuple)(types_1$1.Hash160bit,types_1$1.UInt8),arguments);const n=Buffer$1$1.allocUnsafe(21);return n.writeUInt8(e,0),t.copy(n,1),bs58check.encode(n)}address.toBase58Check=toBase58Check;function toBech32(t,e,n){const o=bech32_1.bech32.toWords(t);return o.unshift(e),e===0?bech32_1.bech32.encode(n,o):bech32_1.bech32m.encode(n,o)}address.toBech32=toBech32;function fromOutputScript(t,e){e=e||networks.bitcoin;try{return payments$2.p2pkh({output:t,network:e}).address}catch{}try{return payments$2.p2sh({output:t,network:e}).address}catch{}try{return payments$2.p2wpkh({output:t,network:e}).address}catch{}try{return payments$2.p2wsh({output:t,network:e}).address}catch{}try{return payments$2.p2tr({output:t,network:e}).address}catch{}try{return _toFutureSegwitAddress(t,e)}catch{}throw new Error(bscript$3.toASM(t)+" has no matching Address")}address.fromOutputScript=fromOutputScript;function toOutputScript(t,e){e=e||networks.bitcoin;let n,o;try{n=fromBase58Check(t)}catch{}if(n){if(n.version===e.pubKeyHash)return payments$2.p2pkh({hash:n.hash}).output;if(n.version===e.scriptHash)return payments$2.p2sh({hash:n.hash}).output}else{try{o=fromBech32(t)}catch{}if(o){if(o.prefix!==e.bech32)throw new Error(t+" has an invalid prefix");if(o.version===0){if(o.data.length===20)return payments$2.p2wpkh({hash:o.data}).output;if(o.data.length===32)return payments$2.p2wsh({hash:o.data}).output}else if(o.version===1){if(o.data.length===32)return payments$2.p2tr({pubkey:o.data}).output}else if(o.version>=FUTURE_SEGWIT_MIN_VERSION&&o.version<=FUTURE_SEGWIT_MAX_VERSION&&o.data.length>=FUTURE_SEGWIT_MIN_SIZE&&o.data.length<=FUTURE_SEGWIT_MAX_SIZE)return console.warn(FUTURE_SEGWIT_VERSION_WARNING),bscript$3.compile([o.version+FUTURE_SEGWIT_VERSION_DIFF,o.data])}}throw new Error(t+" has no matching Script")}address.toOutputScript=toOutputScript;var block={},merkle={};Object.defineProperty(merkle,"__esModule",{value:!0});merkle.fastMerkleRoot=void 0;function fastMerkleRoot(t,e){if(!Array.isArray(t))throw TypeError("Expected values Array");if(typeof e!="function")throw TypeError("Expected digest Function");let n=t.length;const o=t.concat();for(;n>1;){let c=0;for(let a=0;a<n;a+=2,++c){const l=o[a],b=a+1===n?l:o[a+1],v=Buffer$1$1.concat([l,b]);o[c]=e(v)}n=c}return o[0]}merkle.fastMerkleRoot=fastMerkleRoot;var transaction={};Object.defineProperty(transaction,"__esModule",{value:!0});transaction.Transaction=void 0;const bufferutils_1$2=bufferutils,bcrypto$1=crypto$3,bscript$2=script,script_1=script,types$1=types$4,{typeforce:typeforce$1}=types$1;function varSliceSize(t){const e=t.length;return bufferutils_1$2.varuint.encodingLength(e)+e}function vectorSize(t){const e=t.length;return bufferutils_1$2.varuint.encodingLength(e)+t.reduce((n,o)=>n+varSliceSize(o),0)}const EMPTY_BUFFER=Buffer$1$1.allocUnsafe(0),EMPTY_WITNESS=[],ZERO=Buffer$1$1.from("0000000000000000000000000000000000000000000000000000000000000000","hex"),ONE=Buffer$1$1.from("0000000000000000000000000000000000000000000000000000000000000001","hex"),VALUE_UINT64_MAX=Buffer$1$1.from("ffffffffffffffff","hex"),BLANK_OUTPUT={script:EMPTY_BUFFER,valueBuffer:VALUE_UINT64_MAX};function isOutput(t){return t.value!==void 0}let Transaction$1=class Ut{constructor(){this.version=1,this.locktime=0,this.ins=[],this.outs=[]}static fromBuffer(e,n){const o=new bufferutils_1$2.BufferReader(e),c=new Ut;c.version=o.readInt32();const a=o.readUInt8(),l=o.readUInt8();let b=!1;a===Ut.ADVANCED_TRANSACTION_MARKER&&l===Ut.ADVANCED_TRANSACTION_FLAG?b=!0:o.offset-=2;const v=o.readVarInt();for(let S=0;S<v;++S)c.ins.push({hash:o.readSlice(32),index:o.readUInt32(),script:o.readVarSlice(),sequence:o.readUInt32(),witness:EMPTY_WITNESS});const A=o.readVarInt();for(let S=0;S<A;++S)c.outs.push({value:o.readUInt64(),script:o.readVarSlice()});if(b){for(let S=0;S<v;++S)c.ins[S].witness=o.readVector();if(!c.hasWitnesses())throw new Error("Transaction has superfluous witness data")}if(c.locktime=o.readUInt32(),n)return c;if(o.offset!==e.length)throw new Error("Transaction has unexpected data");return c}static fromHex(e){return Ut.fromBuffer(Buffer$1$1.from(e,"hex"),!1)}static isCoinbaseHash(e){typeforce$1(types$1.Hash256bit,e);for(let n=0;n<32;++n)if(e[n]!==0)return!1;return!0}isCoinbase(){return this.ins.length===1&&Ut.isCoinbaseHash(this.ins[0].hash)}addInput(e,n,o,c){return typeforce$1(types$1.tuple(types$1.Hash256bit,types$1.UInt32,types$1.maybe(types$1.UInt32),types$1.maybe(types$1.Buffer)),arguments),types$1.Null(o)&&(o=Ut.DEFAULT_SEQUENCE),this.ins.push({hash:e,index:n,script:c||EMPTY_BUFFER,sequence:o,witness:EMPTY_WITNESS})-1}addOutput(e,n){return typeforce$1(types$1.tuple(types$1.Buffer,types$1.Satoshi),arguments),this.outs.push({script:e,value:n})-1}hasWitnesses(){return this.ins.some(e=>e.witness.length!==0)}weight(){const e=this.byteLength(!1),n=this.byteLength(!0);return e*3+n}virtualSize(){return Math.ceil(this.weight()/4)}byteLength(e=!0){const n=e&&this.hasWitnesses();return(n?10:8)+bufferutils_1$2.varuint.encodingLength(this.ins.length)+bufferutils_1$2.varuint.encodingLength(this.outs.length)+this.ins.reduce((o,c)=>o+40+varSliceSize(c.script),0)+this.outs.reduce((o,c)=>o+8+varSliceSize(c.script),0)+(n?this.ins.reduce((o,c)=>o+vectorSize(c.witness),0):0)}clone(){const e=new Ut;return e.version=this.version,e.locktime=this.locktime,e.ins=this.ins.map(n=>({hash:n.hash,index:n.index,script:n.script,sequence:n.sequence,witness:n.witness})),e.outs=this.outs.map(n=>({script:n.script,value:n.value})),e}hashForSignature(e,n,o){if(typeforce$1(types$1.tuple(types$1.UInt32,types$1.Buffer,types$1.Number),arguments),e>=this.ins.length)return ONE;const c=bscript$2.compile(bscript$2.decompile(n).filter(b=>b!==script_1.OPS.OP_CODESEPARATOR)),a=this.clone();if((o&31)===Ut.SIGHASH_NONE)a.outs=[],a.ins.forEach((b,v)=>{v!==e&&(b.sequence=0)});else if((o&31)===Ut.SIGHASH_SINGLE){if(e>=this.outs.length)return ONE;a.outs.length=e+1;for(let b=0;b<e;b++)a.outs[b]=BLANK_OUTPUT;a.ins.forEach((b,v)=>{v!==e&&(b.sequence=0)})}o&Ut.SIGHASH_ANYONECANPAY?(a.ins=[a.ins[e]],a.ins[0].script=c):(a.ins.forEach(b=>{b.script=EMPTY_BUFFER}),a.ins[e].script=c);const l=Buffer$1$1.allocUnsafe(a.byteLength(!1)+4);return l.writeInt32LE(o,l.length-4),a.__toBuffer(l,0,!1),bcrypto$1.hash256(l)}hashForWitnessV1(e,n,o,c,a,l){if(typeforce$1(types$1.tuple(types$1.UInt32,typeforce$1.arrayOf(types$1.Buffer),typeforce$1.arrayOf(types$1.Satoshi),types$1.UInt32),arguments),o.length!==this.ins.length||n.length!==this.ins.length)throw new Error("Must supply prevout script and value for all inputs");const b=c===Ut.SIGHASH_DEFAULT?Ut.SIGHASH_ALL:c&Ut.SIGHASH_OUTPUT_MASK,A=(c&Ut.SIGHASH_INPUT_MASK)===Ut.SIGHASH_ANYONECANPAY,S=b===Ut.SIGHASH_NONE,M=b===Ut.SIGHASH_SINGLE;let B=EMPTY_BUFFER,P=EMPTY_BUFFER,L=EMPTY_BUFFER,F=EMPTY_BUFFER,U=EMPTY_BUFFER;if(!A){let te=bufferutils_1$2.BufferWriter.withCapacity(36*this.ins.length);this.ins.forEach(ce=>{te.writeSlice(ce.hash),te.writeUInt32(ce.index)}),B=bcrypto$1.sha256(te.end()),te=bufferutils_1$2.BufferWriter.withCapacity(8*this.ins.length),o.forEach(ce=>te.writeUInt64(ce)),P=bcrypto$1.sha256(te.end()),te=bufferutils_1$2.BufferWriter.withCapacity(n.map(varSliceSize).reduce((ce,ue)=>ce+ue)),n.forEach(ce=>te.writeVarSlice(ce)),L=bcrypto$1.sha256(te.end()),te=bufferutils_1$2.BufferWriter.withCapacity(4*this.ins.length),this.ins.forEach(ce=>te.writeUInt32(ce.sequence)),F=bcrypto$1.sha256(te.end())}if(S||M){if(M&&e<this.outs.length){const te=this.outs[e],ce=bufferutils_1$2.BufferWriter.withCapacity(8+varSliceSize(te.script));ce.writeUInt64(te.value),ce.writeVarSlice(te.script),U=bcrypto$1.sha256(ce.end())}}else{const te=this.outs.map(ue=>8+varSliceSize(ue.script)).reduce((ue,Ae)=>ue+Ae),ce=bufferutils_1$2.BufferWriter.withCapacity(te);this.outs.forEach(ue=>{ce.writeUInt64(ue.value),ce.writeVarSlice(ue.script)}),U=bcrypto$1.sha256(ce.end())}const q=(a?2:0)+(l?1:0),X=174-(A?49:0)-(S?32:0)+(l?32:0)+(a?37:0),ee=bufferutils_1$2.BufferWriter.withCapacity(X);if(ee.writeUInt8(c),ee.writeInt32(this.version),ee.writeUInt32(this.locktime),ee.writeSlice(B),ee.writeSlice(P),ee.writeSlice(L),ee.writeSlice(F),S||M||ee.writeSlice(U),ee.writeUInt8(q),A){const te=this.ins[e];ee.writeSlice(te.hash),ee.writeUInt32(te.index),ee.writeUInt64(o[e]),ee.writeVarSlice(n[e]),ee.writeUInt32(te.sequence)}else ee.writeUInt32(e);if(l){const te=bufferutils_1$2.BufferWriter.withCapacity(varSliceSize(l));te.writeVarSlice(l),ee.writeSlice(bcrypto$1.sha256(te.end()))}return M&&ee.writeSlice(U),a&&(ee.writeSlice(a),ee.writeUInt8(0),ee.writeUInt32(4294967295)),bcrypto$1.taggedHash("TapSighash",Buffer$1$1.concat([Buffer$1$1.from([0]),ee.end()]))}hashForWitnessV0(e,n,o,c){typeforce$1(types$1.tuple(types$1.UInt32,types$1.Buffer,types$1.Satoshi,types$1.UInt32),arguments);let a=Buffer$1$1.from([]),l,b=ZERO,v=ZERO,A=ZERO;if(c&Ut.SIGHASH_ANYONECANPAY||(a=Buffer$1$1.allocUnsafe(36*this.ins.length),l=new bufferutils_1$2.BufferWriter(a,0),this.ins.forEach(M=>{l.writeSlice(M.hash),l.writeUInt32(M.index)}),v=bcrypto$1.hash256(a)),!(c&Ut.SIGHASH_ANYONECANPAY)&&(c&31)!==Ut.SIGHASH_SINGLE&&(c&31)!==Ut.SIGHASH_NONE&&(a=Buffer$1$1.allocUnsafe(4*this.ins.length),l=new bufferutils_1$2.BufferWriter(a,0),this.ins.forEach(M=>{l.writeUInt32(M.sequence)}),A=bcrypto$1.hash256(a)),(c&31)!==Ut.SIGHASH_SINGLE&&(c&31)!==Ut.SIGHASH_NONE){const M=this.outs.reduce((B,P)=>B+8+varSliceSize(P.script),0);a=Buffer$1$1.allocUnsafe(M),l=new bufferutils_1$2.BufferWriter(a,0),this.outs.forEach(B=>{l.writeUInt64(B.value),l.writeVarSlice(B.script)}),b=bcrypto$1.hash256(a)}else if((c&31)===Ut.SIGHASH_SINGLE&&e<this.outs.length){const M=this.outs[e];a=Buffer$1$1.allocUnsafe(8+varSliceSize(M.script)),l=new bufferutils_1$2.BufferWriter(a,0),l.writeUInt64(M.value),l.writeVarSlice(M.script),b=bcrypto$1.hash256(a)}a=Buffer$1$1.allocUnsafe(156+varSliceSize(n)),l=new bufferutils_1$2.BufferWriter(a,0);const S=this.ins[e];return l.writeInt32(this.version),l.writeSlice(v),l.writeSlice(A),l.writeSlice(S.hash),l.writeUInt32(S.index),l.writeVarSlice(n),l.writeUInt64(o),l.writeUInt32(S.sequence),l.writeSlice(b),l.writeUInt32(this.locktime),l.writeUInt32(c),bcrypto$1.hash256(a)}getHash(e){return e&&this.isCoinbase()?Buffer$1$1.alloc(32,0):bcrypto$1.hash256(this.__toBuffer(void 0,void 0,e))}getId(){return(0,bufferutils_1$2.reverseBuffer)(this.getHash(!1)).toString("hex")}toBuffer(e,n){return this.__toBuffer(e,n,!0)}toHex(){return this.toBuffer(void 0,void 0).toString("hex")}setInputScript(e,n){typeforce$1(types$1.tuple(types$1.Number,types$1.Buffer),arguments),this.ins[e].script=n}setWitness(e,n){typeforce$1(types$1.tuple(types$1.Number,[types$1.Buffer]),arguments),this.ins[e].witness=n}__toBuffer(e,n,o=!1){e||(e=Buffer$1$1.allocUnsafe(this.byteLength(o)));const c=new bufferutils_1$2.BufferWriter(e,n||0);c.writeInt32(this.version);const a=o&&this.hasWitnesses();return a&&(c.writeUInt8(Ut.ADVANCED_TRANSACTION_MARKER),c.writeUInt8(Ut.ADVANCED_TRANSACTION_FLAG)),c.writeVarInt(this.ins.length),this.ins.forEach(l=>{c.writeSlice(l.hash),c.writeUInt32(l.index),c.writeVarSlice(l.script),c.writeUInt32(l.sequence)}),c.writeVarInt(this.outs.length),this.outs.forEach(l=>{isOutput(l)?c.writeUInt64(l.value):c.writeSlice(l.valueBuffer),c.writeVarSlice(l.script)}),a&&this.ins.forEach(l=>{c.writeVector(l.witness)}),c.writeUInt32(this.locktime),n!==void 0?e.slice(n,c.offset):e}};transaction.Transaction=Transaction$1;Transaction$1.DEFAULT_SEQUENCE=4294967295;Transaction$1.SIGHASH_DEFAULT=0;Transaction$1.SIGHASH_ALL=1;Transaction$1.SIGHASH_NONE=2;Transaction$1.SIGHASH_SINGLE=3;Transaction$1.SIGHASH_ANYONECANPAY=128;Transaction$1.SIGHASH_OUTPUT_MASK=3;Transaction$1.SIGHASH_INPUT_MASK=128;Transaction$1.ADVANCED_TRANSACTION_MARKER=0;Transaction$1.ADVANCED_TRANSACTION_FLAG=1;Object.defineProperty(block,"__esModule",{value:!0});block.Block=void 0;const bufferutils_1$1=bufferutils,bcrypto=crypto$3,merkle_1=merkle,transaction_1$3=transaction,types=types$4,{typeforce}=types,errorMerkleNoTxes=new TypeError("Cannot compute merkle root for zero transactions"),errorWitnessNotSegwit=new TypeError("Cannot compute witness commit for non-segwit block");class Block{constructor(){this.version=1,this.prevHash=void 0,this.merkleRoot=void 0,this.timestamp=0,this.witnessCommit=void 0,this.bits=0,this.nonce=0,this.transactions=void 0}static fromBuffer(e){if(e.length<80)throw new Error("Buffer too small (< 80 bytes)");const n=new bufferutils_1$1.BufferReader(e),o=new Block;if(o.version=n.readInt32(),o.prevHash=n.readSlice(32),o.merkleRoot=n.readSlice(32),o.timestamp=n.readUInt32(),o.bits=n.readUInt32(),o.nonce=n.readUInt32(),e.length===80)return o;const c=()=>{const b=transaction_1$3.Transaction.fromBuffer(n.buffer.slice(n.offset),!0);return n.offset+=b.byteLength(),b},a=n.readVarInt();o.transactions=[];for(let b=0;b<a;++b){const v=c();o.transactions.push(v)}const l=o.getWitnessCommit();return l&&(o.witnessCommit=l),o}static fromHex(e){return Block.fromBuffer(Buffer$1$1.from(e,"hex"))}static calculateTarget(e){const n=((e&4278190080)>>24)-3,o=e&8388607,c=Buffer$1$1.alloc(32,0);return c.writeUIntBE(o,29-n,3),c}static calculateMerkleRoot(e,n){if(typeforce([{getHash:types.Function}],e),e.length===0)throw errorMerkleNoTxes;if(n&&!txesHaveWitnessCommit(e))throw errorWitnessNotSegwit;const o=e.map(a=>a.getHash(n)),c=(0,merkle_1.fastMerkleRoot)(o,bcrypto.hash256);return n?bcrypto.hash256(Buffer$1$1.concat([c,e[0].ins[0].witness[0]])):c}getWitnessCommit(){if(!txesHaveWitnessCommit(this.transactions))return null;const e=this.transactions[0].outs.filter(o=>o.script.slice(0,6).equals(Buffer$1$1.from("6a24aa21a9ed","hex"))).map(o=>o.script.slice(6,38));if(e.length===0)return null;const n=e[e.length-1];return n instanceof Buffer$1$1&&n.length===32?n:null}hasWitnessCommit(){return this.witnessCommit instanceof Buffer$1$1&&this.witnessCommit.length===32||this.getWitnessCommit()!==null}hasWitness(){return anyTxHasWitness(this.transactions)}weight(){const e=this.byteLength(!1,!1),n=this.byteLength(!1,!0);return e*3+n}byteLength(e,n=!0){return e||!this.transactions?80:80+bufferutils_1$1.varuint.encodingLength(this.transactions.length)+this.transactions.reduce((o,c)=>o+c.byteLength(n),0)}getHash(){return bcrypto.hash256(this.toBuffer(!0))}getId(){return(0,bufferutils_1$1.reverseBuffer)(this.getHash()).toString("hex")}getUTCDate(){const e=new Date(0);return e.setUTCSeconds(this.timestamp),e}toBuffer(e){const n=Buffer$1$1.allocUnsafe(this.byteLength(e)),o=new bufferutils_1$1.BufferWriter(n);return o.writeInt32(this.version),o.writeSlice(this.prevHash),o.writeSlice(this.merkleRoot),o.writeUInt32(this.timestamp),o.writeUInt32(this.bits),o.writeUInt32(this.nonce),e||!this.transactions||(bufferutils_1$1.varuint.encode(this.transactions.length,n,o.offset),o.offset+=bufferutils_1$1.varuint.encode.bytes,this.transactions.forEach(c=>{const a=c.byteLength();c.toBuffer(n,o.offset),o.offset+=a})),n}toHex(e){return this.toBuffer(e).toString("hex")}checkTxRoots(){const e=this.hasWitnessCommit();return!e&&this.hasWitness()?!1:this.__checkMerkleRoot()&&(e?this.__checkWitnessCommit():!0)}checkProofOfWork(){const e=(0,bufferutils_1$1.reverseBuffer)(this.getHash()),n=Block.calculateTarget(this.bits);return e.compare(n)<=0}__checkMerkleRoot(){if(!this.transactions)throw errorMerkleNoTxes;const e=Block.calculateMerkleRoot(this.transactions);return this.merkleRoot.compare(e)===0}__checkWitnessCommit(){if(!this.transactions)throw errorMerkleNoTxes;if(!this.hasWitnessCommit())throw errorWitnessNotSegwit;const e=Block.calculateMerkleRoot(this.transactions,!0);return this.witnessCommit.compare(e)===0}}block.Block=Block;function txesHaveWitnessCommit(t){return t instanceof Array&&t[0]&&t[0].ins&&t[0].ins instanceof Array&&t[0].ins[0]&&t[0].ins[0].witness&&t[0].ins[0].witness instanceof Array&&t[0].ins[0].witness.length>0}function anyTxHasWitness(t){return t instanceof Array&&t.some(e=>typeof e=="object"&&e.ins instanceof Array&&e.ins.some(n=>typeof n=="object"&&n.witness instanceof Array&&n.witness.length>0))}var psbt$1={},psbt={},combiner={},parser={},fromBuffer={},converter={},typeFields={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.UNSIGNED_TX=0]="UNSIGNED_TX",e[e.GLOBAL_XPUB=1]="GLOBAL_XPUB"}(t.GlobalTypes||(t.GlobalTypes={})),t.GLOBAL_TYPE_NAMES=["unsignedTx","globalXpub"],function(e){e[e.NON_WITNESS_UTXO=0]="NON_WITNESS_UTXO",e[e.WITNESS_UTXO=1]="WITNESS_UTXO",e[e.PARTIAL_SIG=2]="PARTIAL_SIG",e[e.SIGHASH_TYPE=3]="SIGHASH_TYPE",e[e.REDEEM_SCRIPT=4]="REDEEM_SCRIPT",e[e.WITNESS_SCRIPT=5]="WITNESS_SCRIPT",e[e.BIP32_DERIVATION=6]="BIP32_DERIVATION",e[e.FINAL_SCRIPTSIG=7]="FINAL_SCRIPTSIG",e[e.FINAL_SCRIPTWITNESS=8]="FINAL_SCRIPTWITNESS",e[e.POR_COMMITMENT=9]="POR_COMMITMENT",e[e.TAP_KEY_SIG=19]="TAP_KEY_SIG",e[e.TAP_SCRIPT_SIG=20]="TAP_SCRIPT_SIG",e[e.TAP_LEAF_SCRIPT=21]="TAP_LEAF_SCRIPT",e[e.TAP_BIP32_DERIVATION=22]="TAP_BIP32_DERIVATION",e[e.TAP_INTERNAL_KEY=23]="TAP_INTERNAL_KEY",e[e.TAP_MERKLE_ROOT=24]="TAP_MERKLE_ROOT"}(t.InputTypes||(t.InputTypes={})),t.INPUT_TYPE_NAMES=["nonWitnessUtxo","witnessUtxo","partialSig","sighashType","redeemScript","witnessScript","bip32Derivation","finalScriptSig","finalScriptWitness","porCommitment","tapKeySig","tapScriptSig","tapLeafScript","tapBip32Derivation","tapInternalKey","tapMerkleRoot"],function(e){e[e.REDEEM_SCRIPT=0]="REDEEM_SCRIPT",e[e.WITNESS_SCRIPT=1]="WITNESS_SCRIPT",e[e.BIP32_DERIVATION=2]="BIP32_DERIVATION",e[e.TAP_INTERNAL_KEY=5]="TAP_INTERNAL_KEY",e[e.TAP_TREE=6]="TAP_TREE",e[e.TAP_BIP32_DERIVATION=7]="TAP_BIP32_DERIVATION"}(t.OutputTypes||(t.OutputTypes={})),t.OUTPUT_TYPE_NAMES=["redeemScript","witnessScript","bip32Derivation","tapInternalKey","tapTree","tapBip32Derivation"]})(typeFields);var globalXpub$1={};Object.defineProperty(globalXpub$1,"__esModule",{value:!0});const typeFields_1$g=typeFields,range$2=t=>[...Array(t).keys()];function decode$d(t){if(t.key[0]!==typeFields_1$g.GlobalTypes.GLOBAL_XPUB)throw new Error("Decode Error: could not decode globalXpub with key 0x"+t.key.toString("hex"));if(t.key.length!==79||![2,3].includes(t.key[46]))throw new Error("Decode Error: globalXpub has invalid extended pubkey in key 0x"+t.key.toString("hex"));if(t.value.length/4%1!==0)throw new Error("Decode Error: Global GLOBAL_XPUB value length should be multiple of 4");const e=t.key.slice(1),n={masterFingerprint:t.value.slice(0,4),extendedPubkey:e,path:"m"};for(const o of range$2(t.value.length/4-1)){const c=t.value.readUInt32LE(o*4+4),a=!!(c&2147483648),l=c&2147483647;n.path+="/"+l.toString(10)+(a?"'":"")}return n}globalXpub$1.decode=decode$d;function encode$e(t){const e=Buffer$1$1.from([typeFields_1$g.GlobalTypes.GLOBAL_XPUB]),n=Buffer$1$1.concat([e,t.extendedPubkey]),o=t.path.split("/"),c=Buffer$1$1.allocUnsafe(o.length*4);t.masterFingerprint.copy(c,0);let a=4;return o.slice(1).forEach(l=>{const b=l.slice(-1)==="'";let v=2147483647&parseInt(b?l.slice(0,-1):l,10);b&&(v+=2147483648),c.writeUInt32LE(v,a),a+=4}),{key:n,value:c}}globalXpub$1.encode=encode$e;globalXpub$1.expected="{ masterFingerprint: Buffer; extendedPubkey: Buffer; path: string; }";function check$c(t){const e=t.extendedPubkey,n=t.masterFingerprint,o=t.path;return Buffer$1$1.isBuffer(e)&&e.length===78&&[2,3].indexOf(e[45])>-1&&Buffer$1$1.isBuffer(n)&&n.length===4&&typeof o=="string"&&!!o.match(/^m(\/\d+'?)*$/)}globalXpub$1.check=check$c;function canAddToArray$3(t,e,n){const o=e.extendedPubkey.toString("hex");return n.has(o)?!1:(n.add(o),t.filter(c=>c.extendedPubkey.equals(e.extendedPubkey)).length===0)}globalXpub$1.canAddToArray=canAddToArray$3;var unsignedTx$1={};Object.defineProperty(unsignedTx$1,"__esModule",{value:!0});const typeFields_1$f=typeFields;function encode$d(t){return{key:Buffer$1$1.from([typeFields_1$f.GlobalTypes.UNSIGNED_TX]),value:t.toBuffer()}}unsignedTx$1.encode=encode$d;var finalScriptSig$1={};Object.defineProperty(finalScriptSig$1,"__esModule",{value:!0});const typeFields_1$e=typeFields;function decode$c(t){if(t.key[0]!==typeFields_1$e.InputTypes.FINAL_SCRIPTSIG)throw new Error("Decode Error: could not decode finalScriptSig with key 0x"+t.key.toString("hex"));return t.value}finalScriptSig$1.decode=decode$c;function encode$c(t){return{key:Buffer$1$1.from([typeFields_1$e.InputTypes.FINAL_SCRIPTSIG]),value:t}}finalScriptSig$1.encode=encode$c;finalScriptSig$1.expected="Buffer";function check$b(t){return Buffer$1$1.isBuffer(t)}finalScriptSig$1.check=check$b;function canAdd$8(t,e){return!!t&&!!e&&t.finalScriptSig===void 0}finalScriptSig$1.canAdd=canAdd$8;var finalScriptWitness$1={};Object.defineProperty(finalScriptWitness$1,"__esModule",{value:!0});const typeFields_1$d=typeFields;function decode$b(t){if(t.key[0]!==typeFields_1$d.InputTypes.FINAL_SCRIPTWITNESS)throw new Error("Decode Error: could not decode finalScriptWitness with key 0x"+t.key.toString("hex"));return t.value}finalScriptWitness$1.decode=decode$b;function encode$b(t){return{key:Buffer$1$1.from([typeFields_1$d.InputTypes.FINAL_SCRIPTWITNESS]),value:t}}finalScriptWitness$1.encode=encode$b;finalScriptWitness$1.expected="Buffer";function check$a(t){return Buffer$1$1.isBuffer(t)}finalScriptWitness$1.check=check$a;function canAdd$7(t,e){return!!t&&!!e&&t.finalScriptWitness===void 0}finalScriptWitness$1.canAdd=canAdd$7;var nonWitnessUtxo$1={};Object.defineProperty(nonWitnessUtxo$1,"__esModule",{value:!0});const typeFields_1$c=typeFields;function decode$a(t){if(t.key[0]!==typeFields_1$c.InputTypes.NON_WITNESS_UTXO)throw new Error("Decode Error: could not decode nonWitnessUtxo with key 0x"+t.key.toString("hex"));return t.value}nonWitnessUtxo$1.decode=decode$a;function encode$a(t){return{key:Buffer$1$1.from([typeFields_1$c.InputTypes.NON_WITNESS_UTXO]),value:t}}nonWitnessUtxo$1.encode=encode$a;nonWitnessUtxo$1.expected="Buffer";function check$9(t){return Buffer$1$1.isBuffer(t)}nonWitnessUtxo$1.check=check$9;function canAdd$6(t,e){return!!t&&!!e&&t.nonWitnessUtxo===void 0}nonWitnessUtxo$1.canAdd=canAdd$6;var partialSig$1={};Object.defineProperty(partialSig$1,"__esModule",{value:!0});const typeFields_1$b=typeFields;function decode$9(t){if(t.key[0]!==typeFields_1$b.InputTypes.PARTIAL_SIG)throw new Error("Decode Error: could not decode partialSig with key 0x"+t.key.toString("hex"));if(!(t.key.length===34||t.key.length===66)||![2,3,4].includes(t.key[1]))throw new Error("Decode Error: partialSig has invalid pubkey in key 0x"+t.key.toString("hex"));return{pubkey:t.key.slice(1),signature:t.value}}partialSig$1.decode=decode$9;function encode$9(t){const e=Buffer$1$1.from([typeFields_1$b.InputTypes.PARTIAL_SIG]);return{key:Buffer$1$1.concat([e,t.pubkey]),value:t.signature}}partialSig$1.encode=encode$9;partialSig$1.expected="{ pubkey: Buffer; signature: Buffer; }";function check$8(t){return Buffer$1$1.isBuffer(t.pubkey)&&Buffer$1$1.isBuffer(t.signature)&&[33,65].includes(t.pubkey.length)&&[2,3,4].includes(t.pubkey[0])&&isDerSigWithSighash(t.signature)}partialSig$1.check=check$8;function isDerSigWithSighash(t){if(!Buffer$1$1.isBuffer(t)||t.length<9||t[0]!==48||t.length!==t[1]+3||t[2]!==2)return!1;const e=t[3];if(e>33||e<1||t[3+e+1]!==2)return!1;const n=t[3+e+2];return!(n>33||n<1||t.length!==3+e+2+n+2)}function canAddToArray$2(t,e,n){const o=e.pubkey.toString("hex");return n.has(o)?!1:(n.add(o),t.filter(c=>c.pubkey.equals(e.pubkey)).length===0)}partialSig$1.canAddToArray=canAddToArray$2;var porCommitment$1={};Object.defineProperty(porCommitment$1,"__esModule",{value:!0});const typeFields_1$a=typeFields;function decode$8(t){if(t.key[0]!==typeFields_1$a.InputTypes.POR_COMMITMENT)throw new Error("Decode Error: could not decode porCommitment with key 0x"+t.key.toString("hex"));return t.value.toString("utf8")}porCommitment$1.decode=decode$8;function encode$8(t){return{key:Buffer$1$1.from([typeFields_1$a.InputTypes.POR_COMMITMENT]),value:Buffer$1$1.from(t,"utf8")}}porCommitment$1.encode=encode$8;porCommitment$1.expected="string";function check$7(t){return typeof t=="string"}porCommitment$1.check=check$7;function canAdd$5(t,e){return!!t&&!!e&&t.porCommitment===void 0}porCommitment$1.canAdd=canAdd$5;var sighashType$1={};Object.defineProperty(sighashType$1,"__esModule",{value:!0});const typeFields_1$9=typeFields;function decode$7(t){if(t.key[0]!==typeFields_1$9.InputTypes.SIGHASH_TYPE)throw new Error("Decode Error: could not decode sighashType with key 0x"+t.key.toString("hex"));return t.value.readUInt32LE(0)}sighashType$1.decode=decode$7;function encode$7(t){const e=Buffer$1$1.from([typeFields_1$9.InputTypes.SIGHASH_TYPE]),n=Buffer$1$1.allocUnsafe(4);return n.writeUInt32LE(t,0),{key:e,value:n}}sighashType$1.encode=encode$7;sighashType$1.expected="number";function check$6(t){return typeof t=="number"}sighashType$1.check=check$6;function canAdd$4(t,e){return!!t&&!!e&&t.sighashType===void 0}sighashType$1.canAdd=canAdd$4;var tapKeySig$1={};Object.defineProperty(tapKeySig$1,"__esModule",{value:!0});const typeFields_1$8=typeFields;function decode$6(t){if(t.key[0]!==typeFields_1$8.InputTypes.TAP_KEY_SIG||t.key.length!==1)throw new Error("Decode Error: could not decode tapKeySig with key 0x"+t.key.toString("hex"));if(!check$5(t.value))throw new Error("Decode Error: tapKeySig not a valid 64-65-byte BIP340 signature");return t.value}tapKeySig$1.decode=decode$6;function encode$6(t){return{key:Buffer$1$1.from([typeFields_1$8.InputTypes.TAP_KEY_SIG]),value:t}}tapKeySig$1.encode=encode$6;tapKeySig$1.expected="Buffer";function check$5(t){return Buffer$1$1.isBuffer(t)&&(t.length===64||t.length===65)}tapKeySig$1.check=check$5;function canAdd$3(t,e){return!!t&&!!e&&t.tapKeySig===void 0}tapKeySig$1.canAdd=canAdd$3;var tapLeafScript$1={};Object.defineProperty(tapLeafScript$1,"__esModule",{value:!0});const typeFields_1$7=typeFields;function decode$5(t){if(t.key[0]!==typeFields_1$7.InputTypes.TAP_LEAF_SCRIPT)throw new Error("Decode Error: could not decode tapLeafScript with key 0x"+t.key.toString("hex"));if((t.key.length-2)%32!==0)throw new Error("Decode Error: tapLeafScript has invalid control block in key 0x"+t.key.toString("hex"));const e=t.value[t.value.length-1];if((t.key[1]&254)!==e)throw new Error("Decode Error: tapLeafScript bad leaf version in key 0x"+t.key.toString("hex"));const n=t.value.slice(0,-1);return{controlBlock:t.key.slice(1),script:n,leafVersion:e}}tapLeafScript$1.decode=decode$5;function encode$5(t){const e=Buffer$1$1.from([typeFields_1$7.InputTypes.TAP_LEAF_SCRIPT]),n=Buffer$1$1.from([t.leafVersion]);return{key:Buffer$1$1.concat([e,t.controlBlock]),value:Buffer$1$1.concat([t.script,n])}}tapLeafScript$1.encode=encode$5;tapLeafScript$1.expected="{ controlBlock: Buffer; leafVersion: number, script: Buffer; }";function check$4(t){return Buffer$1$1.isBuffer(t.controlBlock)&&(t.controlBlock.length-1)%32===0&&(t.controlBlock[0]&254)===t.leafVersion&&Buffer$1$1.isBuffer(t.script)}tapLeafScript$1.check=check$4;function canAddToArray$1(t,e,n){const o=e.controlBlock.toString("hex");return n.has(o)?!1:(n.add(o),t.filter(c=>c.controlBlock.equals(e.controlBlock)).length===0)}tapLeafScript$1.canAddToArray=canAddToArray$1;var tapMerkleRoot$1={};Object.defineProperty(tapMerkleRoot$1,"__esModule",{value:!0});const typeFields_1$6=typeFields;function decode$4(t){if(t.key[0]!==typeFields_1$6.InputTypes.TAP_MERKLE_ROOT||t.key.length!==1)throw new Error("Decode Error: could not decode tapMerkleRoot with key 0x"+t.key.toString("hex"));if(!check$3(t.value))throw new Error("Decode Error: tapMerkleRoot not a 32-byte hash");return t.value}tapMerkleRoot$1.decode=decode$4;function encode$4(t){return{key:Buffer$1$1.from([typeFields_1$6.InputTypes.TAP_MERKLE_ROOT]),value:t}}tapMerkleRoot$1.encode=encode$4;tapMerkleRoot$1.expected="Buffer";function check$3(t){return Buffer$1$1.isBuffer(t)&&t.length===32}tapMerkleRoot$1.check=check$3;function canAdd$2(t,e){return!!t&&!!e&&t.tapMerkleRoot===void 0}tapMerkleRoot$1.canAdd=canAdd$2;var tapScriptSig$1={};Object.defineProperty(tapScriptSig$1,"__esModule",{value:!0});const typeFields_1$5=typeFields;function decode$3(t){if(t.key[0]!==typeFields_1$5.InputTypes.TAP_SCRIPT_SIG)throw new Error("Decode Error: could not decode tapScriptSig with key 0x"+t.key.toString("hex"));if(t.key.length!==65)throw new Error("Decode Error: tapScriptSig has invalid key 0x"+t.key.toString("hex"));if(t.value.length!==64&&t.value.length!==65)throw new Error("Decode Error: tapScriptSig has invalid signature in key 0x"+t.key.toString("hex"));const e=t.key.slice(1,33),n=t.key.slice(33);return{pubkey:e,leafHash:n,signature:t.value}}tapScriptSig$1.decode=decode$3;function encode$3(t){const e=Buffer$1$1.from([typeFields_1$5.InputTypes.TAP_SCRIPT_SIG]);return{key:Buffer$1$1.concat([e,t.pubkey,t.leafHash]),value:t.signature}}tapScriptSig$1.encode=encode$3;tapScriptSig$1.expected="{ pubkey: Buffer; leafHash: Buffer; signature: Buffer; }";function check$2(t){return Buffer$1$1.isBuffer(t.pubkey)&&Buffer$1$1.isBuffer(t.leafHash)&&Buffer$1$1.isBuffer(t.signature)&&t.pubkey.length===32&&t.leafHash.length===32&&(t.signature.length===64||t.signature.length===65)}tapScriptSig$1.check=check$2;function canAddToArray(t,e,n){const o=e.pubkey.toString("hex")+e.leafHash.toString("hex");return n.has(o)?!1:(n.add(o),t.filter(c=>c.pubkey.equals(e.pubkey)&&c.leafHash.equals(e.leafHash)).length===0)}tapScriptSig$1.canAddToArray=canAddToArray;var witnessUtxo$1={},tools={},varint={};Object.defineProperty(varint,"__esModule",{value:!0});const MAX_SAFE_INTEGER=9007199254740991;function checkUInt53(t){if(t<0||t>MAX_SAFE_INTEGER||t%1!==0)throw new RangeError("value out of range")}function encode$2(t,e,n){if(checkUInt53(t),e||(e=Buffer$1$1.allocUnsafe(encodingLength(t))),!Buffer$1$1.isBuffer(e))throw new TypeError("buffer must be a Buffer instance");return n||(n=0),t<253?(e.writeUInt8(t,n),Object.assign(encode$2,{bytes:1})):t<=65535?(e.writeUInt8(253,n),e.writeUInt16LE(t,n+1),Object.assign(encode$2,{bytes:3})):t<=4294967295?(e.writeUInt8(254,n),e.writeUInt32LE(t,n+1),Object.assign(encode$2,{bytes:5})):(e.writeUInt8(255,n),e.writeUInt32LE(t>>>0,n+1),e.writeUInt32LE(t/4294967296|0,n+5),Object.assign(encode$2,{bytes:9})),e}varint.encode=encode$2;function decode$2(t,e){if(!Buffer$1$1.isBuffer(t))throw new TypeError("buffer must be a Buffer instance");e||(e=0);const n=t.readUInt8(e);if(n<253)return Object.assign(decode$2,{bytes:1}),n;if(n===253)return Object.assign(decode$2,{bytes:3}),t.readUInt16LE(e+1);if(n===254)return Object.assign(decode$2,{bytes:5}),t.readUInt32LE(e+1);{Object.assign(decode$2,{bytes:9});const o=t.readUInt32LE(e+1),a=t.readUInt32LE(e+5)*4294967296+o;return checkUInt53(a),a}}varint.decode=decode$2;function encodingLength(t){return checkUInt53(t),t<253?1:t<=65535?3:t<=4294967295?5:9}varint.encodingLength=encodingLength;Object.defineProperty(tools,"__esModule",{value:!0});const varuint$6=varint;tools.range=t=>[...Array(t).keys()];function reverseBuffer(t){if(t.length<1)return t;let e=t.length-1,n=0;for(let o=0;o<t.length/2;o++)n=t[o],t[o]=t[e],t[e]=n,e--;return t}tools.reverseBuffer=reverseBuffer;function keyValsToBuffer(t){const e=t.map(keyValToBuffer);return e.push(Buffer$1$1.from([0])),Buffer$1$1.concat(e)}tools.keyValsToBuffer=keyValsToBuffer;function keyValToBuffer(t){const e=t.key.length,n=t.value.length,o=varuint$6.encodingLength(e),c=varuint$6.encodingLength(n),a=Buffer$1$1.allocUnsafe(o+e+c+n);return varuint$6.encode(e,a,0),t.key.copy(a,o),varuint$6.encode(n,a,o+e),t.value.copy(a,o+e+c),a}tools.keyValToBuffer=keyValToBuffer;function verifuint(t,e){if(typeof t!="number")throw new Error("cannot write a non-number as a number");if(t<0)throw new Error("specified a negative value for writing an unsigned value");if(t>e)throw new Error("RangeError: value out of range");if(Math.floor(t)!==t)throw new Error("value has a fractional component")}function readUInt64LE(t,e){const n=t.readUInt32LE(e);let o=t.readUInt32LE(e+4);return o*=4294967296,verifuint(o+n,9007199254740991),o+n}tools.readUInt64LE=readUInt64LE;function writeUInt64LE(t,e,n){return verifuint(e,9007199254740991),t.writeInt32LE(e&-1,n),t.writeUInt32LE(Math.floor(e/4294967296),n+4),n+8}tools.writeUInt64LE=writeUInt64LE;Object.defineProperty(witnessUtxo$1,"__esModule",{value:!0});const typeFields_1$4=typeFields,tools_1$2=tools,varuint$5=varint;function decode$1(t){if(t.key[0]!==typeFields_1$4.InputTypes.WITNESS_UTXO)throw new Error("Decode Error: could not decode witnessUtxo with key 0x"+t.key.toString("hex"));const e=tools_1$2.readUInt64LE(t.value,0);let n=8;const o=varuint$5.decode(t.value,n);n+=varuint$5.encodingLength(o);const c=t.value.slice(n);if(c.length!==o)throw new Error("Decode Error: WITNESS_UTXO script is not proper length");return{script:c,value:e}}witnessUtxo$1.decode=decode$1;function encode$1(t){const{script:e,value:n}=t,o=varuint$5.encodingLength(e.length),c=Buffer$1$1.allocUnsafe(8+o+e.length);return tools_1$2.writeUInt64LE(c,n,0),varuint$5.encode(e.length,c,8),e.copy(c,8+o),{key:Buffer$1$1.from([typeFields_1$4.InputTypes.WITNESS_UTXO]),value:c}}witnessUtxo$1.encode=encode$1;witnessUtxo$1.expected="{ script: Buffer; value: number; }";function check$1(t){return Buffer$1$1.isBuffer(t.script)&&typeof t.value=="number"}witnessUtxo$1.check=check$1;function canAdd$1(t,e){return!!t&&!!e&&t.witnessUtxo===void 0}witnessUtxo$1.canAdd=canAdd$1;var tapTree$1={};Object.defineProperty(tapTree$1,"__esModule",{value:!0});const typeFields_1$3=typeFields,varuint$4=varint;function decode(t){if(t.key[0]!==typeFields_1$3.OutputTypes.TAP_TREE||t.key.length!==1)throw new Error("Decode Error: could not decode tapTree with key 0x"+t.key.toString("hex"));let e=0;const n=[];for(;e<t.value.length;){const o=t.value[e++],c=t.value[e++],a=varuint$4.decode(t.value,e);e+=varuint$4.encodingLength(a),n.push({depth:o,leafVersion:c,script:t.value.slice(e,e+a)}),e+=a}return{leaves:n}}tapTree$1.decode=decode;function encode(t){const e=Buffer$1$1.from([typeFields_1$3.OutputTypes.TAP_TREE]),n=[].concat(...t.leaves.map(o=>[Buffer$1$1.of(o.depth,o.leafVersion),varuint$4.encode(o.script.length),o.script]));return{key:e,value:Buffer$1$1.concat(n)}}tapTree$1.encode=encode;tapTree$1.expected="{ leaves: [{ depth: number; leafVersion: number, script: Buffer; }] }";function check(t){return Array.isArray(t.leaves)&&t.leaves.every(e=>e.depth>=0&&e.depth<=128&&(e.leafVersion&254)===e.leafVersion&&Buffer$1$1.isBuffer(e.script))}tapTree$1.check=check;function canAdd(t,e){return!!t&&!!e&&t.tapTree===void 0}tapTree$1.canAdd=canAdd;var bip32Derivation$2={};Object.defineProperty(bip32Derivation$2,"__esModule",{value:!0});const range$1=t=>[...Array(t).keys()],isValidDERKey=t=>t.length===33&&[2,3].includes(t[0])||t.length===65&&t[0]===4;function makeConverter$4(t,e=isValidDERKey){function n(b){if(b.key[0]!==t)throw new Error("Decode Error: could not decode bip32Derivation with key 0x"+b.key.toString("hex"));const v=b.key.slice(1);if(!e(v))throw new Error("Decode Error: bip32Derivation has invalid pubkey in key 0x"+b.key.toString("hex"));if(b.value.length/4%1!==0)throw new Error("Decode Error: Input BIP32_DERIVATION value length should be multiple of 4");const A={masterFingerprint:b.value.slice(0,4),pubkey:v,path:"m"};for(const S of range$1(b.value.length/4-1)){const M=b.value.readUInt32LE(S*4+4),B=!!(M&2147483648),P=M&2147483647;A.path+="/"+P.toString(10)+(B?"'":"")}return A}function o(b){const v=Buffer$1$1.from([t]),A=Buffer$1$1.concat([v,b.pubkey]),S=b.path.split("/"),M=Buffer$1$1.allocUnsafe(S.length*4);b.masterFingerprint.copy(M,0);let B=4;return S.slice(1).forEach(P=>{const L=P.slice(-1)==="'";let F=2147483647&parseInt(L?P.slice(0,-1):P,10);L&&(F+=2147483648),M.writeUInt32LE(F,B),B+=4}),{key:A,value:M}}const c="{ masterFingerprint: Buffer; pubkey: Buffer; path: string; }";function a(b){return Buffer$1$1.isBuffer(b.pubkey)&&Buffer$1$1.isBuffer(b.masterFingerprint)&&typeof b.path=="string"&&e(b.pubkey)&&b.masterFingerprint.length===4}function l(b,v,A){const S=v.pubkey.toString("hex");return A.has(S)?!1:(A.add(S),b.filter(M=>M.pubkey.equals(v.pubkey)).length===0)}return{decode:n,encode:o,check:a,expected:c,canAddToArray:l}}bip32Derivation$2.makeConverter=makeConverter$4;var checkPubkey$1={};Object.defineProperty(checkPubkey$1,"__esModule",{value:!0});function makeChecker(t){return e;function e(n){let o;if(t.includes(n.key[0])&&(o=n.key.slice(1),!(o.length===33||o.length===65)||![2,3,4].includes(o[0])))throw new Error("Format Error: invalid pubkey in key 0x"+n.key.toString("hex"));return o}}checkPubkey$1.makeChecker=makeChecker;var redeemScript$1={};Object.defineProperty(redeemScript$1,"__esModule",{value:!0});function makeConverter$3(t){function e(l){if(l.key[0]!==t)throw new Error("Decode Error: could not decode redeemScript with key 0x"+l.key.toString("hex"));return l.value}function n(l){return{key:Buffer$1$1.from([t]),value:l}}const o="Buffer";function c(l){return Buffer$1$1.isBuffer(l)}function a(l,b){return!!l&&!!b&&l.redeemScript===void 0}return{decode:e,encode:n,check:c,expected:o,canAdd:a}}redeemScript$1.makeConverter=makeConverter$3;var tapBip32Derivation$1={};Object.defineProperty(tapBip32Derivation$1,"__esModule",{value:!0});const varuint$3=varint,bip32Derivation$1=bip32Derivation$2,isValidBIP340Key=t=>t.length===32;function makeConverter$2(t){const e=bip32Derivation$1.makeConverter(t,isValidBIP340Key);function n(l){const b=varuint$3.decode(l.value),v=varuint$3.encodingLength(b),A=e.decode({key:l.key,value:l.value.slice(v+b*32)}),S=new Array(b);for(let M=0,B=v;M<b;M++,B+=32)S[M]=l.value.slice(B,B+32);return Object.assign({},A,{leafHashes:S})}function o(l){const b=e.encode(l),v=varuint$3.encodingLength(l.leafHashes.length),A=Buffer$1$1.allocUnsafe(v);varuint$3.encode(l.leafHashes.length,A);const S=Buffer$1$1.concat([A,...l.leafHashes,b.value]);return Object.assign({},b,{value:S})}const c="{ masterFingerprint: Buffer; pubkey: Buffer; path: string; leafHashes: Buffer[]; }";function a(l){return Array.isArray(l.leafHashes)&&l.leafHashes.every(b=>Buffer$1$1.isBuffer(b)&&b.length===32)&&e.check(l)}return{decode:n,encode:o,check:a,expected:c,canAddToArray:e.canAddToArray}}tapBip32Derivation$1.makeConverter=makeConverter$2;var tapInternalKey$1={};Object.defineProperty(tapInternalKey$1,"__esModule",{value:!0});function makeConverter$1(t){function e(l){if(l.key[0]!==t||l.key.length!==1)throw new Error("Decode Error: could not decode tapInternalKey with key 0x"+l.key.toString("hex"));if(l.value.length!==32)throw new Error("Decode Error: tapInternalKey not a 32-byte x-only pubkey");return l.value}function n(l){return{key:Buffer$1$1.from([t]),value:l}}const o="Buffer";function c(l){return Buffer$1$1.isBuffer(l)&&l.length===32}function a(l,b){return!!l&&!!b&&l.tapInternalKey===void 0}return{decode:e,encode:n,check:c,expected:o,canAdd:a}}tapInternalKey$1.makeConverter=makeConverter$1;var witnessScript$1={};Object.defineProperty(witnessScript$1,"__esModule",{value:!0});function makeConverter(t){function e(l){if(l.key[0]!==t)throw new Error("Decode Error: could not decode witnessScript with key 0x"+l.key.toString("hex"));return l.value}function n(l){return{key:Buffer$1$1.from([t]),value:l}}const o="Buffer";function c(l){return Buffer$1$1.isBuffer(l)}function a(l,b){return!!l&&!!b&&l.witnessScript===void 0}return{decode:e,encode:n,check:c,expected:o,canAdd:a}}witnessScript$1.makeConverter=makeConverter;Object.defineProperty(converter,"__esModule",{value:!0});const typeFields_1$2=typeFields,globalXpub=globalXpub$1,unsignedTx=unsignedTx$1,finalScriptSig=finalScriptSig$1,finalScriptWitness=finalScriptWitness$1,nonWitnessUtxo=nonWitnessUtxo$1,partialSig=partialSig$1,porCommitment=porCommitment$1,sighashType=sighashType$1,tapKeySig=tapKeySig$1,tapLeafScript=tapLeafScript$1,tapMerkleRoot=tapMerkleRoot$1,tapScriptSig=tapScriptSig$1,witnessUtxo=witnessUtxo$1,tapTree=tapTree$1,bip32Derivation=bip32Derivation$2,checkPubkey=checkPubkey$1,redeemScript=redeemScript$1,tapBip32Derivation=tapBip32Derivation$1,tapInternalKey=tapInternalKey$1,witnessScript=witnessScript$1,globals={unsignedTx,globalXpub,checkPubkey:checkPubkey.makeChecker([])};converter.globals=globals;const inputs={nonWitnessUtxo,partialSig,sighashType,finalScriptSig,finalScriptWitness,porCommitment,witnessUtxo,bip32Derivation:bip32Derivation.makeConverter(typeFields_1$2.InputTypes.BIP32_DERIVATION),redeemScript:redeemScript.makeConverter(typeFields_1$2.InputTypes.REDEEM_SCRIPT),witnessScript:witnessScript.makeConverter(typeFields_1$2.InputTypes.WITNESS_SCRIPT),checkPubkey:checkPubkey.makeChecker([typeFields_1$2.InputTypes.PARTIAL_SIG,typeFields_1$2.InputTypes.BIP32_DERIVATION]),tapKeySig,tapScriptSig,tapLeafScript,tapBip32Derivation:tapBip32Derivation.makeConverter(typeFields_1$2.InputTypes.TAP_BIP32_DERIVATION),tapInternalKey:tapInternalKey.makeConverter(typeFields_1$2.InputTypes.TAP_INTERNAL_KEY),tapMerkleRoot};converter.inputs=inputs;const outputs={bip32Derivation:bip32Derivation.makeConverter(typeFields_1$2.OutputTypes.BIP32_DERIVATION),redeemScript:redeemScript.makeConverter(typeFields_1$2.OutputTypes.REDEEM_SCRIPT),witnessScript:witnessScript.makeConverter(typeFields_1$2.OutputTypes.WITNESS_SCRIPT),checkPubkey:checkPubkey.makeChecker([typeFields_1$2.OutputTypes.BIP32_DERIVATION]),tapBip32Derivation:tapBip32Derivation.makeConverter(typeFields_1$2.OutputTypes.TAP_BIP32_DERIVATION),tapTree,tapInternalKey:tapInternalKey.makeConverter(typeFields_1$2.OutputTypes.TAP_INTERNAL_KEY)};converter.outputs=outputs;Object.defineProperty(fromBuffer,"__esModule",{value:!0});const convert$1=converter,tools_1$1=tools,varuint$2=varint,typeFields_1$1=typeFields;function psbtFromBuffer(t,e){let n=0;function o(){const U=varuint$2.decode(t,n);n+=varuint$2.encodingLength(U);const q=t.slice(n,n+U);return n+=U,q}function c(){const U=t.readUInt32BE(n);return n+=4,U}function a(){const U=t.readUInt8(n);return n+=1,U}function l(){const U=o(),q=o();return{key:U,value:q}}function b(){if(n>=t.length)throw new Error("Format Error: Unexpected End of PSBT");const U=t.readUInt8(n)===0;return U&&n++,U}if(c()!==1886610036)throw new Error("Format Error: Invalid Magic Number");if(a()!==255)throw new Error("Format Error: Magic Number must be followed by 0xff separator");const v=[],A={};for(;!b();){const U=l(),q=U.key.toString("hex");if(A[q])throw new Error("Format Error: Keys must be unique for global keymap: key "+q);A[q]=1,v.push(U)}const S=v.filter(U=>U.key[0]===typeFields_1$1.GlobalTypes.UNSIGNED_TX);if(S.length!==1)throw new Error("Format Error: Only one UNSIGNED_TX allowed");const M=e(S[0].value),{inputCount:B,outputCount:P}=M.getInputOutputCounts(),L=[],F=[];for(const U of tools_1$1.range(B)){const q={},X=[];for(;!b();){const ee=l(),te=ee.key.toString("hex");if(q[te])throw new Error("Format Error: Keys must be unique for each input: input index "+U+" key "+te);q[te]=1,X.push(ee)}L.push(X)}for(const U of tools_1$1.range(P)){const q={},X=[];for(;!b();){const ee=l(),te=ee.key.toString("hex");if(q[te])throw new Error("Format Error: Keys must be unique for each output: output index "+U+" key "+te);q[te]=1,X.push(ee)}F.push(X)}return psbtFromKeyVals(M,{globalMapKeyVals:v,inputKeyVals:L,outputKeyVals:F})}fromBuffer.psbtFromBuffer=psbtFromBuffer;function checkKeyBuffer(t,e,n){if(!e.equals(Buffer$1$1.from([n])))throw new Error(`Format Error: Invalid ${t} key: ${e.toString("hex")}`)}fromBuffer.checkKeyBuffer=checkKeyBuffer;function psbtFromKeyVals(t,{globalMapKeyVals:e,inputKeyVals:n,outputKeyVals:o}){const c={unsignedTx:t};let a=0;for(const S of e)switch(S.key[0]){case typeFields_1$1.GlobalTypes.UNSIGNED_TX:if(checkKeyBuffer("global",S.key,typeFields_1$1.GlobalTypes.UNSIGNED_TX),a>0)throw new Error("Format Error: GlobalMap has multiple UNSIGNED_TX");a++;break;case typeFields_1$1.GlobalTypes.GLOBAL_XPUB:c.globalXpub===void 0&&(c.globalXpub=[]),c.globalXpub.push(convert$1.globals.globalXpub.decode(S));break;default:c.unknownKeyVals||(c.unknownKeyVals=[]),c.unknownKeyVals.push(S)}const l=n.length,b=o.length,v=[],A=[];for(const S of tools_1$1.range(l)){const M={};for(const B of n[S])switch(convert$1.inputs.checkPubkey(B),B.key[0]){case typeFields_1$1.InputTypes.NON_WITNESS_UTXO:if(checkKeyBuffer("input",B.key,typeFields_1$1.InputTypes.NON_WITNESS_UTXO),M.nonWitnessUtxo!==void 0)throw new Error("Format Error: Input has multiple NON_WITNESS_UTXO");M.nonWitnessUtxo=convert$1.inputs.nonWitnessUtxo.decode(B);break;case typeFields_1$1.InputTypes.WITNESS_UTXO:if(checkKeyBuffer("input",B.key,typeFields_1$1.InputTypes.WITNESS_UTXO),M.witnessUtxo!==void 0)throw new Error("Format Error: Input has multiple WITNESS_UTXO");M.witnessUtxo=convert$1.inputs.witnessUtxo.decode(B);break;case typeFields_1$1.InputTypes.PARTIAL_SIG:M.partialSig===void 0&&(M.partialSig=[]),M.partialSig.push(convert$1.inputs.partialSig.decode(B));break;case typeFields_1$1.InputTypes.SIGHASH_TYPE:if(checkKeyBuffer("input",B.key,typeFields_1$1.InputTypes.SIGHASH_TYPE),M.sighashType!==void 0)throw new Error("Format Error: Input has multiple SIGHASH_TYPE");M.sighashType=convert$1.inputs.sighashType.decode(B);break;case typeFields_1$1.InputTypes.REDEEM_SCRIPT:if(checkKeyBuffer("input",B.key,typeFields_1$1.InputTypes.REDEEM_SCRIPT),M.redeemScript!==void 0)throw new Error("Format Error: Input has multiple REDEEM_SCRIPT");M.redeemScript=convert$1.inputs.redeemScript.decode(B);break;case typeFields_1$1.InputTypes.WITNESS_SCRIPT:if(checkKeyBuffer("input",B.key,typeFields_1$1.InputTypes.WITNESS_SCRIPT),M.witnessScript!==void 0)throw new Error("Format Error: Input has multiple WITNESS_SCRIPT");M.witnessScript=convert$1.inputs.witnessScript.decode(B);break;case typeFields_1$1.InputTypes.BIP32_DERIVATION:M.bip32Derivation===void 0&&(M.bip32Derivation=[]),M.bip32Derivation.push(convert$1.inputs.bip32Derivation.decode(B));break;case typeFields_1$1.InputTypes.FINAL_SCRIPTSIG:checkKeyBuffer("input",B.key,typeFields_1$1.InputTypes.FINAL_SCRIPTSIG),M.finalScriptSig=convert$1.inputs.finalScriptSig.decode(B);break;case typeFields_1$1.InputTypes.FINAL_SCRIPTWITNESS:checkKeyBuffer("input",B.key,typeFields_1$1.InputTypes.FINAL_SCRIPTWITNESS),M.finalScriptWitness=convert$1.inputs.finalScriptWitness.decode(B);break;case typeFields_1$1.InputTypes.POR_COMMITMENT:checkKeyBuffer("input",B.key,typeFields_1$1.InputTypes.POR_COMMITMENT),M.porCommitment=convert$1.inputs.porCommitment.decode(B);break;case typeFields_1$1.InputTypes.TAP_KEY_SIG:checkKeyBuffer("input",B.key,typeFields_1$1.InputTypes.TAP_KEY_SIG),M.tapKeySig=convert$1.inputs.tapKeySig.decode(B);break;case typeFields_1$1.InputTypes.TAP_SCRIPT_SIG:M.tapScriptSig===void 0&&(M.tapScriptSig=[]),M.tapScriptSig.push(convert$1.inputs.tapScriptSig.decode(B));break;case typeFields_1$1.InputTypes.TAP_LEAF_SCRIPT:M.tapLeafScript===void 0&&(M.tapLeafScript=[]),M.tapLeafScript.push(convert$1.inputs.tapLeafScript.decode(B));break;case typeFields_1$1.InputTypes.TAP_BIP32_DERIVATION:M.tapBip32Derivation===void 0&&(M.tapBip32Derivation=[]),M.tapBip32Derivation.push(convert$1.inputs.tapBip32Derivation.decode(B));break;case typeFields_1$1.InputTypes.TAP_INTERNAL_KEY:checkKeyBuffer("input",B.key,typeFields_1$1.InputTypes.TAP_INTERNAL_KEY),M.tapInternalKey=convert$1.inputs.tapInternalKey.decode(B);break;case typeFields_1$1.InputTypes.TAP_MERKLE_ROOT:checkKeyBuffer("input",B.key,typeFields_1$1.InputTypes.TAP_MERKLE_ROOT),M.tapMerkleRoot=convert$1.inputs.tapMerkleRoot.decode(B);break;default:M.unknownKeyVals||(M.unknownKeyVals=[]),M.unknownKeyVals.push(B)}v.push(M)}for(const S of tools_1$1.range(b)){const M={};for(const B of o[S])switch(convert$1.outputs.checkPubkey(B),B.key[0]){case typeFields_1$1.OutputTypes.REDEEM_SCRIPT:if(checkKeyBuffer("output",B.key,typeFields_1$1.OutputTypes.REDEEM_SCRIPT),M.redeemScript!==void 0)throw new Error("Format Error: Output has multiple REDEEM_SCRIPT");M.redeemScript=convert$1.outputs.redeemScript.decode(B);break;case typeFields_1$1.OutputTypes.WITNESS_SCRIPT:if(checkKeyBuffer("output",B.key,typeFields_1$1.OutputTypes.WITNESS_SCRIPT),M.witnessScript!==void 0)throw new Error("Format Error: Output has multiple WITNESS_SCRIPT");M.witnessScript=convert$1.outputs.witnessScript.decode(B);break;case typeFields_1$1.OutputTypes.BIP32_DERIVATION:M.bip32Derivation===void 0&&(M.bip32Derivation=[]),M.bip32Derivation.push(convert$1.outputs.bip32Derivation.decode(B));break;case typeFields_1$1.OutputTypes.TAP_INTERNAL_KEY:checkKeyBuffer("output",B.key,typeFields_1$1.OutputTypes.TAP_INTERNAL_KEY),M.tapInternalKey=convert$1.outputs.tapInternalKey.decode(B);break;case typeFields_1$1.OutputTypes.TAP_TREE:checkKeyBuffer("output",B.key,typeFields_1$1.OutputTypes.TAP_TREE),M.tapTree=convert$1.outputs.tapTree.decode(B);break;case typeFields_1$1.OutputTypes.TAP_BIP32_DERIVATION:M.tapBip32Derivation===void 0&&(M.tapBip32Derivation=[]),M.tapBip32Derivation.push(convert$1.outputs.tapBip32Derivation.decode(B));break;default:M.unknownKeyVals||(M.unknownKeyVals=[]),M.unknownKeyVals.push(B)}A.push(M)}return{globalMap:c,inputs:v,outputs:A}}fromBuffer.psbtFromKeyVals=psbtFromKeyVals;var toBuffer$4={};Object.defineProperty(toBuffer$4,"__esModule",{value:!0});const convert=converter,tools_1=tools;function psbtToBuffer({globalMap:t,inputs:e,outputs:n}){const{globalKeyVals:o,inputKeyVals:c,outputKeyVals:a}=psbtToKeyVals({globalMap:t,inputs:e,outputs:n}),l=tools_1.keyValsToBuffer(o),b=M=>M.length===0?[Buffer$1$1.from([0])]:M.map(tools_1.keyValsToBuffer),v=b(c),A=b(a),S=Buffer$1$1.allocUnsafe(5);return S.writeUIntBE(482972169471,0,5),Buffer$1$1.concat([S,l].concat(v,A))}toBuffer$4.psbtToBuffer=psbtToBuffer;const sortKeyVals=(t,e)=>t.key.compare(e.key);function keyValsFromMap(t,e){const n=new Set,o=Object.entries(t).reduce((a,[l,b])=>{if(l==="unknownKeyVals")return a;const v=e[l];if(v===void 0)return a;const A=(Array.isArray(b)?b:[b]).map(v.encode);return A.map(M=>M.key.toString("hex")).forEach(M=>{if(n.has(M))throw new Error("Serialize Error: Duplicate key: "+M);n.add(M)}),a.concat(A)},[]),c=t.unknownKeyVals?t.unknownKeyVals.filter(a=>!n.has(a.key.toString("hex"))):[];return o.concat(c).sort(sortKeyVals)}function psbtToKeyVals({globalMap:t,inputs:e,outputs:n}){return{globalKeyVals:keyValsFromMap(t,convert.globals),inputKeyVals:e.map(o=>keyValsFromMap(o,convert.inputs)),outputKeyVals:n.map(o=>keyValsFromMap(o,convert.outputs))}}toBuffer$4.psbtToKeyVals=psbtToKeyVals;(function(t){function e(n){for(var o in n)t.hasOwnProperty(o)||(t[o]=n[o])}Object.defineProperty(t,"__esModule",{value:!0}),e(fromBuffer),e(toBuffer$4)})(parser);Object.defineProperty(combiner,"__esModule",{value:!0});const parser_1$1=parser;function combine(t){const e=t[0],n=parser_1$1.psbtToKeyVals(e),o=t.slice(1);if(o.length===0)throw new Error("Combine: Nothing to combine");const c=getTx(e);if(c===void 0)throw new Error("Combine: Self missing transaction");const a=getKeySet(n.globalKeyVals),l=n.inputKeyVals.map(getKeySet),b=n.outputKeyVals.map(getKeySet);for(const v of o){const A=getTx(v);if(A===void 0||!A.toBuffer().equals(c.toBuffer()))throw new Error("Combine: One of the Psbts does not have the same transaction.");const S=parser_1$1.psbtToKeyVals(v);getKeySet(S.globalKeyVals).forEach(keyPusher(a,n.globalKeyVals,S.globalKeyVals)),S.inputKeyVals.map(getKeySet).forEach((L,F)=>L.forEach(keyPusher(l[F],n.inputKeyVals[F],S.inputKeyVals[F]))),S.outputKeyVals.map(getKeySet).forEach((L,F)=>L.forEach(keyPusher(b[F],n.outputKeyVals[F],S.outputKeyVals[F])))}return parser_1$1.psbtFromKeyVals(c,{globalMapKeyVals:n.globalKeyVals,inputKeyVals:n.inputKeyVals,outputKeyVals:n.outputKeyVals})}combiner.combine=combine;function keyPusher(t,e,n){return o=>{if(t.has(o))return;const c=n.filter(a=>a.key.toString("hex")===o)[0];e.push(c),t.add(o)}}function getTx(t){return t.globalMap.unsignedTx}function getKeySet(t){const e=new Set;return t.forEach(n=>{const o=n.key.toString("hex");if(e.has(o))throw new Error("Combine: KeyValue Map keys should be unique");e.add(o)}),e}var utils$g={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=converter;function n(P,L){const F=P[L];if(F===void 0)throw new Error(`No input #${L}`);return F}t.checkForInput=n;function o(P,L){const F=P[L];if(F===void 0)throw new Error(`No output #${L}`);return F}t.checkForOutput=o;function c(P,L,F){if(P.key[0]<F)throw new Error("Use the method for your specific key instead of addUnknownKeyVal*");if(L&&L.filter(U=>U.key.equals(P.key)).length!==0)throw new Error(`Duplicate Key: ${P.key.toString("hex")}`)}t.checkHasKey=c;function a(P){let L=0;return Object.keys(P).forEach(F=>{Number(isNaN(Number(F)))&&L++}),L}t.getEnumLength=a;function l(P,L){let F=!1;if(L.nonWitnessUtxo||L.witnessUtxo){const U=!!L.redeemScript,q=!!L.witnessScript,X=!U||!!L.finalScriptSig,ee=!q||!!L.finalScriptWitness,te=!!L.finalScriptSig||!!L.finalScriptWitness;F=X&&ee&&te}if(F===!1)throw new Error(`Input #${P} has too much or too little data to clean`)}t.inputCheckUncleanFinalized=l;function b(P,L,F,U){throw new Error(`Data for ${P} key ${L} is incorrect: Expected ${F} and got ${JSON.stringify(U)}`)}function v(P){return(L,F)=>{for(const U of Object.keys(L)){const q=L[U],{canAdd:X,canAddToArray:ee,check:te,expected:ce}=e[P+"s"][U]||{},ue=!!ee;if(te)if(ue){if(!Array.isArray(q)||F[U]&&!Array.isArray(F[U]))throw new Error(`Key type ${U} must be an array`);q.every(te)||b(P,U,ce,q);const Ae=F[U]||[],we=new Set;if(!q.every(pe=>ee(Ae,pe,we)))throw new Error("Can not add duplicate data to array");F[U]=Ae.concat(q)}else{if(te(q)||b(P,U,ce,q),!X(F,q))throw new Error(`Can not add duplicate data to ${P}`);F[U]=q}}}}t.updateGlobal=v("global"),t.updateInput=v("input"),t.updateOutput=v("output");function A(P,L){const F=P.length-1,U=n(P,F);t.updateInput(L,U)}t.addInputAttributes=A;function S(P,L){const F=P.length-1,U=o(P,F);t.updateOutput(L,U)}t.addOutputAttributes=S;function M(P,L){if(!Buffer$1$1.isBuffer(L)||L.length<4)throw new Error("Set Version: Invalid Transaction");return L.writeUInt32LE(P,0),L}t.defaultVersionSetter=M;function B(P,L){if(!Buffer$1$1.isBuffer(L)||L.length<4)throw new Error("Set Locktime: Invalid Transaction");return L.writeUInt32LE(P,L.length-4),L}t.defaultLocktimeSetter=B})(utils$g);Object.defineProperty(psbt,"__esModule",{value:!0});const combiner_1=combiner,parser_1=parser,typeFields_1=typeFields,utils_1$2=utils$g;let Psbt$1=class{constructor(e){this.inputs=[],this.outputs=[],this.globalMap={unsignedTx:e}}static fromBase64(e,n){const o=Buffer$1$1.from(e,"base64");return this.fromBuffer(o,n)}static fromHex(e,n){const o=Buffer$1$1.from(e,"hex");return this.fromBuffer(o,n)}static fromBuffer(e,n){const o=parser_1.psbtFromBuffer(e,n),c=new this(o.globalMap.unsignedTx);return Object.assign(c,o),c}toBase64(){return this.toBuffer().toString("base64")}toHex(){return this.toBuffer().toString("hex")}toBuffer(){return parser_1.psbtToBuffer(this)}updateGlobal(e){return utils_1$2.updateGlobal(e,this.globalMap),this}updateInput(e,n){const o=utils_1$2.checkForInput(this.inputs,e);return utils_1$2.updateInput(n,o),this}updateOutput(e,n){const o=utils_1$2.checkForOutput(this.outputs,e);return utils_1$2.updateOutput(n,o),this}addUnknownKeyValToGlobal(e){return utils_1$2.checkHasKey(e,this.globalMap.unknownKeyVals,utils_1$2.getEnumLength(typeFields_1.GlobalTypes)),this.globalMap.unknownKeyVals||(this.globalMap.unknownKeyVals=[]),this.globalMap.unknownKeyVals.push(e),this}addUnknownKeyValToInput(e,n){const o=utils_1$2.checkForInput(this.inputs,e);return utils_1$2.checkHasKey(n,o.unknownKeyVals,utils_1$2.getEnumLength(typeFields_1.InputTypes)),o.unknownKeyVals||(o.unknownKeyVals=[]),o.unknownKeyVals.push(n),this}addUnknownKeyValToOutput(e,n){const o=utils_1$2.checkForOutput(this.outputs,e);return utils_1$2.checkHasKey(n,o.unknownKeyVals,utils_1$2.getEnumLength(typeFields_1.OutputTypes)),o.unknownKeyVals||(o.unknownKeyVals=[]),o.unknownKeyVals.push(n),this}addInput(e){this.globalMap.unsignedTx.addInput(e),this.inputs.push({unknownKeyVals:[]});const n=e.unknownKeyVals||[],o=this.inputs.length-1;if(!Array.isArray(n))throw new Error("unknownKeyVals must be an Array");return n.forEach(c=>this.addUnknownKeyValToInput(o,c)),utils_1$2.addInputAttributes(this.inputs,e),this}addOutput(e){this.globalMap.unsignedTx.addOutput(e),this.outputs.push({unknownKeyVals:[]});const n=e.unknownKeyVals||[],o=this.outputs.length-1;if(!Array.isArray(n))throw new Error("unknownKeyVals must be an Array");return n.forEach(c=>this.addUnknownKeyValToOutput(o,c)),utils_1$2.addOutputAttributes(this.outputs,e),this}clearFinalizedInput(e){const n=utils_1$2.checkForInput(this.inputs,e);utils_1$2.inputCheckUncleanFinalized(e,n);for(const o of Object.keys(n))["witnessUtxo","nonWitnessUtxo","finalScriptSig","finalScriptWitness","unknownKeyVals"].includes(o)||delete n[o];return this}combine(...e){const n=combiner_1.combine([this].concat(e));return Object.assign(this,n),this}getTransaction(){return this.globalMap.unsignedTx.toBuffer()}};psbt.Psbt=Psbt$1;var bip371={},psbtutils={};Object.defineProperty(psbtutils,"__esModule",{value:!0});psbtutils.signatureBlocksAction=psbtutils.checkInputForSig=psbtutils.pubkeyInScript=psbtutils.pubkeyPositionInScript=psbtutils.witnessStackToScriptWitness=psbtutils.isP2TR=psbtutils.isP2SHScript=psbtutils.isP2WSHScript=psbtutils.isP2WPKH=psbtutils.isP2PKH=psbtutils.isP2PK=psbtutils.isP2MS=void 0;const varuint$1=varint,bscript$1=script,transaction_1$2=transaction,crypto_1=crypto$3,payments$1=payments$3;function isPaymentFactory(t){return e=>{try{return t({output:e}),!0}catch{return!1}}}psbtutils.isP2MS=isPaymentFactory(payments$1.p2ms);psbtutils.isP2PK=isPaymentFactory(payments$1.p2pk);psbtutils.isP2PKH=isPaymentFactory(payments$1.p2pkh);psbtutils.isP2WPKH=isPaymentFactory(payments$1.p2wpkh);psbtutils.isP2WSHScript=isPaymentFactory(payments$1.p2wsh);psbtutils.isP2SHScript=isPaymentFactory(payments$1.p2sh);psbtutils.isP2TR=isPaymentFactory(payments$1.p2tr);function witnessStackToScriptWitness(t){let e=Buffer$1$1.allocUnsafe(0);function n(l){e=Buffer$1$1.concat([e,Buffer$1$1.from(l)])}function o(l){const b=e.length,v=varuint$1.encodingLength(l);e=Buffer$1$1.concat([e,Buffer$1$1.allocUnsafe(v)]),varuint$1.encode(l,e,b)}function c(l){o(l.length),n(l)}function a(l){o(l.length),l.forEach(c)}return a(t),e}psbtutils.witnessStackToScriptWitness=witnessStackToScriptWitness;function pubkeyPositionInScript(t,e){const n=(0,crypto_1.hash160)(t),o=t.slice(1,33),c=bscript$1.decompile(e);if(c===null)throw new Error("Unknown script error");return c.findIndex(a=>typeof a=="number"?!1:a.equals(t)||a.equals(n)||a.equals(o))}psbtutils.pubkeyPositionInScript=pubkeyPositionInScript;function pubkeyInScript(t,e){return pubkeyPositionInScript(t,e)!==-1}psbtutils.pubkeyInScript=pubkeyInScript;function checkInputForSig(t,e){return extractPartialSigs(t).some(o=>signatureBlocksAction(o,bscript$1.signature.decode,e))}psbtutils.checkInputForSig=checkInputForSig;function signatureBlocksAction(t,e,n){const{hashType:o}=e(t),c=[];switch(o&transaction_1$2.Transaction.SIGHASH_ANYONECANPAY&&c.push("addInput"),o&31){case transaction_1$2.Transaction.SIGHASH_ALL:break;case transaction_1$2.Transaction.SIGHASH_SINGLE:case transaction_1$2.Transaction.SIGHASH_NONE:c.push("addOutput"),c.push("setInputSequence");break}return c.indexOf(n)===-1}psbtutils.signatureBlocksAction=signatureBlocksAction;function extractPartialSigs(t){let e=[];if((t.partialSig||[]).length===0){if(!t.finalScriptSig&&!t.finalScriptWitness)return[];e=getPsigsFromInputFinalScripts(t)}else e=t.partialSig;return e.map(n=>n.signature)}function getPsigsFromInputFinalScripts(t){const e=t.finalScriptSig?bscript$1.decompile(t.finalScriptSig)||[]:[],n=t.finalScriptWitness?bscript$1.decompile(t.finalScriptWitness)||[]:[];return e.concat(n).filter(o=>Buffer$1$1.isBuffer(o)&&bscript$1.isCanonicalScriptSignature(o)).map(o=>({signature:o}))}Object.defineProperty(bip371,"__esModule",{value:!0});bip371.checkTaprootInputForSigs=bip371.tapTreeFromList=bip371.tapTreeToList=bip371.tweakInternalPubKey=bip371.checkTaprootOutputFields=bip371.checkTaprootInputFields=bip371.isTaprootOutput=bip371.isTaprootInput=bip371.serializeTaprootSignature=bip371.tapScriptFinalizer=bip371.toXOnly=void 0;const types_1=types$4,transaction_1$1=transaction,psbtutils_1$1=psbtutils,bip341_1$1=bip341,payments_1=payments$3,psbtutils_2=psbtutils,toXOnly=t=>t.length===32?t:t.slice(1,33);bip371.toXOnly=toXOnly;function tapScriptFinalizer(t,e,n){const o=findTapLeafToFinalize(e,t,n);try{const a=sortSignatures(e,o).concat(o.script).concat(o.controlBlock);return{finalScriptWitness:(0,psbtutils_1$1.witnessStackToScriptWitness)(a)}}catch(c){throw new Error(`Can not finalize taproot input #${t}: ${c}`)}}bip371.tapScriptFinalizer=tapScriptFinalizer;function serializeTaprootSignature(t,e){const n=e?Buffer$1$1.from([e]):Buffer$1$1.from([]);return Buffer$1$1.concat([t,n])}bip371.serializeTaprootSignature=serializeTaprootSignature;function isTaprootInput(t){return t&&!!(t.tapInternalKey||t.tapMerkleRoot||t.tapLeafScript&&t.tapLeafScript.length||t.tapBip32Derivation&&t.tapBip32Derivation.length||t.witnessUtxo&&(0,psbtutils_1$1.isP2TR)(t.witnessUtxo.script))}bip371.isTaprootInput=isTaprootInput;function isTaprootOutput(t,e){return t&&!!(t.tapInternalKey||t.tapTree||t.tapBip32Derivation&&t.tapBip32Derivation.length||e&&(0,psbtutils_1$1.isP2TR)(e))}bip371.isTaprootOutput=isTaprootOutput;function checkTaprootInputFields(t,e,n){checkMixedTaprootAndNonTaprootInputFields(t,e,n),checkIfTapLeafInTree(t,e,n)}bip371.checkTaprootInputFields=checkTaprootInputFields;function checkTaprootOutputFields(t,e,n){checkMixedTaprootAndNonTaprootOutputFields(t,e,n),checkTaprootScriptPubkey(t,e)}bip371.checkTaprootOutputFields=checkTaprootOutputFields;function checkTaprootScriptPubkey(t,e){if(!e.tapTree&&!e.tapInternalKey)return;const n=e.tapInternalKey||t.tapInternalKey,o=e.tapTree||t.tapTree;if(n){const{script:c}=t,a=getTaprootScripPubkey(n,o);if(c&&!c.equals(a))throw new Error("Error adding output. Script or address missmatch.")}}function getTaprootScripPubkey(t,e){const n=e&&tapTreeFromList(e.leaves),{output:o}=(0,payments_1.p2tr)({internalPubkey:t,scriptTree:n});return o}function tweakInternalPubKey(t,e){const n=e.tapInternalKey,o=n&&(0,bip341_1$1.tweakKey)(n,e.tapMerkleRoot);if(!o)throw new Error(`Cannot tweak tap internal key for input #${t}. Public key: ${n&&n.toString("hex")}`);return o.x}bip371.tweakInternalPubKey=tweakInternalPubKey;function tapTreeToList(t){if(!(0,types_1.isTaptree)(t))throw new Error("Cannot convert taptree to tapleaf list. Expecting a tapree structure.");return _tapTreeToList(t)}bip371.tapTreeToList=tapTreeToList;function tapTreeFromList(t=[]){return t.length===1&&t[0].depth===0?{output:t[0].script,version:t[0].leafVersion}:instertLeavesInTree(t)}bip371.tapTreeFromList=tapTreeFromList;function checkTaprootInputForSigs(t,e){return extractTaprootSigs(t).some(o=>(0,psbtutils_2.signatureBlocksAction)(o,decodeSchnorrSignature,e))}bip371.checkTaprootInputForSigs=checkTaprootInputForSigs;function decodeSchnorrSignature(t){return{signature:t.slice(0,64),hashType:t.slice(64)[0]||transaction_1$1.Transaction.SIGHASH_DEFAULT}}function extractTaprootSigs(t){const e=[];if(t.tapKeySig&&e.push(t.tapKeySig),t.tapScriptSig&&e.push(...t.tapScriptSig.map(n=>n.signature)),!e.length){const n=getTapKeySigFromWithness(t.finalScriptWitness);n&&e.push(n)}return e}function getTapKeySigFromWithness(t){if(!t)return;const e=t.slice(2);if(e.length===64||e.length===65)return e}function _tapTreeToList(t,e=[],n=0){if(n>bip341_1$1.MAX_TAPTREE_DEPTH)throw new Error("Max taptree depth exceeded.");return t?(0,types_1.isTapleaf)(t)?(e.push({depth:n,leafVersion:t.version||bip341_1$1.LEAF_VERSION_TAPSCRIPT,script:t.output}),e):(t[0]&&_tapTreeToList(t[0],e,n+1),t[1]&&_tapTreeToList(t[1],e,n+1),e):[]}function instertLeavesInTree(t){let e;for(const n of t)if(e=instertLeafInTree(n,e),!e)throw new Error("No room left to insert tapleaf in tree");return e}function instertLeafInTree(t,e,n=0){if(n>bip341_1$1.MAX_TAPTREE_DEPTH)throw new Error("Max taptree depth exceeded.");if(t.depth===n)return e?void 0:{output:t.script,version:t.leafVersion};if((0,types_1.isTapleaf)(e))return;const o=instertLeafInTree(t,e&&e[0],n+1);if(o)return[o,e&&e[1]];const c=instertLeafInTree(t,e&&e[1],n+1);if(c)return[e&&e[0],c]}function checkMixedTaprootAndNonTaprootInputFields(t,e,n){const o=isTaprootInput(t)&&hasNonTaprootFields(e),c=hasNonTaprootFields(t)&&isTaprootInput(e),a=t===e&&isTaprootInput(e)&&hasNonTaprootFields(e);if(o||c||a)throw new Error(`Invalid arguments for Psbt.${n}. Cannot use both taproot and non-taproot fields.`)}function checkMixedTaprootAndNonTaprootOutputFields(t,e,n){const o=isTaprootOutput(t)&&hasNonTaprootFields(e),c=hasNonTaprootFields(t)&&isTaprootOutput(e),a=t===e&&isTaprootOutput(e)&&hasNonTaprootFields(e);if(o||c||a)throw new Error(`Invalid arguments for Psbt.${n}. Cannot use both taproot and non-taproot fields.`)}function checkIfTapLeafInTree(t,e,n){if(e.tapMerkleRoot){const o=(e.tapLeafScript||[]).every(a=>isTapLeafInTree(a,e.tapMerkleRoot)),c=(t.tapLeafScript||[]).every(a=>isTapLeafInTree(a,e.tapMerkleRoot));if(!o||!c)throw new Error(`Invalid arguments for Psbt.${n}. Tapleaf not part of taptree.`)}else if(t.tapMerkleRoot&&!(e.tapLeafScript||[]).every(c=>isTapLeafInTree(c,t.tapMerkleRoot)))throw new Error(`Invalid arguments for Psbt.${n}. Tapleaf not part of taptree.`)}function isTapLeafInTree(t,e){if(!e)return!0;const n=(0,bip341_1$1.tapleafHash)({output:t.script,version:t.leafVersion});return(0,bip341_1$1.rootHashFromPath)(t.controlBlock,n).equals(e)}function sortSignatures(t,e){const n=(0,bip341_1$1.tapleafHash)({output:e.script,version:e.leafVersion});return(t.tapScriptSig||[]).filter(o=>o.leafHash.equals(n)).map(o=>addPubkeyPositionInScript(e.script,o)).sort((o,c)=>c.positionInScript-o.positionInScript).map(o=>o.signature)}function addPubkeyPositionInScript(t,e){return Object.assign({positionInScript:(0,psbtutils_1$1.pubkeyPositionInScript)(e.pubkey,t)},e)}function findTapLeafToFinalize(t,e,n){if(!t.tapScriptSig||!t.tapScriptSig.length)throw new Error(`Can not finalize taproot input #${e}. No tapleaf script signature provided.`);const o=(t.tapLeafScript||[]).sort((c,a)=>c.controlBlock.length-a.controlBlock.length).find(c=>canFinalizeLeaf(c,t.tapScriptSig,n));if(!o)throw new Error(`Can not finalize taproot input #${e}. Signature for tapleaf script not found.`);return o}function canFinalizeLeaf(t,e,n){const o=(0,bip341_1$1.tapleafHash)({output:t.script,version:t.leafVersion});return(!n||n.equals(o))&&e.find(a=>a.leafHash.equals(o))!==void 0}function hasNonTaprootFields(t){return t&&!!(t.redeemScript||t.witnessScript||t.bip32Derivation&&t.bip32Derivation.length)}Object.defineProperty(psbt$1,"__esModule",{value:!0});psbt$1.Psbt=void 0;const bip174_1=psbt,varuint=varint,utils_1$1=utils$g,address_1=address,bufferutils_1=bufferutils,networks_1=networks$1,payments=payments$3,bip341_1=bip341,bscript=script,transaction_1=transaction,bip371_1=bip371,psbtutils_1=psbtutils,DEFAULT_OPTS={network:networks_1.bitcoin,maximumFeeRate:5e3};class Psbt{static fromBase64(e,n={}){const o=Buffer$1$1.from(e,"base64");return this.fromBuffer(o,n)}static fromHex(e,n={}){const o=Buffer$1$1.from(e,"hex");return this.fromBuffer(o,n)}static fromBuffer(e,n={}){const o=bip174_1.Psbt.fromBuffer(e,transactionFromBuffer),c=new Psbt(n,o);return checkTxForDupeIns(c.__CACHE.__TX,c.__CACHE),c}constructor(e={},n=new bip174_1.Psbt(new PsbtTransaction)){this.data=n,this.opts=Object.assign({},DEFAULT_OPTS,e),this.__CACHE={__NON_WITNESS_UTXO_TX_CACHE:[],__NON_WITNESS_UTXO_BUF_CACHE:[],__TX_IN_CACHE:{},__TX:this.data.globalMap.unsignedTx.tx,__UNSAFE_SIGN_NONSEGWIT:!1},this.data.inputs.length===0&&this.setVersion(2);const o=(c,a,l,b)=>Object.defineProperty(c,a,{enumerable:l,writable:b});o(this,"__CACHE",!1,!0),o(this,"opts",!1,!0)}get inputCount(){return this.data.inputs.length}get version(){return this.__CACHE.__TX.version}set version(e){this.setVersion(e)}get locktime(){return this.__CACHE.__TX.locktime}set locktime(e){this.setLocktime(e)}get txInputs(){return this.__CACHE.__TX.ins.map(e=>({hash:(0,bufferutils_1.cloneBuffer)(e.hash),index:e.index,sequence:e.sequence}))}get txOutputs(){return this.__CACHE.__TX.outs.map(e=>{let n;try{n=(0,address_1.fromOutputScript)(e.script,this.opts.network)}catch{}return{script:(0,bufferutils_1.cloneBuffer)(e.script),value:e.value,address:n}})}combine(...e){return this.data.combine(...e.map(n=>n.data)),this}clone(){const e=Psbt.fromBuffer(this.data.toBuffer());return e.opts=JSON.parse(JSON.stringify(this.opts)),e}setMaximumFeeRate(e){check32Bit(e),this.opts.maximumFeeRate=e}setVersion(e){check32Bit(e),checkInputsForPartialSig(this.data.inputs,"setVersion");const n=this.__CACHE;return n.__TX.version=e,n.__EXTRACTED_TX=void 0,this}setLocktime(e){check32Bit(e),checkInputsForPartialSig(this.data.inputs,"setLocktime");const n=this.__CACHE;return n.__TX.locktime=e,n.__EXTRACTED_TX=void 0,this}setInputSequence(e,n){check32Bit(n),checkInputsForPartialSig(this.data.inputs,"setInputSequence");const o=this.__CACHE;if(o.__TX.ins.length<=e)throw new Error("Input index too high");return o.__TX.ins[e].sequence=n,o.__EXTRACTED_TX=void 0,this}addInputs(e){return e.forEach(n=>this.addInput(n)),this}addInput(e){if(arguments.length>1||!e||e.hash===void 0||e.index===void 0)throw new Error("Invalid arguments for Psbt.addInput. Requires single object with at least [hash] and [index]");(0,bip371_1.checkTaprootInputFields)(e,e,"addInput"),checkInputsForPartialSig(this.data.inputs,"addInput"),e.witnessScript&&checkInvalidP2WSH(e.witnessScript);const n=this.__CACHE;this.data.addInput(e);const o=n.__TX.ins[n.__TX.ins.length-1];checkTxInputCache(n,o);const c=this.data.inputs.length-1,a=this.data.inputs[c];return a.nonWitnessUtxo&&addNonWitnessTxCache(this.__CACHE,a,c),n.__FEE=void 0,n.__FEE_RATE=void 0,n.__EXTRACTED_TX=void 0,this}addOutputs(e){return e.forEach(n=>this.addOutput(n)),this}addOutput(e){if(arguments.length>1||!e||e.value===void 0||e.address===void 0&&e.script===void 0)throw new Error("Invalid arguments for Psbt.addOutput. Requires single object with at least [script or address] and [value]");checkInputsForPartialSig(this.data.inputs,"addOutput");const{address:n}=e;if(typeof n=="string"){const{network:c}=this.opts,a=(0,address_1.toOutputScript)(n,c);e=Object.assign(e,{script:a})}(0,bip371_1.checkTaprootOutputFields)(e,e,"addOutput");const o=this.__CACHE;return this.data.addOutput(e),o.__FEE=void 0,o.__FEE_RATE=void 0,o.__EXTRACTED_TX=void 0,this}extractTransaction(e){if(!this.data.inputs.every(isFinalized))throw new Error("Not finalized");const n=this.__CACHE;if(e||checkFees(this,n,this.opts),n.__EXTRACTED_TX)return n.__EXTRACTED_TX;const o=n.__TX.clone();return inputFinalizeGetAmts(this.data.inputs,o,n,!0),o}getFeeRate(){return getTxCacheValue("__FEE_RATE","fee rate",this.data.inputs,this.__CACHE)}getFee(){return getTxCacheValue("__FEE","fee",this.data.inputs,this.__CACHE)}finalizeAllInputs(){return(0,utils_1$1.checkForInput)(this.data.inputs,0),range(this.data.inputs.length).forEach(e=>this.finalizeInput(e)),this}finalizeInput(e,n){const o=(0,utils_1$1.checkForInput)(this.data.inputs,e);return(0,bip371_1.isTaprootInput)(o)?this._finalizeTaprootInput(e,o,void 0,n):this._finalizeInput(e,o,n)}finalizeTaprootInput(e,n,o=bip371_1.tapScriptFinalizer){const c=(0,utils_1$1.checkForInput)(this.data.inputs,e);if((0,bip371_1.isTaprootInput)(c))return this._finalizeTaprootInput(e,c,n,o);throw new Error(`Cannot finalize input #${e}. Not Taproot.`)}_finalizeInput(e,n,o=getFinalScripts){const{script:c,isP2SH:a,isP2WSH:l,isSegwit:b}=getScriptFromInput(e,n,this.__CACHE);if(!c)throw new Error(`No script found for input #${e}`);checkPartialSigSighashes(n);const{finalScriptSig:v,finalScriptWitness:A}=o(e,n,c,b,a,l);if(v&&this.data.updateInput(e,{finalScriptSig:v}),A&&this.data.updateInput(e,{finalScriptWitness:A}),!v&&!A)throw new Error(`Unknown error finalizing input #${e}`);return this.data.clearFinalizedInput(e),this}_finalizeTaprootInput(e,n,o,c=bip371_1.tapScriptFinalizer){if(!n.witnessUtxo)throw new Error(`Cannot finalize input #${e}. Missing withness utxo.`);if(n.tapKeySig){const a=payments.p2tr({output:n.witnessUtxo.script,signature:n.tapKeySig}),l=(0,psbtutils_1.witnessStackToScriptWitness)(a.witness);this.data.updateInput(e,{finalScriptWitness:l})}else{const{finalScriptWitness:a}=c(e,n,o);this.data.updateInput(e,{finalScriptWitness:a})}return this.data.clearFinalizedInput(e),this}getInputType(e){const n=(0,utils_1$1.checkForInput)(this.data.inputs,e),o=getScriptFromUtxo(e,n,this.__CACHE),c=getMeaningfulScript(o,e,"input",n.redeemScript||redeemFromFinalScriptSig(n.finalScriptSig),n.witnessScript||redeemFromFinalWitnessScript(n.finalScriptWitness)),a=c.type==="raw"?"":c.type+"-",l=classifyScript(c.meaningfulScript);return a+l}inputHasPubkey(e,n){const o=(0,utils_1$1.checkForInput)(this.data.inputs,e);return pubkeyInInput(n,o,e,this.__CACHE)}inputHasHDKey(e,n){const o=(0,utils_1$1.checkForInput)(this.data.inputs,e),c=bip32DerivationIsMine(n);return!!o.bip32Derivation&&o.bip32Derivation.some(c)}outputHasPubkey(e,n){const o=(0,utils_1$1.checkForOutput)(this.data.outputs,e);return pubkeyInOutput(n,o,e,this.__CACHE)}outputHasHDKey(e,n){const o=(0,utils_1$1.checkForOutput)(this.data.outputs,e),c=bip32DerivationIsMine(n);return!!o.bip32Derivation&&o.bip32Derivation.some(c)}validateSignaturesOfAllInputs(e){return(0,utils_1$1.checkForInput)(this.data.inputs,0),range(this.data.inputs.length).map(o=>this.validateSignaturesOfInput(o,e)).reduce((o,c)=>c===!0&&o,!0)}validateSignaturesOfInput(e,n,o){const c=this.data.inputs[e];return(0,bip371_1.isTaprootInput)(c)?this.validateSignaturesOfTaprootInput(e,n,o):this._validateSignaturesOfInput(e,n,o)}_validateSignaturesOfInput(e,n,o){const c=this.data.inputs[e],a=(c||{}).partialSig;if(!c||!a||a.length<1)throw new Error("No signatures to validate");if(typeof n!="function")throw new Error("Need validator function to validate signatures");const l=o?a.filter(M=>M.pubkey.equals(o)):a;if(l.length<1)throw new Error("No signatures for this pubkey");const b=[];let v,A,S;for(const M of l){const B=bscript.signature.decode(M.signature),{hash:P,script:L}=S!==B.hashType?getHashForSig(e,Object.assign({},c,{sighashType:B.hashType}),this.__CACHE,!0):{hash:v,script:A};S=B.hashType,v=P,A=L,checkScriptForPubkey(M.pubkey,L,"verify"),b.push(n(M.pubkey,P,B.signature))}return b.every(M=>M===!0)}validateSignaturesOfTaprootInput(e,n,o){const c=this.data.inputs[e],a=(c||{}).tapKeySig,l=(c||{}).tapScriptSig;if(!c&&!a&&!(l&&!l.length))throw new Error("No signatures to validate");if(typeof n!="function")throw new Error("Need validator function to validate signatures");o=o&&(0,bip371_1.toXOnly)(o);const b=o?getTaprootHashesForSig(e,c,this.data.inputs,o,this.__CACHE):getAllTaprootHashesForSig(e,c,this.data.inputs,this.__CACHE);if(!b.length)throw new Error("No signatures for this pubkey");const v=b.find(S=>!S.leafHash);let A=0;if(a&&v){if(!n(v.pubkey,v.hash,trimTaprootSig(a)))return!1;A++}if(l)for(const S of l){const M=b.find(B=>S.pubkey.equals(B.pubkey));if(M){if(!n(S.pubkey,M.hash,trimTaprootSig(S.signature)))return!1;A++}}return A>0}signAllInputsHD(e,n=[transaction_1.Transaction.SIGHASH_ALL]){if(!e||!e.publicKey||!e.fingerprint)throw new Error("Need HDSigner to sign input");const o=[];for(const c of range(this.data.inputs.length))try{this.signInputHD(c,e,n),o.push(!0)}catch{o.push(!1)}if(o.every(c=>c===!1))throw new Error("No inputs were signed");return this}signAllInputsHDAsync(e,n=[transaction_1.Transaction.SIGHASH_ALL]){return new Promise((o,c)=>{if(!e||!e.publicKey||!e.fingerprint)return c(new Error("Need HDSigner to sign input"));const a=[],l=[];for(const b of range(this.data.inputs.length))l.push(this.signInputHDAsync(b,e,n).then(()=>{a.push(!0)},()=>{a.push(!1)}));return Promise.all(l).then(()=>{if(a.every(b=>b===!1))return c(new Error("No inputs were signed"));o()})})}signInputHD(e,n,o=[transaction_1.Transaction.SIGHASH_ALL]){if(!n||!n.publicKey||!n.fingerprint)throw new Error("Need HDSigner to sign input");return getSignersFromHD(e,this.data.inputs,n).forEach(a=>this.signInput(e,a,o)),this}signInputHDAsync(e,n,o=[transaction_1.Transaction.SIGHASH_ALL]){return new Promise((c,a)=>{if(!n||!n.publicKey||!n.fingerprint)return a(new Error("Need HDSigner to sign input"));const b=getSignersFromHD(e,this.data.inputs,n).map(v=>this.signInputAsync(e,v,o));return Promise.all(b).then(()=>{c()}).catch(a)})}signAllInputs(e,n){if(!e||!e.publicKey)throw new Error("Need Signer to sign input");const o=[];for(const c of range(this.data.inputs.length))try{this.signInput(c,e,n),o.push(!0)}catch{o.push(!1)}if(o.every(c=>c===!1))throw new Error("No inputs were signed");return this}signAllInputsAsync(e,n){return new Promise((o,c)=>{if(!e||!e.publicKey)return c(new Error("Need Signer to sign input"));const a=[],l=[];for(const[b]of this.data.inputs.entries())l.push(this.signInputAsync(b,e,n).then(()=>{a.push(!0)},()=>{a.push(!1)}));return Promise.all(l).then(()=>{if(a.every(b=>b===!1))return c(new Error("No inputs were signed"));o()})})}signInput(e,n,o){if(!n||!n.publicKey)throw new Error("Need Signer to sign input");const c=(0,utils_1$1.checkForInput)(this.data.inputs,e);return(0,bip371_1.isTaprootInput)(c)?this._signTaprootInput(e,c,n,void 0,o):this._signInput(e,n,o)}signTaprootInput(e,n,o,c){if(!n||!n.publicKey)throw new Error("Need Signer to sign input");const a=(0,utils_1$1.checkForInput)(this.data.inputs,e);if((0,bip371_1.isTaprootInput)(a))return this._signTaprootInput(e,a,n,o,c);throw new Error(`Input #${e} is not of type Taproot.`)}_signInput(e,n,o=[transaction_1.Transaction.SIGHASH_ALL]){const{hash:c,sighashType:a}=getHashAndSighashType(this.data.inputs,e,n.publicKey,this.__CACHE,o),l=[{pubkey:n.publicKey,signature:bscript.signature.encode(n.sign(c),a)}];return this.data.updateInput(e,{partialSig:l}),this}_signTaprootInput(e,n,o,c,a=[transaction_1.Transaction.SIGHASH_DEFAULT]){const l=this.checkTaprootHashesForSig(e,n,o,c,a),b=l.filter(A=>!A.leafHash).map(A=>(0,bip371_1.serializeTaprootSignature)(o.signSchnorr(A.hash),n.sighashType))[0],v=l.filter(A=>!!A.leafHash).map(A=>({pubkey:(0,bip371_1.toXOnly)(o.publicKey),signature:(0,bip371_1.serializeTaprootSignature)(o.signSchnorr(A.hash),n.sighashType),leafHash:A.leafHash}));return b&&this.data.updateInput(e,{tapKeySig:b}),v.length&&this.data.updateInput(e,{tapScriptSig:v}),this}signInputAsync(e,n,o){return Promise.resolve().then(()=>{if(!n||!n.publicKey)throw new Error("Need Signer to sign input");const c=(0,utils_1$1.checkForInput)(this.data.inputs,e);return(0,bip371_1.isTaprootInput)(c)?this._signTaprootInputAsync(e,c,n,void 0,o):this._signInputAsync(e,n,o)})}signTaprootInputAsync(e,n,o,c){return Promise.resolve().then(()=>{if(!n||!n.publicKey)throw new Error("Need Signer to sign input");const a=(0,utils_1$1.checkForInput)(this.data.inputs,e);if((0,bip371_1.isTaprootInput)(a))return this._signTaprootInputAsync(e,a,n,o,c);throw new Error(`Input #${e} is not of type Taproot.`)})}_signInputAsync(e,n,o=[transaction_1.Transaction.SIGHASH_ALL]){const{hash:c,sighashType:a}=getHashAndSighashType(this.data.inputs,e,n.publicKey,this.__CACHE,o);return Promise.resolve(n.sign(c)).then(l=>{const b=[{pubkey:n.publicKey,signature:bscript.signature.encode(l,a)}];this.data.updateInput(e,{partialSig:b})})}async _signTaprootInputAsync(e,n,o,c,a=[transaction_1.Transaction.SIGHASH_DEFAULT]){const l=this.checkTaprootHashesForSig(e,n,o,c,a),b=[],v=l.filter(S=>!S.leafHash)[0];if(v){const S=Promise.resolve(o.signSchnorr(v.hash)).then(M=>({tapKeySig:(0,bip371_1.serializeTaprootSignature)(M,n.sighashType)}));b.push(S)}const A=l.filter(S=>!!S.leafHash);if(A.length){const S=A.map(M=>Promise.resolve(o.signSchnorr(M.hash)).then(B=>({tapScriptSig:[{pubkey:(0,bip371_1.toXOnly)(o.publicKey),signature:(0,bip371_1.serializeTaprootSignature)(B,n.sighashType),leafHash:M.leafHash}]})));b.push(...S)}return Promise.all(b).then(S=>{S.forEach(M=>this.data.updateInput(e,M))})}checkTaprootHashesForSig(e,n,o,c,a){if(typeof o.signSchnorr!="function")throw new Error(`Need Schnorr Signer to sign taproot input #${e}.`);const l=getTaprootHashesForSig(e,n,this.data.inputs,o.publicKey,this.__CACHE,c,a);if(!l||!l.length)throw new Error(`Can not sign for input #${e} with the key ${o.publicKey.toString("hex")}`);return l}toBuffer(){return checkCache(this.__CACHE),this.data.toBuffer()}toHex(){return checkCache(this.__CACHE),this.data.toHex()}toBase64(){return checkCache(this.__CACHE),this.data.toBase64()}updateGlobal(e){return this.data.updateGlobal(e),this}updateInput(e,n){return n.witnessScript&&checkInvalidP2WSH(n.witnessScript),(0,bip371_1.checkTaprootInputFields)(this.data.inputs[e],n,"updateInput"),this.data.updateInput(e,n),n.nonWitnessUtxo&&addNonWitnessTxCache(this.__CACHE,this.data.inputs[e],e),this}updateOutput(e,n){const o=this.data.outputs[e];return(0,bip371_1.checkTaprootOutputFields)(o,n,"updateOutput"),this.data.updateOutput(e,n),this}addUnknownKeyValToGlobal(e){return this.data.addUnknownKeyValToGlobal(e),this}addUnknownKeyValToInput(e,n){return this.data.addUnknownKeyValToInput(e,n),this}addUnknownKeyValToOutput(e,n){return this.data.addUnknownKeyValToOutput(e,n),this}clearFinalizedInput(e){return this.data.clearFinalizedInput(e),this}}psbt$1.Psbt=Psbt;const transactionFromBuffer=t=>new PsbtTransaction(t);class PsbtTransaction{constructor(e=Buffer$1$1.from([2,0,0,0,0,0,0,0,0,0])){this.tx=transaction_1.Transaction.fromBuffer(e),checkTxEmpty(this.tx),Object.defineProperty(this,"tx",{enumerable:!1,writable:!0})}getInputOutputCounts(){return{inputCount:this.tx.ins.length,outputCount:this.tx.outs.length}}addInput(e){if(e.hash===void 0||e.index===void 0||!Buffer$1$1.isBuffer(e.hash)&&typeof e.hash!="string"||typeof e.index!="number")throw new Error("Error adding input.");const n=typeof e.hash=="string"?(0,bufferutils_1.reverseBuffer)(Buffer$1$1.from(e.hash,"hex")):e.hash;this.tx.addInput(n,e.index,e.sequence)}addOutput(e){if(e.script===void 0||e.value===void 0||!Buffer$1$1.isBuffer(e.script)||typeof e.value!="number")throw new Error("Error adding output.");this.tx.addOutput(e.script,e.value)}toBuffer(){return this.tx.toBuffer()}}function canFinalize(t,e,n){switch(n){case"pubkey":case"pubkeyhash":case"witnesspubkeyhash":return hasSigs(1,t.partialSig);case"multisig":const o=payments.p2ms({output:e});return hasSigs(o.m,t.partialSig,o.pubkeys);default:return!1}}function checkCache(t){if(t.__UNSAFE_SIGN_NONSEGWIT!==!1)throw new Error("Not BIP174 compliant, can not export")}function hasSigs(t,e,n){if(!e)return!1;let o;if(n?o=n.map(c=>{const a=compressPubkey(c);return e.find(l=>l.pubkey.equals(a))}).filter(c=>!!c):o=e,o.length>t)throw new Error("Too many signatures");return o.length===t}function isFinalized(t){return!!t.finalScriptSig||!!t.finalScriptWitness}function bip32DerivationIsMine(t){return e=>!(!e.masterFingerprint.equals(t.fingerprint)||!t.derivePath(e.path).publicKey.equals(e.pubkey))}function check32Bit(t){if(typeof t!="number"||t!==Math.floor(t)||t>4294967295||t<0)throw new Error("Invalid 32 bit integer")}function checkFees(t,e,n){const o=e.__FEE_RATE||t.getFeeRate(),c=e.__EXTRACTED_TX.virtualSize(),a=o*c;if(o>=n.maximumFeeRate)throw new Error(`Warning: You are paying around ${(a/1e8).toFixed(8)} in fees, which is ${o} satoshi per byte for a transaction with a VSize of ${c} bytes (segwit counted as 0.25 byte per byte). Use setMaximumFeeRate method to raise your threshold, or pass true to the first arg of extractTransaction.`)}function checkInputsForPartialSig(t,e){t.forEach(n=>{if((0,bip371_1.isTaprootInput)(n)?(0,bip371_1.checkTaprootInputForSigs)(n,e):(0,psbtutils_1.checkInputForSig)(n,e))throw new Error("Can not modify transaction, signatures exist.")})}function checkPartialSigSighashes(t){if(!t.sighashType||!t.partialSig)return;const{partialSig:e,sighashType:n}=t;e.forEach(o=>{const{hashType:c}=bscript.signature.decode(o.signature);if(n!==c)throw new Error("Signature sighash does not match input sighash type")})}function checkScriptForPubkey(t,e,n){if(!(0,psbtutils_1.pubkeyInScript)(t,e))throw new Error(`Can not ${n} for this input with the key ${t.toString("hex")}`)}function checkTxEmpty(t){if(!t.ins.every(n=>n.script&&n.script.length===0&&n.witness&&n.witness.length===0))throw new Error("Format Error: Transaction ScriptSigs are not empty")}function checkTxForDupeIns(t,e){t.ins.forEach(n=>{checkTxInputCache(e,n)})}function checkTxInputCache(t,e){const n=(0,bufferutils_1.reverseBuffer)(Buffer$1$1.from(e.hash)).toString("hex")+":"+e.index;if(t.__TX_IN_CACHE[n])throw new Error("Duplicate input detected.");t.__TX_IN_CACHE[n]=1}function scriptCheckerFactory(t,e){return(n,o,c,a)=>{const l=t({redeem:{output:c}}).output;if(!o.equals(l))throw new Error(`${e} for ${a} #${n} doesn't match the scriptPubKey in the prevout`)}}const checkRedeemScript=scriptCheckerFactory(payments.p2sh,"Redeem script"),checkWitnessScript=scriptCheckerFactory(payments.p2wsh,"Witness script");function getTxCacheValue(t,e,n,o){if(!n.every(isFinalized))throw new Error(`PSBT must be finalized to calculate ${e}`);if(t==="__FEE_RATE"&&o.__FEE_RATE)return o.__FEE_RATE;if(t==="__FEE"&&o.__FEE)return o.__FEE;let c,a=!0;if(o.__EXTRACTED_TX?(c=o.__EXTRACTED_TX,a=!1):c=o.__TX.clone(),inputFinalizeGetAmts(n,c,o,a),t==="__FEE_RATE")return o.__FEE_RATE;if(t==="__FEE")return o.__FEE}function getFinalScripts(t,e,n,o,c,a){const l=classifyScript(n);if(!canFinalize(e,n,l))throw new Error(`Can not finalize input #${t}`);return prepareFinalScripts(n,l,e.partialSig,o,c,a)}function prepareFinalScripts(t,e,n,o,c,a){let l,b;const v=getPayment(t,e,n),A=a?payments.p2wsh({redeem:v}):null,S=c?payments.p2sh({redeem:A||v}):null;return o?(A?b=(0,psbtutils_1.witnessStackToScriptWitness)(A.witness):b=(0,psbtutils_1.witnessStackToScriptWitness)(v.witness),S&&(l=S.input)):S?l=S.input:l=v.input,{finalScriptSig:l,finalScriptWitness:b}}function getHashAndSighashType(t,e,n,o,c){const a=(0,utils_1$1.checkForInput)(t,e),{hash:l,sighashType:b,script:v}=getHashForSig(e,a,o,!1,c);return checkScriptForPubkey(n,v,"sign"),{hash:l,sighashType:b}}function getHashForSig(t,e,n,o,c){const a=n.__TX,l=e.sighashType||transaction_1.Transaction.SIGHASH_ALL;checkSighashTypeAllowed(l,c);let b,v;if(e.nonWitnessUtxo){const M=nonWitnessUtxoTxFromCache(n,e,t),B=a.ins[t].hash,P=M.getHash();if(!B.equals(P))throw new Error(`Non-witness UTXO hash for input #${t} doesn't match the hash specified in the prevout`);const L=a.ins[t].index;v=M.outs[L]}else if(e.witnessUtxo)v=e.witnessUtxo;else throw new Error("Need a Utxo input item for signing");const{meaningfulScript:A,type:S}=getMeaningfulScript(v.script,t,"input",e.redeemScript,e.witnessScript);if(["p2sh-p2wsh","p2wsh"].indexOf(S)>=0)b=a.hashForWitnessV0(t,A,v.value,l);else if((0,psbtutils_1.isP2WPKH)(A)){const M=payments.p2pkh({hash:A.slice(2)}).output;b=a.hashForWitnessV0(t,M,v.value,l)}else{if(e.nonWitnessUtxo===void 0&&n.__UNSAFE_SIGN_NONSEGWIT===!1)throw new Error(`Input #${t} has witnessUtxo but non-segwit script: ${A.toString("hex")}`);!o&&n.__UNSAFE_SIGN_NONSEGWIT!==!1&&console.warn(`Warning: Signing non-segwit inputs without the full parent transaction means there is a chance that a miner could feed you incorrect information to trick you into paying large fees. This behavior is the same as Psbt's predecesor (TransactionBuilder - now removed) when signing non-segwit scripts. You are not able to export this Psbt with toBuffer|toBase64|toHex since it is not BIP174 compliant.
*********************
PROCEED WITH CAUTION!
*********************`),b=a.hashForSignature(t,A,l)}return{script:A,sighashType:l,hash:b}}function getAllTaprootHashesForSig(t,e,n,o){const c=[];if(e.tapInternalKey){const l=getPrevoutTaprootKey(t,e,o);l&&c.push(l)}if(e.tapScriptSig){const l=e.tapScriptSig.map(b=>b.pubkey);c.push(...l)}return c.map(l=>getTaprootHashesForSig(t,e,n,l,o)).flat()}function getPrevoutTaprootKey(t,e,n){const{script:o}=getScriptAndAmountFromUtxo(t,e,n);return(0,psbtutils_1.isP2TR)(o)?o.subarray(2,34):null}function trimTaprootSig(t){return t.length===64?t:t.subarray(0,64)}function getTaprootHashesForSig(t,e,n,o,c,a,l){const b=c.__TX,v=e.sighashType||transaction_1.Transaction.SIGHASH_DEFAULT;checkSighashTypeAllowed(v,l);const A=n.map((L,F)=>getScriptAndAmountFromUtxo(F,L,c)),S=A.map(L=>L.script),M=A.map(L=>L.value),B=[];if(e.tapInternalKey&&!a){const L=getPrevoutTaprootKey(t,e,c)||Buffer$1$1.from([]);if((0,bip371_1.toXOnly)(o).equals(L)){const F=b.hashForWitnessV1(t,S,M,v);B.push({pubkey:o,hash:F})}}const P=(e.tapLeafScript||[]).filter(L=>(0,psbtutils_1.pubkeyInScript)(o,L.script)).map(L=>{const F=(0,bip341_1.tapleafHash)({output:L.script,version:L.leafVersion});return Object.assign({hash:F},L)}).filter(L=>!a||a.equals(L.hash)).map(L=>{const F=b.hashForWitnessV1(t,S,M,transaction_1.Transaction.SIGHASH_DEFAULT,L.hash);return{pubkey:o,hash:F,leafHash:L.hash}});return B.concat(P)}function checkSighashTypeAllowed(t,e){if(e&&e.indexOf(t)<0){const n=sighashTypeToString(t);throw new Error(`Sighash type is not allowed. Retry the sign method passing the sighashTypes array of whitelisted types. Sighash type: ${n}`)}}function getPayment(t,e,n){let o;switch(e){case"multisig":const c=getSortedSigs(t,n);o=payments.p2ms({output:t,signatures:c});break;case"pubkey":o=payments.p2pk({output:t,signature:n[0].signature});break;case"pubkeyhash":o=payments.p2pkh({output:t,pubkey:n[0].pubkey,signature:n[0].signature});break;case"witnesspubkeyhash":o=payments.p2wpkh({output:t,pubkey:n[0].pubkey,signature:n[0].signature});break}return o}function getScriptFromInput(t,e,n){const o=n.__TX,c={script:null,isSegwit:!1,isP2SH:!1,isP2WSH:!1};if(c.isP2SH=!!e.redeemScript,c.isP2WSH=!!e.witnessScript,e.witnessScript)c.script=e.witnessScript;else if(e.redeemScript)c.script=e.redeemScript;else if(e.nonWitnessUtxo){const a=nonWitnessUtxoTxFromCache(n,e,t),l=o.ins[t].index;c.script=a.outs[l].script}else e.witnessUtxo&&(c.script=e.witnessUtxo.script);return(e.witnessScript||(0,psbtutils_1.isP2WPKH)(c.script))&&(c.isSegwit=!0),c}function getSignersFromHD(t,e,n){const o=(0,utils_1$1.checkForInput)(e,t);if(!o.bip32Derivation||o.bip32Derivation.length===0)throw new Error("Need bip32Derivation to sign with HD");const c=o.bip32Derivation.map(l=>{if(l.masterFingerprint.equals(n.fingerprint))return l}).filter(l=>!!l);if(c.length===0)throw new Error("Need one bip32Derivation masterFingerprint to match the HDSigner fingerprint");return c.map(l=>{const b=n.derivePath(l.path);if(!l.pubkey.equals(b.publicKey))throw new Error("pubkey did not match bip32Derivation");return b})}function getSortedSigs(t,e){return payments.p2ms({output:t}).pubkeys.map(o=>(e.filter(c=>c.pubkey.equals(o))[0]||{}).signature).filter(o=>!!o)}function scriptWitnessToWitnessStack(t){let e=0;function n(l){return e+=l,t.slice(e-l,e)}function o(){const l=varuint.decode(t,e);return e+=varuint.decode.bytes,l}function c(){return n(o())}function a(){const l=o(),b=[];for(let v=0;v<l;v++)b.push(c());return b}return a()}function sighashTypeToString(t){let e=t&transaction_1.Transaction.SIGHASH_ANYONECANPAY?"SIGHASH_ANYONECANPAY | ":"";switch(t&31){case transaction_1.Transaction.SIGHASH_ALL:e+="SIGHASH_ALL";break;case transaction_1.Transaction.SIGHASH_SINGLE:e+="SIGHASH_SINGLE";break;case transaction_1.Transaction.SIGHASH_NONE:e+="SIGHASH_NONE";break}return e}function addNonWitnessTxCache(t,e,n){t.__NON_WITNESS_UTXO_BUF_CACHE[n]=e.nonWitnessUtxo;const o=transaction_1.Transaction.fromBuffer(e.nonWitnessUtxo);t.__NON_WITNESS_UTXO_TX_CACHE[n]=o;const c=t,a=n;delete e.nonWitnessUtxo,Object.defineProperty(e,"nonWitnessUtxo",{enumerable:!0,get(){const l=c.__NON_WITNESS_UTXO_BUF_CACHE[a],b=c.__NON_WITNESS_UTXO_TX_CACHE[a];if(l!==void 0)return l;{const v=b.toBuffer();return c.__NON_WITNESS_UTXO_BUF_CACHE[a]=v,v}},set(l){c.__NON_WITNESS_UTXO_BUF_CACHE[a]=l}})}function inputFinalizeGetAmts(t,e,n,o){let c=0;t.forEach((v,A)=>{if(o&&v.finalScriptSig&&(e.ins[A].script=v.finalScriptSig),o&&v.finalScriptWitness&&(e.ins[A].witness=scriptWitnessToWitnessStack(v.finalScriptWitness)),v.witnessUtxo)c+=v.witnessUtxo.value;else if(v.nonWitnessUtxo){const S=nonWitnessUtxoTxFromCache(n,v,A),M=e.ins[A].index,B=S.outs[M];c+=B.value}});const a=e.outs.reduce((v,A)=>v+A.value,0),l=c-a;if(l<0)throw new Error("Outputs are spending more than Inputs");const b=e.virtualSize();n.__FEE=l,n.__EXTRACTED_TX=e,n.__FEE_RATE=Math.floor(l/b)}function nonWitnessUtxoTxFromCache(t,e,n){const o=t.__NON_WITNESS_UTXO_TX_CACHE;return o[n]||addNonWitnessTxCache(t,e,n),o[n]}function getScriptFromUtxo(t,e,n){const{script:o}=getScriptAndAmountFromUtxo(t,e,n);return o}function getScriptAndAmountFromUtxo(t,e,n){if(e.witnessUtxo!==void 0)return{script:e.witnessUtxo.script,value:e.witnessUtxo.value};if(e.nonWitnessUtxo!==void 0){const c=nonWitnessUtxoTxFromCache(n,e,t).outs[n.__TX.ins[t].index];return{script:c.script,value:c.value}}else throw new Error("Can't find pubkey in input without Utxo data")}function pubkeyInInput(t,e,n,o){const c=getScriptFromUtxo(n,e,o),{meaningfulScript:a}=getMeaningfulScript(c,n,"input",e.redeemScript,e.witnessScript);return(0,psbtutils_1.pubkeyInScript)(t,a)}function pubkeyInOutput(t,e,n,o){const c=o.__TX.outs[n].script,{meaningfulScript:a}=getMeaningfulScript(c,n,"output",e.redeemScript,e.witnessScript);return(0,psbtutils_1.pubkeyInScript)(t,a)}function redeemFromFinalScriptSig(t){if(!t)return;const e=bscript.decompile(t);if(!e)return;const n=e[e.length-1];if(!(!Buffer$1$1.isBuffer(n)||isPubkeyLike(n)||isSigLike(n)||!bscript.decompile(n)))return n}function redeemFromFinalWitnessScript(t){if(!t)return;const e=scriptWitnessToWitnessStack(t),n=e[e.length-1];if(!(isPubkeyLike(n)||!bscript.decompile(n)))return n}function compressPubkey(t){if(t.length===65){const e=t[64]&1,n=t.slice(0,33);return n[0]=2|e,n}return t.slice()}function isPubkeyLike(t){return t.length===33&&bscript.isCanonicalPubKey(t)}function isSigLike(t){return bscript.isCanonicalScriptSignature(t)}function getMeaningfulScript(t,e,n,o,c){const a=(0,psbtutils_1.isP2SHScript)(t),l=a&&o&&(0,psbtutils_1.isP2WSHScript)(o),b=(0,psbtutils_1.isP2WSHScript)(t);if(a&&o===void 0)throw new Error("scriptPubkey is P2SH but redeemScript missing");if((b||l)&&c===void 0)throw new Error("scriptPubkey or redeemScript is P2WSH but witnessScript missing");let v;return l?(v=c,checkRedeemScript(e,t,o,n),checkWitnessScript(e,o,c,n),checkInvalidP2WSH(v)):b?(v=c,checkWitnessScript(e,t,c,n),checkInvalidP2WSH(v)):a?(v=o,checkRedeemScript(e,t,o,n)):v=t,{meaningfulScript:v,type:l?"p2sh-p2wsh":a?"p2sh":b?"p2wsh":"raw"}}function checkInvalidP2WSH(t){if((0,psbtutils_1.isP2WPKH)(t)||(0,psbtutils_1.isP2SHScript)(t))throw new Error("P2WPKH or P2SH can not be contained within P2WSH")}function classifyScript(t){return(0,psbtutils_1.isP2WPKH)(t)?"witnesspubkeyhash":(0,psbtutils_1.isP2PKH)(t)?"pubkeyhash":(0,psbtutils_1.isP2MS)(t)?"multisig":(0,psbtutils_1.isP2PK)(t)?"pubkey":"nonstandard"}function range(t){return[...Array(t).keys()]}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.initEccLib=t.Transaction=t.opcodes=t.Psbt=t.Block=t.script=t.payments=t.networks=t.crypto=t.address=void 0;const e=address;t.address=e;const n=crypto$3;t.crypto=n;const o=networks$1;t.networks=o;const c=payments$3;t.payments=c;const a=script;t.script=a;var l=block;Object.defineProperty(t,"Block",{enumerable:!0,get:function(){return l.Block}});var b=psbt$1;Object.defineProperty(t,"Psbt",{enumerable:!0,get:function(){return b.Psbt}});var v=ops;Object.defineProperty(t,"opcodes",{enumerable:!0,get:function(){return v.OPS}});var A=transaction;Object.defineProperty(t,"Transaction",{enumerable:!0,get:function(){return A.Transaction}});var S=ecc_lib;Object.defineProperty(t,"initEccLib",{enumerable:!0,get:function(){return S.initEccLib}})})(src$3);var dist$1={},lib$1={},cryptoBrowserify={},browser$c={exports:{}},MAX_BYTES=65536,MAX_UINT32=4294967295;function oldBrowser$1(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}var Buffer$o=safeBufferExports$2.Buffer,crypto$2=commonjsGlobal.crypto||commonjsGlobal.msCrypto;crypto$2&&crypto$2.getRandomValues?browser$c.exports=randomBytes$2:browser$c.exports=oldBrowser$1;function randomBytes$2(t,e){if(t>MAX_UINT32)throw new RangeError("requested too many random bytes");var n=Buffer$o.allocUnsafe(t);if(t>0)if(t>MAX_BYTES)for(var o=0;o<t;o+=MAX_BYTES)crypto$2.getRandomValues(n.slice(o,o+MAX_BYTES));else crypto$2.getRandomValues(n);return typeof e=="function"?process$1.nextTick(function(){e(null,n)}):n}var browserExports=browser$c.exports,inherits$d=inherits_browserExports,Buffer$n=safeBufferExports$2.Buffer,Base$4=cipherBase,ZEROS$2=Buffer$n.alloc(128),blocksize=64;function Hmac$2(t,e){Base$4.call(this,"digest"),typeof e=="string"&&(e=Buffer$n.from(e)),this._alg=t,this._key=e,e.length>blocksize?e=t(e):e.length<blocksize&&(e=Buffer$n.concat([e,ZEROS$2],blocksize));for(var n=this._ipad=Buffer$n.allocUnsafe(blocksize),o=this._opad=Buffer$n.allocUnsafe(blocksize),c=0;c<blocksize;c++)n[c]=e[c]^54,o[c]=e[c]^92;this._hash=[n]}inherits$d(Hmac$2,Base$4);Hmac$2.prototype._update=function(t){this._hash.push(t)};Hmac$2.prototype._final=function(){var t=this._alg(Buffer$n.concat(this._hash));return this._alg(Buffer$n.concat([this._opad,t]))};var legacy=Hmac$2,MD5$1=md5_js,md5$3=function(t){return new MD5$1().update(t).digest()},inherits$c=inherits_browserExports,Legacy=legacy,Base$3=cipherBase,Buffer$m=safeBufferExports$2.Buffer,md5$2=md5$3,RIPEMD160$1=ripemd160,sha$1=sha_jsExports,ZEROS$1=Buffer$m.alloc(128);function Hmac$1(t,e){Base$3.call(this,"digest"),typeof e=="string"&&(e=Buffer$m.from(e));var n=t==="sha512"||t==="sha384"?128:64;if(this._alg=t,this._key=e,e.length>n){var o=t==="rmd160"?new RIPEMD160$1:sha$1(t);e=o.update(e).digest()}else e.length<n&&(e=Buffer$m.concat([e,ZEROS$1],n));for(var c=this._ipad=Buffer$m.allocUnsafe(n),a=this._opad=Buffer$m.allocUnsafe(n),l=0;l<n;l++)c[l]=e[l]^54,a[l]=e[l]^92;this._hash=t==="rmd160"?new RIPEMD160$1:sha$1(t),this._hash.update(c)}inherits$c(Hmac$1,Base$3);Hmac$1.prototype._update=function(t){this._hash.update(t)};Hmac$1.prototype._final=function(){var t=this._hash.digest(),e=this._alg==="rmd160"?new RIPEMD160$1:sha$1(this._alg);return e.update(this._opad).update(t).digest()};var browser$b=function(e,n){return e=e.toLowerCase(),e==="rmd160"||e==="ripemd160"?new Hmac$1("rmd160",n):e==="md5"?new Legacy(md5$2,n):new Hmac$1(e,n)};const sha224WithRSAEncryption={sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption={sign:"rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption={sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption={sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},sha256$1={sign:"ecdsa",hash:"sha256",id:""},sha224={sign:"ecdsa",hash:"sha224",id:""},sha384={sign:"ecdsa",hash:"sha384",id:""},sha512={sign:"ecdsa",hash:"sha512",id:""},DSA={sign:"dsa",hash:"sha1",id:""},ripemd160WithRSA={sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption={sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"},require$$6={sha224WithRSAEncryption,"RSA-SHA224":{sign:"ecdsa/rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption,"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption,"RSA-SHA384":{sign:"ecdsa/rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption,"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256:sha256$1,sha224,sha384,sha512,"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA,"DSA-WITH-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA,"RSA-RIPEMD160":{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption,"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}};var algos=require$$6,browser$a={},MAX_ALLOC=Math.pow(2,30)-1,precondition=function(t,e){if(typeof t!="number")throw new TypeError("Iterations not a number");if(t<0)throw new TypeError("Bad iterations");if(typeof e!="number")throw new TypeError("Key length not a number");if(e<0||e>MAX_ALLOC||e!==e)throw new TypeError("Bad key length")},defaultEncoding$2;if(commonjsGlobal.process&&commonjsGlobal.process.browser)defaultEncoding$2="utf-8";else if(commonjsGlobal.process&&commonjsGlobal.process.version){var pVersionMajor=parseInt(process$1.version.split(".")[0].slice(1),10);defaultEncoding$2=pVersionMajor>=6?"utf-8":"binary"}else defaultEncoding$2="utf-8";var defaultEncoding_1=defaultEncoding$2,Buffer$l=safeBufferExports$2.Buffer,toBuffer$3=function(t,e,n){if(Buffer$l.isBuffer(t))return t;if(typeof t=="string")return Buffer$l.from(t,e);if(ArrayBuffer.isView(t))return Buffer$l.from(t.buffer);throw new TypeError(n+" must be a string, a Buffer, a typed array or a DataView")},md5$1=md5$3,RIPEMD160=ripemd160,sha=sha_jsExports,Buffer$k=safeBufferExports$2.Buffer,checkParameters$1=precondition,defaultEncoding$1=defaultEncoding_1,toBuffer$2=toBuffer$3,ZEROS=Buffer$k.alloc(128),sizes={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function Hmac(t,e,n){var o=getDigest(t),c=t==="sha512"||t==="sha384"?128:64;e.length>c?e=o(e):e.length<c&&(e=Buffer$k.concat([e,ZEROS],c));for(var a=Buffer$k.allocUnsafe(c+sizes[t]),l=Buffer$k.allocUnsafe(c+sizes[t]),b=0;b<c;b++)a[b]=e[b]^54,l[b]=e[b]^92;var v=Buffer$k.allocUnsafe(c+n+4);a.copy(v,0,0,c),this.ipad1=v,this.ipad2=a,this.opad=l,this.alg=t,this.blocksize=c,this.hash=o,this.size=sizes[t]}Hmac.prototype.run=function(t,e){t.copy(e,this.blocksize);var n=this.hash(e);return n.copy(this.opad,this.blocksize),this.hash(this.opad)};function getDigest(t){function e(o){return sha(t).update(o).digest()}function n(o){return new RIPEMD160().update(o).digest()}return t==="rmd160"||t==="ripemd160"?n:t==="md5"?md5$1:e}function pbkdf2(t,e,n,o,c){checkParameters$1(n,o),t=toBuffer$2(t,defaultEncoding$1,"Password"),e=toBuffer$2(e,defaultEncoding$1,"Salt"),c=c||"sha1";var a=new Hmac(c,t,e.length),l=Buffer$k.allocUnsafe(o),b=Buffer$k.allocUnsafe(e.length+4);e.copy(b,0,0,e.length);for(var v=0,A=sizes[c],S=Math.ceil(o/A),M=1;M<=S;M++){b.writeUInt32BE(M,e.length);for(var B=a.run(b,a.ipad1),P=B,L=1;L<n;L++){P=a.run(P,a.ipad2);for(var F=0;F<A;F++)B[F]^=P[F]}B.copy(l,v),v+=A}return l}var syncBrowser=pbkdf2,Buffer$j=safeBufferExports$2.Buffer,checkParameters=precondition,defaultEncoding=defaultEncoding_1,sync=syncBrowser,toBuffer$1=toBuffer$3,ZERO_BUF,subtle=commonjsGlobal.crypto&&commonjsGlobal.crypto.subtle,toBrowser={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},checks=[];function checkNative(t){if(commonjsGlobal.process&&!commonjsGlobal.process.browser||!subtle||!subtle.importKey||!subtle.deriveBits)return Promise.resolve(!1);if(checks[t]!==void 0)return checks[t];ZERO_BUF=ZERO_BUF||Buffer$j.alloc(8);var e=browserPbkdf2(ZERO_BUF,ZERO_BUF,10,128,t).then(function(){return!0}).catch(function(){return!1});return checks[t]=e,e}var nextTick$1;function getNextTick(){return nextTick$1||(commonjsGlobal.process&&commonjsGlobal.process.nextTick?nextTick$1=commonjsGlobal.process.nextTick:commonjsGlobal.queueMicrotask?nextTick$1=commonjsGlobal.queueMicrotask:commonjsGlobal.setImmediate?nextTick$1=commonjsGlobal.setImmediate:nextTick$1=commonjsGlobal.setTimeout,nextTick$1)}function browserPbkdf2(t,e,n,o,c){return subtle.importKey("raw",t,{name:"PBKDF2"},!1,["deriveBits"]).then(function(a){return subtle.deriveBits({name:"PBKDF2",salt:e,iterations:n,hash:{name:c}},a,o<<3)}).then(function(a){return Buffer$j.from(a)})}function resolvePromise(t,e){t.then(function(n){getNextTick()(function(){e(null,n)})},function(n){getNextTick()(function(){e(n)})})}var async=function(t,e,n,o,c,a){typeof c=="function"&&(a=c,c=void 0),c=c||"sha1";var l=toBrowser[c.toLowerCase()];if(!l||typeof commonjsGlobal.Promise!="function"){getNextTick()(function(){var b;try{b=sync(t,e,n,o,c)}catch(v){return a(v)}a(null,b)});return}if(checkParameters(n,o),t=toBuffer$1(t,defaultEncoding,"Password"),e=toBuffer$1(e,defaultEncoding,"Salt"),typeof a!="function")throw new Error("No callback provided to pbkdf2");resolvePromise(checkNative(l).then(function(b){return b?browserPbkdf2(t,e,n,o,l):sync(t,e,n,o,c)}),a)};browser$a.pbkdf2=async;browser$a.pbkdf2Sync=syncBrowser;var browser$9={},des$2={},utils$f={};utils$f.readUInt32BE=function(e,n){var o=e[0+n]<<24|e[1+n]<<16|e[2+n]<<8|e[3+n];return o>>>0};utils$f.writeUInt32BE=function(e,n,o){e[0+o]=n>>>24,e[1+o]=n>>>16&255,e[2+o]=n>>>8&255,e[3+o]=n&255};utils$f.ip=function(e,n,o,c){for(var a=0,l=0,b=6;b>=0;b-=2){for(var v=0;v<=24;v+=8)a<<=1,a|=n>>>v+b&1;for(var v=0;v<=24;v+=8)a<<=1,a|=e>>>v+b&1}for(var b=6;b>=0;b-=2){for(var v=1;v<=25;v+=8)l<<=1,l|=n>>>v+b&1;for(var v=1;v<=25;v+=8)l<<=1,l|=e>>>v+b&1}o[c+0]=a>>>0,o[c+1]=l>>>0};utils$f.rip=function(e,n,o,c){for(var a=0,l=0,b=0;b<4;b++)for(var v=24;v>=0;v-=8)a<<=1,a|=n>>>v+b&1,a<<=1,a|=e>>>v+b&1;for(var b=4;b<8;b++)for(var v=24;v>=0;v-=8)l<<=1,l|=n>>>v+b&1,l<<=1,l|=e>>>v+b&1;o[c+0]=a>>>0,o[c+1]=l>>>0};utils$f.pc1=function(e,n,o,c){for(var a=0,l=0,b=7;b>=5;b--){for(var v=0;v<=24;v+=8)a<<=1,a|=n>>v+b&1;for(var v=0;v<=24;v+=8)a<<=1,a|=e>>v+b&1}for(var v=0;v<=24;v+=8)a<<=1,a|=n>>v+b&1;for(var b=1;b<=3;b++){for(var v=0;v<=24;v+=8)l<<=1,l|=n>>v+b&1;for(var v=0;v<=24;v+=8)l<<=1,l|=e>>v+b&1}for(var v=0;v<=24;v+=8)l<<=1,l|=e>>v+b&1;o[c+0]=a>>>0,o[c+1]=l>>>0};utils$f.r28shl=function(e,n){return e<<n&268435455|e>>>28-n};var pc2table=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];utils$f.pc2=function(e,n,o,c){for(var a=0,l=0,b=pc2table.length>>>1,v=0;v<b;v++)a<<=1,a|=e>>>pc2table[v]&1;for(var v=b;v<pc2table.length;v++)l<<=1,l|=n>>>pc2table[v]&1;o[c+0]=a>>>0,o[c+1]=l>>>0};utils$f.expand=function(e,n,o){var c=0,a=0;c=(e&1)<<5|e>>>27;for(var l=23;l>=15;l-=4)c<<=6,c|=e>>>l&63;for(var l=11;l>=3;l-=4)a|=e>>>l&63,a<<=6;a|=(e&31)<<1|e>>>31,n[o+0]=c>>>0,n[o+1]=a>>>0};var sTable=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];utils$f.substitute=function(e,n){for(var o=0,c=0;c<4;c++){var a=e>>>18-c*6&63,l=sTable[c*64+a];o<<=4,o|=l}for(var c=0;c<4;c++){var a=n>>>18-c*6&63,l=sTable[4*64+c*64+a];o<<=4,o|=l}return o>>>0};var permuteTable=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];utils$f.permute=function(e){for(var n=0,o=0;o<permuteTable.length;o++)n<<=1,n|=e>>>permuteTable[o]&1;return n>>>0};utils$f.padSplit=function(e,n,o){for(var c=e.toString(2);c.length<n;)c="0"+c;for(var a=[],l=0;l<n;l+=o)a.push(c.slice(l,l+o));return a.join(" ")};var assert$e=minimalisticAssert$1;function Cipher$3(t){this.options=t,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0,this.padding=t.padding!==!1}var cipher=Cipher$3;Cipher$3.prototype._init=function(){};Cipher$3.prototype.update=function(e){return e.length===0?[]:this.type==="decrypt"?this._updateDecrypt(e):this._updateEncrypt(e)};Cipher$3.prototype._buffer=function(e,n){for(var o=Math.min(this.buffer.length-this.bufferOff,e.length-n),c=0;c<o;c++)this.buffer[this.bufferOff+c]=e[n+c];return this.bufferOff+=o,o};Cipher$3.prototype._flushBuffer=function(e,n){return this._update(this.buffer,0,e,n),this.bufferOff=0,this.blockSize};Cipher$3.prototype._updateEncrypt=function(e){var n=0,o=0,c=(this.bufferOff+e.length)/this.blockSize|0,a=new Array(c*this.blockSize);this.bufferOff!==0&&(n+=this._buffer(e,n),this.bufferOff===this.buffer.length&&(o+=this._flushBuffer(a,o)));for(var l=e.length-(e.length-n)%this.blockSize;n<l;n+=this.blockSize)this._update(e,n,a,o),o+=this.blockSize;for(;n<e.length;n++,this.bufferOff++)this.buffer[this.bufferOff]=e[n];return a};Cipher$3.prototype._updateDecrypt=function(e){for(var n=0,o=0,c=Math.ceil((this.bufferOff+e.length)/this.blockSize)-1,a=new Array(c*this.blockSize);c>0;c--)n+=this._buffer(e,n),o+=this._flushBuffer(a,o);return n+=this._buffer(e,n),a};Cipher$3.prototype.final=function(e){var n;e&&(n=this.update(e));var o;return this.type==="encrypt"?o=this._finalEncrypt():o=this._finalDecrypt(),n?n.concat(o):o};Cipher$3.prototype._pad=function(e,n){if(n===0)return!1;for(;n<e.length;)e[n++]=0;return!0};Cipher$3.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var e=new Array(this.blockSize);return this._update(this.buffer,0,e,0),e};Cipher$3.prototype._unpad=function(e){return e};Cipher$3.prototype._finalDecrypt=function(){assert$e.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var e=new Array(this.blockSize);return this._flushBuffer(e,0),this._unpad(e)};var assert$d=minimalisticAssert$1,inherits$b=inherits_browserExports,utils$e=utils$f,Cipher$2=cipher;function DESState(){this.tmp=new Array(2),this.keys=null}function DES$3(t){Cipher$2.call(this,t);var e=new DESState;this._desState=e,this.deriveKeys(e,t.key)}inherits$b(DES$3,Cipher$2);var des$1=DES$3;DES$3.create=function(e){return new DES$3(e)};var shiftTable=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];DES$3.prototype.deriveKeys=function(e,n){e.keys=new Array(16*2),assert$d.equal(n.length,this.blockSize,"Invalid key length");var o=utils$e.readUInt32BE(n,0),c=utils$e.readUInt32BE(n,4);utils$e.pc1(o,c,e.tmp,0),o=e.tmp[0],c=e.tmp[1];for(var a=0;a<e.keys.length;a+=2){var l=shiftTable[a>>>1];o=utils$e.r28shl(o,l),c=utils$e.r28shl(c,l),utils$e.pc2(o,c,e.keys,a)}};DES$3.prototype._update=function(e,n,o,c){var a=this._desState,l=utils$e.readUInt32BE(e,n),b=utils$e.readUInt32BE(e,n+4);utils$e.ip(l,b,a.tmp,0),l=a.tmp[0],b=a.tmp[1],this.type==="encrypt"?this._encrypt(a,l,b,a.tmp,0):this._decrypt(a,l,b,a.tmp,0),l=a.tmp[0],b=a.tmp[1],utils$e.writeUInt32BE(o,l,c),utils$e.writeUInt32BE(o,b,c+4)};DES$3.prototype._pad=function(e,n){if(this.padding===!1)return!1;for(var o=e.length-n,c=n;c<e.length;c++)e[c]=o;return!0};DES$3.prototype._unpad=function(e){if(this.padding===!1)return e;for(var n=e[e.length-1],o=e.length-n;o<e.length;o++)assert$d.equal(e[o],n);return e.slice(0,e.length-n)};DES$3.prototype._encrypt=function(e,n,o,c,a){for(var l=n,b=o,v=0;v<e.keys.length;v+=2){var A=e.keys[v],S=e.keys[v+1];utils$e.expand(b,e.tmp,0),A^=e.tmp[0],S^=e.tmp[1];var M=utils$e.substitute(A,S),B=utils$e.permute(M),P=b;b=(l^B)>>>0,l=P}utils$e.rip(b,l,c,a)};DES$3.prototype._decrypt=function(e,n,o,c,a){for(var l=o,b=n,v=e.keys.length-2;v>=0;v-=2){var A=e.keys[v],S=e.keys[v+1];utils$e.expand(l,e.tmp,0),A^=e.tmp[0],S^=e.tmp[1];var M=utils$e.substitute(A,S),B=utils$e.permute(M),P=l;l=(b^B)>>>0,b=P}utils$e.rip(l,b,c,a)};var cbc$1={},assert$c=minimalisticAssert$1,inherits$a=inherits_browserExports,proto={};function CBCState(t){assert$c.equal(t.length,8,"Invalid IV length"),this.iv=new Array(8);for(var e=0;e<this.iv.length;e++)this.iv[e]=t[e]}function instantiate(t){function e(a){t.call(this,a),this._cbcInit()}inherits$a(e,t);for(var n=Object.keys(proto),o=0;o<n.length;o++){var c=n[o];e.prototype[c]=proto[c]}return e.create=function(l){return new e(l)},e}cbc$1.instantiate=instantiate;proto._cbcInit=function(){var e=new CBCState(this.options.iv);this._cbcState=e};proto._update=function(e,n,o,c){var a=this._cbcState,l=this.constructor.super_.prototype,b=a.iv;if(this.type==="encrypt"){for(var v=0;v<this.blockSize;v++)b[v]^=e[n+v];l._update.call(this,b,0,o,c);for(var v=0;v<this.blockSize;v++)b[v]=o[c+v]}else{l._update.call(this,e,n,o,c);for(var v=0;v<this.blockSize;v++)o[c+v]^=b[v];for(var v=0;v<this.blockSize;v++)b[v]=e[n+v]}};var assert$b=minimalisticAssert$1,inherits$9=inherits_browserExports,Cipher$1=cipher,DES$2=des$1;function EDEState(t,e){assert$b.equal(e.length,24,"Invalid key length");var n=e.slice(0,8),o=e.slice(8,16),c=e.slice(16,24);t==="encrypt"?this.ciphers=[DES$2.create({type:"encrypt",key:n}),DES$2.create({type:"decrypt",key:o}),DES$2.create({type:"encrypt",key:c})]:this.ciphers=[DES$2.create({type:"decrypt",key:c}),DES$2.create({type:"encrypt",key:o}),DES$2.create({type:"decrypt",key:n})]}function EDE(t){Cipher$1.call(this,t);var e=new EDEState(this.type,this.options.key);this._edeState=e}inherits$9(EDE,Cipher$1);var ede=EDE;EDE.create=function(e){return new EDE(e)};EDE.prototype._update=function(e,n,o,c){var a=this._edeState;a.ciphers[0]._update(e,n,o,c),a.ciphers[1]._update(o,c,o,c),a.ciphers[2]._update(o,c,o,c)};EDE.prototype._pad=DES$2.prototype._pad;EDE.prototype._unpad=DES$2.prototype._unpad;des$2.utils=utils$f;des$2.Cipher=cipher;des$2.DES=des$1;des$2.CBC=cbc$1;des$2.EDE=ede;var CipherBase=cipherBase,des=des$2,inherits$8=inherits_browserExports,Buffer$i=safeBufferExports$2.Buffer,modes$3={"des-ede3-cbc":des.CBC.instantiate(des.EDE),"des-ede3":des.EDE,"des-ede-cbc":des.CBC.instantiate(des.EDE),"des-ede":des.EDE,"des-cbc":des.CBC.instantiate(des.DES),"des-ecb":des.DES};modes$3.des=modes$3["des-cbc"];modes$3.des3=modes$3["des-ede3-cbc"];var browserifyDes=DES$1;inherits$8(DES$1,CipherBase);function DES$1(t){CipherBase.call(this);var e=t.mode.toLowerCase(),n=modes$3[e],o;t.decrypt?o="decrypt":o="encrypt";var c=t.key;Buffer$i.isBuffer(c)||(c=Buffer$i.from(c)),(e==="des-ede"||e==="des-ede-cbc")&&(c=Buffer$i.concat([c,c.slice(0,8)]));var a=t.iv;Buffer$i.isBuffer(a)||(a=Buffer$i.from(a)),this._des=n.create({key:c,iv:a,type:o})}DES$1.prototype._update=function(t){return Buffer$i.from(this._des.update(t))};DES$1.prototype._final=function(){return Buffer$i.from(this._des.final())};var browser$8={},encrypter={},ecb={};ecb.encrypt=function(t,e){return t._cipher.encryptBlock(e)};ecb.decrypt=function(t,e){return t._cipher.decryptBlock(e)};var cbc={},bufferXor=function(e,n){for(var o=Math.min(e.length,n.length),c=new Buffer$1$1(o),a=0;a<o;++a)c[a]=e[a]^n[a];return c},xor$7=bufferXor;cbc.encrypt=function(t,e){var n=xor$7(e,t._prev);return t._prev=t._cipher.encryptBlock(n),t._prev};cbc.decrypt=function(t,e){var n=t._prev;t._prev=e;var o=t._cipher.decryptBlock(e);return xor$7(o,n)};var cfb={},Buffer$h=safeBufferExports$2.Buffer,xor$6=bufferXor;function encryptStart(t,e,n){var o=e.length,c=xor$6(e,t._cache);return t._cache=t._cache.slice(o),t._prev=Buffer$h.concat([t._prev,n?e:c]),c}cfb.encrypt=function(t,e,n){for(var o=Buffer$h.allocUnsafe(0),c;e.length;)if(t._cache.length===0&&(t._cache=t._cipher.encryptBlock(t._prev),t._prev=Buffer$h.allocUnsafe(0)),t._cache.length<=e.length)c=t._cache.length,o=Buffer$h.concat([o,encryptStart(t,e.slice(0,c),n)]),e=e.slice(c);else{o=Buffer$h.concat([o,encryptStart(t,e,n)]);break}return o};var cfb8={},Buffer$g=safeBufferExports$2.Buffer;function encryptByte$1(t,e,n){var o=t._cipher.encryptBlock(t._prev),c=o[0]^e;return t._prev=Buffer$g.concat([t._prev.slice(1),Buffer$g.from([n?e:c])]),c}cfb8.encrypt=function(t,e,n){for(var o=e.length,c=Buffer$g.allocUnsafe(o),a=-1;++a<o;)c[a]=encryptByte$1(t,e[a],n);return c};var cfb1={},Buffer$f=safeBufferExports$2.Buffer;function encryptByte(t,e,n){for(var o,c=-1,a=8,l=0,b,v;++c<a;)o=t._cipher.encryptBlock(t._prev),b=e&1<<7-c?128:0,v=o[0]^b,l+=(v&128)>>c%8,t._prev=shiftIn(t._prev,n?b:v);return l}function shiftIn(t,e){var n=t.length,o=-1,c=Buffer$f.allocUnsafe(t.length);for(t=Buffer$f.concat([t,Buffer$f.from([e])]);++o<n;)c[o]=t[o]<<1|t[o+1]>>7;return c}cfb1.encrypt=function(t,e,n){for(var o=e.length,c=Buffer$f.allocUnsafe(o),a=-1;++a<o;)c[a]=encryptByte(t,e[a],n);return c};var ofb={},xor$5=bufferXor;function getBlock$1(t){return t._prev=t._cipher.encryptBlock(t._prev),t._prev}ofb.encrypt=function(t,e){for(;t._cache.length<e.length;)t._cache=Buffer$1$1.concat([t._cache,getBlock$1(t)]);var n=t._cache.slice(0,e.length);return t._cache=t._cache.slice(e.length),xor$5(e,n)};var ctr={};function incr32$2(t){for(var e=t.length,n;e--;)if(n=t.readUInt8(e),n===255)t.writeUInt8(0,e);else{n++,t.writeUInt8(n,e);break}}var incr32_1=incr32$2,xor$4=bufferXor,Buffer$e=safeBufferExports$2.Buffer,incr32$1=incr32_1;function getBlock(t){var e=t._cipher.encryptBlockRaw(t._prev);return incr32$1(t._prev),e}var blockSize=16;ctr.encrypt=function(t,e){var n=Math.ceil(e.length/blockSize),o=t._cache.length;t._cache=Buffer$e.concat([t._cache,Buffer$e.allocUnsafe(n*blockSize)]);for(var c=0;c<n;c++){var a=getBlock(t),l=o+c*blockSize;t._cache.writeUInt32BE(a[0],l+0),t._cache.writeUInt32BE(a[1],l+4),t._cache.writeUInt32BE(a[2],l+8),t._cache.writeUInt32BE(a[3],l+12)}var b=t._cache.slice(0,e.length);return t._cache=t._cache.slice(e.length),xor$4(e,b)};const aes128={cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},aes192={cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},aes256={cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},require$$2$1={"aes-128-ecb":{cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},"aes-192-ecb":{cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},"aes-256-ecb":{cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},"aes-128-cbc":{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},"aes-192-cbc":{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},"aes-256-cbc":{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},aes128,aes192,aes256,"aes-128-cfb":{cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},"aes-192-cfb":{cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},"aes-256-cfb":{cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},"aes-128-cfb8":{cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},"aes-192-cfb8":{cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},"aes-256-cfb8":{cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},"aes-128-cfb1":{cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},"aes-192-cfb1":{cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},"aes-256-cfb1":{cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},"aes-128-ofb":{cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},"aes-192-ofb":{cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},"aes-256-ofb":{cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},"aes-128-ctr":{cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},"aes-192-ctr":{cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},"aes-256-ctr":{cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},"aes-128-gcm":{cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},"aes-192-gcm":{cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},"aes-256-gcm":{cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}};var modeModules={ECB:ecb,CBC:cbc,CFB:cfb,CFB8:cfb8,CFB1:cfb1,OFB:ofb,CTR:ctr,GCM:ctr},modes$2=require$$2$1;for(var key$2 in modes$2)modes$2[key$2].module=modeModules[modes$2[key$2].mode];var modes_1=modes$2,aes$5={},Buffer$d=safeBufferExports$2.Buffer;function asUInt32Array(t){Buffer$d.isBuffer(t)||(t=Buffer$d.from(t));for(var e=t.length/4|0,n=new Array(e),o=0;o<e;o++)n[o]=t.readUInt32BE(o*4);return n}function scrubVec(t){for(var e=0;e<t.length;t++)t[e]=0}function cryptBlock(t,e,n,o,c){for(var a=n[0],l=n[1],b=n[2],v=n[3],A=t[0]^e[0],S=t[1]^e[1],M=t[2]^e[2],B=t[3]^e[3],P,L,F,U,q=4,X=1;X<c;X++)P=a[A>>>24]^l[S>>>16&255]^b[M>>>8&255]^v[B&255]^e[q++],L=a[S>>>24]^l[M>>>16&255]^b[B>>>8&255]^v[A&255]^e[q++],F=a[M>>>24]^l[B>>>16&255]^b[A>>>8&255]^v[S&255]^e[q++],U=a[B>>>24]^l[A>>>16&255]^b[S>>>8&255]^v[M&255]^e[q++],A=P,S=L,M=F,B=U;return P=(o[A>>>24]<<24|o[S>>>16&255]<<16|o[M>>>8&255]<<8|o[B&255])^e[q++],L=(o[S>>>24]<<24|o[M>>>16&255]<<16|o[B>>>8&255]<<8|o[A&255])^e[q++],F=(o[M>>>24]<<24|o[B>>>16&255]<<16|o[A>>>8&255]<<8|o[S&255])^e[q++],U=(o[B>>>24]<<24|o[A>>>16&255]<<16|o[S>>>8&255]<<8|o[M&255])^e[q++],P=P>>>0,L=L>>>0,F=F>>>0,U=U>>>0,[P,L,F,U]}var RCON=[0,1,2,4,8,16,32,64,128,27,54],G=function(){for(var t=new Array(256),e=0;e<256;e++)e<128?t[e]=e<<1:t[e]=e<<1^283;for(var n=[],o=[],c=[[],[],[],[]],a=[[],[],[],[]],l=0,b=0,v=0;v<256;++v){var A=b^b<<1^b<<2^b<<3^b<<4;A=A>>>8^A&255^99,n[l]=A,o[A]=l;var S=t[l],M=t[S],B=t[M],P=t[A]*257^A*16843008;c[0][l]=P<<24|P>>>8,c[1][l]=P<<16|P>>>16,c[2][l]=P<<8|P>>>24,c[3][l]=P,P=B*16843009^M*65537^S*257^l*16843008,a[0][A]=P<<24|P>>>8,a[1][A]=P<<16|P>>>16,a[2][A]=P<<8|P>>>24,a[3][A]=P,l===0?l=b=1:(l=S^t[t[t[B^S]]],b^=t[t[b]])}return{SBOX:n,INV_SBOX:o,SUB_MIX:c,INV_SUB_MIX:a}}();function AES(t){this._key=asUInt32Array(t),this._reset()}AES.blockSize=4*4;AES.keySize=256/8;AES.prototype.blockSize=AES.blockSize;AES.prototype.keySize=AES.keySize;AES.prototype._reset=function(){for(var t=this._key,e=t.length,n=e+6,o=(n+1)*4,c=[],a=0;a<e;a++)c[a]=t[a];for(a=e;a<o;a++){var l=c[a-1];a%e===0?(l=l<<8|l>>>24,l=G.SBOX[l>>>24]<<24|G.SBOX[l>>>16&255]<<16|G.SBOX[l>>>8&255]<<8|G.SBOX[l&255],l^=RCON[a/e|0]<<24):e>6&&a%e===4&&(l=G.SBOX[l>>>24]<<24|G.SBOX[l>>>16&255]<<16|G.SBOX[l>>>8&255]<<8|G.SBOX[l&255]),c[a]=c[a-e]^l}for(var b=[],v=0;v<o;v++){var A=o-v,S=c[A-(v%4?0:4)];v<4||A<=4?b[v]=S:b[v]=G.INV_SUB_MIX[0][G.SBOX[S>>>24]]^G.INV_SUB_MIX[1][G.SBOX[S>>>16&255]]^G.INV_SUB_MIX[2][G.SBOX[S>>>8&255]]^G.INV_SUB_MIX[3][G.SBOX[S&255]]}this._nRounds=n,this._keySchedule=c,this._invKeySchedule=b};AES.prototype.encryptBlockRaw=function(t){return t=asUInt32Array(t),cryptBlock(t,this._keySchedule,G.SUB_MIX,G.SBOX,this._nRounds)};AES.prototype.encryptBlock=function(t){var e=this.encryptBlockRaw(t),n=Buffer$d.allocUnsafe(16);return n.writeUInt32BE(e[0],0),n.writeUInt32BE(e[1],4),n.writeUInt32BE(e[2],8),n.writeUInt32BE(e[3],12),n};AES.prototype.decryptBlock=function(t){t=asUInt32Array(t);var e=t[1];t[1]=t[3],t[3]=e;var n=cryptBlock(t,this._invKeySchedule,G.INV_SUB_MIX,G.INV_SBOX,this._nRounds),o=Buffer$d.allocUnsafe(16);return o.writeUInt32BE(n[0],0),o.writeUInt32BE(n[3],4),o.writeUInt32BE(n[2],8),o.writeUInt32BE(n[1],12),o};AES.prototype.scrub=function(){scrubVec(this._keySchedule),scrubVec(this._invKeySchedule),scrubVec(this._key)};aes$5.AES=AES;var Buffer$c=safeBufferExports$2.Buffer,ZEROES=Buffer$c.alloc(16,0);function toArray(t){return[t.readUInt32BE(0),t.readUInt32BE(4),t.readUInt32BE(8),t.readUInt32BE(12)]}function fromArray(t){var e=Buffer$c.allocUnsafe(16);return e.writeUInt32BE(t[0]>>>0,0),e.writeUInt32BE(t[1]>>>0,4),e.writeUInt32BE(t[2]>>>0,8),e.writeUInt32BE(t[3]>>>0,12),e}function GHASH$1(t){this.h=t,this.state=Buffer$c.alloc(16,0),this.cache=Buffer$c.allocUnsafe(0)}GHASH$1.prototype.ghash=function(t){for(var e=-1;++e<t.length;)this.state[e]^=t[e];this._multiply()};GHASH$1.prototype._multiply=function(){for(var t=toArray(this.h),e=[0,0,0,0],n,o,c,a=-1;++a<128;){for(o=(this.state[~~(a/8)]&1<<7-a%8)!==0,o&&(e[0]^=t[0],e[1]^=t[1],e[2]^=t[2],e[3]^=t[3]),c=(t[3]&1)!==0,n=3;n>0;n--)t[n]=t[n]>>>1|(t[n-1]&1)<<31;t[0]=t[0]>>>1,c&&(t[0]=t[0]^225<<24)}this.state=fromArray(e)};GHASH$1.prototype.update=function(t){this.cache=Buffer$c.concat([this.cache,t]);for(var e;this.cache.length>=16;)e=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(e)};GHASH$1.prototype.final=function(t,e){return this.cache.length&&this.ghash(Buffer$c.concat([this.cache,ZEROES],16)),this.ghash(fromArray([0,t,0,e])),this.state};var ghash=GHASH$1,aes$4=aes$5,Buffer$b=safeBufferExports$2.Buffer,Transform$5=cipherBase,inherits$7=inherits_browserExports,GHASH=ghash,xor$3=bufferXor,incr32=incr32_1;function xorTest(t,e){var n=0;t.length!==e.length&&n++;for(var o=Math.min(t.length,e.length),c=0;c<o;++c)n+=t[c]^e[c];return n}function calcIv(t,e,n){if(e.length===12)return t._finID=Buffer$b.concat([e,Buffer$b.from([0,0,0,1])]),Buffer$b.concat([e,Buffer$b.from([0,0,0,2])]);var o=new GHASH(n),c=e.length,a=c%16;o.update(e),a&&(a=16-a,o.update(Buffer$b.alloc(a,0))),o.update(Buffer$b.alloc(8,0));var l=c*8,b=Buffer$b.alloc(8);b.writeUIntBE(l,0,8),o.update(b),t._finID=o.state;var v=Buffer$b.from(t._finID);return incr32(v),v}function StreamCipher$3(t,e,n,o){Transform$5.call(this);var c=Buffer$b.alloc(4,0);this._cipher=new aes$4.AES(e);var a=this._cipher.encryptBlock(c);this._ghash=new GHASH(a),n=calcIv(this,n,a),this._prev=Buffer$b.from(n),this._cache=Buffer$b.allocUnsafe(0),this._secCache=Buffer$b.allocUnsafe(0),this._decrypt=o,this._alen=0,this._len=0,this._mode=t,this._authTag=null,this._called=!1}inherits$7(StreamCipher$3,Transform$5);StreamCipher$3.prototype._update=function(t){if(!this._called&&this._alen){var e=16-this._alen%16;e<16&&(e=Buffer$b.alloc(e,0),this._ghash.update(e))}this._called=!0;var n=this._mode.encrypt(this,t);return this._decrypt?this._ghash.update(t):this._ghash.update(n),this._len+=t.length,n};StreamCipher$3.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var t=xor$3(this._ghash.final(this._alen*8,this._len*8),this._cipher.encryptBlock(this._finID));if(this._decrypt&&xorTest(t,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=t,this._cipher.scrub()};StreamCipher$3.prototype.getAuthTag=function(){if(this._decrypt||!Buffer$b.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag};StreamCipher$3.prototype.setAuthTag=function(e){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=e};StreamCipher$3.prototype.setAAD=function(e){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(e),this._alen+=e.length};var authCipher=StreamCipher$3,aes$3=aes$5,Buffer$a=safeBufferExports$2.Buffer,Transform$4=cipherBase,inherits$6=inherits_browserExports;function StreamCipher$2(t,e,n,o){Transform$4.call(this),this._cipher=new aes$3.AES(e),this._prev=Buffer$a.from(n),this._cache=Buffer$a.allocUnsafe(0),this._secCache=Buffer$a.allocUnsafe(0),this._decrypt=o,this._mode=t}inherits$6(StreamCipher$2,Transform$4);StreamCipher$2.prototype._update=function(t){return this._mode.encrypt(this,t,this._decrypt)};StreamCipher$2.prototype._final=function(){this._cipher.scrub()};var streamCipher=StreamCipher$2,Buffer$9=safeBufferExports$2.Buffer,MD5=md5_js;function EVP_BytesToKey(t,e,n,o){if(Buffer$9.isBuffer(t)||(t=Buffer$9.from(t,"binary")),e&&(Buffer$9.isBuffer(e)||(e=Buffer$9.from(e,"binary")),e.length!==8))throw new RangeError("salt should be Buffer with 8 byte length");for(var c=n/8,a=Buffer$9.alloc(c),l=Buffer$9.alloc(o||0),b=Buffer$9.alloc(0);c>0||o>0;){var v=new MD5;v.update(b),v.update(t),e&&v.update(e),b=v.digest();var A=0;if(c>0){var S=a.length-c;A=Math.min(c,b.length),b.copy(a,S,0,A),c-=A}if(A<b.length&&o>0){var M=l.length-o,B=Math.min(o,b.length-A);b.copy(l,M,A,A+B),o-=B}}return b.fill(0),{key:a,iv:l}}var evp_bytestokey=EVP_BytesToKey,MODES$1=modes_1,AuthCipher$1=authCipher,Buffer$8=safeBufferExports$2.Buffer,StreamCipher$1=streamCipher,Transform$3=cipherBase,aes$2=aes$5,ebtk$2=evp_bytestokey,inherits$5=inherits_browserExports;function Cipher(t,e,n){Transform$3.call(this),this._cache=new Splitter$1,this._cipher=new aes$2.AES(e),this._prev=Buffer$8.from(n),this._mode=t,this._autopadding=!0}inherits$5(Cipher,Transform$3);Cipher.prototype._update=function(t){this._cache.add(t);for(var e,n,o=[];e=this._cache.get();)n=this._mode.encrypt(this,e),o.push(n);return Buffer$8.concat(o)};var PADDING=Buffer$8.alloc(16,16);Cipher.prototype._final=function(){var t=this._cache.flush();if(this._autopadding)return t=this._mode.encrypt(this,t),this._cipher.scrub(),t;if(!t.equals(PADDING))throw this._cipher.scrub(),new Error("data not multiple of block length")};Cipher.prototype.setAutoPadding=function(t){return this._autopadding=!!t,this};function Splitter$1(){this.cache=Buffer$8.allocUnsafe(0)}Splitter$1.prototype.add=function(t){this.cache=Buffer$8.concat([this.cache,t])};Splitter$1.prototype.get=function(){if(this.cache.length>15){var t=this.cache.slice(0,16);return this.cache=this.cache.slice(16),t}return null};Splitter$1.prototype.flush=function(){for(var t=16-this.cache.length,e=Buffer$8.allocUnsafe(t),n=-1;++n<t;)e.writeUInt8(t,n);return Buffer$8.concat([this.cache,e])};function createCipheriv$1(t,e,n){var o=MODES$1[t.toLowerCase()];if(!o)throw new TypeError("invalid suite type");if(typeof e=="string"&&(e=Buffer$8.from(e)),e.length!==o.key/8)throw new TypeError("invalid key length "+e.length);if(typeof n=="string"&&(n=Buffer$8.from(n)),o.mode!=="GCM"&&n.length!==o.iv)throw new TypeError("invalid iv length "+n.length);return o.type==="stream"?new StreamCipher$1(o.module,e,n):o.type==="auth"?new AuthCipher$1(o.module,e,n):new Cipher(o.module,e,n)}function createCipher$1(t,e){var n=MODES$1[t.toLowerCase()];if(!n)throw new TypeError("invalid suite type");var o=ebtk$2(e,!1,n.key,n.iv);return createCipheriv$1(t,o.key,o.iv)}encrypter.createCipheriv=createCipheriv$1;encrypter.createCipher=createCipher$1;var decrypter={},AuthCipher=authCipher,Buffer$7=safeBufferExports$2.Buffer,MODES=modes_1,StreamCipher=streamCipher,Transform$2=cipherBase,aes$1=aes$5,ebtk$1=evp_bytestokey,inherits$4=inherits_browserExports;function Decipher(t,e,n){Transform$2.call(this),this._cache=new Splitter,this._last=void 0,this._cipher=new aes$1.AES(e),this._prev=Buffer$7.from(n),this._mode=t,this._autopadding=!0}inherits$4(Decipher,Transform$2);Decipher.prototype._update=function(t){this._cache.add(t);for(var e,n,o=[];e=this._cache.get(this._autopadding);)n=this._mode.decrypt(this,e),o.push(n);return Buffer$7.concat(o)};Decipher.prototype._final=function(){var t=this._cache.flush();if(this._autopadding)return unpad(this._mode.decrypt(this,t));if(t)throw new Error("data not multiple of block length")};Decipher.prototype.setAutoPadding=function(t){return this._autopadding=!!t,this};function Splitter(){this.cache=Buffer$7.allocUnsafe(0)}Splitter.prototype.add=function(t){this.cache=Buffer$7.concat([this.cache,t])};Splitter.prototype.get=function(t){var e;if(t){if(this.cache.length>16)return e=this.cache.slice(0,16),this.cache=this.cache.slice(16),e}else if(this.cache.length>=16)return e=this.cache.slice(0,16),this.cache=this.cache.slice(16),e;return null};Splitter.prototype.flush=function(){if(this.cache.length)return this.cache};function unpad(t){var e=t[15];if(e<1||e>16)throw new Error("unable to decrypt data");for(var n=-1;++n<e;)if(t[n+(16-e)]!==e)throw new Error("unable to decrypt data");if(e!==16)return t.slice(0,16-e)}function createDecipheriv$1(t,e,n){var o=MODES[t.toLowerCase()];if(!o)throw new TypeError("invalid suite type");if(typeof n=="string"&&(n=Buffer$7.from(n)),o.mode!=="GCM"&&n.length!==o.iv)throw new TypeError("invalid iv length "+n.length);if(typeof e=="string"&&(e=Buffer$7.from(e)),e.length!==o.key/8)throw new TypeError("invalid key length "+e.length);return o.type==="stream"?new StreamCipher(o.module,e,n,!0):o.type==="auth"?new AuthCipher(o.module,e,n,!0):new Decipher(o.module,e,n)}function createDecipher$1(t,e){var n=MODES[t.toLowerCase()];if(!n)throw new TypeError("invalid suite type");var o=ebtk$1(e,!1,n.key,n.iv);return createDecipheriv$1(t,o.key,o.iv)}decrypter.createDecipher=createDecipher$1;decrypter.createDecipheriv=createDecipheriv$1;var ciphers$2=encrypter,deciphers=decrypter,modes$1=require$$2$1;function getCiphers$1(){return Object.keys(modes$1)}browser$8.createCipher=browser$8.Cipher=ciphers$2.createCipher;browser$8.createCipheriv=browser$8.Cipheriv=ciphers$2.createCipheriv;browser$8.createDecipher=browser$8.Decipher=deciphers.createDecipher;browser$8.createDecipheriv=browser$8.Decipheriv=deciphers.createDecipheriv;browser$8.listCiphers=browser$8.getCiphers=getCiphers$1;var modes={};(function(t){t["des-ecb"]={key:8,iv:0},t["des-cbc"]=t.des={key:8,iv:8},t["des-ede3-cbc"]=t.des3={key:24,iv:8},t["des-ede3"]={key:24,iv:0},t["des-ede-cbc"]={key:16,iv:8},t["des-ede"]={key:16,iv:0}})(modes);var DES=browserifyDes,aes=browser$8,aesModes=modes_1,desModes=modes,ebtk=evp_bytestokey;function createCipher(t,e){t=t.toLowerCase();var n,o;if(aesModes[t])n=aesModes[t].key,o=aesModes[t].iv;else if(desModes[t])n=desModes[t].key*8,o=desModes[t].iv;else throw new TypeError("invalid suite type");var c=ebtk(e,!1,n,o);return createCipheriv(t,c.key,c.iv)}function createDecipher(t,e){t=t.toLowerCase();var n,o;if(aesModes[t])n=aesModes[t].key,o=aesModes[t].iv;else if(desModes[t])n=desModes[t].key*8,o=desModes[t].iv;else throw new TypeError("invalid suite type");var c=ebtk(e,!1,n,o);return createDecipheriv(t,c.key,c.iv)}function createCipheriv(t,e,n){if(t=t.toLowerCase(),aesModes[t])return aes.createCipheriv(t,e,n);if(desModes[t])return new DES({key:e,iv:n,mode:t});throw new TypeError("invalid suite type")}function createDecipheriv(t,e,n){if(t=t.toLowerCase(),aesModes[t])return aes.createDecipheriv(t,e,n);if(desModes[t])return new DES({key:e,iv:n,mode:t,decrypt:!0});throw new TypeError("invalid suite type")}function getCiphers(){return Object.keys(desModes).concat(aes.getCiphers())}browser$9.createCipher=browser$9.Cipher=createCipher;browser$9.createCipheriv=browser$9.Cipheriv=createCipheriv;browser$9.createDecipher=browser$9.Decipher=createDecipher;browser$9.createDecipheriv=browser$9.Decipheriv=createDecipheriv;browser$9.listCiphers=browser$9.getCiphers=getCiphers;var browser$7={},bn$5={exports:{}};bn$5.exports;(function(t){(function(e,n){function o(T,u){if(!T)throw new Error(u||"Assertion failed")}function c(T,u){T.super_=u;var p=function(){};p.prototype=u.prototype,T.prototype=new p,T.prototype.constructor=T}function a(T,u,p){if(a.isBN(T))return T;this.negative=0,this.words=null,this.length=0,this.red=null,T!==null&&((u==="le"||u==="be")&&(p=u,u=10),this._init(T||0,u||10,p||"be"))}typeof e=="object"?e.exports=a:n.BN=a,a.BN=a,a.wordSize=26;var l;try{typeof window<"u"&&typeof window.Buffer<"u"?l=window.Buffer:l=require$$0$3.Buffer}catch{}a.isBN=function(u){return u instanceof a?!0:u!==null&&typeof u=="object"&&u.constructor.wordSize===a.wordSize&&Array.isArray(u.words)},a.max=function(u,p){return u.cmp(p)>0?u:p},a.min=function(u,p){return u.cmp(p)<0?u:p},a.prototype._init=function(u,p,m){if(typeof u=="number")return this._initNumber(u,p,m);if(typeof u=="object")return this._initArray(u,p,m);p==="hex"&&(p=16),o(p===(p|0)&&p>=2&&p<=36),u=u.toString().replace(/\s+/g,"");var y=0;u[0]==="-"&&(y++,this.negative=1),y<u.length&&(p===16?this._parseHex(u,y,m):(this._parseBase(u,p,y),m==="le"&&this._initArray(this.toArray(),p,m)))},a.prototype._initNumber=function(u,p,m){u<0&&(this.negative=1,u=-u),u<67108864?(this.words=[u&67108863],this.length=1):u<4503599627370496?(this.words=[u&67108863,u/67108864&67108863],this.length=2):(o(u<9007199254740992),this.words=[u&67108863,u/67108864&67108863,1],this.length=3),m==="le"&&this._initArray(this.toArray(),p,m)},a.prototype._initArray=function(u,p,m){if(o(typeof u.length=="number"),u.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(u.length/3),this.words=new Array(this.length);for(var y=0;y<this.length;y++)this.words[y]=0;var E,$,k=0;if(m==="be")for(y=u.length-1,E=0;y>=0;y-=3)$=u[y]|u[y-1]<<8|u[y-2]<<16,this.words[E]|=$<<k&67108863,this.words[E+1]=$>>>26-k&67108863,k+=24,k>=26&&(k-=26,E++);else if(m==="le")for(y=0,E=0;y<u.length;y+=3)$=u[y]|u[y+1]<<8|u[y+2]<<16,this.words[E]|=$<<k&67108863,this.words[E+1]=$>>>26-k&67108863,k+=24,k>=26&&(k-=26,E++);return this.strip()};function b(T,u){var p=T.charCodeAt(u);return p>=65&&p<=70?p-55:p>=97&&p<=102?p-87:p-48&15}function v(T,u,p){var m=b(T,p);return p-1>=u&&(m|=b(T,p-1)<<4),m}a.prototype._parseHex=function(u,p,m){this.length=Math.ceil((u.length-p)/6),this.words=new Array(this.length);for(var y=0;y<this.length;y++)this.words[y]=0;var E=0,$=0,k;if(m==="be")for(y=u.length-1;y>=p;y-=2)k=v(u,p,y)<<E,this.words[$]|=k&67108863,E>=18?(E-=18,$+=1,this.words[$]|=k>>>26):E+=8;else{var _=u.length-p;for(y=_%2===0?p+1:p;y<u.length;y+=2)k=v(u,p,y)<<E,this.words[$]|=k&67108863,E>=18?(E-=18,$+=1,this.words[$]|=k>>>26):E+=8}this.strip()};function A(T,u,p,m){for(var y=0,E=Math.min(T.length,p),$=u;$<E;$++){var k=T.charCodeAt($)-48;y*=m,k>=49?y+=k-49+10:k>=17?y+=k-17+10:y+=k}return y}a.prototype._parseBase=function(u,p,m){this.words=[0],this.length=1;for(var y=0,E=1;E<=67108863;E*=p)y++;y--,E=E/p|0;for(var $=u.length-m,k=$%y,_=Math.min($,$-k)+m,d=0,w=m;w<_;w+=y)d=A(u,w,w+y,p),this.imuln(E),this.words[0]+d<67108864?this.words[0]+=d:this._iaddn(d);if(k!==0){var I=1;for(d=A(u,w,u.length,p),w=0;w<k;w++)I*=p;this.imuln(I),this.words[0]+d<67108864?this.words[0]+=d:this._iaddn(d)}this.strip()},a.prototype.copy=function(u){u.words=new Array(this.length);for(var p=0;p<this.length;p++)u.words[p]=this.words[p];u.length=this.length,u.negative=this.negative,u.red=this.red},a.prototype.clone=function(){var u=new a(null);return this.copy(u),u},a.prototype._expand=function(u){for(;this.length<u;)this.words[this.length++]=0;return this},a.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},a.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},a.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var S=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],M=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],B=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];a.prototype.toString=function(u,p){u=u||10,p=p|0||1;var m;if(u===16||u==="hex"){m="";for(var y=0,E=0,$=0;$<this.length;$++){var k=this.words[$],_=((k<<y|E)&16777215).toString(16);E=k>>>24-y&16777215,E!==0||$!==this.length-1?m=S[6-_.length]+_+m:m=_+m,y+=2,y>=26&&(y-=26,$--)}for(E!==0&&(m=E.toString(16)+m);m.length%p!==0;)m="0"+m;return this.negative!==0&&(m="-"+m),m}if(u===(u|0)&&u>=2&&u<=36){var d=M[u],w=B[u];m="";var I=this.clone();for(I.negative=0;!I.isZero();){var C=I.modn(w).toString(u);I=I.idivn(w),I.isZero()?m=C+m:m=S[d-C.length]+C+m}for(this.isZero()&&(m="0"+m);m.length%p!==0;)m="0"+m;return this.negative!==0&&(m="-"+m),m}o(!1,"Base should be between 2 and 36")},a.prototype.toNumber=function(){var u=this.words[0];return this.length===2?u+=this.words[1]*67108864:this.length===3&&this.words[2]===1?u+=4503599627370496+this.words[1]*67108864:this.length>2&&o(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-u:u},a.prototype.toJSON=function(){return this.toString(16)},a.prototype.toBuffer=function(u,p){return o(typeof l<"u"),this.toArrayLike(l,u,p)},a.prototype.toArray=function(u,p){return this.toArrayLike(Array,u,p)},a.prototype.toArrayLike=function(u,p,m){var y=this.byteLength(),E=m||Math.max(1,y);o(y<=E,"byte array longer than desired length"),o(E>0,"Requested array length <= 0"),this.strip();var $=p==="le",k=new u(E),_,d,w=this.clone();if($){for(d=0;!w.isZero();d++)_=w.andln(255),w.iushrn(8),k[d]=_;for(;d<E;d++)k[d]=0}else{for(d=0;d<E-y;d++)k[d]=0;for(d=0;!w.isZero();d++)_=w.andln(255),w.iushrn(8),k[E-d-1]=_}return k},Math.clz32?a.prototype._countBits=function(u){return 32-Math.clz32(u)}:a.prototype._countBits=function(u){var p=u,m=0;return p>=4096&&(m+=13,p>>>=13),p>=64&&(m+=7,p>>>=7),p>=8&&(m+=4,p>>>=4),p>=2&&(m+=2,p>>>=2),m+p},a.prototype._zeroBits=function(u){if(u===0)return 26;var p=u,m=0;return p&8191||(m+=13,p>>>=13),p&127||(m+=7,p>>>=7),p&15||(m+=4,p>>>=4),p&3||(m+=2,p>>>=2),p&1||m++,m},a.prototype.bitLength=function(){var u=this.words[this.length-1],p=this._countBits(u);return(this.length-1)*26+p};function P(T){for(var u=new Array(T.bitLength()),p=0;p<u.length;p++){var m=p/26|0,y=p%26;u[p]=(T.words[m]&1<<y)>>>y}return u}a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var u=0,p=0;p<this.length;p++){var m=this._zeroBits(this.words[p]);if(u+=m,m!==26)break}return u},a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},a.prototype.toTwos=function(u){return this.negative!==0?this.abs().inotn(u).iaddn(1):this.clone()},a.prototype.fromTwos=function(u){return this.testn(u-1)?this.notn(u).iaddn(1).ineg():this.clone()},a.prototype.isNeg=function(){return this.negative!==0},a.prototype.neg=function(){return this.clone().ineg()},a.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},a.prototype.iuor=function(u){for(;this.length<u.length;)this.words[this.length++]=0;for(var p=0;p<u.length;p++)this.words[p]=this.words[p]|u.words[p];return this.strip()},a.prototype.ior=function(u){return o((this.negative|u.negative)===0),this.iuor(u)},a.prototype.or=function(u){return this.length>u.length?this.clone().ior(u):u.clone().ior(this)},a.prototype.uor=function(u){return this.length>u.length?this.clone().iuor(u):u.clone().iuor(this)},a.prototype.iuand=function(u){var p;this.length>u.length?p=u:p=this;for(var m=0;m<p.length;m++)this.words[m]=this.words[m]&u.words[m];return this.length=p.length,this.strip()},a.prototype.iand=function(u){return o((this.negative|u.negative)===0),this.iuand(u)},a.prototype.and=function(u){return this.length>u.length?this.clone().iand(u):u.clone().iand(this)},a.prototype.uand=function(u){return this.length>u.length?this.clone().iuand(u):u.clone().iuand(this)},a.prototype.iuxor=function(u){var p,m;this.length>u.length?(p=this,m=u):(p=u,m=this);for(var y=0;y<m.length;y++)this.words[y]=p.words[y]^m.words[y];if(this!==p)for(;y<p.length;y++)this.words[y]=p.words[y];return this.length=p.length,this.strip()},a.prototype.ixor=function(u){return o((this.negative|u.negative)===0),this.iuxor(u)},a.prototype.xor=function(u){return this.length>u.length?this.clone().ixor(u):u.clone().ixor(this)},a.prototype.uxor=function(u){return this.length>u.length?this.clone().iuxor(u):u.clone().iuxor(this)},a.prototype.inotn=function(u){o(typeof u=="number"&&u>=0);var p=Math.ceil(u/26)|0,m=u%26;this._expand(p),m>0&&p--;for(var y=0;y<p;y++)this.words[y]=~this.words[y]&67108863;return m>0&&(this.words[y]=~this.words[y]&67108863>>26-m),this.strip()},a.prototype.notn=function(u){return this.clone().inotn(u)},a.prototype.setn=function(u,p){o(typeof u=="number"&&u>=0);var m=u/26|0,y=u%26;return this._expand(m+1),p?this.words[m]=this.words[m]|1<<y:this.words[m]=this.words[m]&~(1<<y),this.strip()},a.prototype.iadd=function(u){var p;if(this.negative!==0&&u.negative===0)return this.negative=0,p=this.isub(u),this.negative^=1,this._normSign();if(this.negative===0&&u.negative!==0)return u.negative=0,p=this.isub(u),u.negative=1,p._normSign();var m,y;this.length>u.length?(m=this,y=u):(m=u,y=this);for(var E=0,$=0;$<y.length;$++)p=(m.words[$]|0)+(y.words[$]|0)+E,this.words[$]=p&67108863,E=p>>>26;for(;E!==0&&$<m.length;$++)p=(m.words[$]|0)+E,this.words[$]=p&67108863,E=p>>>26;if(this.length=m.length,E!==0)this.words[this.length]=E,this.length++;else if(m!==this)for(;$<m.length;$++)this.words[$]=m.words[$];return this},a.prototype.add=function(u){var p;return u.negative!==0&&this.negative===0?(u.negative=0,p=this.sub(u),u.negative^=1,p):u.negative===0&&this.negative!==0?(this.negative=0,p=u.sub(this),this.negative=1,p):this.length>u.length?this.clone().iadd(u):u.clone().iadd(this)},a.prototype.isub=function(u){if(u.negative!==0){u.negative=0;var p=this.iadd(u);return u.negative=1,p._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(u),this.negative=1,this._normSign();var m=this.cmp(u);if(m===0)return this.negative=0,this.length=1,this.words[0]=0,this;var y,E;m>0?(y=this,E=u):(y=u,E=this);for(var $=0,k=0;k<E.length;k++)p=(y.words[k]|0)-(E.words[k]|0)+$,$=p>>26,this.words[k]=p&67108863;for(;$!==0&&k<y.length;k++)p=(y.words[k]|0)+$,$=p>>26,this.words[k]=p&67108863;if($===0&&k<y.length&&y!==this)for(;k<y.length;k++)this.words[k]=y.words[k];return this.length=Math.max(this.length,k),y!==this&&(this.negative=1),this.strip()},a.prototype.sub=function(u){return this.clone().isub(u)};function L(T,u,p){p.negative=u.negative^T.negative;var m=T.length+u.length|0;p.length=m,m=m-1|0;var y=T.words[0]|0,E=u.words[0]|0,$=y*E,k=$&67108863,_=$/67108864|0;p.words[0]=k;for(var d=1;d<m;d++){for(var w=_>>>26,I=_&67108863,C=Math.min(d,u.length-1),V=Math.max(0,d-T.length+1);V<=C;V++){var O=d-V|0;y=T.words[O]|0,E=u.words[V]|0,$=y*E+I,w+=$/67108864|0,I=$&67108863}p.words[d]=I|0,_=w|0}return _!==0?p.words[d]=_|0:p.length--,p.strip()}var F=function(u,p,m){var y=u.words,E=p.words,$=m.words,k=0,_,d,w,I=y[0]|0,C=I&8191,V=I>>>13,O=y[1]|0,j=O&8191,D=O>>>13,Q=y[2]|0,oe=Q&8191,de=Q>>>13,Z=y[3]|0,H=Z&8191,ge=Z>>>13,Me=y[4]|0,ke=Me&8191,Ie=Me>>>13,et=y[5]|0,Fe=et&8191,$e=et>>>13,$t=y[6]|0,He=$t&8191,Ye=$t>>>13,St=y[7]|0,De=St&8191,qe=St>>>13,At=y[8]|0,ze=At&8191,Ge=At>>>13,kt=y[9]|0,se=kt&8191,J=kt>>>13,re=E[0]|0,he=re&8191,ye=re>>>13,Oe=E[1]|0,Ee=Oe&8191,Ue=Oe>>>13,bt=E[2]|0,Le=bt&8191,Ve=bt>>>13,mt=E[3]|0,Ke=mt&8191,Xe=mt>>>13,Mt=E[4]|0,me=Mt&8191,le=Mt>>>13,_e=E[5]|0,be=_e&8191,Se=_e>>>13,Je=E[6]|0,Te=Je&8191,Ne=Je>>>13,ne=E[7]|0,ie=ne&8191,ae=ne>>>13,Y=E[8]|0,fe=Y&8191,ve=Y>>>13,Pe=E[9]|0,xe=Pe&8191,Be=Pe>>>13;m.negative=u.negative^p.negative,m.length=19,_=Math.imul(C,he),d=Math.imul(C,ye),d=d+Math.imul(V,he)|0,w=Math.imul(V,ye);var Qe=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(Qe>>>26)|0,Qe&=67108863,_=Math.imul(j,he),d=Math.imul(j,ye),d=d+Math.imul(D,he)|0,w=Math.imul(D,ye),_=_+Math.imul(C,Ee)|0,d=d+Math.imul(C,Ue)|0,d=d+Math.imul(V,Ee)|0,w=w+Math.imul(V,Ue)|0;var Ze=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(Ze>>>26)|0,Ze&=67108863,_=Math.imul(oe,he),d=Math.imul(oe,ye),d=d+Math.imul(de,he)|0,w=Math.imul(de,ye),_=_+Math.imul(j,Ee)|0,d=d+Math.imul(j,Ue)|0,d=d+Math.imul(D,Ee)|0,w=w+Math.imul(D,Ue)|0,_=_+Math.imul(C,Le)|0,d=d+Math.imul(C,Ve)|0,d=d+Math.imul(V,Le)|0,w=w+Math.imul(V,Ve)|0;var xt=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(xt>>>26)|0,xt&=67108863,_=Math.imul(H,he),d=Math.imul(H,ye),d=d+Math.imul(ge,he)|0,w=Math.imul(ge,ye),_=_+Math.imul(oe,Ee)|0,d=d+Math.imul(oe,Ue)|0,d=d+Math.imul(de,Ee)|0,w=w+Math.imul(de,Ue)|0,_=_+Math.imul(j,Le)|0,d=d+Math.imul(j,Ve)|0,d=d+Math.imul(D,Le)|0,w=w+Math.imul(D,Ve)|0,_=_+Math.imul(C,Ke)|0,d=d+Math.imul(C,Xe)|0,d=d+Math.imul(V,Ke)|0,w=w+Math.imul(V,Xe)|0;var it=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(it>>>26)|0,it&=67108863,_=Math.imul(ke,he),d=Math.imul(ke,ye),d=d+Math.imul(Ie,he)|0,w=Math.imul(Ie,ye),_=_+Math.imul(H,Ee)|0,d=d+Math.imul(H,Ue)|0,d=d+Math.imul(ge,Ee)|0,w=w+Math.imul(ge,Ue)|0,_=_+Math.imul(oe,Le)|0,d=d+Math.imul(oe,Ve)|0,d=d+Math.imul(de,Le)|0,w=w+Math.imul(de,Ve)|0,_=_+Math.imul(j,Ke)|0,d=d+Math.imul(j,Xe)|0,d=d+Math.imul(D,Ke)|0,w=w+Math.imul(D,Xe)|0,_=_+Math.imul(C,me)|0,d=d+Math.imul(C,le)|0,d=d+Math.imul(V,me)|0,w=w+Math.imul(V,le)|0;var dt=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(dt>>>26)|0,dt&=67108863,_=Math.imul(Fe,he),d=Math.imul(Fe,ye),d=d+Math.imul($e,he)|0,w=Math.imul($e,ye),_=_+Math.imul(ke,Ee)|0,d=d+Math.imul(ke,Ue)|0,d=d+Math.imul(Ie,Ee)|0,w=w+Math.imul(Ie,Ue)|0,_=_+Math.imul(H,Le)|0,d=d+Math.imul(H,Ve)|0,d=d+Math.imul(ge,Le)|0,w=w+Math.imul(ge,Ve)|0,_=_+Math.imul(oe,Ke)|0,d=d+Math.imul(oe,Xe)|0,d=d+Math.imul(de,Ke)|0,w=w+Math.imul(de,Xe)|0,_=_+Math.imul(j,me)|0,d=d+Math.imul(j,le)|0,d=d+Math.imul(D,me)|0,w=w+Math.imul(D,le)|0,_=_+Math.imul(C,be)|0,d=d+Math.imul(C,Se)|0,d=d+Math.imul(V,be)|0,w=w+Math.imul(V,Se)|0;var gt=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(gt>>>26)|0,gt&=67108863,_=Math.imul(He,he),d=Math.imul(He,ye),d=d+Math.imul(Ye,he)|0,w=Math.imul(Ye,ye),_=_+Math.imul(Fe,Ee)|0,d=d+Math.imul(Fe,Ue)|0,d=d+Math.imul($e,Ee)|0,w=w+Math.imul($e,Ue)|0,_=_+Math.imul(ke,Le)|0,d=d+Math.imul(ke,Ve)|0,d=d+Math.imul(Ie,Le)|0,w=w+Math.imul(Ie,Ve)|0,_=_+Math.imul(H,Ke)|0,d=d+Math.imul(H,Xe)|0,d=d+Math.imul(ge,Ke)|0,w=w+Math.imul(ge,Xe)|0,_=_+Math.imul(oe,me)|0,d=d+Math.imul(oe,le)|0,d=d+Math.imul(de,me)|0,w=w+Math.imul(de,le)|0,_=_+Math.imul(j,be)|0,d=d+Math.imul(j,Se)|0,d=d+Math.imul(D,be)|0,w=w+Math.imul(D,Se)|0,_=_+Math.imul(C,Te)|0,d=d+Math.imul(C,Ne)|0,d=d+Math.imul(V,Te)|0,w=w+Math.imul(V,Ne)|0;var yt=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(yt>>>26)|0,yt&=67108863,_=Math.imul(De,he),d=Math.imul(De,ye),d=d+Math.imul(qe,he)|0,w=Math.imul(qe,ye),_=_+Math.imul(He,Ee)|0,d=d+Math.imul(He,Ue)|0,d=d+Math.imul(Ye,Ee)|0,w=w+Math.imul(Ye,Ue)|0,_=_+Math.imul(Fe,Le)|0,d=d+Math.imul(Fe,Ve)|0,d=d+Math.imul($e,Le)|0,w=w+Math.imul($e,Ve)|0,_=_+Math.imul(ke,Ke)|0,d=d+Math.imul(ke,Xe)|0,d=d+Math.imul(Ie,Ke)|0,w=w+Math.imul(Ie,Xe)|0,_=_+Math.imul(H,me)|0,d=d+Math.imul(H,le)|0,d=d+Math.imul(ge,me)|0,w=w+Math.imul(ge,le)|0,_=_+Math.imul(oe,be)|0,d=d+Math.imul(oe,Se)|0,d=d+Math.imul(de,be)|0,w=w+Math.imul(de,Se)|0,_=_+Math.imul(j,Te)|0,d=d+Math.imul(j,Ne)|0,d=d+Math.imul(D,Te)|0,w=w+Math.imul(D,Ne)|0,_=_+Math.imul(C,ie)|0,d=d+Math.imul(C,ae)|0,d=d+Math.imul(V,ie)|0,w=w+Math.imul(V,ae)|0;var Et=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(Et>>>26)|0,Et&=67108863,_=Math.imul(ze,he),d=Math.imul(ze,ye),d=d+Math.imul(Ge,he)|0,w=Math.imul(Ge,ye),_=_+Math.imul(De,Ee)|0,d=d+Math.imul(De,Ue)|0,d=d+Math.imul(qe,Ee)|0,w=w+Math.imul(qe,Ue)|0,_=_+Math.imul(He,Le)|0,d=d+Math.imul(He,Ve)|0,d=d+Math.imul(Ye,Le)|0,w=w+Math.imul(Ye,Ve)|0,_=_+Math.imul(Fe,Ke)|0,d=d+Math.imul(Fe,Xe)|0,d=d+Math.imul($e,Ke)|0,w=w+Math.imul($e,Xe)|0,_=_+Math.imul(ke,me)|0,d=d+Math.imul(ke,le)|0,d=d+Math.imul(Ie,me)|0,w=w+Math.imul(Ie,le)|0,_=_+Math.imul(H,be)|0,d=d+Math.imul(H,Se)|0,d=d+Math.imul(ge,be)|0,w=w+Math.imul(ge,Se)|0,_=_+Math.imul(oe,Te)|0,d=d+Math.imul(oe,Ne)|0,d=d+Math.imul(de,Te)|0,w=w+Math.imul(de,Ne)|0,_=_+Math.imul(j,ie)|0,d=d+Math.imul(j,ae)|0,d=d+Math.imul(D,ie)|0,w=w+Math.imul(D,ae)|0,_=_+Math.imul(C,fe)|0,d=d+Math.imul(C,ve)|0,d=d+Math.imul(V,fe)|0,w=w+Math.imul(V,ve)|0;var vt=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(vt>>>26)|0,vt&=67108863,_=Math.imul(se,he),d=Math.imul(se,ye),d=d+Math.imul(J,he)|0,w=Math.imul(J,ye),_=_+Math.imul(ze,Ee)|0,d=d+Math.imul(ze,Ue)|0,d=d+Math.imul(Ge,Ee)|0,w=w+Math.imul(Ge,Ue)|0,_=_+Math.imul(De,Le)|0,d=d+Math.imul(De,Ve)|0,d=d+Math.imul(qe,Le)|0,w=w+Math.imul(qe,Ve)|0,_=_+Math.imul(He,Ke)|0,d=d+Math.imul(He,Xe)|0,d=d+Math.imul(Ye,Ke)|0,w=w+Math.imul(Ye,Xe)|0,_=_+Math.imul(Fe,me)|0,d=d+Math.imul(Fe,le)|0,d=d+Math.imul($e,me)|0,w=w+Math.imul($e,le)|0,_=_+Math.imul(ke,be)|0,d=d+Math.imul(ke,Se)|0,d=d+Math.imul(Ie,be)|0,w=w+Math.imul(Ie,Se)|0,_=_+Math.imul(H,Te)|0,d=d+Math.imul(H,Ne)|0,d=d+Math.imul(ge,Te)|0,w=w+Math.imul(ge,Ne)|0,_=_+Math.imul(oe,ie)|0,d=d+Math.imul(oe,ae)|0,d=d+Math.imul(de,ie)|0,w=w+Math.imul(de,ae)|0,_=_+Math.imul(j,fe)|0,d=d+Math.imul(j,ve)|0,d=d+Math.imul(D,fe)|0,w=w+Math.imul(D,ve)|0,_=_+Math.imul(C,xe)|0,d=d+Math.imul(C,Be)|0,d=d+Math.imul(V,xe)|0,w=w+Math.imul(V,Be)|0;var _t=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(_t>>>26)|0,_t&=67108863,_=Math.imul(se,Ee),d=Math.imul(se,Ue),d=d+Math.imul(J,Ee)|0,w=Math.imul(J,Ue),_=_+Math.imul(ze,Le)|0,d=d+Math.imul(ze,Ve)|0,d=d+Math.imul(Ge,Le)|0,w=w+Math.imul(Ge,Ve)|0,_=_+Math.imul(De,Ke)|0,d=d+Math.imul(De,Xe)|0,d=d+Math.imul(qe,Ke)|0,w=w+Math.imul(qe,Xe)|0,_=_+Math.imul(He,me)|0,d=d+Math.imul(He,le)|0,d=d+Math.imul(Ye,me)|0,w=w+Math.imul(Ye,le)|0,_=_+Math.imul(Fe,be)|0,d=d+Math.imul(Fe,Se)|0,d=d+Math.imul($e,be)|0,w=w+Math.imul($e,Se)|0,_=_+Math.imul(ke,Te)|0,d=d+Math.imul(ke,Ne)|0,d=d+Math.imul(Ie,Te)|0,w=w+Math.imul(Ie,Ne)|0,_=_+Math.imul(H,ie)|0,d=d+Math.imul(H,ae)|0,d=d+Math.imul(ge,ie)|0,w=w+Math.imul(ge,ae)|0,_=_+Math.imul(oe,fe)|0,d=d+Math.imul(oe,ve)|0,d=d+Math.imul(de,fe)|0,w=w+Math.imul(de,ve)|0,_=_+Math.imul(j,xe)|0,d=d+Math.imul(j,Be)|0,d=d+Math.imul(D,xe)|0,w=w+Math.imul(D,Be)|0;var wt=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(wt>>>26)|0,wt&=67108863,_=Math.imul(se,Le),d=Math.imul(se,Ve),d=d+Math.imul(J,Le)|0,w=Math.imul(J,Ve),_=_+Math.imul(ze,Ke)|0,d=d+Math.imul(ze,Xe)|0,d=d+Math.imul(Ge,Ke)|0,w=w+Math.imul(Ge,Xe)|0,_=_+Math.imul(De,me)|0,d=d+Math.imul(De,le)|0,d=d+Math.imul(qe,me)|0,w=w+Math.imul(qe,le)|0,_=_+Math.imul(He,be)|0,d=d+Math.imul(He,Se)|0,d=d+Math.imul(Ye,be)|0,w=w+Math.imul(Ye,Se)|0,_=_+Math.imul(Fe,Te)|0,d=d+Math.imul(Fe,Ne)|0,d=d+Math.imul($e,Te)|0,w=w+Math.imul($e,Ne)|0,_=_+Math.imul(ke,ie)|0,d=d+Math.imul(ke,ae)|0,d=d+Math.imul(Ie,ie)|0,w=w+Math.imul(Ie,ae)|0,_=_+Math.imul(H,fe)|0,d=d+Math.imul(H,ve)|0,d=d+Math.imul(ge,fe)|0,w=w+Math.imul(ge,ve)|0,_=_+Math.imul(oe,xe)|0,d=d+Math.imul(oe,Be)|0,d=d+Math.imul(de,xe)|0,w=w+Math.imul(de,Be)|0;var ct=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(ct>>>26)|0,ct&=67108863,_=Math.imul(se,Ke),d=Math.imul(se,Xe),d=d+Math.imul(J,Ke)|0,w=Math.imul(J,Xe),_=_+Math.imul(ze,me)|0,d=d+Math.imul(ze,le)|0,d=d+Math.imul(Ge,me)|0,w=w+Math.imul(Ge,le)|0,_=_+Math.imul(De,be)|0,d=d+Math.imul(De,Se)|0,d=d+Math.imul(qe,be)|0,w=w+Math.imul(qe,Se)|0,_=_+Math.imul(He,Te)|0,d=d+Math.imul(He,Ne)|0,d=d+Math.imul(Ye,Te)|0,w=w+Math.imul(Ye,Ne)|0,_=_+Math.imul(Fe,ie)|0,d=d+Math.imul(Fe,ae)|0,d=d+Math.imul($e,ie)|0,w=w+Math.imul($e,ae)|0,_=_+Math.imul(ke,fe)|0,d=d+Math.imul(ke,ve)|0,d=d+Math.imul(Ie,fe)|0,w=w+Math.imul(Ie,ve)|0,_=_+Math.imul(H,xe)|0,d=d+Math.imul(H,Be)|0,d=d+Math.imul(ge,xe)|0,w=w+Math.imul(ge,Be)|0;var pt=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(pt>>>26)|0,pt&=67108863,_=Math.imul(se,me),d=Math.imul(se,le),d=d+Math.imul(J,me)|0,w=Math.imul(J,le),_=_+Math.imul(ze,be)|0,d=d+Math.imul(ze,Se)|0,d=d+Math.imul(Ge,be)|0,w=w+Math.imul(Ge,Se)|0,_=_+Math.imul(De,Te)|0,d=d+Math.imul(De,Ne)|0,d=d+Math.imul(qe,Te)|0,w=w+Math.imul(qe,Ne)|0,_=_+Math.imul(He,ie)|0,d=d+Math.imul(He,ae)|0,d=d+Math.imul(Ye,ie)|0,w=w+Math.imul(Ye,ae)|0,_=_+Math.imul(Fe,fe)|0,d=d+Math.imul(Fe,ve)|0,d=d+Math.imul($e,fe)|0,w=w+Math.imul($e,ve)|0,_=_+Math.imul(ke,xe)|0,d=d+Math.imul(ke,Be)|0,d=d+Math.imul(Ie,xe)|0,w=w+Math.imul(Ie,Be)|0;var at=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(at>>>26)|0,at&=67108863,_=Math.imul(se,be),d=Math.imul(se,Se),d=d+Math.imul(J,be)|0,w=Math.imul(J,Se),_=_+Math.imul(ze,Te)|0,d=d+Math.imul(ze,Ne)|0,d=d+Math.imul(Ge,Te)|0,w=w+Math.imul(Ge,Ne)|0,_=_+Math.imul(De,ie)|0,d=d+Math.imul(De,ae)|0,d=d+Math.imul(qe,ie)|0,w=w+Math.imul(qe,ae)|0,_=_+Math.imul(He,fe)|0,d=d+Math.imul(He,ve)|0,d=d+Math.imul(Ye,fe)|0,w=w+Math.imul(Ye,ve)|0,_=_+Math.imul(Fe,xe)|0,d=d+Math.imul(Fe,Be)|0,d=d+Math.imul($e,xe)|0,w=w+Math.imul($e,Be)|0;var lt=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(lt>>>26)|0,lt&=67108863,_=Math.imul(se,Te),d=Math.imul(se,Ne),d=d+Math.imul(J,Te)|0,w=Math.imul(J,Ne),_=_+Math.imul(ze,ie)|0,d=d+Math.imul(ze,ae)|0,d=d+Math.imul(Ge,ie)|0,w=w+Math.imul(Ge,ae)|0,_=_+Math.imul(De,fe)|0,d=d+Math.imul(De,ve)|0,d=d+Math.imul(qe,fe)|0,w=w+Math.imul(qe,ve)|0,_=_+Math.imul(He,xe)|0,d=d+Math.imul(He,Be)|0,d=d+Math.imul(Ye,xe)|0,w=w+Math.imul(Ye,Be)|0;var ht=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(ht>>>26)|0,ht&=67108863,_=Math.imul(se,ie),d=Math.imul(se,ae),d=d+Math.imul(J,ie)|0,w=Math.imul(J,ae),_=_+Math.imul(ze,fe)|0,d=d+Math.imul(ze,ve)|0,d=d+Math.imul(Ge,fe)|0,w=w+Math.imul(Ge,ve)|0,_=_+Math.imul(De,xe)|0,d=d+Math.imul(De,Be)|0,d=d+Math.imul(qe,xe)|0,w=w+Math.imul(qe,Be)|0;var ot=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(ot>>>26)|0,ot&=67108863,_=Math.imul(se,fe),d=Math.imul(se,ve),d=d+Math.imul(J,fe)|0,w=Math.imul(J,ve),_=_+Math.imul(ze,xe)|0,d=d+Math.imul(ze,Be)|0,d=d+Math.imul(Ge,xe)|0,w=w+Math.imul(Ge,Be)|0;var je=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(je>>>26)|0,je&=67108863,_=Math.imul(se,xe),d=Math.imul(se,Be),d=d+Math.imul(J,xe)|0,w=Math.imul(J,Be);var We=(k+_|0)+((d&8191)<<13)|0;return k=(w+(d>>>13)|0)+(We>>>26)|0,We&=67108863,$[0]=Qe,$[1]=Ze,$[2]=xt,$[3]=it,$[4]=dt,$[5]=gt,$[6]=yt,$[7]=Et,$[8]=vt,$[9]=_t,$[10]=wt,$[11]=ct,$[12]=pt,$[13]=at,$[14]=lt,$[15]=ht,$[16]=ot,$[17]=je,$[18]=We,k!==0&&($[19]=k,m.length++),m};Math.imul||(F=L);function U(T,u,p){p.negative=u.negative^T.negative,p.length=T.length+u.length;for(var m=0,y=0,E=0;E<p.length-1;E++){var $=y;y=0;for(var k=m&67108863,_=Math.min(E,u.length-1),d=Math.max(0,E-T.length+1);d<=_;d++){var w=E-d,I=T.words[w]|0,C=u.words[d]|0,V=I*C,O=V&67108863;$=$+(V/67108864|0)|0,O=O+k|0,k=O&67108863,$=$+(O>>>26)|0,y+=$>>>26,$&=67108863}p.words[E]=k,m=$,$=y}return m!==0?p.words[E]=m:p.length--,p.strip()}function q(T,u,p){var m=new X;return m.mulp(T,u,p)}a.prototype.mulTo=function(u,p){var m,y=this.length+u.length;return this.length===10&&u.length===10?m=F(this,u,p):y<63?m=L(this,u,p):y<1024?m=U(this,u,p):m=q(this,u,p),m};function X(T,u){this.x=T,this.y=u}X.prototype.makeRBT=function(u){for(var p=new Array(u),m=a.prototype._countBits(u)-1,y=0;y<u;y++)p[y]=this.revBin(y,m,u);return p},X.prototype.revBin=function(u,p,m){if(u===0||u===m-1)return u;for(var y=0,E=0;E<p;E++)y|=(u&1)<<p-E-1,u>>=1;return y},X.prototype.permute=function(u,p,m,y,E,$){for(var k=0;k<$;k++)y[k]=p[u[k]],E[k]=m[u[k]]},X.prototype.transform=function(u,p,m,y,E,$){this.permute($,u,p,m,y,E);for(var k=1;k<E;k<<=1)for(var _=k<<1,d=Math.cos(2*Math.PI/_),w=Math.sin(2*Math.PI/_),I=0;I<E;I+=_)for(var C=d,V=w,O=0;O<k;O++){var j=m[I+O],D=y[I+O],Q=m[I+O+k],oe=y[I+O+k],de=C*Q-V*oe;oe=C*oe+V*Q,Q=de,m[I+O]=j+Q,y[I+O]=D+oe,m[I+O+k]=j-Q,y[I+O+k]=D-oe,O!==_&&(de=d*C-w*V,V=d*V+w*C,C=de)}},X.prototype.guessLen13b=function(u,p){var m=Math.max(p,u)|1,y=m&1,E=0;for(m=m/2|0;m;m=m>>>1)E++;return 1<<E+1+y},X.prototype.conjugate=function(u,p,m){if(!(m<=1))for(var y=0;y<m/2;y++){var E=u[y];u[y]=u[m-y-1],u[m-y-1]=E,E=p[y],p[y]=-p[m-y-1],p[m-y-1]=-E}},X.prototype.normalize13b=function(u,p){for(var m=0,y=0;y<p/2;y++){var E=Math.round(u[2*y+1]/p)*8192+Math.round(u[2*y]/p)+m;u[y]=E&67108863,E<67108864?m=0:m=E/67108864|0}return u},X.prototype.convert13b=function(u,p,m,y){for(var E=0,$=0;$<p;$++)E=E+(u[$]|0),m[2*$]=E&8191,E=E>>>13,m[2*$+1]=E&8191,E=E>>>13;for($=2*p;$<y;++$)m[$]=0;o(E===0),o((E&-8192)===0)},X.prototype.stub=function(u){for(var p=new Array(u),m=0;m<u;m++)p[m]=0;return p},X.prototype.mulp=function(u,p,m){var y=2*this.guessLen13b(u.length,p.length),E=this.makeRBT(y),$=this.stub(y),k=new Array(y),_=new Array(y),d=new Array(y),w=new Array(y),I=new Array(y),C=new Array(y),V=m.words;V.length=y,this.convert13b(u.words,u.length,k,y),this.convert13b(p.words,p.length,w,y),this.transform(k,$,_,d,y,E),this.transform(w,$,I,C,y,E);for(var O=0;O<y;O++){var j=_[O]*I[O]-d[O]*C[O];d[O]=_[O]*C[O]+d[O]*I[O],_[O]=j}return this.conjugate(_,d,y),this.transform(_,d,V,$,y,E),this.conjugate(V,$,y),this.normalize13b(V,y),m.negative=u.negative^p.negative,m.length=u.length+p.length,m.strip()},a.prototype.mul=function(u){var p=new a(null);return p.words=new Array(this.length+u.length),this.mulTo(u,p)},a.prototype.mulf=function(u){var p=new a(null);return p.words=new Array(this.length+u.length),q(this,u,p)},a.prototype.imul=function(u){return this.clone().mulTo(u,this)},a.prototype.imuln=function(u){o(typeof u=="number"),o(u<67108864);for(var p=0,m=0;m<this.length;m++){var y=(this.words[m]|0)*u,E=(y&67108863)+(p&67108863);p>>=26,p+=y/67108864|0,p+=E>>>26,this.words[m]=E&67108863}return p!==0&&(this.words[m]=p,this.length++),this},a.prototype.muln=function(u){return this.clone().imuln(u)},a.prototype.sqr=function(){return this.mul(this)},a.prototype.isqr=function(){return this.imul(this.clone())},a.prototype.pow=function(u){var p=P(u);if(p.length===0)return new a(1);for(var m=this,y=0;y<p.length&&p[y]===0;y++,m=m.sqr());if(++y<p.length)for(var E=m.sqr();y<p.length;y++,E=E.sqr())p[y]!==0&&(m=m.mul(E));return m},a.prototype.iushln=function(u){o(typeof u=="number"&&u>=0);var p=u%26,m=(u-p)/26,y=67108863>>>26-p<<26-p,E;if(p!==0){var $=0;for(E=0;E<this.length;E++){var k=this.words[E]&y,_=(this.words[E]|0)-k<<p;this.words[E]=_|$,$=k>>>26-p}$&&(this.words[E]=$,this.length++)}if(m!==0){for(E=this.length-1;E>=0;E--)this.words[E+m]=this.words[E];for(E=0;E<m;E++)this.words[E]=0;this.length+=m}return this.strip()},a.prototype.ishln=function(u){return o(this.negative===0),this.iushln(u)},a.prototype.iushrn=function(u,p,m){o(typeof u=="number"&&u>=0);var y;p?y=(p-p%26)/26:y=0;var E=u%26,$=Math.min((u-E)/26,this.length),k=67108863^67108863>>>E<<E,_=m;if(y-=$,y=Math.max(0,y),_){for(var d=0;d<$;d++)_.words[d]=this.words[d];_.length=$}if($!==0)if(this.length>$)for(this.length-=$,d=0;d<this.length;d++)this.words[d]=this.words[d+$];else this.words[0]=0,this.length=1;var w=0;for(d=this.length-1;d>=0&&(w!==0||d>=y);d--){var I=this.words[d]|0;this.words[d]=w<<26-E|I>>>E,w=I&k}return _&&w!==0&&(_.words[_.length++]=w),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},a.prototype.ishrn=function(u,p,m){return o(this.negative===0),this.iushrn(u,p,m)},a.prototype.shln=function(u){return this.clone().ishln(u)},a.prototype.ushln=function(u){return this.clone().iushln(u)},a.prototype.shrn=function(u){return this.clone().ishrn(u)},a.prototype.ushrn=function(u){return this.clone().iushrn(u)},a.prototype.testn=function(u){o(typeof u=="number"&&u>=0);var p=u%26,m=(u-p)/26,y=1<<p;if(this.length<=m)return!1;var E=this.words[m];return!!(E&y)},a.prototype.imaskn=function(u){o(typeof u=="number"&&u>=0);var p=u%26,m=(u-p)/26;if(o(this.negative===0,"imaskn works only with positive numbers"),this.length<=m)return this;if(p!==0&&m++,this.length=Math.min(m,this.length),p!==0){var y=67108863^67108863>>>p<<p;this.words[this.length-1]&=y}return this.strip()},a.prototype.maskn=function(u){return this.clone().imaskn(u)},a.prototype.iaddn=function(u){return o(typeof u=="number"),o(u<67108864),u<0?this.isubn(-u):this.negative!==0?this.length===1&&(this.words[0]|0)<u?(this.words[0]=u-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(u),this.negative=1,this):this._iaddn(u)},a.prototype._iaddn=function(u){this.words[0]+=u;for(var p=0;p<this.length&&this.words[p]>=67108864;p++)this.words[p]-=67108864,p===this.length-1?this.words[p+1]=1:this.words[p+1]++;return this.length=Math.max(this.length,p+1),this},a.prototype.isubn=function(u){if(o(typeof u=="number"),o(u<67108864),u<0)return this.iaddn(-u);if(this.negative!==0)return this.negative=0,this.iaddn(u),this.negative=1,this;if(this.words[0]-=u,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var p=0;p<this.length&&this.words[p]<0;p++)this.words[p]+=67108864,this.words[p+1]-=1;return this.strip()},a.prototype.addn=function(u){return this.clone().iaddn(u)},a.prototype.subn=function(u){return this.clone().isubn(u)},a.prototype.iabs=function(){return this.negative=0,this},a.prototype.abs=function(){return this.clone().iabs()},a.prototype._ishlnsubmul=function(u,p,m){var y=u.length+m,E;this._expand(y);var $,k=0;for(E=0;E<u.length;E++){$=(this.words[E+m]|0)+k;var _=(u.words[E]|0)*p;$-=_&67108863,k=($>>26)-(_/67108864|0),this.words[E+m]=$&67108863}for(;E<this.length-m;E++)$=(this.words[E+m]|0)+k,k=$>>26,this.words[E+m]=$&67108863;if(k===0)return this.strip();for(o(k===-1),k=0,E=0;E<this.length;E++)$=-(this.words[E]|0)+k,k=$>>26,this.words[E]=$&67108863;return this.negative=1,this.strip()},a.prototype._wordDiv=function(u,p){var m=this.length-u.length,y=this.clone(),E=u,$=E.words[E.length-1]|0,k=this._countBits($);m=26-k,m!==0&&(E=E.ushln(m),y.iushln(m),$=E.words[E.length-1]|0);var _=y.length-E.length,d;if(p!=="mod"){d=new a(null),d.length=_+1,d.words=new Array(d.length);for(var w=0;w<d.length;w++)d.words[w]=0}var I=y.clone()._ishlnsubmul(E,1,_);I.negative===0&&(y=I,d&&(d.words[_]=1));for(var C=_-1;C>=0;C--){var V=(y.words[E.length+C]|0)*67108864+(y.words[E.length+C-1]|0);for(V=Math.min(V/$|0,67108863),y._ishlnsubmul(E,V,C);y.negative!==0;)V--,y.negative=0,y._ishlnsubmul(E,1,C),y.isZero()||(y.negative^=1);d&&(d.words[C]=V)}return d&&d.strip(),y.strip(),p!=="div"&&m!==0&&y.iushrn(m),{div:d||null,mod:y}},a.prototype.divmod=function(u,p,m){if(o(!u.isZero()),this.isZero())return{div:new a(0),mod:new a(0)};var y,E,$;return this.negative!==0&&u.negative===0?($=this.neg().divmod(u,p),p!=="mod"&&(y=$.div.neg()),p!=="div"&&(E=$.mod.neg(),m&&E.negative!==0&&E.iadd(u)),{div:y,mod:E}):this.negative===0&&u.negative!==0?($=this.divmod(u.neg(),p),p!=="mod"&&(y=$.div.neg()),{div:y,mod:$.mod}):this.negative&u.negative?($=this.neg().divmod(u.neg(),p),p!=="div"&&(E=$.mod.neg(),m&&E.negative!==0&&E.isub(u)),{div:$.div,mod:E}):u.length>this.length||this.cmp(u)<0?{div:new a(0),mod:this}:u.length===1?p==="div"?{div:this.divn(u.words[0]),mod:null}:p==="mod"?{div:null,mod:new a(this.modn(u.words[0]))}:{div:this.divn(u.words[0]),mod:new a(this.modn(u.words[0]))}:this._wordDiv(u,p)},a.prototype.div=function(u){return this.divmod(u,"div",!1).div},a.prototype.mod=function(u){return this.divmod(u,"mod",!1).mod},a.prototype.umod=function(u){return this.divmod(u,"mod",!0).mod},a.prototype.divRound=function(u){var p=this.divmod(u);if(p.mod.isZero())return p.div;var m=p.div.negative!==0?p.mod.isub(u):p.mod,y=u.ushrn(1),E=u.andln(1),$=m.cmp(y);return $<0||E===1&&$===0?p.div:p.div.negative!==0?p.div.isubn(1):p.div.iaddn(1)},a.prototype.modn=function(u){o(u<=67108863);for(var p=(1<<26)%u,m=0,y=this.length-1;y>=0;y--)m=(p*m+(this.words[y]|0))%u;return m},a.prototype.idivn=function(u){o(u<=67108863);for(var p=0,m=this.length-1;m>=0;m--){var y=(this.words[m]|0)+p*67108864;this.words[m]=y/u|0,p=y%u}return this.strip()},a.prototype.divn=function(u){return this.clone().idivn(u)},a.prototype.egcd=function(u){o(u.negative===0),o(!u.isZero());var p=this,m=u.clone();p.negative!==0?p=p.umod(u):p=p.clone();for(var y=new a(1),E=new a(0),$=new a(0),k=new a(1),_=0;p.isEven()&&m.isEven();)p.iushrn(1),m.iushrn(1),++_;for(var d=m.clone(),w=p.clone();!p.isZero();){for(var I=0,C=1;!(p.words[0]&C)&&I<26;++I,C<<=1);if(I>0)for(p.iushrn(I);I-- >0;)(y.isOdd()||E.isOdd())&&(y.iadd(d),E.isub(w)),y.iushrn(1),E.iushrn(1);for(var V=0,O=1;!(m.words[0]&O)&&V<26;++V,O<<=1);if(V>0)for(m.iushrn(V);V-- >0;)($.isOdd()||k.isOdd())&&($.iadd(d),k.isub(w)),$.iushrn(1),k.iushrn(1);p.cmp(m)>=0?(p.isub(m),y.isub($),E.isub(k)):(m.isub(p),$.isub(y),k.isub(E))}return{a:$,b:k,gcd:m.iushln(_)}},a.prototype._invmp=function(u){o(u.negative===0),o(!u.isZero());var p=this,m=u.clone();p.negative!==0?p=p.umod(u):p=p.clone();for(var y=new a(1),E=new a(0),$=m.clone();p.cmpn(1)>0&&m.cmpn(1)>0;){for(var k=0,_=1;!(p.words[0]&_)&&k<26;++k,_<<=1);if(k>0)for(p.iushrn(k);k-- >0;)y.isOdd()&&y.iadd($),y.iushrn(1);for(var d=0,w=1;!(m.words[0]&w)&&d<26;++d,w<<=1);if(d>0)for(m.iushrn(d);d-- >0;)E.isOdd()&&E.iadd($),E.iushrn(1);p.cmp(m)>=0?(p.isub(m),y.isub(E)):(m.isub(p),E.isub(y))}var I;return p.cmpn(1)===0?I=y:I=E,I.cmpn(0)<0&&I.iadd(u),I},a.prototype.gcd=function(u){if(this.isZero())return u.abs();if(u.isZero())return this.abs();var p=this.clone(),m=u.clone();p.negative=0,m.negative=0;for(var y=0;p.isEven()&&m.isEven();y++)p.iushrn(1),m.iushrn(1);do{for(;p.isEven();)p.iushrn(1);for(;m.isEven();)m.iushrn(1);var E=p.cmp(m);if(E<0){var $=p;p=m,m=$}else if(E===0||m.cmpn(1)===0)break;p.isub(m)}while(!0);return m.iushln(y)},a.prototype.invm=function(u){return this.egcd(u).a.umod(u)},a.prototype.isEven=function(){return(this.words[0]&1)===0},a.prototype.isOdd=function(){return(this.words[0]&1)===1},a.prototype.andln=function(u){return this.words[0]&u},a.prototype.bincn=function(u){o(typeof u=="number");var p=u%26,m=(u-p)/26,y=1<<p;if(this.length<=m)return this._expand(m+1),this.words[m]|=y,this;for(var E=y,$=m;E!==0&&$<this.length;$++){var k=this.words[$]|0;k+=E,E=k>>>26,k&=67108863,this.words[$]=k}return E!==0&&(this.words[$]=E,this.length++),this},a.prototype.isZero=function(){return this.length===1&&this.words[0]===0},a.prototype.cmpn=function(u){var p=u<0;if(this.negative!==0&&!p)return-1;if(this.negative===0&&p)return 1;this.strip();var m;if(this.length>1)m=1;else{p&&(u=-u),o(u<=67108863,"Number is too big");var y=this.words[0]|0;m=y===u?0:y<u?-1:1}return this.negative!==0?-m|0:m},a.prototype.cmp=function(u){if(this.negative!==0&&u.negative===0)return-1;if(this.negative===0&&u.negative!==0)return 1;var p=this.ucmp(u);return this.negative!==0?-p|0:p},a.prototype.ucmp=function(u){if(this.length>u.length)return 1;if(this.length<u.length)return-1;for(var p=0,m=this.length-1;m>=0;m--){var y=this.words[m]|0,E=u.words[m]|0;if(y!==E){y<E?p=-1:y>E&&(p=1);break}}return p},a.prototype.gtn=function(u){return this.cmpn(u)===1},a.prototype.gt=function(u){return this.cmp(u)===1},a.prototype.gten=function(u){return this.cmpn(u)>=0},a.prototype.gte=function(u){return this.cmp(u)>=0},a.prototype.ltn=function(u){return this.cmpn(u)===-1},a.prototype.lt=function(u){return this.cmp(u)===-1},a.prototype.lten=function(u){return this.cmpn(u)<=0},a.prototype.lte=function(u){return this.cmp(u)<=0},a.prototype.eqn=function(u){return this.cmpn(u)===0},a.prototype.eq=function(u){return this.cmp(u)===0},a.red=function(u){return new pe(u)},a.prototype.toRed=function(u){return o(!this.red,"Already a number in reduction context"),o(this.negative===0,"red works only with positives"),u.convertTo(this)._forceRed(u)},a.prototype.fromRed=function(){return o(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},a.prototype._forceRed=function(u){return this.red=u,this},a.prototype.forceRed=function(u){return o(!this.red,"Already a number in reduction context"),this._forceRed(u)},a.prototype.redAdd=function(u){return o(this.red,"redAdd works only with red numbers"),this.red.add(this,u)},a.prototype.redIAdd=function(u){return o(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,u)},a.prototype.redSub=function(u){return o(this.red,"redSub works only with red numbers"),this.red.sub(this,u)},a.prototype.redISub=function(u){return o(this.red,"redISub works only with red numbers"),this.red.isub(this,u)},a.prototype.redShl=function(u){return o(this.red,"redShl works only with red numbers"),this.red.shl(this,u)},a.prototype.redMul=function(u){return o(this.red,"redMul works only with red numbers"),this.red._verify2(this,u),this.red.mul(this,u)},a.prototype.redIMul=function(u){return o(this.red,"redMul works only with red numbers"),this.red._verify2(this,u),this.red.imul(this,u)},a.prototype.redSqr=function(){return o(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},a.prototype.redISqr=function(){return o(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},a.prototype.redSqrt=function(){return o(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},a.prototype.redInvm=function(){return o(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},a.prototype.redNeg=function(){return o(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},a.prototype.redPow=function(u){return o(this.red&&!u.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,u)};var ee={k256:null,p224:null,p192:null,p25519:null};function te(T,u){this.name=T,this.p=new a(u,16),this.n=this.p.bitLength(),this.k=new a(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}te.prototype._tmp=function(){var u=new a(null);return u.words=new Array(Math.ceil(this.n/13)),u},te.prototype.ireduce=function(u){var p=u,m;do this.split(p,this.tmp),p=this.imulK(p),p=p.iadd(this.tmp),m=p.bitLength();while(m>this.n);var y=m<this.n?-1:p.ucmp(this.p);return y===0?(p.words[0]=0,p.length=1):y>0?p.isub(this.p):p.strip!==void 0?p.strip():p._strip(),p},te.prototype.split=function(u,p){u.iushrn(this.n,0,p)},te.prototype.imulK=function(u){return u.imul(this.k)};function ce(){te.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}c(ce,te),ce.prototype.split=function(u,p){for(var m=4194303,y=Math.min(u.length,9),E=0;E<y;E++)p.words[E]=u.words[E];if(p.length=y,u.length<=9){u.words[0]=0,u.length=1;return}var $=u.words[9];for(p.words[p.length++]=$&m,E=10;E<u.length;E++){var k=u.words[E]|0;u.words[E-10]=(k&m)<<4|$>>>22,$=k}$>>>=22,u.words[E-10]=$,$===0&&u.length>10?u.length-=10:u.length-=9},ce.prototype.imulK=function(u){u.words[u.length]=0,u.words[u.length+1]=0,u.length+=2;for(var p=0,m=0;m<u.length;m++){var y=u.words[m]|0;p+=y*977,u.words[m]=p&67108863,p=y*64+(p/67108864|0)}return u.words[u.length-1]===0&&(u.length--,u.words[u.length-1]===0&&u.length--),u};function ue(){te.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}c(ue,te);function Ae(){te.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}c(Ae,te);function we(){te.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}c(we,te),we.prototype.imulK=function(u){for(var p=0,m=0;m<u.length;m++){var y=(u.words[m]|0)*19+p,E=y&67108863;y>>>=26,u.words[m]=E,p=y}return p!==0&&(u.words[u.length++]=p),u},a._prime=function(u){if(ee[u])return ee[u];var p;if(u==="k256")p=new ce;else if(u==="p224")p=new ue;else if(u==="p192")p=new Ae;else if(u==="p25519")p=new we;else throw new Error("Unknown prime "+u);return ee[u]=p,p};function pe(T){if(typeof T=="string"){var u=a._prime(T);this.m=u.p,this.prime=u}else o(T.gtn(1),"modulus must be greater than 1"),this.m=T,this.prime=null}pe.prototype._verify1=function(u){o(u.negative===0,"red works only with positives"),o(u.red,"red works only with red numbers")},pe.prototype._verify2=function(u,p){o((u.negative|p.negative)===0,"red works only with positives"),o(u.red&&u.red===p.red,"red works only with red numbers")},pe.prototype.imod=function(u){return this.prime?this.prime.ireduce(u)._forceRed(this):u.umod(this.m)._forceRed(this)},pe.prototype.neg=function(u){return u.isZero()?u.clone():this.m.sub(u)._forceRed(this)},pe.prototype.add=function(u,p){this._verify2(u,p);var m=u.add(p);return m.cmp(this.m)>=0&&m.isub(this.m),m._forceRed(this)},pe.prototype.iadd=function(u,p){this._verify2(u,p);var m=u.iadd(p);return m.cmp(this.m)>=0&&m.isub(this.m),m},pe.prototype.sub=function(u,p){this._verify2(u,p);var m=u.sub(p);return m.cmpn(0)<0&&m.iadd(this.m),m._forceRed(this)},pe.prototype.isub=function(u,p){this._verify2(u,p);var m=u.isub(p);return m.cmpn(0)<0&&m.iadd(this.m),m},pe.prototype.shl=function(u,p){return this._verify1(u),this.imod(u.ushln(p))},pe.prototype.imul=function(u,p){return this._verify2(u,p),this.imod(u.imul(p))},pe.prototype.mul=function(u,p){return this._verify2(u,p),this.imod(u.mul(p))},pe.prototype.isqr=function(u){return this.imul(u,u.clone())},pe.prototype.sqr=function(u){return this.mul(u,u)},pe.prototype.sqrt=function(u){if(u.isZero())return u.clone();var p=this.m.andln(3);if(o(p%2===1),p===3){var m=this.m.add(new a(1)).iushrn(2);return this.pow(u,m)}for(var y=this.m.subn(1),E=0;!y.isZero()&&y.andln(1)===0;)E++,y.iushrn(1);o(!y.isZero());var $=new a(1).toRed(this),k=$.redNeg(),_=this.m.subn(1).iushrn(1),d=this.m.bitLength();for(d=new a(2*d*d).toRed(this);this.pow(d,_).cmp(k)!==0;)d.redIAdd(k);for(var w=this.pow(d,y),I=this.pow(u,y.addn(1).iushrn(1)),C=this.pow(u,y),V=E;C.cmp($)!==0;){for(var O=C,j=0;O.cmp($)!==0;j++)O=O.redSqr();o(j<V);var D=this.pow(w,new a(1).iushln(V-j-1));I=I.redMul(D),w=D.redSqr(),C=C.redMul(w),V=j}return I},pe.prototype.invm=function(u){var p=u._invmp(this.m);return p.negative!==0?(p.negative=0,this.imod(p).redNeg()):this.imod(p)},pe.prototype.pow=function(u,p){if(p.isZero())return new a(1).toRed(this);if(p.cmpn(1)===0)return u.clone();var m=4,y=new Array(1<<m);y[0]=new a(1).toRed(this),y[1]=u;for(var E=2;E<y.length;E++)y[E]=this.mul(y[E-1],u);var $=y[0],k=0,_=0,d=p.bitLength()%26;for(d===0&&(d=26),E=p.length-1;E>=0;E--){for(var w=p.words[E],I=d-1;I>=0;I--){var C=w>>I&1;if($!==y[0]&&($=this.sqr($)),C===0&&k===0){_=0;continue}k<<=1,k|=C,_++,!(_!==m&&(E!==0||I!==0))&&($=this.mul($,y[k]),_=0,k=0)}d=26}return $},pe.prototype.convertTo=function(u){var p=u.umod(this.m);return p===u?p.clone():p},pe.prototype.convertFrom=function(u){var p=u.clone();return p.red=null,p},a.mont=function(u){return new Ce(u)};function Ce(T){pe.call(this,T),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new a(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}c(Ce,pe),Ce.prototype.convertTo=function(u){return this.imod(u.ushln(this.shift))},Ce.prototype.convertFrom=function(u){var p=this.imod(u.mul(this.rinv));return p.red=null,p},Ce.prototype.imul=function(u,p){if(u.isZero()||p.isZero())return u.words[0]=0,u.length=1,u;var m=u.imul(p),y=m.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),E=m.isub(y).iushrn(this.shift),$=E;return E.cmp(this.m)>=0?$=E.isub(this.m):E.cmpn(0)<0&&($=E.iadd(this.m)),$._forceRed(this)},Ce.prototype.mul=function(u,p){if(u.isZero()||p.isZero())return new a(0)._forceRed(this);var m=u.mul(p),y=m.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),E=m.isub(y).iushrn(this.shift),$=E;return E.cmp(this.m)>=0?$=E.isub(this.m):E.cmpn(0)<0&&($=E.iadd(this.m)),$._forceRed(this)},Ce.prototype.invm=function(u){var p=this.imod(u._invmp(this.m).mul(this.r2));return p._forceRed(this)}})(t,commonjsGlobal)})(bn$5);var bnExports$5=bn$5.exports,bn$4={exports:{}};bn$4.exports;(function(t){(function(e,n){function o(T,u){if(!T)throw new Error(u||"Assertion failed")}function c(T,u){T.super_=u;var p=function(){};p.prototype=u.prototype,T.prototype=new p,T.prototype.constructor=T}function a(T,u,p){if(a.isBN(T))return T;this.negative=0,this.words=null,this.length=0,this.red=null,T!==null&&((u==="le"||u==="be")&&(p=u,u=10),this._init(T||0,u||10,p||"be"))}typeof e=="object"?e.exports=a:n.BN=a,a.BN=a,a.wordSize=26;var l;try{typeof window<"u"&&typeof window.Buffer<"u"?l=window.Buffer:l=require$$0$3.Buffer}catch{}a.isBN=function(u){return u instanceof a?!0:u!==null&&typeof u=="object"&&u.constructor.wordSize===a.wordSize&&Array.isArray(u.words)},a.max=function(u,p){return u.cmp(p)>0?u:p},a.min=function(u,p){return u.cmp(p)<0?u:p},a.prototype._init=function(u,p,m){if(typeof u=="number")return this._initNumber(u,p,m);if(typeof u=="object")return this._initArray(u,p,m);p==="hex"&&(p=16),o(p===(p|0)&&p>=2&&p<=36),u=u.toString().replace(/\s+/g,"");var y=0;u[0]==="-"&&(y++,this.negative=1),y<u.length&&(p===16?this._parseHex(u,y,m):(this._parseBase(u,p,y),m==="le"&&this._initArray(this.toArray(),p,m)))},a.prototype._initNumber=function(u,p,m){u<0&&(this.negative=1,u=-u),u<67108864?(this.words=[u&67108863],this.length=1):u<4503599627370496?(this.words=[u&67108863,u/67108864&67108863],this.length=2):(o(u<9007199254740992),this.words=[u&67108863,u/67108864&67108863,1],this.length=3),m==="le"&&this._initArray(this.toArray(),p,m)},a.prototype._initArray=function(u,p,m){if(o(typeof u.length=="number"),u.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(u.length/3),this.words=new Array(this.length);for(var y=0;y<this.length;y++)this.words[y]=0;var E,$,k=0;if(m==="be")for(y=u.length-1,E=0;y>=0;y-=3)$=u[y]|u[y-1]<<8|u[y-2]<<16,this.words[E]|=$<<k&67108863,this.words[E+1]=$>>>26-k&67108863,k+=24,k>=26&&(k-=26,E++);else if(m==="le")for(y=0,E=0;y<u.length;y+=3)$=u[y]|u[y+1]<<8|u[y+2]<<16,this.words[E]|=$<<k&67108863,this.words[E+1]=$>>>26-k&67108863,k+=24,k>=26&&(k-=26,E++);return this.strip()};function b(T,u){var p=T.charCodeAt(u);return p>=65&&p<=70?p-55:p>=97&&p<=102?p-87:p-48&15}function v(T,u,p){var m=b(T,p);return p-1>=u&&(m|=b(T,p-1)<<4),m}a.prototype._parseHex=function(u,p,m){this.length=Math.ceil((u.length-p)/6),this.words=new Array(this.length);for(var y=0;y<this.length;y++)this.words[y]=0;var E=0,$=0,k;if(m==="be")for(y=u.length-1;y>=p;y-=2)k=v(u,p,y)<<E,this.words[$]|=k&67108863,E>=18?(E-=18,$+=1,this.words[$]|=k>>>26):E+=8;else{var _=u.length-p;for(y=_%2===0?p+1:p;y<u.length;y+=2)k=v(u,p,y)<<E,this.words[$]|=k&67108863,E>=18?(E-=18,$+=1,this.words[$]|=k>>>26):E+=8}this.strip()};function A(T,u,p,m){for(var y=0,E=Math.min(T.length,p),$=u;$<E;$++){var k=T.charCodeAt($)-48;y*=m,k>=49?y+=k-49+10:k>=17?y+=k-17+10:y+=k}return y}a.prototype._parseBase=function(u,p,m){this.words=[0],this.length=1;for(var y=0,E=1;E<=67108863;E*=p)y++;y--,E=E/p|0;for(var $=u.length-m,k=$%y,_=Math.min($,$-k)+m,d=0,w=m;w<_;w+=y)d=A(u,w,w+y,p),this.imuln(E),this.words[0]+d<67108864?this.words[0]+=d:this._iaddn(d);if(k!==0){var I=1;for(d=A(u,w,u.length,p),w=0;w<k;w++)I*=p;this.imuln(I),this.words[0]+d<67108864?this.words[0]+=d:this._iaddn(d)}this.strip()},a.prototype.copy=function(u){u.words=new Array(this.length);for(var p=0;p<this.length;p++)u.words[p]=this.words[p];u.length=this.length,u.negative=this.negative,u.red=this.red},a.prototype.clone=function(){var u=new a(null);return this.copy(u),u},a.prototype._expand=function(u){for(;this.length<u;)this.words[this.length++]=0;return this},a.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},a.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},a.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var S=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],M=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],B=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];a.prototype.toString=function(u,p){u=u||10,p=p|0||1;var m;if(u===16||u==="hex"){m="";for(var y=0,E=0,$=0;$<this.length;$++){var k=this.words[$],_=((k<<y|E)&16777215).toString(16);E=k>>>24-y&16777215,E!==0||$!==this.length-1?m=S[6-_.length]+_+m:m=_+m,y+=2,y>=26&&(y-=26,$--)}for(E!==0&&(m=E.toString(16)+m);m.length%p!==0;)m="0"+m;return this.negative!==0&&(m="-"+m),m}if(u===(u|0)&&u>=2&&u<=36){var d=M[u],w=B[u];m="";var I=this.clone();for(I.negative=0;!I.isZero();){var C=I.modn(w).toString(u);I=I.idivn(w),I.isZero()?m=C+m:m=S[d-C.length]+C+m}for(this.isZero()&&(m="0"+m);m.length%p!==0;)m="0"+m;return this.negative!==0&&(m="-"+m),m}o(!1,"Base should be between 2 and 36")},a.prototype.toNumber=function(){var u=this.words[0];return this.length===2?u+=this.words[1]*67108864:this.length===3&&this.words[2]===1?u+=4503599627370496+this.words[1]*67108864:this.length>2&&o(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-u:u},a.prototype.toJSON=function(){return this.toString(16)},a.prototype.toBuffer=function(u,p){return o(typeof l<"u"),this.toArrayLike(l,u,p)},a.prototype.toArray=function(u,p){return this.toArrayLike(Array,u,p)},a.prototype.toArrayLike=function(u,p,m){var y=this.byteLength(),E=m||Math.max(1,y);o(y<=E,"byte array longer than desired length"),o(E>0,"Requested array length <= 0"),this.strip();var $=p==="le",k=new u(E),_,d,w=this.clone();if($){for(d=0;!w.isZero();d++)_=w.andln(255),w.iushrn(8),k[d]=_;for(;d<E;d++)k[d]=0}else{for(d=0;d<E-y;d++)k[d]=0;for(d=0;!w.isZero();d++)_=w.andln(255),w.iushrn(8),k[E-d-1]=_}return k},Math.clz32?a.prototype._countBits=function(u){return 32-Math.clz32(u)}:a.prototype._countBits=function(u){var p=u,m=0;return p>=4096&&(m+=13,p>>>=13),p>=64&&(m+=7,p>>>=7),p>=8&&(m+=4,p>>>=4),p>=2&&(m+=2,p>>>=2),m+p},a.prototype._zeroBits=function(u){if(u===0)return 26;var p=u,m=0;return p&8191||(m+=13,p>>>=13),p&127||(m+=7,p>>>=7),p&15||(m+=4,p>>>=4),p&3||(m+=2,p>>>=2),p&1||m++,m},a.prototype.bitLength=function(){var u=this.words[this.length-1],p=this._countBits(u);return(this.length-1)*26+p};function P(T){for(var u=new Array(T.bitLength()),p=0;p<u.length;p++){var m=p/26|0,y=p%26;u[p]=(T.words[m]&1<<y)>>>y}return u}a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var u=0,p=0;p<this.length;p++){var m=this._zeroBits(this.words[p]);if(u+=m,m!==26)break}return u},a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},a.prototype.toTwos=function(u){return this.negative!==0?this.abs().inotn(u).iaddn(1):this.clone()},a.prototype.fromTwos=function(u){return this.testn(u-1)?this.notn(u).iaddn(1).ineg():this.clone()},a.prototype.isNeg=function(){return this.negative!==0},a.prototype.neg=function(){return this.clone().ineg()},a.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},a.prototype.iuor=function(u){for(;this.length<u.length;)this.words[this.length++]=0;for(var p=0;p<u.length;p++)this.words[p]=this.words[p]|u.words[p];return this.strip()},a.prototype.ior=function(u){return o((this.negative|u.negative)===0),this.iuor(u)},a.prototype.or=function(u){return this.length>u.length?this.clone().ior(u):u.clone().ior(this)},a.prototype.uor=function(u){return this.length>u.length?this.clone().iuor(u):u.clone().iuor(this)},a.prototype.iuand=function(u){var p;this.length>u.length?p=u:p=this;for(var m=0;m<p.length;m++)this.words[m]=this.words[m]&u.words[m];return this.length=p.length,this.strip()},a.prototype.iand=function(u){return o((this.negative|u.negative)===0),this.iuand(u)},a.prototype.and=function(u){return this.length>u.length?this.clone().iand(u):u.clone().iand(this)},a.prototype.uand=function(u){return this.length>u.length?this.clone().iuand(u):u.clone().iuand(this)},a.prototype.iuxor=function(u){var p,m;this.length>u.length?(p=this,m=u):(p=u,m=this);for(var y=0;y<m.length;y++)this.words[y]=p.words[y]^m.words[y];if(this!==p)for(;y<p.length;y++)this.words[y]=p.words[y];return this.length=p.length,this.strip()},a.prototype.ixor=function(u){return o((this.negative|u.negative)===0),this.iuxor(u)},a.prototype.xor=function(u){return this.length>u.length?this.clone().ixor(u):u.clone().ixor(this)},a.prototype.uxor=function(u){return this.length>u.length?this.clone().iuxor(u):u.clone().iuxor(this)},a.prototype.inotn=function(u){o(typeof u=="number"&&u>=0);var p=Math.ceil(u/26)|0,m=u%26;this._expand(p),m>0&&p--;for(var y=0;y<p;y++)this.words[y]=~this.words[y]&67108863;return m>0&&(this.words[y]=~this.words[y]&67108863>>26-m),this.strip()},a.prototype.notn=function(u){return this.clone().inotn(u)},a.prototype.setn=function(u,p){o(typeof u=="number"&&u>=0);var m=u/26|0,y=u%26;return this._expand(m+1),p?this.words[m]=this.words[m]|1<<y:this.words[m]=this.words[m]&~(1<<y),this.strip()},a.prototype.iadd=function(u){var p;if(this.negative!==0&&u.negative===0)return this.negative=0,p=this.isub(u),this.negative^=1,this._normSign();if(this.negative===0&&u.negative!==0)return u.negative=0,p=this.isub(u),u.negative=1,p._normSign();var m,y;this.length>u.length?(m=this,y=u):(m=u,y=this);for(var E=0,$=0;$<y.length;$++)p=(m.words[$]|0)+(y.words[$]|0)+E,this.words[$]=p&67108863,E=p>>>26;for(;E!==0&&$<m.length;$++)p=(m.words[$]|0)+E,this.words[$]=p&67108863,E=p>>>26;if(this.length=m.length,E!==0)this.words[this.length]=E,this.length++;else if(m!==this)for(;$<m.length;$++)this.words[$]=m.words[$];return this},a.prototype.add=function(u){var p;return u.negative!==0&&this.negative===0?(u.negative=0,p=this.sub(u),u.negative^=1,p):u.negative===0&&this.negative!==0?(this.negative=0,p=u.sub(this),this.negative=1,p):this.length>u.length?this.clone().iadd(u):u.clone().iadd(this)},a.prototype.isub=function(u){if(u.negative!==0){u.negative=0;var p=this.iadd(u);return u.negative=1,p._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(u),this.negative=1,this._normSign();var m=this.cmp(u);if(m===0)return this.negative=0,this.length=1,this.words[0]=0,this;var y,E;m>0?(y=this,E=u):(y=u,E=this);for(var $=0,k=0;k<E.length;k++)p=(y.words[k]|0)-(E.words[k]|0)+$,$=p>>26,this.words[k]=p&67108863;for(;$!==0&&k<y.length;k++)p=(y.words[k]|0)+$,$=p>>26,this.words[k]=p&67108863;if($===0&&k<y.length&&y!==this)for(;k<y.length;k++)this.words[k]=y.words[k];return this.length=Math.max(this.length,k),y!==this&&(this.negative=1),this.strip()},a.prototype.sub=function(u){return this.clone().isub(u)};function L(T,u,p){p.negative=u.negative^T.negative;var m=T.length+u.length|0;p.length=m,m=m-1|0;var y=T.words[0]|0,E=u.words[0]|0,$=y*E,k=$&67108863,_=$/67108864|0;p.words[0]=k;for(var d=1;d<m;d++){for(var w=_>>>26,I=_&67108863,C=Math.min(d,u.length-1),V=Math.max(0,d-T.length+1);V<=C;V++){var O=d-V|0;y=T.words[O]|0,E=u.words[V]|0,$=y*E+I,w+=$/67108864|0,I=$&67108863}p.words[d]=I|0,_=w|0}return _!==0?p.words[d]=_|0:p.length--,p.strip()}var F=function(u,p,m){var y=u.words,E=p.words,$=m.words,k=0,_,d,w,I=y[0]|0,C=I&8191,V=I>>>13,O=y[1]|0,j=O&8191,D=O>>>13,Q=y[2]|0,oe=Q&8191,de=Q>>>13,Z=y[3]|0,H=Z&8191,ge=Z>>>13,Me=y[4]|0,ke=Me&8191,Ie=Me>>>13,et=y[5]|0,Fe=et&8191,$e=et>>>13,$t=y[6]|0,He=$t&8191,Ye=$t>>>13,St=y[7]|0,De=St&8191,qe=St>>>13,At=y[8]|0,ze=At&8191,Ge=At>>>13,kt=y[9]|0,se=kt&8191,J=kt>>>13,re=E[0]|0,he=re&8191,ye=re>>>13,Oe=E[1]|0,Ee=Oe&8191,Ue=Oe>>>13,bt=E[2]|0,Le=bt&8191,Ve=bt>>>13,mt=E[3]|0,Ke=mt&8191,Xe=mt>>>13,Mt=E[4]|0,me=Mt&8191,le=Mt>>>13,_e=E[5]|0,be=_e&8191,Se=_e>>>13,Je=E[6]|0,Te=Je&8191,Ne=Je>>>13,ne=E[7]|0,ie=ne&8191,ae=ne>>>13,Y=E[8]|0,fe=Y&8191,ve=Y>>>13,Pe=E[9]|0,xe=Pe&8191,Be=Pe>>>13;m.negative=u.negative^p.negative,m.length=19,_=Math.imul(C,he),d=Math.imul(C,ye),d=d+Math.imul(V,he)|0,w=Math.imul(V,ye);var Qe=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(Qe>>>26)|0,Qe&=67108863,_=Math.imul(j,he),d=Math.imul(j,ye),d=d+Math.imul(D,he)|0,w=Math.imul(D,ye),_=_+Math.imul(C,Ee)|0,d=d+Math.imul(C,Ue)|0,d=d+Math.imul(V,Ee)|0,w=w+Math.imul(V,Ue)|0;var Ze=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(Ze>>>26)|0,Ze&=67108863,_=Math.imul(oe,he),d=Math.imul(oe,ye),d=d+Math.imul(de,he)|0,w=Math.imul(de,ye),_=_+Math.imul(j,Ee)|0,d=d+Math.imul(j,Ue)|0,d=d+Math.imul(D,Ee)|0,w=w+Math.imul(D,Ue)|0,_=_+Math.imul(C,Le)|0,d=d+Math.imul(C,Ve)|0,d=d+Math.imul(V,Le)|0,w=w+Math.imul(V,Ve)|0;var xt=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(xt>>>26)|0,xt&=67108863,_=Math.imul(H,he),d=Math.imul(H,ye),d=d+Math.imul(ge,he)|0,w=Math.imul(ge,ye),_=_+Math.imul(oe,Ee)|0,d=d+Math.imul(oe,Ue)|0,d=d+Math.imul(de,Ee)|0,w=w+Math.imul(de,Ue)|0,_=_+Math.imul(j,Le)|0,d=d+Math.imul(j,Ve)|0,d=d+Math.imul(D,Le)|0,w=w+Math.imul(D,Ve)|0,_=_+Math.imul(C,Ke)|0,d=d+Math.imul(C,Xe)|0,d=d+Math.imul(V,Ke)|0,w=w+Math.imul(V,Xe)|0;var it=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(it>>>26)|0,it&=67108863,_=Math.imul(ke,he),d=Math.imul(ke,ye),d=d+Math.imul(Ie,he)|0,w=Math.imul(Ie,ye),_=_+Math.imul(H,Ee)|0,d=d+Math.imul(H,Ue)|0,d=d+Math.imul(ge,Ee)|0,w=w+Math.imul(ge,Ue)|0,_=_+Math.imul(oe,Le)|0,d=d+Math.imul(oe,Ve)|0,d=d+Math.imul(de,Le)|0,w=w+Math.imul(de,Ve)|0,_=_+Math.imul(j,Ke)|0,d=d+Math.imul(j,Xe)|0,d=d+Math.imul(D,Ke)|0,w=w+Math.imul(D,Xe)|0,_=_+Math.imul(C,me)|0,d=d+Math.imul(C,le)|0,d=d+Math.imul(V,me)|0,w=w+Math.imul(V,le)|0;var dt=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(dt>>>26)|0,dt&=67108863,_=Math.imul(Fe,he),d=Math.imul(Fe,ye),d=d+Math.imul($e,he)|0,w=Math.imul($e,ye),_=_+Math.imul(ke,Ee)|0,d=d+Math.imul(ke,Ue)|0,d=d+Math.imul(Ie,Ee)|0,w=w+Math.imul(Ie,Ue)|0,_=_+Math.imul(H,Le)|0,d=d+Math.imul(H,Ve)|0,d=d+Math.imul(ge,Le)|0,w=w+Math.imul(ge,Ve)|0,_=_+Math.imul(oe,Ke)|0,d=d+Math.imul(oe,Xe)|0,d=d+Math.imul(de,Ke)|0,w=w+Math.imul(de,Xe)|0,_=_+Math.imul(j,me)|0,d=d+Math.imul(j,le)|0,d=d+Math.imul(D,me)|0,w=w+Math.imul(D,le)|0,_=_+Math.imul(C,be)|0,d=d+Math.imul(C,Se)|0,d=d+Math.imul(V,be)|0,w=w+Math.imul(V,Se)|0;var gt=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(gt>>>26)|0,gt&=67108863,_=Math.imul(He,he),d=Math.imul(He,ye),d=d+Math.imul(Ye,he)|0,w=Math.imul(Ye,ye),_=_+Math.imul(Fe,Ee)|0,d=d+Math.imul(Fe,Ue)|0,d=d+Math.imul($e,Ee)|0,w=w+Math.imul($e,Ue)|0,_=_+Math.imul(ke,Le)|0,d=d+Math.imul(ke,Ve)|0,d=d+Math.imul(Ie,Le)|0,w=w+Math.imul(Ie,Ve)|0,_=_+Math.imul(H,Ke)|0,d=d+Math.imul(H,Xe)|0,d=d+Math.imul(ge,Ke)|0,w=w+Math.imul(ge,Xe)|0,_=_+Math.imul(oe,me)|0,d=d+Math.imul(oe,le)|0,d=d+Math.imul(de,me)|0,w=w+Math.imul(de,le)|0,_=_+Math.imul(j,be)|0,d=d+Math.imul(j,Se)|0,d=d+Math.imul(D,be)|0,w=w+Math.imul(D,Se)|0,_=_+Math.imul(C,Te)|0,d=d+Math.imul(C,Ne)|0,d=d+Math.imul(V,Te)|0,w=w+Math.imul(V,Ne)|0;var yt=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(yt>>>26)|0,yt&=67108863,_=Math.imul(De,he),d=Math.imul(De,ye),d=d+Math.imul(qe,he)|0,w=Math.imul(qe,ye),_=_+Math.imul(He,Ee)|0,d=d+Math.imul(He,Ue)|0,d=d+Math.imul(Ye,Ee)|0,w=w+Math.imul(Ye,Ue)|0,_=_+Math.imul(Fe,Le)|0,d=d+Math.imul(Fe,Ve)|0,d=d+Math.imul($e,Le)|0,w=w+Math.imul($e,Ve)|0,_=_+Math.imul(ke,Ke)|0,d=d+Math.imul(ke,Xe)|0,d=d+Math.imul(Ie,Ke)|0,w=w+Math.imul(Ie,Xe)|0,_=_+Math.imul(H,me)|0,d=d+Math.imul(H,le)|0,d=d+Math.imul(ge,me)|0,w=w+Math.imul(ge,le)|0,_=_+Math.imul(oe,be)|0,d=d+Math.imul(oe,Se)|0,d=d+Math.imul(de,be)|0,w=w+Math.imul(de,Se)|0,_=_+Math.imul(j,Te)|0,d=d+Math.imul(j,Ne)|0,d=d+Math.imul(D,Te)|0,w=w+Math.imul(D,Ne)|0,_=_+Math.imul(C,ie)|0,d=d+Math.imul(C,ae)|0,d=d+Math.imul(V,ie)|0,w=w+Math.imul(V,ae)|0;var Et=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(Et>>>26)|0,Et&=67108863,_=Math.imul(ze,he),d=Math.imul(ze,ye),d=d+Math.imul(Ge,he)|0,w=Math.imul(Ge,ye),_=_+Math.imul(De,Ee)|0,d=d+Math.imul(De,Ue)|0,d=d+Math.imul(qe,Ee)|0,w=w+Math.imul(qe,Ue)|0,_=_+Math.imul(He,Le)|0,d=d+Math.imul(He,Ve)|0,d=d+Math.imul(Ye,Le)|0,w=w+Math.imul(Ye,Ve)|0,_=_+Math.imul(Fe,Ke)|0,d=d+Math.imul(Fe,Xe)|0,d=d+Math.imul($e,Ke)|0,w=w+Math.imul($e,Xe)|0,_=_+Math.imul(ke,me)|0,d=d+Math.imul(ke,le)|0,d=d+Math.imul(Ie,me)|0,w=w+Math.imul(Ie,le)|0,_=_+Math.imul(H,be)|0,d=d+Math.imul(H,Se)|0,d=d+Math.imul(ge,be)|0,w=w+Math.imul(ge,Se)|0,_=_+Math.imul(oe,Te)|0,d=d+Math.imul(oe,Ne)|0,d=d+Math.imul(de,Te)|0,w=w+Math.imul(de,Ne)|0,_=_+Math.imul(j,ie)|0,d=d+Math.imul(j,ae)|0,d=d+Math.imul(D,ie)|0,w=w+Math.imul(D,ae)|0,_=_+Math.imul(C,fe)|0,d=d+Math.imul(C,ve)|0,d=d+Math.imul(V,fe)|0,w=w+Math.imul(V,ve)|0;var vt=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(vt>>>26)|0,vt&=67108863,_=Math.imul(se,he),d=Math.imul(se,ye),d=d+Math.imul(J,he)|0,w=Math.imul(J,ye),_=_+Math.imul(ze,Ee)|0,d=d+Math.imul(ze,Ue)|0,d=d+Math.imul(Ge,Ee)|0,w=w+Math.imul(Ge,Ue)|0,_=_+Math.imul(De,Le)|0,d=d+Math.imul(De,Ve)|0,d=d+Math.imul(qe,Le)|0,w=w+Math.imul(qe,Ve)|0,_=_+Math.imul(He,Ke)|0,d=d+Math.imul(He,Xe)|0,d=d+Math.imul(Ye,Ke)|0,w=w+Math.imul(Ye,Xe)|0,_=_+Math.imul(Fe,me)|0,d=d+Math.imul(Fe,le)|0,d=d+Math.imul($e,me)|0,w=w+Math.imul($e,le)|0,_=_+Math.imul(ke,be)|0,d=d+Math.imul(ke,Se)|0,d=d+Math.imul(Ie,be)|0,w=w+Math.imul(Ie,Se)|0,_=_+Math.imul(H,Te)|0,d=d+Math.imul(H,Ne)|0,d=d+Math.imul(ge,Te)|0,w=w+Math.imul(ge,Ne)|0,_=_+Math.imul(oe,ie)|0,d=d+Math.imul(oe,ae)|0,d=d+Math.imul(de,ie)|0,w=w+Math.imul(de,ae)|0,_=_+Math.imul(j,fe)|0,d=d+Math.imul(j,ve)|0,d=d+Math.imul(D,fe)|0,w=w+Math.imul(D,ve)|0,_=_+Math.imul(C,xe)|0,d=d+Math.imul(C,Be)|0,d=d+Math.imul(V,xe)|0,w=w+Math.imul(V,Be)|0;var _t=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(_t>>>26)|0,_t&=67108863,_=Math.imul(se,Ee),d=Math.imul(se,Ue),d=d+Math.imul(J,Ee)|0,w=Math.imul(J,Ue),_=_+Math.imul(ze,Le)|0,d=d+Math.imul(ze,Ve)|0,d=d+Math.imul(Ge,Le)|0,w=w+Math.imul(Ge,Ve)|0,_=_+Math.imul(De,Ke)|0,d=d+Math.imul(De,Xe)|0,d=d+Math.imul(qe,Ke)|0,w=w+Math.imul(qe,Xe)|0,_=_+Math.imul(He,me)|0,d=d+Math.imul(He,le)|0,d=d+Math.imul(Ye,me)|0,w=w+Math.imul(Ye,le)|0,_=_+Math.imul(Fe,be)|0,d=d+Math.imul(Fe,Se)|0,d=d+Math.imul($e,be)|0,w=w+Math.imul($e,Se)|0,_=_+Math.imul(ke,Te)|0,d=d+Math.imul(ke,Ne)|0,d=d+Math.imul(Ie,Te)|0,w=w+Math.imul(Ie,Ne)|0,_=_+Math.imul(H,ie)|0,d=d+Math.imul(H,ae)|0,d=d+Math.imul(ge,ie)|0,w=w+Math.imul(ge,ae)|0,_=_+Math.imul(oe,fe)|0,d=d+Math.imul(oe,ve)|0,d=d+Math.imul(de,fe)|0,w=w+Math.imul(de,ve)|0,_=_+Math.imul(j,xe)|0,d=d+Math.imul(j,Be)|0,d=d+Math.imul(D,xe)|0,w=w+Math.imul(D,Be)|0;var wt=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(wt>>>26)|0,wt&=67108863,_=Math.imul(se,Le),d=Math.imul(se,Ve),d=d+Math.imul(J,Le)|0,w=Math.imul(J,Ve),_=_+Math.imul(ze,Ke)|0,d=d+Math.imul(ze,Xe)|0,d=d+Math.imul(Ge,Ke)|0,w=w+Math.imul(Ge,Xe)|0,_=_+Math.imul(De,me)|0,d=d+Math.imul(De,le)|0,d=d+Math.imul(qe,me)|0,w=w+Math.imul(qe,le)|0,_=_+Math.imul(He,be)|0,d=d+Math.imul(He,Se)|0,d=d+Math.imul(Ye,be)|0,w=w+Math.imul(Ye,Se)|0,_=_+Math.imul(Fe,Te)|0,d=d+Math.imul(Fe,Ne)|0,d=d+Math.imul($e,Te)|0,w=w+Math.imul($e,Ne)|0,_=_+Math.imul(ke,ie)|0,d=d+Math.imul(ke,ae)|0,d=d+Math.imul(Ie,ie)|0,w=w+Math.imul(Ie,ae)|0,_=_+Math.imul(H,fe)|0,d=d+Math.imul(H,ve)|0,d=d+Math.imul(ge,fe)|0,w=w+Math.imul(ge,ve)|0,_=_+Math.imul(oe,xe)|0,d=d+Math.imul(oe,Be)|0,d=d+Math.imul(de,xe)|0,w=w+Math.imul(de,Be)|0;var ct=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(ct>>>26)|0,ct&=67108863,_=Math.imul(se,Ke),d=Math.imul(se,Xe),d=d+Math.imul(J,Ke)|0,w=Math.imul(J,Xe),_=_+Math.imul(ze,me)|0,d=d+Math.imul(ze,le)|0,d=d+Math.imul(Ge,me)|0,w=w+Math.imul(Ge,le)|0,_=_+Math.imul(De,be)|0,d=d+Math.imul(De,Se)|0,d=d+Math.imul(qe,be)|0,w=w+Math.imul(qe,Se)|0,_=_+Math.imul(He,Te)|0,d=d+Math.imul(He,Ne)|0,d=d+Math.imul(Ye,Te)|0,w=w+Math.imul(Ye,Ne)|0,_=_+Math.imul(Fe,ie)|0,d=d+Math.imul(Fe,ae)|0,d=d+Math.imul($e,ie)|0,w=w+Math.imul($e,ae)|0,_=_+Math.imul(ke,fe)|0,d=d+Math.imul(ke,ve)|0,d=d+Math.imul(Ie,fe)|0,w=w+Math.imul(Ie,ve)|0,_=_+Math.imul(H,xe)|0,d=d+Math.imul(H,Be)|0,d=d+Math.imul(ge,xe)|0,w=w+Math.imul(ge,Be)|0;var pt=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(pt>>>26)|0,pt&=67108863,_=Math.imul(se,me),d=Math.imul(se,le),d=d+Math.imul(J,me)|0,w=Math.imul(J,le),_=_+Math.imul(ze,be)|0,d=d+Math.imul(ze,Se)|0,d=d+Math.imul(Ge,be)|0,w=w+Math.imul(Ge,Se)|0,_=_+Math.imul(De,Te)|0,d=d+Math.imul(De,Ne)|0,d=d+Math.imul(qe,Te)|0,w=w+Math.imul(qe,Ne)|0,_=_+Math.imul(He,ie)|0,d=d+Math.imul(He,ae)|0,d=d+Math.imul(Ye,ie)|0,w=w+Math.imul(Ye,ae)|0,_=_+Math.imul(Fe,fe)|0,d=d+Math.imul(Fe,ve)|0,d=d+Math.imul($e,fe)|0,w=w+Math.imul($e,ve)|0,_=_+Math.imul(ke,xe)|0,d=d+Math.imul(ke,Be)|0,d=d+Math.imul(Ie,xe)|0,w=w+Math.imul(Ie,Be)|0;var at=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(at>>>26)|0,at&=67108863,_=Math.imul(se,be),d=Math.imul(se,Se),d=d+Math.imul(J,be)|0,w=Math.imul(J,Se),_=_+Math.imul(ze,Te)|0,d=d+Math.imul(ze,Ne)|0,d=d+Math.imul(Ge,Te)|0,w=w+Math.imul(Ge,Ne)|0,_=_+Math.imul(De,ie)|0,d=d+Math.imul(De,ae)|0,d=d+Math.imul(qe,ie)|0,w=w+Math.imul(qe,ae)|0,_=_+Math.imul(He,fe)|0,d=d+Math.imul(He,ve)|0,d=d+Math.imul(Ye,fe)|0,w=w+Math.imul(Ye,ve)|0,_=_+Math.imul(Fe,xe)|0,d=d+Math.imul(Fe,Be)|0,d=d+Math.imul($e,xe)|0,w=w+Math.imul($e,Be)|0;var lt=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(lt>>>26)|0,lt&=67108863,_=Math.imul(se,Te),d=Math.imul(se,Ne),d=d+Math.imul(J,Te)|0,w=Math.imul(J,Ne),_=_+Math.imul(ze,ie)|0,d=d+Math.imul(ze,ae)|0,d=d+Math.imul(Ge,ie)|0,w=w+Math.imul(Ge,ae)|0,_=_+Math.imul(De,fe)|0,d=d+Math.imul(De,ve)|0,d=d+Math.imul(qe,fe)|0,w=w+Math.imul(qe,ve)|0,_=_+Math.imul(He,xe)|0,d=d+Math.imul(He,Be)|0,d=d+Math.imul(Ye,xe)|0,w=w+Math.imul(Ye,Be)|0;var ht=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(ht>>>26)|0,ht&=67108863,_=Math.imul(se,ie),d=Math.imul(se,ae),d=d+Math.imul(J,ie)|0,w=Math.imul(J,ae),_=_+Math.imul(ze,fe)|0,d=d+Math.imul(ze,ve)|0,d=d+Math.imul(Ge,fe)|0,w=w+Math.imul(Ge,ve)|0,_=_+Math.imul(De,xe)|0,d=d+Math.imul(De,Be)|0,d=d+Math.imul(qe,xe)|0,w=w+Math.imul(qe,Be)|0;var ot=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(ot>>>26)|0,ot&=67108863,_=Math.imul(se,fe),d=Math.imul(se,ve),d=d+Math.imul(J,fe)|0,w=Math.imul(J,ve),_=_+Math.imul(ze,xe)|0,d=d+Math.imul(ze,Be)|0,d=d+Math.imul(Ge,xe)|0,w=w+Math.imul(Ge,Be)|0;var je=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(je>>>26)|0,je&=67108863,_=Math.imul(se,xe),d=Math.imul(se,Be),d=d+Math.imul(J,xe)|0,w=Math.imul(J,Be);var We=(k+_|0)+((d&8191)<<13)|0;return k=(w+(d>>>13)|0)+(We>>>26)|0,We&=67108863,$[0]=Qe,$[1]=Ze,$[2]=xt,$[3]=it,$[4]=dt,$[5]=gt,$[6]=yt,$[7]=Et,$[8]=vt,$[9]=_t,$[10]=wt,$[11]=ct,$[12]=pt,$[13]=at,$[14]=lt,$[15]=ht,$[16]=ot,$[17]=je,$[18]=We,k!==0&&($[19]=k,m.length++),m};Math.imul||(F=L);function U(T,u,p){p.negative=u.negative^T.negative,p.length=T.length+u.length;for(var m=0,y=0,E=0;E<p.length-1;E++){var $=y;y=0;for(var k=m&67108863,_=Math.min(E,u.length-1),d=Math.max(0,E-T.length+1);d<=_;d++){var w=E-d,I=T.words[w]|0,C=u.words[d]|0,V=I*C,O=V&67108863;$=$+(V/67108864|0)|0,O=O+k|0,k=O&67108863,$=$+(O>>>26)|0,y+=$>>>26,$&=67108863}p.words[E]=k,m=$,$=y}return m!==0?p.words[E]=m:p.length--,p.strip()}function q(T,u,p){var m=new X;return m.mulp(T,u,p)}a.prototype.mulTo=function(u,p){var m,y=this.length+u.length;return this.length===10&&u.length===10?m=F(this,u,p):y<63?m=L(this,u,p):y<1024?m=U(this,u,p):m=q(this,u,p),m};function X(T,u){this.x=T,this.y=u}X.prototype.makeRBT=function(u){for(var p=new Array(u),m=a.prototype._countBits(u)-1,y=0;y<u;y++)p[y]=this.revBin(y,m,u);return p},X.prototype.revBin=function(u,p,m){if(u===0||u===m-1)return u;for(var y=0,E=0;E<p;E++)y|=(u&1)<<p-E-1,u>>=1;return y},X.prototype.permute=function(u,p,m,y,E,$){for(var k=0;k<$;k++)y[k]=p[u[k]],E[k]=m[u[k]]},X.prototype.transform=function(u,p,m,y,E,$){this.permute($,u,p,m,y,E);for(var k=1;k<E;k<<=1)for(var _=k<<1,d=Math.cos(2*Math.PI/_),w=Math.sin(2*Math.PI/_),I=0;I<E;I+=_)for(var C=d,V=w,O=0;O<k;O++){var j=m[I+O],D=y[I+O],Q=m[I+O+k],oe=y[I+O+k],de=C*Q-V*oe;oe=C*oe+V*Q,Q=de,m[I+O]=j+Q,y[I+O]=D+oe,m[I+O+k]=j-Q,y[I+O+k]=D-oe,O!==_&&(de=d*C-w*V,V=d*V+w*C,C=de)}},X.prototype.guessLen13b=function(u,p){var m=Math.max(p,u)|1,y=m&1,E=0;for(m=m/2|0;m;m=m>>>1)E++;return 1<<E+1+y},X.prototype.conjugate=function(u,p,m){if(!(m<=1))for(var y=0;y<m/2;y++){var E=u[y];u[y]=u[m-y-1],u[m-y-1]=E,E=p[y],p[y]=-p[m-y-1],p[m-y-1]=-E}},X.prototype.normalize13b=function(u,p){for(var m=0,y=0;y<p/2;y++){var E=Math.round(u[2*y+1]/p)*8192+Math.round(u[2*y]/p)+m;u[y]=E&67108863,E<67108864?m=0:m=E/67108864|0}return u},X.prototype.convert13b=function(u,p,m,y){for(var E=0,$=0;$<p;$++)E=E+(u[$]|0),m[2*$]=E&8191,E=E>>>13,m[2*$+1]=E&8191,E=E>>>13;for($=2*p;$<y;++$)m[$]=0;o(E===0),o((E&-8192)===0)},X.prototype.stub=function(u){for(var p=new Array(u),m=0;m<u;m++)p[m]=0;return p},X.prototype.mulp=function(u,p,m){var y=2*this.guessLen13b(u.length,p.length),E=this.makeRBT(y),$=this.stub(y),k=new Array(y),_=new Array(y),d=new Array(y),w=new Array(y),I=new Array(y),C=new Array(y),V=m.words;V.length=y,this.convert13b(u.words,u.length,k,y),this.convert13b(p.words,p.length,w,y),this.transform(k,$,_,d,y,E),this.transform(w,$,I,C,y,E);for(var O=0;O<y;O++){var j=_[O]*I[O]-d[O]*C[O];d[O]=_[O]*C[O]+d[O]*I[O],_[O]=j}return this.conjugate(_,d,y),this.transform(_,d,V,$,y,E),this.conjugate(V,$,y),this.normalize13b(V,y),m.negative=u.negative^p.negative,m.length=u.length+p.length,m.strip()},a.prototype.mul=function(u){var p=new a(null);return p.words=new Array(this.length+u.length),this.mulTo(u,p)},a.prototype.mulf=function(u){var p=new a(null);return p.words=new Array(this.length+u.length),q(this,u,p)},a.prototype.imul=function(u){return this.clone().mulTo(u,this)},a.prototype.imuln=function(u){o(typeof u=="number"),o(u<67108864);for(var p=0,m=0;m<this.length;m++){var y=(this.words[m]|0)*u,E=(y&67108863)+(p&67108863);p>>=26,p+=y/67108864|0,p+=E>>>26,this.words[m]=E&67108863}return p!==0&&(this.words[m]=p,this.length++),this},a.prototype.muln=function(u){return this.clone().imuln(u)},a.prototype.sqr=function(){return this.mul(this)},a.prototype.isqr=function(){return this.imul(this.clone())},a.prototype.pow=function(u){var p=P(u);if(p.length===0)return new a(1);for(var m=this,y=0;y<p.length&&p[y]===0;y++,m=m.sqr());if(++y<p.length)for(var E=m.sqr();y<p.length;y++,E=E.sqr())p[y]!==0&&(m=m.mul(E));return m},a.prototype.iushln=function(u){o(typeof u=="number"&&u>=0);var p=u%26,m=(u-p)/26,y=67108863>>>26-p<<26-p,E;if(p!==0){var $=0;for(E=0;E<this.length;E++){var k=this.words[E]&y,_=(this.words[E]|0)-k<<p;this.words[E]=_|$,$=k>>>26-p}$&&(this.words[E]=$,this.length++)}if(m!==0){for(E=this.length-1;E>=0;E--)this.words[E+m]=this.words[E];for(E=0;E<m;E++)this.words[E]=0;this.length+=m}return this.strip()},a.prototype.ishln=function(u){return o(this.negative===0),this.iushln(u)},a.prototype.iushrn=function(u,p,m){o(typeof u=="number"&&u>=0);var y;p?y=(p-p%26)/26:y=0;var E=u%26,$=Math.min((u-E)/26,this.length),k=67108863^67108863>>>E<<E,_=m;if(y-=$,y=Math.max(0,y),_){for(var d=0;d<$;d++)_.words[d]=this.words[d];_.length=$}if($!==0)if(this.length>$)for(this.length-=$,d=0;d<this.length;d++)this.words[d]=this.words[d+$];else this.words[0]=0,this.length=1;var w=0;for(d=this.length-1;d>=0&&(w!==0||d>=y);d--){var I=this.words[d]|0;this.words[d]=w<<26-E|I>>>E,w=I&k}return _&&w!==0&&(_.words[_.length++]=w),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},a.prototype.ishrn=function(u,p,m){return o(this.negative===0),this.iushrn(u,p,m)},a.prototype.shln=function(u){return this.clone().ishln(u)},a.prototype.ushln=function(u){return this.clone().iushln(u)},a.prototype.shrn=function(u){return this.clone().ishrn(u)},a.prototype.ushrn=function(u){return this.clone().iushrn(u)},a.prototype.testn=function(u){o(typeof u=="number"&&u>=0);var p=u%26,m=(u-p)/26,y=1<<p;if(this.length<=m)return!1;var E=this.words[m];return!!(E&y)},a.prototype.imaskn=function(u){o(typeof u=="number"&&u>=0);var p=u%26,m=(u-p)/26;if(o(this.negative===0,"imaskn works only with positive numbers"),this.length<=m)return this;if(p!==0&&m++,this.length=Math.min(m,this.length),p!==0){var y=67108863^67108863>>>p<<p;this.words[this.length-1]&=y}return this.strip()},a.prototype.maskn=function(u){return this.clone().imaskn(u)},a.prototype.iaddn=function(u){return o(typeof u=="number"),o(u<67108864),u<0?this.isubn(-u):this.negative!==0?this.length===1&&(this.words[0]|0)<u?(this.words[0]=u-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(u),this.negative=1,this):this._iaddn(u)},a.prototype._iaddn=function(u){this.words[0]+=u;for(var p=0;p<this.length&&this.words[p]>=67108864;p++)this.words[p]-=67108864,p===this.length-1?this.words[p+1]=1:this.words[p+1]++;return this.length=Math.max(this.length,p+1),this},a.prototype.isubn=function(u){if(o(typeof u=="number"),o(u<67108864),u<0)return this.iaddn(-u);if(this.negative!==0)return this.negative=0,this.iaddn(u),this.negative=1,this;if(this.words[0]-=u,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var p=0;p<this.length&&this.words[p]<0;p++)this.words[p]+=67108864,this.words[p+1]-=1;return this.strip()},a.prototype.addn=function(u){return this.clone().iaddn(u)},a.prototype.subn=function(u){return this.clone().isubn(u)},a.prototype.iabs=function(){return this.negative=0,this},a.prototype.abs=function(){return this.clone().iabs()},a.prototype._ishlnsubmul=function(u,p,m){var y=u.length+m,E;this._expand(y);var $,k=0;for(E=0;E<u.length;E++){$=(this.words[E+m]|0)+k;var _=(u.words[E]|0)*p;$-=_&67108863,k=($>>26)-(_/67108864|0),this.words[E+m]=$&67108863}for(;E<this.length-m;E++)$=(this.words[E+m]|0)+k,k=$>>26,this.words[E+m]=$&67108863;if(k===0)return this.strip();for(o(k===-1),k=0,E=0;E<this.length;E++)$=-(this.words[E]|0)+k,k=$>>26,this.words[E]=$&67108863;return this.negative=1,this.strip()},a.prototype._wordDiv=function(u,p){var m=this.length-u.length,y=this.clone(),E=u,$=E.words[E.length-1]|0,k=this._countBits($);m=26-k,m!==0&&(E=E.ushln(m),y.iushln(m),$=E.words[E.length-1]|0);var _=y.length-E.length,d;if(p!=="mod"){d=new a(null),d.length=_+1,d.words=new Array(d.length);for(var w=0;w<d.length;w++)d.words[w]=0}var I=y.clone()._ishlnsubmul(E,1,_);I.negative===0&&(y=I,d&&(d.words[_]=1));for(var C=_-1;C>=0;C--){var V=(y.words[E.length+C]|0)*67108864+(y.words[E.length+C-1]|0);for(V=Math.min(V/$|0,67108863),y._ishlnsubmul(E,V,C);y.negative!==0;)V--,y.negative=0,y._ishlnsubmul(E,1,C),y.isZero()||(y.negative^=1);d&&(d.words[C]=V)}return d&&d.strip(),y.strip(),p!=="div"&&m!==0&&y.iushrn(m),{div:d||null,mod:y}},a.prototype.divmod=function(u,p,m){if(o(!u.isZero()),this.isZero())return{div:new a(0),mod:new a(0)};var y,E,$;return this.negative!==0&&u.negative===0?($=this.neg().divmod(u,p),p!=="mod"&&(y=$.div.neg()),p!=="div"&&(E=$.mod.neg(),m&&E.negative!==0&&E.iadd(u)),{div:y,mod:E}):this.negative===0&&u.negative!==0?($=this.divmod(u.neg(),p),p!=="mod"&&(y=$.div.neg()),{div:y,mod:$.mod}):this.negative&u.negative?($=this.neg().divmod(u.neg(),p),p!=="div"&&(E=$.mod.neg(),m&&E.negative!==0&&E.isub(u)),{div:$.div,mod:E}):u.length>this.length||this.cmp(u)<0?{div:new a(0),mod:this}:u.length===1?p==="div"?{div:this.divn(u.words[0]),mod:null}:p==="mod"?{div:null,mod:new a(this.modn(u.words[0]))}:{div:this.divn(u.words[0]),mod:new a(this.modn(u.words[0]))}:this._wordDiv(u,p)},a.prototype.div=function(u){return this.divmod(u,"div",!1).div},a.prototype.mod=function(u){return this.divmod(u,"mod",!1).mod},a.prototype.umod=function(u){return this.divmod(u,"mod",!0).mod},a.prototype.divRound=function(u){var p=this.divmod(u);if(p.mod.isZero())return p.div;var m=p.div.negative!==0?p.mod.isub(u):p.mod,y=u.ushrn(1),E=u.andln(1),$=m.cmp(y);return $<0||E===1&&$===0?p.div:p.div.negative!==0?p.div.isubn(1):p.div.iaddn(1)},a.prototype.modn=function(u){o(u<=67108863);for(var p=(1<<26)%u,m=0,y=this.length-1;y>=0;y--)m=(p*m+(this.words[y]|0))%u;return m},a.prototype.idivn=function(u){o(u<=67108863);for(var p=0,m=this.length-1;m>=0;m--){var y=(this.words[m]|0)+p*67108864;this.words[m]=y/u|0,p=y%u}return this.strip()},a.prototype.divn=function(u){return this.clone().idivn(u)},a.prototype.egcd=function(u){o(u.negative===0),o(!u.isZero());var p=this,m=u.clone();p.negative!==0?p=p.umod(u):p=p.clone();for(var y=new a(1),E=new a(0),$=new a(0),k=new a(1),_=0;p.isEven()&&m.isEven();)p.iushrn(1),m.iushrn(1),++_;for(var d=m.clone(),w=p.clone();!p.isZero();){for(var I=0,C=1;!(p.words[0]&C)&&I<26;++I,C<<=1);if(I>0)for(p.iushrn(I);I-- >0;)(y.isOdd()||E.isOdd())&&(y.iadd(d),E.isub(w)),y.iushrn(1),E.iushrn(1);for(var V=0,O=1;!(m.words[0]&O)&&V<26;++V,O<<=1);if(V>0)for(m.iushrn(V);V-- >0;)($.isOdd()||k.isOdd())&&($.iadd(d),k.isub(w)),$.iushrn(1),k.iushrn(1);p.cmp(m)>=0?(p.isub(m),y.isub($),E.isub(k)):(m.isub(p),$.isub(y),k.isub(E))}return{a:$,b:k,gcd:m.iushln(_)}},a.prototype._invmp=function(u){o(u.negative===0),o(!u.isZero());var p=this,m=u.clone();p.negative!==0?p=p.umod(u):p=p.clone();for(var y=new a(1),E=new a(0),$=m.clone();p.cmpn(1)>0&&m.cmpn(1)>0;){for(var k=0,_=1;!(p.words[0]&_)&&k<26;++k,_<<=1);if(k>0)for(p.iushrn(k);k-- >0;)y.isOdd()&&y.iadd($),y.iushrn(1);for(var d=0,w=1;!(m.words[0]&w)&&d<26;++d,w<<=1);if(d>0)for(m.iushrn(d);d-- >0;)E.isOdd()&&E.iadd($),E.iushrn(1);p.cmp(m)>=0?(p.isub(m),y.isub(E)):(m.isub(p),E.isub(y))}var I;return p.cmpn(1)===0?I=y:I=E,I.cmpn(0)<0&&I.iadd(u),I},a.prototype.gcd=function(u){if(this.isZero())return u.abs();if(u.isZero())return this.abs();var p=this.clone(),m=u.clone();p.negative=0,m.negative=0;for(var y=0;p.isEven()&&m.isEven();y++)p.iushrn(1),m.iushrn(1);do{for(;p.isEven();)p.iushrn(1);for(;m.isEven();)m.iushrn(1);var E=p.cmp(m);if(E<0){var $=p;p=m,m=$}else if(E===0||m.cmpn(1)===0)break;p.isub(m)}while(!0);return m.iushln(y)},a.prototype.invm=function(u){return this.egcd(u).a.umod(u)},a.prototype.isEven=function(){return(this.words[0]&1)===0},a.prototype.isOdd=function(){return(this.words[0]&1)===1},a.prototype.andln=function(u){return this.words[0]&u},a.prototype.bincn=function(u){o(typeof u=="number");var p=u%26,m=(u-p)/26,y=1<<p;if(this.length<=m)return this._expand(m+1),this.words[m]|=y,this;for(var E=y,$=m;E!==0&&$<this.length;$++){var k=this.words[$]|0;k+=E,E=k>>>26,k&=67108863,this.words[$]=k}return E!==0&&(this.words[$]=E,this.length++),this},a.prototype.isZero=function(){return this.length===1&&this.words[0]===0},a.prototype.cmpn=function(u){var p=u<0;if(this.negative!==0&&!p)return-1;if(this.negative===0&&p)return 1;this.strip();var m;if(this.length>1)m=1;else{p&&(u=-u),o(u<=67108863,"Number is too big");var y=this.words[0]|0;m=y===u?0:y<u?-1:1}return this.negative!==0?-m|0:m},a.prototype.cmp=function(u){if(this.negative!==0&&u.negative===0)return-1;if(this.negative===0&&u.negative!==0)return 1;var p=this.ucmp(u);return this.negative!==0?-p|0:p},a.prototype.ucmp=function(u){if(this.length>u.length)return 1;if(this.length<u.length)return-1;for(var p=0,m=this.length-1;m>=0;m--){var y=this.words[m]|0,E=u.words[m]|0;if(y!==E){y<E?p=-1:y>E&&(p=1);break}}return p},a.prototype.gtn=function(u){return this.cmpn(u)===1},a.prototype.gt=function(u){return this.cmp(u)===1},a.prototype.gten=function(u){return this.cmpn(u)>=0},a.prototype.gte=function(u){return this.cmp(u)>=0},a.prototype.ltn=function(u){return this.cmpn(u)===-1},a.prototype.lt=function(u){return this.cmp(u)===-1},a.prototype.lten=function(u){return this.cmpn(u)<=0},a.prototype.lte=function(u){return this.cmp(u)<=0},a.prototype.eqn=function(u){return this.cmpn(u)===0},a.prototype.eq=function(u){return this.cmp(u)===0},a.red=function(u){return new pe(u)},a.prototype.toRed=function(u){return o(!this.red,"Already a number in reduction context"),o(this.negative===0,"red works only with positives"),u.convertTo(this)._forceRed(u)},a.prototype.fromRed=function(){return o(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},a.prototype._forceRed=function(u){return this.red=u,this},a.prototype.forceRed=function(u){return o(!this.red,"Already a number in reduction context"),this._forceRed(u)},a.prototype.redAdd=function(u){return o(this.red,"redAdd works only with red numbers"),this.red.add(this,u)},a.prototype.redIAdd=function(u){return o(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,u)},a.prototype.redSub=function(u){return o(this.red,"redSub works only with red numbers"),this.red.sub(this,u)},a.prototype.redISub=function(u){return o(this.red,"redISub works only with red numbers"),this.red.isub(this,u)},a.prototype.redShl=function(u){return o(this.red,"redShl works only with red numbers"),this.red.shl(this,u)},a.prototype.redMul=function(u){return o(this.red,"redMul works only with red numbers"),this.red._verify2(this,u),this.red.mul(this,u)},a.prototype.redIMul=function(u){return o(this.red,"redMul works only with red numbers"),this.red._verify2(this,u),this.red.imul(this,u)},a.prototype.redSqr=function(){return o(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},a.prototype.redISqr=function(){return o(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},a.prototype.redSqrt=function(){return o(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},a.prototype.redInvm=function(){return o(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},a.prototype.redNeg=function(){return o(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},a.prototype.redPow=function(u){return o(this.red&&!u.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,u)};var ee={k256:null,p224:null,p192:null,p25519:null};function te(T,u){this.name=T,this.p=new a(u,16),this.n=this.p.bitLength(),this.k=new a(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}te.prototype._tmp=function(){var u=new a(null);return u.words=new Array(Math.ceil(this.n/13)),u},te.prototype.ireduce=function(u){var p=u,m;do this.split(p,this.tmp),p=this.imulK(p),p=p.iadd(this.tmp),m=p.bitLength();while(m>this.n);var y=m<this.n?-1:p.ucmp(this.p);return y===0?(p.words[0]=0,p.length=1):y>0?p.isub(this.p):p.strip!==void 0?p.strip():p._strip(),p},te.prototype.split=function(u,p){u.iushrn(this.n,0,p)},te.prototype.imulK=function(u){return u.imul(this.k)};function ce(){te.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}c(ce,te),ce.prototype.split=function(u,p){for(var m=4194303,y=Math.min(u.length,9),E=0;E<y;E++)p.words[E]=u.words[E];if(p.length=y,u.length<=9){u.words[0]=0,u.length=1;return}var $=u.words[9];for(p.words[p.length++]=$&m,E=10;E<u.length;E++){var k=u.words[E]|0;u.words[E-10]=(k&m)<<4|$>>>22,$=k}$>>>=22,u.words[E-10]=$,$===0&&u.length>10?u.length-=10:u.length-=9},ce.prototype.imulK=function(u){u.words[u.length]=0,u.words[u.length+1]=0,u.length+=2;for(var p=0,m=0;m<u.length;m++){var y=u.words[m]|0;p+=y*977,u.words[m]=p&67108863,p=y*64+(p/67108864|0)}return u.words[u.length-1]===0&&(u.length--,u.words[u.length-1]===0&&u.length--),u};function ue(){te.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}c(ue,te);function Ae(){te.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}c(Ae,te);function we(){te.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}c(we,te),we.prototype.imulK=function(u){for(var p=0,m=0;m<u.length;m++){var y=(u.words[m]|0)*19+p,E=y&67108863;y>>>=26,u.words[m]=E,p=y}return p!==0&&(u.words[u.length++]=p),u},a._prime=function(u){if(ee[u])return ee[u];var p;if(u==="k256")p=new ce;else if(u==="p224")p=new ue;else if(u==="p192")p=new Ae;else if(u==="p25519")p=new we;else throw new Error("Unknown prime "+u);return ee[u]=p,p};function pe(T){if(typeof T=="string"){var u=a._prime(T);this.m=u.p,this.prime=u}else o(T.gtn(1),"modulus must be greater than 1"),this.m=T,this.prime=null}pe.prototype._verify1=function(u){o(u.negative===0,"red works only with positives"),o(u.red,"red works only with red numbers")},pe.prototype._verify2=function(u,p){o((u.negative|p.negative)===0,"red works only with positives"),o(u.red&&u.red===p.red,"red works only with red numbers")},pe.prototype.imod=function(u){return this.prime?this.prime.ireduce(u)._forceRed(this):u.umod(this.m)._forceRed(this)},pe.prototype.neg=function(u){return u.isZero()?u.clone():this.m.sub(u)._forceRed(this)},pe.prototype.add=function(u,p){this._verify2(u,p);var m=u.add(p);return m.cmp(this.m)>=0&&m.isub(this.m),m._forceRed(this)},pe.prototype.iadd=function(u,p){this._verify2(u,p);var m=u.iadd(p);return m.cmp(this.m)>=0&&m.isub(this.m),m},pe.prototype.sub=function(u,p){this._verify2(u,p);var m=u.sub(p);return m.cmpn(0)<0&&m.iadd(this.m),m._forceRed(this)},pe.prototype.isub=function(u,p){this._verify2(u,p);var m=u.isub(p);return m.cmpn(0)<0&&m.iadd(this.m),m},pe.prototype.shl=function(u,p){return this._verify1(u),this.imod(u.ushln(p))},pe.prototype.imul=function(u,p){return this._verify2(u,p),this.imod(u.imul(p))},pe.prototype.mul=function(u,p){return this._verify2(u,p),this.imod(u.mul(p))},pe.prototype.isqr=function(u){return this.imul(u,u.clone())},pe.prototype.sqr=function(u){return this.mul(u,u)},pe.prototype.sqrt=function(u){if(u.isZero())return u.clone();var p=this.m.andln(3);if(o(p%2===1),p===3){var m=this.m.add(new a(1)).iushrn(2);return this.pow(u,m)}for(var y=this.m.subn(1),E=0;!y.isZero()&&y.andln(1)===0;)E++,y.iushrn(1);o(!y.isZero());var $=new a(1).toRed(this),k=$.redNeg(),_=this.m.subn(1).iushrn(1),d=this.m.bitLength();for(d=new a(2*d*d).toRed(this);this.pow(d,_).cmp(k)!==0;)d.redIAdd(k);for(var w=this.pow(d,y),I=this.pow(u,y.addn(1).iushrn(1)),C=this.pow(u,y),V=E;C.cmp($)!==0;){for(var O=C,j=0;O.cmp($)!==0;j++)O=O.redSqr();o(j<V);var D=this.pow(w,new a(1).iushln(V-j-1));I=I.redMul(D),w=D.redSqr(),C=C.redMul(w),V=j}return I},pe.prototype.invm=function(u){var p=u._invmp(this.m);return p.negative!==0?(p.negative=0,this.imod(p).redNeg()):this.imod(p)},pe.prototype.pow=function(u,p){if(p.isZero())return new a(1).toRed(this);if(p.cmpn(1)===0)return u.clone();var m=4,y=new Array(1<<m);y[0]=new a(1).toRed(this),y[1]=u;for(var E=2;E<y.length;E++)y[E]=this.mul(y[E-1],u);var $=y[0],k=0,_=0,d=p.bitLength()%26;for(d===0&&(d=26),E=p.length-1;E>=0;E--){for(var w=p.words[E],I=d-1;I>=0;I--){var C=w>>I&1;if($!==y[0]&&($=this.sqr($)),C===0&&k===0){_=0;continue}k<<=1,k|=C,_++,!(_!==m&&(E!==0||I!==0))&&($=this.mul($,y[k]),_=0,k=0)}d=26}return $},pe.prototype.convertTo=function(u){var p=u.umod(this.m);return p===u?p.clone():p},pe.prototype.convertFrom=function(u){var p=u.clone();return p.red=null,p},a.mont=function(u){return new Ce(u)};function Ce(T){pe.call(this,T),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new a(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}c(Ce,pe),Ce.prototype.convertTo=function(u){return this.imod(u.ushln(this.shift))},Ce.prototype.convertFrom=function(u){var p=this.imod(u.mul(this.rinv));return p.red=null,p},Ce.prototype.imul=function(u,p){if(u.isZero()||p.isZero())return u.words[0]=0,u.length=1,u;var m=u.imul(p),y=m.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),E=m.isub(y).iushrn(this.shift),$=E;return E.cmp(this.m)>=0?$=E.isub(this.m):E.cmpn(0)<0&&($=E.iadd(this.m)),$._forceRed(this)},Ce.prototype.mul=function(u,p){if(u.isZero()||p.isZero())return new a(0)._forceRed(this);var m=u.mul(p),y=m.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),E=m.isub(y).iushrn(this.shift),$=E;return E.cmp(this.m)>=0?$=E.isub(this.m):E.cmpn(0)<0&&($=E.iadd(this.m)),$._forceRed(this)},Ce.prototype.invm=function(u){var p=this.imod(u._invmp(this.m).mul(this.r2));return p._forceRed(this)}})(t,commonjsGlobal)})(bn$4);var bnExports$4=bn$4.exports,brorand={exports:{}},hasRequiredBrorand;function requireBrorand(){if(hasRequiredBrorand)return brorand.exports;hasRequiredBrorand=1;var t;brorand.exports=function(c){return t||(t=new e(null)),t.generate(c)};function e(o){this.rand=o}if(brorand.exports.Rand=e,e.prototype.generate=function(c){return this._rand(c)},e.prototype._rand=function(c){if(this.rand.getBytes)return this.rand.getBytes(c);for(var a=new Uint8Array(c),l=0;l<a.length;l++)a[l]=this.rand.getByte();return a},typeof self=="object")self.crypto&&self.crypto.getRandomValues?e.prototype._rand=function(c){var a=new Uint8Array(c);return self.crypto.getRandomValues(a),a}:self.msCrypto&&self.msCrypto.getRandomValues?e.prototype._rand=function(c){var a=new Uint8Array(c);return self.msCrypto.getRandomValues(a),a}:typeof window=="object"&&(e.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var n=requireCryptoBrowserify();if(typeof n.randomBytes!="function")throw new Error("Not supported");e.prototype._rand=function(c){return n.randomBytes(c)}}catch{}return brorand.exports}var mr,hasRequiredMr;function requireMr(){if(hasRequiredMr)return mr;hasRequiredMr=1;var t=bnExports$4,e=requireBrorand();function n(o){this.rand=o||new e.Rand}return mr=n,n.create=function(c){return new n(c)},n.prototype._randbelow=function(c){var a=c.bitLength(),l=Math.ceil(a/8);do var b=new t(this.rand.generate(l));while(b.cmp(c)>=0);return b},n.prototype._randrange=function(c,a){var l=a.sub(c);return c.add(this._randbelow(l))},n.prototype.test=function(c,a,l){var b=c.bitLength(),v=t.mont(c),A=new t(1).toRed(v);a||(a=Math.max(1,b/48|0));for(var S=c.subn(1),M=0;!S.testn(M);M++);for(var B=c.shrn(M),P=S.toRed(v),L=!0;a>0;a--){var F=this._randrange(new t(2),S);l&&l(F);var U=F.toRed(v).redPow(B);if(!(U.cmp(A)===0||U.cmp(P)===0)){for(var q=1;q<M;q++){if(U=U.redSqr(),U.cmp(A)===0)return!1;if(U.cmp(P)===0)break}if(q===M)return!1}}return L},n.prototype.getDivisor=function(c,a){var l=c.bitLength(),b=t.mont(c),v=new t(1).toRed(b);a||(a=Math.max(1,l/48|0));for(var A=c.subn(1),S=0;!A.testn(S);S++);for(var M=c.shrn(S),B=A.toRed(b);a>0;a--){var P=this._randrange(new t(2),A),L=c.gcd(P);if(L.cmpn(1)!==0)return L;var F=P.toRed(b).redPow(M);if(!(F.cmp(v)===0||F.cmp(B)===0)){for(var U=1;U<S;U++){if(F=F.redSqr(),F.cmp(v)===0)return F.fromRed().subn(1).gcd(c);if(F.cmp(B)===0)break}if(U===S)return F=F.redSqr(),F.fromRed().subn(1).gcd(c)}}return!1},mr}var generatePrime,hasRequiredGeneratePrime;function requireGeneratePrime(){if(hasRequiredGeneratePrime)return generatePrime;hasRequiredGeneratePrime=1;var t=browserExports;generatePrime=U,U.simpleSieve=L,U.fermatTest=F;var e=bnExports$5,n=new e(24),o=requireMr(),c=new o,a=new e(1),l=new e(2),b=new e(5);new e(16),new e(8);var v=new e(10),A=new e(3);new e(7);var S=new e(11),M=new e(4);new e(12);var B=null;function P(){if(B!==null)return B;var q=1048576,X=[];X[0]=2;for(var ee=1,te=3;te<q;te+=2){for(var ce=Math.ceil(Math.sqrt(te)),ue=0;ue<ee&&X[ue]<=ce&&te%X[ue]!==0;ue++);ee!==ue&&X[ue]<=ce||(X[ee++]=te)}return B=X,X}function L(q){for(var X=P(),ee=0;ee<X.length;ee++)if(q.modn(X[ee])===0)return q.cmpn(X[ee])===0;return!0}function F(q){var X=e.mont(q);return l.toRed(X).redPow(q.subn(1)).fromRed().cmpn(1)===0}function U(q,X){if(q<16)return X===2||X===5?new e([140,123]):new e([140,39]);X=new e(X);for(var ee,te;;){for(ee=new e(t(Math.ceil(q/8)));ee.bitLength()>q;)ee.ishrn(1);if(ee.isEven()&&ee.iadd(a),ee.testn(1)||ee.iadd(l),X.cmp(l)){if(!X.cmp(b))for(;ee.mod(v).cmp(A);)ee.iadd(M)}else for(;ee.mod(n).cmp(S);)ee.iadd(M);if(te=ee.shrn(1),L(te)&&L(ee)&&F(te)&&F(ee)&&c.test(te)&&c.test(ee))return ee}}return generatePrime}const modp1={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},modp2={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},modp5={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},modp14={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},modp15={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},modp16={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},modp17={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},modp18={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"},require$$1$1={modp1,modp2,modp5,modp14,modp15,modp16,modp17,modp18};var dh,hasRequiredDh;function requireDh(){if(hasRequiredDh)return dh;hasRequiredDh=1;var t=bnExports$5,e=requireMr(),n=new e,o=new t(24),c=new t(11),a=new t(10),l=new t(3),b=new t(7),v=requireGeneratePrime(),A=browserExports;dh=L;function S(U,q){return q=q||"utf8",Buffer$1$1.isBuffer(U)||(U=new Buffer$1$1(U,q)),this._pub=new t(U),this}function M(U,q){return q=q||"utf8",Buffer$1$1.isBuffer(U)||(U=new Buffer$1$1(U,q)),this._priv=new t(U),this}var B={};function P(U,q){var X=q.toString("hex"),ee=[X,U.toString(16)].join("_");if(ee in B)return B[ee];var te=0;if(U.isEven()||!v.simpleSieve||!v.fermatTest(U)||!n.test(U))return te+=1,X==="02"||X==="05"?te+=8:te+=4,B[ee]=te,te;n.test(U.shrn(1))||(te+=2);var ce;switch(X){case"02":U.mod(o).cmp(c)&&(te+=8);break;case"05":ce=U.mod(a),ce.cmp(l)&&ce.cmp(b)&&(te+=8);break;default:te+=4}return B[ee]=te,te}function L(U,q,X){this.setGenerator(q),this.__prime=new t(U),this._prime=t.mont(this.__prime),this._primeLen=U.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,X?(this.setPublicKey=S,this.setPrivateKey=M):this._primeCode=8}Object.defineProperty(L.prototype,"verifyError",{enumerable:!0,get:function(){return typeof this._primeCode!="number"&&(this._primeCode=P(this.__prime,this.__gen)),this._primeCode}}),L.prototype.generateKeys=function(){return this._priv||(this._priv=new t(A(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},L.prototype.computeSecret=function(U){U=new t(U),U=U.toRed(this._prime);var q=U.redPow(this._priv).fromRed(),X=new Buffer$1$1(q.toArray()),ee=this.getPrime();if(X.length<ee.length){var te=new Buffer$1$1(ee.length-X.length);te.fill(0),X=Buffer$1$1.concat([te,X])}return X},L.prototype.getPublicKey=function(q){return F(this._pub,q)},L.prototype.getPrivateKey=function(q){return F(this._priv,q)},L.prototype.getPrime=function(U){return F(this.__prime,U)},L.prototype.getGenerator=function(U){return F(this._gen,U)},L.prototype.setGenerator=function(U,q){return q=q||"utf8",Buffer$1$1.isBuffer(U)||(U=new Buffer$1$1(U,q)),this.__gen=U,this._gen=new t(U),this};function F(U,q){var X=new Buffer$1$1(U.toArray());return q?X.toString(q):X}return dh}var hasRequiredBrowser$2;function requireBrowser$2(){if(hasRequiredBrowser$2)return browser$7;hasRequiredBrowser$2=1;var t=requireGeneratePrime(),e=require$$1$1,n=requireDh();function o(l){var b=new Buffer$1$1(e[l].prime,"hex"),v=new Buffer$1$1(e[l].gen,"hex");return new n(b,v)}var c={binary:!0,hex:!0,base64:!0};function a(l,b,v,A){return Buffer$1$1.isBuffer(b)||c[b]===void 0?a(l,"binary",b,v):(b=b||"binary",A=A||"binary",v=v||new Buffer$1$1([2]),Buffer$1$1.isBuffer(v)||(v=new Buffer$1$1(v,A)),typeof l=="number"?new n(t(l,v),v,!0):(Buffer$1$1.isBuffer(l)||(l=new Buffer$1$1(l,b)),new n(l,v,!0)))}return browser$7.DiffieHellmanGroup=browser$7.createDiffieHellmanGroup=browser$7.getDiffieHellman=o,browser$7.createDiffieHellman=browser$7.DiffieHellman=a,browser$7}var readableBrowser={exports:{}},processNextickArgs={exports:{}};typeof process$1>"u"||!process$1.version||process$1.version.indexOf("v0.")===0||process$1.version.indexOf("v1.")===0&&process$1.version.indexOf("v1.8.")!==0?processNextickArgs.exports={nextTick}:processNextickArgs.exports=process$1;function nextTick(t,e,n,o){if(typeof t!="function")throw new TypeError('"callback" argument must be a function');var c=arguments.length,a,l;switch(c){case 0:case 1:return process$1.nextTick(t);case 2:return process$1.nextTick(function(){t.call(null,e)});case 3:return process$1.nextTick(function(){t.call(null,e,n)});case 4:return process$1.nextTick(function(){t.call(null,e,n,o)});default:for(a=new Array(c-1),l=0;l<a.length;)a[l++]=arguments[l];return process$1.nextTick(function(){t.apply(null,a)})}}var processNextickArgsExports=processNextickArgs.exports,toString={}.toString,isarray=Array.isArray||function(t){return toString.call(t)=="[object Array]"},streamBrowser=eventsExports.EventEmitter,safeBuffer$1={exports:{}};(function(t,e){var n=require$$0$3,o=n.Buffer;function c(l,b){for(var v in l)b[v]=l[v]}o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?t.exports=n:(c(n,e),e.Buffer=a);function a(l,b,v){return o(l,b,v)}c(o,a),a.from=function(l,b,v){if(typeof l=="number")throw new TypeError("Argument must not be a number");return o(l,b,v)},a.alloc=function(l,b,v){if(typeof l!="number")throw new TypeError("Argument must be a number");var A=o(l);return b!==void 0?typeof v=="string"?A.fill(b,v):A.fill(b):A.fill(0),A},a.allocUnsafe=function(l){if(typeof l!="number")throw new TypeError("Argument must be a number");return o(l)},a.allocUnsafeSlow=function(l){if(typeof l!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(l)}})(safeBuffer$1,safeBuffer$1.exports);var safeBufferExports=safeBuffer$1.exports,util$2={};function isArray(t){return Array.isArray?Array.isArray(t):objectToString(t)==="[object Array]"}util$2.isArray=isArray;function isBoolean(t){return typeof t=="boolean"}util$2.isBoolean=isBoolean;function isNull(t){return t===null}util$2.isNull=isNull;function isNullOrUndefined(t){return t==null}util$2.isNullOrUndefined=isNullOrUndefined;function isNumber(t){return typeof t=="number"}util$2.isNumber=isNumber;function isString(t){return typeof t=="string"}util$2.isString=isString;function isSymbol(t){return typeof t=="symbol"}util$2.isSymbol=isSymbol;function isUndefined(t){return t===void 0}util$2.isUndefined=isUndefined;function isRegExp(t){return objectToString(t)==="[object RegExp]"}util$2.isRegExp=isRegExp;function isObject$1(t){return typeof t=="object"&&t!==null}util$2.isObject=isObject$1;function isDate(t){return objectToString(t)==="[object Date]"}util$2.isDate=isDate;function isError(t){return objectToString(t)==="[object Error]"||t instanceof Error}util$2.isError=isError;function isFunction(t){return typeof t=="function"}util$2.isFunction=isFunction;function isPrimitive(t){return t===null||typeof t=="boolean"||typeof t=="number"||typeof t=="string"||typeof t=="symbol"||typeof t>"u"}util$2.isPrimitive=isPrimitive;util$2.isBuffer=require$$0$3.Buffer.isBuffer;function objectToString(t){return Object.prototype.toString.call(t)}var BufferList={exports:{}},hasRequiredBufferList;function requireBufferList(){return hasRequiredBufferList||(hasRequiredBufferList=1,function(t){function e(a,l){if(!(a instanceof l))throw new TypeError("Cannot call a class as a function")}var n=safeBufferExports.Buffer,o=util$3;function c(a,l,b){a.copy(l,b)}t.exports=function(){function a(){e(this,a),this.head=null,this.tail=null,this.length=0}return a.prototype.push=function(b){var v={data:b,next:null};this.length>0?this.tail.next=v:this.head=v,this.tail=v,++this.length},a.prototype.unshift=function(b){var v={data:b,next:this.head};this.length===0&&(this.tail=v),this.head=v,++this.length},a.prototype.shift=function(){if(this.length!==0){var b=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,b}},a.prototype.clear=function(){this.head=this.tail=null,this.length=0},a.prototype.join=function(b){if(this.length===0)return"";for(var v=this.head,A=""+v.data;v=v.next;)A+=b+v.data;return A},a.prototype.concat=function(b){if(this.length===0)return n.alloc(0);for(var v=n.allocUnsafe(b>>>0),A=this.head,S=0;A;)c(A.data,v,S),S+=A.data.length,A=A.next;return v},a}(),o&&o.inspect&&o.inspect.custom&&(t.exports.prototype[o.inspect.custom]=function(){var a=o.inspect({length:this.length});return this.constructor.name+" "+a})}(BufferList)),BufferList.exports}var pna=processNextickArgsExports;function destroy(t,e){var n=this,o=this._readableState&&this._readableState.destroyed,c=this._writableState&&this._writableState.destroyed;return o||c?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,pna.nextTick(emitErrorNT,this,t)):pna.nextTick(emitErrorNT,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(a){!e&&a?n._writableState?n._writableState.errorEmitted||(n._writableState.errorEmitted=!0,pna.nextTick(emitErrorNT,n,a)):pna.nextTick(emitErrorNT,n,a):e&&e(a)}),this)}function undestroy(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function emitErrorNT(t,e){t.emit("error",e)}var destroy_1={destroy,undestroy},_stream_writable,hasRequired_stream_writable;function require_stream_writable(){if(hasRequired_stream_writable)return _stream_writable;hasRequired_stream_writable=1;var t=processNextickArgsExports;_stream_writable=F;function e($){var k=this;this.next=null,this.entry=null,this.finish=function(){E(k,$)}}var n=!process$1.browser&&["v0.10","v0.9."].indexOf(process$1.version.slice(0,5))>-1?setImmediate:t.nextTick,o;F.WritableState=P;var c=Object.create(util$2);c.inherits=inherits_browserExports;var a={deprecate:browser$e},l=streamBrowser,b=safeBufferExports.Buffer,v=(typeof commonjsGlobal<"u"?commonjsGlobal:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function A($){return b.from($)}function S($){return b.isBuffer($)||$ instanceof v}var M=destroy_1;c.inherits(F,l);function B(){}function P($,k){o=o||require_stream_duplex(),$=$||{};var _=k instanceof o;this.objectMode=!!$.objectMode,_&&(this.objectMode=this.objectMode||!!$.writableObjectMode);var d=$.highWaterMark,w=$.writableHighWaterMark,I=this.objectMode?16:16*1024;d||d===0?this.highWaterMark=d:_&&(w||w===0)?this.highWaterMark=w:this.highWaterMark=I,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var C=$.decodeStrings===!1;this.decodeStrings=!C,this.defaultEncoding=$.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(V){Ae(k,V)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new e(this)}P.prototype.getBuffer=function(){for(var k=this.bufferedRequest,_=[];k;)_.push(k),k=k.next;return _},function(){try{Object.defineProperty(P.prototype,"buffer",{get:a.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var L;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(L=Function.prototype[Symbol.hasInstance],Object.defineProperty(F,Symbol.hasInstance,{value:function($){return L.call(this,$)?!0:this!==F?!1:$&&$._writableState instanceof P}})):L=function($){return $ instanceof this};function F($){if(o=o||require_stream_duplex(),!L.call(F,this)&&!(this instanceof o))return new F($);this._writableState=new P($,this),this.writable=!0,$&&(typeof $.write=="function"&&(this._write=$.write),typeof $.writev=="function"&&(this._writev=$.writev),typeof $.destroy=="function"&&(this._destroy=$.destroy),typeof $.final=="function"&&(this._final=$.final)),l.call(this)}F.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function U($,k){var _=new Error("write after end");$.emit("error",_),t.nextTick(k,_)}function q($,k,_,d){var w=!0,I=!1;return _===null?I=new TypeError("May not write null values to stream"):typeof _!="string"&&_!==void 0&&!k.objectMode&&(I=new TypeError("Invalid non-string/buffer chunk")),I&&($.emit("error",I),t.nextTick(d,I),w=!1),w}F.prototype.write=function($,k,_){var d=this._writableState,w=!1,I=!d.objectMode&&S($);return I&&!b.isBuffer($)&&($=A($)),typeof k=="function"&&(_=k,k=null),I?k="buffer":k||(k=d.defaultEncoding),typeof _!="function"&&(_=B),d.ended?U(this,_):(I||q(this,d,$,_))&&(d.pendingcb++,w=ee(this,d,I,$,k,_)),w},F.prototype.cork=function(){var $=this._writableState;$.corked++},F.prototype.uncork=function(){var $=this._writableState;$.corked&&($.corked--,!$.writing&&!$.corked&&!$.bufferProcessing&&$.bufferedRequest&&Ce(this,$))},F.prototype.setDefaultEncoding=function(k){if(typeof k=="string"&&(k=k.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((k+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+k);return this._writableState.defaultEncoding=k,this};function X($,k,_){return!$.objectMode&&$.decodeStrings!==!1&&typeof k=="string"&&(k=b.from(k,_)),k}Object.defineProperty(F.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function ee($,k,_,d,w,I){if(!_){var C=X(k,d,w);d!==C&&(_=!0,w="buffer",d=C)}var V=k.objectMode?1:d.length;k.length+=V;var O=k.length<k.highWaterMark;if(O||(k.needDrain=!0),k.writing||k.corked){var j=k.lastBufferedRequest;k.lastBufferedRequest={chunk:d,encoding:w,isBuf:_,callback:I,next:null},j?j.next=k.lastBufferedRequest:k.bufferedRequest=k.lastBufferedRequest,k.bufferedRequestCount+=1}else te($,k,!1,V,d,w,I);return O}function te($,k,_,d,w,I,C){k.writelen=d,k.writecb=C,k.writing=!0,k.sync=!0,_?$._writev(w,k.onwrite):$._write(w,I,k.onwrite),k.sync=!1}function ce($,k,_,d,w){--k.pendingcb,_?(t.nextTick(w,d),t.nextTick(m,$,k),$._writableState.errorEmitted=!0,$.emit("error",d)):(w(d),$._writableState.errorEmitted=!0,$.emit("error",d),m($,k))}function ue($){$.writing=!1,$.writecb=null,$.length-=$.writelen,$.writelen=0}function Ae($,k){var _=$._writableState,d=_.sync,w=_.writecb;if(ue(_),k)ce($,_,d,k,w);else{var I=T(_);!I&&!_.corked&&!_.bufferProcessing&&_.bufferedRequest&&Ce($,_),d?n(we,$,_,I,w):we($,_,I,w)}}function we($,k,_,d){_||pe($,k),k.pendingcb--,d(),m($,k)}function pe($,k){k.length===0&&k.needDrain&&(k.needDrain=!1,$.emit("drain"))}function Ce($,k){k.bufferProcessing=!0;var _=k.bufferedRequest;if($._writev&&_&&_.next){var d=k.bufferedRequestCount,w=new Array(d),I=k.corkedRequestsFree;I.entry=_;for(var C=0,V=!0;_;)w[C]=_,_.isBuf||(V=!1),_=_.next,C+=1;w.allBuffers=V,te($,k,!0,k.length,w,"",I.finish),k.pendingcb++,k.lastBufferedRequest=null,I.next?(k.corkedRequestsFree=I.next,I.next=null):k.corkedRequestsFree=new e(k),k.bufferedRequestCount=0}else{for(;_;){var O=_.chunk,j=_.encoding,D=_.callback,Q=k.objectMode?1:O.length;if(te($,k,!1,Q,O,j,D),_=_.next,k.bufferedRequestCount--,k.writing)break}_===null&&(k.lastBufferedRequest=null)}k.bufferedRequest=_,k.bufferProcessing=!1}F.prototype._write=function($,k,_){_(new Error("_write() is not implemented"))},F.prototype._writev=null,F.prototype.end=function($,k,_){var d=this._writableState;typeof $=="function"?(_=$,$=null,k=null):typeof k=="function"&&(_=k,k=null),$!=null&&this.write($,k),d.corked&&(d.corked=1,this.uncork()),d.ending||y(this,d,_)};function T($){return $.ending&&$.length===0&&$.bufferedRequest===null&&!$.finished&&!$.writing}function u($,k){$._final(function(_){k.pendingcb--,_&&$.emit("error",_),k.prefinished=!0,$.emit("prefinish"),m($,k)})}function p($,k){!k.prefinished&&!k.finalCalled&&(typeof $._final=="function"?(k.pendingcb++,k.finalCalled=!0,t.nextTick(u,$,k)):(k.prefinished=!0,$.emit("prefinish")))}function m($,k){var _=T(k);return _&&(p($,k),k.pendingcb===0&&(k.finished=!0,$.emit("finish"))),_}function y($,k,_){k.ending=!0,m($,k),_&&(k.finished?t.nextTick(_):$.once("finish",_)),k.ended=!0,$.writable=!1}function E($,k,_){var d=$.entry;for($.entry=null;d;){var w=d.callback;k.pendingcb--,w(_),d=d.next}k.corkedRequestsFree.next=$}return Object.defineProperty(F.prototype,"destroyed",{get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function($){this._writableState&&(this._writableState.destroyed=$)}}),F.prototype.destroy=M.destroy,F.prototype._undestroy=M.undestroy,F.prototype._destroy=function($,k){this.end(),k($)},_stream_writable}var _stream_duplex,hasRequired_stream_duplex;function require_stream_duplex(){if(hasRequired_stream_duplex)return _stream_duplex;hasRequired_stream_duplex=1;var t=processNextickArgsExports,e=Object.keys||function(M){var B=[];for(var P in M)B.push(P);return B};_stream_duplex=v;var n=Object.create(util$2);n.inherits=inherits_browserExports;var o=require_stream_readable(),c=require_stream_writable();n.inherits(v,o);for(var a=e(c.prototype),l=0;l<a.length;l++){var b=a[l];v.prototype[b]||(v.prototype[b]=c.prototype[b])}function v(M){if(!(this instanceof v))return new v(M);o.call(this,M),c.call(this,M),M&&M.readable===!1&&(this.readable=!1),M&&M.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,M&&M.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",A)}Object.defineProperty(v.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function A(){this.allowHalfOpen||this._writableState.ended||t.nextTick(S,this)}function S(M){M.end()}return Object.defineProperty(v.prototype,"destroyed",{get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(M){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=M,this._writableState.destroyed=M)}}),v.prototype._destroy=function(M,B){this.push(null),this.end(),t.nextTick(B,M)},_stream_duplex}var _stream_readable,hasRequired_stream_readable;function require_stream_readable(){if(hasRequired_stream_readable)return _stream_readable;hasRequired_stream_readable=1;var t=processNextickArgsExports;_stream_readable=X;var e=isarray,n;X.ReadableState=q,eventsExports.EventEmitter;var o=function(D,Q){return D.listeners(Q).length},c=streamBrowser,a=safeBufferExports.Buffer,l=(typeof commonjsGlobal<"u"?commonjsGlobal:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function b(D){return a.from(D)}function v(D){return a.isBuffer(D)||D instanceof l}var A=Object.create(util$2);A.inherits=inherits_browserExports;var S=util$3,M=void 0;S&&S.debuglog?M=S.debuglog("stream"):M=function(){};var B=requireBufferList(),P=destroy_1,L;A.inherits(X,c);var F=["error","close","destroy","pause","resume"];function U(D,Q,oe){if(typeof D.prependListener=="function")return D.prependListener(Q,oe);!D._events||!D._events[Q]?D.on(Q,oe):e(D._events[Q])?D._events[Q].unshift(oe):D._events[Q]=[oe,D._events[Q]]}function q(D,Q){n=n||require_stream_duplex(),D=D||{};var oe=Q instanceof n;this.objectMode=!!D.objectMode,oe&&(this.objectMode=this.objectMode||!!D.readableObjectMode);var de=D.highWaterMark,Z=D.readableHighWaterMark,H=this.objectMode?16:16*1024;de||de===0?this.highWaterMark=de:oe&&(Z||Z===0)?this.highWaterMark=Z:this.highWaterMark=H,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new B,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=D.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,D.encoding&&(L||(L=string_decoder.StringDecoder),this.decoder=new L(D.encoding),this.encoding=D.encoding)}function X(D){if(n=n||require_stream_duplex(),!(this instanceof X))return new X(D);this._readableState=new q(D,this),this.readable=!0,D&&(typeof D.read=="function"&&(this._read=D.read),typeof D.destroy=="function"&&(this._destroy=D.destroy)),c.call(this)}Object.defineProperty(X.prototype,"destroyed",{get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(D){this._readableState&&(this._readableState.destroyed=D)}}),X.prototype.destroy=P.destroy,X.prototype._undestroy=P.undestroy,X.prototype._destroy=function(D,Q){this.push(null),Q(D)},X.prototype.push=function(D,Q){var oe=this._readableState,de;return oe.objectMode?de=!0:typeof D=="string"&&(Q=Q||oe.defaultEncoding,Q!==oe.encoding&&(D=a.from(D,Q),Q=""),de=!0),ee(this,D,Q,!1,de)},X.prototype.unshift=function(D){return ee(this,D,null,!0,!1)};function ee(D,Q,oe,de,Z){var H=D._readableState;if(Q===null)H.reading=!1,Ce(D,H);else{var ge;Z||(ge=ce(H,Q)),ge?D.emit("error",ge):H.objectMode||Q&&Q.length>0?(typeof Q!="string"&&!H.objectMode&&Object.getPrototypeOf(Q)!==a.prototype&&(Q=b(Q)),de?H.endEmitted?D.emit("error",new Error("stream.unshift() after end event")):te(D,H,Q,!0):H.ended?D.emit("error",new Error("stream.push() after EOF")):(H.reading=!1,H.decoder&&!oe?(Q=H.decoder.write(Q),H.objectMode||Q.length!==0?te(D,H,Q,!1):p(D,H)):te(D,H,Q,!1))):de||(H.reading=!1)}return ue(H)}function te(D,Q,oe,de){Q.flowing&&Q.length===0&&!Q.sync?(D.emit("data",oe),D.read(0)):(Q.length+=Q.objectMode?1:oe.length,de?Q.buffer.unshift(oe):Q.buffer.push(oe),Q.needReadable&&T(D)),p(D,Q)}function ce(D,Q){var oe;return!v(Q)&&typeof Q!="string"&&Q!==void 0&&!D.objectMode&&(oe=new TypeError("Invalid non-string/buffer chunk")),oe}function ue(D){return!D.ended&&(D.needReadable||D.length<D.highWaterMark||D.length===0)}X.prototype.isPaused=function(){return this._readableState.flowing===!1},X.prototype.setEncoding=function(D){return L||(L=string_decoder.StringDecoder),this._readableState.decoder=new L(D),this._readableState.encoding=D,this};var Ae=8388608;function we(D){return D>=Ae?D=Ae:(D--,D|=D>>>1,D|=D>>>2,D|=D>>>4,D|=D>>>8,D|=D>>>16,D++),D}function pe(D,Q){return D<=0||Q.length===0&&Q.ended?0:Q.objectMode?1:D!==D?Q.flowing&&Q.length?Q.buffer.head.data.length:Q.length:(D>Q.highWaterMark&&(Q.highWaterMark=we(D)),D<=Q.length?D:Q.ended?Q.length:(Q.needReadable=!0,0))}X.prototype.read=function(D){M("read",D),D=parseInt(D,10);var Q=this._readableState,oe=D;if(D!==0&&(Q.emittedReadable=!1),D===0&&Q.needReadable&&(Q.length>=Q.highWaterMark||Q.ended))return M("read: emitReadable",Q.length,Q.ended),Q.length===0&&Q.ended?V(this):T(this),null;if(D=pe(D,Q),D===0&&Q.ended)return Q.length===0&&V(this),null;var de=Q.needReadable;M("need readable",de),(Q.length===0||Q.length-D<Q.highWaterMark)&&(de=!0,M("length less than watermark",de)),Q.ended||Q.reading?(de=!1,M("reading or ended",de)):de&&(M("do read"),Q.reading=!0,Q.sync=!0,Q.length===0&&(Q.needReadable=!0),this._read(Q.highWaterMark),Q.sync=!1,Q.reading||(D=pe(oe,Q)));var Z;return D>0?Z=d(D,Q):Z=null,Z===null?(Q.needReadable=!0,D=0):Q.length-=D,Q.length===0&&(Q.ended||(Q.needReadable=!0),oe!==D&&Q.ended&&V(this)),Z!==null&&this.emit("data",Z),Z};function Ce(D,Q){if(!Q.ended){if(Q.decoder){var oe=Q.decoder.end();oe&&oe.length&&(Q.buffer.push(oe),Q.length+=Q.objectMode?1:oe.length)}Q.ended=!0,T(D)}}function T(D){var Q=D._readableState;Q.needReadable=!1,Q.emittedReadable||(M("emitReadable",Q.flowing),Q.emittedReadable=!0,Q.sync?t.nextTick(u,D):u(D))}function u(D){M("emit readable"),D.emit("readable"),_(D)}function p(D,Q){Q.readingMore||(Q.readingMore=!0,t.nextTick(m,D,Q))}function m(D,Q){for(var oe=Q.length;!Q.reading&&!Q.flowing&&!Q.ended&&Q.length<Q.highWaterMark&&(M("maybeReadMore read 0"),D.read(0),oe!==Q.length);)oe=Q.length;Q.readingMore=!1}X.prototype._read=function(D){this.emit("error",new Error("_read() is not implemented"))},X.prototype.pipe=function(D,Q){var oe=this,de=this._readableState;switch(de.pipesCount){case 0:de.pipes=D;break;case 1:de.pipes=[de.pipes,D];break;default:de.pipes.push(D);break}de.pipesCount+=1,M("pipe count=%d opts=%j",de.pipesCount,Q);var Z=(!Q||Q.end!==!1)&&D!==process$1.stdout&&D!==process$1.stderr,H=Z?Me:St;de.endEmitted?t.nextTick(H):oe.once("end",H),D.on("unpipe",ge);function ge(De,qe){M("onunpipe"),De===oe&&qe&&qe.hasUnpiped===!1&&(qe.hasUnpiped=!0,et())}function Me(){M("onend"),D.end()}var ke=y(oe);D.on("drain",ke);var Ie=!1;function et(){M("cleanup"),D.removeListener("close",He),D.removeListener("finish",Ye),D.removeListener("drain",ke),D.removeListener("error",$t),D.removeListener("unpipe",ge),oe.removeListener("end",Me),oe.removeListener("end",St),oe.removeListener("data",$e),Ie=!0,de.awaitDrain&&(!D._writableState||D._writableState.needDrain)&&ke()}var Fe=!1;oe.on("data",$e);function $e(De){M("ondata"),Fe=!1;var qe=D.write(De);qe===!1&&!Fe&&((de.pipesCount===1&&de.pipes===D||de.pipesCount>1&&j(de.pipes,D)!==-1)&&!Ie&&(M("false write response, pause",de.awaitDrain),de.awaitDrain++,Fe=!0),oe.pause())}function $t(De){M("onerror",De),St(),D.removeListener("error",$t),o(D,"error")===0&&D.emit("error",De)}U(D,"error",$t);function He(){D.removeListener("finish",Ye),St()}D.once("close",He);function Ye(){M("onfinish"),D.removeListener("close",He),St()}D.once("finish",Ye);function St(){M("unpipe"),oe.unpipe(D)}return D.emit("pipe",oe),de.flowing||(M("pipe resume"),oe.resume()),D};function y(D){return function(){var Q=D._readableState;M("pipeOnDrain",Q.awaitDrain),Q.awaitDrain&&Q.awaitDrain--,Q.awaitDrain===0&&o(D,"data")&&(Q.flowing=!0,_(D))}}X.prototype.unpipe=function(D){var Q=this._readableState,oe={hasUnpiped:!1};if(Q.pipesCount===0)return this;if(Q.pipesCount===1)return D&&D!==Q.pipes?this:(D||(D=Q.pipes),Q.pipes=null,Q.pipesCount=0,Q.flowing=!1,D&&D.emit("unpipe",this,oe),this);if(!D){var de=Q.pipes,Z=Q.pipesCount;Q.pipes=null,Q.pipesCount=0,Q.flowing=!1;for(var H=0;H<Z;H++)de[H].emit("unpipe",this,{hasUnpiped:!1});return this}var ge=j(Q.pipes,D);return ge===-1?this:(Q.pipes.splice(ge,1),Q.pipesCount-=1,Q.pipesCount===1&&(Q.pipes=Q.pipes[0]),D.emit("unpipe",this,oe),this)},X.prototype.on=function(D,Q){var oe=c.prototype.on.call(this,D,Q);if(D==="data")this._readableState.flowing!==!1&&this.resume();else if(D==="readable"){var de=this._readableState;!de.endEmitted&&!de.readableListening&&(de.readableListening=de.needReadable=!0,de.emittedReadable=!1,de.reading?de.length&&T(this):t.nextTick(E,this))}return oe},X.prototype.addListener=X.prototype.on;function E(D){M("readable nexttick read 0"),D.read(0)}X.prototype.resume=function(){var D=this._readableState;return D.flowing||(M("resume"),D.flowing=!0,$(this,D)),this};function $(D,Q){Q.resumeScheduled||(Q.resumeScheduled=!0,t.nextTick(k,D,Q))}function k(D,Q){Q.reading||(M("resume read 0"),D.read(0)),Q.resumeScheduled=!1,Q.awaitDrain=0,D.emit("resume"),_(D),Q.flowing&&!Q.reading&&D.read(0)}X.prototype.pause=function(){return M("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(M("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function _(D){var Q=D._readableState;for(M("flow",Q.flowing);Q.flowing&&D.read()!==null;);}X.prototype.wrap=function(D){var Q=this,oe=this._readableState,de=!1;D.on("end",function(){if(M("wrapped end"),oe.decoder&&!oe.ended){var ge=oe.decoder.end();ge&&ge.length&&Q.push(ge)}Q.push(null)}),D.on("data",function(ge){if(M("wrapped data"),oe.decoder&&(ge=oe.decoder.write(ge)),!(oe.objectMode&&ge==null)&&!(!oe.objectMode&&(!ge||!ge.length))){var Me=Q.push(ge);Me||(de=!0,D.pause())}});for(var Z in D)this[Z]===void 0&&typeof D[Z]=="function"&&(this[Z]=function(ge){return function(){return D[ge].apply(D,arguments)}}(Z));for(var H=0;H<F.length;H++)D.on(F[H],this.emit.bind(this,F[H]));return this._read=function(ge){M("wrapped _read",ge),de&&(de=!1,D.resume())},this},Object.defineProperty(X.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),X._fromList=d;function d(D,Q){if(Q.length===0)return null;var oe;return Q.objectMode?oe=Q.buffer.shift():!D||D>=Q.length?(Q.decoder?oe=Q.buffer.join(""):Q.buffer.length===1?oe=Q.buffer.head.data:oe=Q.buffer.concat(Q.length),Q.buffer.clear()):oe=w(D,Q.buffer,Q.decoder),oe}function w(D,Q,oe){var de;return D<Q.head.data.length?(de=Q.head.data.slice(0,D),Q.head.data=Q.head.data.slice(D)):D===Q.head.data.length?de=Q.shift():de=oe?I(D,Q):C(D,Q),de}function I(D,Q){var oe=Q.head,de=1,Z=oe.data;for(D-=Z.length;oe=oe.next;){var H=oe.data,ge=D>H.length?H.length:D;if(ge===H.length?Z+=H:Z+=H.slice(0,D),D-=ge,D===0){ge===H.length?(++de,oe.next?Q.head=oe.next:Q.head=Q.tail=null):(Q.head=oe,oe.data=H.slice(ge));break}++de}return Q.length-=de,Z}function C(D,Q){var oe=a.allocUnsafe(D),de=Q.head,Z=1;for(de.data.copy(oe),D-=de.data.length;de=de.next;){var H=de.data,ge=D>H.length?H.length:D;if(H.copy(oe,oe.length-D,0,ge),D-=ge,D===0){ge===H.length?(++Z,de.next?Q.head=de.next:Q.head=Q.tail=null):(Q.head=de,de.data=H.slice(ge));break}++Z}return Q.length-=Z,oe}function V(D){var Q=D._readableState;if(Q.length>0)throw new Error('"endReadable()" called on non-empty stream');Q.endEmitted||(Q.ended=!0,t.nextTick(O,Q,D))}function O(D,Q){!D.endEmitted&&D.length===0&&(D.endEmitted=!0,Q.readable=!1,Q.emit("end"))}function j(D,Q){for(var oe=0,de=D.length;oe<de;oe++)if(D[oe]===Q)return oe;return-1}return _stream_readable}var _stream_transform=Transform$1,Duplex=require_stream_duplex(),util$1=Object.create(util$2);util$1.inherits=inherits_browserExports;util$1.inherits(Transform$1,Duplex);function afterTransform(t,e){var n=this._transformState;n.transforming=!1;var o=n.writecb;if(!o)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,e!=null&&this.push(e),o(t);var c=this._readableState;c.reading=!1,(c.needReadable||c.length<c.highWaterMark)&&this._read(c.highWaterMark)}function Transform$1(t){if(!(this instanceof Transform$1))return new Transform$1(t);Duplex.call(this,t),this._transformState={afterTransform:afterTransform.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",prefinish)}function prefinish(){var t=this;typeof this._flush=="function"?this._flush(function(e,n){done(t,e,n)}):done(this,null,null)}Transform$1.prototype.push=function(t,e){return this._transformState.needTransform=!1,Duplex.prototype.push.call(this,t,e)};Transform$1.prototype._transform=function(t,e,n){throw new Error("_transform() is not implemented")};Transform$1.prototype._write=function(t,e,n){var o=this._transformState;if(o.writecb=n,o.writechunk=t,o.writeencoding=e,!o.transforming){var c=this._readableState;(o.needTransform||c.needReadable||c.length<c.highWaterMark)&&this._read(c.highWaterMark)}};Transform$1.prototype._read=function(t){var e=this._transformState;e.writechunk!==null&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};Transform$1.prototype._destroy=function(t,e){var n=this;Duplex.prototype._destroy.call(this,t,function(o){e(o),n.emit("close")})};function done(t,e,n){if(e)return t.emit("error",e);if(n!=null&&t.push(n),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}var _stream_passthrough=PassThrough,Transform=_stream_transform,util=Object.create(util$2);util.inherits=inherits_browserExports;util.inherits(PassThrough,Transform);function PassThrough(t){if(!(this instanceof PassThrough))return new PassThrough(t);Transform.call(this,t)}PassThrough.prototype._transform=function(t,e,n){n(null,t)};(function(t,e){e=t.exports=require_stream_readable(),e.Stream=e,e.Readable=e,e.Writable=require_stream_writable(),e.Duplex=require_stream_duplex(),e.Transform=_stream_transform,e.PassThrough=_stream_passthrough})(readableBrowser,readableBrowser.exports);var readableBrowserExports=readableBrowser.exports,sign$2={exports:{}},BN$a=bnExports$6,randomBytes$1=browserExports;function blind(t){var e=getr(t),n=e.toRed(BN$a.mont(t.modulus)).redPow(new BN$a(t.publicExponent)).fromRed();return{blinder:n,unblinder:e.invm(t.modulus)}}function getr(t){var e=t.modulus.byteLength(),n;do n=new BN$a(randomBytes$1(e));while(n.cmp(t.modulus)>=0||!n.umod(t.prime1)||!n.umod(t.prime2));return n}function crt$2(t,e){var n=blind(e),o=e.modulus.byteLength(),c=new BN$a(t).mul(n.blinder).umod(e.modulus),a=c.toRed(BN$a.mont(e.prime1)),l=c.toRed(BN$a.mont(e.prime2)),b=e.coefficient,v=e.prime1,A=e.prime2,S=a.redPow(e.exponent1).fromRed(),M=l.redPow(e.exponent2).fromRed(),B=S.isub(M).imul(b).umod(v).imul(A);return M.iadd(B).imul(n.unblinder).umod(e.modulus).toArrayLike(Buffer$1$1,"be",o)}crt$2.getr=getr;var browserifyRsa=crt$2,elliptic={};const name$2="elliptic",version$3="6.5.5",description="EC cryptography",main="lib/elliptic.js",files=["lib"],scripts={lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},repository={type:"git",url:"git@github.com:indutny/elliptic"},keywords=["EC","Elliptic","curve","Cryptography"],author="Fedor Indutny <fedor@indutny.com>",license="MIT",bugs={url:"https://github.com/indutny/elliptic/issues"},homepage="https://github.com/indutny/elliptic",devDependencies={brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},dependencies={"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"},require$$0$1={name:name$2,version:version$3,description,main,files,scripts,repository,keywords,author,license,bugs,homepage,devDependencies,dependencies};var utils$d={},bn$3={exports:{}};bn$3.exports;(function(t){(function(e,n){function o(T,u){if(!T)throw new Error(u||"Assertion failed")}function c(T,u){T.super_=u;var p=function(){};p.prototype=u.prototype,T.prototype=new p,T.prototype.constructor=T}function a(T,u,p){if(a.isBN(T))return T;this.negative=0,this.words=null,this.length=0,this.red=null,T!==null&&((u==="le"||u==="be")&&(p=u,u=10),this._init(T||0,u||10,p||"be"))}typeof e=="object"?e.exports=a:n.BN=a,a.BN=a,a.wordSize=26;var l;try{typeof window<"u"&&typeof window.Buffer<"u"?l=window.Buffer:l=require$$0$3.Buffer}catch{}a.isBN=function(u){return u instanceof a?!0:u!==null&&typeof u=="object"&&u.constructor.wordSize===a.wordSize&&Array.isArray(u.words)},a.max=function(u,p){return u.cmp(p)>0?u:p},a.min=function(u,p){return u.cmp(p)<0?u:p},a.prototype._init=function(u,p,m){if(typeof u=="number")return this._initNumber(u,p,m);if(typeof u=="object")return this._initArray(u,p,m);p==="hex"&&(p=16),o(p===(p|0)&&p>=2&&p<=36),u=u.toString().replace(/\s+/g,"");var y=0;u[0]==="-"&&(y++,this.negative=1),y<u.length&&(p===16?this._parseHex(u,y,m):(this._parseBase(u,p,y),m==="le"&&this._initArray(this.toArray(),p,m)))},a.prototype._initNumber=function(u,p,m){u<0&&(this.negative=1,u=-u),u<67108864?(this.words=[u&67108863],this.length=1):u<4503599627370496?(this.words=[u&67108863,u/67108864&67108863],this.length=2):(o(u<9007199254740992),this.words=[u&67108863,u/67108864&67108863,1],this.length=3),m==="le"&&this._initArray(this.toArray(),p,m)},a.prototype._initArray=function(u,p,m){if(o(typeof u.length=="number"),u.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(u.length/3),this.words=new Array(this.length);for(var y=0;y<this.length;y++)this.words[y]=0;var E,$,k=0;if(m==="be")for(y=u.length-1,E=0;y>=0;y-=3)$=u[y]|u[y-1]<<8|u[y-2]<<16,this.words[E]|=$<<k&67108863,this.words[E+1]=$>>>26-k&67108863,k+=24,k>=26&&(k-=26,E++);else if(m==="le")for(y=0,E=0;y<u.length;y+=3)$=u[y]|u[y+1]<<8|u[y+2]<<16,this.words[E]|=$<<k&67108863,this.words[E+1]=$>>>26-k&67108863,k+=24,k>=26&&(k-=26,E++);return this.strip()};function b(T,u){var p=T.charCodeAt(u);return p>=65&&p<=70?p-55:p>=97&&p<=102?p-87:p-48&15}function v(T,u,p){var m=b(T,p);return p-1>=u&&(m|=b(T,p-1)<<4),m}a.prototype._parseHex=function(u,p,m){this.length=Math.ceil((u.length-p)/6),this.words=new Array(this.length);for(var y=0;y<this.length;y++)this.words[y]=0;var E=0,$=0,k;if(m==="be")for(y=u.length-1;y>=p;y-=2)k=v(u,p,y)<<E,this.words[$]|=k&67108863,E>=18?(E-=18,$+=1,this.words[$]|=k>>>26):E+=8;else{var _=u.length-p;for(y=_%2===0?p+1:p;y<u.length;y+=2)k=v(u,p,y)<<E,this.words[$]|=k&67108863,E>=18?(E-=18,$+=1,this.words[$]|=k>>>26):E+=8}this.strip()};function A(T,u,p,m){for(var y=0,E=Math.min(T.length,p),$=u;$<E;$++){var k=T.charCodeAt($)-48;y*=m,k>=49?y+=k-49+10:k>=17?y+=k-17+10:y+=k}return y}a.prototype._parseBase=function(u,p,m){this.words=[0],this.length=1;for(var y=0,E=1;E<=67108863;E*=p)y++;y--,E=E/p|0;for(var $=u.length-m,k=$%y,_=Math.min($,$-k)+m,d=0,w=m;w<_;w+=y)d=A(u,w,w+y,p),this.imuln(E),this.words[0]+d<67108864?this.words[0]+=d:this._iaddn(d);if(k!==0){var I=1;for(d=A(u,w,u.length,p),w=0;w<k;w++)I*=p;this.imuln(I),this.words[0]+d<67108864?this.words[0]+=d:this._iaddn(d)}this.strip()},a.prototype.copy=function(u){u.words=new Array(this.length);for(var p=0;p<this.length;p++)u.words[p]=this.words[p];u.length=this.length,u.negative=this.negative,u.red=this.red},a.prototype.clone=function(){var u=new a(null);return this.copy(u),u},a.prototype._expand=function(u){for(;this.length<u;)this.words[this.length++]=0;return this},a.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},a.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},a.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var S=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],M=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],B=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];a.prototype.toString=function(u,p){u=u||10,p=p|0||1;var m;if(u===16||u==="hex"){m="";for(var y=0,E=0,$=0;$<this.length;$++){var k=this.words[$],_=((k<<y|E)&16777215).toString(16);E=k>>>24-y&16777215,E!==0||$!==this.length-1?m=S[6-_.length]+_+m:m=_+m,y+=2,y>=26&&(y-=26,$--)}for(E!==0&&(m=E.toString(16)+m);m.length%p!==0;)m="0"+m;return this.negative!==0&&(m="-"+m),m}if(u===(u|0)&&u>=2&&u<=36){var d=M[u],w=B[u];m="";var I=this.clone();for(I.negative=0;!I.isZero();){var C=I.modn(w).toString(u);I=I.idivn(w),I.isZero()?m=C+m:m=S[d-C.length]+C+m}for(this.isZero()&&(m="0"+m);m.length%p!==0;)m="0"+m;return this.negative!==0&&(m="-"+m),m}o(!1,"Base should be between 2 and 36")},a.prototype.toNumber=function(){var u=this.words[0];return this.length===2?u+=this.words[1]*67108864:this.length===3&&this.words[2]===1?u+=4503599627370496+this.words[1]*67108864:this.length>2&&o(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-u:u},a.prototype.toJSON=function(){return this.toString(16)},a.prototype.toBuffer=function(u,p){return o(typeof l<"u"),this.toArrayLike(l,u,p)},a.prototype.toArray=function(u,p){return this.toArrayLike(Array,u,p)},a.prototype.toArrayLike=function(u,p,m){var y=this.byteLength(),E=m||Math.max(1,y);o(y<=E,"byte array longer than desired length"),o(E>0,"Requested array length <= 0"),this.strip();var $=p==="le",k=new u(E),_,d,w=this.clone();if($){for(d=0;!w.isZero();d++)_=w.andln(255),w.iushrn(8),k[d]=_;for(;d<E;d++)k[d]=0}else{for(d=0;d<E-y;d++)k[d]=0;for(d=0;!w.isZero();d++)_=w.andln(255),w.iushrn(8),k[E-d-1]=_}return k},Math.clz32?a.prototype._countBits=function(u){return 32-Math.clz32(u)}:a.prototype._countBits=function(u){var p=u,m=0;return p>=4096&&(m+=13,p>>>=13),p>=64&&(m+=7,p>>>=7),p>=8&&(m+=4,p>>>=4),p>=2&&(m+=2,p>>>=2),m+p},a.prototype._zeroBits=function(u){if(u===0)return 26;var p=u,m=0;return p&8191||(m+=13,p>>>=13),p&127||(m+=7,p>>>=7),p&15||(m+=4,p>>>=4),p&3||(m+=2,p>>>=2),p&1||m++,m},a.prototype.bitLength=function(){var u=this.words[this.length-1],p=this._countBits(u);return(this.length-1)*26+p};function P(T){for(var u=new Array(T.bitLength()),p=0;p<u.length;p++){var m=p/26|0,y=p%26;u[p]=(T.words[m]&1<<y)>>>y}return u}a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var u=0,p=0;p<this.length;p++){var m=this._zeroBits(this.words[p]);if(u+=m,m!==26)break}return u},a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},a.prototype.toTwos=function(u){return this.negative!==0?this.abs().inotn(u).iaddn(1):this.clone()},a.prototype.fromTwos=function(u){return this.testn(u-1)?this.notn(u).iaddn(1).ineg():this.clone()},a.prototype.isNeg=function(){return this.negative!==0},a.prototype.neg=function(){return this.clone().ineg()},a.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},a.prototype.iuor=function(u){for(;this.length<u.length;)this.words[this.length++]=0;for(var p=0;p<u.length;p++)this.words[p]=this.words[p]|u.words[p];return this.strip()},a.prototype.ior=function(u){return o((this.negative|u.negative)===0),this.iuor(u)},a.prototype.or=function(u){return this.length>u.length?this.clone().ior(u):u.clone().ior(this)},a.prototype.uor=function(u){return this.length>u.length?this.clone().iuor(u):u.clone().iuor(this)},a.prototype.iuand=function(u){var p;this.length>u.length?p=u:p=this;for(var m=0;m<p.length;m++)this.words[m]=this.words[m]&u.words[m];return this.length=p.length,this.strip()},a.prototype.iand=function(u){return o((this.negative|u.negative)===0),this.iuand(u)},a.prototype.and=function(u){return this.length>u.length?this.clone().iand(u):u.clone().iand(this)},a.prototype.uand=function(u){return this.length>u.length?this.clone().iuand(u):u.clone().iuand(this)},a.prototype.iuxor=function(u){var p,m;this.length>u.length?(p=this,m=u):(p=u,m=this);for(var y=0;y<m.length;y++)this.words[y]=p.words[y]^m.words[y];if(this!==p)for(;y<p.length;y++)this.words[y]=p.words[y];return this.length=p.length,this.strip()},a.prototype.ixor=function(u){return o((this.negative|u.negative)===0),this.iuxor(u)},a.prototype.xor=function(u){return this.length>u.length?this.clone().ixor(u):u.clone().ixor(this)},a.prototype.uxor=function(u){return this.length>u.length?this.clone().iuxor(u):u.clone().iuxor(this)},a.prototype.inotn=function(u){o(typeof u=="number"&&u>=0);var p=Math.ceil(u/26)|0,m=u%26;this._expand(p),m>0&&p--;for(var y=0;y<p;y++)this.words[y]=~this.words[y]&67108863;return m>0&&(this.words[y]=~this.words[y]&67108863>>26-m),this.strip()},a.prototype.notn=function(u){return this.clone().inotn(u)},a.prototype.setn=function(u,p){o(typeof u=="number"&&u>=0);var m=u/26|0,y=u%26;return this._expand(m+1),p?this.words[m]=this.words[m]|1<<y:this.words[m]=this.words[m]&~(1<<y),this.strip()},a.prototype.iadd=function(u){var p;if(this.negative!==0&&u.negative===0)return this.negative=0,p=this.isub(u),this.negative^=1,this._normSign();if(this.negative===0&&u.negative!==0)return u.negative=0,p=this.isub(u),u.negative=1,p._normSign();var m,y;this.length>u.length?(m=this,y=u):(m=u,y=this);for(var E=0,$=0;$<y.length;$++)p=(m.words[$]|0)+(y.words[$]|0)+E,this.words[$]=p&67108863,E=p>>>26;for(;E!==0&&$<m.length;$++)p=(m.words[$]|0)+E,this.words[$]=p&67108863,E=p>>>26;if(this.length=m.length,E!==0)this.words[this.length]=E,this.length++;else if(m!==this)for(;$<m.length;$++)this.words[$]=m.words[$];return this},a.prototype.add=function(u){var p;return u.negative!==0&&this.negative===0?(u.negative=0,p=this.sub(u),u.negative^=1,p):u.negative===0&&this.negative!==0?(this.negative=0,p=u.sub(this),this.negative=1,p):this.length>u.length?this.clone().iadd(u):u.clone().iadd(this)},a.prototype.isub=function(u){if(u.negative!==0){u.negative=0;var p=this.iadd(u);return u.negative=1,p._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(u),this.negative=1,this._normSign();var m=this.cmp(u);if(m===0)return this.negative=0,this.length=1,this.words[0]=0,this;var y,E;m>0?(y=this,E=u):(y=u,E=this);for(var $=0,k=0;k<E.length;k++)p=(y.words[k]|0)-(E.words[k]|0)+$,$=p>>26,this.words[k]=p&67108863;for(;$!==0&&k<y.length;k++)p=(y.words[k]|0)+$,$=p>>26,this.words[k]=p&67108863;if($===0&&k<y.length&&y!==this)for(;k<y.length;k++)this.words[k]=y.words[k];return this.length=Math.max(this.length,k),y!==this&&(this.negative=1),this.strip()},a.prototype.sub=function(u){return this.clone().isub(u)};function L(T,u,p){p.negative=u.negative^T.negative;var m=T.length+u.length|0;p.length=m,m=m-1|0;var y=T.words[0]|0,E=u.words[0]|0,$=y*E,k=$&67108863,_=$/67108864|0;p.words[0]=k;for(var d=1;d<m;d++){for(var w=_>>>26,I=_&67108863,C=Math.min(d,u.length-1),V=Math.max(0,d-T.length+1);V<=C;V++){var O=d-V|0;y=T.words[O]|0,E=u.words[V]|0,$=y*E+I,w+=$/67108864|0,I=$&67108863}p.words[d]=I|0,_=w|0}return _!==0?p.words[d]=_|0:p.length--,p.strip()}var F=function(u,p,m){var y=u.words,E=p.words,$=m.words,k=0,_,d,w,I=y[0]|0,C=I&8191,V=I>>>13,O=y[1]|0,j=O&8191,D=O>>>13,Q=y[2]|0,oe=Q&8191,de=Q>>>13,Z=y[3]|0,H=Z&8191,ge=Z>>>13,Me=y[4]|0,ke=Me&8191,Ie=Me>>>13,et=y[5]|0,Fe=et&8191,$e=et>>>13,$t=y[6]|0,He=$t&8191,Ye=$t>>>13,St=y[7]|0,De=St&8191,qe=St>>>13,At=y[8]|0,ze=At&8191,Ge=At>>>13,kt=y[9]|0,se=kt&8191,J=kt>>>13,re=E[0]|0,he=re&8191,ye=re>>>13,Oe=E[1]|0,Ee=Oe&8191,Ue=Oe>>>13,bt=E[2]|0,Le=bt&8191,Ve=bt>>>13,mt=E[3]|0,Ke=mt&8191,Xe=mt>>>13,Mt=E[4]|0,me=Mt&8191,le=Mt>>>13,_e=E[5]|0,be=_e&8191,Se=_e>>>13,Je=E[6]|0,Te=Je&8191,Ne=Je>>>13,ne=E[7]|0,ie=ne&8191,ae=ne>>>13,Y=E[8]|0,fe=Y&8191,ve=Y>>>13,Pe=E[9]|0,xe=Pe&8191,Be=Pe>>>13;m.negative=u.negative^p.negative,m.length=19,_=Math.imul(C,he),d=Math.imul(C,ye),d=d+Math.imul(V,he)|0,w=Math.imul(V,ye);var Qe=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(Qe>>>26)|0,Qe&=67108863,_=Math.imul(j,he),d=Math.imul(j,ye),d=d+Math.imul(D,he)|0,w=Math.imul(D,ye),_=_+Math.imul(C,Ee)|0,d=d+Math.imul(C,Ue)|0,d=d+Math.imul(V,Ee)|0,w=w+Math.imul(V,Ue)|0;var Ze=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(Ze>>>26)|0,Ze&=67108863,_=Math.imul(oe,he),d=Math.imul(oe,ye),d=d+Math.imul(de,he)|0,w=Math.imul(de,ye),_=_+Math.imul(j,Ee)|0,d=d+Math.imul(j,Ue)|0,d=d+Math.imul(D,Ee)|0,w=w+Math.imul(D,Ue)|0,_=_+Math.imul(C,Le)|0,d=d+Math.imul(C,Ve)|0,d=d+Math.imul(V,Le)|0,w=w+Math.imul(V,Ve)|0;var xt=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(xt>>>26)|0,xt&=67108863,_=Math.imul(H,he),d=Math.imul(H,ye),d=d+Math.imul(ge,he)|0,w=Math.imul(ge,ye),_=_+Math.imul(oe,Ee)|0,d=d+Math.imul(oe,Ue)|0,d=d+Math.imul(de,Ee)|0,w=w+Math.imul(de,Ue)|0,_=_+Math.imul(j,Le)|0,d=d+Math.imul(j,Ve)|0,d=d+Math.imul(D,Le)|0,w=w+Math.imul(D,Ve)|0,_=_+Math.imul(C,Ke)|0,d=d+Math.imul(C,Xe)|0,d=d+Math.imul(V,Ke)|0,w=w+Math.imul(V,Xe)|0;var it=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(it>>>26)|0,it&=67108863,_=Math.imul(ke,he),d=Math.imul(ke,ye),d=d+Math.imul(Ie,he)|0,w=Math.imul(Ie,ye),_=_+Math.imul(H,Ee)|0,d=d+Math.imul(H,Ue)|0,d=d+Math.imul(ge,Ee)|0,w=w+Math.imul(ge,Ue)|0,_=_+Math.imul(oe,Le)|0,d=d+Math.imul(oe,Ve)|0,d=d+Math.imul(de,Le)|0,w=w+Math.imul(de,Ve)|0,_=_+Math.imul(j,Ke)|0,d=d+Math.imul(j,Xe)|0,d=d+Math.imul(D,Ke)|0,w=w+Math.imul(D,Xe)|0,_=_+Math.imul(C,me)|0,d=d+Math.imul(C,le)|0,d=d+Math.imul(V,me)|0,w=w+Math.imul(V,le)|0;var dt=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(dt>>>26)|0,dt&=67108863,_=Math.imul(Fe,he),d=Math.imul(Fe,ye),d=d+Math.imul($e,he)|0,w=Math.imul($e,ye),_=_+Math.imul(ke,Ee)|0,d=d+Math.imul(ke,Ue)|0,d=d+Math.imul(Ie,Ee)|0,w=w+Math.imul(Ie,Ue)|0,_=_+Math.imul(H,Le)|0,d=d+Math.imul(H,Ve)|0,d=d+Math.imul(ge,Le)|0,w=w+Math.imul(ge,Ve)|0,_=_+Math.imul(oe,Ke)|0,d=d+Math.imul(oe,Xe)|0,d=d+Math.imul(de,Ke)|0,w=w+Math.imul(de,Xe)|0,_=_+Math.imul(j,me)|0,d=d+Math.imul(j,le)|0,d=d+Math.imul(D,me)|0,w=w+Math.imul(D,le)|0,_=_+Math.imul(C,be)|0,d=d+Math.imul(C,Se)|0,d=d+Math.imul(V,be)|0,w=w+Math.imul(V,Se)|0;var gt=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(gt>>>26)|0,gt&=67108863,_=Math.imul(He,he),d=Math.imul(He,ye),d=d+Math.imul(Ye,he)|0,w=Math.imul(Ye,ye),_=_+Math.imul(Fe,Ee)|0,d=d+Math.imul(Fe,Ue)|0,d=d+Math.imul($e,Ee)|0,w=w+Math.imul($e,Ue)|0,_=_+Math.imul(ke,Le)|0,d=d+Math.imul(ke,Ve)|0,d=d+Math.imul(Ie,Le)|0,w=w+Math.imul(Ie,Ve)|0,_=_+Math.imul(H,Ke)|0,d=d+Math.imul(H,Xe)|0,d=d+Math.imul(ge,Ke)|0,w=w+Math.imul(ge,Xe)|0,_=_+Math.imul(oe,me)|0,d=d+Math.imul(oe,le)|0,d=d+Math.imul(de,me)|0,w=w+Math.imul(de,le)|0,_=_+Math.imul(j,be)|0,d=d+Math.imul(j,Se)|0,d=d+Math.imul(D,be)|0,w=w+Math.imul(D,Se)|0,_=_+Math.imul(C,Te)|0,d=d+Math.imul(C,Ne)|0,d=d+Math.imul(V,Te)|0,w=w+Math.imul(V,Ne)|0;var yt=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(yt>>>26)|0,yt&=67108863,_=Math.imul(De,he),d=Math.imul(De,ye),d=d+Math.imul(qe,he)|0,w=Math.imul(qe,ye),_=_+Math.imul(He,Ee)|0,d=d+Math.imul(He,Ue)|0,d=d+Math.imul(Ye,Ee)|0,w=w+Math.imul(Ye,Ue)|0,_=_+Math.imul(Fe,Le)|0,d=d+Math.imul(Fe,Ve)|0,d=d+Math.imul($e,Le)|0,w=w+Math.imul($e,Ve)|0,_=_+Math.imul(ke,Ke)|0,d=d+Math.imul(ke,Xe)|0,d=d+Math.imul(Ie,Ke)|0,w=w+Math.imul(Ie,Xe)|0,_=_+Math.imul(H,me)|0,d=d+Math.imul(H,le)|0,d=d+Math.imul(ge,me)|0,w=w+Math.imul(ge,le)|0,_=_+Math.imul(oe,be)|0,d=d+Math.imul(oe,Se)|0,d=d+Math.imul(de,be)|0,w=w+Math.imul(de,Se)|0,_=_+Math.imul(j,Te)|0,d=d+Math.imul(j,Ne)|0,d=d+Math.imul(D,Te)|0,w=w+Math.imul(D,Ne)|0,_=_+Math.imul(C,ie)|0,d=d+Math.imul(C,ae)|0,d=d+Math.imul(V,ie)|0,w=w+Math.imul(V,ae)|0;var Et=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(Et>>>26)|0,Et&=67108863,_=Math.imul(ze,he),d=Math.imul(ze,ye),d=d+Math.imul(Ge,he)|0,w=Math.imul(Ge,ye),_=_+Math.imul(De,Ee)|0,d=d+Math.imul(De,Ue)|0,d=d+Math.imul(qe,Ee)|0,w=w+Math.imul(qe,Ue)|0,_=_+Math.imul(He,Le)|0,d=d+Math.imul(He,Ve)|0,d=d+Math.imul(Ye,Le)|0,w=w+Math.imul(Ye,Ve)|0,_=_+Math.imul(Fe,Ke)|0,d=d+Math.imul(Fe,Xe)|0,d=d+Math.imul($e,Ke)|0,w=w+Math.imul($e,Xe)|0,_=_+Math.imul(ke,me)|0,d=d+Math.imul(ke,le)|0,d=d+Math.imul(Ie,me)|0,w=w+Math.imul(Ie,le)|0,_=_+Math.imul(H,be)|0,d=d+Math.imul(H,Se)|0,d=d+Math.imul(ge,be)|0,w=w+Math.imul(ge,Se)|0,_=_+Math.imul(oe,Te)|0,d=d+Math.imul(oe,Ne)|0,d=d+Math.imul(de,Te)|0,w=w+Math.imul(de,Ne)|0,_=_+Math.imul(j,ie)|0,d=d+Math.imul(j,ae)|0,d=d+Math.imul(D,ie)|0,w=w+Math.imul(D,ae)|0,_=_+Math.imul(C,fe)|0,d=d+Math.imul(C,ve)|0,d=d+Math.imul(V,fe)|0,w=w+Math.imul(V,ve)|0;var vt=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(vt>>>26)|0,vt&=67108863,_=Math.imul(se,he),d=Math.imul(se,ye),d=d+Math.imul(J,he)|0,w=Math.imul(J,ye),_=_+Math.imul(ze,Ee)|0,d=d+Math.imul(ze,Ue)|0,d=d+Math.imul(Ge,Ee)|0,w=w+Math.imul(Ge,Ue)|0,_=_+Math.imul(De,Le)|0,d=d+Math.imul(De,Ve)|0,d=d+Math.imul(qe,Le)|0,w=w+Math.imul(qe,Ve)|0,_=_+Math.imul(He,Ke)|0,d=d+Math.imul(He,Xe)|0,d=d+Math.imul(Ye,Ke)|0,w=w+Math.imul(Ye,Xe)|0,_=_+Math.imul(Fe,me)|0,d=d+Math.imul(Fe,le)|0,d=d+Math.imul($e,me)|0,w=w+Math.imul($e,le)|0,_=_+Math.imul(ke,be)|0,d=d+Math.imul(ke,Se)|0,d=d+Math.imul(Ie,be)|0,w=w+Math.imul(Ie,Se)|0,_=_+Math.imul(H,Te)|0,d=d+Math.imul(H,Ne)|0,d=d+Math.imul(ge,Te)|0,w=w+Math.imul(ge,Ne)|0,_=_+Math.imul(oe,ie)|0,d=d+Math.imul(oe,ae)|0,d=d+Math.imul(de,ie)|0,w=w+Math.imul(de,ae)|0,_=_+Math.imul(j,fe)|0,d=d+Math.imul(j,ve)|0,d=d+Math.imul(D,fe)|0,w=w+Math.imul(D,ve)|0,_=_+Math.imul(C,xe)|0,d=d+Math.imul(C,Be)|0,d=d+Math.imul(V,xe)|0,w=w+Math.imul(V,Be)|0;var _t=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(_t>>>26)|0,_t&=67108863,_=Math.imul(se,Ee),d=Math.imul(se,Ue),d=d+Math.imul(J,Ee)|0,w=Math.imul(J,Ue),_=_+Math.imul(ze,Le)|0,d=d+Math.imul(ze,Ve)|0,d=d+Math.imul(Ge,Le)|0,w=w+Math.imul(Ge,Ve)|0,_=_+Math.imul(De,Ke)|0,d=d+Math.imul(De,Xe)|0,d=d+Math.imul(qe,Ke)|0,w=w+Math.imul(qe,Xe)|0,_=_+Math.imul(He,me)|0,d=d+Math.imul(He,le)|0,d=d+Math.imul(Ye,me)|0,w=w+Math.imul(Ye,le)|0,_=_+Math.imul(Fe,be)|0,d=d+Math.imul(Fe,Se)|0,d=d+Math.imul($e,be)|0,w=w+Math.imul($e,Se)|0,_=_+Math.imul(ke,Te)|0,d=d+Math.imul(ke,Ne)|0,d=d+Math.imul(Ie,Te)|0,w=w+Math.imul(Ie,Ne)|0,_=_+Math.imul(H,ie)|0,d=d+Math.imul(H,ae)|0,d=d+Math.imul(ge,ie)|0,w=w+Math.imul(ge,ae)|0,_=_+Math.imul(oe,fe)|0,d=d+Math.imul(oe,ve)|0,d=d+Math.imul(de,fe)|0,w=w+Math.imul(de,ve)|0,_=_+Math.imul(j,xe)|0,d=d+Math.imul(j,Be)|0,d=d+Math.imul(D,xe)|0,w=w+Math.imul(D,Be)|0;var wt=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(wt>>>26)|0,wt&=67108863,_=Math.imul(se,Le),d=Math.imul(se,Ve),d=d+Math.imul(J,Le)|0,w=Math.imul(J,Ve),_=_+Math.imul(ze,Ke)|0,d=d+Math.imul(ze,Xe)|0,d=d+Math.imul(Ge,Ke)|0,w=w+Math.imul(Ge,Xe)|0,_=_+Math.imul(De,me)|0,d=d+Math.imul(De,le)|0,d=d+Math.imul(qe,me)|0,w=w+Math.imul(qe,le)|0,_=_+Math.imul(He,be)|0,d=d+Math.imul(He,Se)|0,d=d+Math.imul(Ye,be)|0,w=w+Math.imul(Ye,Se)|0,_=_+Math.imul(Fe,Te)|0,d=d+Math.imul(Fe,Ne)|0,d=d+Math.imul($e,Te)|0,w=w+Math.imul($e,Ne)|0,_=_+Math.imul(ke,ie)|0,d=d+Math.imul(ke,ae)|0,d=d+Math.imul(Ie,ie)|0,w=w+Math.imul(Ie,ae)|0,_=_+Math.imul(H,fe)|0,d=d+Math.imul(H,ve)|0,d=d+Math.imul(ge,fe)|0,w=w+Math.imul(ge,ve)|0,_=_+Math.imul(oe,xe)|0,d=d+Math.imul(oe,Be)|0,d=d+Math.imul(de,xe)|0,w=w+Math.imul(de,Be)|0;var ct=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(ct>>>26)|0,ct&=67108863,_=Math.imul(se,Ke),d=Math.imul(se,Xe),d=d+Math.imul(J,Ke)|0,w=Math.imul(J,Xe),_=_+Math.imul(ze,me)|0,d=d+Math.imul(ze,le)|0,d=d+Math.imul(Ge,me)|0,w=w+Math.imul(Ge,le)|0,_=_+Math.imul(De,be)|0,d=d+Math.imul(De,Se)|0,d=d+Math.imul(qe,be)|0,w=w+Math.imul(qe,Se)|0,_=_+Math.imul(He,Te)|0,d=d+Math.imul(He,Ne)|0,d=d+Math.imul(Ye,Te)|0,w=w+Math.imul(Ye,Ne)|0,_=_+Math.imul(Fe,ie)|0,d=d+Math.imul(Fe,ae)|0,d=d+Math.imul($e,ie)|0,w=w+Math.imul($e,ae)|0,_=_+Math.imul(ke,fe)|0,d=d+Math.imul(ke,ve)|0,d=d+Math.imul(Ie,fe)|0,w=w+Math.imul(Ie,ve)|0,_=_+Math.imul(H,xe)|0,d=d+Math.imul(H,Be)|0,d=d+Math.imul(ge,xe)|0,w=w+Math.imul(ge,Be)|0;var pt=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(pt>>>26)|0,pt&=67108863,_=Math.imul(se,me),d=Math.imul(se,le),d=d+Math.imul(J,me)|0,w=Math.imul(J,le),_=_+Math.imul(ze,be)|0,d=d+Math.imul(ze,Se)|0,d=d+Math.imul(Ge,be)|0,w=w+Math.imul(Ge,Se)|0,_=_+Math.imul(De,Te)|0,d=d+Math.imul(De,Ne)|0,d=d+Math.imul(qe,Te)|0,w=w+Math.imul(qe,Ne)|0,_=_+Math.imul(He,ie)|0,d=d+Math.imul(He,ae)|0,d=d+Math.imul(Ye,ie)|0,w=w+Math.imul(Ye,ae)|0,_=_+Math.imul(Fe,fe)|0,d=d+Math.imul(Fe,ve)|0,d=d+Math.imul($e,fe)|0,w=w+Math.imul($e,ve)|0,_=_+Math.imul(ke,xe)|0,d=d+Math.imul(ke,Be)|0,d=d+Math.imul(Ie,xe)|0,w=w+Math.imul(Ie,Be)|0;var at=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(at>>>26)|0,at&=67108863,_=Math.imul(se,be),d=Math.imul(se,Se),d=d+Math.imul(J,be)|0,w=Math.imul(J,Se),_=_+Math.imul(ze,Te)|0,d=d+Math.imul(ze,Ne)|0,d=d+Math.imul(Ge,Te)|0,w=w+Math.imul(Ge,Ne)|0,_=_+Math.imul(De,ie)|0,d=d+Math.imul(De,ae)|0,d=d+Math.imul(qe,ie)|0,w=w+Math.imul(qe,ae)|0,_=_+Math.imul(He,fe)|0,d=d+Math.imul(He,ve)|0,d=d+Math.imul(Ye,fe)|0,w=w+Math.imul(Ye,ve)|0,_=_+Math.imul(Fe,xe)|0,d=d+Math.imul(Fe,Be)|0,d=d+Math.imul($e,xe)|0,w=w+Math.imul($e,Be)|0;var lt=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(lt>>>26)|0,lt&=67108863,_=Math.imul(se,Te),d=Math.imul(se,Ne),d=d+Math.imul(J,Te)|0,w=Math.imul(J,Ne),_=_+Math.imul(ze,ie)|0,d=d+Math.imul(ze,ae)|0,d=d+Math.imul(Ge,ie)|0,w=w+Math.imul(Ge,ae)|0,_=_+Math.imul(De,fe)|0,d=d+Math.imul(De,ve)|0,d=d+Math.imul(qe,fe)|0,w=w+Math.imul(qe,ve)|0,_=_+Math.imul(He,xe)|0,d=d+Math.imul(He,Be)|0,d=d+Math.imul(Ye,xe)|0,w=w+Math.imul(Ye,Be)|0;var ht=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(ht>>>26)|0,ht&=67108863,_=Math.imul(se,ie),d=Math.imul(se,ae),d=d+Math.imul(J,ie)|0,w=Math.imul(J,ae),_=_+Math.imul(ze,fe)|0,d=d+Math.imul(ze,ve)|0,d=d+Math.imul(Ge,fe)|0,w=w+Math.imul(Ge,ve)|0,_=_+Math.imul(De,xe)|0,d=d+Math.imul(De,Be)|0,d=d+Math.imul(qe,xe)|0,w=w+Math.imul(qe,Be)|0;var ot=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(ot>>>26)|0,ot&=67108863,_=Math.imul(se,fe),d=Math.imul(se,ve),d=d+Math.imul(J,fe)|0,w=Math.imul(J,ve),_=_+Math.imul(ze,xe)|0,d=d+Math.imul(ze,Be)|0,d=d+Math.imul(Ge,xe)|0,w=w+Math.imul(Ge,Be)|0;var je=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(je>>>26)|0,je&=67108863,_=Math.imul(se,xe),d=Math.imul(se,Be),d=d+Math.imul(J,xe)|0,w=Math.imul(J,Be);var We=(k+_|0)+((d&8191)<<13)|0;return k=(w+(d>>>13)|0)+(We>>>26)|0,We&=67108863,$[0]=Qe,$[1]=Ze,$[2]=xt,$[3]=it,$[4]=dt,$[5]=gt,$[6]=yt,$[7]=Et,$[8]=vt,$[9]=_t,$[10]=wt,$[11]=ct,$[12]=pt,$[13]=at,$[14]=lt,$[15]=ht,$[16]=ot,$[17]=je,$[18]=We,k!==0&&($[19]=k,m.length++),m};Math.imul||(F=L);function U(T,u,p){p.negative=u.negative^T.negative,p.length=T.length+u.length;for(var m=0,y=0,E=0;E<p.length-1;E++){var $=y;y=0;for(var k=m&67108863,_=Math.min(E,u.length-1),d=Math.max(0,E-T.length+1);d<=_;d++){var w=E-d,I=T.words[w]|0,C=u.words[d]|0,V=I*C,O=V&67108863;$=$+(V/67108864|0)|0,O=O+k|0,k=O&67108863,$=$+(O>>>26)|0,y+=$>>>26,$&=67108863}p.words[E]=k,m=$,$=y}return m!==0?p.words[E]=m:p.length--,p.strip()}function q(T,u,p){var m=new X;return m.mulp(T,u,p)}a.prototype.mulTo=function(u,p){var m,y=this.length+u.length;return this.length===10&&u.length===10?m=F(this,u,p):y<63?m=L(this,u,p):y<1024?m=U(this,u,p):m=q(this,u,p),m};function X(T,u){this.x=T,this.y=u}X.prototype.makeRBT=function(u){for(var p=new Array(u),m=a.prototype._countBits(u)-1,y=0;y<u;y++)p[y]=this.revBin(y,m,u);return p},X.prototype.revBin=function(u,p,m){if(u===0||u===m-1)return u;for(var y=0,E=0;E<p;E++)y|=(u&1)<<p-E-1,u>>=1;return y},X.prototype.permute=function(u,p,m,y,E,$){for(var k=0;k<$;k++)y[k]=p[u[k]],E[k]=m[u[k]]},X.prototype.transform=function(u,p,m,y,E,$){this.permute($,u,p,m,y,E);for(var k=1;k<E;k<<=1)for(var _=k<<1,d=Math.cos(2*Math.PI/_),w=Math.sin(2*Math.PI/_),I=0;I<E;I+=_)for(var C=d,V=w,O=0;O<k;O++){var j=m[I+O],D=y[I+O],Q=m[I+O+k],oe=y[I+O+k],de=C*Q-V*oe;oe=C*oe+V*Q,Q=de,m[I+O]=j+Q,y[I+O]=D+oe,m[I+O+k]=j-Q,y[I+O+k]=D-oe,O!==_&&(de=d*C-w*V,V=d*V+w*C,C=de)}},X.prototype.guessLen13b=function(u,p){var m=Math.max(p,u)|1,y=m&1,E=0;for(m=m/2|0;m;m=m>>>1)E++;return 1<<E+1+y},X.prototype.conjugate=function(u,p,m){if(!(m<=1))for(var y=0;y<m/2;y++){var E=u[y];u[y]=u[m-y-1],u[m-y-1]=E,E=p[y],p[y]=-p[m-y-1],p[m-y-1]=-E}},X.prototype.normalize13b=function(u,p){for(var m=0,y=0;y<p/2;y++){var E=Math.round(u[2*y+1]/p)*8192+Math.round(u[2*y]/p)+m;u[y]=E&67108863,E<67108864?m=0:m=E/67108864|0}return u},X.prototype.convert13b=function(u,p,m,y){for(var E=0,$=0;$<p;$++)E=E+(u[$]|0),m[2*$]=E&8191,E=E>>>13,m[2*$+1]=E&8191,E=E>>>13;for($=2*p;$<y;++$)m[$]=0;o(E===0),o((E&-8192)===0)},X.prototype.stub=function(u){for(var p=new Array(u),m=0;m<u;m++)p[m]=0;return p},X.prototype.mulp=function(u,p,m){var y=2*this.guessLen13b(u.length,p.length),E=this.makeRBT(y),$=this.stub(y),k=new Array(y),_=new Array(y),d=new Array(y),w=new Array(y),I=new Array(y),C=new Array(y),V=m.words;V.length=y,this.convert13b(u.words,u.length,k,y),this.convert13b(p.words,p.length,w,y),this.transform(k,$,_,d,y,E),this.transform(w,$,I,C,y,E);for(var O=0;O<y;O++){var j=_[O]*I[O]-d[O]*C[O];d[O]=_[O]*C[O]+d[O]*I[O],_[O]=j}return this.conjugate(_,d,y),this.transform(_,d,V,$,y,E),this.conjugate(V,$,y),this.normalize13b(V,y),m.negative=u.negative^p.negative,m.length=u.length+p.length,m.strip()},a.prototype.mul=function(u){var p=new a(null);return p.words=new Array(this.length+u.length),this.mulTo(u,p)},a.prototype.mulf=function(u){var p=new a(null);return p.words=new Array(this.length+u.length),q(this,u,p)},a.prototype.imul=function(u){return this.clone().mulTo(u,this)},a.prototype.imuln=function(u){o(typeof u=="number"),o(u<67108864);for(var p=0,m=0;m<this.length;m++){var y=(this.words[m]|0)*u,E=(y&67108863)+(p&67108863);p>>=26,p+=y/67108864|0,p+=E>>>26,this.words[m]=E&67108863}return p!==0&&(this.words[m]=p,this.length++),this},a.prototype.muln=function(u){return this.clone().imuln(u)},a.prototype.sqr=function(){return this.mul(this)},a.prototype.isqr=function(){return this.imul(this.clone())},a.prototype.pow=function(u){var p=P(u);if(p.length===0)return new a(1);for(var m=this,y=0;y<p.length&&p[y]===0;y++,m=m.sqr());if(++y<p.length)for(var E=m.sqr();y<p.length;y++,E=E.sqr())p[y]!==0&&(m=m.mul(E));return m},a.prototype.iushln=function(u){o(typeof u=="number"&&u>=0);var p=u%26,m=(u-p)/26,y=67108863>>>26-p<<26-p,E;if(p!==0){var $=0;for(E=0;E<this.length;E++){var k=this.words[E]&y,_=(this.words[E]|0)-k<<p;this.words[E]=_|$,$=k>>>26-p}$&&(this.words[E]=$,this.length++)}if(m!==0){for(E=this.length-1;E>=0;E--)this.words[E+m]=this.words[E];for(E=0;E<m;E++)this.words[E]=0;this.length+=m}return this.strip()},a.prototype.ishln=function(u){return o(this.negative===0),this.iushln(u)},a.prototype.iushrn=function(u,p,m){o(typeof u=="number"&&u>=0);var y;p?y=(p-p%26)/26:y=0;var E=u%26,$=Math.min((u-E)/26,this.length),k=67108863^67108863>>>E<<E,_=m;if(y-=$,y=Math.max(0,y),_){for(var d=0;d<$;d++)_.words[d]=this.words[d];_.length=$}if($!==0)if(this.length>$)for(this.length-=$,d=0;d<this.length;d++)this.words[d]=this.words[d+$];else this.words[0]=0,this.length=1;var w=0;for(d=this.length-1;d>=0&&(w!==0||d>=y);d--){var I=this.words[d]|0;this.words[d]=w<<26-E|I>>>E,w=I&k}return _&&w!==0&&(_.words[_.length++]=w),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},a.prototype.ishrn=function(u,p,m){return o(this.negative===0),this.iushrn(u,p,m)},a.prototype.shln=function(u){return this.clone().ishln(u)},a.prototype.ushln=function(u){return this.clone().iushln(u)},a.prototype.shrn=function(u){return this.clone().ishrn(u)},a.prototype.ushrn=function(u){return this.clone().iushrn(u)},a.prototype.testn=function(u){o(typeof u=="number"&&u>=0);var p=u%26,m=(u-p)/26,y=1<<p;if(this.length<=m)return!1;var E=this.words[m];return!!(E&y)},a.prototype.imaskn=function(u){o(typeof u=="number"&&u>=0);var p=u%26,m=(u-p)/26;if(o(this.negative===0,"imaskn works only with positive numbers"),this.length<=m)return this;if(p!==0&&m++,this.length=Math.min(m,this.length),p!==0){var y=67108863^67108863>>>p<<p;this.words[this.length-1]&=y}return this.strip()},a.prototype.maskn=function(u){return this.clone().imaskn(u)},a.prototype.iaddn=function(u){return o(typeof u=="number"),o(u<67108864),u<0?this.isubn(-u):this.negative!==0?this.length===1&&(this.words[0]|0)<u?(this.words[0]=u-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(u),this.negative=1,this):this._iaddn(u)},a.prototype._iaddn=function(u){this.words[0]+=u;for(var p=0;p<this.length&&this.words[p]>=67108864;p++)this.words[p]-=67108864,p===this.length-1?this.words[p+1]=1:this.words[p+1]++;return this.length=Math.max(this.length,p+1),this},a.prototype.isubn=function(u){if(o(typeof u=="number"),o(u<67108864),u<0)return this.iaddn(-u);if(this.negative!==0)return this.negative=0,this.iaddn(u),this.negative=1,this;if(this.words[0]-=u,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var p=0;p<this.length&&this.words[p]<0;p++)this.words[p]+=67108864,this.words[p+1]-=1;return this.strip()},a.prototype.addn=function(u){return this.clone().iaddn(u)},a.prototype.subn=function(u){return this.clone().isubn(u)},a.prototype.iabs=function(){return this.negative=0,this},a.prototype.abs=function(){return this.clone().iabs()},a.prototype._ishlnsubmul=function(u,p,m){var y=u.length+m,E;this._expand(y);var $,k=0;for(E=0;E<u.length;E++){$=(this.words[E+m]|0)+k;var _=(u.words[E]|0)*p;$-=_&67108863,k=($>>26)-(_/67108864|0),this.words[E+m]=$&67108863}for(;E<this.length-m;E++)$=(this.words[E+m]|0)+k,k=$>>26,this.words[E+m]=$&67108863;if(k===0)return this.strip();for(o(k===-1),k=0,E=0;E<this.length;E++)$=-(this.words[E]|0)+k,k=$>>26,this.words[E]=$&67108863;return this.negative=1,this.strip()},a.prototype._wordDiv=function(u,p){var m=this.length-u.length,y=this.clone(),E=u,$=E.words[E.length-1]|0,k=this._countBits($);m=26-k,m!==0&&(E=E.ushln(m),y.iushln(m),$=E.words[E.length-1]|0);var _=y.length-E.length,d;if(p!=="mod"){d=new a(null),d.length=_+1,d.words=new Array(d.length);for(var w=0;w<d.length;w++)d.words[w]=0}var I=y.clone()._ishlnsubmul(E,1,_);I.negative===0&&(y=I,d&&(d.words[_]=1));for(var C=_-1;C>=0;C--){var V=(y.words[E.length+C]|0)*67108864+(y.words[E.length+C-1]|0);for(V=Math.min(V/$|0,67108863),y._ishlnsubmul(E,V,C);y.negative!==0;)V--,y.negative=0,y._ishlnsubmul(E,1,C),y.isZero()||(y.negative^=1);d&&(d.words[C]=V)}return d&&d.strip(),y.strip(),p!=="div"&&m!==0&&y.iushrn(m),{div:d||null,mod:y}},a.prototype.divmod=function(u,p,m){if(o(!u.isZero()),this.isZero())return{div:new a(0),mod:new a(0)};var y,E,$;return this.negative!==0&&u.negative===0?($=this.neg().divmod(u,p),p!=="mod"&&(y=$.div.neg()),p!=="div"&&(E=$.mod.neg(),m&&E.negative!==0&&E.iadd(u)),{div:y,mod:E}):this.negative===0&&u.negative!==0?($=this.divmod(u.neg(),p),p!=="mod"&&(y=$.div.neg()),{div:y,mod:$.mod}):this.negative&u.negative?($=this.neg().divmod(u.neg(),p),p!=="div"&&(E=$.mod.neg(),m&&E.negative!==0&&E.isub(u)),{div:$.div,mod:E}):u.length>this.length||this.cmp(u)<0?{div:new a(0),mod:this}:u.length===1?p==="div"?{div:this.divn(u.words[0]),mod:null}:p==="mod"?{div:null,mod:new a(this.modn(u.words[0]))}:{div:this.divn(u.words[0]),mod:new a(this.modn(u.words[0]))}:this._wordDiv(u,p)},a.prototype.div=function(u){return this.divmod(u,"div",!1).div},a.prototype.mod=function(u){return this.divmod(u,"mod",!1).mod},a.prototype.umod=function(u){return this.divmod(u,"mod",!0).mod},a.prototype.divRound=function(u){var p=this.divmod(u);if(p.mod.isZero())return p.div;var m=p.div.negative!==0?p.mod.isub(u):p.mod,y=u.ushrn(1),E=u.andln(1),$=m.cmp(y);return $<0||E===1&&$===0?p.div:p.div.negative!==0?p.div.isubn(1):p.div.iaddn(1)},a.prototype.modn=function(u){o(u<=67108863);for(var p=(1<<26)%u,m=0,y=this.length-1;y>=0;y--)m=(p*m+(this.words[y]|0))%u;return m},a.prototype.idivn=function(u){o(u<=67108863);for(var p=0,m=this.length-1;m>=0;m--){var y=(this.words[m]|0)+p*67108864;this.words[m]=y/u|0,p=y%u}return this.strip()},a.prototype.divn=function(u){return this.clone().idivn(u)},a.prototype.egcd=function(u){o(u.negative===0),o(!u.isZero());var p=this,m=u.clone();p.negative!==0?p=p.umod(u):p=p.clone();for(var y=new a(1),E=new a(0),$=new a(0),k=new a(1),_=0;p.isEven()&&m.isEven();)p.iushrn(1),m.iushrn(1),++_;for(var d=m.clone(),w=p.clone();!p.isZero();){for(var I=0,C=1;!(p.words[0]&C)&&I<26;++I,C<<=1);if(I>0)for(p.iushrn(I);I-- >0;)(y.isOdd()||E.isOdd())&&(y.iadd(d),E.isub(w)),y.iushrn(1),E.iushrn(1);for(var V=0,O=1;!(m.words[0]&O)&&V<26;++V,O<<=1);if(V>0)for(m.iushrn(V);V-- >0;)($.isOdd()||k.isOdd())&&($.iadd(d),k.isub(w)),$.iushrn(1),k.iushrn(1);p.cmp(m)>=0?(p.isub(m),y.isub($),E.isub(k)):(m.isub(p),$.isub(y),k.isub(E))}return{a:$,b:k,gcd:m.iushln(_)}},a.prototype._invmp=function(u){o(u.negative===0),o(!u.isZero());var p=this,m=u.clone();p.negative!==0?p=p.umod(u):p=p.clone();for(var y=new a(1),E=new a(0),$=m.clone();p.cmpn(1)>0&&m.cmpn(1)>0;){for(var k=0,_=1;!(p.words[0]&_)&&k<26;++k,_<<=1);if(k>0)for(p.iushrn(k);k-- >0;)y.isOdd()&&y.iadd($),y.iushrn(1);for(var d=0,w=1;!(m.words[0]&w)&&d<26;++d,w<<=1);if(d>0)for(m.iushrn(d);d-- >0;)E.isOdd()&&E.iadd($),E.iushrn(1);p.cmp(m)>=0?(p.isub(m),y.isub(E)):(m.isub(p),E.isub(y))}var I;return p.cmpn(1)===0?I=y:I=E,I.cmpn(0)<0&&I.iadd(u),I},a.prototype.gcd=function(u){if(this.isZero())return u.abs();if(u.isZero())return this.abs();var p=this.clone(),m=u.clone();p.negative=0,m.negative=0;for(var y=0;p.isEven()&&m.isEven();y++)p.iushrn(1),m.iushrn(1);do{for(;p.isEven();)p.iushrn(1);for(;m.isEven();)m.iushrn(1);var E=p.cmp(m);if(E<0){var $=p;p=m,m=$}else if(E===0||m.cmpn(1)===0)break;p.isub(m)}while(!0);return m.iushln(y)},a.prototype.invm=function(u){return this.egcd(u).a.umod(u)},a.prototype.isEven=function(){return(this.words[0]&1)===0},a.prototype.isOdd=function(){return(this.words[0]&1)===1},a.prototype.andln=function(u){return this.words[0]&u},a.prototype.bincn=function(u){o(typeof u=="number");var p=u%26,m=(u-p)/26,y=1<<p;if(this.length<=m)return this._expand(m+1),this.words[m]|=y,this;for(var E=y,$=m;E!==0&&$<this.length;$++){var k=this.words[$]|0;k+=E,E=k>>>26,k&=67108863,this.words[$]=k}return E!==0&&(this.words[$]=E,this.length++),this},a.prototype.isZero=function(){return this.length===1&&this.words[0]===0},a.prototype.cmpn=function(u){var p=u<0;if(this.negative!==0&&!p)return-1;if(this.negative===0&&p)return 1;this.strip();var m;if(this.length>1)m=1;else{p&&(u=-u),o(u<=67108863,"Number is too big");var y=this.words[0]|0;m=y===u?0:y<u?-1:1}return this.negative!==0?-m|0:m},a.prototype.cmp=function(u){if(this.negative!==0&&u.negative===0)return-1;if(this.negative===0&&u.negative!==0)return 1;var p=this.ucmp(u);return this.negative!==0?-p|0:p},a.prototype.ucmp=function(u){if(this.length>u.length)return 1;if(this.length<u.length)return-1;for(var p=0,m=this.length-1;m>=0;m--){var y=this.words[m]|0,E=u.words[m]|0;if(y!==E){y<E?p=-1:y>E&&(p=1);break}}return p},a.prototype.gtn=function(u){return this.cmpn(u)===1},a.prototype.gt=function(u){return this.cmp(u)===1},a.prototype.gten=function(u){return this.cmpn(u)>=0},a.prototype.gte=function(u){return this.cmp(u)>=0},a.prototype.ltn=function(u){return this.cmpn(u)===-1},a.prototype.lt=function(u){return this.cmp(u)===-1},a.prototype.lten=function(u){return this.cmpn(u)<=0},a.prototype.lte=function(u){return this.cmp(u)<=0},a.prototype.eqn=function(u){return this.cmpn(u)===0},a.prototype.eq=function(u){return this.cmp(u)===0},a.red=function(u){return new pe(u)},a.prototype.toRed=function(u){return o(!this.red,"Already a number in reduction context"),o(this.negative===0,"red works only with positives"),u.convertTo(this)._forceRed(u)},a.prototype.fromRed=function(){return o(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},a.prototype._forceRed=function(u){return this.red=u,this},a.prototype.forceRed=function(u){return o(!this.red,"Already a number in reduction context"),this._forceRed(u)},a.prototype.redAdd=function(u){return o(this.red,"redAdd works only with red numbers"),this.red.add(this,u)},a.prototype.redIAdd=function(u){return o(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,u)},a.prototype.redSub=function(u){return o(this.red,"redSub works only with red numbers"),this.red.sub(this,u)},a.prototype.redISub=function(u){return o(this.red,"redISub works only with red numbers"),this.red.isub(this,u)},a.prototype.redShl=function(u){return o(this.red,"redShl works only with red numbers"),this.red.shl(this,u)},a.prototype.redMul=function(u){return o(this.red,"redMul works only with red numbers"),this.red._verify2(this,u),this.red.mul(this,u)},a.prototype.redIMul=function(u){return o(this.red,"redMul works only with red numbers"),this.red._verify2(this,u),this.red.imul(this,u)},a.prototype.redSqr=function(){return o(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},a.prototype.redISqr=function(){return o(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},a.prototype.redSqrt=function(){return o(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},a.prototype.redInvm=function(){return o(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},a.prototype.redNeg=function(){return o(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},a.prototype.redPow=function(u){return o(this.red&&!u.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,u)};var ee={k256:null,p224:null,p192:null,p25519:null};function te(T,u){this.name=T,this.p=new a(u,16),this.n=this.p.bitLength(),this.k=new a(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}te.prototype._tmp=function(){var u=new a(null);return u.words=new Array(Math.ceil(this.n/13)),u},te.prototype.ireduce=function(u){var p=u,m;do this.split(p,this.tmp),p=this.imulK(p),p=p.iadd(this.tmp),m=p.bitLength();while(m>this.n);var y=m<this.n?-1:p.ucmp(this.p);return y===0?(p.words[0]=0,p.length=1):y>0?p.isub(this.p):p.strip!==void 0?p.strip():p._strip(),p},te.prototype.split=function(u,p){u.iushrn(this.n,0,p)},te.prototype.imulK=function(u){return u.imul(this.k)};function ce(){te.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}c(ce,te),ce.prototype.split=function(u,p){for(var m=4194303,y=Math.min(u.length,9),E=0;E<y;E++)p.words[E]=u.words[E];if(p.length=y,u.length<=9){u.words[0]=0,u.length=1;return}var $=u.words[9];for(p.words[p.length++]=$&m,E=10;E<u.length;E++){var k=u.words[E]|0;u.words[E-10]=(k&m)<<4|$>>>22,$=k}$>>>=22,u.words[E-10]=$,$===0&&u.length>10?u.length-=10:u.length-=9},ce.prototype.imulK=function(u){u.words[u.length]=0,u.words[u.length+1]=0,u.length+=2;for(var p=0,m=0;m<u.length;m++){var y=u.words[m]|0;p+=y*977,u.words[m]=p&67108863,p=y*64+(p/67108864|0)}return u.words[u.length-1]===0&&(u.length--,u.words[u.length-1]===0&&u.length--),u};function ue(){te.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}c(ue,te);function Ae(){te.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}c(Ae,te);function we(){te.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}c(we,te),we.prototype.imulK=function(u){for(var p=0,m=0;m<u.length;m++){var y=(u.words[m]|0)*19+p,E=y&67108863;y>>>=26,u.words[m]=E,p=y}return p!==0&&(u.words[u.length++]=p),u},a._prime=function(u){if(ee[u])return ee[u];var p;if(u==="k256")p=new ce;else if(u==="p224")p=new ue;else if(u==="p192")p=new Ae;else if(u==="p25519")p=new we;else throw new Error("Unknown prime "+u);return ee[u]=p,p};function pe(T){if(typeof T=="string"){var u=a._prime(T);this.m=u.p,this.prime=u}else o(T.gtn(1),"modulus must be greater than 1"),this.m=T,this.prime=null}pe.prototype._verify1=function(u){o(u.negative===0,"red works only with positives"),o(u.red,"red works only with red numbers")},pe.prototype._verify2=function(u,p){o((u.negative|p.negative)===0,"red works only with positives"),o(u.red&&u.red===p.red,"red works only with red numbers")},pe.prototype.imod=function(u){return this.prime?this.prime.ireduce(u)._forceRed(this):u.umod(this.m)._forceRed(this)},pe.prototype.neg=function(u){return u.isZero()?u.clone():this.m.sub(u)._forceRed(this)},pe.prototype.add=function(u,p){this._verify2(u,p);var m=u.add(p);return m.cmp(this.m)>=0&&m.isub(this.m),m._forceRed(this)},pe.prototype.iadd=function(u,p){this._verify2(u,p);var m=u.iadd(p);return m.cmp(this.m)>=0&&m.isub(this.m),m},pe.prototype.sub=function(u,p){this._verify2(u,p);var m=u.sub(p);return m.cmpn(0)<0&&m.iadd(this.m),m._forceRed(this)},pe.prototype.isub=function(u,p){this._verify2(u,p);var m=u.isub(p);return m.cmpn(0)<0&&m.iadd(this.m),m},pe.prototype.shl=function(u,p){return this._verify1(u),this.imod(u.ushln(p))},pe.prototype.imul=function(u,p){return this._verify2(u,p),this.imod(u.imul(p))},pe.prototype.mul=function(u,p){return this._verify2(u,p),this.imod(u.mul(p))},pe.prototype.isqr=function(u){return this.imul(u,u.clone())},pe.prototype.sqr=function(u){return this.mul(u,u)},pe.prototype.sqrt=function(u){if(u.isZero())return u.clone();var p=this.m.andln(3);if(o(p%2===1),p===3){var m=this.m.add(new a(1)).iushrn(2);return this.pow(u,m)}for(var y=this.m.subn(1),E=0;!y.isZero()&&y.andln(1)===0;)E++,y.iushrn(1);o(!y.isZero());var $=new a(1).toRed(this),k=$.redNeg(),_=this.m.subn(1).iushrn(1),d=this.m.bitLength();for(d=new a(2*d*d).toRed(this);this.pow(d,_).cmp(k)!==0;)d.redIAdd(k);for(var w=this.pow(d,y),I=this.pow(u,y.addn(1).iushrn(1)),C=this.pow(u,y),V=E;C.cmp($)!==0;){for(var O=C,j=0;O.cmp($)!==0;j++)O=O.redSqr();o(j<V);var D=this.pow(w,new a(1).iushln(V-j-1));I=I.redMul(D),w=D.redSqr(),C=C.redMul(w),V=j}return I},pe.prototype.invm=function(u){var p=u._invmp(this.m);return p.negative!==0?(p.negative=0,this.imod(p).redNeg()):this.imod(p)},pe.prototype.pow=function(u,p){if(p.isZero())return new a(1).toRed(this);if(p.cmpn(1)===0)return u.clone();var m=4,y=new Array(1<<m);y[0]=new a(1).toRed(this),y[1]=u;for(var E=2;E<y.length;E++)y[E]=this.mul(y[E-1],u);var $=y[0],k=0,_=0,d=p.bitLength()%26;for(d===0&&(d=26),E=p.length-1;E>=0;E--){for(var w=p.words[E],I=d-1;I>=0;I--){var C=w>>I&1;if($!==y[0]&&($=this.sqr($)),C===0&&k===0){_=0;continue}k<<=1,k|=C,_++,!(_!==m&&(E!==0||I!==0))&&($=this.mul($,y[k]),_=0,k=0)}d=26}return $},pe.prototype.convertTo=function(u){var p=u.umod(this.m);return p===u?p.clone():p},pe.prototype.convertFrom=function(u){var p=u.clone();return p.red=null,p},a.mont=function(u){return new Ce(u)};function Ce(T){pe.call(this,T),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new a(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}c(Ce,pe),Ce.prototype.convertTo=function(u){return this.imod(u.ushln(this.shift))},Ce.prototype.convertFrom=function(u){var p=this.imod(u.mul(this.rinv));return p.red=null,p},Ce.prototype.imul=function(u,p){if(u.isZero()||p.isZero())return u.words[0]=0,u.length=1,u;var m=u.imul(p),y=m.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),E=m.isub(y).iushrn(this.shift),$=E;return E.cmp(this.m)>=0?$=E.isub(this.m):E.cmpn(0)<0&&($=E.iadd(this.m)),$._forceRed(this)},Ce.prototype.mul=function(u,p){if(u.isZero()||p.isZero())return new a(0)._forceRed(this);var m=u.mul(p),y=m.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),E=m.isub(y).iushrn(this.shift),$=E;return E.cmp(this.m)>=0?$=E.isub(this.m):E.cmpn(0)<0&&($=E.iadd(this.m)),$._forceRed(this)},Ce.prototype.invm=function(u){var p=this.imod(u._invmp(this.m).mul(this.r2));return p._forceRed(this)}})(t,commonjsGlobal)})(bn$3);var bnExports$3=bn$3.exports,utils$c={};(function(t){var e=t;function n(a,l){if(Array.isArray(a))return a.slice();if(!a)return[];var b=[];if(typeof a!="string"){for(var v=0;v<a.length;v++)b[v]=a[v]|0;return b}if(l==="hex"){a=a.replace(/[^a-z0-9]+/ig,""),a.length%2!==0&&(a="0"+a);for(var v=0;v<a.length;v+=2)b.push(parseInt(a[v]+a[v+1],16))}else for(var v=0;v<a.length;v++){var A=a.charCodeAt(v),S=A>>8,M=A&255;S?b.push(S,M):b.push(M)}return b}e.toArray=n;function o(a){return a.length===1?"0"+a:a}e.zero2=o;function c(a){for(var l="",b=0;b<a.length;b++)l+=o(a[b].toString(16));return l}e.toHex=c,e.encode=function(l,b){return b==="hex"?c(l):l}})(utils$c);(function(t){var e=t,n=bnExports$3,o=minimalisticAssert$1,c=utils$c;e.assert=o,e.toArray=c.toArray,e.zero2=c.zero2,e.toHex=c.toHex,e.encode=c.encode;function a(S,M,B){var P=new Array(Math.max(S.bitLength(),B)+1),L;for(L=0;L<P.length;L+=1)P[L]=0;var F=1<<M+1,U=S.clone();for(L=0;L<P.length;L++){var q,X=U.andln(F-1);U.isOdd()?(X>(F>>1)-1?q=(F>>1)-X:q=X,U.isubn(q)):q=0,P[L]=q,U.iushrn(1)}return P}e.getNAF=a;function l(S,M){var B=[[],[]];S=S.clone(),M=M.clone();for(var P=0,L=0,F;S.cmpn(-P)>0||M.cmpn(-L)>0;){var U=S.andln(3)+P&3,q=M.andln(3)+L&3;U===3&&(U=-1),q===3&&(q=-1);var X;U&1?(F=S.andln(7)+P&7,(F===3||F===5)&&q===2?X=-U:X=U):X=0,B[0].push(X);var ee;q&1?(F=M.andln(7)+L&7,(F===3||F===5)&&U===2?ee=-q:ee=q):ee=0,B[1].push(ee),2*P===X+1&&(P=1-P),2*L===ee+1&&(L=1-L),S.iushrn(1),M.iushrn(1)}return B}e.getJSF=l;function b(S,M,B){var P="_"+M;S.prototype[M]=function(){return this[P]!==void 0?this[P]:this[P]=B.call(this)}}e.cachedProperty=b;function v(S){return typeof S=="string"?e.toArray(S,"hex"):S}e.parseBytes=v;function A(S){return new n(S,"hex","le")}e.intFromLE=A})(utils$d);var curve={},BN$9=bnExports$3,utils$b=utils$d,getNAF=utils$b.getNAF,getJSF=utils$b.getJSF,assert$a=utils$b.assert;function BaseCurve(t,e){this.type=t,this.p=new BN$9(e.p,16),this.red=e.prime?BN$9.red(e.prime):BN$9.mont(this.p),this.zero=new BN$9(0).toRed(this.red),this.one=new BN$9(1).toRed(this.red),this.two=new BN$9(2).toRed(this.red),this.n=e.n&&new BN$9(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var n=this.n&&this.p.div(this.n);!n||n.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var base$3=BaseCurve;BaseCurve.prototype.point=function(){throw new Error("Not implemented")};BaseCurve.prototype.validate=function(){throw new Error("Not implemented")};BaseCurve.prototype._fixedNafMul=function(e,n){assert$a(e.precomputed);var o=e._getDoubles(),c=getNAF(n,1,this._bitLength),a=(1<<o.step+1)-(o.step%2===0?2:1);a/=3;var l=[],b,v;for(b=0;b<c.length;b+=o.step){v=0;for(var A=b+o.step-1;A>=b;A--)v=(v<<1)+c[A];l.push(v)}for(var S=this.jpoint(null,null,null),M=this.jpoint(null,null,null),B=a;B>0;B--){for(b=0;b<l.length;b++)v=l[b],v===B?M=M.mixedAdd(o.points[b]):v===-B&&(M=M.mixedAdd(o.points[b].neg()));S=S.add(M)}return S.toP()};BaseCurve.prototype._wnafMul=function(e,n){var o=4,c=e._getNAFPoints(o);o=c.wnd;for(var a=c.points,l=getNAF(n,o,this._bitLength),b=this.jpoint(null,null,null),v=l.length-1;v>=0;v--){for(var A=0;v>=0&&l[v]===0;v--)A++;if(v>=0&&A++,b=b.dblp(A),v<0)break;var S=l[v];assert$a(S!==0),e.type==="affine"?S>0?b=b.mixedAdd(a[S-1>>1]):b=b.mixedAdd(a[-S-1>>1].neg()):S>0?b=b.add(a[S-1>>1]):b=b.add(a[-S-1>>1].neg())}return e.type==="affine"?b.toP():b};BaseCurve.prototype._wnafMulAdd=function(e,n,o,c,a){var l=this._wnafT1,b=this._wnafT2,v=this._wnafT3,A=0,S,M,B;for(S=0;S<c;S++){B=n[S];var P=B._getNAFPoints(e);l[S]=P.wnd,b[S]=P.points}for(S=c-1;S>=1;S-=2){var L=S-1,F=S;if(l[L]!==1||l[F]!==1){v[L]=getNAF(o[L],l[L],this._bitLength),v[F]=getNAF(o[F],l[F],this._bitLength),A=Math.max(v[L].length,A),A=Math.max(v[F].length,A);continue}var U=[n[L],null,null,n[F]];n[L].y.cmp(n[F].y)===0?(U[1]=n[L].add(n[F]),U[2]=n[L].toJ().mixedAdd(n[F].neg())):n[L].y.cmp(n[F].y.redNeg())===0?(U[1]=n[L].toJ().mixedAdd(n[F]),U[2]=n[L].add(n[F].neg())):(U[1]=n[L].toJ().mixedAdd(n[F]),U[2]=n[L].toJ().mixedAdd(n[F].neg()));var q=[-3,-1,-5,-7,0,7,5,1,3],X=getJSF(o[L],o[F]);for(A=Math.max(X[0].length,A),v[L]=new Array(A),v[F]=new Array(A),M=0;M<A;M++){var ee=X[0][M]|0,te=X[1][M]|0;v[L][M]=q[(ee+1)*3+(te+1)],v[F][M]=0,b[L]=U}}var ce=this.jpoint(null,null,null),ue=this._wnafT4;for(S=A;S>=0;S--){for(var Ae=0;S>=0;){var we=!0;for(M=0;M<c;M++)ue[M]=v[M][S]|0,ue[M]!==0&&(we=!1);if(!we)break;Ae++,S--}if(S>=0&&Ae++,ce=ce.dblp(Ae),S<0)break;for(M=0;M<c;M++){var pe=ue[M];pe!==0&&(pe>0?B=b[M][pe-1>>1]:pe<0&&(B=b[M][-pe-1>>1].neg()),B.type==="affine"?ce=ce.mixedAdd(B):ce=ce.add(B))}}for(S=0;S<c;S++)b[S]=null;return a?ce:ce.toP()};function BasePoint(t,e){this.curve=t,this.type=e,this.precomputed=null}BaseCurve.BasePoint=BasePoint;BasePoint.prototype.eq=function(){throw new Error("Not implemented")};BasePoint.prototype.validate=function(){return this.curve.validate(this)};BaseCurve.prototype.decodePoint=function(e,n){e=utils$b.toArray(e,n);var o=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*o){e[0]===6?assert$a(e[e.length-1]%2===0):e[0]===7&&assert$a(e[e.length-1]%2===1);var c=this.point(e.slice(1,1+o),e.slice(1+o,1+2*o));return c}else if((e[0]===2||e[0]===3)&&e.length-1===o)return this.pointFromX(e.slice(1,1+o),e[0]===3);throw new Error("Unknown point format")};BasePoint.prototype.encodeCompressed=function(e){return this.encode(e,!0)};BasePoint.prototype._encode=function(e){var n=this.curve.p.byteLength(),o=this.getX().toArray("be",n);return e?[this.getY().isEven()?2:3].concat(o):[4].concat(o,this.getY().toArray("be",n))};BasePoint.prototype.encode=function(e,n){return utils$b.encode(this._encode(n),e)};BasePoint.prototype.precompute=function(e){if(this.precomputed)return this;var n={doubles:null,naf:null,beta:null};return n.naf=this._getNAFPoints(8),n.doubles=this._getDoubles(4,e),n.beta=this._getBeta(),this.precomputed=n,this};BasePoint.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var n=this.precomputed.doubles;return n?n.points.length>=Math.ceil((e.bitLength()+1)/n.step):!1};BasePoint.prototype._getDoubles=function(e,n){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var o=[this],c=this,a=0;a<n;a+=e){for(var l=0;l<e;l++)c=c.dbl();o.push(c)}return{step:e,points:o}};BasePoint.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var n=[this],o=(1<<e)-1,c=o===1?null:this.dbl(),a=1;a<o;a++)n[a]=n[a-1].add(c);return{wnd:e,points:n}};BasePoint.prototype._getBeta=function(){return null};BasePoint.prototype.dblp=function(e){for(var n=this,o=0;o<e;o++)n=n.dbl();return n};var utils$a=utils$d,BN$8=bnExports$3,inherits$3=inherits_browserExports,Base$2=base$3,assert$9=utils$a.assert;function ShortCurve(t){Base$2.call(this,"short",t),this.a=new BN$8(t.a,16).toRed(this.red),this.b=new BN$8(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}inherits$3(ShortCurve,Base$2);var short=ShortCurve;ShortCurve.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var n,o;if(e.beta)n=new BN$8(e.beta,16).toRed(this.red);else{var c=this._getEndoRoots(this.p);n=c[0].cmp(c[1])<0?c[0]:c[1],n=n.toRed(this.red)}if(e.lambda)o=new BN$8(e.lambda,16);else{var a=this._getEndoRoots(this.n);this.g.mul(a[0]).x.cmp(this.g.x.redMul(n))===0?o=a[0]:(o=a[1],assert$9(this.g.mul(o).x.cmp(this.g.x.redMul(n))===0))}var l;return e.basis?l=e.basis.map(function(b){return{a:new BN$8(b.a,16),b:new BN$8(b.b,16)}}):l=this._getEndoBasis(o),{beta:n,lambda:o,basis:l}}};ShortCurve.prototype._getEndoRoots=function(e){var n=e===this.p?this.red:BN$8.mont(e),o=new BN$8(2).toRed(n).redInvm(),c=o.redNeg(),a=new BN$8(3).toRed(n).redNeg().redSqrt().redMul(o),l=c.redAdd(a).fromRed(),b=c.redSub(a).fromRed();return[l,b]};ShortCurve.prototype._getEndoBasis=function(e){for(var n=this.n.ushrn(Math.floor(this.n.bitLength()/2)),o=e,c=this.n.clone(),a=new BN$8(1),l=new BN$8(0),b=new BN$8(0),v=new BN$8(1),A,S,M,B,P,L,F,U=0,q,X;o.cmpn(0)!==0;){var ee=c.div(o);q=c.sub(ee.mul(o)),X=b.sub(ee.mul(a));var te=v.sub(ee.mul(l));if(!M&&q.cmp(n)<0)A=F.neg(),S=a,M=q.neg(),B=X;else if(M&&++U===2)break;F=q,c=o,o=q,b=a,a=X,v=l,l=te}P=q.neg(),L=X;var ce=M.sqr().add(B.sqr()),ue=P.sqr().add(L.sqr());return ue.cmp(ce)>=0&&(P=A,L=S),M.negative&&(M=M.neg(),B=B.neg()),P.negative&&(P=P.neg(),L=L.neg()),[{a:M,b:B},{a:P,b:L}]};ShortCurve.prototype._endoSplit=function(e){var n=this.endo.basis,o=n[0],c=n[1],a=c.b.mul(e).divRound(this.n),l=o.b.neg().mul(e).divRound(this.n),b=a.mul(o.a),v=l.mul(c.a),A=a.mul(o.b),S=l.mul(c.b),M=e.sub(b).sub(v),B=A.add(S).neg();return{k1:M,k2:B}};ShortCurve.prototype.pointFromX=function(e,n){e=new BN$8(e,16),e.red||(e=e.toRed(this.red));var o=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),c=o.redSqrt();if(c.redSqr().redSub(o).cmp(this.zero)!==0)throw new Error("invalid point");var a=c.fromRed().isOdd();return(n&&!a||!n&&a)&&(c=c.redNeg()),this.point(e,c)};ShortCurve.prototype.validate=function(e){if(e.inf)return!0;var n=e.x,o=e.y,c=this.a.redMul(n),a=n.redSqr().redMul(n).redIAdd(c).redIAdd(this.b);return o.redSqr().redISub(a).cmpn(0)===0};ShortCurve.prototype._endoWnafMulAdd=function(e,n,o){for(var c=this._endoWnafT1,a=this._endoWnafT2,l=0;l<e.length;l++){var b=this._endoSplit(n[l]),v=e[l],A=v._getBeta();b.k1.negative&&(b.k1.ineg(),v=v.neg(!0)),b.k2.negative&&(b.k2.ineg(),A=A.neg(!0)),c[l*2]=v,c[l*2+1]=A,a[l*2]=b.k1,a[l*2+1]=b.k2}for(var S=this._wnafMulAdd(1,c,a,l*2,o),M=0;M<l*2;M++)c[M]=null,a[M]=null;return S};function Point$2(t,e,n,o){Base$2.BasePoint.call(this,t,"affine"),e===null&&n===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new BN$8(e,16),this.y=new BN$8(n,16),o&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}inherits$3(Point$2,Base$2.BasePoint);ShortCurve.prototype.point=function(e,n,o){return new Point$2(this,e,n,o)};ShortCurve.prototype.pointFromJSON=function(e,n){return Point$2.fromJSON(this,e,n)};Point$2.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var n=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var o=this.curve,c=function(a){return o.point(a.x.redMul(o.endo.beta),a.y)};e.beta=n,n.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(c)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(c)}}}return n}};Point$2.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};Point$2.fromJSON=function(e,n,o){typeof n=="string"&&(n=JSON.parse(n));var c=e.point(n[0],n[1],o);if(!n[2])return c;function a(b){return e.point(b[0],b[1],o)}var l=n[2];return c.precomputed={beta:null,doubles:l.doubles&&{step:l.doubles.step,points:[c].concat(l.doubles.points.map(a))},naf:l.naf&&{wnd:l.naf.wnd,points:[c].concat(l.naf.points.map(a))}},c};Point$2.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};Point$2.prototype.isInfinity=function(){return this.inf};Point$2.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var n=this.y.redSub(e.y);n.cmpn(0)!==0&&(n=n.redMul(this.x.redSub(e.x).redInvm()));var o=n.redSqr().redISub(this.x).redISub(e.x),c=n.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,c)};Point$2.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var n=this.curve.a,o=this.x.redSqr(),c=e.redInvm(),a=o.redAdd(o).redIAdd(o).redIAdd(n).redMul(c),l=a.redSqr().redISub(this.x.redAdd(this.x)),b=a.redMul(this.x.redSub(l)).redISub(this.y);return this.curve.point(l,b)};Point$2.prototype.getX=function(){return this.x.fromRed()};Point$2.prototype.getY=function(){return this.y.fromRed()};Point$2.prototype.mul=function(e){return e=new BN$8(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)};Point$2.prototype.mulAdd=function(e,n,o){var c=[this,n],a=[e,o];return this.curve.endo?this.curve._endoWnafMulAdd(c,a):this.curve._wnafMulAdd(1,c,a,2)};Point$2.prototype.jmulAdd=function(e,n,o){var c=[this,n],a=[e,o];return this.curve.endo?this.curve._endoWnafMulAdd(c,a,!0):this.curve._wnafMulAdd(1,c,a,2,!0)};Point$2.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};Point$2.prototype.neg=function(e){if(this.inf)return this;var n=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var o=this.precomputed,c=function(a){return a.neg()};n.precomputed={naf:o.naf&&{wnd:o.naf.wnd,points:o.naf.points.map(c)},doubles:o.doubles&&{step:o.doubles.step,points:o.doubles.points.map(c)}}}return n};Point$2.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function JPoint(t,e,n,o){Base$2.BasePoint.call(this,t,"jacobian"),e===null&&n===null&&o===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new BN$8(0)):(this.x=new BN$8(e,16),this.y=new BN$8(n,16),this.z=new BN$8(o,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}inherits$3(JPoint,Base$2.BasePoint);ShortCurve.prototype.jpoint=function(e,n,o){return new JPoint(this,e,n,o)};JPoint.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),n=e.redSqr(),o=this.x.redMul(n),c=this.y.redMul(n).redMul(e);return this.curve.point(o,c)};JPoint.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};JPoint.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var n=e.z.redSqr(),o=this.z.redSqr(),c=this.x.redMul(n),a=e.x.redMul(o),l=this.y.redMul(n.redMul(e.z)),b=e.y.redMul(o.redMul(this.z)),v=c.redSub(a),A=l.redSub(b);if(v.cmpn(0)===0)return A.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var S=v.redSqr(),M=S.redMul(v),B=c.redMul(S),P=A.redSqr().redIAdd(M).redISub(B).redISub(B),L=A.redMul(B.redISub(P)).redISub(l.redMul(M)),F=this.z.redMul(e.z).redMul(v);return this.curve.jpoint(P,L,F)};JPoint.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var n=this.z.redSqr(),o=this.x,c=e.x.redMul(n),a=this.y,l=e.y.redMul(n).redMul(this.z),b=o.redSub(c),v=a.redSub(l);if(b.cmpn(0)===0)return v.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var A=b.redSqr(),S=A.redMul(b),M=o.redMul(A),B=v.redSqr().redIAdd(S).redISub(M).redISub(M),P=v.redMul(M.redISub(B)).redISub(a.redMul(S)),L=this.z.redMul(b);return this.curve.jpoint(B,P,L)};JPoint.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var n;if(this.curve.zeroA||this.curve.threeA){var o=this;for(n=0;n<e;n++)o=o.dbl();return o}var c=this.curve.a,a=this.curve.tinv,l=this.x,b=this.y,v=this.z,A=v.redSqr().redSqr(),S=b.redAdd(b);for(n=0;n<e;n++){var M=l.redSqr(),B=S.redSqr(),P=B.redSqr(),L=M.redAdd(M).redIAdd(M).redIAdd(c.redMul(A)),F=l.redMul(B),U=L.redSqr().redISub(F.redAdd(F)),q=F.redISub(U),X=L.redMul(q);X=X.redIAdd(X).redISub(P);var ee=S.redMul(v);n+1<e&&(A=A.redMul(P)),l=U,v=ee,S=X}return this.curve.jpoint(l,S.redMul(a),v)};JPoint.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};JPoint.prototype._zeroDbl=function(){var e,n,o;if(this.zOne){var c=this.x.redSqr(),a=this.y.redSqr(),l=a.redSqr(),b=this.x.redAdd(a).redSqr().redISub(c).redISub(l);b=b.redIAdd(b);var v=c.redAdd(c).redIAdd(c),A=v.redSqr().redISub(b).redISub(b),S=l.redIAdd(l);S=S.redIAdd(S),S=S.redIAdd(S),e=A,n=v.redMul(b.redISub(A)).redISub(S),o=this.y.redAdd(this.y)}else{var M=this.x.redSqr(),B=this.y.redSqr(),P=B.redSqr(),L=this.x.redAdd(B).redSqr().redISub(M).redISub(P);L=L.redIAdd(L);var F=M.redAdd(M).redIAdd(M),U=F.redSqr(),q=P.redIAdd(P);q=q.redIAdd(q),q=q.redIAdd(q),e=U.redISub(L).redISub(L),n=F.redMul(L.redISub(e)).redISub(q),o=this.y.redMul(this.z),o=o.redIAdd(o)}return this.curve.jpoint(e,n,o)};JPoint.prototype._threeDbl=function(){var e,n,o;if(this.zOne){var c=this.x.redSqr(),a=this.y.redSqr(),l=a.redSqr(),b=this.x.redAdd(a).redSqr().redISub(c).redISub(l);b=b.redIAdd(b);var v=c.redAdd(c).redIAdd(c).redIAdd(this.curve.a),A=v.redSqr().redISub(b).redISub(b);e=A;var S=l.redIAdd(l);S=S.redIAdd(S),S=S.redIAdd(S),n=v.redMul(b.redISub(A)).redISub(S),o=this.y.redAdd(this.y)}else{var M=this.z.redSqr(),B=this.y.redSqr(),P=this.x.redMul(B),L=this.x.redSub(M).redMul(this.x.redAdd(M));L=L.redAdd(L).redIAdd(L);var F=P.redIAdd(P);F=F.redIAdd(F);var U=F.redAdd(F);e=L.redSqr().redISub(U),o=this.y.redAdd(this.z).redSqr().redISub(B).redISub(M);var q=B.redSqr();q=q.redIAdd(q),q=q.redIAdd(q),q=q.redIAdd(q),n=L.redMul(F.redISub(e)).redISub(q)}return this.curve.jpoint(e,n,o)};JPoint.prototype._dbl=function(){var e=this.curve.a,n=this.x,o=this.y,c=this.z,a=c.redSqr().redSqr(),l=n.redSqr(),b=o.redSqr(),v=l.redAdd(l).redIAdd(l).redIAdd(e.redMul(a)),A=n.redAdd(n);A=A.redIAdd(A);var S=A.redMul(b),M=v.redSqr().redISub(S.redAdd(S)),B=S.redISub(M),P=b.redSqr();P=P.redIAdd(P),P=P.redIAdd(P),P=P.redIAdd(P);var L=v.redMul(B).redISub(P),F=o.redAdd(o).redMul(c);return this.curve.jpoint(M,L,F)};JPoint.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),n=this.y.redSqr(),o=this.z.redSqr(),c=n.redSqr(),a=e.redAdd(e).redIAdd(e),l=a.redSqr(),b=this.x.redAdd(n).redSqr().redISub(e).redISub(c);b=b.redIAdd(b),b=b.redAdd(b).redIAdd(b),b=b.redISub(l);var v=b.redSqr(),A=c.redIAdd(c);A=A.redIAdd(A),A=A.redIAdd(A),A=A.redIAdd(A);var S=a.redIAdd(b).redSqr().redISub(l).redISub(v).redISub(A),M=n.redMul(S);M=M.redIAdd(M),M=M.redIAdd(M);var B=this.x.redMul(v).redISub(M);B=B.redIAdd(B),B=B.redIAdd(B);var P=this.y.redMul(S.redMul(A.redISub(S)).redISub(b.redMul(v)));P=P.redIAdd(P),P=P.redIAdd(P),P=P.redIAdd(P);var L=this.z.redAdd(b).redSqr().redISub(o).redISub(v);return this.curve.jpoint(B,P,L)};JPoint.prototype.mul=function(e,n){return e=new BN$8(e,n),this.curve._wnafMul(this,e)};JPoint.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var n=this.z.redSqr(),o=e.z.redSqr();if(this.x.redMul(o).redISub(e.x.redMul(n)).cmpn(0)!==0)return!1;var c=n.redMul(this.z),a=o.redMul(e.z);return this.y.redMul(a).redISub(e.y.redMul(c)).cmpn(0)===0};JPoint.prototype.eqXToP=function(e){var n=this.z.redSqr(),o=e.toRed(this.curve.red).redMul(n);if(this.x.cmp(o)===0)return!0;for(var c=e.clone(),a=this.curve.redN.redMul(n);;){if(c.iadd(this.curve.n),c.cmp(this.curve.p)>=0)return!1;if(o.redIAdd(a),this.x.cmp(o)===0)return!0}};JPoint.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};JPoint.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var BN$7=bnExports$3,inherits$2=inherits_browserExports,Base$1=base$3,utils$9=utils$d;function MontCurve(t){Base$1.call(this,"mont",t),this.a=new BN$7(t.a,16).toRed(this.red),this.b=new BN$7(t.b,16).toRed(this.red),this.i4=new BN$7(4).toRed(this.red).redInvm(),this.two=new BN$7(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}inherits$2(MontCurve,Base$1);var mont=MontCurve;MontCurve.prototype.validate=function(e){var n=e.normalize().x,o=n.redSqr(),c=o.redMul(n).redAdd(o.redMul(this.a)).redAdd(n),a=c.redSqrt();return a.redSqr().cmp(c)===0};function Point$1(t,e,n){Base$1.BasePoint.call(this,t,"projective"),e===null&&n===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new BN$7(e,16),this.z=new BN$7(n,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}inherits$2(Point$1,Base$1.BasePoint);MontCurve.prototype.decodePoint=function(e,n){return this.point(utils$9.toArray(e,n),1)};MontCurve.prototype.point=function(e,n){return new Point$1(this,e,n)};MontCurve.prototype.pointFromJSON=function(e){return Point$1.fromJSON(this,e)};Point$1.prototype.precompute=function(){};Point$1.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())};Point$1.fromJSON=function(e,n){return new Point$1(e,n[0],n[1]||e.one)};Point$1.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};Point$1.prototype.isInfinity=function(){return this.z.cmpn(0)===0};Point$1.prototype.dbl=function(){var e=this.x.redAdd(this.z),n=e.redSqr(),o=this.x.redSub(this.z),c=o.redSqr(),a=n.redSub(c),l=n.redMul(c),b=a.redMul(c.redAdd(this.curve.a24.redMul(a)));return this.curve.point(l,b)};Point$1.prototype.add=function(){throw new Error("Not supported on Montgomery curve")};Point$1.prototype.diffAdd=function(e,n){var o=this.x.redAdd(this.z),c=this.x.redSub(this.z),a=e.x.redAdd(e.z),l=e.x.redSub(e.z),b=l.redMul(o),v=a.redMul(c),A=n.z.redMul(b.redAdd(v).redSqr()),S=n.x.redMul(b.redISub(v).redSqr());return this.curve.point(A,S)};Point$1.prototype.mul=function(e){for(var n=e.clone(),o=this,c=this.curve.point(null,null),a=this,l=[];n.cmpn(0)!==0;n.iushrn(1))l.push(n.andln(1));for(var b=l.length-1;b>=0;b--)l[b]===0?(o=o.diffAdd(c,a),c=c.dbl()):(c=o.diffAdd(c,a),o=o.dbl());return c};Point$1.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")};Point$1.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")};Point$1.prototype.eq=function(e){return this.getX().cmp(e.getX())===0};Point$1.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this};Point$1.prototype.getX=function(){return this.normalize(),this.x.fromRed()};var utils$8=utils$d,BN$6=bnExports$3,inherits$1=inherits_browserExports,Base=base$3,assert$8=utils$8.assert;function EdwardsCurve(t){this.twisted=(t.a|0)!==1,this.mOneA=this.twisted&&(t.a|0)===-1,this.extended=this.mOneA,Base.call(this,"edwards",t),this.a=new BN$6(t.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new BN$6(t.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new BN$6(t.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),assert$8(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(t.c|0)===1}inherits$1(EdwardsCurve,Base);var edwards=EdwardsCurve;EdwardsCurve.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)};EdwardsCurve.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)};EdwardsCurve.prototype.jpoint=function(e,n,o,c){return this.point(e,n,o,c)};EdwardsCurve.prototype.pointFromX=function(e,n){e=new BN$6(e,16),e.red||(e=e.toRed(this.red));var o=e.redSqr(),c=this.c2.redSub(this.a.redMul(o)),a=this.one.redSub(this.c2.redMul(this.d).redMul(o)),l=c.redMul(a.redInvm()),b=l.redSqrt();if(b.redSqr().redSub(l).cmp(this.zero)!==0)throw new Error("invalid point");var v=b.fromRed().isOdd();return(n&&!v||!n&&v)&&(b=b.redNeg()),this.point(e,b)};EdwardsCurve.prototype.pointFromY=function(e,n){e=new BN$6(e,16),e.red||(e=e.toRed(this.red));var o=e.redSqr(),c=o.redSub(this.c2),a=o.redMul(this.d).redMul(this.c2).redSub(this.a),l=c.redMul(a.redInvm());if(l.cmp(this.zero)===0){if(n)throw new Error("invalid point");return this.point(this.zero,e)}var b=l.redSqrt();if(b.redSqr().redSub(l).cmp(this.zero)!==0)throw new Error("invalid point");return b.fromRed().isOdd()!==n&&(b=b.redNeg()),this.point(b,e)};EdwardsCurve.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var n=e.x.redSqr(),o=e.y.redSqr(),c=n.redMul(this.a).redAdd(o),a=this.c2.redMul(this.one.redAdd(this.d.redMul(n).redMul(o)));return c.cmp(a)===0};function Point(t,e,n,o,c){Base.BasePoint.call(this,t,"projective"),e===null&&n===null&&o===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new BN$6(e,16),this.y=new BN$6(n,16),this.z=o?new BN$6(o,16):this.curve.one,this.t=c&&new BN$6(c,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}inherits$1(Point,Base.BasePoint);EdwardsCurve.prototype.pointFromJSON=function(e){return Point.fromJSON(this,e)};EdwardsCurve.prototype.point=function(e,n,o,c){return new Point(this,e,n,o,c)};Point.fromJSON=function(e,n){return new Point(e,n[0],n[1],n[2])};Point.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};Point.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)};Point.prototype._extDbl=function(){var e=this.x.redSqr(),n=this.y.redSqr(),o=this.z.redSqr();o=o.redIAdd(o);var c=this.curve._mulA(e),a=this.x.redAdd(this.y).redSqr().redISub(e).redISub(n),l=c.redAdd(n),b=l.redSub(o),v=c.redSub(n),A=a.redMul(b),S=l.redMul(v),M=a.redMul(v),B=b.redMul(l);return this.curve.point(A,S,B,M)};Point.prototype._projDbl=function(){var e=this.x.redAdd(this.y).redSqr(),n=this.x.redSqr(),o=this.y.redSqr(),c,a,l,b,v,A;if(this.curve.twisted){b=this.curve._mulA(n);var S=b.redAdd(o);this.zOne?(c=e.redSub(n).redSub(o).redMul(S.redSub(this.curve.two)),a=S.redMul(b.redSub(o)),l=S.redSqr().redSub(S).redSub(S)):(v=this.z.redSqr(),A=S.redSub(v).redISub(v),c=e.redSub(n).redISub(o).redMul(A),a=S.redMul(b.redSub(o)),l=S.redMul(A))}else b=n.redAdd(o),v=this.curve._mulC(this.z).redSqr(),A=b.redSub(v).redSub(v),c=this.curve._mulC(e.redISub(b)).redMul(A),a=this.curve._mulC(b).redMul(n.redISub(o)),l=b.redMul(A);return this.curve.point(c,a,l)};Point.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()};Point.prototype._extAdd=function(e){var n=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),o=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),c=this.t.redMul(this.curve.dd).redMul(e.t),a=this.z.redMul(e.z.redAdd(e.z)),l=o.redSub(n),b=a.redSub(c),v=a.redAdd(c),A=o.redAdd(n),S=l.redMul(b),M=v.redMul(A),B=l.redMul(A),P=b.redMul(v);return this.curve.point(S,M,P,B)};Point.prototype._projAdd=function(e){var n=this.z.redMul(e.z),o=n.redSqr(),c=this.x.redMul(e.x),a=this.y.redMul(e.y),l=this.curve.d.redMul(c).redMul(a),b=o.redSub(l),v=o.redAdd(l),A=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(c).redISub(a),S=n.redMul(b).redMul(A),M,B;return this.curve.twisted?(M=n.redMul(v).redMul(a.redSub(this.curve._mulA(c))),B=b.redMul(v)):(M=n.redMul(v).redMul(a.redSub(c)),B=this.curve._mulC(b).redMul(v)),this.curve.point(S,M,B)};Point.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)};Point.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)};Point.prototype.mulAdd=function(e,n,o){return this.curve._wnafMulAdd(1,[this,n],[e,o],2,!1)};Point.prototype.jmulAdd=function(e,n,o){return this.curve._wnafMulAdd(1,[this,n],[e,o],2,!0)};Point.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this};Point.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())};Point.prototype.getX=function(){return this.normalize(),this.x.fromRed()};Point.prototype.getY=function(){return this.normalize(),this.y.fromRed()};Point.prototype.eq=function(e){return this===e||this.getX().cmp(e.getX())===0&&this.getY().cmp(e.getY())===0};Point.prototype.eqXToP=function(e){var n=e.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(n)===0)return!0;for(var o=e.clone(),c=this.curve.redN.redMul(this.z);;){if(o.iadd(this.curve.n),o.cmp(this.curve.p)>=0)return!1;if(n.redIAdd(c),this.x.cmp(n)===0)return!0}};Point.prototype.toP=Point.prototype.normalize;Point.prototype.mixedAdd=Point.prototype.add;(function(t){var e=t;e.base=base$3,e.short=short,e.mont=mont,e.edwards=edwards})(curve);var curves$1={},secp256k1$1,hasRequiredSecp256k1;function requireSecp256k1(){return hasRequiredSecp256k1||(hasRequiredSecp256k1=1,secp256k1$1={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}),secp256k1$1}(function(t){var e=t,n=hash$5,o=curve,c=utils$d,a=c.assert;function l(A){A.type==="short"?this.curve=new o.short(A):A.type==="edwards"?this.curve=new o.edwards(A):this.curve=new o.mont(A),this.g=this.curve.g,this.n=this.curve.n,this.hash=A.hash,a(this.g.validate(),"Invalid curve"),a(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}e.PresetCurve=l;function b(A,S){Object.defineProperty(e,A,{configurable:!0,enumerable:!0,get:function(){var M=new l(S);return Object.defineProperty(e,A,{configurable:!0,enumerable:!0,value:M}),M}})}b("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:n.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),b("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:n.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),b("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:n.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),b("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:n.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),b("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:n.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),b("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:n.sha256,gRed:!1,g:["9"]}),b("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:n.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var v;try{v=requireSecp256k1()}catch{v=void 0}b("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:n.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",v]})})(curves$1);var hash$1=hash$5,utils$7=utils$c,assert$7=minimalisticAssert$1;function HmacDRBG(t){if(!(this instanceof HmacDRBG))return new HmacDRBG(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=utils$7.toArray(t.entropy,t.entropyEnc||"hex"),n=utils$7.toArray(t.nonce,t.nonceEnc||"hex"),o=utils$7.toArray(t.pers,t.persEnc||"hex");assert$7(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,n,o)}var hmacDrbg=HmacDRBG;HmacDRBG.prototype._init=function(e,n,o){var c=e.concat(n).concat(o);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var a=0;a<this.V.length;a++)this.K[a]=0,this.V[a]=1;this._update(c),this._reseed=1,this.reseedInterval=281474976710656};HmacDRBG.prototype._hmac=function(){return new hash$1.hmac(this.hash,this.K)};HmacDRBG.prototype._update=function(e){var n=this._hmac().update(this.V).update([0]);e&&(n=n.update(e)),this.K=n.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())};HmacDRBG.prototype.reseed=function(e,n,o,c){typeof n!="string"&&(c=o,o=n,n=null),e=utils$7.toArray(e,n),o=utils$7.toArray(o,c),assert$7(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(o||[])),this._reseed=1};HmacDRBG.prototype.generate=function(e,n,o,c){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof n!="string"&&(c=o,o=n,n=null),o&&(o=utils$7.toArray(o,c||"hex"),this._update(o));for(var a=[];a.length<e;)this.V=this._hmac().update(this.V).digest(),a=a.concat(this.V);var l=a.slice(0,e);return this._update(o),this._reseed++,utils$7.encode(l,n)};var BN$5=bnExports$3,utils$6=utils$d,assert$6=utils$6.assert;function KeyPair$2(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var key$1=KeyPair$2;KeyPair$2.fromPublic=function(e,n,o){return n instanceof KeyPair$2?n:new KeyPair$2(e,{pub:n,pubEnc:o})};KeyPair$2.fromPrivate=function(e,n,o){return n instanceof KeyPair$2?n:new KeyPair$2(e,{priv:n,privEnc:o})};KeyPair$2.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};KeyPair$2.prototype.getPublic=function(e,n){return typeof e=="string"&&(n=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),n?this.pub.encode(n,e):this.pub};KeyPair$2.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv};KeyPair$2.prototype._importPrivate=function(e,n){this.priv=new BN$5(e,n||16),this.priv=this.priv.umod(this.ec.curve.n)};KeyPair$2.prototype._importPublic=function(e,n){if(e.x||e.y){this.ec.curve.type==="mont"?assert$6(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&assert$6(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,n)};KeyPair$2.prototype.derive=function(e){return e.validate()||assert$6(e.validate(),"public point not validated"),e.mul(this.priv).getX()};KeyPair$2.prototype.sign=function(e,n,o){return this.ec.sign(e,this,n,o)};KeyPair$2.prototype.verify=function(e,n){return this.ec.verify(e,n,this)};KeyPair$2.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var BN$4=bnExports$3,utils$5=utils$d,assert$5=utils$5.assert;function Signature$2(t,e){if(t instanceof Signature$2)return t;this._importDER(t,e)||(assert$5(t.r&&t.s,"Signature without r or s"),this.r=new BN$4(t.r,16),this.s=new BN$4(t.s,16),t.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}var signature$1=Signature$2;function Position(){this.place=0}function getLength(t,e){var n=t[e.place++];if(!(n&128))return n;var o=n&15;if(o===0||o>4)return!1;for(var c=0,a=0,l=e.place;a<o;a++,l++)c<<=8,c|=t[l],c>>>=0;return c<=127?!1:(e.place=l,c)}function rmPadding(t){for(var e=0,n=t.length-1;!t[e]&&!(t[e+1]&128)&&e<n;)e++;return e===0?t:t.slice(e)}Signature$2.prototype._importDER=function(e,n){e=utils$5.toArray(e,n);var o=new Position;if(e[o.place++]!==48)return!1;var c=getLength(e,o);if(c===!1||c+o.place!==e.length||e[o.place++]!==2)return!1;var a=getLength(e,o);if(a===!1)return!1;var l=e.slice(o.place,a+o.place);if(o.place+=a,e[o.place++]!==2)return!1;var b=getLength(e,o);if(b===!1||e.length!==b+o.place)return!1;var v=e.slice(o.place,b+o.place);if(l[0]===0)if(l[1]&128)l=l.slice(1);else return!1;if(v[0]===0)if(v[1]&128)v=v.slice(1);else return!1;return this.r=new BN$4(l),this.s=new BN$4(v),this.recoveryParam=null,!0};function constructLength(t,e){if(e<128){t.push(e);return}var n=1+(Math.log(e)/Math.LN2>>>3);for(t.push(n|128);--n;)t.push(e>>>(n<<3)&255);t.push(e)}Signature$2.prototype.toDER=function(e){var n=this.r.toArray(),o=this.s.toArray();for(n[0]&128&&(n=[0].concat(n)),o[0]&128&&(o=[0].concat(o)),n=rmPadding(n),o=rmPadding(o);!o[0]&&!(o[1]&128);)o=o.slice(1);var c=[2];constructLength(c,n.length),c=c.concat(n),c.push(2),constructLength(c,o.length);var a=c.concat(o),l=[48];return constructLength(l,a.length),l=l.concat(a),utils$5.encode(l,e)};var ec,hasRequiredEc;function requireEc(){if(hasRequiredEc)return ec;hasRequiredEc=1;var t=bnExports$3,e=hmacDrbg,n=utils$d,o=curves$1,c=requireBrorand(),a=n.assert,l=key$1,b=signature$1;function v(A){if(!(this instanceof v))return new v(A);typeof A=="string"&&(a(Object.prototype.hasOwnProperty.call(o,A),"Unknown curve "+A),A=o[A]),A instanceof o.PresetCurve&&(A={curve:A}),this.curve=A.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=A.curve.g,this.g.precompute(A.curve.n.bitLength()+1),this.hash=A.hash||A.curve.hash}return ec=v,v.prototype.keyPair=function(S){return new l(this,S)},v.prototype.keyFromPrivate=function(S,M){return l.fromPrivate(this,S,M)},v.prototype.keyFromPublic=function(S,M){return l.fromPublic(this,S,M)},v.prototype.genKeyPair=function(S){S||(S={});for(var M=new e({hash:this.hash,pers:S.pers,persEnc:S.persEnc||"utf8",entropy:S.entropy||c(this.hash.hmacStrength),entropyEnc:S.entropy&&S.entropyEnc||"utf8",nonce:this.n.toArray()}),B=this.n.byteLength(),P=this.n.sub(new t(2));;){var L=new t(M.generate(B));if(!(L.cmp(P)>0))return L.iaddn(1),this.keyFromPrivate(L)}},v.prototype._truncateToN=function(S,M){var B=S.byteLength()*8-this.n.bitLength();return B>0&&(S=S.ushrn(B)),!M&&S.cmp(this.n)>=0?S.sub(this.n):S},v.prototype.sign=function(S,M,B,P){typeof B=="object"&&(P=B,B=null),P||(P={}),M=this.keyFromPrivate(M,B),S=this._truncateToN(new t(S,16));for(var L=this.n.byteLength(),F=M.getPrivate().toArray("be",L),U=S.toArray("be",L),q=new e({hash:this.hash,entropy:F,nonce:U,pers:P.pers,persEnc:P.persEnc||"utf8"}),X=this.n.sub(new t(1)),ee=0;;ee++){var te=P.k?P.k(ee):new t(q.generate(this.n.byteLength()));if(te=this._truncateToN(te,!0),!(te.cmpn(1)<=0||te.cmp(X)>=0)){var ce=this.g.mul(te);if(!ce.isInfinity()){var ue=ce.getX(),Ae=ue.umod(this.n);if(Ae.cmpn(0)!==0){var we=te.invm(this.n).mul(Ae.mul(M.getPrivate()).iadd(S));if(we=we.umod(this.n),we.cmpn(0)!==0){var pe=(ce.getY().isOdd()?1:0)|(ue.cmp(Ae)!==0?2:0);return P.canonical&&we.cmp(this.nh)>0&&(we=this.n.sub(we),pe^=1),new b({r:Ae,s:we,recoveryParam:pe})}}}}}},v.prototype.verify=function(S,M,B,P){S=this._truncateToN(new t(S,16)),B=this.keyFromPublic(B,P),M=new b(M,"hex");var L=M.r,F=M.s;if(L.cmpn(1)<0||L.cmp(this.n)>=0||F.cmpn(1)<0||F.cmp(this.n)>=0)return!1;var U=F.invm(this.n),q=U.mul(S).umod(this.n),X=U.mul(L).umod(this.n),ee;return this.curve._maxwellTrick?(ee=this.g.jmulAdd(q,B.getPublic(),X),ee.isInfinity()?!1:ee.eqXToP(L)):(ee=this.g.mulAdd(q,B.getPublic(),X),ee.isInfinity()?!1:ee.getX().umod(this.n).cmp(L)===0)},v.prototype.recoverPubKey=function(A,S,M,B){a((3&M)===M,"The recovery param is more than two bits"),S=new b(S,B);var P=this.n,L=new t(A),F=S.r,U=S.s,q=M&1,X=M>>1;if(F.cmp(this.curve.p.umod(this.curve.n))>=0&&X)throw new Error("Unable to find sencond key candinate");X?F=this.curve.pointFromX(F.add(this.curve.n),q):F=this.curve.pointFromX(F,q);var ee=S.r.invm(P),te=P.sub(L).mul(ee).umod(P),ce=U.mul(ee).umod(P);return this.g.mulAdd(te,F,ce)},v.prototype.getKeyRecoveryParam=function(A,S,M,B){if(S=new b(S,B),S.recoveryParam!==null)return S.recoveryParam;for(var P=0;P<4;P++){var L;try{L=this.recoverPubKey(A,S,P)}catch{continue}if(L.eq(M))return P}throw new Error("Unable to find valid recovery factor")},ec}var utils$4=utils$d,assert$4=utils$4.assert,parseBytes$2=utils$4.parseBytes,cachedProperty$1=utils$4.cachedProperty;function KeyPair$1(t,e){this.eddsa=t,this._secret=parseBytes$2(e.secret),t.isPoint(e.pub)?this._pub=e.pub:this._pubBytes=parseBytes$2(e.pub)}KeyPair$1.fromPublic=function(e,n){return n instanceof KeyPair$1?n:new KeyPair$1(e,{pub:n})};KeyPair$1.fromSecret=function(e,n){return n instanceof KeyPair$1?n:new KeyPair$1(e,{secret:n})};KeyPair$1.prototype.secret=function(){return this._secret};cachedProperty$1(KeyPair$1,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())});cachedProperty$1(KeyPair$1,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())});cachedProperty$1(KeyPair$1,"privBytes",function(){var e=this.eddsa,n=this.hash(),o=e.encodingLength-1,c=n.slice(0,e.encodingLength);return c[0]&=248,c[o]&=127,c[o]|=64,c});cachedProperty$1(KeyPair$1,"priv",function(){return this.eddsa.decodeInt(this.privBytes())});cachedProperty$1(KeyPair$1,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()});cachedProperty$1(KeyPair$1,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)});KeyPair$1.prototype.sign=function(e){return assert$4(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)};KeyPair$1.prototype.verify=function(e,n){return this.eddsa.verify(e,n,this)};KeyPair$1.prototype.getSecret=function(e){return assert$4(this._secret,"KeyPair is public only"),utils$4.encode(this.secret(),e)};KeyPair$1.prototype.getPublic=function(e){return utils$4.encode(this.pubBytes(),e)};var key=KeyPair$1,BN$3=bnExports$3,utils$3=utils$d,assert$3=utils$3.assert,cachedProperty=utils$3.cachedProperty,parseBytes$1=utils$3.parseBytes;function Signature$1(t,e){this.eddsa=t,typeof e!="object"&&(e=parseBytes$1(e)),Array.isArray(e)&&(e={R:e.slice(0,t.encodingLength),S:e.slice(t.encodingLength)}),assert$3(e.R&&e.S,"Signature without R or S"),t.isPoint(e.R)&&(this._R=e.R),e.S instanceof BN$3&&(this._S=e.S),this._Rencoded=Array.isArray(e.R)?e.R:e.Rencoded,this._Sencoded=Array.isArray(e.S)?e.S:e.Sencoded}cachedProperty(Signature$1,"S",function(){return this.eddsa.decodeInt(this.Sencoded())});cachedProperty(Signature$1,"R",function(){return this.eddsa.decodePoint(this.Rencoded())});cachedProperty(Signature$1,"Rencoded",function(){return this.eddsa.encodePoint(this.R())});cachedProperty(Signature$1,"Sencoded",function(){return this.eddsa.encodeInt(this.S())});Signature$1.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())};Signature$1.prototype.toHex=function(){return utils$3.encode(this.toBytes(),"hex").toUpperCase()};var signature=Signature$1,hash=hash$5,curves=curves$1,utils$2=utils$d,assert$2=utils$2.assert,parseBytes=utils$2.parseBytes,KeyPair=key,Signature=signature;function EDDSA(t){if(assert$2(t==="ed25519","only tested with ed25519 so far"),!(this instanceof EDDSA))return new EDDSA(t);t=curves[t].curve,this.curve=t,this.g=t.g,this.g.precompute(t.n.bitLength()+1),this.pointClass=t.point().constructor,this.encodingLength=Math.ceil(t.n.bitLength()/8),this.hash=hash.sha512}var eddsa=EDDSA;EDDSA.prototype.sign=function(e,n){e=parseBytes(e);var o=this.keyFromSecret(n),c=this.hashInt(o.messagePrefix(),e),a=this.g.mul(c),l=this.encodePoint(a),b=this.hashInt(l,o.pubBytes(),e).mul(o.priv()),v=c.add(b).umod(this.curve.n);return this.makeSignature({R:a,S:v,Rencoded:l})};EDDSA.prototype.verify=function(e,n,o){e=parseBytes(e),n=this.makeSignature(n);var c=this.keyFromPublic(o),a=this.hashInt(n.Rencoded(),c.pubBytes(),e),l=this.g.mul(n.S()),b=n.R().add(c.pub().mul(a));return b.eq(l)};EDDSA.prototype.hashInt=function(){for(var e=this.hash(),n=0;n<arguments.length;n++)e.update(arguments[n]);return utils$2.intFromLE(e.digest()).umod(this.curve.n)};EDDSA.prototype.keyFromPublic=function(e){return KeyPair.fromPublic(this,e)};EDDSA.prototype.keyFromSecret=function(e){return KeyPair.fromSecret(this,e)};EDDSA.prototype.makeSignature=function(e){return e instanceof Signature?e:new Signature(this,e)};EDDSA.prototype.encodePoint=function(e){var n=e.getY().toArray("le",this.encodingLength);return n[this.encodingLength-1]|=e.getX().isOdd()?128:0,n};EDDSA.prototype.decodePoint=function(e){e=utils$2.parseBytes(e);var n=e.length-1,o=e.slice(0,n).concat(e[n]&-129),c=(e[n]&128)!==0,a=utils$2.intFromLE(o);return this.curve.pointFromY(a,c)};EDDSA.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)};EDDSA.prototype.decodeInt=function(e){return utils$2.intFromLE(e)};EDDSA.prototype.isPoint=function(e){return e instanceof this.pointClass};var hasRequiredElliptic;function requireElliptic(){return hasRequiredElliptic||(hasRequiredElliptic=1,function(t){var e=t;e.version=require$$0$1.version,e.utils=utils$d,e.rand=requireBrorand(),e.curve=curve,e.curves=curves$1,e.ec=requireEc(),e.eddsa=eddsa}(elliptic)),elliptic}var asn1$3={},asn1$2={},bn$2={exports:{}};bn$2.exports;(function(t){(function(e,n){function o(T,u){if(!T)throw new Error(u||"Assertion failed")}function c(T,u){T.super_=u;var p=function(){};p.prototype=u.prototype,T.prototype=new p,T.prototype.constructor=T}function a(T,u,p){if(a.isBN(T))return T;this.negative=0,this.words=null,this.length=0,this.red=null,T!==null&&((u==="le"||u==="be")&&(p=u,u=10),this._init(T||0,u||10,p||"be"))}typeof e=="object"?e.exports=a:n.BN=a,a.BN=a,a.wordSize=26;var l;try{typeof window<"u"&&typeof window.Buffer<"u"?l=window.Buffer:l=require$$0$3.Buffer}catch{}a.isBN=function(u){return u instanceof a?!0:u!==null&&typeof u=="object"&&u.constructor.wordSize===a.wordSize&&Array.isArray(u.words)},a.max=function(u,p){return u.cmp(p)>0?u:p},a.min=function(u,p){return u.cmp(p)<0?u:p},a.prototype._init=function(u,p,m){if(typeof u=="number")return this._initNumber(u,p,m);if(typeof u=="object")return this._initArray(u,p,m);p==="hex"&&(p=16),o(p===(p|0)&&p>=2&&p<=36),u=u.toString().replace(/\s+/g,"");var y=0;u[0]==="-"&&(y++,this.negative=1),y<u.length&&(p===16?this._parseHex(u,y,m):(this._parseBase(u,p,y),m==="le"&&this._initArray(this.toArray(),p,m)))},a.prototype._initNumber=function(u,p,m){u<0&&(this.negative=1,u=-u),u<67108864?(this.words=[u&67108863],this.length=1):u<4503599627370496?(this.words=[u&67108863,u/67108864&67108863],this.length=2):(o(u<9007199254740992),this.words=[u&67108863,u/67108864&67108863,1],this.length=3),m==="le"&&this._initArray(this.toArray(),p,m)},a.prototype._initArray=function(u,p,m){if(o(typeof u.length=="number"),u.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(u.length/3),this.words=new Array(this.length);for(var y=0;y<this.length;y++)this.words[y]=0;var E,$,k=0;if(m==="be")for(y=u.length-1,E=0;y>=0;y-=3)$=u[y]|u[y-1]<<8|u[y-2]<<16,this.words[E]|=$<<k&67108863,this.words[E+1]=$>>>26-k&67108863,k+=24,k>=26&&(k-=26,E++);else if(m==="le")for(y=0,E=0;y<u.length;y+=3)$=u[y]|u[y+1]<<8|u[y+2]<<16,this.words[E]|=$<<k&67108863,this.words[E+1]=$>>>26-k&67108863,k+=24,k>=26&&(k-=26,E++);return this.strip()};function b(T,u){var p=T.charCodeAt(u);return p>=65&&p<=70?p-55:p>=97&&p<=102?p-87:p-48&15}function v(T,u,p){var m=b(T,p);return p-1>=u&&(m|=b(T,p-1)<<4),m}a.prototype._parseHex=function(u,p,m){this.length=Math.ceil((u.length-p)/6),this.words=new Array(this.length);for(var y=0;y<this.length;y++)this.words[y]=0;var E=0,$=0,k;if(m==="be")for(y=u.length-1;y>=p;y-=2)k=v(u,p,y)<<E,this.words[$]|=k&67108863,E>=18?(E-=18,$+=1,this.words[$]|=k>>>26):E+=8;else{var _=u.length-p;for(y=_%2===0?p+1:p;y<u.length;y+=2)k=v(u,p,y)<<E,this.words[$]|=k&67108863,E>=18?(E-=18,$+=1,this.words[$]|=k>>>26):E+=8}this.strip()};function A(T,u,p,m){for(var y=0,E=Math.min(T.length,p),$=u;$<E;$++){var k=T.charCodeAt($)-48;y*=m,k>=49?y+=k-49+10:k>=17?y+=k-17+10:y+=k}return y}a.prototype._parseBase=function(u,p,m){this.words=[0],this.length=1;for(var y=0,E=1;E<=67108863;E*=p)y++;y--,E=E/p|0;for(var $=u.length-m,k=$%y,_=Math.min($,$-k)+m,d=0,w=m;w<_;w+=y)d=A(u,w,w+y,p),this.imuln(E),this.words[0]+d<67108864?this.words[0]+=d:this._iaddn(d);if(k!==0){var I=1;for(d=A(u,w,u.length,p),w=0;w<k;w++)I*=p;this.imuln(I),this.words[0]+d<67108864?this.words[0]+=d:this._iaddn(d)}this.strip()},a.prototype.copy=function(u){u.words=new Array(this.length);for(var p=0;p<this.length;p++)u.words[p]=this.words[p];u.length=this.length,u.negative=this.negative,u.red=this.red},a.prototype.clone=function(){var u=new a(null);return this.copy(u),u},a.prototype._expand=function(u){for(;this.length<u;)this.words[this.length++]=0;return this},a.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},a.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},a.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var S=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],M=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],B=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];a.prototype.toString=function(u,p){u=u||10,p=p|0||1;var m;if(u===16||u==="hex"){m="";for(var y=0,E=0,$=0;$<this.length;$++){var k=this.words[$],_=((k<<y|E)&16777215).toString(16);E=k>>>24-y&16777215,E!==0||$!==this.length-1?m=S[6-_.length]+_+m:m=_+m,y+=2,y>=26&&(y-=26,$--)}for(E!==0&&(m=E.toString(16)+m);m.length%p!==0;)m="0"+m;return this.negative!==0&&(m="-"+m),m}if(u===(u|0)&&u>=2&&u<=36){var d=M[u],w=B[u];m="";var I=this.clone();for(I.negative=0;!I.isZero();){var C=I.modn(w).toString(u);I=I.idivn(w),I.isZero()?m=C+m:m=S[d-C.length]+C+m}for(this.isZero()&&(m="0"+m);m.length%p!==0;)m="0"+m;return this.negative!==0&&(m="-"+m),m}o(!1,"Base should be between 2 and 36")},a.prototype.toNumber=function(){var u=this.words[0];return this.length===2?u+=this.words[1]*67108864:this.length===3&&this.words[2]===1?u+=4503599627370496+this.words[1]*67108864:this.length>2&&o(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-u:u},a.prototype.toJSON=function(){return this.toString(16)},a.prototype.toBuffer=function(u,p){return o(typeof l<"u"),this.toArrayLike(l,u,p)},a.prototype.toArray=function(u,p){return this.toArrayLike(Array,u,p)},a.prototype.toArrayLike=function(u,p,m){var y=this.byteLength(),E=m||Math.max(1,y);o(y<=E,"byte array longer than desired length"),o(E>0,"Requested array length <= 0"),this.strip();var $=p==="le",k=new u(E),_,d,w=this.clone();if($){for(d=0;!w.isZero();d++)_=w.andln(255),w.iushrn(8),k[d]=_;for(;d<E;d++)k[d]=0}else{for(d=0;d<E-y;d++)k[d]=0;for(d=0;!w.isZero();d++)_=w.andln(255),w.iushrn(8),k[E-d-1]=_}return k},Math.clz32?a.prototype._countBits=function(u){return 32-Math.clz32(u)}:a.prototype._countBits=function(u){var p=u,m=0;return p>=4096&&(m+=13,p>>>=13),p>=64&&(m+=7,p>>>=7),p>=8&&(m+=4,p>>>=4),p>=2&&(m+=2,p>>>=2),m+p},a.prototype._zeroBits=function(u){if(u===0)return 26;var p=u,m=0;return p&8191||(m+=13,p>>>=13),p&127||(m+=7,p>>>=7),p&15||(m+=4,p>>>=4),p&3||(m+=2,p>>>=2),p&1||m++,m},a.prototype.bitLength=function(){var u=this.words[this.length-1],p=this._countBits(u);return(this.length-1)*26+p};function P(T){for(var u=new Array(T.bitLength()),p=0;p<u.length;p++){var m=p/26|0,y=p%26;u[p]=(T.words[m]&1<<y)>>>y}return u}a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var u=0,p=0;p<this.length;p++){var m=this._zeroBits(this.words[p]);if(u+=m,m!==26)break}return u},a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},a.prototype.toTwos=function(u){return this.negative!==0?this.abs().inotn(u).iaddn(1):this.clone()},a.prototype.fromTwos=function(u){return this.testn(u-1)?this.notn(u).iaddn(1).ineg():this.clone()},a.prototype.isNeg=function(){return this.negative!==0},a.prototype.neg=function(){return this.clone().ineg()},a.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},a.prototype.iuor=function(u){for(;this.length<u.length;)this.words[this.length++]=0;for(var p=0;p<u.length;p++)this.words[p]=this.words[p]|u.words[p];return this.strip()},a.prototype.ior=function(u){return o((this.negative|u.negative)===0),this.iuor(u)},a.prototype.or=function(u){return this.length>u.length?this.clone().ior(u):u.clone().ior(this)},a.prototype.uor=function(u){return this.length>u.length?this.clone().iuor(u):u.clone().iuor(this)},a.prototype.iuand=function(u){var p;this.length>u.length?p=u:p=this;for(var m=0;m<p.length;m++)this.words[m]=this.words[m]&u.words[m];return this.length=p.length,this.strip()},a.prototype.iand=function(u){return o((this.negative|u.negative)===0),this.iuand(u)},a.prototype.and=function(u){return this.length>u.length?this.clone().iand(u):u.clone().iand(this)},a.prototype.uand=function(u){return this.length>u.length?this.clone().iuand(u):u.clone().iuand(this)},a.prototype.iuxor=function(u){var p,m;this.length>u.length?(p=this,m=u):(p=u,m=this);for(var y=0;y<m.length;y++)this.words[y]=p.words[y]^m.words[y];if(this!==p)for(;y<p.length;y++)this.words[y]=p.words[y];return this.length=p.length,this.strip()},a.prototype.ixor=function(u){return o((this.negative|u.negative)===0),this.iuxor(u)},a.prototype.xor=function(u){return this.length>u.length?this.clone().ixor(u):u.clone().ixor(this)},a.prototype.uxor=function(u){return this.length>u.length?this.clone().iuxor(u):u.clone().iuxor(this)},a.prototype.inotn=function(u){o(typeof u=="number"&&u>=0);var p=Math.ceil(u/26)|0,m=u%26;this._expand(p),m>0&&p--;for(var y=0;y<p;y++)this.words[y]=~this.words[y]&67108863;return m>0&&(this.words[y]=~this.words[y]&67108863>>26-m),this.strip()},a.prototype.notn=function(u){return this.clone().inotn(u)},a.prototype.setn=function(u,p){o(typeof u=="number"&&u>=0);var m=u/26|0,y=u%26;return this._expand(m+1),p?this.words[m]=this.words[m]|1<<y:this.words[m]=this.words[m]&~(1<<y),this.strip()},a.prototype.iadd=function(u){var p;if(this.negative!==0&&u.negative===0)return this.negative=0,p=this.isub(u),this.negative^=1,this._normSign();if(this.negative===0&&u.negative!==0)return u.negative=0,p=this.isub(u),u.negative=1,p._normSign();var m,y;this.length>u.length?(m=this,y=u):(m=u,y=this);for(var E=0,$=0;$<y.length;$++)p=(m.words[$]|0)+(y.words[$]|0)+E,this.words[$]=p&67108863,E=p>>>26;for(;E!==0&&$<m.length;$++)p=(m.words[$]|0)+E,this.words[$]=p&67108863,E=p>>>26;if(this.length=m.length,E!==0)this.words[this.length]=E,this.length++;else if(m!==this)for(;$<m.length;$++)this.words[$]=m.words[$];return this},a.prototype.add=function(u){var p;return u.negative!==0&&this.negative===0?(u.negative=0,p=this.sub(u),u.negative^=1,p):u.negative===0&&this.negative!==0?(this.negative=0,p=u.sub(this),this.negative=1,p):this.length>u.length?this.clone().iadd(u):u.clone().iadd(this)},a.prototype.isub=function(u){if(u.negative!==0){u.negative=0;var p=this.iadd(u);return u.negative=1,p._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(u),this.negative=1,this._normSign();var m=this.cmp(u);if(m===0)return this.negative=0,this.length=1,this.words[0]=0,this;var y,E;m>0?(y=this,E=u):(y=u,E=this);for(var $=0,k=0;k<E.length;k++)p=(y.words[k]|0)-(E.words[k]|0)+$,$=p>>26,this.words[k]=p&67108863;for(;$!==0&&k<y.length;k++)p=(y.words[k]|0)+$,$=p>>26,this.words[k]=p&67108863;if($===0&&k<y.length&&y!==this)for(;k<y.length;k++)this.words[k]=y.words[k];return this.length=Math.max(this.length,k),y!==this&&(this.negative=1),this.strip()},a.prototype.sub=function(u){return this.clone().isub(u)};function L(T,u,p){p.negative=u.negative^T.negative;var m=T.length+u.length|0;p.length=m,m=m-1|0;var y=T.words[0]|0,E=u.words[0]|0,$=y*E,k=$&67108863,_=$/67108864|0;p.words[0]=k;for(var d=1;d<m;d++){for(var w=_>>>26,I=_&67108863,C=Math.min(d,u.length-1),V=Math.max(0,d-T.length+1);V<=C;V++){var O=d-V|0;y=T.words[O]|0,E=u.words[V]|0,$=y*E+I,w+=$/67108864|0,I=$&67108863}p.words[d]=I|0,_=w|0}return _!==0?p.words[d]=_|0:p.length--,p.strip()}var F=function(u,p,m){var y=u.words,E=p.words,$=m.words,k=0,_,d,w,I=y[0]|0,C=I&8191,V=I>>>13,O=y[1]|0,j=O&8191,D=O>>>13,Q=y[2]|0,oe=Q&8191,de=Q>>>13,Z=y[3]|0,H=Z&8191,ge=Z>>>13,Me=y[4]|0,ke=Me&8191,Ie=Me>>>13,et=y[5]|0,Fe=et&8191,$e=et>>>13,$t=y[6]|0,He=$t&8191,Ye=$t>>>13,St=y[7]|0,De=St&8191,qe=St>>>13,At=y[8]|0,ze=At&8191,Ge=At>>>13,kt=y[9]|0,se=kt&8191,J=kt>>>13,re=E[0]|0,he=re&8191,ye=re>>>13,Oe=E[1]|0,Ee=Oe&8191,Ue=Oe>>>13,bt=E[2]|0,Le=bt&8191,Ve=bt>>>13,mt=E[3]|0,Ke=mt&8191,Xe=mt>>>13,Mt=E[4]|0,me=Mt&8191,le=Mt>>>13,_e=E[5]|0,be=_e&8191,Se=_e>>>13,Je=E[6]|0,Te=Je&8191,Ne=Je>>>13,ne=E[7]|0,ie=ne&8191,ae=ne>>>13,Y=E[8]|0,fe=Y&8191,ve=Y>>>13,Pe=E[9]|0,xe=Pe&8191,Be=Pe>>>13;m.negative=u.negative^p.negative,m.length=19,_=Math.imul(C,he),d=Math.imul(C,ye),d=d+Math.imul(V,he)|0,w=Math.imul(V,ye);var Qe=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(Qe>>>26)|0,Qe&=67108863,_=Math.imul(j,he),d=Math.imul(j,ye),d=d+Math.imul(D,he)|0,w=Math.imul(D,ye),_=_+Math.imul(C,Ee)|0,d=d+Math.imul(C,Ue)|0,d=d+Math.imul(V,Ee)|0,w=w+Math.imul(V,Ue)|0;var Ze=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(Ze>>>26)|0,Ze&=67108863,_=Math.imul(oe,he),d=Math.imul(oe,ye),d=d+Math.imul(de,he)|0,w=Math.imul(de,ye),_=_+Math.imul(j,Ee)|0,d=d+Math.imul(j,Ue)|0,d=d+Math.imul(D,Ee)|0,w=w+Math.imul(D,Ue)|0,_=_+Math.imul(C,Le)|0,d=d+Math.imul(C,Ve)|0,d=d+Math.imul(V,Le)|0,w=w+Math.imul(V,Ve)|0;var xt=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(xt>>>26)|0,xt&=67108863,_=Math.imul(H,he),d=Math.imul(H,ye),d=d+Math.imul(ge,he)|0,w=Math.imul(ge,ye),_=_+Math.imul(oe,Ee)|0,d=d+Math.imul(oe,Ue)|0,d=d+Math.imul(de,Ee)|0,w=w+Math.imul(de,Ue)|0,_=_+Math.imul(j,Le)|0,d=d+Math.imul(j,Ve)|0,d=d+Math.imul(D,Le)|0,w=w+Math.imul(D,Ve)|0,_=_+Math.imul(C,Ke)|0,d=d+Math.imul(C,Xe)|0,d=d+Math.imul(V,Ke)|0,w=w+Math.imul(V,Xe)|0;var it=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(it>>>26)|0,it&=67108863,_=Math.imul(ke,he),d=Math.imul(ke,ye),d=d+Math.imul(Ie,he)|0,w=Math.imul(Ie,ye),_=_+Math.imul(H,Ee)|0,d=d+Math.imul(H,Ue)|0,d=d+Math.imul(ge,Ee)|0,w=w+Math.imul(ge,Ue)|0,_=_+Math.imul(oe,Le)|0,d=d+Math.imul(oe,Ve)|0,d=d+Math.imul(de,Le)|0,w=w+Math.imul(de,Ve)|0,_=_+Math.imul(j,Ke)|0,d=d+Math.imul(j,Xe)|0,d=d+Math.imul(D,Ke)|0,w=w+Math.imul(D,Xe)|0,_=_+Math.imul(C,me)|0,d=d+Math.imul(C,le)|0,d=d+Math.imul(V,me)|0,w=w+Math.imul(V,le)|0;var dt=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(dt>>>26)|0,dt&=67108863,_=Math.imul(Fe,he),d=Math.imul(Fe,ye),d=d+Math.imul($e,he)|0,w=Math.imul($e,ye),_=_+Math.imul(ke,Ee)|0,d=d+Math.imul(ke,Ue)|0,d=d+Math.imul(Ie,Ee)|0,w=w+Math.imul(Ie,Ue)|0,_=_+Math.imul(H,Le)|0,d=d+Math.imul(H,Ve)|0,d=d+Math.imul(ge,Le)|0,w=w+Math.imul(ge,Ve)|0,_=_+Math.imul(oe,Ke)|0,d=d+Math.imul(oe,Xe)|0,d=d+Math.imul(de,Ke)|0,w=w+Math.imul(de,Xe)|0,_=_+Math.imul(j,me)|0,d=d+Math.imul(j,le)|0,d=d+Math.imul(D,me)|0,w=w+Math.imul(D,le)|0,_=_+Math.imul(C,be)|0,d=d+Math.imul(C,Se)|0,d=d+Math.imul(V,be)|0,w=w+Math.imul(V,Se)|0;var gt=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(gt>>>26)|0,gt&=67108863,_=Math.imul(He,he),d=Math.imul(He,ye),d=d+Math.imul(Ye,he)|0,w=Math.imul(Ye,ye),_=_+Math.imul(Fe,Ee)|0,d=d+Math.imul(Fe,Ue)|0,d=d+Math.imul($e,Ee)|0,w=w+Math.imul($e,Ue)|0,_=_+Math.imul(ke,Le)|0,d=d+Math.imul(ke,Ve)|0,d=d+Math.imul(Ie,Le)|0,w=w+Math.imul(Ie,Ve)|0,_=_+Math.imul(H,Ke)|0,d=d+Math.imul(H,Xe)|0,d=d+Math.imul(ge,Ke)|0,w=w+Math.imul(ge,Xe)|0,_=_+Math.imul(oe,me)|0,d=d+Math.imul(oe,le)|0,d=d+Math.imul(de,me)|0,w=w+Math.imul(de,le)|0,_=_+Math.imul(j,be)|0,d=d+Math.imul(j,Se)|0,d=d+Math.imul(D,be)|0,w=w+Math.imul(D,Se)|0,_=_+Math.imul(C,Te)|0,d=d+Math.imul(C,Ne)|0,d=d+Math.imul(V,Te)|0,w=w+Math.imul(V,Ne)|0;var yt=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(yt>>>26)|0,yt&=67108863,_=Math.imul(De,he),d=Math.imul(De,ye),d=d+Math.imul(qe,he)|0,w=Math.imul(qe,ye),_=_+Math.imul(He,Ee)|0,d=d+Math.imul(He,Ue)|0,d=d+Math.imul(Ye,Ee)|0,w=w+Math.imul(Ye,Ue)|0,_=_+Math.imul(Fe,Le)|0,d=d+Math.imul(Fe,Ve)|0,d=d+Math.imul($e,Le)|0,w=w+Math.imul($e,Ve)|0,_=_+Math.imul(ke,Ke)|0,d=d+Math.imul(ke,Xe)|0,d=d+Math.imul(Ie,Ke)|0,w=w+Math.imul(Ie,Xe)|0,_=_+Math.imul(H,me)|0,d=d+Math.imul(H,le)|0,d=d+Math.imul(ge,me)|0,w=w+Math.imul(ge,le)|0,_=_+Math.imul(oe,be)|0,d=d+Math.imul(oe,Se)|0,d=d+Math.imul(de,be)|0,w=w+Math.imul(de,Se)|0,_=_+Math.imul(j,Te)|0,d=d+Math.imul(j,Ne)|0,d=d+Math.imul(D,Te)|0,w=w+Math.imul(D,Ne)|0,_=_+Math.imul(C,ie)|0,d=d+Math.imul(C,ae)|0,d=d+Math.imul(V,ie)|0,w=w+Math.imul(V,ae)|0;var Et=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(Et>>>26)|0,Et&=67108863,_=Math.imul(ze,he),d=Math.imul(ze,ye),d=d+Math.imul(Ge,he)|0,w=Math.imul(Ge,ye),_=_+Math.imul(De,Ee)|0,d=d+Math.imul(De,Ue)|0,d=d+Math.imul(qe,Ee)|0,w=w+Math.imul(qe,Ue)|0,_=_+Math.imul(He,Le)|0,d=d+Math.imul(He,Ve)|0,d=d+Math.imul(Ye,Le)|0,w=w+Math.imul(Ye,Ve)|0,_=_+Math.imul(Fe,Ke)|0,d=d+Math.imul(Fe,Xe)|0,d=d+Math.imul($e,Ke)|0,w=w+Math.imul($e,Xe)|0,_=_+Math.imul(ke,me)|0,d=d+Math.imul(ke,le)|0,d=d+Math.imul(Ie,me)|0,w=w+Math.imul(Ie,le)|0,_=_+Math.imul(H,be)|0,d=d+Math.imul(H,Se)|0,d=d+Math.imul(ge,be)|0,w=w+Math.imul(ge,Se)|0,_=_+Math.imul(oe,Te)|0,d=d+Math.imul(oe,Ne)|0,d=d+Math.imul(de,Te)|0,w=w+Math.imul(de,Ne)|0,_=_+Math.imul(j,ie)|0,d=d+Math.imul(j,ae)|0,d=d+Math.imul(D,ie)|0,w=w+Math.imul(D,ae)|0,_=_+Math.imul(C,fe)|0,d=d+Math.imul(C,ve)|0,d=d+Math.imul(V,fe)|0,w=w+Math.imul(V,ve)|0;var vt=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(vt>>>26)|0,vt&=67108863,_=Math.imul(se,he),d=Math.imul(se,ye),d=d+Math.imul(J,he)|0,w=Math.imul(J,ye),_=_+Math.imul(ze,Ee)|0,d=d+Math.imul(ze,Ue)|0,d=d+Math.imul(Ge,Ee)|0,w=w+Math.imul(Ge,Ue)|0,_=_+Math.imul(De,Le)|0,d=d+Math.imul(De,Ve)|0,d=d+Math.imul(qe,Le)|0,w=w+Math.imul(qe,Ve)|0,_=_+Math.imul(He,Ke)|0,d=d+Math.imul(He,Xe)|0,d=d+Math.imul(Ye,Ke)|0,w=w+Math.imul(Ye,Xe)|0,_=_+Math.imul(Fe,me)|0,d=d+Math.imul(Fe,le)|0,d=d+Math.imul($e,me)|0,w=w+Math.imul($e,le)|0,_=_+Math.imul(ke,be)|0,d=d+Math.imul(ke,Se)|0,d=d+Math.imul(Ie,be)|0,w=w+Math.imul(Ie,Se)|0,_=_+Math.imul(H,Te)|0,d=d+Math.imul(H,Ne)|0,d=d+Math.imul(ge,Te)|0,w=w+Math.imul(ge,Ne)|0,_=_+Math.imul(oe,ie)|0,d=d+Math.imul(oe,ae)|0,d=d+Math.imul(de,ie)|0,w=w+Math.imul(de,ae)|0,_=_+Math.imul(j,fe)|0,d=d+Math.imul(j,ve)|0,d=d+Math.imul(D,fe)|0,w=w+Math.imul(D,ve)|0,_=_+Math.imul(C,xe)|0,d=d+Math.imul(C,Be)|0,d=d+Math.imul(V,xe)|0,w=w+Math.imul(V,Be)|0;var _t=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(_t>>>26)|0,_t&=67108863,_=Math.imul(se,Ee),d=Math.imul(se,Ue),d=d+Math.imul(J,Ee)|0,w=Math.imul(J,Ue),_=_+Math.imul(ze,Le)|0,d=d+Math.imul(ze,Ve)|0,d=d+Math.imul(Ge,Le)|0,w=w+Math.imul(Ge,Ve)|0,_=_+Math.imul(De,Ke)|0,d=d+Math.imul(De,Xe)|0,d=d+Math.imul(qe,Ke)|0,w=w+Math.imul(qe,Xe)|0,_=_+Math.imul(He,me)|0,d=d+Math.imul(He,le)|0,d=d+Math.imul(Ye,me)|0,w=w+Math.imul(Ye,le)|0,_=_+Math.imul(Fe,be)|0,d=d+Math.imul(Fe,Se)|0,d=d+Math.imul($e,be)|0,w=w+Math.imul($e,Se)|0,_=_+Math.imul(ke,Te)|0,d=d+Math.imul(ke,Ne)|0,d=d+Math.imul(Ie,Te)|0,w=w+Math.imul(Ie,Ne)|0,_=_+Math.imul(H,ie)|0,d=d+Math.imul(H,ae)|0,d=d+Math.imul(ge,ie)|0,w=w+Math.imul(ge,ae)|0,_=_+Math.imul(oe,fe)|0,d=d+Math.imul(oe,ve)|0,d=d+Math.imul(de,fe)|0,w=w+Math.imul(de,ve)|0,_=_+Math.imul(j,xe)|0,d=d+Math.imul(j,Be)|0,d=d+Math.imul(D,xe)|0,w=w+Math.imul(D,Be)|0;var wt=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(wt>>>26)|0,wt&=67108863,_=Math.imul(se,Le),d=Math.imul(se,Ve),d=d+Math.imul(J,Le)|0,w=Math.imul(J,Ve),_=_+Math.imul(ze,Ke)|0,d=d+Math.imul(ze,Xe)|0,d=d+Math.imul(Ge,Ke)|0,w=w+Math.imul(Ge,Xe)|0,_=_+Math.imul(De,me)|0,d=d+Math.imul(De,le)|0,d=d+Math.imul(qe,me)|0,w=w+Math.imul(qe,le)|0,_=_+Math.imul(He,be)|0,d=d+Math.imul(He,Se)|0,d=d+Math.imul(Ye,be)|0,w=w+Math.imul(Ye,Se)|0,_=_+Math.imul(Fe,Te)|0,d=d+Math.imul(Fe,Ne)|0,d=d+Math.imul($e,Te)|0,w=w+Math.imul($e,Ne)|0,_=_+Math.imul(ke,ie)|0,d=d+Math.imul(ke,ae)|0,d=d+Math.imul(Ie,ie)|0,w=w+Math.imul(Ie,ae)|0,_=_+Math.imul(H,fe)|0,d=d+Math.imul(H,ve)|0,d=d+Math.imul(ge,fe)|0,w=w+Math.imul(ge,ve)|0,_=_+Math.imul(oe,xe)|0,d=d+Math.imul(oe,Be)|0,d=d+Math.imul(de,xe)|0,w=w+Math.imul(de,Be)|0;var ct=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(ct>>>26)|0,ct&=67108863,_=Math.imul(se,Ke),d=Math.imul(se,Xe),d=d+Math.imul(J,Ke)|0,w=Math.imul(J,Xe),_=_+Math.imul(ze,me)|0,d=d+Math.imul(ze,le)|0,d=d+Math.imul(Ge,me)|0,w=w+Math.imul(Ge,le)|0,_=_+Math.imul(De,be)|0,d=d+Math.imul(De,Se)|0,d=d+Math.imul(qe,be)|0,w=w+Math.imul(qe,Se)|0,_=_+Math.imul(He,Te)|0,d=d+Math.imul(He,Ne)|0,d=d+Math.imul(Ye,Te)|0,w=w+Math.imul(Ye,Ne)|0,_=_+Math.imul(Fe,ie)|0,d=d+Math.imul(Fe,ae)|0,d=d+Math.imul($e,ie)|0,w=w+Math.imul($e,ae)|0,_=_+Math.imul(ke,fe)|0,d=d+Math.imul(ke,ve)|0,d=d+Math.imul(Ie,fe)|0,w=w+Math.imul(Ie,ve)|0,_=_+Math.imul(H,xe)|0,d=d+Math.imul(H,Be)|0,d=d+Math.imul(ge,xe)|0,w=w+Math.imul(ge,Be)|0;var pt=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(pt>>>26)|0,pt&=67108863,_=Math.imul(se,me),d=Math.imul(se,le),d=d+Math.imul(J,me)|0,w=Math.imul(J,le),_=_+Math.imul(ze,be)|0,d=d+Math.imul(ze,Se)|0,d=d+Math.imul(Ge,be)|0,w=w+Math.imul(Ge,Se)|0,_=_+Math.imul(De,Te)|0,d=d+Math.imul(De,Ne)|0,d=d+Math.imul(qe,Te)|0,w=w+Math.imul(qe,Ne)|0,_=_+Math.imul(He,ie)|0,d=d+Math.imul(He,ae)|0,d=d+Math.imul(Ye,ie)|0,w=w+Math.imul(Ye,ae)|0,_=_+Math.imul(Fe,fe)|0,d=d+Math.imul(Fe,ve)|0,d=d+Math.imul($e,fe)|0,w=w+Math.imul($e,ve)|0,_=_+Math.imul(ke,xe)|0,d=d+Math.imul(ke,Be)|0,d=d+Math.imul(Ie,xe)|0,w=w+Math.imul(Ie,Be)|0;var at=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(at>>>26)|0,at&=67108863,_=Math.imul(se,be),d=Math.imul(se,Se),d=d+Math.imul(J,be)|0,w=Math.imul(J,Se),_=_+Math.imul(ze,Te)|0,d=d+Math.imul(ze,Ne)|0,d=d+Math.imul(Ge,Te)|0,w=w+Math.imul(Ge,Ne)|0,_=_+Math.imul(De,ie)|0,d=d+Math.imul(De,ae)|0,d=d+Math.imul(qe,ie)|0,w=w+Math.imul(qe,ae)|0,_=_+Math.imul(He,fe)|0,d=d+Math.imul(He,ve)|0,d=d+Math.imul(Ye,fe)|0,w=w+Math.imul(Ye,ve)|0,_=_+Math.imul(Fe,xe)|0,d=d+Math.imul(Fe,Be)|0,d=d+Math.imul($e,xe)|0,w=w+Math.imul($e,Be)|0;var lt=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(lt>>>26)|0,lt&=67108863,_=Math.imul(se,Te),d=Math.imul(se,Ne),d=d+Math.imul(J,Te)|0,w=Math.imul(J,Ne),_=_+Math.imul(ze,ie)|0,d=d+Math.imul(ze,ae)|0,d=d+Math.imul(Ge,ie)|0,w=w+Math.imul(Ge,ae)|0,_=_+Math.imul(De,fe)|0,d=d+Math.imul(De,ve)|0,d=d+Math.imul(qe,fe)|0,w=w+Math.imul(qe,ve)|0,_=_+Math.imul(He,xe)|0,d=d+Math.imul(He,Be)|0,d=d+Math.imul(Ye,xe)|0,w=w+Math.imul(Ye,Be)|0;var ht=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(ht>>>26)|0,ht&=67108863,_=Math.imul(se,ie),d=Math.imul(se,ae),d=d+Math.imul(J,ie)|0,w=Math.imul(J,ae),_=_+Math.imul(ze,fe)|0,d=d+Math.imul(ze,ve)|0,d=d+Math.imul(Ge,fe)|0,w=w+Math.imul(Ge,ve)|0,_=_+Math.imul(De,xe)|0,d=d+Math.imul(De,Be)|0,d=d+Math.imul(qe,xe)|0,w=w+Math.imul(qe,Be)|0;var ot=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(ot>>>26)|0,ot&=67108863,_=Math.imul(se,fe),d=Math.imul(se,ve),d=d+Math.imul(J,fe)|0,w=Math.imul(J,ve),_=_+Math.imul(ze,xe)|0,d=d+Math.imul(ze,Be)|0,d=d+Math.imul(Ge,xe)|0,w=w+Math.imul(Ge,Be)|0;var je=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(je>>>26)|0,je&=67108863,_=Math.imul(se,xe),d=Math.imul(se,Be),d=d+Math.imul(J,xe)|0,w=Math.imul(J,Be);var We=(k+_|0)+((d&8191)<<13)|0;return k=(w+(d>>>13)|0)+(We>>>26)|0,We&=67108863,$[0]=Qe,$[1]=Ze,$[2]=xt,$[3]=it,$[4]=dt,$[5]=gt,$[6]=yt,$[7]=Et,$[8]=vt,$[9]=_t,$[10]=wt,$[11]=ct,$[12]=pt,$[13]=at,$[14]=lt,$[15]=ht,$[16]=ot,$[17]=je,$[18]=We,k!==0&&($[19]=k,m.length++),m};Math.imul||(F=L);function U(T,u,p){p.negative=u.negative^T.negative,p.length=T.length+u.length;for(var m=0,y=0,E=0;E<p.length-1;E++){var $=y;y=0;for(var k=m&67108863,_=Math.min(E,u.length-1),d=Math.max(0,E-T.length+1);d<=_;d++){var w=E-d,I=T.words[w]|0,C=u.words[d]|0,V=I*C,O=V&67108863;$=$+(V/67108864|0)|0,O=O+k|0,k=O&67108863,$=$+(O>>>26)|0,y+=$>>>26,$&=67108863}p.words[E]=k,m=$,$=y}return m!==0?p.words[E]=m:p.length--,p.strip()}function q(T,u,p){var m=new X;return m.mulp(T,u,p)}a.prototype.mulTo=function(u,p){var m,y=this.length+u.length;return this.length===10&&u.length===10?m=F(this,u,p):y<63?m=L(this,u,p):y<1024?m=U(this,u,p):m=q(this,u,p),m};function X(T,u){this.x=T,this.y=u}X.prototype.makeRBT=function(u){for(var p=new Array(u),m=a.prototype._countBits(u)-1,y=0;y<u;y++)p[y]=this.revBin(y,m,u);return p},X.prototype.revBin=function(u,p,m){if(u===0||u===m-1)return u;for(var y=0,E=0;E<p;E++)y|=(u&1)<<p-E-1,u>>=1;return y},X.prototype.permute=function(u,p,m,y,E,$){for(var k=0;k<$;k++)y[k]=p[u[k]],E[k]=m[u[k]]},X.prototype.transform=function(u,p,m,y,E,$){this.permute($,u,p,m,y,E);for(var k=1;k<E;k<<=1)for(var _=k<<1,d=Math.cos(2*Math.PI/_),w=Math.sin(2*Math.PI/_),I=0;I<E;I+=_)for(var C=d,V=w,O=0;O<k;O++){var j=m[I+O],D=y[I+O],Q=m[I+O+k],oe=y[I+O+k],de=C*Q-V*oe;oe=C*oe+V*Q,Q=de,m[I+O]=j+Q,y[I+O]=D+oe,m[I+O+k]=j-Q,y[I+O+k]=D-oe,O!==_&&(de=d*C-w*V,V=d*V+w*C,C=de)}},X.prototype.guessLen13b=function(u,p){var m=Math.max(p,u)|1,y=m&1,E=0;for(m=m/2|0;m;m=m>>>1)E++;return 1<<E+1+y},X.prototype.conjugate=function(u,p,m){if(!(m<=1))for(var y=0;y<m/2;y++){var E=u[y];u[y]=u[m-y-1],u[m-y-1]=E,E=p[y],p[y]=-p[m-y-1],p[m-y-1]=-E}},X.prototype.normalize13b=function(u,p){for(var m=0,y=0;y<p/2;y++){var E=Math.round(u[2*y+1]/p)*8192+Math.round(u[2*y]/p)+m;u[y]=E&67108863,E<67108864?m=0:m=E/67108864|0}return u},X.prototype.convert13b=function(u,p,m,y){for(var E=0,$=0;$<p;$++)E=E+(u[$]|0),m[2*$]=E&8191,E=E>>>13,m[2*$+1]=E&8191,E=E>>>13;for($=2*p;$<y;++$)m[$]=0;o(E===0),o((E&-8192)===0)},X.prototype.stub=function(u){for(var p=new Array(u),m=0;m<u;m++)p[m]=0;return p},X.prototype.mulp=function(u,p,m){var y=2*this.guessLen13b(u.length,p.length),E=this.makeRBT(y),$=this.stub(y),k=new Array(y),_=new Array(y),d=new Array(y),w=new Array(y),I=new Array(y),C=new Array(y),V=m.words;V.length=y,this.convert13b(u.words,u.length,k,y),this.convert13b(p.words,p.length,w,y),this.transform(k,$,_,d,y,E),this.transform(w,$,I,C,y,E);for(var O=0;O<y;O++){var j=_[O]*I[O]-d[O]*C[O];d[O]=_[O]*C[O]+d[O]*I[O],_[O]=j}return this.conjugate(_,d,y),this.transform(_,d,V,$,y,E),this.conjugate(V,$,y),this.normalize13b(V,y),m.negative=u.negative^p.negative,m.length=u.length+p.length,m.strip()},a.prototype.mul=function(u){var p=new a(null);return p.words=new Array(this.length+u.length),this.mulTo(u,p)},a.prototype.mulf=function(u){var p=new a(null);return p.words=new Array(this.length+u.length),q(this,u,p)},a.prototype.imul=function(u){return this.clone().mulTo(u,this)},a.prototype.imuln=function(u){o(typeof u=="number"),o(u<67108864);for(var p=0,m=0;m<this.length;m++){var y=(this.words[m]|0)*u,E=(y&67108863)+(p&67108863);p>>=26,p+=y/67108864|0,p+=E>>>26,this.words[m]=E&67108863}return p!==0&&(this.words[m]=p,this.length++),this},a.prototype.muln=function(u){return this.clone().imuln(u)},a.prototype.sqr=function(){return this.mul(this)},a.prototype.isqr=function(){return this.imul(this.clone())},a.prototype.pow=function(u){var p=P(u);if(p.length===0)return new a(1);for(var m=this,y=0;y<p.length&&p[y]===0;y++,m=m.sqr());if(++y<p.length)for(var E=m.sqr();y<p.length;y++,E=E.sqr())p[y]!==0&&(m=m.mul(E));return m},a.prototype.iushln=function(u){o(typeof u=="number"&&u>=0);var p=u%26,m=(u-p)/26,y=67108863>>>26-p<<26-p,E;if(p!==0){var $=0;for(E=0;E<this.length;E++){var k=this.words[E]&y,_=(this.words[E]|0)-k<<p;this.words[E]=_|$,$=k>>>26-p}$&&(this.words[E]=$,this.length++)}if(m!==0){for(E=this.length-1;E>=0;E--)this.words[E+m]=this.words[E];for(E=0;E<m;E++)this.words[E]=0;this.length+=m}return this.strip()},a.prototype.ishln=function(u){return o(this.negative===0),this.iushln(u)},a.prototype.iushrn=function(u,p,m){o(typeof u=="number"&&u>=0);var y;p?y=(p-p%26)/26:y=0;var E=u%26,$=Math.min((u-E)/26,this.length),k=67108863^67108863>>>E<<E,_=m;if(y-=$,y=Math.max(0,y),_){for(var d=0;d<$;d++)_.words[d]=this.words[d];_.length=$}if($!==0)if(this.length>$)for(this.length-=$,d=0;d<this.length;d++)this.words[d]=this.words[d+$];else this.words[0]=0,this.length=1;var w=0;for(d=this.length-1;d>=0&&(w!==0||d>=y);d--){var I=this.words[d]|0;this.words[d]=w<<26-E|I>>>E,w=I&k}return _&&w!==0&&(_.words[_.length++]=w),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},a.prototype.ishrn=function(u,p,m){return o(this.negative===0),this.iushrn(u,p,m)},a.prototype.shln=function(u){return this.clone().ishln(u)},a.prototype.ushln=function(u){return this.clone().iushln(u)},a.prototype.shrn=function(u){return this.clone().ishrn(u)},a.prototype.ushrn=function(u){return this.clone().iushrn(u)},a.prototype.testn=function(u){o(typeof u=="number"&&u>=0);var p=u%26,m=(u-p)/26,y=1<<p;if(this.length<=m)return!1;var E=this.words[m];return!!(E&y)},a.prototype.imaskn=function(u){o(typeof u=="number"&&u>=0);var p=u%26,m=(u-p)/26;if(o(this.negative===0,"imaskn works only with positive numbers"),this.length<=m)return this;if(p!==0&&m++,this.length=Math.min(m,this.length),p!==0){var y=67108863^67108863>>>p<<p;this.words[this.length-1]&=y}return this.strip()},a.prototype.maskn=function(u){return this.clone().imaskn(u)},a.prototype.iaddn=function(u){return o(typeof u=="number"),o(u<67108864),u<0?this.isubn(-u):this.negative!==0?this.length===1&&(this.words[0]|0)<u?(this.words[0]=u-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(u),this.negative=1,this):this._iaddn(u)},a.prototype._iaddn=function(u){this.words[0]+=u;for(var p=0;p<this.length&&this.words[p]>=67108864;p++)this.words[p]-=67108864,p===this.length-1?this.words[p+1]=1:this.words[p+1]++;return this.length=Math.max(this.length,p+1),this},a.prototype.isubn=function(u){if(o(typeof u=="number"),o(u<67108864),u<0)return this.iaddn(-u);if(this.negative!==0)return this.negative=0,this.iaddn(u),this.negative=1,this;if(this.words[0]-=u,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var p=0;p<this.length&&this.words[p]<0;p++)this.words[p]+=67108864,this.words[p+1]-=1;return this.strip()},a.prototype.addn=function(u){return this.clone().iaddn(u)},a.prototype.subn=function(u){return this.clone().isubn(u)},a.prototype.iabs=function(){return this.negative=0,this},a.prototype.abs=function(){return this.clone().iabs()},a.prototype._ishlnsubmul=function(u,p,m){var y=u.length+m,E;this._expand(y);var $,k=0;for(E=0;E<u.length;E++){$=(this.words[E+m]|0)+k;var _=(u.words[E]|0)*p;$-=_&67108863,k=($>>26)-(_/67108864|0),this.words[E+m]=$&67108863}for(;E<this.length-m;E++)$=(this.words[E+m]|0)+k,k=$>>26,this.words[E+m]=$&67108863;if(k===0)return this.strip();for(o(k===-1),k=0,E=0;E<this.length;E++)$=-(this.words[E]|0)+k,k=$>>26,this.words[E]=$&67108863;return this.negative=1,this.strip()},a.prototype._wordDiv=function(u,p){var m=this.length-u.length,y=this.clone(),E=u,$=E.words[E.length-1]|0,k=this._countBits($);m=26-k,m!==0&&(E=E.ushln(m),y.iushln(m),$=E.words[E.length-1]|0);var _=y.length-E.length,d;if(p!=="mod"){d=new a(null),d.length=_+1,d.words=new Array(d.length);for(var w=0;w<d.length;w++)d.words[w]=0}var I=y.clone()._ishlnsubmul(E,1,_);I.negative===0&&(y=I,d&&(d.words[_]=1));for(var C=_-1;C>=0;C--){var V=(y.words[E.length+C]|0)*67108864+(y.words[E.length+C-1]|0);for(V=Math.min(V/$|0,67108863),y._ishlnsubmul(E,V,C);y.negative!==0;)V--,y.negative=0,y._ishlnsubmul(E,1,C),y.isZero()||(y.negative^=1);d&&(d.words[C]=V)}return d&&d.strip(),y.strip(),p!=="div"&&m!==0&&y.iushrn(m),{div:d||null,mod:y}},a.prototype.divmod=function(u,p,m){if(o(!u.isZero()),this.isZero())return{div:new a(0),mod:new a(0)};var y,E,$;return this.negative!==0&&u.negative===0?($=this.neg().divmod(u,p),p!=="mod"&&(y=$.div.neg()),p!=="div"&&(E=$.mod.neg(),m&&E.negative!==0&&E.iadd(u)),{div:y,mod:E}):this.negative===0&&u.negative!==0?($=this.divmod(u.neg(),p),p!=="mod"&&(y=$.div.neg()),{div:y,mod:$.mod}):this.negative&u.negative?($=this.neg().divmod(u.neg(),p),p!=="div"&&(E=$.mod.neg(),m&&E.negative!==0&&E.isub(u)),{div:$.div,mod:E}):u.length>this.length||this.cmp(u)<0?{div:new a(0),mod:this}:u.length===1?p==="div"?{div:this.divn(u.words[0]),mod:null}:p==="mod"?{div:null,mod:new a(this.modn(u.words[0]))}:{div:this.divn(u.words[0]),mod:new a(this.modn(u.words[0]))}:this._wordDiv(u,p)},a.prototype.div=function(u){return this.divmod(u,"div",!1).div},a.prototype.mod=function(u){return this.divmod(u,"mod",!1).mod},a.prototype.umod=function(u){return this.divmod(u,"mod",!0).mod},a.prototype.divRound=function(u){var p=this.divmod(u);if(p.mod.isZero())return p.div;var m=p.div.negative!==0?p.mod.isub(u):p.mod,y=u.ushrn(1),E=u.andln(1),$=m.cmp(y);return $<0||E===1&&$===0?p.div:p.div.negative!==0?p.div.isubn(1):p.div.iaddn(1)},a.prototype.modn=function(u){o(u<=67108863);for(var p=(1<<26)%u,m=0,y=this.length-1;y>=0;y--)m=(p*m+(this.words[y]|0))%u;return m},a.prototype.idivn=function(u){o(u<=67108863);for(var p=0,m=this.length-1;m>=0;m--){var y=(this.words[m]|0)+p*67108864;this.words[m]=y/u|0,p=y%u}return this.strip()},a.prototype.divn=function(u){return this.clone().idivn(u)},a.prototype.egcd=function(u){o(u.negative===0),o(!u.isZero());var p=this,m=u.clone();p.negative!==0?p=p.umod(u):p=p.clone();for(var y=new a(1),E=new a(0),$=new a(0),k=new a(1),_=0;p.isEven()&&m.isEven();)p.iushrn(1),m.iushrn(1),++_;for(var d=m.clone(),w=p.clone();!p.isZero();){for(var I=0,C=1;!(p.words[0]&C)&&I<26;++I,C<<=1);if(I>0)for(p.iushrn(I);I-- >0;)(y.isOdd()||E.isOdd())&&(y.iadd(d),E.isub(w)),y.iushrn(1),E.iushrn(1);for(var V=0,O=1;!(m.words[0]&O)&&V<26;++V,O<<=1);if(V>0)for(m.iushrn(V);V-- >0;)($.isOdd()||k.isOdd())&&($.iadd(d),k.isub(w)),$.iushrn(1),k.iushrn(1);p.cmp(m)>=0?(p.isub(m),y.isub($),E.isub(k)):(m.isub(p),$.isub(y),k.isub(E))}return{a:$,b:k,gcd:m.iushln(_)}},a.prototype._invmp=function(u){o(u.negative===0),o(!u.isZero());var p=this,m=u.clone();p.negative!==0?p=p.umod(u):p=p.clone();for(var y=new a(1),E=new a(0),$=m.clone();p.cmpn(1)>0&&m.cmpn(1)>0;){for(var k=0,_=1;!(p.words[0]&_)&&k<26;++k,_<<=1);if(k>0)for(p.iushrn(k);k-- >0;)y.isOdd()&&y.iadd($),y.iushrn(1);for(var d=0,w=1;!(m.words[0]&w)&&d<26;++d,w<<=1);if(d>0)for(m.iushrn(d);d-- >0;)E.isOdd()&&E.iadd($),E.iushrn(1);p.cmp(m)>=0?(p.isub(m),y.isub(E)):(m.isub(p),E.isub(y))}var I;return p.cmpn(1)===0?I=y:I=E,I.cmpn(0)<0&&I.iadd(u),I},a.prototype.gcd=function(u){if(this.isZero())return u.abs();if(u.isZero())return this.abs();var p=this.clone(),m=u.clone();p.negative=0,m.negative=0;for(var y=0;p.isEven()&&m.isEven();y++)p.iushrn(1),m.iushrn(1);do{for(;p.isEven();)p.iushrn(1);for(;m.isEven();)m.iushrn(1);var E=p.cmp(m);if(E<0){var $=p;p=m,m=$}else if(E===0||m.cmpn(1)===0)break;p.isub(m)}while(!0);return m.iushln(y)},a.prototype.invm=function(u){return this.egcd(u).a.umod(u)},a.prototype.isEven=function(){return(this.words[0]&1)===0},a.prototype.isOdd=function(){return(this.words[0]&1)===1},a.prototype.andln=function(u){return this.words[0]&u},a.prototype.bincn=function(u){o(typeof u=="number");var p=u%26,m=(u-p)/26,y=1<<p;if(this.length<=m)return this._expand(m+1),this.words[m]|=y,this;for(var E=y,$=m;E!==0&&$<this.length;$++){var k=this.words[$]|0;k+=E,E=k>>>26,k&=67108863,this.words[$]=k}return E!==0&&(this.words[$]=E,this.length++),this},a.prototype.isZero=function(){return this.length===1&&this.words[0]===0},a.prototype.cmpn=function(u){var p=u<0;if(this.negative!==0&&!p)return-1;if(this.negative===0&&p)return 1;this.strip();var m;if(this.length>1)m=1;else{p&&(u=-u),o(u<=67108863,"Number is too big");var y=this.words[0]|0;m=y===u?0:y<u?-1:1}return this.negative!==0?-m|0:m},a.prototype.cmp=function(u){if(this.negative!==0&&u.negative===0)return-1;if(this.negative===0&&u.negative!==0)return 1;var p=this.ucmp(u);return this.negative!==0?-p|0:p},a.prototype.ucmp=function(u){if(this.length>u.length)return 1;if(this.length<u.length)return-1;for(var p=0,m=this.length-1;m>=0;m--){var y=this.words[m]|0,E=u.words[m]|0;if(y!==E){y<E?p=-1:y>E&&(p=1);break}}return p},a.prototype.gtn=function(u){return this.cmpn(u)===1},a.prototype.gt=function(u){return this.cmp(u)===1},a.prototype.gten=function(u){return this.cmpn(u)>=0},a.prototype.gte=function(u){return this.cmp(u)>=0},a.prototype.ltn=function(u){return this.cmpn(u)===-1},a.prototype.lt=function(u){return this.cmp(u)===-1},a.prototype.lten=function(u){return this.cmpn(u)<=0},a.prototype.lte=function(u){return this.cmp(u)<=0},a.prototype.eqn=function(u){return this.cmpn(u)===0},a.prototype.eq=function(u){return this.cmp(u)===0},a.red=function(u){return new pe(u)},a.prototype.toRed=function(u){return o(!this.red,"Already a number in reduction context"),o(this.negative===0,"red works only with positives"),u.convertTo(this)._forceRed(u)},a.prototype.fromRed=function(){return o(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},a.prototype._forceRed=function(u){return this.red=u,this},a.prototype.forceRed=function(u){return o(!this.red,"Already a number in reduction context"),this._forceRed(u)},a.prototype.redAdd=function(u){return o(this.red,"redAdd works only with red numbers"),this.red.add(this,u)},a.prototype.redIAdd=function(u){return o(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,u)},a.prototype.redSub=function(u){return o(this.red,"redSub works only with red numbers"),this.red.sub(this,u)},a.prototype.redISub=function(u){return o(this.red,"redISub works only with red numbers"),this.red.isub(this,u)},a.prototype.redShl=function(u){return o(this.red,"redShl works only with red numbers"),this.red.shl(this,u)},a.prototype.redMul=function(u){return o(this.red,"redMul works only with red numbers"),this.red._verify2(this,u),this.red.mul(this,u)},a.prototype.redIMul=function(u){return o(this.red,"redMul works only with red numbers"),this.red._verify2(this,u),this.red.imul(this,u)},a.prototype.redSqr=function(){return o(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},a.prototype.redISqr=function(){return o(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},a.prototype.redSqrt=function(){return o(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},a.prototype.redInvm=function(){return o(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},a.prototype.redNeg=function(){return o(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},a.prototype.redPow=function(u){return o(this.red&&!u.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,u)};var ee={k256:null,p224:null,p192:null,p25519:null};function te(T,u){this.name=T,this.p=new a(u,16),this.n=this.p.bitLength(),this.k=new a(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}te.prototype._tmp=function(){var u=new a(null);return u.words=new Array(Math.ceil(this.n/13)),u},te.prototype.ireduce=function(u){var p=u,m;do this.split(p,this.tmp),p=this.imulK(p),p=p.iadd(this.tmp),m=p.bitLength();while(m>this.n);var y=m<this.n?-1:p.ucmp(this.p);return y===0?(p.words[0]=0,p.length=1):y>0?p.isub(this.p):p.strip!==void 0?p.strip():p._strip(),p},te.prototype.split=function(u,p){u.iushrn(this.n,0,p)},te.prototype.imulK=function(u){return u.imul(this.k)};function ce(){te.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}c(ce,te),ce.prototype.split=function(u,p){for(var m=4194303,y=Math.min(u.length,9),E=0;E<y;E++)p.words[E]=u.words[E];if(p.length=y,u.length<=9){u.words[0]=0,u.length=1;return}var $=u.words[9];for(p.words[p.length++]=$&m,E=10;E<u.length;E++){var k=u.words[E]|0;u.words[E-10]=(k&m)<<4|$>>>22,$=k}$>>>=22,u.words[E-10]=$,$===0&&u.length>10?u.length-=10:u.length-=9},ce.prototype.imulK=function(u){u.words[u.length]=0,u.words[u.length+1]=0,u.length+=2;for(var p=0,m=0;m<u.length;m++){var y=u.words[m]|0;p+=y*977,u.words[m]=p&67108863,p=y*64+(p/67108864|0)}return u.words[u.length-1]===0&&(u.length--,u.words[u.length-1]===0&&u.length--),u};function ue(){te.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}c(ue,te);function Ae(){te.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}c(Ae,te);function we(){te.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}c(we,te),we.prototype.imulK=function(u){for(var p=0,m=0;m<u.length;m++){var y=(u.words[m]|0)*19+p,E=y&67108863;y>>>=26,u.words[m]=E,p=y}return p!==0&&(u.words[u.length++]=p),u},a._prime=function(u){if(ee[u])return ee[u];var p;if(u==="k256")p=new ce;else if(u==="p224")p=new ue;else if(u==="p192")p=new Ae;else if(u==="p25519")p=new we;else throw new Error("Unknown prime "+u);return ee[u]=p,p};function pe(T){if(typeof T=="string"){var u=a._prime(T);this.m=u.p,this.prime=u}else o(T.gtn(1),"modulus must be greater than 1"),this.m=T,this.prime=null}pe.prototype._verify1=function(u){o(u.negative===0,"red works only with positives"),o(u.red,"red works only with red numbers")},pe.prototype._verify2=function(u,p){o((u.negative|p.negative)===0,"red works only with positives"),o(u.red&&u.red===p.red,"red works only with red numbers")},pe.prototype.imod=function(u){return this.prime?this.prime.ireduce(u)._forceRed(this):u.umod(this.m)._forceRed(this)},pe.prototype.neg=function(u){return u.isZero()?u.clone():this.m.sub(u)._forceRed(this)},pe.prototype.add=function(u,p){this._verify2(u,p);var m=u.add(p);return m.cmp(this.m)>=0&&m.isub(this.m),m._forceRed(this)},pe.prototype.iadd=function(u,p){this._verify2(u,p);var m=u.iadd(p);return m.cmp(this.m)>=0&&m.isub(this.m),m},pe.prototype.sub=function(u,p){this._verify2(u,p);var m=u.sub(p);return m.cmpn(0)<0&&m.iadd(this.m),m._forceRed(this)},pe.prototype.isub=function(u,p){this._verify2(u,p);var m=u.isub(p);return m.cmpn(0)<0&&m.iadd(this.m),m},pe.prototype.shl=function(u,p){return this._verify1(u),this.imod(u.ushln(p))},pe.prototype.imul=function(u,p){return this._verify2(u,p),this.imod(u.imul(p))},pe.prototype.mul=function(u,p){return this._verify2(u,p),this.imod(u.mul(p))},pe.prototype.isqr=function(u){return this.imul(u,u.clone())},pe.prototype.sqr=function(u){return this.mul(u,u)},pe.prototype.sqrt=function(u){if(u.isZero())return u.clone();var p=this.m.andln(3);if(o(p%2===1),p===3){var m=this.m.add(new a(1)).iushrn(2);return this.pow(u,m)}for(var y=this.m.subn(1),E=0;!y.isZero()&&y.andln(1)===0;)E++,y.iushrn(1);o(!y.isZero());var $=new a(1).toRed(this),k=$.redNeg(),_=this.m.subn(1).iushrn(1),d=this.m.bitLength();for(d=new a(2*d*d).toRed(this);this.pow(d,_).cmp(k)!==0;)d.redIAdd(k);for(var w=this.pow(d,y),I=this.pow(u,y.addn(1).iushrn(1)),C=this.pow(u,y),V=E;C.cmp($)!==0;){for(var O=C,j=0;O.cmp($)!==0;j++)O=O.redSqr();o(j<V);var D=this.pow(w,new a(1).iushln(V-j-1));I=I.redMul(D),w=D.redSqr(),C=C.redMul(w),V=j}return I},pe.prototype.invm=function(u){var p=u._invmp(this.m);return p.negative!==0?(p.negative=0,this.imod(p).redNeg()):this.imod(p)},pe.prototype.pow=function(u,p){if(p.isZero())return new a(1).toRed(this);if(p.cmpn(1)===0)return u.clone();var m=4,y=new Array(1<<m);y[0]=new a(1).toRed(this),y[1]=u;for(var E=2;E<y.length;E++)y[E]=this.mul(y[E-1],u);var $=y[0],k=0,_=0,d=p.bitLength()%26;for(d===0&&(d=26),E=p.length-1;E>=0;E--){for(var w=p.words[E],I=d-1;I>=0;I--){var C=w>>I&1;if($!==y[0]&&($=this.sqr($)),C===0&&k===0){_=0;continue}k<<=1,k|=C,_++,!(_!==m&&(E!==0||I!==0))&&($=this.mul($,y[k]),_=0,k=0)}d=26}return $},pe.prototype.convertTo=function(u){var p=u.umod(this.m);return p===u?p.clone():p},pe.prototype.convertFrom=function(u){var p=u.clone();return p.red=null,p},a.mont=function(u){return new Ce(u)};function Ce(T){pe.call(this,T),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new a(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}c(Ce,pe),Ce.prototype.convertTo=function(u){return this.imod(u.ushln(this.shift))},Ce.prototype.convertFrom=function(u){var p=this.imod(u.mul(this.rinv));return p.red=null,p},Ce.prototype.imul=function(u,p){if(u.isZero()||p.isZero())return u.words[0]=0,u.length=1,u;var m=u.imul(p),y=m.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),E=m.isub(y).iushrn(this.shift),$=E;return E.cmp(this.m)>=0?$=E.isub(this.m):E.cmpn(0)<0&&($=E.iadd(this.m)),$._forceRed(this)},Ce.prototype.mul=function(u,p){if(u.isZero()||p.isZero())return new a(0)._forceRed(this);var m=u.mul(p),y=m.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),E=m.isub(y).iushrn(this.shift),$=E;return E.cmp(this.m)>=0?$=E.isub(this.m):E.cmpn(0)<0&&($=E.iadd(this.m)),$._forceRed(this)},Ce.prototype.invm=function(u){var p=this.imod(u._invmp(this.m).mul(this.r2));return p._forceRed(this)}})(t,commonjsGlobal)})(bn$2);var bnExports$2=bn$2.exports,api={},vmBrowserify={},hasRequiredVmBrowserify;function requireVmBrowserify(){return hasRequiredVmBrowserify||(hasRequiredVmBrowserify=1,function(exports){var indexOf=function(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1},Object_keys=function(t){if(Object.keys)return Object.keys(t);var e=[];for(var n in t)e.push(n);return e},forEach=function(t,e){if(t.forEach)return t.forEach(e);for(var n=0;n<t.length;n++)e(t[n],n,t)},defineProp=function(){try{return Object.defineProperty({},"_",{}),function(t,e,n){Object.defineProperty(t,e,{writable:!0,enumerable:!1,configurable:!0,value:n})}}catch{return function(e,n,o){e[n]=o}}}(),globals=["Array","Boolean","Date","Error","EvalError","Function","Infinity","JSON","Math","NaN","Number","Object","RangeError","ReferenceError","RegExp","String","SyntaxError","TypeError","URIError","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","parseFloat","parseInt","undefined","unescape"];function Context(){}Context.prototype={};var Script=exports.Script=function(e){if(!(this instanceof Script))return new Script(e);this.code=e};Script.prototype.runInContext=function(t){if(!(t instanceof Context))throw new TypeError("needs a 'context' argument.");var e=document.createElement("iframe");e.style||(e.style={}),e.style.display="none",document.body.appendChild(e);var n=e.contentWindow,o=n.eval,c=n.execScript;!o&&c&&(c.call(n,"null"),o=n.eval),forEach(Object_keys(t),function(b){n[b]=t[b]}),forEach(globals,function(b){t[b]&&(n[b]=t[b])});var a=Object_keys(n),l=o.call(n,this.code);return forEach(Object_keys(n),function(b){(b in t||indexOf(a,b)===-1)&&(t[b]=n[b])}),forEach(globals,function(b){b in t||defineProp(t,b,n[b])}),document.body.removeChild(e),l},Script.prototype.runInThisContext=function(){return eval(this.code)},Script.prototype.runInNewContext=function(t){var e=Script.createContext(t),n=this.runInContext(e);return t&&forEach(Object_keys(e),function(o){t[o]=e[o]}),n},forEach(Object_keys(Script.prototype),function(t){exports[t]=Script[t]=function(e){var n=Script(e);return n[t].apply(n,[].slice.call(arguments,1))}}),exports.isContext=function(t){return t instanceof Context},exports.createScript=function(t){return exports.Script(t)},exports.createContext=Script.createContext=function(t){var e=new Context;return typeof t=="object"&&forEach(Object_keys(t),function(n){e[n]=t[n]}),e}}(vmBrowserify)),vmBrowserify}var hasRequiredApi;function requireApi(){return hasRequiredApi||(hasRequiredApi=1,function(t){var e=requireAsn1(),n=inherits_browserExports,o=t;o.define=function(l,b){return new c(l,b)};function c(a,l){this.name=a,this.body=l,this.decoders={},this.encoders={}}c.prototype._createNamed=function(l){var b;try{b=requireVmBrowserify().runInThisContext("(function "+this.name+`(entity) {
  this._initNamed(entity);
})`)}catch{b=function(A){this._initNamed(A)}}return n(b,l),b.prototype._initNamed=function(A){l.call(this,A)},new b(this)},c.prototype._getDecoder=function(l){return l=l||"der",this.decoders.hasOwnProperty(l)||(this.decoders[l]=this._createNamed(e.decoders[l])),this.decoders[l]},c.prototype.decode=function(l,b,v){return this._getDecoder(b).decode(l,v)},c.prototype._getEncoder=function(l){return l=l||"der",this.encoders.hasOwnProperty(l)||(this.encoders[l]=this._createNamed(e.encoders[l])),this.encoders[l]},c.prototype.encode=function(l,b,v){return this._getEncoder(b).encode(l,v)}}(api)),api}var base$2={},reporter={},inherits=inherits_browserExports;function Reporter(t){this._reporterState={obj:null,path:[],options:t||{},errors:[]}}reporter.Reporter=Reporter;Reporter.prototype.isError=function t(e){return e instanceof ReporterError};Reporter.prototype.save=function t(){var e=this._reporterState;return{obj:e.obj,pathLen:e.path.length}};Reporter.prototype.restore=function t(e){var n=this._reporterState;n.obj=e.obj,n.path=n.path.slice(0,e.pathLen)};Reporter.prototype.enterKey=function t(e){return this._reporterState.path.push(e)};Reporter.prototype.exitKey=function t(e){var n=this._reporterState;n.path=n.path.slice(0,e-1)};Reporter.prototype.leaveKey=function t(e,n,o){var c=this._reporterState;this.exitKey(e),c.obj!==null&&(c.obj[n]=o)};Reporter.prototype.path=function t(){return this._reporterState.path.join("/")};Reporter.prototype.enterObject=function t(){var e=this._reporterState,n=e.obj;return e.obj={},n};Reporter.prototype.leaveObject=function t(e){var n=this._reporterState,o=n.obj;return n.obj=e,o};Reporter.prototype.error=function t(e){var n,o=this._reporterState,c=e instanceof ReporterError;if(c?n=e:n=new ReporterError(o.path.map(function(a){return"["+JSON.stringify(a)+"]"}).join(""),e.message||e,e.stack),!o.options.partial)throw n;return c||o.errors.push(n),n};Reporter.prototype.wrapResult=function t(e){var n=this._reporterState;return n.options.partial?{result:this.isError(e)?null:e,errors:n.errors}:e};function ReporterError(t,e){this.path=t,this.rethrow(e)}inherits(ReporterError,Error);ReporterError.prototype.rethrow=function t(e){if(this.message=e+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,ReporterError),!this.stack)try{throw new Error(this.message)}catch(n){this.stack=n.stack}return this};var buffer={},hasRequiredBuffer;function requireBuffer(){if(hasRequiredBuffer)return buffer;hasRequiredBuffer=1;var t=inherits_browserExports,e=requireBase().Reporter,n=require$$0$3.Buffer;function o(a,l){if(e.call(this,l),!n.isBuffer(a)){this.error("Input not Buffer");return}this.base=a,this.offset=0,this.length=a.length}t(o,e),buffer.DecoderBuffer=o,o.prototype.save=function(){return{offset:this.offset,reporter:e.prototype.save.call(this)}},o.prototype.restore=function(l){var b=new o(this.base);return b.offset=l.offset,b.length=this.offset,this.offset=l.offset,e.prototype.restore.call(this,l.reporter),b},o.prototype.isEmpty=function(){return this.offset===this.length},o.prototype.readUInt8=function(l){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(l||"DecoderBuffer overrun")},o.prototype.skip=function(l,b){if(!(this.offset+l<=this.length))return this.error(b||"DecoderBuffer overrun");var v=new o(this.base);return v._reporterState=this._reporterState,v.offset=this.offset,v.length=this.offset+l,this.offset+=l,v},o.prototype.raw=function(l){return this.base.slice(l?l.offset:this.offset,this.length)};function c(a,l){if(Array.isArray(a))this.length=0,this.value=a.map(function(b){return b instanceof c||(b=new c(b,l)),this.length+=b.length,b},this);else if(typeof a=="number"){if(!(0<=a&&a<=255))return l.error("non-byte EncoderBuffer value");this.value=a,this.length=1}else if(typeof a=="string")this.value=a,this.length=n.byteLength(a);else if(n.isBuffer(a))this.value=a,this.length=a.length;else return l.error("Unsupported type: "+typeof a)}return buffer.EncoderBuffer=c,c.prototype.join=function(l,b){return l||(l=new n(this.length)),b||(b=0),this.length===0||(Array.isArray(this.value)?this.value.forEach(function(v){v.join(l,b),b+=v.length}):(typeof this.value=="number"?l[b]=this.value:typeof this.value=="string"?l.write(this.value,b):n.isBuffer(this.value)&&this.value.copy(l,b),b+=this.length)),l},buffer}var node,hasRequiredNode;function requireNode(){if(hasRequiredNode)return node;hasRequiredNode=1;var t=requireBase().Reporter,e=requireBase().EncoderBuffer,n=requireBase().DecoderBuffer,o=minimalisticAssert$1,c=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],a=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(c),l=["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"];function b(A,S){var M={};this._baseState=M,M.enc=A,M.parent=S||null,M.children=null,M.tag=null,M.args=null,M.reverseArgs=null,M.choice=null,M.optional=!1,M.any=!1,M.obj=!1,M.use=null,M.useDecoder=null,M.key=null,M.default=null,M.explicit=null,M.implicit=null,M.contains=null,M.parent||(M.children=[],this._wrap())}node=b;var v=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];return b.prototype.clone=function(){var S=this._baseState,M={};v.forEach(function(P){M[P]=S[P]});var B=new this.constructor(M.parent);return B._baseState=M,B},b.prototype._wrap=function(){var S=this._baseState;a.forEach(function(M){this[M]=function(){var P=new this.constructor(this);return S.children.push(P),P[M].apply(P,arguments)}},this)},b.prototype._init=function(S){var M=this._baseState;o(M.parent===null),S.call(this),M.children=M.children.filter(function(B){return B._baseState.parent===this},this),o.equal(M.children.length,1,"Root node can have only one child")},b.prototype._useArgs=function(S){var M=this._baseState,B=S.filter(function(P){return P instanceof this.constructor},this);S=S.filter(function(P){return!(P instanceof this.constructor)},this),B.length!==0&&(o(M.children===null),M.children=B,B.forEach(function(P){P._baseState.parent=this},this)),S.length!==0&&(o(M.args===null),M.args=S,M.reverseArgs=S.map(function(P){if(typeof P!="object"||P.constructor!==Object)return P;var L={};return Object.keys(P).forEach(function(F){F==(F|0)&&(F|=0);var U=P[F];L[U]=F}),L}))},l.forEach(function(A){b.prototype[A]=function(){var M=this._baseState;throw new Error(A+" not implemented for encoding: "+M.enc)}}),c.forEach(function(A){b.prototype[A]=function(){var M=this._baseState,B=Array.prototype.slice.call(arguments);return o(M.tag===null),M.tag=A,this._useArgs(B),this}}),b.prototype.use=function(S){o(S);var M=this._baseState;return o(M.use===null),M.use=S,this},b.prototype.optional=function(){var S=this._baseState;return S.optional=!0,this},b.prototype.def=function(S){var M=this._baseState;return o(M.default===null),M.default=S,M.optional=!0,this},b.prototype.explicit=function(S){var M=this._baseState;return o(M.explicit===null&&M.implicit===null),M.explicit=S,this},b.prototype.implicit=function(S){var M=this._baseState;return o(M.explicit===null&&M.implicit===null),M.implicit=S,this},b.prototype.obj=function(){var S=this._baseState,M=Array.prototype.slice.call(arguments);return S.obj=!0,M.length!==0&&this._useArgs(M),this},b.prototype.key=function(S){var M=this._baseState;return o(M.key===null),M.key=S,this},b.prototype.any=function(){var S=this._baseState;return S.any=!0,this},b.prototype.choice=function(S){var M=this._baseState;return o(M.choice===null),M.choice=S,this._useArgs(Object.keys(S).map(function(B){return S[B]})),this},b.prototype.contains=function(S){var M=this._baseState;return o(M.use===null),M.contains=S,this},b.prototype._decode=function(S,M){var B=this._baseState;if(B.parent===null)return S.wrapResult(B.children[0]._decode(S,M));var P=B.default,L=!0,F=null;if(B.key!==null&&(F=S.enterKey(B.key)),B.optional){var U=null;if(B.explicit!==null?U=B.explicit:B.implicit!==null?U=B.implicit:B.tag!==null&&(U=B.tag),U===null&&!B.any){var q=S.save();try{B.choice===null?this._decodeGeneric(B.tag,S,M):this._decodeChoice(S,M),L=!0}catch{L=!1}S.restore(q)}else if(L=this._peekTag(S,U,B.any),S.isError(L))return L}var X;if(B.obj&&L&&(X=S.enterObject()),L){if(B.explicit!==null){var ee=this._decodeTag(S,B.explicit);if(S.isError(ee))return ee;S=ee}var te=S.offset;if(B.use===null&&B.choice===null){if(B.any)var q=S.save();var ce=this._decodeTag(S,B.implicit!==null?B.implicit:B.tag,B.any);if(S.isError(ce))return ce;B.any?P=S.raw(q):S=ce}if(M&&M.track&&B.tag!==null&&M.track(S.path(),te,S.length,"tagged"),M&&M.track&&B.tag!==null&&M.track(S.path(),S.offset,S.length,"content"),B.any?P=P:B.choice===null?P=this._decodeGeneric(B.tag,S,M):P=this._decodeChoice(S,M),S.isError(P))return P;if(!B.any&&B.choice===null&&B.children!==null&&B.children.forEach(function(we){we._decode(S,M)}),B.contains&&(B.tag==="octstr"||B.tag==="bitstr")){var ue=new n(P);P=this._getUse(B.contains,S._reporterState.obj)._decode(ue,M)}}return B.obj&&L&&(P=S.leaveObject(X)),B.key!==null&&(P!==null||L===!0)?S.leaveKey(F,B.key,P):F!==null&&S.exitKey(F),P},b.prototype._decodeGeneric=function(S,M,B){var P=this._baseState;return S==="seq"||S==="set"?null:S==="seqof"||S==="setof"?this._decodeList(M,S,P.args[0],B):/str$/.test(S)?this._decodeStr(M,S,B):S==="objid"&&P.args?this._decodeObjid(M,P.args[0],P.args[1],B):S==="objid"?this._decodeObjid(M,null,null,B):S==="gentime"||S==="utctime"?this._decodeTime(M,S,B):S==="null_"?this._decodeNull(M,B):S==="bool"?this._decodeBool(M,B):S==="objDesc"?this._decodeStr(M,S,B):S==="int"||S==="enum"?this._decodeInt(M,P.args&&P.args[0],B):P.use!==null?this._getUse(P.use,M._reporterState.obj)._decode(M,B):M.error("unknown tag: "+S)},b.prototype._getUse=function(S,M){var B=this._baseState;return B.useDecoder=this._use(S,M),o(B.useDecoder._baseState.parent===null),B.useDecoder=B.useDecoder._baseState.children[0],B.implicit!==B.useDecoder._baseState.implicit&&(B.useDecoder=B.useDecoder.clone(),B.useDecoder._baseState.implicit=B.implicit),B.useDecoder},b.prototype._decodeChoice=function(S,M){var B=this._baseState,P=null,L=!1;return Object.keys(B.choice).some(function(F){var U=S.save(),q=B.choice[F];try{var X=q._decode(S,M);if(S.isError(X))return!1;P={type:F,value:X},L=!0}catch{return S.restore(U),!1}return!0},this),L?P:S.error("Choice not matched")},b.prototype._createEncoderBuffer=function(S){return new e(S,this.reporter)},b.prototype._encode=function(S,M,B){var P=this._baseState;if(!(P.default!==null&&P.default===S)){var L=this._encodeValue(S,M,B);if(L!==void 0&&!this._skipDefault(L,M,B))return L}},b.prototype._encodeValue=function(S,M,B){var P=this._baseState;if(P.parent===null)return P.children[0]._encode(S,M||new t);var q=null;if(this.reporter=M,P.optional&&S===void 0)if(P.default!==null)S=P.default;else return;var L=null,F=!1;if(P.any)q=this._createEncoderBuffer(S);else if(P.choice)q=this._encodeChoice(S,M);else if(P.contains)L=this._getUse(P.contains,B)._encode(S,M),F=!0;else if(P.children)L=P.children.map(function(te){if(te._baseState.tag==="null_")return te._encode(null,M,S);if(te._baseState.key===null)return M.error("Child should have a key");var ce=M.enterKey(te._baseState.key);if(typeof S!="object")return M.error("Child expected, but input is not object");var ue=te._encode(S[te._baseState.key],M,S);return M.leaveKey(ce),ue},this).filter(function(te){return te}),L=this._createEncoderBuffer(L);else if(P.tag==="seqof"||P.tag==="setof"){if(!(P.args&&P.args.length===1))return M.error("Too many args for : "+P.tag);if(!Array.isArray(S))return M.error("seqof/setof, but data is not Array");var U=this.clone();U._baseState.implicit=null,L=this._createEncoderBuffer(S.map(function(te){var ce=this._baseState;return this._getUse(ce.args[0],S)._encode(te,M)},U))}else P.use!==null?q=this._getUse(P.use,B)._encode(S,M):(L=this._encodePrimitive(P.tag,S),F=!0);var q;if(!P.any&&P.choice===null){var X=P.implicit!==null?P.implicit:P.tag,ee=P.implicit===null?"universal":"context";X===null?P.use===null&&M.error("Tag could be omitted only for .use()"):P.use===null&&(q=this._encodeComposite(X,F,ee,L))}return P.explicit!==null&&(q=this._encodeComposite(P.explicit,!1,"context",q)),q},b.prototype._encodeChoice=function(S,M){var B=this._baseState,P=B.choice[S.type];return P||o(!1,S.type+" not found in "+JSON.stringify(Object.keys(B.choice))),P._encode(S.value,M)},b.prototype._encodePrimitive=function(S,M){var B=this._baseState;if(/str$/.test(S))return this._encodeStr(M,S);if(S==="objid"&&B.args)return this._encodeObjid(M,B.reverseArgs[0],B.args[1]);if(S==="objid")return this._encodeObjid(M,null,null);if(S==="gentime"||S==="utctime")return this._encodeTime(M,S);if(S==="null_")return this._encodeNull();if(S==="int"||S==="enum")return this._encodeInt(M,B.args&&B.reverseArgs[0]);if(S==="bool")return this._encodeBool(M);if(S==="objDesc")return this._encodeStr(M,S);throw new Error("Unsupported tag: "+S)},b.prototype._isNumstr=function(S){return/^[0-9 ]*$/.test(S)},b.prototype._isPrintstr=function(S){return/^[A-Za-z0-9 '\(\)\+,\-\.\/:=\?]*$/.test(S)},node}var hasRequiredBase;function requireBase(){return hasRequiredBase||(hasRequiredBase=1,function(t){var e=t;e.Reporter=reporter.Reporter,e.DecoderBuffer=requireBuffer().DecoderBuffer,e.EncoderBuffer=requireBuffer().EncoderBuffer,e.Node=requireNode()}(base$2)),base$2}var constants={},der={},hasRequiredDer$2;function requireDer$2(){return hasRequiredDer$2||(hasRequiredDer$2=1,function(t){var e=requireConstants();t.tagClass={0:"universal",1:"application",2:"context",3:"private"},t.tagClassByName=e._reverse(t.tagClass),t.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},t.tagByName=e._reverse(t.tag)}(der)),der}var hasRequiredConstants;function requireConstants(){return hasRequiredConstants||(hasRequiredConstants=1,function(t){var e=t;e._reverse=function(o){var c={};return Object.keys(o).forEach(function(a){(a|0)==a&&(a=a|0);var l=o[a];c[l]=a}),c},e.der=requireDer$2()}(constants)),constants}var decoders={},der_1$1,hasRequiredDer$1;function requireDer$1(){if(hasRequiredDer$1)return der_1$1;hasRequiredDer$1=1;var t=inherits_browserExports,e=requireAsn1(),n=e.base,o=e.bignum,c=e.constants.der;function a(A){this.enc="der",this.name=A.name,this.entity=A,this.tree=new l,this.tree._init(A.body)}der_1$1=a,a.prototype.decode=function(S,M){return S instanceof n.DecoderBuffer||(S=new n.DecoderBuffer(S,M)),this.tree._decode(S,M)};function l(A){n.Node.call(this,"der",A)}t(l,n.Node),l.prototype._peekTag=function(S,M,B){if(S.isEmpty())return!1;var P=S.save(),L=b(S,'Failed to peek tag: "'+M+'"');return S.isError(L)?L:(S.restore(P),L.tag===M||L.tagStr===M||L.tagStr+"of"===M||B)},l.prototype._decodeTag=function(S,M,B){var P=b(S,'Failed to decode tag of "'+M+'"');if(S.isError(P))return P;var L=v(S,P.primitive,'Failed to get length of "'+M+'"');if(S.isError(L))return L;if(!B&&P.tag!==M&&P.tagStr!==M&&P.tagStr+"of"!==M)return S.error('Failed to match tag: "'+M+'"');if(P.primitive||L!==null)return S.skip(L,'Failed to match body of: "'+M+'"');var F=S.save(),U=this._skipUntilEnd(S,'Failed to skip indefinite length body: "'+this.tag+'"');return S.isError(U)?U:(L=S.offset-F.offset,S.restore(F),S.skip(L,'Failed to match body of: "'+M+'"'))},l.prototype._skipUntilEnd=function(S,M){for(;;){var B=b(S,M);if(S.isError(B))return B;var P=v(S,B.primitive,M);if(S.isError(P))return P;var L;if(B.primitive||P!==null?L=S.skip(P):L=this._skipUntilEnd(S,M),S.isError(L))return L;if(B.tagStr==="end")break}},l.prototype._decodeList=function(S,M,B,P){for(var L=[];!S.isEmpty();){var F=this._peekTag(S,"end");if(S.isError(F))return F;var U=B.decode(S,"der",P);if(S.isError(U)&&F)break;L.push(U)}return L},l.prototype._decodeStr=function(S,M){if(M==="bitstr"){var B=S.readUInt8();return S.isError(B)?B:{unused:B,data:S.raw()}}else if(M==="bmpstr"){var P=S.raw();if(P.length%2===1)return S.error("Decoding of string type: bmpstr length mismatch");for(var L="",F=0;F<P.length/2;F++)L+=String.fromCharCode(P.readUInt16BE(F*2));return L}else if(M==="numstr"){var U=S.raw().toString("ascii");return this._isNumstr(U)?U:S.error("Decoding of string type: numstr unsupported characters")}else{if(M==="octstr")return S.raw();if(M==="objDesc")return S.raw();if(M==="printstr"){var q=S.raw().toString("ascii");return this._isPrintstr(q)?q:S.error("Decoding of string type: printstr unsupported characters")}else return/str$/.test(M)?S.raw().toString():S.error("Decoding of string type: "+M+" unsupported")}},l.prototype._decodeObjid=function(S,M,B){for(var P,L=[],F=0;!S.isEmpty();){var U=S.readUInt8();F<<=7,F|=U&127,U&128||(L.push(F),F=0)}U&128&&L.push(F);var q=L[0]/40|0,X=L[0]%40;if(B?P=L:P=[q,X].concat(L.slice(1)),M){var ee=M[P.join(" ")];ee===void 0&&(ee=M[P.join(".")]),ee!==void 0&&(P=ee)}return P},l.prototype._decodeTime=function(S,M){var B=S.raw().toString();if(M==="gentime")var P=B.slice(0,4)|0,L=B.slice(4,6)|0,F=B.slice(6,8)|0,U=B.slice(8,10)|0,q=B.slice(10,12)|0,X=B.slice(12,14)|0;else if(M==="utctime"){var P=B.slice(0,2)|0,L=B.slice(2,4)|0,F=B.slice(4,6)|0,U=B.slice(6,8)|0,q=B.slice(8,10)|0,X=B.slice(10,12)|0;P<70?P=2e3+P:P=1900+P}else return S.error("Decoding "+M+" time is not supported yet");return Date.UTC(P,L-1,F,U,q,X,0)},l.prototype._decodeNull=function(S){return null},l.prototype._decodeBool=function(S){var M=S.readUInt8();return S.isError(M)?M:M!==0},l.prototype._decodeInt=function(S,M){var B=S.raw(),P=new o(B);return M&&(P=M[P.toString(10)]||P),P},l.prototype._use=function(S,M){return typeof S=="function"&&(S=S(M)),S._getDecoder("der").tree};function b(A,S){var M=A.readUInt8(S);if(A.isError(M))return M;var B=c.tagClass[M>>6],P=(M&32)===0;if((M&31)===31){var L=M;for(M=0;(L&128)===128;){if(L=A.readUInt8(S),A.isError(L))return L;M<<=7,M|=L&127}}else M&=31;var F=c.tag[M];return{cls:B,primitive:P,tag:M,tagStr:F}}function v(A,S,M){var B=A.readUInt8(M);if(A.isError(B))return B;if(!S&&B===128)return null;if(!(B&128))return B;var P=B&127;if(P>4)return A.error("length octect is too long");B=0;for(var L=0;L<P;L++){B<<=8;var F=A.readUInt8(M);if(A.isError(F))return F;B|=F}return B}return der_1$1}var pem$1,hasRequiredPem$1;function requirePem$1(){if(hasRequiredPem$1)return pem$1;hasRequiredPem$1=1;var t=inherits_browserExports,e=require$$0$3.Buffer,n=requireDer$1();function o(c){n.call(this,c),this.enc="pem"}return t(o,n),pem$1=o,o.prototype.decode=function(a,l){for(var b=a.toString().split(/[\r\n]+/g),v=l.label.toUpperCase(),A=/^-----(BEGIN|END) ([^-]+)-----$/,S=-1,M=-1,B=0;B<b.length;B++){var P=b[B].match(A);if(P!==null&&P[2]===v)if(S===-1){if(P[1]!=="BEGIN")break;S=B}else{if(P[1]!=="END")break;M=B;break}}if(S===-1||M===-1)throw new Error("PEM section not found for: "+v);var L=b.slice(S+1,M).join("");L.replace(/[^a-z0-9\+\/=]+/gi,"");var F=new e(L,"base64");return n.prototype.decode.call(this,F,l)},pem$1}var hasRequiredDecoders;function requireDecoders(){return hasRequiredDecoders||(hasRequiredDecoders=1,function(t){var e=t;e.der=requireDer$1(),e.pem=requirePem$1()}(decoders)),decoders}var encoders={},der_1,hasRequiredDer;function requireDer(){if(hasRequiredDer)return der_1;hasRequiredDer=1;var t=inherits_browserExports,e=require$$0$3.Buffer,n=requireAsn1(),o=n.base,c=n.constants.der;function a(A){this.enc="der",this.name=A.name,this.entity=A,this.tree=new l,this.tree._init(A.body)}der_1=a,a.prototype.encode=function(S,M){return this.tree._encode(S,M).join()};function l(A){o.Node.call(this,"der",A)}t(l,o.Node),l.prototype._encodeComposite=function(S,M,B,P){var L=v(S,M,B,this.reporter);if(P.length<128){var q=new e(2);return q[0]=L,q[1]=P.length,this._createEncoderBuffer([q,P])}for(var F=1,U=P.length;U>=256;U>>=8)F++;var q=new e(2+F);q[0]=L,q[1]=128|F;for(var U=1+F,X=P.length;X>0;U--,X>>=8)q[U]=X&255;return this._createEncoderBuffer([q,P])},l.prototype._encodeStr=function(S,M){if(M==="bitstr")return this._createEncoderBuffer([S.unused|0,S.data]);if(M==="bmpstr"){for(var B=new e(S.length*2),P=0;P<S.length;P++)B.writeUInt16BE(S.charCodeAt(P),P*2);return this._createEncoderBuffer(B)}else return M==="numstr"?this._isNumstr(S)?this._createEncoderBuffer(S):this.reporter.error("Encoding of string type: numstr supports only digits and space"):M==="printstr"?this._isPrintstr(S)?this._createEncoderBuffer(S):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(M)?this._createEncoderBuffer(S):M==="objDesc"?this._createEncoderBuffer(S):this.reporter.error("Encoding of string type: "+M+" unsupported")},l.prototype._encodeObjid=function(S,M,B){if(typeof S=="string"){if(!M)return this.reporter.error("string objid given, but no values map found");if(!M.hasOwnProperty(S))return this.reporter.error("objid not found in values map");S=M[S].split(/[\s\.]+/g);for(var P=0;P<S.length;P++)S[P]|=0}else if(Array.isArray(S)){S=S.slice();for(var P=0;P<S.length;P++)S[P]|=0}if(!Array.isArray(S))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(S));if(!B){if(S[1]>=40)return this.reporter.error("Second objid identifier OOB");S.splice(0,2,S[0]*40+S[1])}for(var L=0,P=0;P<S.length;P++){var F=S[P];for(L++;F>=128;F>>=7)L++}for(var U=new e(L),q=U.length-1,P=S.length-1;P>=0;P--){var F=S[P];for(U[q--]=F&127;(F>>=7)>0;)U[q--]=128|F&127}return this._createEncoderBuffer(U)};function b(A){return A<10?"0"+A:A}l.prototype._encodeTime=function(S,M){var B,P=new Date(S);return M==="gentime"?B=[b(P.getFullYear()),b(P.getUTCMonth()+1),b(P.getUTCDate()),b(P.getUTCHours()),b(P.getUTCMinutes()),b(P.getUTCSeconds()),"Z"].join(""):M==="utctime"?B=[b(P.getFullYear()%100),b(P.getUTCMonth()+1),b(P.getUTCDate()),b(P.getUTCHours()),b(P.getUTCMinutes()),b(P.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+M+" time is not supported yet"),this._encodeStr(B,"octstr")},l.prototype._encodeNull=function(){return this._createEncoderBuffer("")},l.prototype._encodeInt=function(S,M){if(typeof S=="string"){if(!M)return this.reporter.error("String int or enum given, but no values map");if(!M.hasOwnProperty(S))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(S));S=M[S]}if(typeof S!="number"&&!e.isBuffer(S)){var B=S.toArray();!S.sign&&B[0]&128&&B.unshift(0),S=new e(B)}if(e.isBuffer(S)){var P=S.length;S.length===0&&P++;var F=new e(P);return S.copy(F),S.length===0&&(F[0]=0),this._createEncoderBuffer(F)}if(S<128)return this._createEncoderBuffer(S);if(S<256)return this._createEncoderBuffer([0,S]);for(var P=1,L=S;L>=256;L>>=8)P++;for(var F=new Array(P),L=F.length-1;L>=0;L--)F[L]=S&255,S>>=8;return F[0]&128&&F.unshift(0),this._createEncoderBuffer(new e(F))},l.prototype._encodeBool=function(S){return this._createEncoderBuffer(S?255:0)},l.prototype._use=function(S,M){return typeof S=="function"&&(S=S(M)),S._getEncoder("der").tree},l.prototype._skipDefault=function(S,M,B){var P=this._baseState,L;if(P.default===null)return!1;var F=S.join();if(P.defaultBuffer===void 0&&(P.defaultBuffer=this._encodeValue(P.default,M,B).join()),F.length!==P.defaultBuffer.length)return!1;for(L=0;L<F.length;L++)if(F[L]!==P.defaultBuffer[L])return!1;return!0};function v(A,S,M,B){var P;if(A==="seqof"?A="seq":A==="setof"&&(A="set"),c.tagByName.hasOwnProperty(A))P=c.tagByName[A];else if(typeof A=="number"&&(A|0)===A)P=A;else return B.error("Unknown tag: "+A);return P>=31?B.error("Multi-octet tag encoding unsupported"):(S||(P|=32),P|=c.tagClassByName[M||"universal"]<<6,P)}return der_1}var pem,hasRequiredPem;function requirePem(){if(hasRequiredPem)return pem;hasRequiredPem=1;var t=inherits_browserExports,e=requireDer();function n(o){e.call(this,o),this.enc="pem"}return t(n,e),pem=n,n.prototype.encode=function(c,a){for(var l=e.prototype.encode.call(this,c),b=l.toString("base64"),v=["-----BEGIN "+a.label+"-----"],A=0;A<b.length;A+=64)v.push(b.slice(A,A+64));return v.push("-----END "+a.label+"-----"),v.join(`
`)},pem}var hasRequiredEncoders;function requireEncoders(){return hasRequiredEncoders||(hasRequiredEncoders=1,function(t){var e=t;e.der=requireDer(),e.pem=requirePem()}(encoders)),encoders}var hasRequiredAsn1;function requireAsn1(){return hasRequiredAsn1||(hasRequiredAsn1=1,function(t){var e=t;e.bignum=bnExports$2,e.define=requireApi().define,e.base=requireBase(),e.constants=requireConstants(),e.decoders=requireDecoders(),e.encoders=requireEncoders()}(asn1$2)),asn1$2}var asn=requireAsn1(),Time=asn.define("Time",function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})}),AttributeTypeValue=asn.define("AttributeTypeValue",function(){this.seq().obj(this.key("type").objid(),this.key("value").any())}),AlgorithmIdentifier$1=asn.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())}),SubjectPublicKeyInfo=asn.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(AlgorithmIdentifier$1),this.key("subjectPublicKey").bitstr())}),RelativeDistinguishedName=asn.define("RelativeDistinguishedName",function(){this.setof(AttributeTypeValue)}),RDNSequence=asn.define("RDNSequence",function(){this.seqof(RelativeDistinguishedName)}),Name=asn.define("Name",function(){this.choice({rdnSequence:this.use(RDNSequence)})}),Validity=asn.define("Validity",function(){this.seq().obj(this.key("notBefore").use(Time),this.key("notAfter").use(Time))}),Extension=asn.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())}),TBSCertificate=asn.define("TBSCertificate",function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(AlgorithmIdentifier$1),this.key("issuer").use(Name),this.key("validity").use(Validity),this.key("subject").use(Name),this.key("subjectPublicKeyInfo").use(SubjectPublicKeyInfo),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(Extension).optional())}),X509Certificate=asn.define("X509Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(TBSCertificate),this.key("signatureAlgorithm").use(AlgorithmIdentifier$1),this.key("signatureValue").bitstr())}),certificate=X509Certificate,asn1$1=requireAsn1();asn1$3.certificate=certificate;var RSAPrivateKey=asn1$1.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});asn1$3.RSAPrivateKey=RSAPrivateKey;var RSAPublicKey=asn1$1.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});asn1$3.RSAPublicKey=RSAPublicKey;var AlgorithmIdentifier=asn1$1.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())}),PublicKey$1=asn1$1.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(AlgorithmIdentifier),this.key("subjectPublicKey").bitstr())});asn1$3.PublicKey=PublicKey$1;var PrivateKeyInfo=asn1$1.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(AlgorithmIdentifier),this.key("subjectPrivateKey").octstr())});asn1$3.PrivateKey=PrivateKeyInfo;var EncryptedPrivateKeyInfo=asn1$1.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});asn1$3.EncryptedPrivateKey=EncryptedPrivateKeyInfo;var DSAPrivateKey=asn1$1.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});asn1$3.DSAPrivateKey=DSAPrivateKey;asn1$3.DSAparam=asn1$1.define("DSAparam",function(){this.int()});var ECParameters=asn1$1.define("ECParameters",function(){this.choice({namedCurve:this.objid()})}),ECPrivateKey=asn1$1.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(ECParameters),this.key("publicKey").optional().explicit(1).bitstr())});asn1$3.ECPrivateKey=ECPrivateKey;asn1$3.signature=asn1$1.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())});const require$$1={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"};var findProc=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,startRegex=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,fullRegex=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,evp=evp_bytestokey,ciphers$1=browser$8,Buffer$6=safeBufferExports$2.Buffer,fixProc$1=function(t,e){var n=t.toString(),o=n.match(findProc),c;if(o){var l="aes"+o[1],b=Buffer$6.from(o[2],"hex"),v=Buffer$6.from(o[3].replace(/[\r\n]/g,""),"base64"),A=evp(e,b.slice(0,8),parseInt(o[1],10)).key,S=[],M=ciphers$1.createDecipheriv(l,A,b);S.push(M.update(v)),S.push(M.final()),c=Buffer$6.concat(S)}else{var a=n.match(fullRegex);c=Buffer$6.from(a[2].replace(/[\r\n]/g,""),"base64")}var B=n.match(startRegex)[1];return{tag:B,data:c}},asn1=asn1$3,aesid=require$$1,fixProc=fixProc$1,ciphers=browser$8,compat=browser$a,Buffer$5=safeBufferExports$2.Buffer;function decrypt(t,e){var n=t.algorithm.decrypt.kde.kdeparams.salt,o=parseInt(t.algorithm.decrypt.kde.kdeparams.iters.toString(),10),c=aesid[t.algorithm.decrypt.cipher.algo.join(".")],a=t.algorithm.decrypt.cipher.iv,l=t.subjectPrivateKey,b=parseInt(c.split("-")[1],10)/8,v=compat.pbkdf2Sync(e,n,o,b,"sha1"),A=ciphers.createDecipheriv(c,v,a),S=[];return S.push(A.update(l)),S.push(A.final()),Buffer$5.concat(S)}function parseKeys$2(t){var e;typeof t=="object"&&!Buffer$5.isBuffer(t)&&(e=t.passphrase,t=t.key),typeof t=="string"&&(t=Buffer$5.from(t));var n=fixProc(t,e),o=n.tag,c=n.data,a,l;switch(o){case"CERTIFICATE":l=asn1.certificate.decode(c,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(l||(l=asn1.PublicKey.decode(c,"der")),a=l.algorithm.algorithm.join("."),a){case"1.2.840.113549.1.1.1":return asn1.RSAPublicKey.decode(l.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return l.subjectPrivateKey=l.subjectPublicKey,{type:"ec",data:l};case"1.2.840.10040.4.1":return l.algorithm.params.pub_key=asn1.DSAparam.decode(l.subjectPublicKey.data,"der"),{type:"dsa",data:l.algorithm.params};default:throw new Error("unknown key id "+a)}case"ENCRYPTED PRIVATE KEY":c=asn1.EncryptedPrivateKey.decode(c,"der"),c=decrypt(c,e);case"PRIVATE KEY":switch(l=asn1.PrivateKey.decode(c,"der"),a=l.algorithm.algorithm.join("."),a){case"1.2.840.113549.1.1.1":return asn1.RSAPrivateKey.decode(l.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:l.algorithm.curve,privateKey:asn1.ECPrivateKey.decode(l.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return l.algorithm.params.priv_key=asn1.DSAparam.decode(l.subjectPrivateKey,"der"),{type:"dsa",params:l.algorithm.params};default:throw new Error("unknown key id "+a)}case"RSA PUBLIC KEY":return asn1.RSAPublicKey.decode(c,"der");case"RSA PRIVATE KEY":return asn1.RSAPrivateKey.decode(c,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:asn1.DSAPrivateKey.decode(c,"der")};case"EC PRIVATE KEY":return c=asn1.ECPrivateKey.decode(c,"der"),{curve:c.parameters.value,privateKey:c.privateKey};default:throw new Error("unknown key type "+o)}}parseKeys$2.signature=asn1.signature;var parseAsn1=parseKeys$2;const require$$4={"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"};var hasRequiredSign;function requireSign(){if(hasRequiredSign)return sign$2.exports;hasRequiredSign=1;var t=safeBufferExports$2.Buffer,e=browser$b,n=browserifyRsa,o=requireElliptic().ec,c=bnExports$6,a=parseAsn1,l=require$$4,b=1;function v(q,X,ee,te,ce){var ue=a(X);if(ue.curve){if(te!=="ecdsa"&&te!=="ecdsa/rsa")throw new Error("wrong private key type");return A(q,ue)}else if(ue.type==="dsa"){if(te!=="dsa")throw new Error("wrong private key type");return S(q,ue,ee)}if(te!=="rsa"&&te!=="ecdsa/rsa")throw new Error("wrong private key type");if(X.padding!==void 0&&X.padding!==b)throw new Error("illegal or unsupported padding mode");q=t.concat([ce,q]);for(var Ae=ue.modulus.byteLength(),we=[0,1];q.length+we.length+1<Ae;)we.push(255);we.push(0);for(var pe=-1;++pe<q.length;)we.push(q[pe]);var Ce=n(we,ue);return Ce}function A(q,X){var ee=l[X.curve.join(".")];if(!ee)throw new Error("unknown curve "+X.curve.join("."));var te=new o(ee),ce=te.keyFromPrivate(X.privateKey),ue=ce.sign(q);return t.from(ue.toDER())}function S(q,X,ee){for(var te=X.params.priv_key,ce=X.params.p,ue=X.params.q,Ae=X.params.g,we=new c(0),pe,Ce=P(q,ue).mod(ue),T=!1,u=B(te,ue,q,ee);T===!1;)pe=F(ue,u,ee),we=U(Ae,pe,ce,ue),T=pe.invm(ue).imul(Ce.add(te.mul(we))).mod(ue),T.cmpn(0)===0&&(T=!1,we=new c(0));return M(we,T)}function M(q,X){q=q.toArray(),X=X.toArray(),q[0]&128&&(q=[0].concat(q)),X[0]&128&&(X=[0].concat(X));var ee=q.length+X.length+4,te=[48,ee,2,q.length];return te=te.concat(q,[2,X.length],X),t.from(te)}function B(q,X,ee,te){if(q=t.from(q.toArray()),q.length<X.byteLength()){var ce=t.alloc(X.byteLength()-q.length);q=t.concat([ce,q])}var ue=ee.length,Ae=L(ee,X),we=t.alloc(ue);we.fill(1);var pe=t.alloc(ue);return pe=e(te,pe).update(we).update(t.from([0])).update(q).update(Ae).digest(),we=e(te,pe).update(we).digest(),pe=e(te,pe).update(we).update(t.from([1])).update(q).update(Ae).digest(),we=e(te,pe).update(we).digest(),{k:pe,v:we}}function P(q,X){var ee=new c(q),te=(q.length<<3)-X.bitLength();return te>0&&ee.ishrn(te),ee}function L(q,X){q=P(q,X),q=q.mod(X);var ee=t.from(q.toArray());if(ee.length<X.byteLength()){var te=t.alloc(X.byteLength()-ee.length);ee=t.concat([te,ee])}return ee}function F(q,X,ee){var te,ce;do{for(te=t.alloc(0);te.length*8<q.bitLength();)X.v=e(ee,X.k).update(X.v).digest(),te=t.concat([te,X.v]);ce=P(te,q),X.k=e(ee,X.k).update(X.v).update(t.from([0])).digest(),X.v=e(ee,X.k).update(X.v).digest()}while(ce.cmp(q)!==-1);return ce}function U(q,X,ee,te){return q.toRed(c.mont(ee)).redPow(X).fromRed().mod(te)}return sign$2.exports=v,sign$2.exports.getKey=B,sign$2.exports.makeKey=F,sign$2.exports}var verify_1,hasRequiredVerify;function requireVerify(){if(hasRequiredVerify)return verify_1;hasRequiredVerify=1;var t=safeBufferExports$2.Buffer,e=bnExports$6,n=requireElliptic().ec,o=parseAsn1,c=require$$4;function a(A,S,M,B,P){var L=o(M);if(L.type==="ec"){if(B!=="ecdsa"&&B!=="ecdsa/rsa")throw new Error("wrong public key type");return l(A,S,L)}else if(L.type==="dsa"){if(B!=="dsa")throw new Error("wrong public key type");return b(A,S,L)}if(B!=="rsa"&&B!=="ecdsa/rsa")throw new Error("wrong public key type");S=t.concat([P,S]);for(var F=L.modulus.byteLength(),U=[1],q=0;S.length+U.length+2<F;)U.push(255),q+=1;U.push(0);for(var X=-1;++X<S.length;)U.push(S[X]);U=t.from(U);var ee=e.mont(L.modulus);A=new e(A).toRed(ee),A=A.redPow(new e(L.publicExponent)),A=t.from(A.fromRed().toArray());var te=q<8?1:0;for(F=Math.min(A.length,U.length),A.length!==U.length&&(te=1),X=-1;++X<F;)te|=A[X]^U[X];return te===0}function l(A,S,M){var B=c[M.data.algorithm.curve.join(".")];if(!B)throw new Error("unknown curve "+M.data.algorithm.curve.join("."));var P=new n(B),L=M.data.subjectPrivateKey.data;return P.verify(S,A,L)}function b(A,S,M){var B=M.data.p,P=M.data.q,L=M.data.g,F=M.data.pub_key,U=o.signature.decode(A,"der"),q=U.s,X=U.r;v(q,P),v(X,P);var ee=e.mont(B),te=q.invm(P),ce=L.toRed(ee).redPow(new e(S).mul(te).mod(P)).fromRed().mul(F.toRed(ee).redPow(X.mul(te).mod(P)).fromRed()).mod(B).mod(P);return ce.cmp(X)===0}function v(A,S){if(A.cmpn(0)<=0)throw new Error("invalid sig");if(A.cmp(S)>=0)throw new Error("invalid sig")}return verify_1=a,verify_1}var browser$6,hasRequiredBrowser$1;function requireBrowser$1(){if(hasRequiredBrowser$1)return browser$6;hasRequiredBrowser$1=1;var t=safeBufferExports$2.Buffer,e=browser$d,n=readableBrowserExports,o=inherits_browserExports,c=requireSign(),a=requireVerify(),l=require$$6;Object.keys(l).forEach(function(M){l[M].id=t.from(l[M].id,"hex"),l[M.toLowerCase()]=l[M]});function b(M){n.Writable.call(this);var B=l[M];if(!B)throw new Error("Unknown message digest");this._hashType=B.hash,this._hash=e(B.hash),this._tag=B.id,this._signType=B.sign}o(b,n.Writable),b.prototype._write=function(B,P,L){this._hash.update(B),L()},b.prototype.update=function(B,P){return this._hash.update(typeof B=="string"?t.from(B,P):B),this},b.prototype.sign=function(B,P){this.end();var L=this._hash.digest(),F=c(L,B,this._hashType,this._signType,this._tag);return P?F.toString(P):F};function v(M){n.Writable.call(this);var B=l[M];if(!B)throw new Error("Unknown message digest");this._hash=e(B.hash),this._tag=B.id,this._signType=B.sign}o(v,n.Writable),v.prototype._write=function(B,P,L){this._hash.update(B),L()},v.prototype.update=function(B,P){return this._hash.update(typeof B=="string"?t.from(B,P):B),this},v.prototype.verify=function(B,P,L){var F=typeof P=="string"?t.from(P,L):P;this.end();var U=this._hash.digest();return a(F,U,B,this._signType,this._tag)};function A(M){return new b(M)}function S(M){return new v(M)}return browser$6={Sign:A,Verify:S,createSign:A,createVerify:S},browser$6}var bn$1={exports:{}};bn$1.exports;(function(t){(function(e,n){function o(T,u){if(!T)throw new Error(u||"Assertion failed")}function c(T,u){T.super_=u;var p=function(){};p.prototype=u.prototype,T.prototype=new p,T.prototype.constructor=T}function a(T,u,p){if(a.isBN(T))return T;this.negative=0,this.words=null,this.length=0,this.red=null,T!==null&&((u==="le"||u==="be")&&(p=u,u=10),this._init(T||0,u||10,p||"be"))}typeof e=="object"?e.exports=a:n.BN=a,a.BN=a,a.wordSize=26;var l;try{typeof window<"u"&&typeof window.Buffer<"u"?l=window.Buffer:l=require$$0$3.Buffer}catch{}a.isBN=function(u){return u instanceof a?!0:u!==null&&typeof u=="object"&&u.constructor.wordSize===a.wordSize&&Array.isArray(u.words)},a.max=function(u,p){return u.cmp(p)>0?u:p},a.min=function(u,p){return u.cmp(p)<0?u:p},a.prototype._init=function(u,p,m){if(typeof u=="number")return this._initNumber(u,p,m);if(typeof u=="object")return this._initArray(u,p,m);p==="hex"&&(p=16),o(p===(p|0)&&p>=2&&p<=36),u=u.toString().replace(/\s+/g,"");var y=0;u[0]==="-"&&(y++,this.negative=1),y<u.length&&(p===16?this._parseHex(u,y,m):(this._parseBase(u,p,y),m==="le"&&this._initArray(this.toArray(),p,m)))},a.prototype._initNumber=function(u,p,m){u<0&&(this.negative=1,u=-u),u<67108864?(this.words=[u&67108863],this.length=1):u<4503599627370496?(this.words=[u&67108863,u/67108864&67108863],this.length=2):(o(u<9007199254740992),this.words=[u&67108863,u/67108864&67108863,1],this.length=3),m==="le"&&this._initArray(this.toArray(),p,m)},a.prototype._initArray=function(u,p,m){if(o(typeof u.length=="number"),u.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(u.length/3),this.words=new Array(this.length);for(var y=0;y<this.length;y++)this.words[y]=0;var E,$,k=0;if(m==="be")for(y=u.length-1,E=0;y>=0;y-=3)$=u[y]|u[y-1]<<8|u[y-2]<<16,this.words[E]|=$<<k&67108863,this.words[E+1]=$>>>26-k&67108863,k+=24,k>=26&&(k-=26,E++);else if(m==="le")for(y=0,E=0;y<u.length;y+=3)$=u[y]|u[y+1]<<8|u[y+2]<<16,this.words[E]|=$<<k&67108863,this.words[E+1]=$>>>26-k&67108863,k+=24,k>=26&&(k-=26,E++);return this.strip()};function b(T,u){var p=T.charCodeAt(u);return p>=65&&p<=70?p-55:p>=97&&p<=102?p-87:p-48&15}function v(T,u,p){var m=b(T,p);return p-1>=u&&(m|=b(T,p-1)<<4),m}a.prototype._parseHex=function(u,p,m){this.length=Math.ceil((u.length-p)/6),this.words=new Array(this.length);for(var y=0;y<this.length;y++)this.words[y]=0;var E=0,$=0,k;if(m==="be")for(y=u.length-1;y>=p;y-=2)k=v(u,p,y)<<E,this.words[$]|=k&67108863,E>=18?(E-=18,$+=1,this.words[$]|=k>>>26):E+=8;else{var _=u.length-p;for(y=_%2===0?p+1:p;y<u.length;y+=2)k=v(u,p,y)<<E,this.words[$]|=k&67108863,E>=18?(E-=18,$+=1,this.words[$]|=k>>>26):E+=8}this.strip()};function A(T,u,p,m){for(var y=0,E=Math.min(T.length,p),$=u;$<E;$++){var k=T.charCodeAt($)-48;y*=m,k>=49?y+=k-49+10:k>=17?y+=k-17+10:y+=k}return y}a.prototype._parseBase=function(u,p,m){this.words=[0],this.length=1;for(var y=0,E=1;E<=67108863;E*=p)y++;y--,E=E/p|0;for(var $=u.length-m,k=$%y,_=Math.min($,$-k)+m,d=0,w=m;w<_;w+=y)d=A(u,w,w+y,p),this.imuln(E),this.words[0]+d<67108864?this.words[0]+=d:this._iaddn(d);if(k!==0){var I=1;for(d=A(u,w,u.length,p),w=0;w<k;w++)I*=p;this.imuln(I),this.words[0]+d<67108864?this.words[0]+=d:this._iaddn(d)}this.strip()},a.prototype.copy=function(u){u.words=new Array(this.length);for(var p=0;p<this.length;p++)u.words[p]=this.words[p];u.length=this.length,u.negative=this.negative,u.red=this.red},a.prototype.clone=function(){var u=new a(null);return this.copy(u),u},a.prototype._expand=function(u){for(;this.length<u;)this.words[this.length++]=0;return this},a.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},a.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},a.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var S=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],M=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],B=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];a.prototype.toString=function(u,p){u=u||10,p=p|0||1;var m;if(u===16||u==="hex"){m="";for(var y=0,E=0,$=0;$<this.length;$++){var k=this.words[$],_=((k<<y|E)&16777215).toString(16);E=k>>>24-y&16777215,E!==0||$!==this.length-1?m=S[6-_.length]+_+m:m=_+m,y+=2,y>=26&&(y-=26,$--)}for(E!==0&&(m=E.toString(16)+m);m.length%p!==0;)m="0"+m;return this.negative!==0&&(m="-"+m),m}if(u===(u|0)&&u>=2&&u<=36){var d=M[u],w=B[u];m="";var I=this.clone();for(I.negative=0;!I.isZero();){var C=I.modn(w).toString(u);I=I.idivn(w),I.isZero()?m=C+m:m=S[d-C.length]+C+m}for(this.isZero()&&(m="0"+m);m.length%p!==0;)m="0"+m;return this.negative!==0&&(m="-"+m),m}o(!1,"Base should be between 2 and 36")},a.prototype.toNumber=function(){var u=this.words[0];return this.length===2?u+=this.words[1]*67108864:this.length===3&&this.words[2]===1?u+=4503599627370496+this.words[1]*67108864:this.length>2&&o(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-u:u},a.prototype.toJSON=function(){return this.toString(16)},a.prototype.toBuffer=function(u,p){return o(typeof l<"u"),this.toArrayLike(l,u,p)},a.prototype.toArray=function(u,p){return this.toArrayLike(Array,u,p)},a.prototype.toArrayLike=function(u,p,m){var y=this.byteLength(),E=m||Math.max(1,y);o(y<=E,"byte array longer than desired length"),o(E>0,"Requested array length <= 0"),this.strip();var $=p==="le",k=new u(E),_,d,w=this.clone();if($){for(d=0;!w.isZero();d++)_=w.andln(255),w.iushrn(8),k[d]=_;for(;d<E;d++)k[d]=0}else{for(d=0;d<E-y;d++)k[d]=0;for(d=0;!w.isZero();d++)_=w.andln(255),w.iushrn(8),k[E-d-1]=_}return k},Math.clz32?a.prototype._countBits=function(u){return 32-Math.clz32(u)}:a.prototype._countBits=function(u){var p=u,m=0;return p>=4096&&(m+=13,p>>>=13),p>=64&&(m+=7,p>>>=7),p>=8&&(m+=4,p>>>=4),p>=2&&(m+=2,p>>>=2),m+p},a.prototype._zeroBits=function(u){if(u===0)return 26;var p=u,m=0;return p&8191||(m+=13,p>>>=13),p&127||(m+=7,p>>>=7),p&15||(m+=4,p>>>=4),p&3||(m+=2,p>>>=2),p&1||m++,m},a.prototype.bitLength=function(){var u=this.words[this.length-1],p=this._countBits(u);return(this.length-1)*26+p};function P(T){for(var u=new Array(T.bitLength()),p=0;p<u.length;p++){var m=p/26|0,y=p%26;u[p]=(T.words[m]&1<<y)>>>y}return u}a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var u=0,p=0;p<this.length;p++){var m=this._zeroBits(this.words[p]);if(u+=m,m!==26)break}return u},a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},a.prototype.toTwos=function(u){return this.negative!==0?this.abs().inotn(u).iaddn(1):this.clone()},a.prototype.fromTwos=function(u){return this.testn(u-1)?this.notn(u).iaddn(1).ineg():this.clone()},a.prototype.isNeg=function(){return this.negative!==0},a.prototype.neg=function(){return this.clone().ineg()},a.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},a.prototype.iuor=function(u){for(;this.length<u.length;)this.words[this.length++]=0;for(var p=0;p<u.length;p++)this.words[p]=this.words[p]|u.words[p];return this.strip()},a.prototype.ior=function(u){return o((this.negative|u.negative)===0),this.iuor(u)},a.prototype.or=function(u){return this.length>u.length?this.clone().ior(u):u.clone().ior(this)},a.prototype.uor=function(u){return this.length>u.length?this.clone().iuor(u):u.clone().iuor(this)},a.prototype.iuand=function(u){var p;this.length>u.length?p=u:p=this;for(var m=0;m<p.length;m++)this.words[m]=this.words[m]&u.words[m];return this.length=p.length,this.strip()},a.prototype.iand=function(u){return o((this.negative|u.negative)===0),this.iuand(u)},a.prototype.and=function(u){return this.length>u.length?this.clone().iand(u):u.clone().iand(this)},a.prototype.uand=function(u){return this.length>u.length?this.clone().iuand(u):u.clone().iuand(this)},a.prototype.iuxor=function(u){var p,m;this.length>u.length?(p=this,m=u):(p=u,m=this);for(var y=0;y<m.length;y++)this.words[y]=p.words[y]^m.words[y];if(this!==p)for(;y<p.length;y++)this.words[y]=p.words[y];return this.length=p.length,this.strip()},a.prototype.ixor=function(u){return o((this.negative|u.negative)===0),this.iuxor(u)},a.prototype.xor=function(u){return this.length>u.length?this.clone().ixor(u):u.clone().ixor(this)},a.prototype.uxor=function(u){return this.length>u.length?this.clone().iuxor(u):u.clone().iuxor(this)},a.prototype.inotn=function(u){o(typeof u=="number"&&u>=0);var p=Math.ceil(u/26)|0,m=u%26;this._expand(p),m>0&&p--;for(var y=0;y<p;y++)this.words[y]=~this.words[y]&67108863;return m>0&&(this.words[y]=~this.words[y]&67108863>>26-m),this.strip()},a.prototype.notn=function(u){return this.clone().inotn(u)},a.prototype.setn=function(u,p){o(typeof u=="number"&&u>=0);var m=u/26|0,y=u%26;return this._expand(m+1),p?this.words[m]=this.words[m]|1<<y:this.words[m]=this.words[m]&~(1<<y),this.strip()},a.prototype.iadd=function(u){var p;if(this.negative!==0&&u.negative===0)return this.negative=0,p=this.isub(u),this.negative^=1,this._normSign();if(this.negative===0&&u.negative!==0)return u.negative=0,p=this.isub(u),u.negative=1,p._normSign();var m,y;this.length>u.length?(m=this,y=u):(m=u,y=this);for(var E=0,$=0;$<y.length;$++)p=(m.words[$]|0)+(y.words[$]|0)+E,this.words[$]=p&67108863,E=p>>>26;for(;E!==0&&$<m.length;$++)p=(m.words[$]|0)+E,this.words[$]=p&67108863,E=p>>>26;if(this.length=m.length,E!==0)this.words[this.length]=E,this.length++;else if(m!==this)for(;$<m.length;$++)this.words[$]=m.words[$];return this},a.prototype.add=function(u){var p;return u.negative!==0&&this.negative===0?(u.negative=0,p=this.sub(u),u.negative^=1,p):u.negative===0&&this.negative!==0?(this.negative=0,p=u.sub(this),this.negative=1,p):this.length>u.length?this.clone().iadd(u):u.clone().iadd(this)},a.prototype.isub=function(u){if(u.negative!==0){u.negative=0;var p=this.iadd(u);return u.negative=1,p._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(u),this.negative=1,this._normSign();var m=this.cmp(u);if(m===0)return this.negative=0,this.length=1,this.words[0]=0,this;var y,E;m>0?(y=this,E=u):(y=u,E=this);for(var $=0,k=0;k<E.length;k++)p=(y.words[k]|0)-(E.words[k]|0)+$,$=p>>26,this.words[k]=p&67108863;for(;$!==0&&k<y.length;k++)p=(y.words[k]|0)+$,$=p>>26,this.words[k]=p&67108863;if($===0&&k<y.length&&y!==this)for(;k<y.length;k++)this.words[k]=y.words[k];return this.length=Math.max(this.length,k),y!==this&&(this.negative=1),this.strip()},a.prototype.sub=function(u){return this.clone().isub(u)};function L(T,u,p){p.negative=u.negative^T.negative;var m=T.length+u.length|0;p.length=m,m=m-1|0;var y=T.words[0]|0,E=u.words[0]|0,$=y*E,k=$&67108863,_=$/67108864|0;p.words[0]=k;for(var d=1;d<m;d++){for(var w=_>>>26,I=_&67108863,C=Math.min(d,u.length-1),V=Math.max(0,d-T.length+1);V<=C;V++){var O=d-V|0;y=T.words[O]|0,E=u.words[V]|0,$=y*E+I,w+=$/67108864|0,I=$&67108863}p.words[d]=I|0,_=w|0}return _!==0?p.words[d]=_|0:p.length--,p.strip()}var F=function(u,p,m){var y=u.words,E=p.words,$=m.words,k=0,_,d,w,I=y[0]|0,C=I&8191,V=I>>>13,O=y[1]|0,j=O&8191,D=O>>>13,Q=y[2]|0,oe=Q&8191,de=Q>>>13,Z=y[3]|0,H=Z&8191,ge=Z>>>13,Me=y[4]|0,ke=Me&8191,Ie=Me>>>13,et=y[5]|0,Fe=et&8191,$e=et>>>13,$t=y[6]|0,He=$t&8191,Ye=$t>>>13,St=y[7]|0,De=St&8191,qe=St>>>13,At=y[8]|0,ze=At&8191,Ge=At>>>13,kt=y[9]|0,se=kt&8191,J=kt>>>13,re=E[0]|0,he=re&8191,ye=re>>>13,Oe=E[1]|0,Ee=Oe&8191,Ue=Oe>>>13,bt=E[2]|0,Le=bt&8191,Ve=bt>>>13,mt=E[3]|0,Ke=mt&8191,Xe=mt>>>13,Mt=E[4]|0,me=Mt&8191,le=Mt>>>13,_e=E[5]|0,be=_e&8191,Se=_e>>>13,Je=E[6]|0,Te=Je&8191,Ne=Je>>>13,ne=E[7]|0,ie=ne&8191,ae=ne>>>13,Y=E[8]|0,fe=Y&8191,ve=Y>>>13,Pe=E[9]|0,xe=Pe&8191,Be=Pe>>>13;m.negative=u.negative^p.negative,m.length=19,_=Math.imul(C,he),d=Math.imul(C,ye),d=d+Math.imul(V,he)|0,w=Math.imul(V,ye);var Qe=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(Qe>>>26)|0,Qe&=67108863,_=Math.imul(j,he),d=Math.imul(j,ye),d=d+Math.imul(D,he)|0,w=Math.imul(D,ye),_=_+Math.imul(C,Ee)|0,d=d+Math.imul(C,Ue)|0,d=d+Math.imul(V,Ee)|0,w=w+Math.imul(V,Ue)|0;var Ze=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(Ze>>>26)|0,Ze&=67108863,_=Math.imul(oe,he),d=Math.imul(oe,ye),d=d+Math.imul(de,he)|0,w=Math.imul(de,ye),_=_+Math.imul(j,Ee)|0,d=d+Math.imul(j,Ue)|0,d=d+Math.imul(D,Ee)|0,w=w+Math.imul(D,Ue)|0,_=_+Math.imul(C,Le)|0,d=d+Math.imul(C,Ve)|0,d=d+Math.imul(V,Le)|0,w=w+Math.imul(V,Ve)|0;var xt=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(xt>>>26)|0,xt&=67108863,_=Math.imul(H,he),d=Math.imul(H,ye),d=d+Math.imul(ge,he)|0,w=Math.imul(ge,ye),_=_+Math.imul(oe,Ee)|0,d=d+Math.imul(oe,Ue)|0,d=d+Math.imul(de,Ee)|0,w=w+Math.imul(de,Ue)|0,_=_+Math.imul(j,Le)|0,d=d+Math.imul(j,Ve)|0,d=d+Math.imul(D,Le)|0,w=w+Math.imul(D,Ve)|0,_=_+Math.imul(C,Ke)|0,d=d+Math.imul(C,Xe)|0,d=d+Math.imul(V,Ke)|0,w=w+Math.imul(V,Xe)|0;var it=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(it>>>26)|0,it&=67108863,_=Math.imul(ke,he),d=Math.imul(ke,ye),d=d+Math.imul(Ie,he)|0,w=Math.imul(Ie,ye),_=_+Math.imul(H,Ee)|0,d=d+Math.imul(H,Ue)|0,d=d+Math.imul(ge,Ee)|0,w=w+Math.imul(ge,Ue)|0,_=_+Math.imul(oe,Le)|0,d=d+Math.imul(oe,Ve)|0,d=d+Math.imul(de,Le)|0,w=w+Math.imul(de,Ve)|0,_=_+Math.imul(j,Ke)|0,d=d+Math.imul(j,Xe)|0,d=d+Math.imul(D,Ke)|0,w=w+Math.imul(D,Xe)|0,_=_+Math.imul(C,me)|0,d=d+Math.imul(C,le)|0,d=d+Math.imul(V,me)|0,w=w+Math.imul(V,le)|0;var dt=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(dt>>>26)|0,dt&=67108863,_=Math.imul(Fe,he),d=Math.imul(Fe,ye),d=d+Math.imul($e,he)|0,w=Math.imul($e,ye),_=_+Math.imul(ke,Ee)|0,d=d+Math.imul(ke,Ue)|0,d=d+Math.imul(Ie,Ee)|0,w=w+Math.imul(Ie,Ue)|0,_=_+Math.imul(H,Le)|0,d=d+Math.imul(H,Ve)|0,d=d+Math.imul(ge,Le)|0,w=w+Math.imul(ge,Ve)|0,_=_+Math.imul(oe,Ke)|0,d=d+Math.imul(oe,Xe)|0,d=d+Math.imul(de,Ke)|0,w=w+Math.imul(de,Xe)|0,_=_+Math.imul(j,me)|0,d=d+Math.imul(j,le)|0,d=d+Math.imul(D,me)|0,w=w+Math.imul(D,le)|0,_=_+Math.imul(C,be)|0,d=d+Math.imul(C,Se)|0,d=d+Math.imul(V,be)|0,w=w+Math.imul(V,Se)|0;var gt=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(gt>>>26)|0,gt&=67108863,_=Math.imul(He,he),d=Math.imul(He,ye),d=d+Math.imul(Ye,he)|0,w=Math.imul(Ye,ye),_=_+Math.imul(Fe,Ee)|0,d=d+Math.imul(Fe,Ue)|0,d=d+Math.imul($e,Ee)|0,w=w+Math.imul($e,Ue)|0,_=_+Math.imul(ke,Le)|0,d=d+Math.imul(ke,Ve)|0,d=d+Math.imul(Ie,Le)|0,w=w+Math.imul(Ie,Ve)|0,_=_+Math.imul(H,Ke)|0,d=d+Math.imul(H,Xe)|0,d=d+Math.imul(ge,Ke)|0,w=w+Math.imul(ge,Xe)|0,_=_+Math.imul(oe,me)|0,d=d+Math.imul(oe,le)|0,d=d+Math.imul(de,me)|0,w=w+Math.imul(de,le)|0,_=_+Math.imul(j,be)|0,d=d+Math.imul(j,Se)|0,d=d+Math.imul(D,be)|0,w=w+Math.imul(D,Se)|0,_=_+Math.imul(C,Te)|0,d=d+Math.imul(C,Ne)|0,d=d+Math.imul(V,Te)|0,w=w+Math.imul(V,Ne)|0;var yt=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(yt>>>26)|0,yt&=67108863,_=Math.imul(De,he),d=Math.imul(De,ye),d=d+Math.imul(qe,he)|0,w=Math.imul(qe,ye),_=_+Math.imul(He,Ee)|0,d=d+Math.imul(He,Ue)|0,d=d+Math.imul(Ye,Ee)|0,w=w+Math.imul(Ye,Ue)|0,_=_+Math.imul(Fe,Le)|0,d=d+Math.imul(Fe,Ve)|0,d=d+Math.imul($e,Le)|0,w=w+Math.imul($e,Ve)|0,_=_+Math.imul(ke,Ke)|0,d=d+Math.imul(ke,Xe)|0,d=d+Math.imul(Ie,Ke)|0,w=w+Math.imul(Ie,Xe)|0,_=_+Math.imul(H,me)|0,d=d+Math.imul(H,le)|0,d=d+Math.imul(ge,me)|0,w=w+Math.imul(ge,le)|0,_=_+Math.imul(oe,be)|0,d=d+Math.imul(oe,Se)|0,d=d+Math.imul(de,be)|0,w=w+Math.imul(de,Se)|0,_=_+Math.imul(j,Te)|0,d=d+Math.imul(j,Ne)|0,d=d+Math.imul(D,Te)|0,w=w+Math.imul(D,Ne)|0,_=_+Math.imul(C,ie)|0,d=d+Math.imul(C,ae)|0,d=d+Math.imul(V,ie)|0,w=w+Math.imul(V,ae)|0;var Et=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(Et>>>26)|0,Et&=67108863,_=Math.imul(ze,he),d=Math.imul(ze,ye),d=d+Math.imul(Ge,he)|0,w=Math.imul(Ge,ye),_=_+Math.imul(De,Ee)|0,d=d+Math.imul(De,Ue)|0,d=d+Math.imul(qe,Ee)|0,w=w+Math.imul(qe,Ue)|0,_=_+Math.imul(He,Le)|0,d=d+Math.imul(He,Ve)|0,d=d+Math.imul(Ye,Le)|0,w=w+Math.imul(Ye,Ve)|0,_=_+Math.imul(Fe,Ke)|0,d=d+Math.imul(Fe,Xe)|0,d=d+Math.imul($e,Ke)|0,w=w+Math.imul($e,Xe)|0,_=_+Math.imul(ke,me)|0,d=d+Math.imul(ke,le)|0,d=d+Math.imul(Ie,me)|0,w=w+Math.imul(Ie,le)|0,_=_+Math.imul(H,be)|0,d=d+Math.imul(H,Se)|0,d=d+Math.imul(ge,be)|0,w=w+Math.imul(ge,Se)|0,_=_+Math.imul(oe,Te)|0,d=d+Math.imul(oe,Ne)|0,d=d+Math.imul(de,Te)|0,w=w+Math.imul(de,Ne)|0,_=_+Math.imul(j,ie)|0,d=d+Math.imul(j,ae)|0,d=d+Math.imul(D,ie)|0,w=w+Math.imul(D,ae)|0,_=_+Math.imul(C,fe)|0,d=d+Math.imul(C,ve)|0,d=d+Math.imul(V,fe)|0,w=w+Math.imul(V,ve)|0;var vt=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(vt>>>26)|0,vt&=67108863,_=Math.imul(se,he),d=Math.imul(se,ye),d=d+Math.imul(J,he)|0,w=Math.imul(J,ye),_=_+Math.imul(ze,Ee)|0,d=d+Math.imul(ze,Ue)|0,d=d+Math.imul(Ge,Ee)|0,w=w+Math.imul(Ge,Ue)|0,_=_+Math.imul(De,Le)|0,d=d+Math.imul(De,Ve)|0,d=d+Math.imul(qe,Le)|0,w=w+Math.imul(qe,Ve)|0,_=_+Math.imul(He,Ke)|0,d=d+Math.imul(He,Xe)|0,d=d+Math.imul(Ye,Ke)|0,w=w+Math.imul(Ye,Xe)|0,_=_+Math.imul(Fe,me)|0,d=d+Math.imul(Fe,le)|0,d=d+Math.imul($e,me)|0,w=w+Math.imul($e,le)|0,_=_+Math.imul(ke,be)|0,d=d+Math.imul(ke,Se)|0,d=d+Math.imul(Ie,be)|0,w=w+Math.imul(Ie,Se)|0,_=_+Math.imul(H,Te)|0,d=d+Math.imul(H,Ne)|0,d=d+Math.imul(ge,Te)|0,w=w+Math.imul(ge,Ne)|0,_=_+Math.imul(oe,ie)|0,d=d+Math.imul(oe,ae)|0,d=d+Math.imul(de,ie)|0,w=w+Math.imul(de,ae)|0,_=_+Math.imul(j,fe)|0,d=d+Math.imul(j,ve)|0,d=d+Math.imul(D,fe)|0,w=w+Math.imul(D,ve)|0,_=_+Math.imul(C,xe)|0,d=d+Math.imul(C,Be)|0,d=d+Math.imul(V,xe)|0,w=w+Math.imul(V,Be)|0;var _t=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(_t>>>26)|0,_t&=67108863,_=Math.imul(se,Ee),d=Math.imul(se,Ue),d=d+Math.imul(J,Ee)|0,w=Math.imul(J,Ue),_=_+Math.imul(ze,Le)|0,d=d+Math.imul(ze,Ve)|0,d=d+Math.imul(Ge,Le)|0,w=w+Math.imul(Ge,Ve)|0,_=_+Math.imul(De,Ke)|0,d=d+Math.imul(De,Xe)|0,d=d+Math.imul(qe,Ke)|0,w=w+Math.imul(qe,Xe)|0,_=_+Math.imul(He,me)|0,d=d+Math.imul(He,le)|0,d=d+Math.imul(Ye,me)|0,w=w+Math.imul(Ye,le)|0,_=_+Math.imul(Fe,be)|0,d=d+Math.imul(Fe,Se)|0,d=d+Math.imul($e,be)|0,w=w+Math.imul($e,Se)|0,_=_+Math.imul(ke,Te)|0,d=d+Math.imul(ke,Ne)|0,d=d+Math.imul(Ie,Te)|0,w=w+Math.imul(Ie,Ne)|0,_=_+Math.imul(H,ie)|0,d=d+Math.imul(H,ae)|0,d=d+Math.imul(ge,ie)|0,w=w+Math.imul(ge,ae)|0,_=_+Math.imul(oe,fe)|0,d=d+Math.imul(oe,ve)|0,d=d+Math.imul(de,fe)|0,w=w+Math.imul(de,ve)|0,_=_+Math.imul(j,xe)|0,d=d+Math.imul(j,Be)|0,d=d+Math.imul(D,xe)|0,w=w+Math.imul(D,Be)|0;var wt=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(wt>>>26)|0,wt&=67108863,_=Math.imul(se,Le),d=Math.imul(se,Ve),d=d+Math.imul(J,Le)|0,w=Math.imul(J,Ve),_=_+Math.imul(ze,Ke)|0,d=d+Math.imul(ze,Xe)|0,d=d+Math.imul(Ge,Ke)|0,w=w+Math.imul(Ge,Xe)|0,_=_+Math.imul(De,me)|0,d=d+Math.imul(De,le)|0,d=d+Math.imul(qe,me)|0,w=w+Math.imul(qe,le)|0,_=_+Math.imul(He,be)|0,d=d+Math.imul(He,Se)|0,d=d+Math.imul(Ye,be)|0,w=w+Math.imul(Ye,Se)|0,_=_+Math.imul(Fe,Te)|0,d=d+Math.imul(Fe,Ne)|0,d=d+Math.imul($e,Te)|0,w=w+Math.imul($e,Ne)|0,_=_+Math.imul(ke,ie)|0,d=d+Math.imul(ke,ae)|0,d=d+Math.imul(Ie,ie)|0,w=w+Math.imul(Ie,ae)|0,_=_+Math.imul(H,fe)|0,d=d+Math.imul(H,ve)|0,d=d+Math.imul(ge,fe)|0,w=w+Math.imul(ge,ve)|0,_=_+Math.imul(oe,xe)|0,d=d+Math.imul(oe,Be)|0,d=d+Math.imul(de,xe)|0,w=w+Math.imul(de,Be)|0;var ct=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(ct>>>26)|0,ct&=67108863,_=Math.imul(se,Ke),d=Math.imul(se,Xe),d=d+Math.imul(J,Ke)|0,w=Math.imul(J,Xe),_=_+Math.imul(ze,me)|0,d=d+Math.imul(ze,le)|0,d=d+Math.imul(Ge,me)|0,w=w+Math.imul(Ge,le)|0,_=_+Math.imul(De,be)|0,d=d+Math.imul(De,Se)|0,d=d+Math.imul(qe,be)|0,w=w+Math.imul(qe,Se)|0,_=_+Math.imul(He,Te)|0,d=d+Math.imul(He,Ne)|0,d=d+Math.imul(Ye,Te)|0,w=w+Math.imul(Ye,Ne)|0,_=_+Math.imul(Fe,ie)|0,d=d+Math.imul(Fe,ae)|0,d=d+Math.imul($e,ie)|0,w=w+Math.imul($e,ae)|0,_=_+Math.imul(ke,fe)|0,d=d+Math.imul(ke,ve)|0,d=d+Math.imul(Ie,fe)|0,w=w+Math.imul(Ie,ve)|0,_=_+Math.imul(H,xe)|0,d=d+Math.imul(H,Be)|0,d=d+Math.imul(ge,xe)|0,w=w+Math.imul(ge,Be)|0;var pt=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(pt>>>26)|0,pt&=67108863,_=Math.imul(se,me),d=Math.imul(se,le),d=d+Math.imul(J,me)|0,w=Math.imul(J,le),_=_+Math.imul(ze,be)|0,d=d+Math.imul(ze,Se)|0,d=d+Math.imul(Ge,be)|0,w=w+Math.imul(Ge,Se)|0,_=_+Math.imul(De,Te)|0,d=d+Math.imul(De,Ne)|0,d=d+Math.imul(qe,Te)|0,w=w+Math.imul(qe,Ne)|0,_=_+Math.imul(He,ie)|0,d=d+Math.imul(He,ae)|0,d=d+Math.imul(Ye,ie)|0,w=w+Math.imul(Ye,ae)|0,_=_+Math.imul(Fe,fe)|0,d=d+Math.imul(Fe,ve)|0,d=d+Math.imul($e,fe)|0,w=w+Math.imul($e,ve)|0,_=_+Math.imul(ke,xe)|0,d=d+Math.imul(ke,Be)|0,d=d+Math.imul(Ie,xe)|0,w=w+Math.imul(Ie,Be)|0;var at=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(at>>>26)|0,at&=67108863,_=Math.imul(se,be),d=Math.imul(se,Se),d=d+Math.imul(J,be)|0,w=Math.imul(J,Se),_=_+Math.imul(ze,Te)|0,d=d+Math.imul(ze,Ne)|0,d=d+Math.imul(Ge,Te)|0,w=w+Math.imul(Ge,Ne)|0,_=_+Math.imul(De,ie)|0,d=d+Math.imul(De,ae)|0,d=d+Math.imul(qe,ie)|0,w=w+Math.imul(qe,ae)|0,_=_+Math.imul(He,fe)|0,d=d+Math.imul(He,ve)|0,d=d+Math.imul(Ye,fe)|0,w=w+Math.imul(Ye,ve)|0,_=_+Math.imul(Fe,xe)|0,d=d+Math.imul(Fe,Be)|0,d=d+Math.imul($e,xe)|0,w=w+Math.imul($e,Be)|0;var lt=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(lt>>>26)|0,lt&=67108863,_=Math.imul(se,Te),d=Math.imul(se,Ne),d=d+Math.imul(J,Te)|0,w=Math.imul(J,Ne),_=_+Math.imul(ze,ie)|0,d=d+Math.imul(ze,ae)|0,d=d+Math.imul(Ge,ie)|0,w=w+Math.imul(Ge,ae)|0,_=_+Math.imul(De,fe)|0,d=d+Math.imul(De,ve)|0,d=d+Math.imul(qe,fe)|0,w=w+Math.imul(qe,ve)|0,_=_+Math.imul(He,xe)|0,d=d+Math.imul(He,Be)|0,d=d+Math.imul(Ye,xe)|0,w=w+Math.imul(Ye,Be)|0;var ht=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(ht>>>26)|0,ht&=67108863,_=Math.imul(se,ie),d=Math.imul(se,ae),d=d+Math.imul(J,ie)|0,w=Math.imul(J,ae),_=_+Math.imul(ze,fe)|0,d=d+Math.imul(ze,ve)|0,d=d+Math.imul(Ge,fe)|0,w=w+Math.imul(Ge,ve)|0,_=_+Math.imul(De,xe)|0,d=d+Math.imul(De,Be)|0,d=d+Math.imul(qe,xe)|0,w=w+Math.imul(qe,Be)|0;var ot=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(ot>>>26)|0,ot&=67108863,_=Math.imul(se,fe),d=Math.imul(se,ve),d=d+Math.imul(J,fe)|0,w=Math.imul(J,ve),_=_+Math.imul(ze,xe)|0,d=d+Math.imul(ze,Be)|0,d=d+Math.imul(Ge,xe)|0,w=w+Math.imul(Ge,Be)|0;var je=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(je>>>26)|0,je&=67108863,_=Math.imul(se,xe),d=Math.imul(se,Be),d=d+Math.imul(J,xe)|0,w=Math.imul(J,Be);var We=(k+_|0)+((d&8191)<<13)|0;return k=(w+(d>>>13)|0)+(We>>>26)|0,We&=67108863,$[0]=Qe,$[1]=Ze,$[2]=xt,$[3]=it,$[4]=dt,$[5]=gt,$[6]=yt,$[7]=Et,$[8]=vt,$[9]=_t,$[10]=wt,$[11]=ct,$[12]=pt,$[13]=at,$[14]=lt,$[15]=ht,$[16]=ot,$[17]=je,$[18]=We,k!==0&&($[19]=k,m.length++),m};Math.imul||(F=L);function U(T,u,p){p.negative=u.negative^T.negative,p.length=T.length+u.length;for(var m=0,y=0,E=0;E<p.length-1;E++){var $=y;y=0;for(var k=m&67108863,_=Math.min(E,u.length-1),d=Math.max(0,E-T.length+1);d<=_;d++){var w=E-d,I=T.words[w]|0,C=u.words[d]|0,V=I*C,O=V&67108863;$=$+(V/67108864|0)|0,O=O+k|0,k=O&67108863,$=$+(O>>>26)|0,y+=$>>>26,$&=67108863}p.words[E]=k,m=$,$=y}return m!==0?p.words[E]=m:p.length--,p.strip()}function q(T,u,p){var m=new X;return m.mulp(T,u,p)}a.prototype.mulTo=function(u,p){var m,y=this.length+u.length;return this.length===10&&u.length===10?m=F(this,u,p):y<63?m=L(this,u,p):y<1024?m=U(this,u,p):m=q(this,u,p),m};function X(T,u){this.x=T,this.y=u}X.prototype.makeRBT=function(u){for(var p=new Array(u),m=a.prototype._countBits(u)-1,y=0;y<u;y++)p[y]=this.revBin(y,m,u);return p},X.prototype.revBin=function(u,p,m){if(u===0||u===m-1)return u;for(var y=0,E=0;E<p;E++)y|=(u&1)<<p-E-1,u>>=1;return y},X.prototype.permute=function(u,p,m,y,E,$){for(var k=0;k<$;k++)y[k]=p[u[k]],E[k]=m[u[k]]},X.prototype.transform=function(u,p,m,y,E,$){this.permute($,u,p,m,y,E);for(var k=1;k<E;k<<=1)for(var _=k<<1,d=Math.cos(2*Math.PI/_),w=Math.sin(2*Math.PI/_),I=0;I<E;I+=_)for(var C=d,V=w,O=0;O<k;O++){var j=m[I+O],D=y[I+O],Q=m[I+O+k],oe=y[I+O+k],de=C*Q-V*oe;oe=C*oe+V*Q,Q=de,m[I+O]=j+Q,y[I+O]=D+oe,m[I+O+k]=j-Q,y[I+O+k]=D-oe,O!==_&&(de=d*C-w*V,V=d*V+w*C,C=de)}},X.prototype.guessLen13b=function(u,p){var m=Math.max(p,u)|1,y=m&1,E=0;for(m=m/2|0;m;m=m>>>1)E++;return 1<<E+1+y},X.prototype.conjugate=function(u,p,m){if(!(m<=1))for(var y=0;y<m/2;y++){var E=u[y];u[y]=u[m-y-1],u[m-y-1]=E,E=p[y],p[y]=-p[m-y-1],p[m-y-1]=-E}},X.prototype.normalize13b=function(u,p){for(var m=0,y=0;y<p/2;y++){var E=Math.round(u[2*y+1]/p)*8192+Math.round(u[2*y]/p)+m;u[y]=E&67108863,E<67108864?m=0:m=E/67108864|0}return u},X.prototype.convert13b=function(u,p,m,y){for(var E=0,$=0;$<p;$++)E=E+(u[$]|0),m[2*$]=E&8191,E=E>>>13,m[2*$+1]=E&8191,E=E>>>13;for($=2*p;$<y;++$)m[$]=0;o(E===0),o((E&-8192)===0)},X.prototype.stub=function(u){for(var p=new Array(u),m=0;m<u;m++)p[m]=0;return p},X.prototype.mulp=function(u,p,m){var y=2*this.guessLen13b(u.length,p.length),E=this.makeRBT(y),$=this.stub(y),k=new Array(y),_=new Array(y),d=new Array(y),w=new Array(y),I=new Array(y),C=new Array(y),V=m.words;V.length=y,this.convert13b(u.words,u.length,k,y),this.convert13b(p.words,p.length,w,y),this.transform(k,$,_,d,y,E),this.transform(w,$,I,C,y,E);for(var O=0;O<y;O++){var j=_[O]*I[O]-d[O]*C[O];d[O]=_[O]*C[O]+d[O]*I[O],_[O]=j}return this.conjugate(_,d,y),this.transform(_,d,V,$,y,E),this.conjugate(V,$,y),this.normalize13b(V,y),m.negative=u.negative^p.negative,m.length=u.length+p.length,m.strip()},a.prototype.mul=function(u){var p=new a(null);return p.words=new Array(this.length+u.length),this.mulTo(u,p)},a.prototype.mulf=function(u){var p=new a(null);return p.words=new Array(this.length+u.length),q(this,u,p)},a.prototype.imul=function(u){return this.clone().mulTo(u,this)},a.prototype.imuln=function(u){o(typeof u=="number"),o(u<67108864);for(var p=0,m=0;m<this.length;m++){var y=(this.words[m]|0)*u,E=(y&67108863)+(p&67108863);p>>=26,p+=y/67108864|0,p+=E>>>26,this.words[m]=E&67108863}return p!==0&&(this.words[m]=p,this.length++),this},a.prototype.muln=function(u){return this.clone().imuln(u)},a.prototype.sqr=function(){return this.mul(this)},a.prototype.isqr=function(){return this.imul(this.clone())},a.prototype.pow=function(u){var p=P(u);if(p.length===0)return new a(1);for(var m=this,y=0;y<p.length&&p[y]===0;y++,m=m.sqr());if(++y<p.length)for(var E=m.sqr();y<p.length;y++,E=E.sqr())p[y]!==0&&(m=m.mul(E));return m},a.prototype.iushln=function(u){o(typeof u=="number"&&u>=0);var p=u%26,m=(u-p)/26,y=67108863>>>26-p<<26-p,E;if(p!==0){var $=0;for(E=0;E<this.length;E++){var k=this.words[E]&y,_=(this.words[E]|0)-k<<p;this.words[E]=_|$,$=k>>>26-p}$&&(this.words[E]=$,this.length++)}if(m!==0){for(E=this.length-1;E>=0;E--)this.words[E+m]=this.words[E];for(E=0;E<m;E++)this.words[E]=0;this.length+=m}return this.strip()},a.prototype.ishln=function(u){return o(this.negative===0),this.iushln(u)},a.prototype.iushrn=function(u,p,m){o(typeof u=="number"&&u>=0);var y;p?y=(p-p%26)/26:y=0;var E=u%26,$=Math.min((u-E)/26,this.length),k=67108863^67108863>>>E<<E,_=m;if(y-=$,y=Math.max(0,y),_){for(var d=0;d<$;d++)_.words[d]=this.words[d];_.length=$}if($!==0)if(this.length>$)for(this.length-=$,d=0;d<this.length;d++)this.words[d]=this.words[d+$];else this.words[0]=0,this.length=1;var w=0;for(d=this.length-1;d>=0&&(w!==0||d>=y);d--){var I=this.words[d]|0;this.words[d]=w<<26-E|I>>>E,w=I&k}return _&&w!==0&&(_.words[_.length++]=w),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},a.prototype.ishrn=function(u,p,m){return o(this.negative===0),this.iushrn(u,p,m)},a.prototype.shln=function(u){return this.clone().ishln(u)},a.prototype.ushln=function(u){return this.clone().iushln(u)},a.prototype.shrn=function(u){return this.clone().ishrn(u)},a.prototype.ushrn=function(u){return this.clone().iushrn(u)},a.prototype.testn=function(u){o(typeof u=="number"&&u>=0);var p=u%26,m=(u-p)/26,y=1<<p;if(this.length<=m)return!1;var E=this.words[m];return!!(E&y)},a.prototype.imaskn=function(u){o(typeof u=="number"&&u>=0);var p=u%26,m=(u-p)/26;if(o(this.negative===0,"imaskn works only with positive numbers"),this.length<=m)return this;if(p!==0&&m++,this.length=Math.min(m,this.length),p!==0){var y=67108863^67108863>>>p<<p;this.words[this.length-1]&=y}return this.strip()},a.prototype.maskn=function(u){return this.clone().imaskn(u)},a.prototype.iaddn=function(u){return o(typeof u=="number"),o(u<67108864),u<0?this.isubn(-u):this.negative!==0?this.length===1&&(this.words[0]|0)<u?(this.words[0]=u-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(u),this.negative=1,this):this._iaddn(u)},a.prototype._iaddn=function(u){this.words[0]+=u;for(var p=0;p<this.length&&this.words[p]>=67108864;p++)this.words[p]-=67108864,p===this.length-1?this.words[p+1]=1:this.words[p+1]++;return this.length=Math.max(this.length,p+1),this},a.prototype.isubn=function(u){if(o(typeof u=="number"),o(u<67108864),u<0)return this.iaddn(-u);if(this.negative!==0)return this.negative=0,this.iaddn(u),this.negative=1,this;if(this.words[0]-=u,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var p=0;p<this.length&&this.words[p]<0;p++)this.words[p]+=67108864,this.words[p+1]-=1;return this.strip()},a.prototype.addn=function(u){return this.clone().iaddn(u)},a.prototype.subn=function(u){return this.clone().isubn(u)},a.prototype.iabs=function(){return this.negative=0,this},a.prototype.abs=function(){return this.clone().iabs()},a.prototype._ishlnsubmul=function(u,p,m){var y=u.length+m,E;this._expand(y);var $,k=0;for(E=0;E<u.length;E++){$=(this.words[E+m]|0)+k;var _=(u.words[E]|0)*p;$-=_&67108863,k=($>>26)-(_/67108864|0),this.words[E+m]=$&67108863}for(;E<this.length-m;E++)$=(this.words[E+m]|0)+k,k=$>>26,this.words[E+m]=$&67108863;if(k===0)return this.strip();for(o(k===-1),k=0,E=0;E<this.length;E++)$=-(this.words[E]|0)+k,k=$>>26,this.words[E]=$&67108863;return this.negative=1,this.strip()},a.prototype._wordDiv=function(u,p){var m=this.length-u.length,y=this.clone(),E=u,$=E.words[E.length-1]|0,k=this._countBits($);m=26-k,m!==0&&(E=E.ushln(m),y.iushln(m),$=E.words[E.length-1]|0);var _=y.length-E.length,d;if(p!=="mod"){d=new a(null),d.length=_+1,d.words=new Array(d.length);for(var w=0;w<d.length;w++)d.words[w]=0}var I=y.clone()._ishlnsubmul(E,1,_);I.negative===0&&(y=I,d&&(d.words[_]=1));for(var C=_-1;C>=0;C--){var V=(y.words[E.length+C]|0)*67108864+(y.words[E.length+C-1]|0);for(V=Math.min(V/$|0,67108863),y._ishlnsubmul(E,V,C);y.negative!==0;)V--,y.negative=0,y._ishlnsubmul(E,1,C),y.isZero()||(y.negative^=1);d&&(d.words[C]=V)}return d&&d.strip(),y.strip(),p!=="div"&&m!==0&&y.iushrn(m),{div:d||null,mod:y}},a.prototype.divmod=function(u,p,m){if(o(!u.isZero()),this.isZero())return{div:new a(0),mod:new a(0)};var y,E,$;return this.negative!==0&&u.negative===0?($=this.neg().divmod(u,p),p!=="mod"&&(y=$.div.neg()),p!=="div"&&(E=$.mod.neg(),m&&E.negative!==0&&E.iadd(u)),{div:y,mod:E}):this.negative===0&&u.negative!==0?($=this.divmod(u.neg(),p),p!=="mod"&&(y=$.div.neg()),{div:y,mod:$.mod}):this.negative&u.negative?($=this.neg().divmod(u.neg(),p),p!=="div"&&(E=$.mod.neg(),m&&E.negative!==0&&E.isub(u)),{div:$.div,mod:E}):u.length>this.length||this.cmp(u)<0?{div:new a(0),mod:this}:u.length===1?p==="div"?{div:this.divn(u.words[0]),mod:null}:p==="mod"?{div:null,mod:new a(this.modn(u.words[0]))}:{div:this.divn(u.words[0]),mod:new a(this.modn(u.words[0]))}:this._wordDiv(u,p)},a.prototype.div=function(u){return this.divmod(u,"div",!1).div},a.prototype.mod=function(u){return this.divmod(u,"mod",!1).mod},a.prototype.umod=function(u){return this.divmod(u,"mod",!0).mod},a.prototype.divRound=function(u){var p=this.divmod(u);if(p.mod.isZero())return p.div;var m=p.div.negative!==0?p.mod.isub(u):p.mod,y=u.ushrn(1),E=u.andln(1),$=m.cmp(y);return $<0||E===1&&$===0?p.div:p.div.negative!==0?p.div.isubn(1):p.div.iaddn(1)},a.prototype.modn=function(u){o(u<=67108863);for(var p=(1<<26)%u,m=0,y=this.length-1;y>=0;y--)m=(p*m+(this.words[y]|0))%u;return m},a.prototype.idivn=function(u){o(u<=67108863);for(var p=0,m=this.length-1;m>=0;m--){var y=(this.words[m]|0)+p*67108864;this.words[m]=y/u|0,p=y%u}return this.strip()},a.prototype.divn=function(u){return this.clone().idivn(u)},a.prototype.egcd=function(u){o(u.negative===0),o(!u.isZero());var p=this,m=u.clone();p.negative!==0?p=p.umod(u):p=p.clone();for(var y=new a(1),E=new a(0),$=new a(0),k=new a(1),_=0;p.isEven()&&m.isEven();)p.iushrn(1),m.iushrn(1),++_;for(var d=m.clone(),w=p.clone();!p.isZero();){for(var I=0,C=1;!(p.words[0]&C)&&I<26;++I,C<<=1);if(I>0)for(p.iushrn(I);I-- >0;)(y.isOdd()||E.isOdd())&&(y.iadd(d),E.isub(w)),y.iushrn(1),E.iushrn(1);for(var V=0,O=1;!(m.words[0]&O)&&V<26;++V,O<<=1);if(V>0)for(m.iushrn(V);V-- >0;)($.isOdd()||k.isOdd())&&($.iadd(d),k.isub(w)),$.iushrn(1),k.iushrn(1);p.cmp(m)>=0?(p.isub(m),y.isub($),E.isub(k)):(m.isub(p),$.isub(y),k.isub(E))}return{a:$,b:k,gcd:m.iushln(_)}},a.prototype._invmp=function(u){o(u.negative===0),o(!u.isZero());var p=this,m=u.clone();p.negative!==0?p=p.umod(u):p=p.clone();for(var y=new a(1),E=new a(0),$=m.clone();p.cmpn(1)>0&&m.cmpn(1)>0;){for(var k=0,_=1;!(p.words[0]&_)&&k<26;++k,_<<=1);if(k>0)for(p.iushrn(k);k-- >0;)y.isOdd()&&y.iadd($),y.iushrn(1);for(var d=0,w=1;!(m.words[0]&w)&&d<26;++d,w<<=1);if(d>0)for(m.iushrn(d);d-- >0;)E.isOdd()&&E.iadd($),E.iushrn(1);p.cmp(m)>=0?(p.isub(m),y.isub(E)):(m.isub(p),E.isub(y))}var I;return p.cmpn(1)===0?I=y:I=E,I.cmpn(0)<0&&I.iadd(u),I},a.prototype.gcd=function(u){if(this.isZero())return u.abs();if(u.isZero())return this.abs();var p=this.clone(),m=u.clone();p.negative=0,m.negative=0;for(var y=0;p.isEven()&&m.isEven();y++)p.iushrn(1),m.iushrn(1);do{for(;p.isEven();)p.iushrn(1);for(;m.isEven();)m.iushrn(1);var E=p.cmp(m);if(E<0){var $=p;p=m,m=$}else if(E===0||m.cmpn(1)===0)break;p.isub(m)}while(!0);return m.iushln(y)},a.prototype.invm=function(u){return this.egcd(u).a.umod(u)},a.prototype.isEven=function(){return(this.words[0]&1)===0},a.prototype.isOdd=function(){return(this.words[0]&1)===1},a.prototype.andln=function(u){return this.words[0]&u},a.prototype.bincn=function(u){o(typeof u=="number");var p=u%26,m=(u-p)/26,y=1<<p;if(this.length<=m)return this._expand(m+1),this.words[m]|=y,this;for(var E=y,$=m;E!==0&&$<this.length;$++){var k=this.words[$]|0;k+=E,E=k>>>26,k&=67108863,this.words[$]=k}return E!==0&&(this.words[$]=E,this.length++),this},a.prototype.isZero=function(){return this.length===1&&this.words[0]===0},a.prototype.cmpn=function(u){var p=u<0;if(this.negative!==0&&!p)return-1;if(this.negative===0&&p)return 1;this.strip();var m;if(this.length>1)m=1;else{p&&(u=-u),o(u<=67108863,"Number is too big");var y=this.words[0]|0;m=y===u?0:y<u?-1:1}return this.negative!==0?-m|0:m},a.prototype.cmp=function(u){if(this.negative!==0&&u.negative===0)return-1;if(this.negative===0&&u.negative!==0)return 1;var p=this.ucmp(u);return this.negative!==0?-p|0:p},a.prototype.ucmp=function(u){if(this.length>u.length)return 1;if(this.length<u.length)return-1;for(var p=0,m=this.length-1;m>=0;m--){var y=this.words[m]|0,E=u.words[m]|0;if(y!==E){y<E?p=-1:y>E&&(p=1);break}}return p},a.prototype.gtn=function(u){return this.cmpn(u)===1},a.prototype.gt=function(u){return this.cmp(u)===1},a.prototype.gten=function(u){return this.cmpn(u)>=0},a.prototype.gte=function(u){return this.cmp(u)>=0},a.prototype.ltn=function(u){return this.cmpn(u)===-1},a.prototype.lt=function(u){return this.cmp(u)===-1},a.prototype.lten=function(u){return this.cmpn(u)<=0},a.prototype.lte=function(u){return this.cmp(u)<=0},a.prototype.eqn=function(u){return this.cmpn(u)===0},a.prototype.eq=function(u){return this.cmp(u)===0},a.red=function(u){return new pe(u)},a.prototype.toRed=function(u){return o(!this.red,"Already a number in reduction context"),o(this.negative===0,"red works only with positives"),u.convertTo(this)._forceRed(u)},a.prototype.fromRed=function(){return o(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},a.prototype._forceRed=function(u){return this.red=u,this},a.prototype.forceRed=function(u){return o(!this.red,"Already a number in reduction context"),this._forceRed(u)},a.prototype.redAdd=function(u){return o(this.red,"redAdd works only with red numbers"),this.red.add(this,u)},a.prototype.redIAdd=function(u){return o(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,u)},a.prototype.redSub=function(u){return o(this.red,"redSub works only with red numbers"),this.red.sub(this,u)},a.prototype.redISub=function(u){return o(this.red,"redISub works only with red numbers"),this.red.isub(this,u)},a.prototype.redShl=function(u){return o(this.red,"redShl works only with red numbers"),this.red.shl(this,u)},a.prototype.redMul=function(u){return o(this.red,"redMul works only with red numbers"),this.red._verify2(this,u),this.red.mul(this,u)},a.prototype.redIMul=function(u){return o(this.red,"redMul works only with red numbers"),this.red._verify2(this,u),this.red.imul(this,u)},a.prototype.redSqr=function(){return o(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},a.prototype.redISqr=function(){return o(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},a.prototype.redSqrt=function(){return o(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},a.prototype.redInvm=function(){return o(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},a.prototype.redNeg=function(){return o(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},a.prototype.redPow=function(u){return o(this.red&&!u.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,u)};var ee={k256:null,p224:null,p192:null,p25519:null};function te(T,u){this.name=T,this.p=new a(u,16),this.n=this.p.bitLength(),this.k=new a(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}te.prototype._tmp=function(){var u=new a(null);return u.words=new Array(Math.ceil(this.n/13)),u},te.prototype.ireduce=function(u){var p=u,m;do this.split(p,this.tmp),p=this.imulK(p),p=p.iadd(this.tmp),m=p.bitLength();while(m>this.n);var y=m<this.n?-1:p.ucmp(this.p);return y===0?(p.words[0]=0,p.length=1):y>0?p.isub(this.p):p.strip!==void 0?p.strip():p._strip(),p},te.prototype.split=function(u,p){u.iushrn(this.n,0,p)},te.prototype.imulK=function(u){return u.imul(this.k)};function ce(){te.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}c(ce,te),ce.prototype.split=function(u,p){for(var m=4194303,y=Math.min(u.length,9),E=0;E<y;E++)p.words[E]=u.words[E];if(p.length=y,u.length<=9){u.words[0]=0,u.length=1;return}var $=u.words[9];for(p.words[p.length++]=$&m,E=10;E<u.length;E++){var k=u.words[E]|0;u.words[E-10]=(k&m)<<4|$>>>22,$=k}$>>>=22,u.words[E-10]=$,$===0&&u.length>10?u.length-=10:u.length-=9},ce.prototype.imulK=function(u){u.words[u.length]=0,u.words[u.length+1]=0,u.length+=2;for(var p=0,m=0;m<u.length;m++){var y=u.words[m]|0;p+=y*977,u.words[m]=p&67108863,p=y*64+(p/67108864|0)}return u.words[u.length-1]===0&&(u.length--,u.words[u.length-1]===0&&u.length--),u};function ue(){te.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}c(ue,te);function Ae(){te.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}c(Ae,te);function we(){te.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}c(we,te),we.prototype.imulK=function(u){for(var p=0,m=0;m<u.length;m++){var y=(u.words[m]|0)*19+p,E=y&67108863;y>>>=26,u.words[m]=E,p=y}return p!==0&&(u.words[u.length++]=p),u},a._prime=function(u){if(ee[u])return ee[u];var p;if(u==="k256")p=new ce;else if(u==="p224")p=new ue;else if(u==="p192")p=new Ae;else if(u==="p25519")p=new we;else throw new Error("Unknown prime "+u);return ee[u]=p,p};function pe(T){if(typeof T=="string"){var u=a._prime(T);this.m=u.p,this.prime=u}else o(T.gtn(1),"modulus must be greater than 1"),this.m=T,this.prime=null}pe.prototype._verify1=function(u){o(u.negative===0,"red works only with positives"),o(u.red,"red works only with red numbers")},pe.prototype._verify2=function(u,p){o((u.negative|p.negative)===0,"red works only with positives"),o(u.red&&u.red===p.red,"red works only with red numbers")},pe.prototype.imod=function(u){return this.prime?this.prime.ireduce(u)._forceRed(this):u.umod(this.m)._forceRed(this)},pe.prototype.neg=function(u){return u.isZero()?u.clone():this.m.sub(u)._forceRed(this)},pe.prototype.add=function(u,p){this._verify2(u,p);var m=u.add(p);return m.cmp(this.m)>=0&&m.isub(this.m),m._forceRed(this)},pe.prototype.iadd=function(u,p){this._verify2(u,p);var m=u.iadd(p);return m.cmp(this.m)>=0&&m.isub(this.m),m},pe.prototype.sub=function(u,p){this._verify2(u,p);var m=u.sub(p);return m.cmpn(0)<0&&m.iadd(this.m),m._forceRed(this)},pe.prototype.isub=function(u,p){this._verify2(u,p);var m=u.isub(p);return m.cmpn(0)<0&&m.iadd(this.m),m},pe.prototype.shl=function(u,p){return this._verify1(u),this.imod(u.ushln(p))},pe.prototype.imul=function(u,p){return this._verify2(u,p),this.imod(u.imul(p))},pe.prototype.mul=function(u,p){return this._verify2(u,p),this.imod(u.mul(p))},pe.prototype.isqr=function(u){return this.imul(u,u.clone())},pe.prototype.sqr=function(u){return this.mul(u,u)},pe.prototype.sqrt=function(u){if(u.isZero())return u.clone();var p=this.m.andln(3);if(o(p%2===1),p===3){var m=this.m.add(new a(1)).iushrn(2);return this.pow(u,m)}for(var y=this.m.subn(1),E=0;!y.isZero()&&y.andln(1)===0;)E++,y.iushrn(1);o(!y.isZero());var $=new a(1).toRed(this),k=$.redNeg(),_=this.m.subn(1).iushrn(1),d=this.m.bitLength();for(d=new a(2*d*d).toRed(this);this.pow(d,_).cmp(k)!==0;)d.redIAdd(k);for(var w=this.pow(d,y),I=this.pow(u,y.addn(1).iushrn(1)),C=this.pow(u,y),V=E;C.cmp($)!==0;){for(var O=C,j=0;O.cmp($)!==0;j++)O=O.redSqr();o(j<V);var D=this.pow(w,new a(1).iushln(V-j-1));I=I.redMul(D),w=D.redSqr(),C=C.redMul(w),V=j}return I},pe.prototype.invm=function(u){var p=u._invmp(this.m);return p.negative!==0?(p.negative=0,this.imod(p).redNeg()):this.imod(p)},pe.prototype.pow=function(u,p){if(p.isZero())return new a(1).toRed(this);if(p.cmpn(1)===0)return u.clone();var m=4,y=new Array(1<<m);y[0]=new a(1).toRed(this),y[1]=u;for(var E=2;E<y.length;E++)y[E]=this.mul(y[E-1],u);var $=y[0],k=0,_=0,d=p.bitLength()%26;for(d===0&&(d=26),E=p.length-1;E>=0;E--){for(var w=p.words[E],I=d-1;I>=0;I--){var C=w>>I&1;if($!==y[0]&&($=this.sqr($)),C===0&&k===0){_=0;continue}k<<=1,k|=C,_++,!(_!==m&&(E!==0||I!==0))&&($=this.mul($,y[k]),_=0,k=0)}d=26}return $},pe.prototype.convertTo=function(u){var p=u.umod(this.m);return p===u?p.clone():p},pe.prototype.convertFrom=function(u){var p=u.clone();return p.red=null,p},a.mont=function(u){return new Ce(u)};function Ce(T){pe.call(this,T),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new a(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}c(Ce,pe),Ce.prototype.convertTo=function(u){return this.imod(u.ushln(this.shift))},Ce.prototype.convertFrom=function(u){var p=this.imod(u.mul(this.rinv));return p.red=null,p},Ce.prototype.imul=function(u,p){if(u.isZero()||p.isZero())return u.words[0]=0,u.length=1,u;var m=u.imul(p),y=m.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),E=m.isub(y).iushrn(this.shift),$=E;return E.cmp(this.m)>=0?$=E.isub(this.m):E.cmpn(0)<0&&($=E.iadd(this.m)),$._forceRed(this)},Ce.prototype.mul=function(u,p){if(u.isZero()||p.isZero())return new a(0)._forceRed(this);var m=u.mul(p),y=m.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),E=m.isub(y).iushrn(this.shift),$=E;return E.cmp(this.m)>=0?$=E.isub(this.m):E.cmpn(0)<0&&($=E.iadd(this.m)),$._forceRed(this)},Ce.prototype.invm=function(u){var p=this.imod(u._invmp(this.m).mul(this.r2));return p._forceRed(this)}})(t,commonjsGlobal)})(bn$1);var bnExports$1=bn$1.exports,browser$5,hasRequiredBrowser;function requireBrowser(){if(hasRequiredBrowser)return browser$5;hasRequiredBrowser=1;var t=requireElliptic(),e=bnExports$1;browser$5=function(l){return new o(l)};var n={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};n.p224=n.secp224r1,n.p256=n.secp256r1=n.prime256v1,n.p192=n.secp192r1=n.prime192v1,n.p384=n.secp384r1,n.p521=n.secp521r1;function o(a){this.curveType=n[a],this.curveType||(this.curveType={name:a}),this.curve=new t.ec(this.curveType.name),this.keys=void 0}o.prototype.generateKeys=function(a,l){return this.keys=this.curve.genKeyPair(),this.getPublicKey(a,l)},o.prototype.computeSecret=function(a,l,b){l=l||"utf8",Buffer$1$1.isBuffer(a)||(a=new Buffer$1$1(a,l));var v=this.curve.keyFromPublic(a).getPublic(),A=v.mul(this.keys.getPrivate()).getX();return c(A,b,this.curveType.byteLength)},o.prototype.getPublicKey=function(a,l){var b=this.keys.getPublic(l==="compressed",!0);return l==="hybrid"&&(b[b.length-1]%2?b[0]=7:b[0]=6),c(b,a)},o.prototype.getPrivateKey=function(a){return c(this.keys.getPrivate(),a)},o.prototype.setPublicKey=function(a,l){return l=l||"utf8",Buffer$1$1.isBuffer(a)||(a=new Buffer$1$1(a,l)),this.keys._importPublic(a),this},o.prototype.setPrivateKey=function(a,l){l=l||"utf8",Buffer$1$1.isBuffer(a)||(a=new Buffer$1$1(a,l));var b=new e(a);return b=b.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(b),this};function c(a,l,b){Array.isArray(a)||(a=a.toArray());var v=new Buffer$1$1(a);if(b&&v.length<b){var A=new Buffer$1$1(b-v.length);A.fill(0),v=Buffer$1$1.concat([A,v])}return l?v.toString(l):v}return browser$5}var browser$4={},createHash$2=browser$d,Buffer$4=safeBufferExports$2.Buffer,mgf$2=function(t,e){for(var n=Buffer$4.alloc(0),o=0,c;n.length<e;)c=i2ops(o++),n=Buffer$4.concat([n,createHash$2("sha1").update(t).update(c).digest()]);return n.slice(0,e)};function i2ops(t){var e=Buffer$4.allocUnsafe(4);return e.writeUInt32BE(t,0),e}var xor$2=function t(e,n){for(var o=e.length,c=-1;++c<o;)e[c]^=n[c];return e},bn={exports:{}};bn.exports;(function(t){(function(e,n){function o(T,u){if(!T)throw new Error(u||"Assertion failed")}function c(T,u){T.super_=u;var p=function(){};p.prototype=u.prototype,T.prototype=new p,T.prototype.constructor=T}function a(T,u,p){if(a.isBN(T))return T;this.negative=0,this.words=null,this.length=0,this.red=null,T!==null&&((u==="le"||u==="be")&&(p=u,u=10),this._init(T||0,u||10,p||"be"))}typeof e=="object"?e.exports=a:n.BN=a,a.BN=a,a.wordSize=26;var l;try{typeof window<"u"&&typeof window.Buffer<"u"?l=window.Buffer:l=require$$0$3.Buffer}catch{}a.isBN=function(u){return u instanceof a?!0:u!==null&&typeof u=="object"&&u.constructor.wordSize===a.wordSize&&Array.isArray(u.words)},a.max=function(u,p){return u.cmp(p)>0?u:p},a.min=function(u,p){return u.cmp(p)<0?u:p},a.prototype._init=function(u,p,m){if(typeof u=="number")return this._initNumber(u,p,m);if(typeof u=="object")return this._initArray(u,p,m);p==="hex"&&(p=16),o(p===(p|0)&&p>=2&&p<=36),u=u.toString().replace(/\s+/g,"");var y=0;u[0]==="-"&&(y++,this.negative=1),y<u.length&&(p===16?this._parseHex(u,y,m):(this._parseBase(u,p,y),m==="le"&&this._initArray(this.toArray(),p,m)))},a.prototype._initNumber=function(u,p,m){u<0&&(this.negative=1,u=-u),u<67108864?(this.words=[u&67108863],this.length=1):u<4503599627370496?(this.words=[u&67108863,u/67108864&67108863],this.length=2):(o(u<9007199254740992),this.words=[u&67108863,u/67108864&67108863,1],this.length=3),m==="le"&&this._initArray(this.toArray(),p,m)},a.prototype._initArray=function(u,p,m){if(o(typeof u.length=="number"),u.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(u.length/3),this.words=new Array(this.length);for(var y=0;y<this.length;y++)this.words[y]=0;var E,$,k=0;if(m==="be")for(y=u.length-1,E=0;y>=0;y-=3)$=u[y]|u[y-1]<<8|u[y-2]<<16,this.words[E]|=$<<k&67108863,this.words[E+1]=$>>>26-k&67108863,k+=24,k>=26&&(k-=26,E++);else if(m==="le")for(y=0,E=0;y<u.length;y+=3)$=u[y]|u[y+1]<<8|u[y+2]<<16,this.words[E]|=$<<k&67108863,this.words[E+1]=$>>>26-k&67108863,k+=24,k>=26&&(k-=26,E++);return this.strip()};function b(T,u){var p=T.charCodeAt(u);return p>=65&&p<=70?p-55:p>=97&&p<=102?p-87:p-48&15}function v(T,u,p){var m=b(T,p);return p-1>=u&&(m|=b(T,p-1)<<4),m}a.prototype._parseHex=function(u,p,m){this.length=Math.ceil((u.length-p)/6),this.words=new Array(this.length);for(var y=0;y<this.length;y++)this.words[y]=0;var E=0,$=0,k;if(m==="be")for(y=u.length-1;y>=p;y-=2)k=v(u,p,y)<<E,this.words[$]|=k&67108863,E>=18?(E-=18,$+=1,this.words[$]|=k>>>26):E+=8;else{var _=u.length-p;for(y=_%2===0?p+1:p;y<u.length;y+=2)k=v(u,p,y)<<E,this.words[$]|=k&67108863,E>=18?(E-=18,$+=1,this.words[$]|=k>>>26):E+=8}this.strip()};function A(T,u,p,m){for(var y=0,E=Math.min(T.length,p),$=u;$<E;$++){var k=T.charCodeAt($)-48;y*=m,k>=49?y+=k-49+10:k>=17?y+=k-17+10:y+=k}return y}a.prototype._parseBase=function(u,p,m){this.words=[0],this.length=1;for(var y=0,E=1;E<=67108863;E*=p)y++;y--,E=E/p|0;for(var $=u.length-m,k=$%y,_=Math.min($,$-k)+m,d=0,w=m;w<_;w+=y)d=A(u,w,w+y,p),this.imuln(E),this.words[0]+d<67108864?this.words[0]+=d:this._iaddn(d);if(k!==0){var I=1;for(d=A(u,w,u.length,p),w=0;w<k;w++)I*=p;this.imuln(I),this.words[0]+d<67108864?this.words[0]+=d:this._iaddn(d)}this.strip()},a.prototype.copy=function(u){u.words=new Array(this.length);for(var p=0;p<this.length;p++)u.words[p]=this.words[p];u.length=this.length,u.negative=this.negative,u.red=this.red},a.prototype.clone=function(){var u=new a(null);return this.copy(u),u},a.prototype._expand=function(u){for(;this.length<u;)this.words[this.length++]=0;return this},a.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},a.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},a.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var S=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],M=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],B=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];a.prototype.toString=function(u,p){u=u||10,p=p|0||1;var m;if(u===16||u==="hex"){m="";for(var y=0,E=0,$=0;$<this.length;$++){var k=this.words[$],_=((k<<y|E)&16777215).toString(16);E=k>>>24-y&16777215,E!==0||$!==this.length-1?m=S[6-_.length]+_+m:m=_+m,y+=2,y>=26&&(y-=26,$--)}for(E!==0&&(m=E.toString(16)+m);m.length%p!==0;)m="0"+m;return this.negative!==0&&(m="-"+m),m}if(u===(u|0)&&u>=2&&u<=36){var d=M[u],w=B[u];m="";var I=this.clone();for(I.negative=0;!I.isZero();){var C=I.modn(w).toString(u);I=I.idivn(w),I.isZero()?m=C+m:m=S[d-C.length]+C+m}for(this.isZero()&&(m="0"+m);m.length%p!==0;)m="0"+m;return this.negative!==0&&(m="-"+m),m}o(!1,"Base should be between 2 and 36")},a.prototype.toNumber=function(){var u=this.words[0];return this.length===2?u+=this.words[1]*67108864:this.length===3&&this.words[2]===1?u+=4503599627370496+this.words[1]*67108864:this.length>2&&o(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-u:u},a.prototype.toJSON=function(){return this.toString(16)},a.prototype.toBuffer=function(u,p){return o(typeof l<"u"),this.toArrayLike(l,u,p)},a.prototype.toArray=function(u,p){return this.toArrayLike(Array,u,p)},a.prototype.toArrayLike=function(u,p,m){var y=this.byteLength(),E=m||Math.max(1,y);o(y<=E,"byte array longer than desired length"),o(E>0,"Requested array length <= 0"),this.strip();var $=p==="le",k=new u(E),_,d,w=this.clone();if($){for(d=0;!w.isZero();d++)_=w.andln(255),w.iushrn(8),k[d]=_;for(;d<E;d++)k[d]=0}else{for(d=0;d<E-y;d++)k[d]=0;for(d=0;!w.isZero();d++)_=w.andln(255),w.iushrn(8),k[E-d-1]=_}return k},Math.clz32?a.prototype._countBits=function(u){return 32-Math.clz32(u)}:a.prototype._countBits=function(u){var p=u,m=0;return p>=4096&&(m+=13,p>>>=13),p>=64&&(m+=7,p>>>=7),p>=8&&(m+=4,p>>>=4),p>=2&&(m+=2,p>>>=2),m+p},a.prototype._zeroBits=function(u){if(u===0)return 26;var p=u,m=0;return p&8191||(m+=13,p>>>=13),p&127||(m+=7,p>>>=7),p&15||(m+=4,p>>>=4),p&3||(m+=2,p>>>=2),p&1||m++,m},a.prototype.bitLength=function(){var u=this.words[this.length-1],p=this._countBits(u);return(this.length-1)*26+p};function P(T){for(var u=new Array(T.bitLength()),p=0;p<u.length;p++){var m=p/26|0,y=p%26;u[p]=(T.words[m]&1<<y)>>>y}return u}a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var u=0,p=0;p<this.length;p++){var m=this._zeroBits(this.words[p]);if(u+=m,m!==26)break}return u},a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},a.prototype.toTwos=function(u){return this.negative!==0?this.abs().inotn(u).iaddn(1):this.clone()},a.prototype.fromTwos=function(u){return this.testn(u-1)?this.notn(u).iaddn(1).ineg():this.clone()},a.prototype.isNeg=function(){return this.negative!==0},a.prototype.neg=function(){return this.clone().ineg()},a.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},a.prototype.iuor=function(u){for(;this.length<u.length;)this.words[this.length++]=0;for(var p=0;p<u.length;p++)this.words[p]=this.words[p]|u.words[p];return this.strip()},a.prototype.ior=function(u){return o((this.negative|u.negative)===0),this.iuor(u)},a.prototype.or=function(u){return this.length>u.length?this.clone().ior(u):u.clone().ior(this)},a.prototype.uor=function(u){return this.length>u.length?this.clone().iuor(u):u.clone().iuor(this)},a.prototype.iuand=function(u){var p;this.length>u.length?p=u:p=this;for(var m=0;m<p.length;m++)this.words[m]=this.words[m]&u.words[m];return this.length=p.length,this.strip()},a.prototype.iand=function(u){return o((this.negative|u.negative)===0),this.iuand(u)},a.prototype.and=function(u){return this.length>u.length?this.clone().iand(u):u.clone().iand(this)},a.prototype.uand=function(u){return this.length>u.length?this.clone().iuand(u):u.clone().iuand(this)},a.prototype.iuxor=function(u){var p,m;this.length>u.length?(p=this,m=u):(p=u,m=this);for(var y=0;y<m.length;y++)this.words[y]=p.words[y]^m.words[y];if(this!==p)for(;y<p.length;y++)this.words[y]=p.words[y];return this.length=p.length,this.strip()},a.prototype.ixor=function(u){return o((this.negative|u.negative)===0),this.iuxor(u)},a.prototype.xor=function(u){return this.length>u.length?this.clone().ixor(u):u.clone().ixor(this)},a.prototype.uxor=function(u){return this.length>u.length?this.clone().iuxor(u):u.clone().iuxor(this)},a.prototype.inotn=function(u){o(typeof u=="number"&&u>=0);var p=Math.ceil(u/26)|0,m=u%26;this._expand(p),m>0&&p--;for(var y=0;y<p;y++)this.words[y]=~this.words[y]&67108863;return m>0&&(this.words[y]=~this.words[y]&67108863>>26-m),this.strip()},a.prototype.notn=function(u){return this.clone().inotn(u)},a.prototype.setn=function(u,p){o(typeof u=="number"&&u>=0);var m=u/26|0,y=u%26;return this._expand(m+1),p?this.words[m]=this.words[m]|1<<y:this.words[m]=this.words[m]&~(1<<y),this.strip()},a.prototype.iadd=function(u){var p;if(this.negative!==0&&u.negative===0)return this.negative=0,p=this.isub(u),this.negative^=1,this._normSign();if(this.negative===0&&u.negative!==0)return u.negative=0,p=this.isub(u),u.negative=1,p._normSign();var m,y;this.length>u.length?(m=this,y=u):(m=u,y=this);for(var E=0,$=0;$<y.length;$++)p=(m.words[$]|0)+(y.words[$]|0)+E,this.words[$]=p&67108863,E=p>>>26;for(;E!==0&&$<m.length;$++)p=(m.words[$]|0)+E,this.words[$]=p&67108863,E=p>>>26;if(this.length=m.length,E!==0)this.words[this.length]=E,this.length++;else if(m!==this)for(;$<m.length;$++)this.words[$]=m.words[$];return this},a.prototype.add=function(u){var p;return u.negative!==0&&this.negative===0?(u.negative=0,p=this.sub(u),u.negative^=1,p):u.negative===0&&this.negative!==0?(this.negative=0,p=u.sub(this),this.negative=1,p):this.length>u.length?this.clone().iadd(u):u.clone().iadd(this)},a.prototype.isub=function(u){if(u.negative!==0){u.negative=0;var p=this.iadd(u);return u.negative=1,p._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(u),this.negative=1,this._normSign();var m=this.cmp(u);if(m===0)return this.negative=0,this.length=1,this.words[0]=0,this;var y,E;m>0?(y=this,E=u):(y=u,E=this);for(var $=0,k=0;k<E.length;k++)p=(y.words[k]|0)-(E.words[k]|0)+$,$=p>>26,this.words[k]=p&67108863;for(;$!==0&&k<y.length;k++)p=(y.words[k]|0)+$,$=p>>26,this.words[k]=p&67108863;if($===0&&k<y.length&&y!==this)for(;k<y.length;k++)this.words[k]=y.words[k];return this.length=Math.max(this.length,k),y!==this&&(this.negative=1),this.strip()},a.prototype.sub=function(u){return this.clone().isub(u)};function L(T,u,p){p.negative=u.negative^T.negative;var m=T.length+u.length|0;p.length=m,m=m-1|0;var y=T.words[0]|0,E=u.words[0]|0,$=y*E,k=$&67108863,_=$/67108864|0;p.words[0]=k;for(var d=1;d<m;d++){for(var w=_>>>26,I=_&67108863,C=Math.min(d,u.length-1),V=Math.max(0,d-T.length+1);V<=C;V++){var O=d-V|0;y=T.words[O]|0,E=u.words[V]|0,$=y*E+I,w+=$/67108864|0,I=$&67108863}p.words[d]=I|0,_=w|0}return _!==0?p.words[d]=_|0:p.length--,p.strip()}var F=function(u,p,m){var y=u.words,E=p.words,$=m.words,k=0,_,d,w,I=y[0]|0,C=I&8191,V=I>>>13,O=y[1]|0,j=O&8191,D=O>>>13,Q=y[2]|0,oe=Q&8191,de=Q>>>13,Z=y[3]|0,H=Z&8191,ge=Z>>>13,Me=y[4]|0,ke=Me&8191,Ie=Me>>>13,et=y[5]|0,Fe=et&8191,$e=et>>>13,$t=y[6]|0,He=$t&8191,Ye=$t>>>13,St=y[7]|0,De=St&8191,qe=St>>>13,At=y[8]|0,ze=At&8191,Ge=At>>>13,kt=y[9]|0,se=kt&8191,J=kt>>>13,re=E[0]|0,he=re&8191,ye=re>>>13,Oe=E[1]|0,Ee=Oe&8191,Ue=Oe>>>13,bt=E[2]|0,Le=bt&8191,Ve=bt>>>13,mt=E[3]|0,Ke=mt&8191,Xe=mt>>>13,Mt=E[4]|0,me=Mt&8191,le=Mt>>>13,_e=E[5]|0,be=_e&8191,Se=_e>>>13,Je=E[6]|0,Te=Je&8191,Ne=Je>>>13,ne=E[7]|0,ie=ne&8191,ae=ne>>>13,Y=E[8]|0,fe=Y&8191,ve=Y>>>13,Pe=E[9]|0,xe=Pe&8191,Be=Pe>>>13;m.negative=u.negative^p.negative,m.length=19,_=Math.imul(C,he),d=Math.imul(C,ye),d=d+Math.imul(V,he)|0,w=Math.imul(V,ye);var Qe=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(Qe>>>26)|0,Qe&=67108863,_=Math.imul(j,he),d=Math.imul(j,ye),d=d+Math.imul(D,he)|0,w=Math.imul(D,ye),_=_+Math.imul(C,Ee)|0,d=d+Math.imul(C,Ue)|0,d=d+Math.imul(V,Ee)|0,w=w+Math.imul(V,Ue)|0;var Ze=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(Ze>>>26)|0,Ze&=67108863,_=Math.imul(oe,he),d=Math.imul(oe,ye),d=d+Math.imul(de,he)|0,w=Math.imul(de,ye),_=_+Math.imul(j,Ee)|0,d=d+Math.imul(j,Ue)|0,d=d+Math.imul(D,Ee)|0,w=w+Math.imul(D,Ue)|0,_=_+Math.imul(C,Le)|0,d=d+Math.imul(C,Ve)|0,d=d+Math.imul(V,Le)|0,w=w+Math.imul(V,Ve)|0;var xt=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(xt>>>26)|0,xt&=67108863,_=Math.imul(H,he),d=Math.imul(H,ye),d=d+Math.imul(ge,he)|0,w=Math.imul(ge,ye),_=_+Math.imul(oe,Ee)|0,d=d+Math.imul(oe,Ue)|0,d=d+Math.imul(de,Ee)|0,w=w+Math.imul(de,Ue)|0,_=_+Math.imul(j,Le)|0,d=d+Math.imul(j,Ve)|0,d=d+Math.imul(D,Le)|0,w=w+Math.imul(D,Ve)|0,_=_+Math.imul(C,Ke)|0,d=d+Math.imul(C,Xe)|0,d=d+Math.imul(V,Ke)|0,w=w+Math.imul(V,Xe)|0;var it=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(it>>>26)|0,it&=67108863,_=Math.imul(ke,he),d=Math.imul(ke,ye),d=d+Math.imul(Ie,he)|0,w=Math.imul(Ie,ye),_=_+Math.imul(H,Ee)|0,d=d+Math.imul(H,Ue)|0,d=d+Math.imul(ge,Ee)|0,w=w+Math.imul(ge,Ue)|0,_=_+Math.imul(oe,Le)|0,d=d+Math.imul(oe,Ve)|0,d=d+Math.imul(de,Le)|0,w=w+Math.imul(de,Ve)|0,_=_+Math.imul(j,Ke)|0,d=d+Math.imul(j,Xe)|0,d=d+Math.imul(D,Ke)|0,w=w+Math.imul(D,Xe)|0,_=_+Math.imul(C,me)|0,d=d+Math.imul(C,le)|0,d=d+Math.imul(V,me)|0,w=w+Math.imul(V,le)|0;var dt=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(dt>>>26)|0,dt&=67108863,_=Math.imul(Fe,he),d=Math.imul(Fe,ye),d=d+Math.imul($e,he)|0,w=Math.imul($e,ye),_=_+Math.imul(ke,Ee)|0,d=d+Math.imul(ke,Ue)|0,d=d+Math.imul(Ie,Ee)|0,w=w+Math.imul(Ie,Ue)|0,_=_+Math.imul(H,Le)|0,d=d+Math.imul(H,Ve)|0,d=d+Math.imul(ge,Le)|0,w=w+Math.imul(ge,Ve)|0,_=_+Math.imul(oe,Ke)|0,d=d+Math.imul(oe,Xe)|0,d=d+Math.imul(de,Ke)|0,w=w+Math.imul(de,Xe)|0,_=_+Math.imul(j,me)|0,d=d+Math.imul(j,le)|0,d=d+Math.imul(D,me)|0,w=w+Math.imul(D,le)|0,_=_+Math.imul(C,be)|0,d=d+Math.imul(C,Se)|0,d=d+Math.imul(V,be)|0,w=w+Math.imul(V,Se)|0;var gt=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(gt>>>26)|0,gt&=67108863,_=Math.imul(He,he),d=Math.imul(He,ye),d=d+Math.imul(Ye,he)|0,w=Math.imul(Ye,ye),_=_+Math.imul(Fe,Ee)|0,d=d+Math.imul(Fe,Ue)|0,d=d+Math.imul($e,Ee)|0,w=w+Math.imul($e,Ue)|0,_=_+Math.imul(ke,Le)|0,d=d+Math.imul(ke,Ve)|0,d=d+Math.imul(Ie,Le)|0,w=w+Math.imul(Ie,Ve)|0,_=_+Math.imul(H,Ke)|0,d=d+Math.imul(H,Xe)|0,d=d+Math.imul(ge,Ke)|0,w=w+Math.imul(ge,Xe)|0,_=_+Math.imul(oe,me)|0,d=d+Math.imul(oe,le)|0,d=d+Math.imul(de,me)|0,w=w+Math.imul(de,le)|0,_=_+Math.imul(j,be)|0,d=d+Math.imul(j,Se)|0,d=d+Math.imul(D,be)|0,w=w+Math.imul(D,Se)|0,_=_+Math.imul(C,Te)|0,d=d+Math.imul(C,Ne)|0,d=d+Math.imul(V,Te)|0,w=w+Math.imul(V,Ne)|0;var yt=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(yt>>>26)|0,yt&=67108863,_=Math.imul(De,he),d=Math.imul(De,ye),d=d+Math.imul(qe,he)|0,w=Math.imul(qe,ye),_=_+Math.imul(He,Ee)|0,d=d+Math.imul(He,Ue)|0,d=d+Math.imul(Ye,Ee)|0,w=w+Math.imul(Ye,Ue)|0,_=_+Math.imul(Fe,Le)|0,d=d+Math.imul(Fe,Ve)|0,d=d+Math.imul($e,Le)|0,w=w+Math.imul($e,Ve)|0,_=_+Math.imul(ke,Ke)|0,d=d+Math.imul(ke,Xe)|0,d=d+Math.imul(Ie,Ke)|0,w=w+Math.imul(Ie,Xe)|0,_=_+Math.imul(H,me)|0,d=d+Math.imul(H,le)|0,d=d+Math.imul(ge,me)|0,w=w+Math.imul(ge,le)|0,_=_+Math.imul(oe,be)|0,d=d+Math.imul(oe,Se)|0,d=d+Math.imul(de,be)|0,w=w+Math.imul(de,Se)|0,_=_+Math.imul(j,Te)|0,d=d+Math.imul(j,Ne)|0,d=d+Math.imul(D,Te)|0,w=w+Math.imul(D,Ne)|0,_=_+Math.imul(C,ie)|0,d=d+Math.imul(C,ae)|0,d=d+Math.imul(V,ie)|0,w=w+Math.imul(V,ae)|0;var Et=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(Et>>>26)|0,Et&=67108863,_=Math.imul(ze,he),d=Math.imul(ze,ye),d=d+Math.imul(Ge,he)|0,w=Math.imul(Ge,ye),_=_+Math.imul(De,Ee)|0,d=d+Math.imul(De,Ue)|0,d=d+Math.imul(qe,Ee)|0,w=w+Math.imul(qe,Ue)|0,_=_+Math.imul(He,Le)|0,d=d+Math.imul(He,Ve)|0,d=d+Math.imul(Ye,Le)|0,w=w+Math.imul(Ye,Ve)|0,_=_+Math.imul(Fe,Ke)|0,d=d+Math.imul(Fe,Xe)|0,d=d+Math.imul($e,Ke)|0,w=w+Math.imul($e,Xe)|0,_=_+Math.imul(ke,me)|0,d=d+Math.imul(ke,le)|0,d=d+Math.imul(Ie,me)|0,w=w+Math.imul(Ie,le)|0,_=_+Math.imul(H,be)|0,d=d+Math.imul(H,Se)|0,d=d+Math.imul(ge,be)|0,w=w+Math.imul(ge,Se)|0,_=_+Math.imul(oe,Te)|0,d=d+Math.imul(oe,Ne)|0,d=d+Math.imul(de,Te)|0,w=w+Math.imul(de,Ne)|0,_=_+Math.imul(j,ie)|0,d=d+Math.imul(j,ae)|0,d=d+Math.imul(D,ie)|0,w=w+Math.imul(D,ae)|0,_=_+Math.imul(C,fe)|0,d=d+Math.imul(C,ve)|0,d=d+Math.imul(V,fe)|0,w=w+Math.imul(V,ve)|0;var vt=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(vt>>>26)|0,vt&=67108863,_=Math.imul(se,he),d=Math.imul(se,ye),d=d+Math.imul(J,he)|0,w=Math.imul(J,ye),_=_+Math.imul(ze,Ee)|0,d=d+Math.imul(ze,Ue)|0,d=d+Math.imul(Ge,Ee)|0,w=w+Math.imul(Ge,Ue)|0,_=_+Math.imul(De,Le)|0,d=d+Math.imul(De,Ve)|0,d=d+Math.imul(qe,Le)|0,w=w+Math.imul(qe,Ve)|0,_=_+Math.imul(He,Ke)|0,d=d+Math.imul(He,Xe)|0,d=d+Math.imul(Ye,Ke)|0,w=w+Math.imul(Ye,Xe)|0,_=_+Math.imul(Fe,me)|0,d=d+Math.imul(Fe,le)|0,d=d+Math.imul($e,me)|0,w=w+Math.imul($e,le)|0,_=_+Math.imul(ke,be)|0,d=d+Math.imul(ke,Se)|0,d=d+Math.imul(Ie,be)|0,w=w+Math.imul(Ie,Se)|0,_=_+Math.imul(H,Te)|0,d=d+Math.imul(H,Ne)|0,d=d+Math.imul(ge,Te)|0,w=w+Math.imul(ge,Ne)|0,_=_+Math.imul(oe,ie)|0,d=d+Math.imul(oe,ae)|0,d=d+Math.imul(de,ie)|0,w=w+Math.imul(de,ae)|0,_=_+Math.imul(j,fe)|0,d=d+Math.imul(j,ve)|0,d=d+Math.imul(D,fe)|0,w=w+Math.imul(D,ve)|0,_=_+Math.imul(C,xe)|0,d=d+Math.imul(C,Be)|0,d=d+Math.imul(V,xe)|0,w=w+Math.imul(V,Be)|0;var _t=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(_t>>>26)|0,_t&=67108863,_=Math.imul(se,Ee),d=Math.imul(se,Ue),d=d+Math.imul(J,Ee)|0,w=Math.imul(J,Ue),_=_+Math.imul(ze,Le)|0,d=d+Math.imul(ze,Ve)|0,d=d+Math.imul(Ge,Le)|0,w=w+Math.imul(Ge,Ve)|0,_=_+Math.imul(De,Ke)|0,d=d+Math.imul(De,Xe)|0,d=d+Math.imul(qe,Ke)|0,w=w+Math.imul(qe,Xe)|0,_=_+Math.imul(He,me)|0,d=d+Math.imul(He,le)|0,d=d+Math.imul(Ye,me)|0,w=w+Math.imul(Ye,le)|0,_=_+Math.imul(Fe,be)|0,d=d+Math.imul(Fe,Se)|0,d=d+Math.imul($e,be)|0,w=w+Math.imul($e,Se)|0,_=_+Math.imul(ke,Te)|0,d=d+Math.imul(ke,Ne)|0,d=d+Math.imul(Ie,Te)|0,w=w+Math.imul(Ie,Ne)|0,_=_+Math.imul(H,ie)|0,d=d+Math.imul(H,ae)|0,d=d+Math.imul(ge,ie)|0,w=w+Math.imul(ge,ae)|0,_=_+Math.imul(oe,fe)|0,d=d+Math.imul(oe,ve)|0,d=d+Math.imul(de,fe)|0,w=w+Math.imul(de,ve)|0,_=_+Math.imul(j,xe)|0,d=d+Math.imul(j,Be)|0,d=d+Math.imul(D,xe)|0,w=w+Math.imul(D,Be)|0;var wt=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(wt>>>26)|0,wt&=67108863,_=Math.imul(se,Le),d=Math.imul(se,Ve),d=d+Math.imul(J,Le)|0,w=Math.imul(J,Ve),_=_+Math.imul(ze,Ke)|0,d=d+Math.imul(ze,Xe)|0,d=d+Math.imul(Ge,Ke)|0,w=w+Math.imul(Ge,Xe)|0,_=_+Math.imul(De,me)|0,d=d+Math.imul(De,le)|0,d=d+Math.imul(qe,me)|0,w=w+Math.imul(qe,le)|0,_=_+Math.imul(He,be)|0,d=d+Math.imul(He,Se)|0,d=d+Math.imul(Ye,be)|0,w=w+Math.imul(Ye,Se)|0,_=_+Math.imul(Fe,Te)|0,d=d+Math.imul(Fe,Ne)|0,d=d+Math.imul($e,Te)|0,w=w+Math.imul($e,Ne)|0,_=_+Math.imul(ke,ie)|0,d=d+Math.imul(ke,ae)|0,d=d+Math.imul(Ie,ie)|0,w=w+Math.imul(Ie,ae)|0,_=_+Math.imul(H,fe)|0,d=d+Math.imul(H,ve)|0,d=d+Math.imul(ge,fe)|0,w=w+Math.imul(ge,ve)|0,_=_+Math.imul(oe,xe)|0,d=d+Math.imul(oe,Be)|0,d=d+Math.imul(de,xe)|0,w=w+Math.imul(de,Be)|0;var ct=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(ct>>>26)|0,ct&=67108863,_=Math.imul(se,Ke),d=Math.imul(se,Xe),d=d+Math.imul(J,Ke)|0,w=Math.imul(J,Xe),_=_+Math.imul(ze,me)|0,d=d+Math.imul(ze,le)|0,d=d+Math.imul(Ge,me)|0,w=w+Math.imul(Ge,le)|0,_=_+Math.imul(De,be)|0,d=d+Math.imul(De,Se)|0,d=d+Math.imul(qe,be)|0,w=w+Math.imul(qe,Se)|0,_=_+Math.imul(He,Te)|0,d=d+Math.imul(He,Ne)|0,d=d+Math.imul(Ye,Te)|0,w=w+Math.imul(Ye,Ne)|0,_=_+Math.imul(Fe,ie)|0,d=d+Math.imul(Fe,ae)|0,d=d+Math.imul($e,ie)|0,w=w+Math.imul($e,ae)|0,_=_+Math.imul(ke,fe)|0,d=d+Math.imul(ke,ve)|0,d=d+Math.imul(Ie,fe)|0,w=w+Math.imul(Ie,ve)|0,_=_+Math.imul(H,xe)|0,d=d+Math.imul(H,Be)|0,d=d+Math.imul(ge,xe)|0,w=w+Math.imul(ge,Be)|0;var pt=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(pt>>>26)|0,pt&=67108863,_=Math.imul(se,me),d=Math.imul(se,le),d=d+Math.imul(J,me)|0,w=Math.imul(J,le),_=_+Math.imul(ze,be)|0,d=d+Math.imul(ze,Se)|0,d=d+Math.imul(Ge,be)|0,w=w+Math.imul(Ge,Se)|0,_=_+Math.imul(De,Te)|0,d=d+Math.imul(De,Ne)|0,d=d+Math.imul(qe,Te)|0,w=w+Math.imul(qe,Ne)|0,_=_+Math.imul(He,ie)|0,d=d+Math.imul(He,ae)|0,d=d+Math.imul(Ye,ie)|0,w=w+Math.imul(Ye,ae)|0,_=_+Math.imul(Fe,fe)|0,d=d+Math.imul(Fe,ve)|0,d=d+Math.imul($e,fe)|0,w=w+Math.imul($e,ve)|0,_=_+Math.imul(ke,xe)|0,d=d+Math.imul(ke,Be)|0,d=d+Math.imul(Ie,xe)|0,w=w+Math.imul(Ie,Be)|0;var at=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(at>>>26)|0,at&=67108863,_=Math.imul(se,be),d=Math.imul(se,Se),d=d+Math.imul(J,be)|0,w=Math.imul(J,Se),_=_+Math.imul(ze,Te)|0,d=d+Math.imul(ze,Ne)|0,d=d+Math.imul(Ge,Te)|0,w=w+Math.imul(Ge,Ne)|0,_=_+Math.imul(De,ie)|0,d=d+Math.imul(De,ae)|0,d=d+Math.imul(qe,ie)|0,w=w+Math.imul(qe,ae)|0,_=_+Math.imul(He,fe)|0,d=d+Math.imul(He,ve)|0,d=d+Math.imul(Ye,fe)|0,w=w+Math.imul(Ye,ve)|0,_=_+Math.imul(Fe,xe)|0,d=d+Math.imul(Fe,Be)|0,d=d+Math.imul($e,xe)|0,w=w+Math.imul($e,Be)|0;var lt=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(lt>>>26)|0,lt&=67108863,_=Math.imul(se,Te),d=Math.imul(se,Ne),d=d+Math.imul(J,Te)|0,w=Math.imul(J,Ne),_=_+Math.imul(ze,ie)|0,d=d+Math.imul(ze,ae)|0,d=d+Math.imul(Ge,ie)|0,w=w+Math.imul(Ge,ae)|0,_=_+Math.imul(De,fe)|0,d=d+Math.imul(De,ve)|0,d=d+Math.imul(qe,fe)|0,w=w+Math.imul(qe,ve)|0,_=_+Math.imul(He,xe)|0,d=d+Math.imul(He,Be)|0,d=d+Math.imul(Ye,xe)|0,w=w+Math.imul(Ye,Be)|0;var ht=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(ht>>>26)|0,ht&=67108863,_=Math.imul(se,ie),d=Math.imul(se,ae),d=d+Math.imul(J,ie)|0,w=Math.imul(J,ae),_=_+Math.imul(ze,fe)|0,d=d+Math.imul(ze,ve)|0,d=d+Math.imul(Ge,fe)|0,w=w+Math.imul(Ge,ve)|0,_=_+Math.imul(De,xe)|0,d=d+Math.imul(De,Be)|0,d=d+Math.imul(qe,xe)|0,w=w+Math.imul(qe,Be)|0;var ot=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(ot>>>26)|0,ot&=67108863,_=Math.imul(se,fe),d=Math.imul(se,ve),d=d+Math.imul(J,fe)|0,w=Math.imul(J,ve),_=_+Math.imul(ze,xe)|0,d=d+Math.imul(ze,Be)|0,d=d+Math.imul(Ge,xe)|0,w=w+Math.imul(Ge,Be)|0;var je=(k+_|0)+((d&8191)<<13)|0;k=(w+(d>>>13)|0)+(je>>>26)|0,je&=67108863,_=Math.imul(se,xe),d=Math.imul(se,Be),d=d+Math.imul(J,xe)|0,w=Math.imul(J,Be);var We=(k+_|0)+((d&8191)<<13)|0;return k=(w+(d>>>13)|0)+(We>>>26)|0,We&=67108863,$[0]=Qe,$[1]=Ze,$[2]=xt,$[3]=it,$[4]=dt,$[5]=gt,$[6]=yt,$[7]=Et,$[8]=vt,$[9]=_t,$[10]=wt,$[11]=ct,$[12]=pt,$[13]=at,$[14]=lt,$[15]=ht,$[16]=ot,$[17]=je,$[18]=We,k!==0&&($[19]=k,m.length++),m};Math.imul||(F=L);function U(T,u,p){p.negative=u.negative^T.negative,p.length=T.length+u.length;for(var m=0,y=0,E=0;E<p.length-1;E++){var $=y;y=0;for(var k=m&67108863,_=Math.min(E,u.length-1),d=Math.max(0,E-T.length+1);d<=_;d++){var w=E-d,I=T.words[w]|0,C=u.words[d]|0,V=I*C,O=V&67108863;$=$+(V/67108864|0)|0,O=O+k|0,k=O&67108863,$=$+(O>>>26)|0,y+=$>>>26,$&=67108863}p.words[E]=k,m=$,$=y}return m!==0?p.words[E]=m:p.length--,p.strip()}function q(T,u,p){var m=new X;return m.mulp(T,u,p)}a.prototype.mulTo=function(u,p){var m,y=this.length+u.length;return this.length===10&&u.length===10?m=F(this,u,p):y<63?m=L(this,u,p):y<1024?m=U(this,u,p):m=q(this,u,p),m};function X(T,u){this.x=T,this.y=u}X.prototype.makeRBT=function(u){for(var p=new Array(u),m=a.prototype._countBits(u)-1,y=0;y<u;y++)p[y]=this.revBin(y,m,u);return p},X.prototype.revBin=function(u,p,m){if(u===0||u===m-1)return u;for(var y=0,E=0;E<p;E++)y|=(u&1)<<p-E-1,u>>=1;return y},X.prototype.permute=function(u,p,m,y,E,$){for(var k=0;k<$;k++)y[k]=p[u[k]],E[k]=m[u[k]]},X.prototype.transform=function(u,p,m,y,E,$){this.permute($,u,p,m,y,E);for(var k=1;k<E;k<<=1)for(var _=k<<1,d=Math.cos(2*Math.PI/_),w=Math.sin(2*Math.PI/_),I=0;I<E;I+=_)for(var C=d,V=w,O=0;O<k;O++){var j=m[I+O],D=y[I+O],Q=m[I+O+k],oe=y[I+O+k],de=C*Q-V*oe;oe=C*oe+V*Q,Q=de,m[I+O]=j+Q,y[I+O]=D+oe,m[I+O+k]=j-Q,y[I+O+k]=D-oe,O!==_&&(de=d*C-w*V,V=d*V+w*C,C=de)}},X.prototype.guessLen13b=function(u,p){var m=Math.max(p,u)|1,y=m&1,E=0;for(m=m/2|0;m;m=m>>>1)E++;return 1<<E+1+y},X.prototype.conjugate=function(u,p,m){if(!(m<=1))for(var y=0;y<m/2;y++){var E=u[y];u[y]=u[m-y-1],u[m-y-1]=E,E=p[y],p[y]=-p[m-y-1],p[m-y-1]=-E}},X.prototype.normalize13b=function(u,p){for(var m=0,y=0;y<p/2;y++){var E=Math.round(u[2*y+1]/p)*8192+Math.round(u[2*y]/p)+m;u[y]=E&67108863,E<67108864?m=0:m=E/67108864|0}return u},X.prototype.convert13b=function(u,p,m,y){for(var E=0,$=0;$<p;$++)E=E+(u[$]|0),m[2*$]=E&8191,E=E>>>13,m[2*$+1]=E&8191,E=E>>>13;for($=2*p;$<y;++$)m[$]=0;o(E===0),o((E&-8192)===0)},X.prototype.stub=function(u){for(var p=new Array(u),m=0;m<u;m++)p[m]=0;return p},X.prototype.mulp=function(u,p,m){var y=2*this.guessLen13b(u.length,p.length),E=this.makeRBT(y),$=this.stub(y),k=new Array(y),_=new Array(y),d=new Array(y),w=new Array(y),I=new Array(y),C=new Array(y),V=m.words;V.length=y,this.convert13b(u.words,u.length,k,y),this.convert13b(p.words,p.length,w,y),this.transform(k,$,_,d,y,E),this.transform(w,$,I,C,y,E);for(var O=0;O<y;O++){var j=_[O]*I[O]-d[O]*C[O];d[O]=_[O]*C[O]+d[O]*I[O],_[O]=j}return this.conjugate(_,d,y),this.transform(_,d,V,$,y,E),this.conjugate(V,$,y),this.normalize13b(V,y),m.negative=u.negative^p.negative,m.length=u.length+p.length,m.strip()},a.prototype.mul=function(u){var p=new a(null);return p.words=new Array(this.length+u.length),this.mulTo(u,p)},a.prototype.mulf=function(u){var p=new a(null);return p.words=new Array(this.length+u.length),q(this,u,p)},a.prototype.imul=function(u){return this.clone().mulTo(u,this)},a.prototype.imuln=function(u){o(typeof u=="number"),o(u<67108864);for(var p=0,m=0;m<this.length;m++){var y=(this.words[m]|0)*u,E=(y&67108863)+(p&67108863);p>>=26,p+=y/67108864|0,p+=E>>>26,this.words[m]=E&67108863}return p!==0&&(this.words[m]=p,this.length++),this},a.prototype.muln=function(u){return this.clone().imuln(u)},a.prototype.sqr=function(){return this.mul(this)},a.prototype.isqr=function(){return this.imul(this.clone())},a.prototype.pow=function(u){var p=P(u);if(p.length===0)return new a(1);for(var m=this,y=0;y<p.length&&p[y]===0;y++,m=m.sqr());if(++y<p.length)for(var E=m.sqr();y<p.length;y++,E=E.sqr())p[y]!==0&&(m=m.mul(E));return m},a.prototype.iushln=function(u){o(typeof u=="number"&&u>=0);var p=u%26,m=(u-p)/26,y=67108863>>>26-p<<26-p,E;if(p!==0){var $=0;for(E=0;E<this.length;E++){var k=this.words[E]&y,_=(this.words[E]|0)-k<<p;this.words[E]=_|$,$=k>>>26-p}$&&(this.words[E]=$,this.length++)}if(m!==0){for(E=this.length-1;E>=0;E--)this.words[E+m]=this.words[E];for(E=0;E<m;E++)this.words[E]=0;this.length+=m}return this.strip()},a.prototype.ishln=function(u){return o(this.negative===0),this.iushln(u)},a.prototype.iushrn=function(u,p,m){o(typeof u=="number"&&u>=0);var y;p?y=(p-p%26)/26:y=0;var E=u%26,$=Math.min((u-E)/26,this.length),k=67108863^67108863>>>E<<E,_=m;if(y-=$,y=Math.max(0,y),_){for(var d=0;d<$;d++)_.words[d]=this.words[d];_.length=$}if($!==0)if(this.length>$)for(this.length-=$,d=0;d<this.length;d++)this.words[d]=this.words[d+$];else this.words[0]=0,this.length=1;var w=0;for(d=this.length-1;d>=0&&(w!==0||d>=y);d--){var I=this.words[d]|0;this.words[d]=w<<26-E|I>>>E,w=I&k}return _&&w!==0&&(_.words[_.length++]=w),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},a.prototype.ishrn=function(u,p,m){return o(this.negative===0),this.iushrn(u,p,m)},a.prototype.shln=function(u){return this.clone().ishln(u)},a.prototype.ushln=function(u){return this.clone().iushln(u)},a.prototype.shrn=function(u){return this.clone().ishrn(u)},a.prototype.ushrn=function(u){return this.clone().iushrn(u)},a.prototype.testn=function(u){o(typeof u=="number"&&u>=0);var p=u%26,m=(u-p)/26,y=1<<p;if(this.length<=m)return!1;var E=this.words[m];return!!(E&y)},a.prototype.imaskn=function(u){o(typeof u=="number"&&u>=0);var p=u%26,m=(u-p)/26;if(o(this.negative===0,"imaskn works only with positive numbers"),this.length<=m)return this;if(p!==0&&m++,this.length=Math.min(m,this.length),p!==0){var y=67108863^67108863>>>p<<p;this.words[this.length-1]&=y}return this.strip()},a.prototype.maskn=function(u){return this.clone().imaskn(u)},a.prototype.iaddn=function(u){return o(typeof u=="number"),o(u<67108864),u<0?this.isubn(-u):this.negative!==0?this.length===1&&(this.words[0]|0)<u?(this.words[0]=u-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(u),this.negative=1,this):this._iaddn(u)},a.prototype._iaddn=function(u){this.words[0]+=u;for(var p=0;p<this.length&&this.words[p]>=67108864;p++)this.words[p]-=67108864,p===this.length-1?this.words[p+1]=1:this.words[p+1]++;return this.length=Math.max(this.length,p+1),this},a.prototype.isubn=function(u){if(o(typeof u=="number"),o(u<67108864),u<0)return this.iaddn(-u);if(this.negative!==0)return this.negative=0,this.iaddn(u),this.negative=1,this;if(this.words[0]-=u,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var p=0;p<this.length&&this.words[p]<0;p++)this.words[p]+=67108864,this.words[p+1]-=1;return this.strip()},a.prototype.addn=function(u){return this.clone().iaddn(u)},a.prototype.subn=function(u){return this.clone().isubn(u)},a.prototype.iabs=function(){return this.negative=0,this},a.prototype.abs=function(){return this.clone().iabs()},a.prototype._ishlnsubmul=function(u,p,m){var y=u.length+m,E;this._expand(y);var $,k=0;for(E=0;E<u.length;E++){$=(this.words[E+m]|0)+k;var _=(u.words[E]|0)*p;$-=_&67108863,k=($>>26)-(_/67108864|0),this.words[E+m]=$&67108863}for(;E<this.length-m;E++)$=(this.words[E+m]|0)+k,k=$>>26,this.words[E+m]=$&67108863;if(k===0)return this.strip();for(o(k===-1),k=0,E=0;E<this.length;E++)$=-(this.words[E]|0)+k,k=$>>26,this.words[E]=$&67108863;return this.negative=1,this.strip()},a.prototype._wordDiv=function(u,p){var m=this.length-u.length,y=this.clone(),E=u,$=E.words[E.length-1]|0,k=this._countBits($);m=26-k,m!==0&&(E=E.ushln(m),y.iushln(m),$=E.words[E.length-1]|0);var _=y.length-E.length,d;if(p!=="mod"){d=new a(null),d.length=_+1,d.words=new Array(d.length);for(var w=0;w<d.length;w++)d.words[w]=0}var I=y.clone()._ishlnsubmul(E,1,_);I.negative===0&&(y=I,d&&(d.words[_]=1));for(var C=_-1;C>=0;C--){var V=(y.words[E.length+C]|0)*67108864+(y.words[E.length+C-1]|0);for(V=Math.min(V/$|0,67108863),y._ishlnsubmul(E,V,C);y.negative!==0;)V--,y.negative=0,y._ishlnsubmul(E,1,C),y.isZero()||(y.negative^=1);d&&(d.words[C]=V)}return d&&d.strip(),y.strip(),p!=="div"&&m!==0&&y.iushrn(m),{div:d||null,mod:y}},a.prototype.divmod=function(u,p,m){if(o(!u.isZero()),this.isZero())return{div:new a(0),mod:new a(0)};var y,E,$;return this.negative!==0&&u.negative===0?($=this.neg().divmod(u,p),p!=="mod"&&(y=$.div.neg()),p!=="div"&&(E=$.mod.neg(),m&&E.negative!==0&&E.iadd(u)),{div:y,mod:E}):this.negative===0&&u.negative!==0?($=this.divmod(u.neg(),p),p!=="mod"&&(y=$.div.neg()),{div:y,mod:$.mod}):this.negative&u.negative?($=this.neg().divmod(u.neg(),p),p!=="div"&&(E=$.mod.neg(),m&&E.negative!==0&&E.isub(u)),{div:$.div,mod:E}):u.length>this.length||this.cmp(u)<0?{div:new a(0),mod:this}:u.length===1?p==="div"?{div:this.divn(u.words[0]),mod:null}:p==="mod"?{div:null,mod:new a(this.modn(u.words[0]))}:{div:this.divn(u.words[0]),mod:new a(this.modn(u.words[0]))}:this._wordDiv(u,p)},a.prototype.div=function(u){return this.divmod(u,"div",!1).div},a.prototype.mod=function(u){return this.divmod(u,"mod",!1).mod},a.prototype.umod=function(u){return this.divmod(u,"mod",!0).mod},a.prototype.divRound=function(u){var p=this.divmod(u);if(p.mod.isZero())return p.div;var m=p.div.negative!==0?p.mod.isub(u):p.mod,y=u.ushrn(1),E=u.andln(1),$=m.cmp(y);return $<0||E===1&&$===0?p.div:p.div.negative!==0?p.div.isubn(1):p.div.iaddn(1)},a.prototype.modn=function(u){o(u<=67108863);for(var p=(1<<26)%u,m=0,y=this.length-1;y>=0;y--)m=(p*m+(this.words[y]|0))%u;return m},a.prototype.idivn=function(u){o(u<=67108863);for(var p=0,m=this.length-1;m>=0;m--){var y=(this.words[m]|0)+p*67108864;this.words[m]=y/u|0,p=y%u}return this.strip()},a.prototype.divn=function(u){return this.clone().idivn(u)},a.prototype.egcd=function(u){o(u.negative===0),o(!u.isZero());var p=this,m=u.clone();p.negative!==0?p=p.umod(u):p=p.clone();for(var y=new a(1),E=new a(0),$=new a(0),k=new a(1),_=0;p.isEven()&&m.isEven();)p.iushrn(1),m.iushrn(1),++_;for(var d=m.clone(),w=p.clone();!p.isZero();){for(var I=0,C=1;!(p.words[0]&C)&&I<26;++I,C<<=1);if(I>0)for(p.iushrn(I);I-- >0;)(y.isOdd()||E.isOdd())&&(y.iadd(d),E.isub(w)),y.iushrn(1),E.iushrn(1);for(var V=0,O=1;!(m.words[0]&O)&&V<26;++V,O<<=1);if(V>0)for(m.iushrn(V);V-- >0;)($.isOdd()||k.isOdd())&&($.iadd(d),k.isub(w)),$.iushrn(1),k.iushrn(1);p.cmp(m)>=0?(p.isub(m),y.isub($),E.isub(k)):(m.isub(p),$.isub(y),k.isub(E))}return{a:$,b:k,gcd:m.iushln(_)}},a.prototype._invmp=function(u){o(u.negative===0),o(!u.isZero());var p=this,m=u.clone();p.negative!==0?p=p.umod(u):p=p.clone();for(var y=new a(1),E=new a(0),$=m.clone();p.cmpn(1)>0&&m.cmpn(1)>0;){for(var k=0,_=1;!(p.words[0]&_)&&k<26;++k,_<<=1);if(k>0)for(p.iushrn(k);k-- >0;)y.isOdd()&&y.iadd($),y.iushrn(1);for(var d=0,w=1;!(m.words[0]&w)&&d<26;++d,w<<=1);if(d>0)for(m.iushrn(d);d-- >0;)E.isOdd()&&E.iadd($),E.iushrn(1);p.cmp(m)>=0?(p.isub(m),y.isub(E)):(m.isub(p),E.isub(y))}var I;return p.cmpn(1)===0?I=y:I=E,I.cmpn(0)<0&&I.iadd(u),I},a.prototype.gcd=function(u){if(this.isZero())return u.abs();if(u.isZero())return this.abs();var p=this.clone(),m=u.clone();p.negative=0,m.negative=0;for(var y=0;p.isEven()&&m.isEven();y++)p.iushrn(1),m.iushrn(1);do{for(;p.isEven();)p.iushrn(1);for(;m.isEven();)m.iushrn(1);var E=p.cmp(m);if(E<0){var $=p;p=m,m=$}else if(E===0||m.cmpn(1)===0)break;p.isub(m)}while(!0);return m.iushln(y)},a.prototype.invm=function(u){return this.egcd(u).a.umod(u)},a.prototype.isEven=function(){return(this.words[0]&1)===0},a.prototype.isOdd=function(){return(this.words[0]&1)===1},a.prototype.andln=function(u){return this.words[0]&u},a.prototype.bincn=function(u){o(typeof u=="number");var p=u%26,m=(u-p)/26,y=1<<p;if(this.length<=m)return this._expand(m+1),this.words[m]|=y,this;for(var E=y,$=m;E!==0&&$<this.length;$++){var k=this.words[$]|0;k+=E,E=k>>>26,k&=67108863,this.words[$]=k}return E!==0&&(this.words[$]=E,this.length++),this},a.prototype.isZero=function(){return this.length===1&&this.words[0]===0},a.prototype.cmpn=function(u){var p=u<0;if(this.negative!==0&&!p)return-1;if(this.negative===0&&p)return 1;this.strip();var m;if(this.length>1)m=1;else{p&&(u=-u),o(u<=67108863,"Number is too big");var y=this.words[0]|0;m=y===u?0:y<u?-1:1}return this.negative!==0?-m|0:m},a.prototype.cmp=function(u){if(this.negative!==0&&u.negative===0)return-1;if(this.negative===0&&u.negative!==0)return 1;var p=this.ucmp(u);return this.negative!==0?-p|0:p},a.prototype.ucmp=function(u){if(this.length>u.length)return 1;if(this.length<u.length)return-1;for(var p=0,m=this.length-1;m>=0;m--){var y=this.words[m]|0,E=u.words[m]|0;if(y!==E){y<E?p=-1:y>E&&(p=1);break}}return p},a.prototype.gtn=function(u){return this.cmpn(u)===1},a.prototype.gt=function(u){return this.cmp(u)===1},a.prototype.gten=function(u){return this.cmpn(u)>=0},a.prototype.gte=function(u){return this.cmp(u)>=0},a.prototype.ltn=function(u){return this.cmpn(u)===-1},a.prototype.lt=function(u){return this.cmp(u)===-1},a.prototype.lten=function(u){return this.cmpn(u)<=0},a.prototype.lte=function(u){return this.cmp(u)<=0},a.prototype.eqn=function(u){return this.cmpn(u)===0},a.prototype.eq=function(u){return this.cmp(u)===0},a.red=function(u){return new pe(u)},a.prototype.toRed=function(u){return o(!this.red,"Already a number in reduction context"),o(this.negative===0,"red works only with positives"),u.convertTo(this)._forceRed(u)},a.prototype.fromRed=function(){return o(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},a.prototype._forceRed=function(u){return this.red=u,this},a.prototype.forceRed=function(u){return o(!this.red,"Already a number in reduction context"),this._forceRed(u)},a.prototype.redAdd=function(u){return o(this.red,"redAdd works only with red numbers"),this.red.add(this,u)},a.prototype.redIAdd=function(u){return o(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,u)},a.prototype.redSub=function(u){return o(this.red,"redSub works only with red numbers"),this.red.sub(this,u)},a.prototype.redISub=function(u){return o(this.red,"redISub works only with red numbers"),this.red.isub(this,u)},a.prototype.redShl=function(u){return o(this.red,"redShl works only with red numbers"),this.red.shl(this,u)},a.prototype.redMul=function(u){return o(this.red,"redMul works only with red numbers"),this.red._verify2(this,u),this.red.mul(this,u)},a.prototype.redIMul=function(u){return o(this.red,"redMul works only with red numbers"),this.red._verify2(this,u),this.red.imul(this,u)},a.prototype.redSqr=function(){return o(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},a.prototype.redISqr=function(){return o(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},a.prototype.redSqrt=function(){return o(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},a.prototype.redInvm=function(){return o(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},a.prototype.redNeg=function(){return o(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},a.prototype.redPow=function(u){return o(this.red&&!u.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,u)};var ee={k256:null,p224:null,p192:null,p25519:null};function te(T,u){this.name=T,this.p=new a(u,16),this.n=this.p.bitLength(),this.k=new a(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}te.prototype._tmp=function(){var u=new a(null);return u.words=new Array(Math.ceil(this.n/13)),u},te.prototype.ireduce=function(u){var p=u,m;do this.split(p,this.tmp),p=this.imulK(p),p=p.iadd(this.tmp),m=p.bitLength();while(m>this.n);var y=m<this.n?-1:p.ucmp(this.p);return y===0?(p.words[0]=0,p.length=1):y>0?p.isub(this.p):p.strip!==void 0?p.strip():p._strip(),p},te.prototype.split=function(u,p){u.iushrn(this.n,0,p)},te.prototype.imulK=function(u){return u.imul(this.k)};function ce(){te.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}c(ce,te),ce.prototype.split=function(u,p){for(var m=4194303,y=Math.min(u.length,9),E=0;E<y;E++)p.words[E]=u.words[E];if(p.length=y,u.length<=9){u.words[0]=0,u.length=1;return}var $=u.words[9];for(p.words[p.length++]=$&m,E=10;E<u.length;E++){var k=u.words[E]|0;u.words[E-10]=(k&m)<<4|$>>>22,$=k}$>>>=22,u.words[E-10]=$,$===0&&u.length>10?u.length-=10:u.length-=9},ce.prototype.imulK=function(u){u.words[u.length]=0,u.words[u.length+1]=0,u.length+=2;for(var p=0,m=0;m<u.length;m++){var y=u.words[m]|0;p+=y*977,u.words[m]=p&67108863,p=y*64+(p/67108864|0)}return u.words[u.length-1]===0&&(u.length--,u.words[u.length-1]===0&&u.length--),u};function ue(){te.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}c(ue,te);function Ae(){te.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}c(Ae,te);function we(){te.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}c(we,te),we.prototype.imulK=function(u){for(var p=0,m=0;m<u.length;m++){var y=(u.words[m]|0)*19+p,E=y&67108863;y>>>=26,u.words[m]=E,p=y}return p!==0&&(u.words[u.length++]=p),u},a._prime=function(u){if(ee[u])return ee[u];var p;if(u==="k256")p=new ce;else if(u==="p224")p=new ue;else if(u==="p192")p=new Ae;else if(u==="p25519")p=new we;else throw new Error("Unknown prime "+u);return ee[u]=p,p};function pe(T){if(typeof T=="string"){var u=a._prime(T);this.m=u.p,this.prime=u}else o(T.gtn(1),"modulus must be greater than 1"),this.m=T,this.prime=null}pe.prototype._verify1=function(u){o(u.negative===0,"red works only with positives"),o(u.red,"red works only with red numbers")},pe.prototype._verify2=function(u,p){o((u.negative|p.negative)===0,"red works only with positives"),o(u.red&&u.red===p.red,"red works only with red numbers")},pe.prototype.imod=function(u){return this.prime?this.prime.ireduce(u)._forceRed(this):u.umod(this.m)._forceRed(this)},pe.prototype.neg=function(u){return u.isZero()?u.clone():this.m.sub(u)._forceRed(this)},pe.prototype.add=function(u,p){this._verify2(u,p);var m=u.add(p);return m.cmp(this.m)>=0&&m.isub(this.m),m._forceRed(this)},pe.prototype.iadd=function(u,p){this._verify2(u,p);var m=u.iadd(p);return m.cmp(this.m)>=0&&m.isub(this.m),m},pe.prototype.sub=function(u,p){this._verify2(u,p);var m=u.sub(p);return m.cmpn(0)<0&&m.iadd(this.m),m._forceRed(this)},pe.prototype.isub=function(u,p){this._verify2(u,p);var m=u.isub(p);return m.cmpn(0)<0&&m.iadd(this.m),m},pe.prototype.shl=function(u,p){return this._verify1(u),this.imod(u.ushln(p))},pe.prototype.imul=function(u,p){return this._verify2(u,p),this.imod(u.imul(p))},pe.prototype.mul=function(u,p){return this._verify2(u,p),this.imod(u.mul(p))},pe.prototype.isqr=function(u){return this.imul(u,u.clone())},pe.prototype.sqr=function(u){return this.mul(u,u)},pe.prototype.sqrt=function(u){if(u.isZero())return u.clone();var p=this.m.andln(3);if(o(p%2===1),p===3){var m=this.m.add(new a(1)).iushrn(2);return this.pow(u,m)}for(var y=this.m.subn(1),E=0;!y.isZero()&&y.andln(1)===0;)E++,y.iushrn(1);o(!y.isZero());var $=new a(1).toRed(this),k=$.redNeg(),_=this.m.subn(1).iushrn(1),d=this.m.bitLength();for(d=new a(2*d*d).toRed(this);this.pow(d,_).cmp(k)!==0;)d.redIAdd(k);for(var w=this.pow(d,y),I=this.pow(u,y.addn(1).iushrn(1)),C=this.pow(u,y),V=E;C.cmp($)!==0;){for(var O=C,j=0;O.cmp($)!==0;j++)O=O.redSqr();o(j<V);var D=this.pow(w,new a(1).iushln(V-j-1));I=I.redMul(D),w=D.redSqr(),C=C.redMul(w),V=j}return I},pe.prototype.invm=function(u){var p=u._invmp(this.m);return p.negative!==0?(p.negative=0,this.imod(p).redNeg()):this.imod(p)},pe.prototype.pow=function(u,p){if(p.isZero())return new a(1).toRed(this);if(p.cmpn(1)===0)return u.clone();var m=4,y=new Array(1<<m);y[0]=new a(1).toRed(this),y[1]=u;for(var E=2;E<y.length;E++)y[E]=this.mul(y[E-1],u);var $=y[0],k=0,_=0,d=p.bitLength()%26;for(d===0&&(d=26),E=p.length-1;E>=0;E--){for(var w=p.words[E],I=d-1;I>=0;I--){var C=w>>I&1;if($!==y[0]&&($=this.sqr($)),C===0&&k===0){_=0;continue}k<<=1,k|=C,_++,!(_!==m&&(E!==0||I!==0))&&($=this.mul($,y[k]),_=0,k=0)}d=26}return $},pe.prototype.convertTo=function(u){var p=u.umod(this.m);return p===u?p.clone():p},pe.prototype.convertFrom=function(u){var p=u.clone();return p.red=null,p},a.mont=function(u){return new Ce(u)};function Ce(T){pe.call(this,T),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new a(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}c(Ce,pe),Ce.prototype.convertTo=function(u){return this.imod(u.ushln(this.shift))},Ce.prototype.convertFrom=function(u){var p=this.imod(u.mul(this.rinv));return p.red=null,p},Ce.prototype.imul=function(u,p){if(u.isZero()||p.isZero())return u.words[0]=0,u.length=1,u;var m=u.imul(p),y=m.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),E=m.isub(y).iushrn(this.shift),$=E;return E.cmp(this.m)>=0?$=E.isub(this.m):E.cmpn(0)<0&&($=E.iadd(this.m)),$._forceRed(this)},Ce.prototype.mul=function(u,p){if(u.isZero()||p.isZero())return new a(0)._forceRed(this);var m=u.mul(p),y=m.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),E=m.isub(y).iushrn(this.shift),$=E;return E.cmp(this.m)>=0?$=E.isub(this.m):E.cmpn(0)<0&&($=E.iadd(this.m)),$._forceRed(this)},Ce.prototype.invm=function(u){var p=this.imod(u._invmp(this.m).mul(this.r2));return p._forceRed(this)}})(t,commonjsGlobal)})(bn);var bnExports=bn.exports,BN$2=bnExports,Buffer$3=safeBufferExports$2.Buffer;function withPublic$2(t,e){return Buffer$3.from(t.toRed(BN$2.mont(e.modulus)).redPow(new BN$2(e.publicExponent)).fromRed().toArray())}var withPublic_1=withPublic$2,parseKeys$1=parseAsn1,randomBytes=browserExports,createHash$1=browser$d,mgf$1=mgf$2,xor$1=xor$2,BN$1=bnExports,withPublic$1=withPublic_1,crt$1=browserifyRsa,Buffer$2=safeBufferExports$2.Buffer,publicEncrypt=function t(e,n,o){var c;e.padding?c=e.padding:o?c=1:c=4;var a=parseKeys$1(e),l;if(c===4)l=oaep$1(a,n);else if(c===1)l=pkcs1$1(a,n,o);else if(c===3){if(l=new BN$1(n),l.cmp(a.modulus)>=0)throw new Error("data too long for modulus")}else throw new Error("unknown padding");return o?crt$1(l,a):withPublic$1(l,a)};function oaep$1(t,e){var n=t.modulus.byteLength(),o=e.length,c=createHash$1("sha1").update(Buffer$2.alloc(0)).digest(),a=c.length,l=2*a;if(o>n-l-2)throw new Error("message too long");var b=Buffer$2.alloc(n-o-l-2),v=n-a-1,A=randomBytes(a),S=xor$1(Buffer$2.concat([c,b,Buffer$2.alloc(1,1),e],v),mgf$1(A,v)),M=xor$1(A,mgf$1(S,a));return new BN$1(Buffer$2.concat([Buffer$2.alloc(1),M,S],n))}function pkcs1$1(t,e,n){var o=e.length,c=t.modulus.byteLength();if(o>c-11)throw new Error("message too long");var a;return n?a=Buffer$2.alloc(c-o-3,255):a=nonZero(c-o-3),new BN$1(Buffer$2.concat([Buffer$2.from([0,n?1:2]),a,Buffer$2.alloc(1),e],c))}function nonZero(t){for(var e=Buffer$2.allocUnsafe(t),n=0,o=randomBytes(t*2),c=0,a;n<t;)c===o.length&&(o=randomBytes(t*2),c=0),a=o[c++],a&&(e[n++]=a);return e}var parseKeys=parseAsn1,mgf=mgf$2,xor=xor$2,BN=bnExports,crt=browserifyRsa,createHash=browser$d,withPublic=withPublic_1,Buffer$1=safeBufferExports$2.Buffer,privateDecrypt=function t(e,n,o){var c;e.padding?c=e.padding:o?c=1:c=4;var a=parseKeys(e),l=a.modulus.byteLength();if(n.length>l||new BN(n).cmp(a.modulus)>=0)throw new Error("decryption error");var b;o?b=withPublic(new BN(n),a):b=crt(n,a);var v=Buffer$1.alloc(l-b.length);if(b=Buffer$1.concat([v,b],l),c===4)return oaep(a,b);if(c===1)return pkcs1(a,b,o);if(c===3)return b;throw new Error("unknown padding")};function oaep(t,e){var n=t.modulus.byteLength(),o=createHash("sha1").update(Buffer$1.alloc(0)).digest(),c=o.length;if(e[0]!==0)throw new Error("decryption error");var a=e.slice(1,c+1),l=e.slice(c+1),b=xor(a,mgf(l,c)),v=xor(l,mgf(b,n-c-1));if(compare(o,v.slice(0,c)))throw new Error("decryption error");for(var A=c;v[A]===0;)A++;if(v[A++]!==1)throw new Error("decryption error");return v.slice(A)}function pkcs1(t,e,n){for(var o=e.slice(0,2),c=2,a=0;e[c++]!==0;)if(c>=e.length){a++;break}var l=e.slice(2,c-1);if((o.toString("hex")!=="0002"&&!n||o.toString("hex")!=="0001"&&n)&&a++,l.length<8&&a++,a)throw new Error("decryption error");return e.slice(c)}function compare(t,e){t=Buffer$1.from(t),e=Buffer$1.from(e);var n=0,o=t.length;t.length!==e.length&&(n++,o=Math.min(t.length,e.length));for(var c=-1;++c<o;)n+=t[c]^e[c];return n}(function(t){t.publicEncrypt=publicEncrypt,t.privateDecrypt=privateDecrypt,t.privateEncrypt=function(n,o){return t.publicEncrypt(n,o,!0)},t.publicDecrypt=function(n,o){return t.privateDecrypt(n,o,!0)}})(browser$4);var browser$3={};function oldBrowser(){throw new Error(`secure random number generation not supported by this browser
use chrome, FireFox or Internet Explorer 11`)}var safeBuffer=safeBufferExports$2,randombytes=browserExports,Buffer=safeBuffer.Buffer,kBufferMaxLength=safeBuffer.kMaxLength,crypto$1=commonjsGlobal.crypto||commonjsGlobal.msCrypto,kMaxUint32=Math.pow(2,32)-1;function assertOffset(t,e){if(typeof t!="number"||t!==t)throw new TypeError("offset must be a number");if(t>kMaxUint32||t<0)throw new TypeError("offset must be a uint32");if(t>kBufferMaxLength||t>e)throw new RangeError("offset out of range")}function assertSize(t,e,n){if(typeof t!="number"||t!==t)throw new TypeError("size must be a number");if(t>kMaxUint32||t<0)throw new TypeError("size must be a uint32");if(t+e>n||t>kBufferMaxLength)throw new RangeError("buffer too small")}crypto$1&&crypto$1.getRandomValues||!process$1.browser?(browser$3.randomFill=randomFill,browser$3.randomFillSync=randomFillSync):(browser$3.randomFill=oldBrowser,browser$3.randomFillSync=oldBrowser);function randomFill(t,e,n,o){if(!Buffer.isBuffer(t)&&!(t instanceof commonjsGlobal.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if(typeof e=="function")o=e,e=0,n=t.length;else if(typeof n=="function")o=n,n=t.length-e;else if(typeof o!="function")throw new TypeError('"cb" argument must be a function');return assertOffset(e,t.length),assertSize(n,e,t.length),actualFill(t,e,n,o)}function actualFill(t,e,n,o){if(process$1.browser){var c=t.buffer,a=new Uint8Array(c,e,n);if(crypto$1.getRandomValues(a),o){process$1.nextTick(function(){o(null,t)});return}return t}if(o){randombytes(n,function(b,v){if(b)return o(b);v.copy(t,e),o(null,t)});return}var l=randombytes(n);return l.copy(t,e),t}function randomFillSync(t,e,n){if(typeof e>"u"&&(e=0),!Buffer.isBuffer(t)&&!(t instanceof commonjsGlobal.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');return assertOffset(e,t.length),n===void 0&&(n=t.length-e),assertSize(n,e,t.length),actualFill(t,e,n)}var hasRequiredCryptoBrowserify;function requireCryptoBrowserify(){if(hasRequiredCryptoBrowserify)return cryptoBrowserify;hasRequiredCryptoBrowserify=1,cryptoBrowserify.randomBytes=cryptoBrowserify.rng=cryptoBrowserify.pseudoRandomBytes=cryptoBrowserify.prng=browserExports,cryptoBrowserify.createHash=cryptoBrowserify.Hash=browser$d,cryptoBrowserify.createHmac=cryptoBrowserify.Hmac=browser$b;var t=algos,e=Object.keys(t),n=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(e);cryptoBrowserify.getHashes=function(){return n};var o=browser$a;cryptoBrowserify.pbkdf2=o.pbkdf2,cryptoBrowserify.pbkdf2Sync=o.pbkdf2Sync;var c=browser$9;cryptoBrowserify.Cipher=c.Cipher,cryptoBrowserify.createCipher=c.createCipher,cryptoBrowserify.Cipheriv=c.Cipheriv,cryptoBrowserify.createCipheriv=c.createCipheriv,cryptoBrowserify.Decipher=c.Decipher,cryptoBrowserify.createDecipher=c.createDecipher,cryptoBrowserify.Decipheriv=c.Decipheriv,cryptoBrowserify.createDecipheriv=c.createDecipheriv,cryptoBrowserify.getCiphers=c.getCiphers,cryptoBrowserify.listCiphers=c.listCiphers;var a=requireBrowser$2();cryptoBrowserify.DiffieHellmanGroup=a.DiffieHellmanGroup,cryptoBrowserify.createDiffieHellmanGroup=a.createDiffieHellmanGroup,cryptoBrowserify.getDiffieHellman=a.getDiffieHellman,cryptoBrowserify.createDiffieHellman=a.createDiffieHellman,cryptoBrowserify.DiffieHellman=a.DiffieHellman;var l=requireBrowser$1();cryptoBrowserify.createSign=l.createSign,cryptoBrowserify.Sign=l.Sign,cryptoBrowserify.createVerify=l.createVerify,cryptoBrowserify.Verify=l.Verify,cryptoBrowserify.createECDH=requireBrowser();var b=browser$4;cryptoBrowserify.publicEncrypt=b.publicEncrypt,cryptoBrowserify.privateEncrypt=b.privateEncrypt,cryptoBrowserify.publicDecrypt=b.publicDecrypt,cryptoBrowserify.privateDecrypt=b.privateDecrypt;var v=browser$3;return cryptoBrowserify.randomFill=v.randomFill,cryptoBrowserify.randomFillSync=v.randomFillSync,cryptoBrowserify.createCredentials=function(){throw new Error(["sorry, createCredentials is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join(`
`))},cryptoBrowserify.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6},cryptoBrowserify}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.utils=t.schnorr=t.verify=t.signSync=t.sign=t.getSharedSecret=t.recoverPublicKey=t.getPublicKey=t.Signature=t.Point=t.CURVE=void 0;const e=requireCryptoBrowserify(),n=BigInt(0),o=BigInt(1),c=BigInt(2),a=BigInt(3),l=BigInt(8),b=Object.freeze({a:n,b:BigInt(7),P:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:o,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")});t.CURVE=b;const v=(me,le)=>(me+le/c)/le,A={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar(me){const{n:le}=b,_e=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),be=-o*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),Se=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),Je=_e,Te=BigInt("0x100000000000000000000000000000000"),Ne=v(Je*me,le),ne=v(-be*me,le);let ie=C(me-Ne*_e-ne*Se,le),ae=C(-Ne*be-ne*Je,le);const Y=ie>Te,fe=ae>Te;if(Y&&(ie=le-ie),fe&&(ae=le-ae),ie>Te||ae>Te)throw new Error("splitScalarEndo: Endomorphism failed, k="+me);return{k1neg:Y,k1:ie,k2neg:fe,k2:ae}}},S=32,M=32,B=32,P=S+1,L=2*S+1;function F(me){const{a:le,b:_e}=b,be=C(me*me),Se=C(be*me);return C(Se+le*me+_e)}const U=b.a===n;class q extends Error{constructor(le){super(le)}}function X(me){if(!(me instanceof ee))throw new TypeError("JacobianPoint expected")}class ee{constructor(le,_e,be){this.x=le,this.y=_e,this.z=be}static fromAffine(le){if(!(le instanceof ue))throw new TypeError("JacobianPoint#fromAffine: expected Point");return le.equals(ue.ZERO)?ee.ZERO:new ee(le.x,le.y,o)}static toAffineBatch(le){const _e=D(le.map(be=>be.z));return le.map((be,Se)=>be.toAffine(_e[Se]))}static normalizeZ(le){return ee.toAffineBatch(le).map(ee.fromAffine)}equals(le){X(le);const{x:_e,y:be,z:Se}=this,{x:Je,y:Te,z:Ne}=le,ne=C(Se*Se),ie=C(Ne*Ne),ae=C(_e*ie),Y=C(Je*ne),fe=C(C(be*Ne)*ie),ve=C(C(Te*Se)*ne);return ae===Y&&fe===ve}negate(){return new ee(this.x,C(-this.y),this.z)}double(){const{x:le,y:_e,z:be}=this,Se=C(le*le),Je=C(_e*_e),Te=C(Je*Je),Ne=le+Je,ne=C(c*(C(Ne*Ne)-Se-Te)),ie=C(a*Se),ae=C(ie*ie),Y=C(ae-c*ne),fe=C(ie*(ne-Y)-l*Te),ve=C(c*_e*be);return new ee(Y,fe,ve)}add(le){X(le);const{x:_e,y:be,z:Se}=this,{x:Je,y:Te,z:Ne}=le;if(Je===n||Te===n)return this;if(_e===n||be===n)return le;const ne=C(Se*Se),ie=C(Ne*Ne),ae=C(_e*ie),Y=C(Je*ne),fe=C(C(be*Ne)*ie),ve=C(C(Te*Se)*ne),Pe=C(Y-ae),xe=C(ve-fe);if(Pe===n)return xe===n?this.double():ee.ZERO;const Be=C(Pe*Pe),Qe=C(Pe*Be),Ze=C(ae*Be),xt=C(xe*xe-Qe-c*Ze),it=C(xe*(Ze-xt)-fe*Qe),dt=C(Se*Ne*Pe);return new ee(xt,it,dt)}subtract(le){return this.add(le.negate())}multiplyUnsafe(le){const _e=ee.ZERO;if(typeof le=="bigint"&&le===n)return _e;let be=I(le);if(be===o)return this;if(!U){let Y=_e,fe=this;for(;be>n;)be&o&&(Y=Y.add(fe)),fe=fe.double(),be>>=o;return Y}let{k1neg:Se,k1:Je,k2neg:Te,k2:Ne}=A.splitScalar(be),ne=_e,ie=_e,ae=this;for(;Je>n||Ne>n;)Je&o&&(ne=ne.add(ae)),Ne&o&&(ie=ie.add(ae)),ae=ae.double(),Je>>=o,Ne>>=o;return Se&&(ne=ne.negate()),Te&&(ie=ie.negate()),ie=new ee(C(ie.x*A.beta),ie.y,ie.z),ne.add(ie)}precomputeWindow(le){const _e=U?128/le+1:256/le+1,be=[];let Se=this,Je=Se;for(let Te=0;Te<_e;Te++){Je=Se,be.push(Je);for(let Ne=1;Ne<2**(le-1);Ne++)Je=Je.add(Se),be.push(Je);Se=Je.double()}return be}wNAF(le,_e){!_e&&this.equals(ee.BASE)&&(_e=ue.BASE);const be=_e&&_e._WINDOW_SIZE||1;if(256%be)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let Se=_e&&ce.get(_e);Se||(Se=this.precomputeWindow(be),_e&&be!==1&&(Se=ee.normalizeZ(Se),ce.set(_e,Se)));let Je=ee.ZERO,Te=ee.BASE;const Ne=1+(U?128/be:256/be),ne=2**(be-1),ie=BigInt(2**be-1),ae=2**be,Y=BigInt(be);for(let fe=0;fe<Ne;fe++){const ve=fe*ne;let Pe=Number(le&ie);le>>=Y,Pe>ne&&(Pe-=ae,le+=o);const xe=ve,Be=ve+Math.abs(Pe)-1,Qe=fe%2!==0,Ze=Pe<0;Pe===0?Te=Te.add(te(Qe,Se[xe])):Je=Je.add(te(Ze,Se[Be]))}return{p:Je,f:Te}}multiply(le,_e){let be=I(le),Se,Je;if(U){const{k1neg:Te,k1:Ne,k2neg:ne,k2:ie}=A.splitScalar(be);let{p:ae,f:Y}=this.wNAF(Ne,_e),{p:fe,f:ve}=this.wNAF(ie,_e);ae=te(Te,ae),fe=te(ne,fe),fe=new ee(C(fe.x*A.beta),fe.y,fe.z),Se=ae.add(fe),Je=Y.add(ve)}else{const{p:Te,f:Ne}=this.wNAF(be,_e);Se=Te,Je=Ne}return ee.normalizeZ([Se,Je])[0]}toAffine(le){const{x:_e,y:be,z:Se}=this,Je=this.equals(ee.ZERO);le==null&&(le=Je?l:j(Se));const Te=le,Ne=C(Te*Te),ne=C(Ne*Te),ie=C(_e*Ne),ae=C(be*ne),Y=C(Se*Te);if(Je)return ue.ZERO;if(Y!==o)throw new Error("invZ was invalid");return new ue(ie,ae)}}ee.BASE=new ee(b.Gx,b.Gy,o),ee.ZERO=new ee(n,o,n);function te(me,le){const _e=le.negate();return me?_e:le}const ce=new WeakMap;class ue{constructor(le,_e){this.x=le,this.y=_e}_setWindowSize(le){this._WINDOW_SIZE=le,ce.delete(this)}hasEvenY(){return this.y%c===n}static fromCompressedHex(le){const _e=le.length===32,be=d(_e?le:le.subarray(1));if(!Me(be))throw new Error("Point is not on curve");const Se=F(be);let Je=O(Se);const Te=(Je&o)===o;_e?Te&&(Je=C(-Je)):(le[0]&1)===1!==Te&&(Je=C(-Je));const Ne=new ue(be,Je);return Ne.assertValidity(),Ne}static fromUncompressedHex(le){const _e=d(le.subarray(1,S+1)),be=d(le.subarray(S+1,S*2+1)),Se=new ue(_e,be);return Se.assertValidity(),Se}static fromHex(le){const _e=w(le),be=_e.length,Se=_e[0];if(be===S)return this.fromCompressedHex(_e);if(be===P&&(Se===2||Se===3))return this.fromCompressedHex(_e);if(be===L&&Se===4)return this.fromUncompressedHex(_e);throw new Error(`Point.fromHex: received invalid point. Expected 32-${P} compressed bytes or ${L} uncompressed bytes, not ${be}`)}static fromPrivateKey(le){return ue.BASE.multiply(Ie(le))}static fromSignature(le,_e,be){const{r:Se,s:Je}=Fe(_e);if(![0,1,2,3].includes(be))throw new Error("Cannot recover: invalid recovery bit");const Te=oe(w(le)),{n:Ne}=b,ne=be===2||be===3?Se+Ne:Se,ie=j(ne,Ne),ae=C(-Te*ie,Ne),Y=C(Je*ie,Ne),fe=be&1?"03":"02",ve=ue.fromHex(fe+y(ne)),Pe=ue.BASE.multiplyAndAddUnsafe(ve,ae,Y);if(!Pe)throw new Error("Cannot recover signature: point at infinify");return Pe.assertValidity(),Pe}toRawBytes(le=!1){return _(this.toHex(le))}toHex(le=!1){const _e=y(this.x);return le?`${this.hasEvenY()?"02":"03"}${_e}`:`04${_e}${y(this.y)}`}toHexX(){return this.toHex(!0).slice(2)}toRawX(){return this.toRawBytes(!0).slice(1)}assertValidity(){const le="Point is not on elliptic curve",{x:_e,y:be}=this;if(!Me(_e)||!Me(be))throw new Error(le);const Se=C(be*be),Je=F(_e);if(C(Se-Je)!==n)throw new Error(le)}equals(le){return this.x===le.x&&this.y===le.y}negate(){return new ue(this.x,C(-this.y))}double(){return ee.fromAffine(this).double().toAffine()}add(le){return ee.fromAffine(this).add(ee.fromAffine(le)).toAffine()}subtract(le){return this.add(le.negate())}multiply(le){return ee.fromAffine(this).multiply(le,this).toAffine()}multiplyAndAddUnsafe(le,_e,be){const Se=ee.fromAffine(this),Je=_e===n||_e===o||this!==ue.BASE?Se.multiplyUnsafe(_e):Se.multiply(_e),Te=ee.fromAffine(le).multiplyUnsafe(be),Ne=Je.add(Te);return Ne.equals(ee.ZERO)?void 0:Ne.toAffine()}}t.Point=ue,ue.BASE=new ue(b.Gx,b.Gy),ue.ZERO=new ue(n,n);function Ae(me){return Number.parseInt(me[0],16)>=8?"00"+me:me}function we(me){if(me.length<2||me[0]!==2)throw new Error(`Invalid signature integer tag: ${p(me)}`);const le=me[1],_e=me.subarray(2,le+2);if(!le||_e.length!==le)throw new Error("Invalid signature integer: wrong length");if(_e[0]===0&&_e[1]<=127)throw new Error("Invalid signature integer: trailing length");return{data:d(_e),left:me.subarray(le+2)}}function pe(me){if(me.length<2||me[0]!=48)throw new Error(`Invalid signature tag: ${p(me)}`);if(me[1]!==me.length-2)throw new Error("Invalid signature: incorrect length");const{data:le,left:_e}=we(me.subarray(2)),{data:be,left:Se}=we(_e);if(Se.length)throw new Error(`Invalid signature: left bytes after parsing: ${p(Se)}`);return{r:le,s:be}}class Ce{constructor(le,_e){this.r=le,this.s=_e,this.assertValidity()}static fromCompact(le){const _e=le instanceof Uint8Array,be="Signature.fromCompact";if(typeof le!="string"&&!_e)throw new TypeError(`${be}: Expected string or Uint8Array`);const Se=_e?p(le):le;if(Se.length!==128)throw new Error(`${be}: Expected 64-byte hex`);return new Ce(k(Se.slice(0,64)),k(Se.slice(64,128)))}static fromDER(le){const _e=le instanceof Uint8Array;if(typeof le!="string"&&!_e)throw new TypeError("Signature.fromDER: Expected string or Uint8Array");const{r:be,s:Se}=pe(_e?le:_(le));return new Ce(be,Se)}static fromHex(le){return this.fromDER(le)}assertValidity(){const{r:le,s:_e}=this;if(!ge(le))throw new Error("Invalid Signature: r must be 0 < r < n");if(!ge(_e))throw new Error("Invalid Signature: s must be 0 < s < n")}hasHighS(){const le=b.n>>o;return this.s>le}normalizeS(){return this.hasHighS()?new Ce(this.r,C(-this.s,b.n)):this}toDERRawBytes(){return _(this.toDERHex())}toDERHex(){const le=Ae($(this.s)),_e=Ae($(this.r)),be=le.length/2,Se=_e.length/2,Je=$(be),Te=$(Se);return`30${$(Se+be+4)}02${Te}${_e}02${Je}${le}`}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return _(this.toCompactHex())}toCompactHex(){return y(this.r)+y(this.s)}}t.Signature=Ce;function T(...me){if(!me.every(be=>be instanceof Uint8Array))throw new Error("Uint8Array list expected");if(me.length===1)return me[0];const le=me.reduce((be,Se)=>be+Se.length,0),_e=new Uint8Array(le);for(let be=0,Se=0;be<me.length;be++){const Je=me[be];_e.set(Je,Se),Se+=Je.length}return _e}const u=Array.from({length:256},(me,le)=>le.toString(16).padStart(2,"0"));function p(me){if(!(me instanceof Uint8Array))throw new Error("Expected Uint8Array");let le="";for(let _e=0;_e<me.length;_e++)le+=u[me[_e]];return le}const m=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");function y(me){if(typeof me!="bigint")throw new Error("Expected bigint");if(!(n<=me&&me<m))throw new Error("Expected number 0 <= n < 2^256");return me.toString(16).padStart(64,"0")}function E(me){const le=_(y(me));if(le.length!==32)throw new Error("Error: expected 32 bytes");return le}function $(me){const le=me.toString(16);return le.length&1?`0${le}`:le}function k(me){if(typeof me!="string")throw new TypeError("hexToNumber: expected string, got "+typeof me);return BigInt(`0x${me}`)}function _(me){if(typeof me!="string")throw new TypeError("hexToBytes: expected string, got "+typeof me);if(me.length%2)throw new Error("hexToBytes: received invalid unpadded hex"+me.length);const le=new Uint8Array(me.length/2);for(let _e=0;_e<le.length;_e++){const be=_e*2,Se=me.slice(be,be+2),Je=Number.parseInt(Se,16);if(Number.isNaN(Je)||Je<0)throw new Error("Invalid byte sequence");le[_e]=Je}return le}function d(me){return k(p(me))}function w(me){return me instanceof Uint8Array?Uint8Array.from(me):_(me)}function I(me){if(typeof me=="number"&&Number.isSafeInteger(me)&&me>0)return BigInt(me);if(typeof me=="bigint"&&ge(me))return me;throw new TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function C(me,le=b.P){const _e=me%le;return _e>=n?_e:le+_e}function V(me,le){const{P:_e}=b;let be=me;for(;le-- >n;)be*=be,be%=_e;return be}function O(me){const{P:le}=b,_e=BigInt(6),be=BigInt(11),Se=BigInt(22),Je=BigInt(23),Te=BigInt(44),Ne=BigInt(88),ne=me*me*me%le,ie=ne*ne*me%le,ae=V(ie,a)*ie%le,Y=V(ae,a)*ie%le,fe=V(Y,c)*ne%le,ve=V(fe,be)*fe%le,Pe=V(ve,Se)*ve%le,xe=V(Pe,Te)*Pe%le,Be=V(xe,Ne)*xe%le,Qe=V(Be,Te)*Pe%le,Ze=V(Qe,a)*ie%le,xt=V(Ze,Je)*ve%le,it=V(xt,_e)*ne%le,dt=V(it,c);if(dt*dt%le!==me)throw new Error("Cannot find square root");return dt}function j(me,le=b.P){if(me===n||le<=n)throw new Error(`invert: expected positive integers, got n=${me} mod=${le}`);let _e=C(me,le),be=le,Se=n,Je=o;for(;_e!==n;){const Ne=be/_e,ne=be%_e,ie=Se-Je*Ne;be=_e,_e=ne,Se=Je,Je=ie}if(be!==o)throw new Error("invert: does not exist");return C(Se,le)}function D(me,le=b.P){const _e=new Array(me.length),be=me.reduce((Je,Te,Ne)=>Te===n?Je:(_e[Ne]=Je,C(Je*Te,le)),o),Se=j(be,le);return me.reduceRight((Je,Te,Ne)=>Te===n?Je:(_e[Ne]=C(Je*_e[Ne],le),C(Je*Te,le)),Se),_e}function Q(me){const le=me.length*8-M*8,_e=d(me);return le>0?_e>>BigInt(le):_e}function oe(me,le=!1){const _e=Q(me);if(le)return _e;const{n:be}=b;return _e>=be?_e-be:_e}let de,Z;class H{constructor(le,_e){if(this.hashLen=le,this.qByteLen=_e,typeof le!="number"||le<2)throw new Error("hashLen must be a number");if(typeof _e!="number"||_e<2)throw new Error("qByteLen must be a number");this.v=new Uint8Array(le).fill(1),this.k=new Uint8Array(le).fill(0),this.counter=0}hmac(...le){return t.utils.hmacSha256(this.k,...le)}hmacSync(...le){return Z(this.k,...le)}checkSync(){if(typeof Z!="function")throw new q("hmacSha256Sync needs to be set")}incr(){if(this.counter>=1e3)throw new Error("Tried 1,000 k values for sign(), all were invalid");this.counter+=1}async reseed(le=new Uint8Array){this.k=await this.hmac(this.v,Uint8Array.from([0]),le),this.v=await this.hmac(this.v),le.length!==0&&(this.k=await this.hmac(this.v,Uint8Array.from([1]),le),this.v=await this.hmac(this.v))}reseedSync(le=new Uint8Array){this.checkSync(),this.k=this.hmacSync(this.v,Uint8Array.from([0]),le),this.v=this.hmacSync(this.v),le.length!==0&&(this.k=this.hmacSync(this.v,Uint8Array.from([1]),le),this.v=this.hmacSync(this.v))}async generate(){this.incr();let le=0;const _e=[];for(;le<this.qByteLen;){this.v=await this.hmac(this.v);const be=this.v.slice();_e.push(be),le+=this.v.length}return T(..._e)}generateSync(){this.checkSync(),this.incr();let le=0;const _e=[];for(;le<this.qByteLen;){this.v=this.hmacSync(this.v);const be=this.v.slice();_e.push(be),le+=this.v.length}return T(..._e)}}function ge(me){return n<me&&me<b.n}function Me(me){return n<me&&me<b.P}function ke(me,le,_e,be=!0){const{n:Se}=b,Je=oe(me,!0);if(!ge(Je))return;const Te=j(Je,Se),Ne=ue.BASE.multiply(Je),ne=C(Ne.x,Se);if(ne===n)return;const ie=C(Te*C(le+_e*ne,Se),Se);if(ie===n)return;let ae=new Ce(ne,ie),Y=(Ne.x===ae.r?0:2)|Number(Ne.y&o);return be&&ae.hasHighS()&&(ae=ae.normalizeS(),Y^=1),{sig:ae,recovery:Y}}function Ie(me){let le;if(typeof me=="bigint")le=me;else if(typeof me=="number"&&Number.isSafeInteger(me)&&me>0)le=BigInt(me);else if(typeof me=="string"){if(me.length!==2*M)throw new Error("Expected 32 bytes of private key");le=k(me)}else if(me instanceof Uint8Array){if(me.length!==M)throw new Error("Expected 32 bytes of private key");le=d(me)}else throw new TypeError("Expected valid private key");if(!ge(le))throw new Error("Expected private key: 0 < key < n");return le}function et(me){return me instanceof ue?(me.assertValidity(),me):ue.fromHex(me)}function Fe(me){if(me instanceof Ce)return me.assertValidity(),me;try{return Ce.fromDER(me)}catch{return Ce.fromCompact(me)}}function $e(me,le=!1){return ue.fromPrivateKey(me).toRawBytes(le)}t.getPublicKey=$e;function $t(me,le,_e,be=!1){return ue.fromSignature(me,le,_e).toRawBytes(be)}t.recoverPublicKey=$t;function He(me){const le=me instanceof Uint8Array,_e=typeof me=="string",be=(le||_e)&&me.length;return le?be===P||be===L:_e?be===P*2||be===L*2:me instanceof ue}function Ye(me,le,_e=!1){if(He(me))throw new TypeError("getSharedSecret: first arg must be private key");if(!He(le))throw new TypeError("getSharedSecret: second arg must be public key");const be=et(le);return be.assertValidity(),be.multiply(Ie(me)).toRawBytes(_e)}t.getSharedSecret=Ye;function St(me){const le=me.length>S?me.slice(0,S):me;return d(le)}function De(me){const le=St(me),_e=C(le,b.n);return qe(_e<n?le:_e)}function qe(me){return E(me)}function At(me,le,_e){if(me==null)throw new Error(`sign: expected valid message hash, not "${me}"`);const be=w(me),Se=Ie(le),Je=[qe(Se),De(be)];if(_e!=null){_e===!0&&(_e=t.utils.randomBytes(S));const ne=w(_e);if(ne.length!==S)throw new Error(`sign: Expected ${S} bytes of extra data`);Je.push(ne)}const Te=T(...Je),Ne=St(be);return{seed:Te,m:Ne,d:Se}}function ze(me,le){const{sig:_e,recovery:be}=me,{der:Se,recovered:Je}=Object.assign({canonical:!0,der:!0},le),Te=Se?_e.toDERRawBytes():_e.toCompactRawBytes();return Je?[Te,be]:Te}async function Ge(me,le,_e={}){const{seed:be,m:Se,d:Je}=At(me,le,_e.extraEntropy),Te=new H(B,M);await Te.reseed(be);let Ne;for(;!(Ne=ke(await Te.generate(),Se,Je,_e.canonical));)await Te.reseed();return ze(Ne,_e)}t.sign=Ge;function kt(me,le,_e={}){const{seed:be,m:Se,d:Je}=At(me,le,_e.extraEntropy),Te=new H(B,M);Te.reseedSync(be);let Ne;for(;!(Ne=ke(Te.generateSync(),Se,Je,_e.canonical));)Te.reseedSync();return ze(Ne,_e)}t.signSync=kt;const se={strict:!0};function J(me,le,_e,be=se){let Se;try{Se=Fe(me),le=w(le)}catch{return!1}const{r:Je,s:Te}=Se;if(be.strict&&Se.hasHighS())return!1;const Ne=oe(le);let ne;try{ne=et(_e)}catch{return!1}const{n:ie}=b,ae=j(Te,ie),Y=C(Ne*ae,ie),fe=C(Je*ae,ie),ve=ue.BASE.multiplyAndAddUnsafe(ne,Y,fe);return ve?C(ve.x,ie)===Je:!1}t.verify=J;function re(me){return C(d(me),b.n)}class he{constructor(le,_e){this.r=le,this.s=_e,this.assertValidity()}static fromHex(le){const _e=w(le);if(_e.length!==64)throw new TypeError(`SchnorrSignature.fromHex: expected 64 bytes, not ${_e.length}`);const be=d(_e.subarray(0,32)),Se=d(_e.subarray(32,64));return new he(be,Se)}assertValidity(){const{r:le,s:_e}=this;if(!Me(le)||!ge(_e))throw new Error("Invalid signature")}toHex(){return y(this.r)+y(this.s)}toRawBytes(){return _(this.toHex())}}function ye(me){return ue.fromPrivateKey(me).toRawX()}class Oe{constructor(le,_e,be=t.utils.randomBytes()){if(le==null)throw new TypeError(`sign: Expected valid message, not "${le}"`);this.m=w(le);const{x:Se,scalar:Je}=this.getScalar(Ie(_e));if(this.px=Se,this.d=Je,this.rand=w(be),this.rand.length!==32)throw new TypeError("sign: Expected 32 bytes of aux randomness")}getScalar(le){const _e=ue.fromPrivateKey(le),be=_e.hasEvenY()?le:b.n-le;return{point:_e,scalar:be,x:_e.toRawX()}}initNonce(le,_e){return E(le^d(_e))}finalizeNonce(le){const _e=C(d(le),b.n);if(_e===n)throw new Error("sign: Creation of signature failed. k is zero");const{point:be,x:Se,scalar:Je}=this.getScalar(_e);return{R:be,rx:Se,k:Je}}finalizeSig(le,_e,be,Se){return new he(le.x,C(_e+be*Se,b.n)).toRawBytes()}error(){throw new Error("sign: Invalid signature produced")}async calc(){const{m:le,d:_e,px:be,rand:Se}=this,Je=t.utils.taggedHash,Te=this.initNonce(_e,await Je(Xe.aux,Se)),{R:Ne,rx:ne,k:ie}=this.finalizeNonce(await Je(Xe.nonce,Te,be,le)),ae=re(await Je(Xe.challenge,ne,be,le)),Y=this.finalizeSig(Ne,ie,ae,_e);return await Ve(Y,le,be)||this.error(),Y}calcSync(){const{m:le,d:_e,px:be,rand:Se}=this,Je=t.utils.taggedHashSync,Te=this.initNonce(_e,Je(Xe.aux,Se)),{R:Ne,rx:ne,k:ie}=this.finalizeNonce(Je(Xe.nonce,Te,be,le)),ae=re(Je(Xe.challenge,ne,be,le)),Y=this.finalizeSig(Ne,ie,ae,_e);return mt(Y,le,be)||this.error(),Y}}async function Ee(me,le,_e){return new Oe(me,le,_e).calc()}function Ue(me,le,_e){return new Oe(me,le,_e).calcSync()}function bt(me,le,_e){const be=me instanceof he,Se=be?me:he.fromHex(me);return be&&Se.assertValidity(),{...Se,m:w(le),P:et(_e)}}function Le(me,le,_e,be){const Se=ue.BASE.multiplyAndAddUnsafe(le,Ie(_e),C(-be,b.n));return!(!Se||!Se.hasEvenY()||Se.x!==me)}async function Ve(me,le,_e){try{const{r:be,s:Se,m:Je,P:Te}=bt(me,le,_e),Ne=re(await t.utils.taggedHash(Xe.challenge,E(be),Te.toRawX(),Je));return Le(be,Te,Se,Ne)}catch{return!1}}function mt(me,le,_e){try{const{r:be,s:Se,m:Je,P:Te}=bt(me,le,_e),Ne=re(t.utils.taggedHashSync(Xe.challenge,E(be),Te.toRawX(),Je));return Le(be,Te,Se,Ne)}catch(be){if(be instanceof q)throw be;return!1}}t.schnorr={Signature:he,getPublicKey:ye,sign:Ee,verify:Ve,signSync:Ue,verifySync:mt},ue.BASE._setWindowSize(8);const Ke={node:e,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0},Xe={challenge:"BIP0340/challenge",aux:"BIP0340/aux",nonce:"BIP0340/nonce"},Mt={};t.utils={bytesToHex:p,hexToBytes:_,concatBytes:T,mod:C,invert:j,isValidPrivateKey(me){try{return Ie(me),!0}catch{return!1}},_bigintTo32Bytes:E,_normalizePrivateKey:Ie,hashToPrivateKey:me=>{me=w(me);const le=M+8;if(me.length<le||me.length>1024)throw new Error("Expected valid bytes of private key as per FIPS 186");const _e=C(d(me),b.n-o)+o;return E(_e)},randomBytes:(me=32)=>{if(Ke.web)return Ke.web.getRandomValues(new Uint8Array(me));if(Ke.node){const{randomBytes:le}=Ke.node;return Uint8Array.from(le(me))}else throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>t.utils.hashToPrivateKey(t.utils.randomBytes(M+8)),precompute(me=8,le=ue.BASE){const _e=le===ue.BASE?le:new ue(le.x,le.y);return _e._setWindowSize(me),_e.multiply(a),_e},sha256:async(...me)=>{if(Ke.web){const le=await Ke.web.subtle.digest("SHA-256",T(...me));return new Uint8Array(le)}else if(Ke.node){const{createHash:le}=Ke.node,_e=le("sha256");return me.forEach(be=>_e.update(be)),Uint8Array.from(_e.digest())}else throw new Error("The environment doesn't have sha256 function")},hmacSha256:async(me,...le)=>{if(Ke.web){const _e=await Ke.web.subtle.importKey("raw",me,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),be=T(...le),Se=await Ke.web.subtle.sign("HMAC",_e,be);return new Uint8Array(Se)}else if(Ke.node){const{createHmac:_e}=Ke.node,be=_e("sha256",me);return le.forEach(Se=>be.update(Se)),Uint8Array.from(be.digest())}else throw new Error("The environment doesn't have hmac-sha256 function")},sha256Sync:void 0,hmacSha256Sync:void 0,taggedHash:async(me,...le)=>{let _e=Mt[me];if(_e===void 0){const be=await t.utils.sha256(Uint8Array.from(me,Se=>Se.charCodeAt(0)));_e=T(be,be),Mt[me]=_e}return t.utils.sha256(_e,...le)},taggedHashSync:(me,...le)=>{if(typeof de!="function")throw new q("sha256Sync is undefined, you need to set it");let _e=Mt[me];if(_e===void 0){const be=de(Uint8Array.from(me,Se=>Se.charCodeAt(0)));_e=T(be,be),Mt[me]=_e}return de(_e,...le)},_JacobianPoint:ee},Object.defineProperties(t.utils,{sha256Sync:{configurable:!1,get(){return de},set(me){de||(de=me)}},hmacSha256Sync:{configurable:!1,get(){return Z},set(me){Z||(Z=me)}}})})(lib$1);var necc=lib$1,hmac=hmac$1,sha256=sha256$4;function _interopNamespaceDefault(t){var e=Object.create(null);return t&&Object.keys(t).forEach(function(n){if(n!=="default"){var o=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,o.get?o:{enumerable:!0,get:function(){return t[n]}})}}),e.default=t,Object.freeze(e)}var necc__namespace=_interopNamespaceDefault(necc);const THROW_BAD_PRIVATE="Expected Private",THROW_BAD_POINT="Expected Point",THROW_BAD_TWEAK="Expected Tweak",THROW_BAD_HASH="Expected Hash",THROW_BAD_SIGNATURE="Expected Signature",THROW_BAD_EXTRA_DATA="Expected Extra Data (32 bytes)",THROW_BAD_SCALAR="Expected Scalar",THROW_BAD_RECOVERY_ID="Bad Recovery Id";necc__namespace.utils.hmacSha256Sync=(t,...e)=>hmac.hmac(sha256.sha256,t,necc__namespace.utils.concatBytes(...e));necc__namespace.utils.sha256Sync=(...t)=>sha256.sha256(necc__namespace.utils.concatBytes(...t));const normalizePrivateKey=necc__namespace.utils._normalizePrivateKey,HASH_SIZE=32,TWEAK_SIZE=32,BN32_N=new Uint8Array([255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,186,174,220,230,175,72,160,59,191,210,94,140,208,54,65,65]),EXTRA_DATA_SIZE=32,BN32_ZERO=new Uint8Array(32),BN32_P_MINUS_N=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,69,81,35,25,80,183,95,196,64,45,161,114,47,201,186,238]);function isUint8Array(t){return t instanceof Uint8Array}function cmpBN32(t,e){for(let n=0;n<32;++n)if(t[n]!==e[n])return t[n]<e[n]?-1:1;return 0}function isZero(t){return cmpBN32(t,BN32_ZERO)===0}function isTweak(t){return!(!(t instanceof Uint8Array)||t.length!==TWEAK_SIZE||cmpBN32(t,BN32_N)>=0)}function isSignature(t){return t instanceof Uint8Array&&t.length===64&&cmpBN32(t.subarray(0,32),BN32_N)<0&&cmpBN32(t.subarray(32,64),BN32_N)<0}function isSigrLessThanPMinusN(t){return isUint8Array(t)&&t.length===64&&cmpBN32(t.subarray(0,32),BN32_P_MINUS_N)<0}function isSignatureNonzeroRS(t){return!(isZero(t.subarray(0,32))||isZero(t.subarray(32,64)))}function isHash(t){return t instanceof Uint8Array&&t.length===HASH_SIZE}function isExtraData(t){return t===void 0||t instanceof Uint8Array&&t.length===EXTRA_DATA_SIZE}function hexToNumber$1(t){if(typeof t!="string")throw new TypeError("hexToNumber: expected string, got "+typeof t);return BigInt(`0x${t}`)}function bytesToNumber(t){return hexToNumber$1(necc__namespace.utils.bytesToHex(t))}function normalizeScalar(t){let e;if(typeof t=="bigint")e=t;else if(typeof t=="number"&&Number.isSafeInteger(t)&&t>=0)e=BigInt(t);else if(typeof t=="string"){if(t.length!==64)throw new Error("Expected 32 bytes of private scalar");e=hexToNumber$1(t)}else if(t instanceof Uint8Array){if(t.length!==32)throw new Error("Expected 32 bytes of private scalar");e=bytesToNumber(t)}else throw new TypeError("Expected valid private scalar");if(e<0)throw new Error("Expected private scalar >= 0");return e}const _privateAdd=(t,e)=>{const n=normalizePrivateKey(t),o=normalizeScalar(e),c=necc__namespace.utils._bigintTo32Bytes(necc__namespace.utils.mod(n+o,necc__namespace.CURVE.n));return necc__namespace.utils.isValidPrivateKey(c)?c:null},_privateSub=(t,e)=>{const n=normalizePrivateKey(t),o=normalizeScalar(e),c=necc__namespace.utils._bigintTo32Bytes(necc__namespace.utils.mod(n-o,necc__namespace.CURVE.n));return necc__namespace.utils.isValidPrivateKey(c)?c:null},_privateNegate=t=>{const e=normalizePrivateKey(t),n=necc__namespace.utils._bigintTo32Bytes(necc__namespace.CURVE.n-e);return necc__namespace.utils.isValidPrivateKey(n)?n:null},_pointAddScalar=(t,e,n)=>{const o=necc__namespace.Point.fromHex(t),c=normalizeScalar(e),a=necc__namespace.Point.BASE.multiplyAndAddUnsafe(o,c,BigInt(1));if(!a)throw new Error("Tweaked point at infinity");return a.toRawBytes(n)},_pointMultiply=(t,e,n)=>{const o=necc__namespace.Point.fromHex(t),c=typeof e=="string"?e:necc__namespace.utils.bytesToHex(e),a=BigInt(`0x${c}`);return o.multiply(a).toRawBytes(n)};function assumeCompression(t,e){return t===void 0?e!==void 0?isPointCompressed(e):!0:!!t}function throwToNull(t){try{return t()}catch{return null}}function _isPoint(t,e){if(t.length===32!==e)return!1;try{return!!necc__namespace.Point.fromHex(t)}catch{return!1}}function isPoint(t){return _isPoint(t,!1)}function isPointCompressed(t){return _isPoint(t,!1)&&t.length===33}function isPrivate(t){return necc__namespace.utils.isValidPrivateKey(t)}function isXOnlyPoint(t){return _isPoint(t,!0)}function xOnlyPointAddTweak(t,e){if(!isXOnlyPoint(t))throw new Error(THROW_BAD_POINT);if(!isTweak(e))throw new Error(THROW_BAD_TWEAK);return throwToNull(()=>{const n=_pointAddScalar(t,e,!0);return{parity:n[0]%2===1?1:0,xOnlyPubkey:n.slice(1)}})}function xOnlyPointFromPoint(t){if(!isPoint(t))throw new Error(THROW_BAD_POINT);return t.slice(1,33)}function pointFromScalar(t,e){if(!isPrivate(t))throw new Error(THROW_BAD_PRIVATE);return throwToNull(()=>necc__namespace.getPublicKey(t,assumeCompression(e)))}function xOnlyPointFromScalar(t){if(!isPrivate(t))throw new Error(THROW_BAD_PRIVATE);return xOnlyPointFromPoint(pointFromScalar(t))}function pointCompress(t,e){if(!isPoint(t))throw new Error(THROW_BAD_POINT);return necc__namespace.Point.fromHex(t).toRawBytes(assumeCompression(e,t))}function pointMultiply(t,e,n){if(!isPoint(t))throw new Error(THROW_BAD_POINT);if(!isTweak(e))throw new Error(THROW_BAD_TWEAK);return throwToNull(()=>_pointMultiply(t,e,assumeCompression(n,t)))}function pointAdd(t,e,n){if(!isPoint(t)||!isPoint(e))throw new Error(THROW_BAD_POINT);return throwToNull(()=>{const o=necc__namespace.Point.fromHex(t),c=necc__namespace.Point.fromHex(e);return o.equals(c.negate())?null:o.add(c).toRawBytes(assumeCompression(n,t))})}function pointAddScalar(t,e,n){if(!isPoint(t))throw new Error(THROW_BAD_POINT);if(!isTweak(e))throw new Error(THROW_BAD_TWEAK);return throwToNull(()=>_pointAddScalar(t,e,assumeCompression(n,t)))}function privateAdd(t,e){if(isPrivate(t)===!1)throw new Error(THROW_BAD_PRIVATE);if(isTweak(e)===!1)throw new Error(THROW_BAD_TWEAK);return throwToNull(()=>_privateAdd(t,e))}function privateSub(t,e){if(isPrivate(t)===!1)throw new Error(THROW_BAD_PRIVATE);if(isTweak(e)===!1)throw new Error(THROW_BAD_TWEAK);return throwToNull(()=>_privateSub(t,e))}function privateNegate(t){if(isPrivate(t)===!1)throw new Error(THROW_BAD_PRIVATE);return _privateNegate(t)}function sign$1(t,e,n){if(!isPrivate(e))throw new Error(THROW_BAD_PRIVATE);if(!isHash(t))throw new Error(THROW_BAD_SCALAR);if(!isExtraData(n))throw new Error(THROW_BAD_EXTRA_DATA);return necc__namespace.signSync(t,e,{der:!1,extraEntropy:n})}function signRecoverable(t,e,n){if(!isPrivate(e))throw new Error(THROW_BAD_PRIVATE);if(!isHash(t))throw new Error(THROW_BAD_SCALAR);if(!isExtraData(n))throw new Error(THROW_BAD_EXTRA_DATA);const[o,c]=necc__namespace.signSync(t,e,{der:!1,extraEntropy:n,recovered:!0});return{signature:o,recoveryId:c}}function signSchnorr(t,e,n=Buffer$1$1.alloc(32,0)){if(!isPrivate(e))throw new Error(THROW_BAD_PRIVATE);if(!isHash(t))throw new Error(THROW_BAD_SCALAR);if(!isExtraData(n))throw new Error(THROW_BAD_EXTRA_DATA);return necc__namespace.schnorr.signSync(t,e,n)}function recover(t,e,n,o){if(!isHash(t))throw new Error(THROW_BAD_HASH);if(!isSignature(e)||!isSignatureNonzeroRS(e))throw new Error(THROW_BAD_SIGNATURE);if(n&2&&!isSigrLessThanPMinusN(e))throw new Error(THROW_BAD_RECOVERY_ID);if(!isXOnlyPoint(e.subarray(0,32)))throw new Error(THROW_BAD_SIGNATURE);return necc__namespace.recoverPublicKey(t,e,n,assumeCompression(o))}function verify$1(t,e,n,o){if(!isPoint(e))throw new Error(THROW_BAD_POINT);if(!isSignature(n))throw new Error(THROW_BAD_SIGNATURE);if(!isHash(t))throw new Error(THROW_BAD_SCALAR);return necc__namespace.verify(n,t,e,{strict:o})}function verifySchnorr(t,e,n){if(!isXOnlyPoint(e))throw new Error(THROW_BAD_POINT);if(!isSignature(n))throw new Error(THROW_BAD_SIGNATURE);if(!isHash(t))throw new Error(THROW_BAD_SCALAR);return necc__namespace.schnorr.verifySync(n,t,e)}dist$1.isPoint=isPoint;dist$1.isPointCompressed=isPointCompressed;dist$1.isPrivate=isPrivate;dist$1.isXOnlyPoint=isXOnlyPoint;dist$1.pointAdd=pointAdd;dist$1.pointAddScalar=pointAddScalar;dist$1.pointCompress=pointCompress;dist$1.pointFromScalar=pointFromScalar;dist$1.pointMultiply=pointMultiply;dist$1.privateAdd=privateAdd;dist$1.privateNegate=privateNegate;dist$1.privateSub=privateSub;dist$1.recover=recover;dist$1.sign=sign$1;dist$1.signRecoverable=signRecoverable;dist$1.signSchnorr=signSchnorr;dist$1.verify=verify$1;dist$1.verifySchnorr=verifySchnorr;dist$1.xOnlyPointAddTweak=xOnlyPointAddTweak;dist$1.xOnlyPointFromPoint=xOnlyPointFromPoint;dist$1.xOnlyPointFromScalar=xOnlyPointFromScalar;const generateDID$1=t=>`did:ethr:${t}`;class BTCWallet extends Web3Wallet{chainId;_mnemonic;constructor(e,n=src$3.networks.bitcoin,o="m/44'/0'/0'/0/0"){if(super(),!e)throw new Error("Mnemonic is required to generate wallet");const c=src$5.BIP32Factory(dist$1),a=mnemonicToSeedSync_1(e),l=o,{privateKey:b,publicKey:v}=c.fromSeed(a).derivePath(l);if(!b||!v)throw new Error("Failed to generate key pair");const{address:A}=src$3.payments.p2pkh({pubkey:v,network:n});if(!A)throw new Error("Failed to generate wallet");this.address=A,this.publicKey=v.toString("hex"),this._privateKey=b.toString("hex"),this.chainId=n.wif,this._mnemonic=e}sendTransaction(e){throw new Error("Method not implemented.")}signTransaction(e){throw new Error("Method not implemented.")}async signMessage(e){const n=Buffer$1$1.from(e,"utf-8"),o=src$3.crypto.sha256(n),a=this._generateKeyPair().sign(o);return Logger$1.log(`Signature: ${a.toString("base64")}
`),a.toString("base64")}verifySignature(e,n){if(!this.address)throw new Error("Address is required to verify signature");const o=Buffer$1$1.from(e,"utf-8"),c=src$3.crypto.sha256(o);return this._generateKeyPair().verify(c,Buffer$1$1.from(n,"base64"))}async switchNetwork(e){throw new Error("Method not implemented.")}async getSigner(){throw new Error("Method not implemented.")}_generateKeyPair(){if(!this._mnemonic)throw new Error("Mnemonic  is required to sign message");const e=src$5.BIP32Factory(dist$1),n=mnemonicToSeedSync_1(this._mnemonic),c=e.fromSeed(n).derivePath("m/44'/0'/0'/0/0");if(!c)throw new Error("Failed to generate key pair");return c}}const generateWalletFromMnemonic$1=async t=>{const{mnemonic:e=generateMnemonic_1(),derivationPath:n,network:o}=t;if(n&&n?.split("/")[1]!=="44'")throw new Error("Invalid derivation path ");return new BTCWallet(e,o,n)},btcWallet=Object.freeze({connectWithExternalWallet:async()=>{throw new Error("Method not implemented.")},generateWalletFromMnemonic:generateWalletFromMnemonic$1,generateDID:generateDID$1});const _0n$4=BigInt(0),_1n$6=BigInt(1),_2n$4=BigInt(2);function isBytes(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function abytes(t){if(!isBytes(t))throw new Error("Uint8Array expected")}const hexes=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function bytesToHex(t){abytes(t);let e="";for(let n=0;n<t.length;n++)e+=hexes[t[n]];return e}function numberToHexUnpadded(t){const e=t.toString(16);return e.length&1?`0${e}`:e}function hexToNumber(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}const asciis={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function asciiToBase16(t){if(t>=asciis._0&&t<=asciis._9)return t-asciis._0;if(t>=asciis._A&&t<=asciis._F)return t-(asciis._A-10);if(t>=asciis._a&&t<=asciis._f)return t-(asciis._a-10)}function hexToBytes(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const o=new Uint8Array(n);for(let c=0,a=0;c<n;c++,a+=2){const l=asciiToBase16(t.charCodeAt(a)),b=asciiToBase16(t.charCodeAt(a+1));if(l===void 0||b===void 0){const v=t[a]+t[a+1];throw new Error('hex string expected, got non-hex character "'+v+'" at index '+a)}o[c]=l*16+b}return o}function bytesToNumberBE(t){return hexToNumber(bytesToHex(t))}function bytesToNumberLE(t){return abytes(t),hexToNumber(bytesToHex(Uint8Array.from(t).reverse()))}function numberToBytesBE(t,e){return hexToBytes(t.toString(16).padStart(e*2,"0"))}function numberToBytesLE(t,e){return numberToBytesBE(t,e).reverse()}function numberToVarBytesBE(t){return hexToBytes(numberToHexUnpadded(t))}function ensureBytes(t,e,n){let o;if(typeof e=="string")try{o=hexToBytes(e)}catch(a){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${a}`)}else if(isBytes(e))o=Uint8Array.from(e);else throw new Error(`${t} must be hex string or Uint8Array`);const c=o.length;if(typeof n=="number"&&c!==n)throw new Error(`${t} expected ${n} bytes, got ${c}`);return o}function concatBytes(...t){let e=0;for(let o=0;o<t.length;o++){const c=t[o];abytes(c),e+=c.length}const n=new Uint8Array(e);for(let o=0,c=0;o<t.length;o++){const a=t[o];n.set(a,c),c+=a.length}return n}function equalBytes(t,e){if(t.length!==e.length)return!1;let n=0;for(let o=0;o<t.length;o++)n|=t[o]^e[o];return n===0}function utf8ToBytes(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function bitLen(t){let e;for(e=0;t>_0n$4;t>>=_1n$6,e+=1);return e}function bitGet(t,e){return t>>BigInt(e)&_1n$6}function bitSet(t,e,n){return t|(n?_1n$6:_0n$4)<<BigInt(e)}const bitMask=t=>(_2n$4<<BigInt(t-1))-_1n$6,u8n=t=>new Uint8Array(t),u8fr=t=>Uint8Array.from(t);function createHmacDrbg(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let o=u8n(t),c=u8n(t),a=0;const l=()=>{o.fill(1),c.fill(0),a=0},b=(...M)=>n(c,o,...M),v=(M=u8n())=>{c=b(u8fr([0]),M),o=b(),M.length!==0&&(c=b(u8fr([1]),M),o=b())},A=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let M=0;const B=[];for(;M<e;){o=b();const P=o.slice();B.push(P),M+=o.length}return concatBytes(...B)};return(M,B)=>{l(),v(M);let P;for(;!(P=B(A()));)v();return l(),P}}const validatorFns={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||isBytes(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function validateObject(t,e,n={}){const o=(c,a,l)=>{const b=validatorFns[a];if(typeof b!="function")throw new Error(`Invalid validator "${a}", expected function`);const v=t[c];if(!(l&&v===void 0)&&!b(v,t))throw new Error(`Invalid param ${String(c)}=${v} (${typeof v}), expected ${a}`)};for(const[c,a]of Object.entries(e))o(c,a,!1);for(const[c,a]of Object.entries(n))o(c,a,!0);return t}const ut=Object.freeze(Object.defineProperty({__proto__:null,abytes,bitGet,bitLen,bitMask,bitSet,bytesToHex,bytesToNumberBE,bytesToNumberLE,concatBytes,createHmacDrbg,ensureBytes,equalBytes,hexToBytes,hexToNumber,isBytes,numberToBytesBE,numberToBytesLE,numberToHexUnpadded,numberToVarBytesBE,utf8ToBytes,validateObject},Symbol.toStringTag,{value:"Module"}));const _0n$3=BigInt(0),_1n$5=BigInt(1),_2n$3=BigInt(2),_3n$1=BigInt(3),_4n=BigInt(4),_5n$1=BigInt(5),_8n$1=BigInt(8);BigInt(9);BigInt(16);function mod(t,e){const n=t%e;return n>=_0n$3?n:e+n}function pow(t,e,n){if(n<=_0n$3||e<_0n$3)throw new Error("Expected power/modulo > 0");if(n===_1n$5)return _0n$3;let o=_1n$5;for(;e>_0n$3;)e&_1n$5&&(o=o*t%n),t=t*t%n,e>>=_1n$5;return o}function pow2(t,e,n){let o=t;for(;e-- >_0n$3;)o*=o,o%=n;return o}function invert(t,e){if(t===_0n$3||e<=_0n$3)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let n=mod(t,e),o=e,c=_0n$3,a=_1n$5;for(;n!==_0n$3;){const b=o/n,v=o%n,A=c-a*b;o=n,n=v,c=a,a=A}if(o!==_1n$5)throw new Error("invert: does not exist");return mod(c,e)}function tonelliShanks(t){const e=(t-_1n$5)/_2n$3;let n,o,c;for(n=t-_1n$5,o=0;n%_2n$3===_0n$3;n/=_2n$3,o++);for(c=_2n$3;c<t&&pow(c,e,t)!==t-_1n$5;c++);if(o===1){const l=(t+_1n$5)/_4n;return function(v,A){const S=v.pow(A,l);if(!v.eql(v.sqr(S),A))throw new Error("Cannot find square root");return S}}const a=(n+_1n$5)/_2n$3;return function(b,v){if(b.pow(v,e)===b.neg(b.ONE))throw new Error("Cannot find square root");let A=o,S=b.pow(b.mul(b.ONE,c),n),M=b.pow(v,a),B=b.pow(v,n);for(;!b.eql(B,b.ONE);){if(b.eql(B,b.ZERO))return b.ZERO;let P=1;for(let F=b.sqr(B);P<A&&!b.eql(F,b.ONE);P++)F=b.sqr(F);const L=b.pow(S,_1n$5<<BigInt(A-P-1));S=b.sqr(L),M=b.mul(M,L),B=b.mul(B,S),A=P}return M}}function FpSqrt(t){if(t%_4n===_3n$1){const e=(t+_1n$5)/_4n;return function(o,c){const a=o.pow(c,e);if(!o.eql(o.sqr(a),c))throw new Error("Cannot find square root");return a}}if(t%_8n$1===_5n$1){const e=(t-_5n$1)/_8n$1;return function(o,c){const a=o.mul(c,_2n$3),l=o.pow(a,e),b=o.mul(c,l),v=o.mul(o.mul(b,_2n$3),l),A=o.mul(b,o.sub(v,o.ONE));if(!o.eql(o.sqr(A),c))throw new Error("Cannot find square root");return A}}return tonelliShanks(t)}const isNegativeLE=(t,e)=>(mod(t,e)&_1n$5)===_1n$5,FIELD_FIELDS=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function validateField(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=FIELD_FIELDS.reduce((o,c)=>(o[c]="function",o),e);return validateObject(t,n)}function FpPow(t,e,n){if(n<_0n$3)throw new Error("Expected power > 0");if(n===_0n$3)return t.ONE;if(n===_1n$5)return e;let o=t.ONE,c=e;for(;n>_0n$3;)n&_1n$5&&(o=t.mul(o,c)),c=t.sqr(c),n>>=_1n$5;return o}function FpInvertBatch(t,e){const n=new Array(e.length),o=e.reduce((a,l,b)=>t.is0(l)?a:(n[b]=a,t.mul(a,l)),t.ONE),c=t.inv(o);return e.reduceRight((a,l,b)=>t.is0(l)?a:(n[b]=t.mul(a,n[b]),t.mul(a,l)),c),n}function nLength(t,e){const n=e!==void 0?e:t.toString(2).length,o=Math.ceil(n/8);return{nBitLength:n,nByteLength:o}}function Field(t,e,n=!1,o={}){if(t<=_0n$3)throw new Error(`Expected Field ORDER > 0, got ${t}`);const{nBitLength:c,nByteLength:a}=nLength(t,e);if(a>2048)throw new Error("Field lengths over 2048 bytes are not supported");const l=FpSqrt(t),b=Object.freeze({ORDER:t,BITS:c,BYTES:a,MASK:bitMask(c),ZERO:_0n$3,ONE:_1n$5,create:v=>mod(v,t),isValid:v=>{if(typeof v!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof v}`);return _0n$3<=v&&v<t},is0:v=>v===_0n$3,isOdd:v=>(v&_1n$5)===_1n$5,neg:v=>mod(-v,t),eql:(v,A)=>v===A,sqr:v=>mod(v*v,t),add:(v,A)=>mod(v+A,t),sub:(v,A)=>mod(v-A,t),mul:(v,A)=>mod(v*A,t),pow:(v,A)=>FpPow(b,v,A),div:(v,A)=>mod(v*invert(A,t),t),sqrN:v=>v*v,addN:(v,A)=>v+A,subN:(v,A)=>v-A,mulN:(v,A)=>v*A,inv:v=>invert(v,t),sqrt:o.sqrt||(v=>l(b,v)),invertBatch:v=>FpInvertBatch(b,v),cmov:(v,A,S)=>S?A:v,toBytes:v=>n?numberToBytesLE(v,a):numberToBytesBE(v,a),fromBytes:v=>{if(v.length!==a)throw new Error(`Fp.fromBytes: expected ${a}, got ${v.length}`);return n?bytesToNumberLE(v):bytesToNumberBE(v)}});return Object.freeze(b)}function FpSqrtEven(t,e){if(!t.isOdd)throw new Error("Field doesn't have isOdd");const n=t.sqrt(e);return t.isOdd(n)?t.neg(n):n}function getFieldBytesLength(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function getMinHashLength(t){const e=getFieldBytesLength(t);return e+Math.ceil(e/2)}function mapHashToField(t,e,n=!1){const o=t.length,c=getFieldBytesLength(e),a=getMinHashLength(e);if(o<16||o<a||o>1024)throw new Error(`expected ${a}-1024 bytes of input, got ${o}`);const l=n?bytesToNumberBE(t):bytesToNumberLE(t),b=mod(l,e-_1n$5)+_1n$5;return n?numberToBytesLE(b,c):numberToBytesBE(b,c)}const _0n$2=BigInt(0),_1n$4=BigInt(1);function wNAF(t,e){const n=(c,a)=>{const l=a.negate();return c?l:a},o=c=>{const a=Math.ceil(e/c)+1,l=2**(c-1);return{windows:a,windowSize:l}};return{constTimeNegate:n,unsafeLadder(c,a){let l=t.ZERO,b=c;for(;a>_0n$2;)a&_1n$4&&(l=l.add(b)),b=b.double(),a>>=_1n$4;return l},precomputeWindow(c,a){const{windows:l,windowSize:b}=o(a),v=[];let A=c,S=A;for(let M=0;M<l;M++){S=A,v.push(S);for(let B=1;B<b;B++)S=S.add(A),v.push(S);A=S.double()}return v},wNAF(c,a,l){const{windows:b,windowSize:v}=o(c);let A=t.ZERO,S=t.BASE;const M=BigInt(2**c-1),B=2**c,P=BigInt(c);for(let L=0;L<b;L++){const F=L*v;let U=Number(l&M);l>>=P,U>v&&(U-=B,l+=_1n$4);const q=F,X=F+Math.abs(U)-1,ee=L%2!==0,te=U<0;U===0?S=S.add(n(ee,a[q])):A=A.add(n(te,a[X]))}return{p:A,f:S}},wNAFCached(c,a,l,b){const v=c._WINDOW_SIZE||1;let A=a.get(c);return A||(A=this.precomputeWindow(c,v),v!==1&&a.set(c,b(A))),this.wNAF(v,A,l)}}}function validateBasic(t){return validateField(t.Fp),validateObject(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...nLength(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}const _0n$1=BigInt(0),_1n$3=BigInt(1),_2n$2=BigInt(2),_8n=BigInt(8),VERIFY_DEFAULT={zip215:!0};function validateOpts$1(t){const e=validateBasic(t);return validateObject(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function twistedEdwards(t){const e=validateOpts$1(t),{Fp:n,n:o,prehash:c,hash:a,randomBytes:l,nByteLength:b,h:v}=e,A=_2n$2<<BigInt(b*8)-_1n$3,S=n.create,M=e.uvRatio||((k,_)=>{try{return{isValid:!0,value:n.sqrt(k*n.inv(_))}}catch{return{isValid:!1,value:_0n$1}}}),B=e.adjustScalarBytes||(k=>k),P=e.domain||((k,_,d)=>{if(_.length||d)throw new Error("Contexts/pre-hash are not supported");return k}),L=k=>typeof k=="bigint"&&_0n$1<k,F=(k,_)=>L(k)&&L(_)&&k<_,U=k=>k===_0n$1||F(k,A);function q(k,_){if(F(k,_))return k;throw new Error(`Expected valid scalar < ${_}, got ${typeof k} ${k}`)}function X(k){return k===_0n$1?k:q(k,o)}const ee=new Map;function te(k){if(!(k instanceof ce))throw new Error("ExtendedPoint expected")}class ce{constructor(_,d,w,I){if(this.ex=_,this.ey=d,this.ez=w,this.et=I,!U(_))throw new Error("x required");if(!U(d))throw new Error("y required");if(!U(w))throw new Error("z required");if(!U(I))throw new Error("t required")}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(_){if(_ instanceof ce)throw new Error("extended point not allowed");const{x:d,y:w}=_||{};if(!U(d)||!U(w))throw new Error("invalid affine point");return new ce(d,w,_1n$3,S(d*w))}static normalizeZ(_){const d=n.invertBatch(_.map(w=>w.ez));return _.map((w,I)=>w.toAffine(d[I])).map(ce.fromAffine)}_setWindowSize(_){this._WINDOW_SIZE=_,ee.delete(this)}assertValidity(){const{a:_,d}=e;if(this.is0())throw new Error("bad point: ZERO");const{ex:w,ey:I,ez:C,et:V}=this,O=S(w*w),j=S(I*I),D=S(C*C),Q=S(D*D),oe=S(O*_),de=S(D*S(oe+j)),Z=S(Q+S(d*S(O*j)));if(de!==Z)throw new Error("bad point: equation left != right (1)");const H=S(w*I),ge=S(C*V);if(H!==ge)throw new Error("bad point: equation left != right (2)")}equals(_){te(_);const{ex:d,ey:w,ez:I}=this,{ex:C,ey:V,ez:O}=_,j=S(d*O),D=S(C*I),Q=S(w*O),oe=S(V*I);return j===D&&Q===oe}is0(){return this.equals(ce.ZERO)}negate(){return new ce(S(-this.ex),this.ey,this.ez,S(-this.et))}double(){const{a:_}=e,{ex:d,ey:w,ez:I}=this,C=S(d*d),V=S(w*w),O=S(_2n$2*S(I*I)),j=S(_*C),D=d+w,Q=S(S(D*D)-C-V),oe=j+V,de=oe-O,Z=j-V,H=S(Q*de),ge=S(oe*Z),Me=S(Q*Z),ke=S(de*oe);return new ce(H,ge,ke,Me)}add(_){te(_);const{a:d,d:w}=e,{ex:I,ey:C,ez:V,et:O}=this,{ex:j,ey:D,ez:Q,et:oe}=_;if(d===BigInt(-1)){const Ye=S((C-I)*(D+j)),St=S((C+I)*(D-j)),De=S(St-Ye);if(De===_0n$1)return this.double();const qe=S(V*_2n$2*oe),At=S(O*_2n$2*Q),ze=At+qe,Ge=St+Ye,kt=At-qe,se=S(ze*De),J=S(Ge*kt),re=S(ze*kt),he=S(De*Ge);return new ce(se,J,he,re)}const de=S(I*j),Z=S(C*D),H=S(O*w*oe),ge=S(V*Q),Me=S((I+C)*(j+D)-de-Z),ke=ge-H,Ie=ge+H,et=S(Z-d*de),Fe=S(Me*ke),$e=S(Ie*et),$t=S(Me*et),He=S(ke*Ie);return new ce(Fe,$e,He,$t)}subtract(_){return this.add(_.negate())}wNAF(_){return we.wNAFCached(this,ee,_,ce.normalizeZ)}multiply(_){const{p:d,f:w}=this.wNAF(q(_,o));return ce.normalizeZ([d,w])[0]}multiplyUnsafe(_){let d=X(_);return d===_0n$1?Ae:this.equals(Ae)||d===_1n$3?this:this.equals(ue)?this.wNAF(d).p:we.unsafeLadder(this,d)}isSmallOrder(){return this.multiplyUnsafe(v).is0()}isTorsionFree(){return we.unsafeLadder(this,o).is0()}toAffine(_){const{ex:d,ey:w,ez:I}=this,C=this.is0();_==null&&(_=C?_8n:n.inv(I));const V=S(d*_),O=S(w*_),j=S(I*_);if(C)return{x:_0n$1,y:_1n$3};if(j!==_1n$3)throw new Error("invZ was invalid");return{x:V,y:O}}clearCofactor(){const{h:_}=e;return _===_1n$3?this:this.multiplyUnsafe(_)}static fromHex(_,d=!1){const{d:w,a:I}=e,C=n.BYTES;_=ensureBytes("pointHex",_,C);const V=_.slice(),O=_[C-1];V[C-1]=O&-129;const j=bytesToNumberLE(V);j===_0n$1||(d?q(j,A):q(j,n.ORDER));const D=S(j*j),Q=S(D-_1n$3),oe=S(w*D-I);let{isValid:de,value:Z}=M(Q,oe);if(!de)throw new Error("Point.fromHex: invalid y coordinate");const H=(Z&_1n$3)===_1n$3,ge=(O&128)!==0;if(!d&&Z===_0n$1&&ge)throw new Error("Point.fromHex: x=0 and x_0=1");return ge!==H&&(Z=S(-Z)),ce.fromAffine({x:Z,y:j})}static fromPrivateKey(_){return T(_).point}toRawBytes(){const{x:_,y:d}=this.toAffine(),w=numberToBytesLE(d,n.BYTES);return w[w.length-1]|=_&_1n$3?128:0,w}toHex(){return bytesToHex(this.toRawBytes())}}ce.BASE=new ce(e.Gx,e.Gy,_1n$3,S(e.Gx*e.Gy)),ce.ZERO=new ce(_0n$1,_1n$3,_1n$3,_0n$1);const{BASE:ue,ZERO:Ae}=ce,we=wNAF(ce,b*8);function pe(k){return mod(k,o)}function Ce(k){return pe(bytesToNumberLE(k))}function T(k){const _=b;k=ensureBytes("private key",k,_);const d=ensureBytes("hashed private key",a(k),2*_),w=B(d.slice(0,_)),I=d.slice(_,2*_),C=Ce(w),V=ue.multiply(C),O=V.toRawBytes();return{head:w,prefix:I,scalar:C,point:V,pointBytes:O}}function u(k){return T(k).pointBytes}function p(k=new Uint8Array,..._){const d=concatBytes(..._);return Ce(a(P(d,ensureBytes("context",k),!!c)))}function m(k,_,d={}){k=ensureBytes("message",k),c&&(k=c(k));const{prefix:w,scalar:I,pointBytes:C}=T(_),V=p(d.context,w,k),O=ue.multiply(V).toRawBytes(),j=p(d.context,O,C,k),D=pe(V+j*I);X(D);const Q=concatBytes(O,numberToBytesLE(D,n.BYTES));return ensureBytes("result",Q,b*2)}const y=VERIFY_DEFAULT;function E(k,_,d,w=y){const{context:I,zip215:C}=w,V=n.BYTES;k=ensureBytes("signature",k,2*V),_=ensureBytes("message",_),c&&(_=c(_));const O=bytesToNumberLE(k.slice(V,2*V));let j,D,Q;try{j=ce.fromHex(d,C),D=ce.fromHex(k.slice(0,V),C),Q=ue.multiplyUnsafe(O)}catch{return!1}if(!C&&j.isSmallOrder())return!1;const oe=p(I,D.toRawBytes(),j.toRawBytes(),_);return D.add(j.multiplyUnsafe(oe)).subtract(Q).clearCofactor().equals(ce.ZERO)}return ue._setWindowSize(8),{CURVE:e,getPublicKey:u,sign:m,verify:E,ExtendedPoint:ce,utils:{getExtendedPublicKey:T,randomPrivateKey:()=>l(n.BYTES),precompute(k=8,_=ce.BASE){return _._setWindowSize(k),_.multiply(BigInt(3)),_}}}}const ED25519_P=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),ED25519_SQRT_M1=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const _1n$2=BigInt(1),_2n$1=BigInt(2),_5n=BigInt(5),_10n=BigInt(10),_20n=BigInt(20),_40n=BigInt(40),_80n=BigInt(80);function ed25519_pow_2_252_3(t){const e=ED25519_P,o=t*t%e*t%e,c=pow2(o,_2n$1,e)*o%e,a=pow2(c,_1n$2,e)*t%e,l=pow2(a,_5n,e)*a%e,b=pow2(l,_10n,e)*l%e,v=pow2(b,_20n,e)*b%e,A=pow2(v,_40n,e)*v%e,S=pow2(A,_80n,e)*A%e,M=pow2(S,_80n,e)*A%e,B=pow2(M,_10n,e)*l%e;return{pow_p_5_8:pow2(B,_2n$1,e)*t%e,b2:o}}function adjustScalarBytes(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function uvRatio(t,e){const n=ED25519_P,o=mod(e*e*e,n),c=mod(o*o*e,n),a=ed25519_pow_2_252_3(t*c).pow_p_5_8;let l=mod(t*o*a,n);const b=mod(e*l*l,n),v=l,A=mod(l*ED25519_SQRT_M1,n),S=b===t,M=b===mod(-t,n),B=b===mod(-t*ED25519_SQRT_M1,n);return S&&(l=v),(M||B)&&(l=A),isNegativeLE(l,n)&&(l=mod(-l,n)),{isValid:S||M,value:l}}const Fp$1=Field(ED25519_P,void 0,!0),ed25519Defaults={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:Fp$1,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:sha512_1$2,randomBytes:utils$h.randomBytes,adjustScalarBytes,uvRatio},ed25519=twistedEdwards(ed25519Defaults);function ed25519_domain(t,e,n){if(e.length>255)throw new Error("Context is too big");return utils$h.concatBytes(utils$h.utf8ToBytes("SigEd25519 no Ed25519 collisions"),new Uint8Array([n?1:0,e.length]),e,t)}({...ed25519Defaults});({...ed25519Defaults});const ELL2_C1=(Fp$1.ORDER+BigInt(3))/BigInt(8);Fp$1.pow(_2n$1,ELL2_C1);Fp$1.sqrt(Fp$1.neg(Fp$1.ONE));(Fp$1.ORDER-BigInt(5))/BigInt(8);BigInt(486662);FpSqrtEven(Fp$1,Fp$1.neg(BigInt(486664)));BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235");BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578");BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838");BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952");BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");var _Buffer$1=safeBufferExports$2.Buffer;function base$1(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),n=0;n<e.length;n++)e[n]=255;for(var o=0;o<t.length;o++){var c=t.charAt(o),a=c.charCodeAt(0);if(e[a]!==255)throw new TypeError(c+" is ambiguous");e[a]=o}var l=t.length,b=t.charAt(0),v=Math.log(l)/Math.log(256),A=Math.log(256)/Math.log(l);function S(P){if((Array.isArray(P)||P instanceof Uint8Array)&&(P=_Buffer$1.from(P)),!_Buffer$1.isBuffer(P))throw new TypeError("Expected Buffer");if(P.length===0)return"";for(var L=0,F=0,U=0,q=P.length;U!==q&&P[U]===0;)U++,L++;for(var X=(q-U)*A+1>>>0,ee=new Uint8Array(X);U!==q;){for(var te=P[U],ce=0,ue=X-1;(te!==0||ce<F)&&ue!==-1;ue--,ce++)te+=256*ee[ue]>>>0,ee[ue]=te%l>>>0,te=te/l>>>0;if(te!==0)throw new Error("Non-zero carry");F=ce,U++}for(var Ae=X-F;Ae!==X&&ee[Ae]===0;)Ae++;for(var we=b.repeat(L);Ae<X;++Ae)we+=t.charAt(ee[Ae]);return we}function M(P){if(typeof P!="string")throw new TypeError("Expected String");if(P.length===0)return _Buffer$1.alloc(0);for(var L=0,F=0,U=0;P[L]===b;)F++,L++;for(var q=(P.length-L)*v+1>>>0,X=new Uint8Array(q);P[L];){var ee=e[P.charCodeAt(L)];if(ee===255)return;for(var te=0,ce=q-1;(ee!==0||te<U)&&ce!==-1;ce--,te++)ee+=l*X[ce]>>>0,X[ce]=ee%256>>>0,ee=ee/256>>>0;if(ee!==0)throw new Error("Non-zero carry");U=te,L++}for(var ue=q-U;ue!==q&&X[ue]===0;)ue++;var Ae=_Buffer$1.allocUnsafe(F+(q-ue));Ae.fill(0,0,F);for(var we=F;ue!==q;)Ae[we++]=X[ue++];return Ae}function B(P){var L=M(P);if(L)return L;throw new Error("Non-base"+l+" character")}return{encode:S,decodeUnsafe:M,decode:B}}var src$1=base$1,basex$1=src$1,ALPHABET$1="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",bs58$1=basex$1(ALPHABET$1);const bs58$2=getDefaultExportFromCjs$1(bs58$1);var lib={},_Buffer=safeBufferExports$2.Buffer;function base(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),n=0;n<e.length;n++)e[n]=255;for(var o=0;o<t.length;o++){var c=t.charAt(o),a=c.charCodeAt(0);if(e[a]!==255)throw new TypeError(c+" is ambiguous");e[a]=o}var l=t.length,b=t.charAt(0),v=Math.log(l)/Math.log(256),A=Math.log(256)/Math.log(l);function S(P){if((Array.isArray(P)||P instanceof Uint8Array)&&(P=_Buffer.from(P)),!_Buffer.isBuffer(P))throw new TypeError("Expected Buffer");if(P.length===0)return"";for(var L=0,F=0,U=0,q=P.length;U!==q&&P[U]===0;)U++,L++;for(var X=(q-U)*A+1>>>0,ee=new Uint8Array(X);U!==q;){for(var te=P[U],ce=0,ue=X-1;(te!==0||ce<F)&&ue!==-1;ue--,ce++)te+=256*ee[ue]>>>0,ee[ue]=te%l>>>0,te=te/l>>>0;if(te!==0)throw new Error("Non-zero carry");F=ce,U++}for(var Ae=X-F;Ae!==X&&ee[Ae]===0;)Ae++;for(var we=b.repeat(L);Ae<X;++Ae)we+=t.charAt(ee[Ae]);return we}function M(P){if(typeof P!="string")throw new TypeError("Expected String");if(P.length===0)return _Buffer.alloc(0);for(var L=0,F=0,U=0;P[L]===b;)F++,L++;for(var q=(P.length-L)*v+1>>>0,X=new Uint8Array(q);P[L];){var ee=e[P.charCodeAt(L)];if(ee===255)return;for(var te=0,ce=q-1;(ee!==0||te<U)&&ce!==-1;ce--,te++)ee+=l*X[ce]>>>0,X[ce]=ee%256>>>0,ee=ee/256>>>0;if(ee!==0)throw new Error("Non-zero carry");U=te,L++}for(var ue=q-U;ue!==q&&X[ue]===0;)ue++;var Ae=_Buffer.allocUnsafe(F+(q-ue));Ae.fill(0,0,F);for(var we=F;ue!==q;)Ae[we++]=X[ue++];return Ae}function B(P){var L=M(P);if(L)return L;throw new Error("Non-base"+l+" character")}return{encode:S,decodeUnsafe:M,decode:B}}var src=base,basex=src,ALPHABET="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",bs58=basex(ALPHABET);function inRange(t,e,n){return e<=t&&t<=n}function ToDictionary(t){if(t===void 0)return{};if(t===Object(t))return t;throw TypeError("Could not convert argument to dictionary")}function stringToCodePoints(t){for(var e=String(t),n=e.length,o=0,c=[];o<n;){var a=e.charCodeAt(o);if(a<55296||a>57343)c.push(a);else if(56320<=a&&a<=57343)c.push(65533);else if(55296<=a&&a<=56319)if(o===n-1)c.push(65533);else{var l=t.charCodeAt(o+1);if(56320<=l&&l<=57343){var b=a&1023,v=l&1023;c.push(65536+(b<<10)+v),o+=1}else c.push(65533)}o+=1}return c}function codePointsToString(t){for(var e="",n=0;n<t.length;++n){var o=t[n];o<=65535?e+=String.fromCharCode(o):(o-=65536,e+=String.fromCharCode((o>>10)+55296,(o&1023)+56320))}return e}var end_of_stream=-1;function Stream(t){this.tokens=[].slice.call(t)}Stream.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():end_of_stream},prepend:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.unshift(e.pop());else this.tokens.unshift(t)},push:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.push(e.shift());else this.tokens.push(t)}};var finished=-1;function decoderError(t,e){if(t)throw TypeError("Decoder error");return e||65533}var DEFAULT_ENCODING="utf-8";function TextDecoder$1(t,e){if(!(this instanceof TextDecoder$1))return new TextDecoder$1(t,e);if(t=t!==void 0?String(t).toLowerCase():DEFAULT_ENCODING,t!==DEFAULT_ENCODING)throw new Error("Encoding not supported. Only utf-8 is supported");e=ToDictionary(e),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!e.fatal,this._ignoreBOM=!!e.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}TextDecoder$1.prototype={decode:function t(e,n){var o;typeof e=="object"&&e instanceof ArrayBuffer?o=new Uint8Array(e):typeof e=="object"&&"buffer"in e&&e.buffer instanceof ArrayBuffer?o=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):o=new Uint8Array(0),n=ToDictionary(n),this._streaming||(this._decoder=new UTF8Decoder({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!n.stream;for(var c=new Stream(o),a=[],l;!c.endOfStream()&&(l=this._decoder.handler(c,c.read()),l!==finished);)l!==null&&(Array.isArray(l)?a.push.apply(a,l):a.push(l));if(!this._streaming){do{if(l=this._decoder.handler(c,c.read()),l===finished)break;l!==null&&(Array.isArray(l)?a.push.apply(a,l):a.push(l))}while(!c.endOfStream());this._decoder=null}return a.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(a[0]===65279?(this._BOMseen=!0,a.shift()):this._BOMseen=!0),codePointsToString(a)}};function TextEncoder$1(t,e){if(!(this instanceof TextEncoder$1))return new TextEncoder$1(t,e);if(t=t!==void 0?String(t).toLowerCase():DEFAULT_ENCODING,t!==DEFAULT_ENCODING)throw new Error("Encoding not supported. Only utf-8 is supported");e=ToDictionary(e),this._streaming=!1,this._encoder=null,this._options={fatal:!!e.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}TextEncoder$1.prototype={encode:function t(e,n){e=e?String(e):"",n=ToDictionary(n),this._streaming||(this._encoder=new UTF8Encoder(this._options)),this._streaming=!!n.stream;for(var o=[],c=new Stream(stringToCodePoints(e)),a;!c.endOfStream()&&(a=this._encoder.handler(c,c.read()),a!==finished);)Array.isArray(a)?o.push.apply(o,a):o.push(a);if(!this._streaming){for(;a=this._encoder.handler(c,c.read()),a!==finished;)Array.isArray(a)?o.push.apply(o,a):o.push(a);this._encoder=null}return new Uint8Array(o)}};function UTF8Decoder(t){var e=t.fatal,n=0,o=0,c=0,a=128,l=191;this.handler=function(b,v){if(v===end_of_stream&&c!==0)return c=0,decoderError(e);if(v===end_of_stream)return finished;if(c===0){if(inRange(v,0,127))return v;if(inRange(v,194,223))c=1,n=v-192;else if(inRange(v,224,239))v===224&&(a=160),v===237&&(l=159),c=2,n=v-224;else if(inRange(v,240,244))v===240&&(a=144),v===244&&(l=143),c=3,n=v-240;else return decoderError(e);return n=n<<6*c,null}if(!inRange(v,a,l))return n=c=o=0,a=128,l=191,b.prepend(v),decoderError(e);if(a=128,l=191,o+=1,n+=v-128<<6*(c-o),o!==c)return null;var A=n;return n=c=o=0,A}}function UTF8Encoder(t){t.fatal,this.handler=function(e,n){if(n===end_of_stream)return finished;if(inRange(n,0,127))return n;var o,c;inRange(n,128,2047)?(o=1,c=192):inRange(n,2048,65535)?(o=2,c=224):inRange(n,65536,1114111)&&(o=3,c=240);for(var a=[(n>>6*o)+c];o>0;){var l=n>>6*(o-1);a.push(128|l&63),o-=1}return a}}const encoding$1=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:TextDecoder$1,TextEncoder:TextEncoder$1},Symbol.toStringTag,{value:"Module"})),require$$2=getAugmentedNamespace(encoding$1);var __createBinding=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(t,e,n,o){o===void 0&&(o=n),Object.defineProperty(t,o,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,o){o===void 0&&(o=n),t[o]=e[n]}),__setModuleDefault=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),__decorate=commonjsGlobal&&commonjsGlobal.__decorate||function(t,e,n,o){var c=arguments.length,a=c<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,n):o,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,e,n,o);else for(var b=t.length-1;b>=0;b--)(l=t[b])&&(a=(c<3?l(a):c>3?l(e,n,a):l(e,n))||a);return c>3&&a&&Object.defineProperty(e,n,a),a},__importStar=commonjsGlobal&&commonjsGlobal.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.hasOwnProperty.call(t,n)&&__createBinding(e,t,n);return __setModuleDefault(e,t),e},__importDefault=commonjsGlobal&&commonjsGlobal.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(lib,"__esModule",{value:!0});var deserializeUnchecked_1=lib.deserializeUnchecked=deserialize_1=lib.deserialize=serialize_1=lib.serialize=lib.BinaryReader=lib.BinaryWriter=lib.BorshError=lib.baseDecode=lib.baseEncode=void 0;const bn_js_1=__importDefault(bnExports$6),bs58_1=__importDefault(bs58),encoding=__importStar(require$$2),ResolvedTextDecoder=typeof TextDecoder!="function"?encoding.TextDecoder:TextDecoder,textDecoder=new ResolvedTextDecoder("utf-8",{fatal:!0});function baseEncode(t){return typeof t=="string"&&(t=Buffer$1$1.from(t,"utf8")),bs58_1.default.encode(Buffer$1$1.from(t))}lib.baseEncode=baseEncode;function baseDecode(t){return Buffer$1$1.from(bs58_1.default.decode(t))}lib.baseDecode=baseDecode;const INITIAL_LENGTH=1024;class BorshError extends Error{constructor(e){super(e),this.fieldPath=[],this.originalMessage=e}addToFieldPath(e){this.fieldPath.splice(0,0,e),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}lib.BorshError=BorshError;class BinaryWriter{constructor(){this.buf=Buffer$1$1.alloc(INITIAL_LENGTH),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer$1$1.concat([this.buf,Buffer$1$1.alloc(INITIAL_LENGTH)]))}writeU8(e){this.maybeResize(),this.buf.writeUInt8(e,this.length),this.length+=1}writeU16(e){this.maybeResize(),this.buf.writeUInt16LE(e,this.length),this.length+=2}writeU32(e){this.maybeResize(),this.buf.writeUInt32LE(e,this.length),this.length+=4}writeU64(e){this.maybeResize(),this.writeBuffer(Buffer$1$1.from(new bn_js_1.default(e).toArray("le",8)))}writeU128(e){this.maybeResize(),this.writeBuffer(Buffer$1$1.from(new bn_js_1.default(e).toArray("le",16)))}writeU256(e){this.maybeResize(),this.writeBuffer(Buffer$1$1.from(new bn_js_1.default(e).toArray("le",32)))}writeU512(e){this.maybeResize(),this.writeBuffer(Buffer$1$1.from(new bn_js_1.default(e).toArray("le",64)))}writeBuffer(e){this.buf=Buffer$1$1.concat([Buffer$1$1.from(this.buf.subarray(0,this.length)),e,Buffer$1$1.alloc(INITIAL_LENGTH)]),this.length+=e.length}writeString(e){this.maybeResize();const n=Buffer$1$1.from(e,"utf8");this.writeU32(n.length),this.writeBuffer(n)}writeFixedArray(e){this.writeBuffer(Buffer$1$1.from(e))}writeArray(e,n){this.maybeResize(),this.writeU32(e.length);for(const o of e)this.maybeResize(),n(o)}toArray(){return this.buf.subarray(0,this.length)}}lib.BinaryWriter=BinaryWriter;function handlingRangeError(t,e,n){const o=n.value;n.value=function(...c){try{return o.apply(this,c)}catch(a){if(a instanceof RangeError){const l=a.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(l)>=0)throw new BorshError("Reached the end of buffer when deserializing")}throw a}}}class BinaryReader{constructor(e){this.buf=e,this.offset=0}readU8(){const e=this.buf.readUInt8(this.offset);return this.offset+=1,e}readU16(){const e=this.buf.readUInt16LE(this.offset);return this.offset+=2,e}readU32(){const e=this.buf.readUInt32LE(this.offset);return this.offset+=4,e}readU64(){const e=this.readBuffer(8);return new bn_js_1.default(e,"le")}readU128(){const e=this.readBuffer(16);return new bn_js_1.default(e,"le")}readU256(){const e=this.readBuffer(32);return new bn_js_1.default(e,"le")}readU512(){const e=this.readBuffer(64);return new bn_js_1.default(e,"le")}readBuffer(e){if(this.offset+e>this.buf.length)throw new BorshError(`Expected buffer length ${e} isn't within bounds`);const n=this.buf.slice(this.offset,this.offset+e);return this.offset+=e,n}readString(){const e=this.readU32(),n=this.readBuffer(e);try{return textDecoder.decode(n)}catch(o){throw new BorshError(`Error decoding UTF-8 string: ${o}`)}}readFixedArray(e){return new Uint8Array(this.readBuffer(e))}readArray(e){const n=this.readU32(),o=Array();for(let c=0;c<n;++c)o.push(e());return o}}__decorate([handlingRangeError],BinaryReader.prototype,"readU8",null);__decorate([handlingRangeError],BinaryReader.prototype,"readU16",null);__decorate([handlingRangeError],BinaryReader.prototype,"readU32",null);__decorate([handlingRangeError],BinaryReader.prototype,"readU64",null);__decorate([handlingRangeError],BinaryReader.prototype,"readU128",null);__decorate([handlingRangeError],BinaryReader.prototype,"readU256",null);__decorate([handlingRangeError],BinaryReader.prototype,"readU512",null);__decorate([handlingRangeError],BinaryReader.prototype,"readString",null);__decorate([handlingRangeError],BinaryReader.prototype,"readFixedArray",null);__decorate([handlingRangeError],BinaryReader.prototype,"readArray",null);lib.BinaryReader=BinaryReader;function capitalizeFirstLetter(t){return t.charAt(0).toUpperCase()+t.slice(1)}function serializeField(t,e,n,o,c){try{if(typeof o=="string")c[`write${capitalizeFirstLetter(o)}`](n);else if(o instanceof Array)if(typeof o[0]=="number"){if(n.length!==o[0])throw new BorshError(`Expecting byte array of length ${o[0]}, but got ${n.length} bytes`);c.writeFixedArray(n)}else if(o.length===2&&typeof o[1]=="number"){if(n.length!==o[1])throw new BorshError(`Expecting byte array of length ${o[1]}, but got ${n.length} bytes`);for(let a=0;a<o[1];a++)serializeField(t,null,n[a],o[0],c)}else c.writeArray(n,a=>{serializeField(t,e,a,o[0],c)});else if(o.kind!==void 0)switch(o.kind){case"option":{n==null?c.writeU8(0):(c.writeU8(1),serializeField(t,e,n,o.type,c));break}case"map":{c.writeU32(n.size),n.forEach((a,l)=>{serializeField(t,e,l,o.key,c),serializeField(t,e,a,o.value,c)});break}default:throw new BorshError(`FieldType ${o} unrecognized`)}else serializeStruct(t,n,c)}catch(a){throw a instanceof BorshError&&a.addToFieldPath(e),a}}function serializeStruct(t,e,n){if(typeof e.borshSerialize=="function"){e.borshSerialize(n);return}const o=t.get(e.constructor);if(!o)throw new BorshError(`Class ${e.constructor.name} is missing in schema`);if(o.kind==="struct")o.fields.map(([c,a])=>{serializeField(t,c,e[c],a,n)});else if(o.kind==="enum"){const c=e[o.field];for(let a=0;a<o.values.length;++a){const[l,b]=o.values[a];if(l===c){n.writeU8(a),serializeField(t,l,e[l],b,n);break}}}else throw new BorshError(`Unexpected schema kind: ${o.kind} for ${e.constructor.name}`)}function serialize(t,e,n=BinaryWriter){const o=new n;return serializeStruct(t,e,o),o.toArray()}var serialize_1=lib.serialize=serialize;function deserializeField(t,e,n,o){try{if(typeof n=="string")return o[`read${capitalizeFirstLetter(n)}`]();if(n instanceof Array){if(typeof n[0]=="number")return o.readFixedArray(n[0]);if(typeof n[1]=="number"){const c=[];for(let a=0;a<n[1];a++)c.push(deserializeField(t,null,n[0],o));return c}else return o.readArray(()=>deserializeField(t,e,n[0],o))}if(n.kind==="option")return o.readU8()?deserializeField(t,e,n.type,o):void 0;if(n.kind==="map"){let c=new Map;const a=o.readU32();for(let l=0;l<a;l++){const b=deserializeField(t,e,n.key,o),v=deserializeField(t,e,n.value,o);c.set(b,v)}return c}return deserializeStruct(t,n,o)}catch(c){throw c instanceof BorshError&&c.addToFieldPath(e),c}}function deserializeStruct(t,e,n){if(typeof e.borshDeserialize=="function")return e.borshDeserialize(n);const o=t.get(e);if(!o)throw new BorshError(`Class ${e.name} is missing in schema`);if(o.kind==="struct"){const c={};for(const[a,l]of t.get(e).fields)c[a]=deserializeField(t,a,l,n);return new e(c)}if(o.kind==="enum"){const c=n.readU8();if(c>=o.values.length)throw new BorshError(`Enum index: ${c} is out of range`);const[a,l]=o.values[c],b=deserializeField(t,a,l,n);return new e({[a]:b})}throw new BorshError(`Unexpected schema kind: ${o.kind} for ${e.constructor.name}`)}function deserialize(t,e,n,o=BinaryReader){const c=new o(n),a=deserializeStruct(t,e,c);if(c.offset<n.length)throw new BorshError(`Unexpected ${n.length-c.offset} bytes after deserialized data`);return a}var deserialize_1=lib.deserialize=deserialize;function deserializeUnchecked(t,e,n,o=BinaryReader){const c=new o(n);return deserializeStruct(t,e,c)}deserializeUnchecked_1=lib.deserializeUnchecked=deserializeUnchecked;var Layout$1={};Object.defineProperty(Layout$1,"__esModule",{value:!0});Layout$1.s16=Layout$1.s8=Layout$1.nu64be=Layout$1.u48be=Layout$1.u40be=Layout$1.u32be=Layout$1.u24be=Layout$1.u16be=nu64=Layout$1.nu64=Layout$1.u48=Layout$1.u40=u32=Layout$1.u32=Layout$1.u24=u16=Layout$1.u16=u8=Layout$1.u8=offset=Layout$1.offset=Layout$1.greedy=Layout$1.Constant=Layout$1.UTF8=Layout$1.CString=Layout$1.Blob=Layout$1.Boolean=Layout$1.BitField=Layout$1.BitStructure=Layout$1.VariantLayout=Layout$1.Union=Layout$1.UnionLayoutDiscriminator=Layout$1.UnionDiscriminator=Layout$1.Structure=Layout$1.Sequence=Layout$1.DoubleBE=Layout$1.Double=Layout$1.FloatBE=Layout$1.Float=Layout$1.NearInt64BE=Layout$1.NearInt64=Layout$1.NearUInt64BE=Layout$1.NearUInt64=Layout$1.IntBE=Layout$1.Int=Layout$1.UIntBE=Layout$1.UInt=Layout$1.OffsetLayout=Layout$1.GreedyCount=Layout$1.ExternalLayout=Layout$1.bindConstructorLayout=Layout$1.nameWithProperty=Layout$1.Layout=Layout$1.uint8ArrayToBuffer=Layout$1.checkUint8Array=void 0;Layout$1.constant=Layout$1.utf8=Layout$1.cstr=blob=Layout$1.blob=Layout$1.unionLayoutDiscriminator=Layout$1.union=seq=Layout$1.seq=Layout$1.bits=struct=Layout$1.struct=Layout$1.f64be=Layout$1.f64=Layout$1.f32be=Layout$1.f32=Layout$1.ns64be=Layout$1.s48be=Layout$1.s40be=Layout$1.s32be=Layout$1.s24be=Layout$1.s16be=ns64=Layout$1.ns64=Layout$1.s48=Layout$1.s40=Layout$1.s32=Layout$1.s24=void 0;const buffer_1=require$$0$3;function checkUint8Array(t){if(!(t instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}Layout$1.checkUint8Array=checkUint8Array;function uint8ArrayToBuffer(t){return checkUint8Array(t),buffer_1.Buffer.from(t.buffer,t.byteOffset,t.length)}Layout$1.uint8ArrayToBuffer=uint8ArrayToBuffer;class Layout{constructor(e,n){if(!Number.isInteger(e))throw new TypeError("span must be an integer");this.span=e,this.property=n}makeDestinationObject(){return{}}getSpan(e,n){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(e){const n=Object.create(this.constructor.prototype);return Object.assign(n,this),n.property=e,n}fromArray(e){}}Layout$1.Layout=Layout;function nameWithProperty(t,e){return e.property?t+"["+e.property+"]":t}Layout$1.nameWithProperty=nameWithProperty;function bindConstructorLayout(t,e){if(typeof t!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(t,"layout_"))throw new Error("Class is already bound to a layout");if(!(e&&e instanceof Layout))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(e,"boundConstructor_"))throw new Error("layout is already bound to a constructor");t.layout_=e,e.boundConstructor_=t,e.makeDestinationObject=()=>new t,Object.defineProperty(t.prototype,"encode",{value(n,o){return e.encode(this,n,o)},writable:!0}),Object.defineProperty(t,"decode",{value(n,o){return e.decode(n,o)},writable:!0})}Layout$1.bindConstructorLayout=bindConstructorLayout;class ExternalLayout extends Layout{isCount(){throw new Error("ExternalLayout is abstract")}}Layout$1.ExternalLayout=ExternalLayout;class GreedyCount extends ExternalLayout{constructor(e=1,n){if(!Number.isInteger(e)||0>=e)throw new TypeError("elementSpan must be a (positive) integer");super(-1,n),this.elementSpan=e}isCount(){return!0}decode(e,n=0){checkUint8Array(e);const o=e.length-n;return Math.floor(o/this.elementSpan)}encode(e,n,o){return 0}}Layout$1.GreedyCount=GreedyCount;class OffsetLayout extends ExternalLayout{constructor(e,n=0,o){if(!(e instanceof Layout))throw new TypeError("layout must be a Layout");if(!Number.isInteger(n))throw new TypeError("offset must be integer or undefined");super(e.span,o||e.property),this.layout=e,this.offset=n}isCount(){return this.layout instanceof UInt||this.layout instanceof UIntBE}decode(e,n=0){return this.layout.decode(e,n+this.offset)}encode(e,n,o=0){return this.layout.encode(e,n,o+this.offset)}}Layout$1.OffsetLayout=OffsetLayout;class UInt extends Layout{constructor(e,n){if(super(e,n),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,n=0){return uint8ArrayToBuffer(e).readUIntLE(n,this.span)}encode(e,n,o=0){return uint8ArrayToBuffer(n).writeUIntLE(e,o,this.span),this.span}}Layout$1.UInt=UInt;class UIntBE extends Layout{constructor(e,n){if(super(e,n),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,n=0){return uint8ArrayToBuffer(e).readUIntBE(n,this.span)}encode(e,n,o=0){return uint8ArrayToBuffer(n).writeUIntBE(e,o,this.span),this.span}}Layout$1.UIntBE=UIntBE;class Int extends Layout{constructor(e,n){if(super(e,n),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,n=0){return uint8ArrayToBuffer(e).readIntLE(n,this.span)}encode(e,n,o=0){return uint8ArrayToBuffer(n).writeIntLE(e,o,this.span),this.span}}Layout$1.Int=Int;class IntBE extends Layout{constructor(e,n){if(super(e,n),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,n=0){return uint8ArrayToBuffer(e).readIntBE(n,this.span)}encode(e,n,o=0){return uint8ArrayToBuffer(n).writeIntBE(e,o,this.span),this.span}}Layout$1.IntBE=IntBE;const V2E32=Math.pow(2,32);function divmodInt64(t){const e=Math.floor(t/V2E32),n=t-e*V2E32;return{hi32:e,lo32:n}}function roundedInt64(t,e){return t*V2E32+e}class NearUInt64 extends Layout{constructor(e){super(8,e)}decode(e,n=0){const o=uint8ArrayToBuffer(e),c=o.readUInt32LE(n),a=o.readUInt32LE(n+4);return roundedInt64(a,c)}encode(e,n,o=0){const c=divmodInt64(e),a=uint8ArrayToBuffer(n);return a.writeUInt32LE(c.lo32,o),a.writeUInt32LE(c.hi32,o+4),8}}Layout$1.NearUInt64=NearUInt64;class NearUInt64BE extends Layout{constructor(e){super(8,e)}decode(e,n=0){const o=uint8ArrayToBuffer(e),c=o.readUInt32BE(n),a=o.readUInt32BE(n+4);return roundedInt64(c,a)}encode(e,n,o=0){const c=divmodInt64(e),a=uint8ArrayToBuffer(n);return a.writeUInt32BE(c.hi32,o),a.writeUInt32BE(c.lo32,o+4),8}}Layout$1.NearUInt64BE=NearUInt64BE;class NearInt64 extends Layout{constructor(e){super(8,e)}decode(e,n=0){const o=uint8ArrayToBuffer(e),c=o.readUInt32LE(n),a=o.readInt32LE(n+4);return roundedInt64(a,c)}encode(e,n,o=0){const c=divmodInt64(e),a=uint8ArrayToBuffer(n);return a.writeUInt32LE(c.lo32,o),a.writeInt32LE(c.hi32,o+4),8}}Layout$1.NearInt64=NearInt64;class NearInt64BE extends Layout{constructor(e){super(8,e)}decode(e,n=0){const o=uint8ArrayToBuffer(e),c=o.readInt32BE(n),a=o.readUInt32BE(n+4);return roundedInt64(c,a)}encode(e,n,o=0){const c=divmodInt64(e),a=uint8ArrayToBuffer(n);return a.writeInt32BE(c.hi32,o),a.writeUInt32BE(c.lo32,o+4),8}}Layout$1.NearInt64BE=NearInt64BE;class Float extends Layout{constructor(e){super(4,e)}decode(e,n=0){return uint8ArrayToBuffer(e).readFloatLE(n)}encode(e,n,o=0){return uint8ArrayToBuffer(n).writeFloatLE(e,o),4}}Layout$1.Float=Float;class FloatBE extends Layout{constructor(e){super(4,e)}decode(e,n=0){return uint8ArrayToBuffer(e).readFloatBE(n)}encode(e,n,o=0){return uint8ArrayToBuffer(n).writeFloatBE(e,o),4}}Layout$1.FloatBE=FloatBE;class Double extends Layout{constructor(e){super(8,e)}decode(e,n=0){return uint8ArrayToBuffer(e).readDoubleLE(n)}encode(e,n,o=0){return uint8ArrayToBuffer(n).writeDoubleLE(e,o),8}}Layout$1.Double=Double;class DoubleBE extends Layout{constructor(e){super(8,e)}decode(e,n=0){return uint8ArrayToBuffer(e).readDoubleBE(n)}encode(e,n,o=0){return uint8ArrayToBuffer(n).writeDoubleBE(e,o),8}}Layout$1.DoubleBE=DoubleBE;class Sequence extends Layout{constructor(e,n,o){if(!(e instanceof Layout))throw new TypeError("elementLayout must be a Layout");if(!(n instanceof ExternalLayout&&n.isCount()||Number.isInteger(n)&&0<=n))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let c=-1;!(n instanceof ExternalLayout)&&0<e.span&&(c=n*e.span),super(c,o),this.elementLayout=e,this.count=n}getSpan(e,n=0){if(0<=this.span)return this.span;let o=0,c=this.count;if(c instanceof ExternalLayout&&(c=c.decode(e,n)),0<this.elementLayout.span)o=c*this.elementLayout.span;else{let a=0;for(;a<c;)o+=this.elementLayout.getSpan(e,n+o),++a}return o}decode(e,n=0){const o=[];let c=0,a=this.count;for(a instanceof ExternalLayout&&(a=a.decode(e,n));c<a;)o.push(this.elementLayout.decode(e,n)),n+=this.elementLayout.getSpan(e,n),c+=1;return o}encode(e,n,o=0){const c=this.elementLayout,a=e.reduce((l,b)=>l+c.encode(b,n,o+l),0);return this.count instanceof ExternalLayout&&this.count.encode(e.length,n,o),a}}Layout$1.Sequence=Sequence;class Structure extends Layout{constructor(e,n,o){if(!(Array.isArray(e)&&e.reduce((a,l)=>a&&l instanceof Layout,!0)))throw new TypeError("fields must be array of Layout instances");typeof n=="boolean"&&o===void 0&&(o=n,n=void 0);for(const a of e)if(0>a.span&&a.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let c=-1;try{c=e.reduce((a,l)=>a+l.getSpan(),0)}catch{}super(c,n),this.fields=e,this.decodePrefixes=!!o}getSpan(e,n=0){if(0<=this.span)return this.span;let o=0;try{o=this.fields.reduce((c,a)=>{const l=a.getSpan(e,n);return n+=l,c+l},0)}catch{throw new RangeError("indeterminate span")}return o}decode(e,n=0){checkUint8Array(e);const o=this.makeDestinationObject();for(const c of this.fields)if(c.property!==void 0&&(o[c.property]=c.decode(e,n)),n+=c.getSpan(e,n),this.decodePrefixes&&e.length===n)break;return o}encode(e,n,o=0){const c=o;let a=0,l=0;for(const b of this.fields){let v=b.span;if(l=0<v?v:0,b.property!==void 0){const A=e[b.property];A!==void 0&&(l=b.encode(A,n,o),0>v&&(v=b.getSpan(n,o)))}a=o,o+=v}return a+l-c}fromArray(e){const n=this.makeDestinationObject();for(const o of this.fields)o.property!==void 0&&0<e.length&&(n[o.property]=e.shift());return n}layoutFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(const n of this.fields)if(n.property===e)return n}offsetOf(e){if(typeof e!="string")throw new TypeError("property must be string");let n=0;for(const o of this.fields){if(o.property===e)return n;0>o.span?n=-1:0<=n&&(n+=o.span)}}}Layout$1.Structure=Structure;class UnionDiscriminator{constructor(e){this.property=e}decode(e,n){throw new Error("UnionDiscriminator is abstract")}encode(e,n,o){throw new Error("UnionDiscriminator is abstract")}}Layout$1.UnionDiscriminator=UnionDiscriminator;class UnionLayoutDiscriminator extends UnionDiscriminator{constructor(e,n){if(!(e instanceof ExternalLayout&&e.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(n||e.property||"variant"),this.layout=e}decode(e,n){return this.layout.decode(e,n)}encode(e,n,o){return this.layout.encode(e,n,o)}}Layout$1.UnionLayoutDiscriminator=UnionLayoutDiscriminator;class Union extends Layout{constructor(e,n,o){let c;if(e instanceof UInt||e instanceof UIntBE)c=new UnionLayoutDiscriminator(new OffsetLayout(e));else if(e instanceof ExternalLayout&&e.isCount())c=new UnionLayoutDiscriminator(e);else if(e instanceof UnionDiscriminator)c=e;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(n===void 0&&(n=null),!(n===null||n instanceof Layout))throw new TypeError("defaultLayout must be null or a Layout");if(n!==null){if(0>n.span)throw new Error("defaultLayout must have constant span");n.property===void 0&&(n=n.replicate("content"))}let a=-1;n&&(a=n.span,0<=a&&(e instanceof UInt||e instanceof UIntBE)&&(a+=c.layout.span)),super(a,o),this.discriminator=c,this.usesPrefixDiscriminator=e instanceof UInt||e instanceof UIntBE,this.defaultLayout=n,this.registry={};let l=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(b){return l(b)},this.configGetSourceVariant=function(b){l=b.bind(this)}}getSpan(e,n=0){if(0<=this.span)return this.span;const o=this.getVariant(e,n);if(!o)throw new Error("unable to determine span for unrecognized variant");return o.getSpan(e,n)}defaultGetSourceVariant(e){if(Object.prototype.hasOwnProperty.call(e,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(e,this.defaultLayout.property))return;const n=this.registry[e[this.discriminator.property]];if(n&&(!n.layout||n.property&&Object.prototype.hasOwnProperty.call(e,n.property)))return n}else for(const n in this.registry){const o=this.registry[n];if(o.property&&Object.prototype.hasOwnProperty.call(e,o.property))return o}throw new Error("unable to infer src variant")}decode(e,n=0){let o;const c=this.discriminator,a=c.decode(e,n),l=this.registry[a];if(l===void 0){const b=this.defaultLayout;let v=0;this.usesPrefixDiscriminator&&(v=c.layout.span),o=this.makeDestinationObject(),o[c.property]=a,o[b.property]=b.decode(e,n+v)}else o=l.decode(e,n);return o}encode(e,n,o=0){const c=this.getSourceVariant(e);if(c===void 0){const a=this.discriminator,l=this.defaultLayout;let b=0;return this.usesPrefixDiscriminator&&(b=a.layout.span),a.encode(e[a.property],n,o),b+l.encode(e[l.property],n,o+b)}return c.encode(e,n,o)}addVariant(e,n,o){const c=new VariantLayout(this,e,n,o);return this.registry[e]=c,c}getVariant(e,n=0){let o;return e instanceof Uint8Array?o=this.discriminator.decode(e,n):o=e,this.registry[o]}}Layout$1.Union=Union;class VariantLayout extends Layout{constructor(e,n,o,c){if(!(e instanceof Union))throw new TypeError("union must be a Union");if(!Number.isInteger(n)||0>n)throw new TypeError("variant must be a (non-negative) integer");if(typeof o=="string"&&c===void 0&&(c=o,o=null),o){if(!(o instanceof Layout))throw new TypeError("layout must be a Layout");if(e.defaultLayout!==null&&0<=o.span&&o.span>e.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof c!="string")throw new TypeError("variant must have a String property")}let a=e.span;0>e.span&&(a=o?o.span:0,0<=a&&e.usesPrefixDiscriminator&&(a+=e.discriminator.layout.span)),super(a,c),this.union=e,this.variant=n,this.layout=o||null}getSpan(e,n=0){if(0<=this.span)return this.span;let o=0;this.union.usesPrefixDiscriminator&&(o=this.union.discriminator.layout.span);let c=0;return this.layout&&(c=this.layout.getSpan(e,n+o)),o+c}decode(e,n=0){const o=this.makeDestinationObject();if(this!==this.union.getVariant(e,n))throw new Error("variant mismatch");let c=0;return this.union.usesPrefixDiscriminator&&(c=this.union.discriminator.layout.span),this.layout?o[this.property]=this.layout.decode(e,n+c):this.property?o[this.property]=!0:this.union.usesPrefixDiscriminator&&(o[this.union.discriminator.property]=this.variant),o}encode(e,n,o=0){let c=0;if(this.union.usesPrefixDiscriminator&&(c=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(e,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,n,o);let a=c;if(this.layout&&(this.layout.encode(e[this.property],n,o+c),a+=this.layout.getSpan(n,o+c),0<=this.union.span&&a>this.union.span))throw new Error("encoded variant overruns containing union");return a}fromArray(e){if(this.layout)return this.layout.fromArray(e)}}Layout$1.VariantLayout=VariantLayout;function fixBitwiseResult(t){return 0>t&&(t+=4294967296),t}class BitStructure extends Layout{constructor(e,n,o){if(!(e instanceof UInt||e instanceof UIntBE))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof n=="string"&&o===void 0&&(o=n,n=!1),4<e.span)throw new RangeError("word cannot exceed 32 bits");super(e.span,o),this.word=e,this.msb=!!n,this.fields=[];let c=0;this._packedSetValue=function(a){return c=fixBitwiseResult(a),this},this._packedGetValue=function(){return c}}decode(e,n=0){const o=this.makeDestinationObject(),c=this.word.decode(e,n);this._packedSetValue(c);for(const a of this.fields)a.property!==void 0&&(o[a.property]=a.decode(e));return o}encode(e,n,o=0){const c=this.word.decode(n,o);this._packedSetValue(c);for(const a of this.fields)if(a.property!==void 0){const l=e[a.property];l!==void 0&&a.encode(l)}return this.word.encode(this._packedGetValue(),n,o)}addField(e,n){const o=new BitField(this,e,n);return this.fields.push(o),o}addBoolean(e){const n=new Boolean$1(this,e);return this.fields.push(n),n}fieldFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(const n of this.fields)if(n.property===e)return n}}Layout$1.BitStructure=BitStructure;class BitField{constructor(e,n,o){if(!(e instanceof BitStructure))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(n)||0>=n)throw new TypeError("bits must be positive integer");const c=8*e.span,a=e.fields.reduce((l,b)=>l+b.bits,0);if(n+a>c)throw new Error("bits too long for span remainder ("+(c-a)+" of "+c+" remain)");this.container=e,this.bits=n,this.valueMask=(1<<n)-1,n===32&&(this.valueMask=4294967295),this.start=a,this.container.msb&&(this.start=c-a-n),this.wordMask=fixBitwiseResult(this.valueMask<<this.start),this.property=o}decode(e,n){const o=this.container._packedGetValue();return fixBitwiseResult(o&this.wordMask)>>>this.start}encode(e){if(typeof e!="number"||!Number.isInteger(e)||e!==fixBitwiseResult(e&this.valueMask))throw new TypeError(nameWithProperty("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const n=this.container._packedGetValue(),o=fixBitwiseResult(e<<this.start);this.container._packedSetValue(fixBitwiseResult(n&~this.wordMask)|o)}}Layout$1.BitField=BitField;let Boolean$1=class extends BitField{constructor(e,n){super(e,1,n)}decode(e,n){return!!super.decode(e,n)}encode(e){typeof e=="boolean"&&(e=+e),super.encode(e)}};Layout$1.Boolean=Boolean$1;let Blob$1=class extends Layout{constructor(e,n){if(!(e instanceof ExternalLayout&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let o=-1;e instanceof ExternalLayout||(o=e),super(o,n),this.length=e}getSpan(e,n){let o=this.span;return 0>o&&(o=this.length.decode(e,n)),o}decode(e,n=0){let o=this.span;return 0>o&&(o=this.length.decode(e,n)),uint8ArrayToBuffer(e).slice(n,n+o)}encode(e,n,o){let c=this.length;if(this.length instanceof ExternalLayout&&(c=e.length),!(e instanceof Uint8Array&&c===e.length))throw new TypeError(nameWithProperty("Blob.encode",this)+" requires (length "+c+") Uint8Array as src");if(o+c>n.length)throw new RangeError("encoding overruns Uint8Array");const a=uint8ArrayToBuffer(e);return uint8ArrayToBuffer(n).write(a.toString("hex"),o,c,"hex"),this.length instanceof ExternalLayout&&this.length.encode(c,n,o),c}};Layout$1.Blob=Blob$1;class CString extends Layout{constructor(e){super(-1,e)}getSpan(e,n=0){checkUint8Array(e);let o=n;for(;o<e.length&&e[o]!==0;)o+=1;return 1+o-n}decode(e,n=0){const o=this.getSpan(e,n);return uint8ArrayToBuffer(e).slice(n,n+o-1).toString("utf-8")}encode(e,n,o=0){typeof e!="string"&&(e=String(e));const c=buffer_1.Buffer.from(e,"utf8"),a=c.length;if(o+a>n.length)throw new RangeError("encoding overruns Buffer");const l=uint8ArrayToBuffer(n);return c.copy(l,o),l[o+a]=0,a+1}}Layout$1.CString=CString;class UTF8 extends Layout{constructor(e,n){if(typeof e=="string"&&n===void 0&&(n=e,e=void 0),e===void 0)e=-1;else if(!Number.isInteger(e))throw new TypeError("maxSpan must be an integer");super(-1,n),this.maxSpan=e}getSpan(e,n=0){return checkUint8Array(e),e.length-n}decode(e,n=0){const o=this.getSpan(e,n);if(0<=this.maxSpan&&this.maxSpan<o)throw new RangeError("text length exceeds maxSpan");return uint8ArrayToBuffer(e).slice(n,n+o).toString("utf-8")}encode(e,n,o=0){typeof e!="string"&&(e=String(e));const c=buffer_1.Buffer.from(e,"utf8"),a=c.length;if(0<=this.maxSpan&&this.maxSpan<a)throw new RangeError("text length exceeds maxSpan");if(o+a>n.length)throw new RangeError("encoding overruns Buffer");return c.copy(uint8ArrayToBuffer(n),o),a}}Layout$1.UTF8=UTF8;class Constant extends Layout{constructor(e,n){super(0,n),this.value=e}decode(e,n){return this.value}encode(e,n,o){return 0}}Layout$1.Constant=Constant;Layout$1.greedy=(t,e)=>new GreedyCount(t,e);var offset=Layout$1.offset=(t,e,n)=>new OffsetLayout(t,e,n),u8=Layout$1.u8=t=>new UInt(1,t),u16=Layout$1.u16=t=>new UInt(2,t);Layout$1.u24=t=>new UInt(3,t);var u32=Layout$1.u32=t=>new UInt(4,t);Layout$1.u40=t=>new UInt(5,t);Layout$1.u48=t=>new UInt(6,t);var nu64=Layout$1.nu64=t=>new NearUInt64(t);Layout$1.u16be=t=>new UIntBE(2,t);Layout$1.u24be=t=>new UIntBE(3,t);Layout$1.u32be=t=>new UIntBE(4,t);Layout$1.u40be=t=>new UIntBE(5,t);Layout$1.u48be=t=>new UIntBE(6,t);Layout$1.nu64be=t=>new NearUInt64BE(t);Layout$1.s8=t=>new Int(1,t);Layout$1.s16=t=>new Int(2,t);Layout$1.s24=t=>new Int(3,t);Layout$1.s32=t=>new Int(4,t);Layout$1.s40=t=>new Int(5,t);Layout$1.s48=t=>new Int(6,t);var ns64=Layout$1.ns64=t=>new NearInt64(t);Layout$1.s16be=t=>new IntBE(2,t);Layout$1.s24be=t=>new IntBE(3,t);Layout$1.s32be=t=>new IntBE(4,t);Layout$1.s40be=t=>new IntBE(5,t);Layout$1.s48be=t=>new IntBE(6,t);Layout$1.ns64be=t=>new NearInt64BE(t);Layout$1.f32=t=>new Float(t);Layout$1.f32be=t=>new FloatBE(t);Layout$1.f64=t=>new Double(t);Layout$1.f64be=t=>new DoubleBE(t);var struct=Layout$1.struct=(t,e,n)=>new Structure(t,e,n);Layout$1.bits=(t,e,n)=>new BitStructure(t,e,n);var seq=Layout$1.seq=(t,e,n)=>new Sequence(t,e,n);Layout$1.union=(t,e,n)=>new Union(t,e,n);Layout$1.unionLayoutDiscriminator=(t,e)=>new UnionLayoutDiscriminator(t,e);var blob=Layout$1.blob=(t,e)=>new Blob$1(t,e);Layout$1.cstr=t=>new CString(t);Layout$1.utf8=(t,e)=>new UTF8(t,e);Layout$1.constant=(t,e)=>new Constant(t,e);var browser$2={};Object.defineProperty(browser$2,"__esModule",{value:!0});function toBigIntLE(t){{const e=Buffer$1$1.from(t);e.reverse();const n=e.toString("hex");return n.length===0?BigInt(0):BigInt(`0x${n}`)}}var toBigIntLE_1=browser$2.toBigIntLE=toBigIntLE;function toBigIntBE(t){{const e=t.toString("hex");return e.length===0?BigInt(0):BigInt(`0x${e}`)}}browser$2.toBigIntBE=toBigIntBE;function toBufferLE(t,e){{const n=t.toString(16),o=Buffer$1$1.from(n.padStart(e*2,"0").slice(0,e*2),"hex");return o.reverse(),o}}var toBufferLE_1=browser$2.toBufferLE=toBufferLE;function toBufferBE(t,e){{const n=t.toString(16);return Buffer$1$1.from(n.padStart(e*2,"0").slice(0,e*2),"hex")}}browser$2.toBufferBE=toBufferBE;class StructError extends TypeError{constructor(e,n){let o;const{message:c,...a}=e,{path:l}=e,b=l.length===0?c:"At path: "+l.join(".")+" -- "+c;super(b),Object.assign(this,a),this.name=this.constructor.name,this.failures=()=>{var v;return(v=o)!=null?v:o=[e,...n()]}}}function isIterable(t){return isObject(t)&&typeof t[Symbol.iterator]=="function"}function isObject(t){return typeof t=="object"&&t!=null}function print(t){return typeof t=="string"?JSON.stringify(t):""+t}function shiftIterator(t){const{done:e,value:n}=t.next();return e?void 0:n}function toFailure(t,e,n,o){if(t===!0)return;t===!1?t={}:typeof t=="string"&&(t={message:t});const{path:c,branch:a}=e,{type:l}=n,{refinement:b,message:v="Expected a value of type `"+l+"`"+(b?" with refinement `"+b+"`":"")+", but received: `"+print(o)+"`"}=t;return{value:o,type:l,refinement:b,key:c[c.length-1],path:c,branch:a,...t,message:v}}function*toFailures(t,e,n,o){isIterable(t)||(t=[t]);for(const c of t){const a=toFailure(c,e,n,o);a&&(yield a)}}function*run(t,e,n={}){const{path:o=[],branch:c=[t],coerce:a=!1,mask:l=!1}=n,b={path:o,branch:c};if(a&&(t=e.coercer(t,b),l&&e.type!=="type"&&isObject(e.schema)&&isObject(t)&&!Array.isArray(t)))for(const A in t)e.schema[A]===void 0&&delete t[A];let v=!0;for(const A of e.validator(t,b))v=!1,yield[A,void 0];for(let[A,S,M]of e.entries(t,b)){const B=run(S,M,{path:A===void 0?o:[...o,A],branch:A===void 0?c:[...c,S],coerce:a,mask:l});for(const P of B)P[0]?(v=!1,yield[P[0],void 0]):a&&(S=P[1],A===void 0?t=S:t instanceof Map?t.set(A,S):t instanceof Set?t.add(S):isObject(t)&&(t[A]=S))}if(v)for(const A of e.refiner(t,b))v=!1,yield[A,void 0];v&&(yield[void 0,t])}let Struct$1=class{constructor(e){const{type:n,schema:o,validator:c,refiner:a,coercer:l=v=>v,entries:b=function*(){}}=e;this.type=n,this.schema=o,this.entries=b,this.coercer=l,c?this.validator=(v,A)=>{const S=c(v,A);return toFailures(S,A,this,v)}:this.validator=()=>[],a?this.refiner=(v,A)=>{const S=a(v,A);return toFailures(S,A,this,v)}:this.refiner=()=>[]}assert(e){return assert$1(e,this)}create(e){return create(e,this)}is(e){return is(e,this)}mask(e){return mask(e,this)}validate(e,n={}){return validate$1(e,this,n)}};function assert$1(t,e){const n=validate$1(t,e);if(n[0])throw n[0]}function create(t,e){const n=validate$1(t,e,{coerce:!0});if(n[0])throw n[0];return n[1]}function mask(t,e){const n=validate$1(t,e,{coerce:!0,mask:!0});if(n[0])throw n[0];return n[1]}function is(t,e){return!validate$1(t,e)[0]}function validate$1(t,e,n={}){const o=run(t,e,n),c=shiftIterator(o);return c[0]?[new StructError(c[0],function*(){for(const l of o)l[0]&&(yield l[0])}),void 0]:[void 0,c[1]]}function define(t,e){return new Struct$1({type:t,schema:null,validator:e})}function any(){return define("any",()=>!0)}function array(t){return new Struct$1({type:"array",schema:t,*entries(e){if(t&&Array.isArray(e))for(const[n,o]of e.entries())yield[n,o,t]},coercer(e){return Array.isArray(e)?e.slice():e},validator(e){return Array.isArray(e)||"Expected an array value, but received: "+print(e)}})}function boolean(){return define("boolean",t=>typeof t=="boolean")}function instance(t){return define("instance",e=>e instanceof t||"Expected a `"+t.name+"` instance, but received: "+print(e))}function literal(t){const e=print(t),n=typeof t;return new Struct$1({type:"literal",schema:n==="string"||n==="number"||n==="boolean"?t:null,validator(o){return o===t||"Expected the literal `"+e+"`, but received: "+print(o)}})}function never(){return define("never",()=>!1)}function nullable(t){return new Struct$1({...t,validator:(e,n)=>e===null||t.validator(e,n),refiner:(e,n)=>e===null||t.refiner(e,n)})}function number(){return define("number",t=>typeof t=="number"&&!isNaN(t)||"Expected a number, but received: "+print(t))}function optional(t){return new Struct$1({...t,validator:(e,n)=>e===void 0||t.validator(e,n),refiner:(e,n)=>e===void 0||t.refiner(e,n)})}function record(t,e){return new Struct$1({type:"record",schema:null,*entries(n){if(isObject(n))for(const o in n){const c=n[o];yield[o,o,t],yield[o,c,e]}},validator(n){return isObject(n)||"Expected an object, but received: "+print(n)}})}function string(){return define("string",t=>typeof t=="string"||"Expected a string, but received: "+print(t))}function tuple(t){const e=never();return new Struct$1({type:"tuple",schema:null,*entries(n){if(Array.isArray(n)){const o=Math.max(t.length,n.length);for(let c=0;c<o;c++)yield[c,n[c],t[c]||e]}},validator(n){return Array.isArray(n)||"Expected an array, but received: "+print(n)}})}function type(t){const e=Object.keys(t);return new Struct$1({type:"type",schema:t,*entries(n){if(isObject(n))for(const o of e)yield[o,n[o],t[o]]},validator(n){return isObject(n)||"Expected an object, but received: "+print(n)}})}function union(t){const e=t.map(n=>n.type).join(" | ");return new Struct$1({type:"union",schema:null,validator(n,o){const c=[];for(const a of t){const[...l]=run(n,a,o),[b]=l;if(b[0])for(const[v]of l)v&&c.push(v);else return[]}return["Expected the value to satisfy a union of `"+e+"`, but received: "+print(n),...c]}})}function unknown(){return define("unknown",()=>!0)}function coerce(t,e,n){return new Struct$1({...t,coercer:(o,c)=>is(o,e)?t.coercer(n(o,c),c):t.coercer(o,c)})}var getRandomValues,rnds8=new Uint8Array(16);function rng(){if(!getRandomValues&&(getRandomValues=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!getRandomValues))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues(rnds8)}const REGEX=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function validate(t){return typeof t=="string"&&REGEX.test(t)}var byteToHex=[];for(var i=0;i<256;++i)byteToHex.push((i+256).toString(16).substr(1));function stringify$1(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(byteToHex[t[e+0]]+byteToHex[t[e+1]]+byteToHex[t[e+2]]+byteToHex[t[e+3]]+"-"+byteToHex[t[e+4]]+byteToHex[t[e+5]]+"-"+byteToHex[t[e+6]]+byteToHex[t[e+7]]+"-"+byteToHex[t[e+8]]+byteToHex[t[e+9]]+"-"+byteToHex[t[e+10]]+byteToHex[t[e+11]]+byteToHex[t[e+12]]+byteToHex[t[e+13]]+byteToHex[t[e+14]]+byteToHex[t[e+15]]).toLowerCase();if(!validate(n))throw TypeError("Stringified UUID is invalid");return n}var _nodeId,_clockseq,_lastMSecs=0,_lastNSecs=0;function v1(t,e,n){var o=e&&n||0,c=e||new Array(16);t=t||{};var a=t.node||_nodeId,l=t.clockseq!==void 0?t.clockseq:_clockseq;if(a==null||l==null){var b=t.random||(t.rng||rng)();a==null&&(a=_nodeId=[b[0]|1,b[1],b[2],b[3],b[4],b[5]]),l==null&&(l=_clockseq=(b[6]<<8|b[7])&16383)}var v=t.msecs!==void 0?t.msecs:Date.now(),A=t.nsecs!==void 0?t.nsecs:_lastNSecs+1,S=v-_lastMSecs+(A-_lastNSecs)/1e4;if(S<0&&t.clockseq===void 0&&(l=l+1&16383),(S<0||v>_lastMSecs)&&t.nsecs===void 0&&(A=0),A>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");_lastMSecs=v,_lastNSecs=A,_clockseq=l,v+=122192928e5;var M=((v&268435455)*1e4+A)%4294967296;c[o++]=M>>>24&255,c[o++]=M>>>16&255,c[o++]=M>>>8&255,c[o++]=M&255;var B=v/4294967296*1e4&268435455;c[o++]=B>>>8&255,c[o++]=B&255,c[o++]=B>>>24&15|16,c[o++]=B>>>16&255,c[o++]=l>>>8|128,c[o++]=l&255;for(var P=0;P<6;++P)c[o+P]=a[P];return e||stringify$1(c)}function parse(t){if(!validate(t))throw TypeError("Invalid UUID");var e,n=new Uint8Array(16);return n[0]=(e=parseInt(t.slice(0,8),16))>>>24,n[1]=e>>>16&255,n[2]=e>>>8&255,n[3]=e&255,n[4]=(e=parseInt(t.slice(9,13),16))>>>8,n[5]=e&255,n[6]=(e=parseInt(t.slice(14,18),16))>>>8,n[7]=e&255,n[8]=(e=parseInt(t.slice(19,23),16))>>>8,n[9]=e&255,n[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,n[11]=e/4294967296&255,n[12]=e>>>24&255,n[13]=e>>>16&255,n[14]=e>>>8&255,n[15]=e&255,n}function stringToBytes(t){t=unescape(encodeURIComponent(t));for(var e=[],n=0;n<t.length;++n)e.push(t.charCodeAt(n));return e}var DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",URL$1="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function v35(t,e,n){function o(c,a,l,b){if(typeof c=="string"&&(c=stringToBytes(c)),typeof a=="string"&&(a=parse(a)),a.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var v=new Uint8Array(16+c.length);if(v.set(a),v.set(c,a.length),v=n(v),v[6]=v[6]&15|e,v[8]=v[8]&63|128,l){b=b||0;for(var A=0;A<16;++A)l[b+A]=v[A];return l}return stringify$1(v)}try{o.name=t}catch{}return o.DNS=DNS,o.URL=URL$1,o}function md5(t){if(typeof t=="string"){var e=unescape(encodeURIComponent(t));t=new Uint8Array(e.length);for(var n=0;n<e.length;++n)t[n]=e.charCodeAt(n)}return md5ToHexEncodedArray(wordsToMd5(bytesToWords(t),t.length*8))}function md5ToHexEncodedArray(t){for(var e=[],n=t.length*32,o="0123456789abcdef",c=0;c<n;c+=8){var a=t[c>>5]>>>c%32&255,l=parseInt(o.charAt(a>>>4&15)+o.charAt(a&15),16);e.push(l)}return e}function getOutputLength(t){return(t+64>>>9<<4)+14+1}function wordsToMd5(t,e){t[e>>5]|=128<<e%32,t[getOutputLength(e)-1]=e;for(var n=1732584193,o=-271733879,c=-1732584194,a=271733878,l=0;l<t.length;l+=16){var b=n,v=o,A=c,S=a;n=md5ff(n,o,c,a,t[l],7,-680876936),a=md5ff(a,n,o,c,t[l+1],12,-389564586),c=md5ff(c,a,n,o,t[l+2],17,606105819),o=md5ff(o,c,a,n,t[l+3],22,-1044525330),n=md5ff(n,o,c,a,t[l+4],7,-176418897),a=md5ff(a,n,o,c,t[l+5],12,1200080426),c=md5ff(c,a,n,o,t[l+6],17,-1473231341),o=md5ff(o,c,a,n,t[l+7],22,-45705983),n=md5ff(n,o,c,a,t[l+8],7,1770035416),a=md5ff(a,n,o,c,t[l+9],12,-1958414417),c=md5ff(c,a,n,o,t[l+10],17,-42063),o=md5ff(o,c,a,n,t[l+11],22,-1990404162),n=md5ff(n,o,c,a,t[l+12],7,1804603682),a=md5ff(a,n,o,c,t[l+13],12,-40341101),c=md5ff(c,a,n,o,t[l+14],17,-1502002290),o=md5ff(o,c,a,n,t[l+15],22,1236535329),n=md5gg(n,o,c,a,t[l+1],5,-165796510),a=md5gg(a,n,o,c,t[l+6],9,-1069501632),c=md5gg(c,a,n,o,t[l+11],14,643717713),o=md5gg(o,c,a,n,t[l],20,-373897302),n=md5gg(n,o,c,a,t[l+5],5,-701558691),a=md5gg(a,n,o,c,t[l+10],9,38016083),c=md5gg(c,a,n,o,t[l+15],14,-660478335),o=md5gg(o,c,a,n,t[l+4],20,-405537848),n=md5gg(n,o,c,a,t[l+9],5,568446438),a=md5gg(a,n,o,c,t[l+14],9,-1019803690),c=md5gg(c,a,n,o,t[l+3],14,-187363961),o=md5gg(o,c,a,n,t[l+8],20,1163531501),n=md5gg(n,o,c,a,t[l+13],5,-1444681467),a=md5gg(a,n,o,c,t[l+2],9,-51403784),c=md5gg(c,a,n,o,t[l+7],14,1735328473),o=md5gg(o,c,a,n,t[l+12],20,-1926607734),n=md5hh(n,o,c,a,t[l+5],4,-378558),a=md5hh(a,n,o,c,t[l+8],11,-2022574463),c=md5hh(c,a,n,o,t[l+11],16,1839030562),o=md5hh(o,c,a,n,t[l+14],23,-35309556),n=md5hh(n,o,c,a,t[l+1],4,-1530992060),a=md5hh(a,n,o,c,t[l+4],11,1272893353),c=md5hh(c,a,n,o,t[l+7],16,-155497632),o=md5hh(o,c,a,n,t[l+10],23,-1094730640),n=md5hh(n,o,c,a,t[l+13],4,681279174),a=md5hh(a,n,o,c,t[l],11,-358537222),c=md5hh(c,a,n,o,t[l+3],16,-722521979),o=md5hh(o,c,a,n,t[l+6],23,76029189),n=md5hh(n,o,c,a,t[l+9],4,-640364487),a=md5hh(a,n,o,c,t[l+12],11,-421815835),c=md5hh(c,a,n,o,t[l+15],16,530742520),o=md5hh(o,c,a,n,t[l+2],23,-995338651),n=md5ii(n,o,c,a,t[l],6,-198630844),a=md5ii(a,n,o,c,t[l+7],10,1126891415),c=md5ii(c,a,n,o,t[l+14],15,-1416354905),o=md5ii(o,c,a,n,t[l+5],21,-57434055),n=md5ii(n,o,c,a,t[l+12],6,1700485571),a=md5ii(a,n,o,c,t[l+3],10,-1894986606),c=md5ii(c,a,n,o,t[l+10],15,-1051523),o=md5ii(o,c,a,n,t[l+1],21,-2054922799),n=md5ii(n,o,c,a,t[l+8],6,1873313359),a=md5ii(a,n,o,c,t[l+15],10,-30611744),c=md5ii(c,a,n,o,t[l+6],15,-1560198380),o=md5ii(o,c,a,n,t[l+13],21,1309151649),n=md5ii(n,o,c,a,t[l+4],6,-145523070),a=md5ii(a,n,o,c,t[l+11],10,-1120210379),c=md5ii(c,a,n,o,t[l+2],15,718787259),o=md5ii(o,c,a,n,t[l+9],21,-343485551),n=safeAdd(n,b),o=safeAdd(o,v),c=safeAdd(c,A),a=safeAdd(a,S)}return[n,o,c,a]}function bytesToWords(t){if(t.length===0)return[];for(var e=t.length*8,n=new Uint32Array(getOutputLength(e)),o=0;o<e;o+=8)n[o>>5]|=(t[o/8]&255)<<o%32;return n}function safeAdd(t,e){var n=(t&65535)+(e&65535),o=(t>>16)+(e>>16)+(n>>16);return o<<16|n&65535}function bitRotateLeft(t,e){return t<<e|t>>>32-e}function md5cmn(t,e,n,o,c,a){return safeAdd(bitRotateLeft(safeAdd(safeAdd(e,t),safeAdd(o,a)),c),n)}function md5ff(t,e,n,o,c,a,l){return md5cmn(e&n|~e&o,t,e,c,a,l)}function md5gg(t,e,n,o,c,a,l){return md5cmn(e&o|n&~o,t,e,c,a,l)}function md5hh(t,e,n,o,c,a,l){return md5cmn(e^n^o,t,e,c,a,l)}function md5ii(t,e,n,o,c,a,l){return md5cmn(n^(e|~o),t,e,c,a,l)}var v3=v35("v3",48,md5);const v3$1=v3;function v4(t,e,n){t=t||{};var o=t.random||(t.rng||rng)();if(o[6]=o[6]&15|64,o[8]=o[8]&63|128,e){n=n||0;for(var c=0;c<16;++c)e[n+c]=o[c];return e}return stringify$1(o)}function f(t,e,n,o){switch(t){case 0:return e&n^~e&o;case 1:return e^n^o;case 2:return e&n^e&o^n&o;case 3:return e^n^o}}function ROTL(t,e){return t<<e|t>>>32-e}function sha1$1(t){var e=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof t=="string"){var o=unescape(encodeURIComponent(t));t=[];for(var c=0;c<o.length;++c)t.push(o.charCodeAt(c))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);for(var a=t.length/4+2,l=Math.ceil(a/16),b=new Array(l),v=0;v<l;++v){for(var A=new Uint32Array(16),S=0;S<16;++S)A[S]=t[v*64+S*4]<<24|t[v*64+S*4+1]<<16|t[v*64+S*4+2]<<8|t[v*64+S*4+3];b[v]=A}b[l-1][14]=(t.length-1)*8/Math.pow(2,32),b[l-1][14]=Math.floor(b[l-1][14]),b[l-1][15]=(t.length-1)*8&4294967295;for(var M=0;M<l;++M){for(var B=new Uint32Array(80),P=0;P<16;++P)B[P]=b[M][P];for(var L=16;L<80;++L)B[L]=ROTL(B[L-3]^B[L-8]^B[L-14]^B[L-16],1);for(var F=n[0],U=n[1],q=n[2],X=n[3],ee=n[4],te=0;te<80;++te){var ce=Math.floor(te/20),ue=ROTL(F,5)+f(ce,U,q,X)+ee+e[ce]+B[te]>>>0;ee=X,X=q,q=ROTL(U,30)>>>0,U=F,F=ue}n[0]=n[0]+F>>>0,n[1]=n[1]+U>>>0,n[2]=n[2]+q>>>0,n[3]=n[3]+X>>>0,n[4]=n[4]+ee>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,n[0]&255,n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,n[1]&255,n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,n[2]&255,n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,n[3]&255,n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,n[4]&255]}var v5=v35("v5",80,sha1$1);const v5$1=v5,nil="00000000-0000-0000-0000-000000000000";function version$2(t){if(!validate(t))throw TypeError("Invalid UUID");return parseInt(t.substr(14,1),16)}const esmBrowser=Object.freeze(Object.defineProperty({__proto__:null,NIL:nil,parse,stringify:stringify$1,v1,v3:v3$1,v4,v5:v5$1,validate,version:version$2},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(esmBrowser),uuid$1=require$$0.v4,generateRequest$1=function(t,e,n,o){if(typeof t!="string")throw new TypeError(t+" must be a string");o=o||{};const c=typeof o.version=="number"?o.version:2;if(c!==1&&c!==2)throw new TypeError(c+" must be 1 or 2");const a={method:t};if(c===2&&(a.jsonrpc="2.0"),e){if(typeof e!="object"&&!Array.isArray(e))throw new TypeError(e+" must be an object, array or omitted");a.params=e}if(typeof n>"u"){const l=typeof o.generator=="function"?o.generator:function(){return uuid$1()};a.id=l(a,o)}else c===2&&n===null?o.notificationIdNull&&(a.id=null):a.id=n;return a};var generateRequest_1=generateRequest$1;const uuid=require$$0.v4,generateRequest=generateRequest_1,ClientBrowser=function(t,e){if(!(this instanceof ClientBrowser))return new ClientBrowser(t,e);e||(e={}),this.options={reviver:typeof e.reviver<"u"?e.reviver:null,replacer:typeof e.replacer<"u"?e.replacer:null,generator:typeof e.generator<"u"?e.generator:function(){return uuid()},version:typeof e.version<"u"?e.version:2,notificationIdNull:typeof e.notificationIdNull=="boolean"?e.notificationIdNull:!1},this.callServer=t};var browser$1=ClientBrowser;ClientBrowser.prototype.request=function(t,e,n,o){const c=this;let a=null;const l=Array.isArray(t)&&typeof e=="function";if(this.options.version===1&&l)throw new TypeError("JSON-RPC 1.0 does not support batching");if(l||!l&&t&&typeof t=="object"&&typeof e=="function")o=e,a=t;else{typeof n=="function"&&(o=n,n=void 0);const A=typeof o=="function";try{a=generateRequest(t,e,n,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(S){if(A)return o(S);throw S}if(!A)return a}let v;try{v=JSON.stringify(a,this.options.replacer)}catch(A){return o(A)}return this.callServer(v,function(A,S){c._parseResponse(A,S,o)}),a};ClientBrowser.prototype._parseResponse=function(t,e,n){if(t){n(t);return}if(!e)return n();let o;try{o=JSON.parse(e,this.options.reviver)}catch(c){return n(c)}if(n.length===3)if(Array.isArray(o)){const c=function(l){return typeof l.error<"u"},a=function(l){return!c(l)};return n(null,o.filter(c),o.filter(a))}else return n(null,o.error,o.result);n(null,o)};const RpcClient=getDefaultExportFromCjs$1(browser$1);var client={},eventemitter3={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function o(){}Object.create&&(o.prototype=Object.create(null),new o().__proto__||(n=!1));function c(v,A,S){this.fn=v,this.context=A,this.once=S||!1}function a(v,A,S,M,B){if(typeof S!="function")throw new TypeError("The listener must be a function");var P=new c(S,M||v,B),L=n?n+A:A;return v._events[L]?v._events[L].fn?v._events[L]=[v._events[L],P]:v._events[L].push(P):(v._events[L]=P,v._eventsCount++),v}function l(v,A){--v._eventsCount===0?v._events=new o:delete v._events[A]}function b(){this._events=new o,this._eventsCount=0}b.prototype.eventNames=function(){var A=[],S,M;if(this._eventsCount===0)return A;for(M in S=this._events)e.call(S,M)&&A.push(n?M.slice(1):M);return Object.getOwnPropertySymbols?A.concat(Object.getOwnPropertySymbols(S)):A},b.prototype.listeners=function(A){var S=n?n+A:A,M=this._events[S];if(!M)return[];if(M.fn)return[M.fn];for(var B=0,P=M.length,L=new Array(P);B<P;B++)L[B]=M[B].fn;return L},b.prototype.listenerCount=function(A){var S=n?n+A:A,M=this._events[S];return M?M.fn?1:M.length:0},b.prototype.emit=function(A,S,M,B,P,L){var F=n?n+A:A;if(!this._events[F])return!1;var U=this._events[F],q=arguments.length,X,ee;if(U.fn){switch(U.once&&this.removeListener(A,U.fn,void 0,!0),q){case 1:return U.fn.call(U.context),!0;case 2:return U.fn.call(U.context,S),!0;case 3:return U.fn.call(U.context,S,M),!0;case 4:return U.fn.call(U.context,S,M,B),!0;case 5:return U.fn.call(U.context,S,M,B,P),!0;case 6:return U.fn.call(U.context,S,M,B,P,L),!0}for(ee=1,X=new Array(q-1);ee<q;ee++)X[ee-1]=arguments[ee];U.fn.apply(U.context,X)}else{var te=U.length,ce;for(ee=0;ee<te;ee++)switch(U[ee].once&&this.removeListener(A,U[ee].fn,void 0,!0),q){case 1:U[ee].fn.call(U[ee].context);break;case 2:U[ee].fn.call(U[ee].context,S);break;case 3:U[ee].fn.call(U[ee].context,S,M);break;case 4:U[ee].fn.call(U[ee].context,S,M,B);break;default:if(!X)for(ce=1,X=new Array(q-1);ce<q;ce++)X[ce-1]=arguments[ce];U[ee].fn.apply(U[ee].context,X)}}return!0},b.prototype.on=function(A,S,M){return a(this,A,S,M,!1)},b.prototype.once=function(A,S,M){return a(this,A,S,M,!0)},b.prototype.removeListener=function(A,S,M,B){var P=n?n+A:A;if(!this._events[P])return this;if(!S)return l(this,P),this;var L=this._events[P];if(L.fn)L.fn===S&&(!B||L.once)&&(!M||L.context===M)&&l(this,P);else{for(var F=0,U=[],q=L.length;F<q;F++)(L[F].fn!==S||B&&!L[F].once||M&&L[F].context!==M)&&U.push(L[F]);U.length?this._events[P]=U.length===1?U[0]:U:l(this,P)}return this},b.prototype.removeAllListeners=function(A){var S;return A?(S=n?n+A:A,this._events[S]&&l(this,S)):(this._events=new o,this._eventsCount=0),this},b.prototype.off=b.prototype.removeListener,b.prototype.addListener=b.prototype.on,b.prefixed=n,b.EventEmitter=b,t.exports=b})(eventemitter3);var eventemitter3Exports=eventemitter3.exports,utils$1={};Object.defineProperty(utils$1,"__esModule",{value:!0});utils$1.createError=utils$1.DefaultDataPack=void 0;const errors=new Map([[-32e3,"Event not provided"],[-32600,"Invalid Request"],[-32601,"Method not found"],[-32602,"Invalid params"],[-32603,"Internal error"],[-32604,"Params not found"],[-32605,"Method forbidden"],[-32606,"Event forbidden"],[-32700,"Parse error"]]);class DefaultDataPack{encode(e){return JSON.stringify(e)}decode(e){return JSON.parse(e)}}utils$1.DefaultDataPack=DefaultDataPack;function createError(t,e){const n={code:t,message:errors.get(t)||"Internal Server Error"};return e&&(n.data=e),n}utils$1.createError=createError;Object.defineProperty(client,"__esModule",{value:!0});const eventemitter3_1$1=eventemitter3Exports,utils_1=utils$1;class CommonClient extends eventemitter3_1$1.EventEmitter{address;rpc_id;queue;options;autoconnect;ready;reconnect;reconnect_timer_id;reconnect_interval;max_reconnects;rest_options;current_reconnects;generate_request_id;socket;webSocketFactory;dataPack;constructor(e,n="ws://localhost:8080",{autoconnect:o=!0,reconnect:c=!0,reconnect_interval:a=1e3,max_reconnects:l=5,...b}={},v,A){super(),this.webSocketFactory=e,this.queue={},this.rpc_id=0,this.address=n,this.autoconnect=o,this.ready=!1,this.reconnect=c,this.reconnect_timer_id=void 0,this.reconnect_interval=a,this.max_reconnects=l,this.rest_options=b,this.current_reconnects=0,this.generate_request_id=v||(()=>++this.rpc_id),A?this.dataPack=A:this.dataPack=new utils_1.DefaultDataPack,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(e,n,o,c){return!c&&typeof o=="object"&&(c=o,o=null),new Promise((a,l)=>{if(!this.ready)return l(new Error("socket not ready"));const b=this.generate_request_id(e,n),v={jsonrpc:"2.0",method:e,params:n||void 0,id:b};this.socket.send(this.dataPack.encode(v),c,A=>{if(A)return l(A);this.queue[b]={promise:[a,l]},o&&(this.queue[b].timeout=setTimeout(()=>{delete this.queue[b],l(new Error("reply timeout"))},o))})})}async login(e){const n=await this.call("rpc.login",e);if(!n)throw new Error("authentication failed");return n}async listMethods(){return await this.call("__listMethods")}notify(e,n){return new Promise((o,c)=>{if(!this.ready)return c(new Error("socket not ready"));const a={jsonrpc:"2.0",method:e,params:n};this.socket.send(this.dataPack.encode(a),l=>{if(l)return c(l);o()})})}async subscribe(e){typeof e=="string"&&(e=[e]);const n=await this.call("rpc.on",e);if(typeof e=="string"&&n[e]!=="ok")throw new Error("Failed subscribing to an event '"+e+"' with: "+n[e]);return n}async unsubscribe(e){typeof e=="string"&&(e=[e]);const n=await this.call("rpc.off",e);if(typeof e=="string"&&n[e]!=="ok")throw new Error("Failed unsubscribing from an event with: "+n);return n}close(e,n){this.socket.close(e||1e3,n)}setAutoReconnect(e){this.reconnect=e}setReconnectInterval(e){this.reconnect_interval=e}setMaxReconnects(e){this.max_reconnects=e}_connect(e,n){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(e,n),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:o})=>{o instanceof ArrayBuffer&&(o=Buffer$1$1.from(o).toString());try{o=this.dataPack.decode(o)}catch{return}if(o.notification&&this.listeners(o.notification).length){if(!Object.keys(o.params).length)return this.emit(o.notification);const c=[o.notification];if(o.params.constructor===Object)c.push(o.params);else for(let a=0;a<o.params.length;a++)c.push(o.params[a]);return Promise.resolve().then(()=>{this.emit.apply(this,c)})}if(!this.queue[o.id])return o.method?Promise.resolve().then(()=>{this.emit(o.method,o?.params)}):void 0;"error"in o=="result"in o&&this.queue[o.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[o.id].timeout&&clearTimeout(this.queue[o.id].timeout),o.error?this.queue[o.id].promise[1](o.error):this.queue[o.id].promise[0](o.result),delete this.queue[o.id]}),this.socket.addEventListener("error",o=>this.emit("error",o)),this.socket.addEventListener("close",({code:o,reason:c})=>{this.ready&&setTimeout(()=>this.emit("close",o,c),0),this.ready=!1,this.socket=void 0,o!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)&&(this.reconnect_timer_id=setTimeout(()=>this._connect(e,n),this.reconnect_interval)))})}}var _default$1=client.default=CommonClient,websocket_browser={};Object.defineProperty(websocket_browser,"__esModule",{value:!0});const eventemitter3_1=eventemitter3Exports;class WebSocketBrowserImpl extends eventemitter3_1.EventEmitter{socket;constructor(e,n,o){super(),this.socket=new window.WebSocket(e,o),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=c=>this.emit("message",c.data),this.socket.onerror=c=>this.emit("error",c),this.socket.onclose=c=>{this.emit("close",c.code,c.reason)}}send(e,n,o){const c=o||n;try{this.socket.send(e),c()}catch(a){c(a)}}close(e,n){this.socket.close(e,n)}addEventListener(e,n,o){this.socket.addEventListener(e,n,o)}}function default_1(t,e){return new WebSocketBrowserImpl(t,e)}var _default=websocket_browser.default=default_1;function validatePointOpts(t){const e=validateBasic(t);validateObject(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:o,a:c}=e;if(n){if(!o.eql(c,o.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:b2n,hexToBytes:h2b}=ut,DER={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(t){const{Err:e}=DER;if(t.length<2||t[0]!==2)throw new e("Invalid signature integer tag");const n=t[1],o=t.subarray(2,n+2);if(!n||o.length!==n)throw new e("Invalid signature integer: wrong length");if(o[0]&128)throw new e("Invalid signature integer: negative");if(o[0]===0&&!(o[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:b2n(o),l:t.subarray(n+2)}},toSig(t){const{Err:e}=DER,n=typeof t=="string"?h2b(t):t;abytes(n);let o=n.length;if(o<2||n[0]!=48)throw new e("Invalid signature tag");if(n[1]!==o-2)throw new e("Invalid signature: incorrect length");const{d:c,l:a}=DER._parseInt(n.subarray(2)),{d:l,l:b}=DER._parseInt(a);if(b.length)throw new e("Invalid signature: left bytes after parsing");return{r:c,s:l}},hexFromSig(t){const e=A=>Number.parseInt(A[0],16)&8?"00"+A:A,n=A=>{const S=A.toString(16);return S.length&1?`0${S}`:S},o=e(n(t.s)),c=e(n(t.r)),a=o.length/2,l=c.length/2,b=n(a),v=n(l);return`30${n(l+a+4)}02${v}${c}02${b}${o}`}},_0n=BigInt(0),_1n$1=BigInt(1);BigInt(2);const _3n=BigInt(3);BigInt(4);function weierstrassPoints(t){const e=validatePointOpts(t),{Fp:n}=e,o=e.toBytes||((L,F,U)=>{const q=F.toAffine();return concatBytes(Uint8Array.from([4]),n.toBytes(q.x),n.toBytes(q.y))}),c=e.fromBytes||(L=>{const F=L.subarray(1),U=n.fromBytes(F.subarray(0,n.BYTES)),q=n.fromBytes(F.subarray(n.BYTES,2*n.BYTES));return{x:U,y:q}});function a(L){const{a:F,b:U}=e,q=n.sqr(L),X=n.mul(q,L);return n.add(n.add(X,n.mul(L,F)),U)}if(!n.eql(n.sqr(e.Gy),a(e.Gx)))throw new Error("bad generator point: equation left != right");function l(L){return typeof L=="bigint"&&_0n<L&&L<e.n}function b(L){if(!l(L))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function v(L){const{allowedPrivateKeyLengths:F,nByteLength:U,wrapPrivateKey:q,n:X}=e;if(F&&typeof L!="bigint"){if(isBytes(L)&&(L=bytesToHex(L)),typeof L!="string"||!F.includes(L.length))throw new Error("Invalid key");L=L.padStart(U*2,"0")}let ee;try{ee=typeof L=="bigint"?L:bytesToNumberBE(ensureBytes("private key",L,U))}catch{throw new Error(`private key must be ${U} bytes, hex or bigint, not ${typeof L}`)}return q&&(ee=mod(ee,X)),b(ee),ee}const A=new Map;function S(L){if(!(L instanceof M))throw new Error("ProjectivePoint expected")}class M{constructor(F,U,q){if(this.px=F,this.py=U,this.pz=q,F==null||!n.isValid(F))throw new Error("x required");if(U==null||!n.isValid(U))throw new Error("y required");if(q==null||!n.isValid(q))throw new Error("z required")}static fromAffine(F){const{x:U,y:q}=F||{};if(!F||!n.isValid(U)||!n.isValid(q))throw new Error("invalid affine point");if(F instanceof M)throw new Error("projective point not allowed");const X=ee=>n.eql(ee,n.ZERO);return X(U)&&X(q)?M.ZERO:new M(U,q,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(F){const U=n.invertBatch(F.map(q=>q.pz));return F.map((q,X)=>q.toAffine(U[X])).map(M.fromAffine)}static fromHex(F){const U=M.fromAffine(c(ensureBytes("pointHex",F)));return U.assertValidity(),U}static fromPrivateKey(F){return M.BASE.multiply(v(F))}_setWindowSize(F){this._WINDOW_SIZE=F,A.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:F,y:U}=this.toAffine();if(!n.isValid(F)||!n.isValid(U))throw new Error("bad point: x or y not FE");const q=n.sqr(U),X=a(F);if(!n.eql(q,X))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:F}=this.toAffine();if(n.isOdd)return!n.isOdd(F);throw new Error("Field doesn't support isOdd")}equals(F){S(F);const{px:U,py:q,pz:X}=this,{px:ee,py:te,pz:ce}=F,ue=n.eql(n.mul(U,ce),n.mul(ee,X)),Ae=n.eql(n.mul(q,ce),n.mul(te,X));return ue&&Ae}negate(){return new M(this.px,n.neg(this.py),this.pz)}double(){const{a:F,b:U}=e,q=n.mul(U,_3n),{px:X,py:ee,pz:te}=this;let ce=n.ZERO,ue=n.ZERO,Ae=n.ZERO,we=n.mul(X,X),pe=n.mul(ee,ee),Ce=n.mul(te,te),T=n.mul(X,ee);return T=n.add(T,T),Ae=n.mul(X,te),Ae=n.add(Ae,Ae),ce=n.mul(F,Ae),ue=n.mul(q,Ce),ue=n.add(ce,ue),ce=n.sub(pe,ue),ue=n.add(pe,ue),ue=n.mul(ce,ue),ce=n.mul(T,ce),Ae=n.mul(q,Ae),Ce=n.mul(F,Ce),T=n.sub(we,Ce),T=n.mul(F,T),T=n.add(T,Ae),Ae=n.add(we,we),we=n.add(Ae,we),we=n.add(we,Ce),we=n.mul(we,T),ue=n.add(ue,we),Ce=n.mul(ee,te),Ce=n.add(Ce,Ce),we=n.mul(Ce,T),ce=n.sub(ce,we),Ae=n.mul(Ce,pe),Ae=n.add(Ae,Ae),Ae=n.add(Ae,Ae),new M(ce,ue,Ae)}add(F){S(F);const{px:U,py:q,pz:X}=this,{px:ee,py:te,pz:ce}=F;let ue=n.ZERO,Ae=n.ZERO,we=n.ZERO;const pe=e.a,Ce=n.mul(e.b,_3n);let T=n.mul(U,ee),u=n.mul(q,te),p=n.mul(X,ce),m=n.add(U,q),y=n.add(ee,te);m=n.mul(m,y),y=n.add(T,u),m=n.sub(m,y),y=n.add(U,X);let E=n.add(ee,ce);return y=n.mul(y,E),E=n.add(T,p),y=n.sub(y,E),E=n.add(q,X),ue=n.add(te,ce),E=n.mul(E,ue),ue=n.add(u,p),E=n.sub(E,ue),we=n.mul(pe,y),ue=n.mul(Ce,p),we=n.add(ue,we),ue=n.sub(u,we),we=n.add(u,we),Ae=n.mul(ue,we),u=n.add(T,T),u=n.add(u,T),p=n.mul(pe,p),y=n.mul(Ce,y),u=n.add(u,p),p=n.sub(T,p),p=n.mul(pe,p),y=n.add(y,p),T=n.mul(u,y),Ae=n.add(Ae,T),T=n.mul(E,y),ue=n.mul(m,ue),ue=n.sub(ue,T),T=n.mul(m,u),we=n.mul(E,we),we=n.add(we,T),new M(ue,Ae,we)}subtract(F){return this.add(F.negate())}is0(){return this.equals(M.ZERO)}wNAF(F){return P.wNAFCached(this,A,F,U=>{const q=n.invertBatch(U.map(X=>X.pz));return U.map((X,ee)=>X.toAffine(q[ee])).map(M.fromAffine)})}multiplyUnsafe(F){const U=M.ZERO;if(F===_0n)return U;if(b(F),F===_1n$1)return this;const{endo:q}=e;if(!q)return P.unsafeLadder(this,F);let{k1neg:X,k1:ee,k2neg:te,k2:ce}=q.splitScalar(F),ue=U,Ae=U,we=this;for(;ee>_0n||ce>_0n;)ee&_1n$1&&(ue=ue.add(we)),ce&_1n$1&&(Ae=Ae.add(we)),we=we.double(),ee>>=_1n$1,ce>>=_1n$1;return X&&(ue=ue.negate()),te&&(Ae=Ae.negate()),Ae=new M(n.mul(Ae.px,q.beta),Ae.py,Ae.pz),ue.add(Ae)}multiply(F){b(F);let U=F,q,X;const{endo:ee}=e;if(ee){const{k1neg:te,k1:ce,k2neg:ue,k2:Ae}=ee.splitScalar(U);let{p:we,f:pe}=this.wNAF(ce),{p:Ce,f:T}=this.wNAF(Ae);we=P.constTimeNegate(te,we),Ce=P.constTimeNegate(ue,Ce),Ce=new M(n.mul(Ce.px,ee.beta),Ce.py,Ce.pz),q=we.add(Ce),X=pe.add(T)}else{const{p:te,f:ce}=this.wNAF(U);q=te,X=ce}return M.normalizeZ([q,X])[0]}multiplyAndAddUnsafe(F,U,q){const X=M.BASE,ee=(ce,ue)=>ue===_0n||ue===_1n$1||!ce.equals(X)?ce.multiplyUnsafe(ue):ce.multiply(ue),te=ee(this,U).add(ee(F,q));return te.is0()?void 0:te}toAffine(F){const{px:U,py:q,pz:X}=this,ee=this.is0();F==null&&(F=ee?n.ONE:n.inv(X));const te=n.mul(U,F),ce=n.mul(q,F),ue=n.mul(X,F);if(ee)return{x:n.ZERO,y:n.ZERO};if(!n.eql(ue,n.ONE))throw new Error("invZ was invalid");return{x:te,y:ce}}isTorsionFree(){const{h:F,isTorsionFree:U}=e;if(F===_1n$1)return!0;if(U)return U(M,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:F,clearCofactor:U}=e;return F===_1n$1?this:U?U(M,this):this.multiplyUnsafe(e.h)}toRawBytes(F=!0){return this.assertValidity(),o(M,this,F)}toHex(F=!0){return bytesToHex(this.toRawBytes(F))}}M.BASE=new M(e.Gx,e.Gy,n.ONE),M.ZERO=new M(n.ZERO,n.ONE,n.ZERO);const B=e.nBitLength,P=wNAF(M,e.endo?Math.ceil(B/2):B);return{CURVE:e,ProjectivePoint:M,normPrivateKeyToScalar:v,weierstrassEquation:a,isWithinCurveOrder:l}}function validateOpts(t){const e=validateBasic(t);return validateObject(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function weierstrass(t){const e=validateOpts(t),{Fp:n,n:o}=e,c=n.BYTES+1,a=2*n.BYTES+1;function l(y){return _0n<y&&y<n.ORDER}function b(y){return mod(y,o)}function v(y){return invert(y,o)}const{ProjectivePoint:A,normPrivateKeyToScalar:S,weierstrassEquation:M,isWithinCurveOrder:B}=weierstrassPoints({...e,toBytes(y,E,$){const k=E.toAffine(),_=n.toBytes(k.x),d=concatBytes;return $?d(Uint8Array.from([E.hasEvenY()?2:3]),_):d(Uint8Array.from([4]),_,n.toBytes(k.y))},fromBytes(y){const E=y.length,$=y[0],k=y.subarray(1);if(E===c&&($===2||$===3)){const _=bytesToNumberBE(k);if(!l(_))throw new Error("Point is not on curve");const d=M(_);let w;try{w=n.sqrt(d)}catch(V){const O=V instanceof Error?": "+V.message:"";throw new Error("Point is not on curve"+O)}const I=(w&_1n$1)===_1n$1;return($&1)===1!==I&&(w=n.neg(w)),{x:_,y:w}}else if(E===a&&$===4){const _=n.fromBytes(k.subarray(0,n.BYTES)),d=n.fromBytes(k.subarray(n.BYTES,2*n.BYTES));return{x:_,y:d}}else throw new Error(`Point of length ${E} was invalid. Expected ${c} compressed bytes or ${a} uncompressed bytes`)}}),P=y=>bytesToHex(numberToBytesBE(y,e.nByteLength));function L(y){const E=o>>_1n$1;return y>E}function F(y){return L(y)?b(-y):y}const U=(y,E,$)=>bytesToNumberBE(y.slice(E,$));class q{constructor(E,$,k){this.r=E,this.s=$,this.recovery=k,this.assertValidity()}static fromCompact(E){const $=e.nByteLength;return E=ensureBytes("compactSignature",E,$*2),new q(U(E,0,$),U(E,$,2*$))}static fromDER(E){const{r:$,s:k}=DER.toSig(ensureBytes("DER",E));return new q($,k)}assertValidity(){if(!B(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!B(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(E){return new q(this.r,this.s,E)}recoverPublicKey(E){const{r:$,s:k,recovery:_}=this,d=Ae(ensureBytes("msgHash",E));if(_==null||![0,1,2,3].includes(_))throw new Error("recovery id invalid");const w=_===2||_===3?$+e.n:$;if(w>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const I=_&1?"03":"02",C=A.fromHex(I+P(w)),V=v(w),O=b(-d*V),j=b(k*V),D=A.BASE.multiplyAndAddUnsafe(C,O,j);if(!D)throw new Error("point at infinify");return D.assertValidity(),D}hasHighS(){return L(this.s)}normalizeS(){return this.hasHighS()?new q(this.r,b(-this.s),this.recovery):this}toDERRawBytes(){return hexToBytes(this.toDERHex())}toDERHex(){return DER.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return hexToBytes(this.toCompactHex())}toCompactHex(){return P(this.r)+P(this.s)}}const X={isValidPrivateKey(y){try{return S(y),!0}catch{return!1}},normPrivateKeyToScalar:S,randomPrivateKey:()=>{const y=getMinHashLength(e.n);return mapHashToField(e.randomBytes(y),e.n)},precompute(y=8,E=A.BASE){return E._setWindowSize(y),E.multiply(BigInt(3)),E}};function ee(y,E=!0){return A.fromPrivateKey(y).toRawBytes(E)}function te(y){const E=isBytes(y),$=typeof y=="string",k=(E||$)&&y.length;return E?k===c||k===a:$?k===2*c||k===2*a:y instanceof A}function ce(y,E,$=!0){if(te(y))throw new Error("first arg must be private key");if(!te(E))throw new Error("second arg must be public key");return A.fromHex(E).multiply(S(y)).toRawBytes($)}const ue=e.bits2int||function(y){const E=bytesToNumberBE(y),$=y.length*8-e.nBitLength;return $>0?E>>BigInt($):E},Ae=e.bits2int_modN||function(y){return b(ue(y))},we=bitMask(e.nBitLength);function pe(y){if(typeof y!="bigint")throw new Error("bigint expected");if(!(_0n<=y&&y<we))throw new Error(`bigint expected < 2^${e.nBitLength}`);return numberToBytesBE(y,e.nByteLength)}function Ce(y,E,$=T){if(["recovered","canonical"].some(oe=>oe in $))throw new Error("sign() legacy options not supported");const{hash:k,randomBytes:_}=e;let{lowS:d,prehash:w,extraEntropy:I}=$;d==null&&(d=!0),y=ensureBytes("msgHash",y),w&&(y=ensureBytes("prehashed msgHash",k(y)));const C=Ae(y),V=S(E),O=[pe(V),pe(C)];if(I!=null&&I!==!1){const oe=I===!0?_(n.BYTES):I;O.push(ensureBytes("extraEntropy",oe))}const j=concatBytes(...O),D=C;function Q(oe){const de=ue(oe);if(!B(de))return;const Z=v(de),H=A.BASE.multiply(de).toAffine(),ge=b(H.x);if(ge===_0n)return;const Me=b(Z*b(D+ge*V));if(Me===_0n)return;let ke=(H.x===ge?0:2)|Number(H.y&_1n$1),Ie=Me;return d&&L(Me)&&(Ie=F(Me),ke^=1),new q(ge,Ie,ke)}return{seed:j,k2sig:Q}}const T={lowS:e.lowS,prehash:!1},u={lowS:e.lowS,prehash:!1};function p(y,E,$=T){const{seed:k,k2sig:_}=Ce(y,E,$),d=e;return createHmacDrbg(d.hash.outputLen,d.nByteLength,d.hmac)(k,_)}A.BASE._setWindowSize(8);function m(y,E,$,k=u){const _=y;if(E=ensureBytes("msgHash",E),$=ensureBytes("publicKey",$),"strict"in k)throw new Error("options.strict was renamed to lowS");const{lowS:d,prehash:w}=k;let I,C;try{if(typeof _=="string"||isBytes(_))try{I=q.fromDER(_)}catch(H){if(!(H instanceof DER.Err))throw H;I=q.fromCompact(_)}else if(typeof _=="object"&&typeof _.r=="bigint"&&typeof _.s=="bigint"){const{r:H,s:ge}=_;I=new q(H,ge)}else throw new Error("PARSE");C=A.fromHex($)}catch(H){if(H.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(d&&I.hasHighS())return!1;w&&(E=e.hash(E));const{r:V,s:O}=I,j=Ae(E),D=v(O),Q=b(j*D),oe=b(V*D),de=A.BASE.multiplyAndAddUnsafe(C,Q,oe)?.toAffine();return de?b(de.x)===V:!1}return{CURVE:e,getPublicKey:ee,getSharedSecret:ce,sign:p,verify:m,ProjectivePoint:A,Signature:q,utils:X}}function getHash(t){return{hash:t,hmac:(e,...n)=>hmac$1.hmac(t,e,utils$h.concatBytes(...n)),randomBytes:utils$h.randomBytes}}function createCurve(t,e){const n=o=>weierstrass({...t,...getHash(o)});return Object.freeze({...n(e),create:n})}const secp256k1P=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),secp256k1N=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),_1n=BigInt(1),_2n=BigInt(2),divNearest=(t,e)=>(t+e/_2n)/e;function sqrtMod(t){const e=secp256k1P,n=BigInt(3),o=BigInt(6),c=BigInt(11),a=BigInt(22),l=BigInt(23),b=BigInt(44),v=BigInt(88),A=t*t*t%e,S=A*A*t%e,M=pow2(S,n,e)*S%e,B=pow2(M,n,e)*S%e,P=pow2(B,_2n,e)*A%e,L=pow2(P,c,e)*P%e,F=pow2(L,a,e)*L%e,U=pow2(F,b,e)*F%e,q=pow2(U,v,e)*U%e,X=pow2(q,b,e)*F%e,ee=pow2(X,n,e)*S%e,te=pow2(ee,l,e)*L%e,ce=pow2(te,o,e)*A%e,ue=pow2(ce,_2n,e);if(!Fp.eql(Fp.sqr(ue),t))throw new Error("Cannot find square root");return ue}const Fp=Field(secp256k1P,void 0,void 0,{sqrt:sqrtMod}),secp256k1=createCurve({a:BigInt(0),b:BigInt(7),Fp,n:secp256k1N,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=secp256k1N,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),o=-_1n*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),c=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),a=n,l=BigInt("0x100000000000000000000000000000000"),b=divNearest(a*t,e),v=divNearest(-o*t,e);let A=mod(t-b*n-v*c,e),S=mod(-b*o-v*a,e);const M=A>l,B=S>l;if(M&&(A=e-A),B&&(S=e-S),A>l||S>l)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:M,k1:A,k2neg:B,k2:S}}}},sha256_1$3);BigInt(0);secp256k1.ProjectivePoint;const generateKeypair=()=>{const t=ed25519.utils.randomPrivateKey(),e=getPublicKey(t),n=new Uint8Array(64);return n.set(t),n.set(e,32),{publicKey:e,secretKey:n}},getPublicKey=ed25519.getPublicKey;function isOnCurve(t){try{return ed25519.ExtendedPoint.fromHex(t),!0}catch{return!1}}const sign=(t,e)=>ed25519.sign(t,e.slice(0,32)),verify=ed25519.verify,toBuffer=t=>Buffer$1$1.isBuffer(t)?t:t instanceof Uint8Array?Buffer$1$1.from(t.buffer,t.byteOffset,t.byteLength):Buffer$1$1.from(t);class Struct{constructor(e){Object.assign(this,e)}encode(){return Buffer$1$1.from(serialize_1(SOLANA_SCHEMA,this))}static decode(e){return deserialize_1(SOLANA_SCHEMA,this,e)}static decodeUnchecked(e){return deserializeUnchecked_1(SOLANA_SCHEMA,this,e)}}const SOLANA_SCHEMA=new Map;var _PublicKey;const MAX_SEED_LENGTH=32,PUBLIC_KEY_LENGTH=32;function isPublicKeyData(t){return t._bn!==void 0}let uniquePublicKeyCounter=1;class PublicKey extends Struct{constructor(e){if(super({}),this._bn=void 0,isPublicKeyData(e))this._bn=e._bn;else{if(typeof e=="string"){const n=bs58$2.decode(e);if(n.length!=PUBLIC_KEY_LENGTH)throw new Error("Invalid public key input");this._bn=new BN$c(n)}else this._bn=new BN$c(e);if(this._bn.byteLength()>PUBLIC_KEY_LENGTH)throw new Error("Invalid public key input")}}static unique(){const e=new PublicKey(uniquePublicKeyCounter);return uniquePublicKeyCounter+=1,new PublicKey(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return bs58$2.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){const e=this._bn.toArrayLike(Buffer$1$1);if(e.length===PUBLIC_KEY_LENGTH)return e;const n=Buffer$1$1.alloc(32);return e.copy(n,32-e.length),n}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,n,o){const c=Buffer$1$1.concat([e.toBuffer(),Buffer$1$1.from(n),o.toBuffer()]),a=sha256_1$3(c);return new PublicKey(a)}static createProgramAddressSync(e,n){let o=Buffer$1$1.alloc(0);e.forEach(function(a){if(a.length>MAX_SEED_LENGTH)throw new TypeError("Max seed length exceeded");o=Buffer$1$1.concat([o,toBuffer(a)])}),o=Buffer$1$1.concat([o,n.toBuffer(),Buffer$1$1.from("ProgramDerivedAddress")]);const c=sha256_1$3(o);if(isOnCurve(c))throw new Error("Invalid seeds, address must fall off the curve");return new PublicKey(c)}static async createProgramAddress(e,n){return this.createProgramAddressSync(e,n)}static findProgramAddressSync(e,n){let o=255,c;for(;o!=0;){try{const a=e.concat(Buffer$1$1.from([o]));c=this.createProgramAddressSync(a,n)}catch(a){if(a instanceof TypeError)throw a;o--;continue}return[c,o]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,n){return this.findProgramAddressSync(e,n)}static isOnCurve(e){const n=new PublicKey(e);return isOnCurve(n.toBytes())}}_PublicKey=PublicKey;PublicKey.default=new _PublicKey("11111111111111111111111111111111");SOLANA_SCHEMA.set(PublicKey,{kind:"struct",fields:[["_bn","u256"]]});new PublicKey("BPFLoader1111111111111111111111111111111111");const PACKET_DATA_SIZE=1232,VERSION_PREFIX_MASK=127,SIGNATURE_LENGTH_IN_BYTES=64;class TransactionExpiredBlockheightExceededError extends Error{constructor(e){super(`Signature ${e} has expired: block height exceeded.`),this.signature=void 0,this.signature=e}}Object.defineProperty(TransactionExpiredBlockheightExceededError.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class TransactionExpiredTimeoutError extends Error{constructor(e,n){super(`Transaction was not confirmed in ${n.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${e} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=e}}Object.defineProperty(TransactionExpiredTimeoutError.prototype,"name",{value:"TransactionExpiredTimeoutError"});class TransactionExpiredNonceInvalidError extends Error{constructor(e){super(`Signature ${e} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=e}}Object.defineProperty(TransactionExpiredNonceInvalidError.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class MessageAccountKeys{constructor(e,n){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=n}keySegments(){const e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(const n of this.keySegments()){if(e<n.length)return n[e];e-=n.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const o=new Map;this.keySegments().flat().forEach((a,l)=>{o.set(a.toBase58(),l)});const c=a=>{const l=o.get(a.toBase58());if(l===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return l};return e.map(a=>({programIdIndex:c(a.programId),accountKeyIndexes:a.keys.map(l=>c(l.pubkey)),data:a.data}))}}const publicKey$1=(t="publicKey")=>blob(32,t),rustString=(t="string")=>{const e=struct([u32("length"),u32("lengthPadding"),blob(offset(u32(),-8),"chars")],t),n=e.decode.bind(e),o=e.encode.bind(e),c=e;return c.decode=(a,l)=>n(a,l).chars.toString(),c.encode=(a,l,b)=>{const v={chars:Buffer$1$1.from(a,"utf8")};return o(v,l,b)},c.alloc=a=>u32().span+u32().span+Buffer$1$1.from(a,"utf8").length,c},authorized=(t="authorized")=>struct([publicKey$1("staker"),publicKey$1("withdrawer")],t),lockup=(t="lockup")=>struct([ns64("unixTimestamp"),ns64("epoch"),publicKey$1("custodian")],t),voteInit=(t="voteInit")=>struct([publicKey$1("nodePubkey"),publicKey$1("authorizedVoter"),publicKey$1("authorizedWithdrawer"),u8("commission")],t),voteAuthorizeWithSeedArgs=(t="voteAuthorizeWithSeedArgs")=>struct([u32("voteAuthorizationType"),publicKey$1("currentAuthorityDerivedKeyOwnerPubkey"),rustString("currentAuthorityDerivedKeySeed"),publicKey$1("newAuthorized")],t);function getAlloc(t,e){const n=c=>{if(c.span>=0)return c.span;if(typeof c.alloc=="function")return c.alloc(e[c.property]);if("count"in c&&"elementLayout"in c){const a=e[c.property];if(Array.isArray(a))return a.length*n(c.elementLayout)}else if("fields"in c)return getAlloc({layout:c},e[c.property]);return 0};let o=0;return t.layout.fields.forEach(c=>{o+=n(c)}),o}function decodeLength(t){let e=0,n=0;for(;;){let o=t.shift();if(e|=(o&127)<<n*7,n+=1,!(o&128))break}return e}function encodeLength(t,e){let n=e;for(;;){let o=n&127;if(n>>=7,n==0){t.push(o);break}else o|=128,t.push(o)}}function assert(t,e){if(!t)throw new Error(e||"Assertion failed")}class CompiledKeys{constructor(e,n){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=n}static compile(e,n){const o=new Map,c=l=>{const b=l.toBase58();let v=o.get(b);return v===void 0&&(v={isSigner:!1,isWritable:!1,isInvoked:!1},o.set(b,v)),v},a=c(n);a.isSigner=!0,a.isWritable=!0;for(const l of e){c(l.programId).isInvoked=!0;for(const b of l.keys){const v=c(b.pubkey);v.isSigner||=b.isSigner,v.isWritable||=b.isWritable}}return new CompiledKeys(n,o)}getMessageComponents(){const e=[...this.keyMetaMap.entries()];assert(e.length<=256,"Max static account keys length exceeded");const n=e.filter(([,v])=>v.isSigner&&v.isWritable),o=e.filter(([,v])=>v.isSigner&&!v.isWritable),c=e.filter(([,v])=>!v.isSigner&&v.isWritable),a=e.filter(([,v])=>!v.isSigner&&!v.isWritable),l={numRequiredSignatures:n.length+o.length,numReadonlySignedAccounts:o.length,numReadonlyUnsignedAccounts:a.length};{assert(n.length>0,"Expected at least one writable signer key");const[v]=n[0];assert(v===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const b=[...n.map(([v])=>new PublicKey(v)),...o.map(([v])=>new PublicKey(v)),...c.map(([v])=>new PublicKey(v)),...a.map(([v])=>new PublicKey(v))];return[l,b]}extractTableLookup(e){const[n,o]=this.drainKeysFoundInLookupTable(e.state.addresses,l=>!l.isSigner&&!l.isInvoked&&l.isWritable),[c,a]=this.drainKeysFoundInLookupTable(e.state.addresses,l=>!l.isSigner&&!l.isInvoked&&!l.isWritable);if(!(n.length===0&&c.length===0))return[{accountKey:e.key,writableIndexes:n,readonlyIndexes:c},{writable:o,readonly:a}]}drainKeysFoundInLookupTable(e,n){const o=new Array,c=new Array;for(const[a,l]of this.keyMetaMap.entries())if(n(l)){const b=new PublicKey(a),v=e.findIndex(A=>A.equals(b));v>=0&&(assert(v<256,"Max lookup table index exceeded"),o.push(v),c.push(b),this.keyMetaMap.delete(a))}return[o,c]}}const END_OF_BUFFER_ERROR_MESSAGE="Reached end of buffer unexpectedly";function guardedShift(t){if(t.length===0)throw new Error(END_OF_BUFFER_ERROR_MESSAGE);return t.shift()}function guardedSplice(t,...e){const[n]=e;if(e.length===2?n+(e[1]??0)>t.length:n>=t.length)throw new Error(END_OF_BUFFER_ERROR_MESSAGE);return t.splice(...e)}class Message{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map(n=>new PublicKey(n)),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach(n=>this.indexToProgramIds.set(n.programIdIndex,this.accountKeys[n.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:bs58$2.decode(e.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new MessageAccountKeys(this.staticAccountKeys)}static compile(e){const n=CompiledKeys.compile(e.instructions,e.payerKey),[o,c]=n.getMessageComponents(),l=new MessageAccountKeys(c).compileInstructions(e.instructions).map(b=>({programIdIndex:b.programIdIndex,accounts:b.accountKeyIndexes,data:bs58$2.encode(b.data)}));return new Message({header:o,accountKeys:c,recentBlockhash:e.recentBlockhash,instructions:l})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const n=this.header.numRequiredSignatures;if(e>=this.header.numRequiredSignatures){const o=e-n,a=this.accountKeys.length-n-this.header.numReadonlyUnsignedAccounts;return o<a}else{const o=n-this.header.numReadonlySignedAccounts;return e<o}}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((e,n)=>!this.isProgramId(n))}serialize(){const e=this.accountKeys.length;let n=[];encodeLength(n,e);const o=this.instructions.map(M=>{const{accounts:B,programIdIndex:P}=M,L=Array.from(bs58$2.decode(M.data));let F=[];encodeLength(F,B.length);let U=[];return encodeLength(U,L.length),{programIdIndex:P,keyIndicesCount:Buffer$1$1.from(F),keyIndices:B,dataLength:Buffer$1$1.from(U),data:L}});let c=[];encodeLength(c,o.length);let a=Buffer$1$1.alloc(PACKET_DATA_SIZE);Buffer$1$1.from(c).copy(a);let l=c.length;o.forEach(M=>{const P=struct([u8("programIdIndex"),blob(M.keyIndicesCount.length,"keyIndicesCount"),seq(u8("keyIndex"),M.keyIndices.length,"keyIndices"),blob(M.dataLength.length,"dataLength"),seq(u8("userdatum"),M.data.length,"data")]).encode(M,a,l);l+=P}),a=a.slice(0,l);const b=struct([blob(1,"numRequiredSignatures"),blob(1,"numReadonlySignedAccounts"),blob(1,"numReadonlyUnsignedAccounts"),blob(n.length,"keyCount"),seq(publicKey$1("key"),e,"keys"),publicKey$1("recentBlockhash")]),v={numRequiredSignatures:Buffer$1$1.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:Buffer$1$1.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:Buffer$1$1.from([this.header.numReadonlyUnsignedAccounts]),keyCount:Buffer$1$1.from(n),keys:this.accountKeys.map(M=>toBuffer(M.toBytes())),recentBlockhash:bs58$2.decode(this.recentBlockhash)};let A=Buffer$1$1.alloc(2048);const S=b.encode(v,A);return a.copy(A,S),A.slice(0,S+a.length)}static from(e){let n=[...e];const o=guardedShift(n);if(o!==(o&VERSION_PREFIX_MASK))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const c=guardedShift(n),a=guardedShift(n),l=decodeLength(n);let b=[];for(let B=0;B<l;B++){const P=guardedSplice(n,0,PUBLIC_KEY_LENGTH);b.push(new PublicKey(Buffer$1$1.from(P)))}const v=guardedSplice(n,0,PUBLIC_KEY_LENGTH),A=decodeLength(n);let S=[];for(let B=0;B<A;B++){const P=guardedShift(n),L=decodeLength(n),F=guardedSplice(n,0,L),U=decodeLength(n),q=guardedSplice(n,0,U),X=bs58$2.encode(Buffer$1$1.from(q));S.push({programIdIndex:P,accounts:F,data:X})}const M={header:{numRequiredSignatures:o,numReadonlySignedAccounts:c,numReadonlyUnsignedAccounts:a},recentBlockhash:bs58$2.encode(Buffer$1$1.from(v)),accountKeys:b,instructions:S};return new Message(M)}}class MessageV0{constructor(e){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=e.header,this.staticAccountKeys=e.staticAccountKeys,this.recentBlockhash=e.recentBlockhash,this.compiledInstructions=e.compiledInstructions,this.addressTableLookups=e.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let e=0;for(const n of this.addressTableLookups)e+=n.readonlyIndexes.length+n.writableIndexes.length;return e}getAccountKeys(e){let n;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");n=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)n=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new MessageAccountKeys(this.staticAccountKeys,n)}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const n=this.header.numRequiredSignatures,o=this.staticAccountKeys.length;if(e>=o){const c=e-o,a=this.addressTableLookups.reduce((l,b)=>l+b.writableIndexes.length,0);return c<a}else if(e>=this.header.numRequiredSignatures){const c=e-n,l=o-n-this.header.numReadonlyUnsignedAccounts;return c<l}else{const c=n-this.header.numReadonlySignedAccounts;return e<c}}resolveAddressTableLookups(e){const n={writable:[],readonly:[]};for(const o of this.addressTableLookups){const c=e.find(a=>a.key.equals(o.accountKey));if(!c)throw new Error(`Failed to find address lookup table account for table key ${o.accountKey.toBase58()}`);for(const a of o.writableIndexes)if(a<c.state.addresses.length)n.writable.push(c.state.addresses[a]);else throw new Error(`Failed to find address for index ${a} in address lookup table ${o.accountKey.toBase58()}`);for(const a of o.readonlyIndexes)if(a<c.state.addresses.length)n.readonly.push(c.state.addresses[a]);else throw new Error(`Failed to find address for index ${a} in address lookup table ${o.accountKey.toBase58()}`)}return n}static compile(e){const n=CompiledKeys.compile(e.instructions,e.payerKey),o=new Array,c={writable:new Array,readonly:new Array},a=e.addressLookupTableAccounts||[];for(const S of a){const M=n.extractTableLookup(S);if(M!==void 0){const[B,{writable:P,readonly:L}]=M;o.push(B),c.writable.push(...P),c.readonly.push(...L)}}const[l,b]=n.getMessageComponents(),A=new MessageAccountKeys(b,c).compileInstructions(e.instructions);return new MessageV0({header:l,staticAccountKeys:b,recentBlockhash:e.recentBlockhash,compiledInstructions:A,addressTableLookups:o})}serialize(){const e=Array();encodeLength(e,this.staticAccountKeys.length);const n=this.serializeInstructions(),o=Array();encodeLength(o,this.compiledInstructions.length);const c=this.serializeAddressTableLookups(),a=Array();encodeLength(a,this.addressTableLookups.length);const l=struct([u8("prefix"),struct([u8("numRequiredSignatures"),u8("numReadonlySignedAccounts"),u8("numReadonlyUnsignedAccounts")],"header"),blob(e.length,"staticAccountKeysLength"),seq(publicKey$1(),this.staticAccountKeys.length,"staticAccountKeys"),publicKey$1("recentBlockhash"),blob(o.length,"instructionsLength"),blob(n.length,"serializedInstructions"),blob(a.length,"addressTableLookupsLength"),blob(c.length,"serializedAddressTableLookups")]),b=new Uint8Array(PACKET_DATA_SIZE),A=l.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map(S=>S.toBytes()),recentBlockhash:bs58$2.decode(this.recentBlockhash),instructionsLength:new Uint8Array(o),serializedInstructions:n,addressTableLookupsLength:new Uint8Array(a),serializedAddressTableLookups:c},b);return b.slice(0,A)}serializeInstructions(){let e=0;const n=new Uint8Array(PACKET_DATA_SIZE);for(const o of this.compiledInstructions){const c=Array();encodeLength(c,o.accountKeyIndexes.length);const a=Array();encodeLength(a,o.data.length);const l=struct([u8("programIdIndex"),blob(c.length,"encodedAccountKeyIndexesLength"),seq(u8(),o.accountKeyIndexes.length,"accountKeyIndexes"),blob(a.length,"encodedDataLength"),blob(o.data.length,"data")]);e+=l.encode({programIdIndex:o.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(c),accountKeyIndexes:o.accountKeyIndexes,encodedDataLength:new Uint8Array(a),data:o.data},n,e)}return n.slice(0,e)}serializeAddressTableLookups(){let e=0;const n=new Uint8Array(PACKET_DATA_SIZE);for(const o of this.addressTableLookups){const c=Array();encodeLength(c,o.writableIndexes.length);const a=Array();encodeLength(a,o.readonlyIndexes.length);const l=struct([publicKey$1("accountKey"),blob(c.length,"encodedWritableIndexesLength"),seq(u8(),o.writableIndexes.length,"writableIndexes"),blob(a.length,"encodedReadonlyIndexesLength"),seq(u8(),o.readonlyIndexes.length,"readonlyIndexes")]);e+=l.encode({accountKey:o.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(c),writableIndexes:o.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(a),readonlyIndexes:o.readonlyIndexes},n,e)}return n.slice(0,e)}static deserialize(e){let n=[...e];const o=guardedShift(n),c=o&VERSION_PREFIX_MASK;assert(o!==c,"Expected versioned message but received legacy message");const a=c;assert(a===0,`Expected versioned message with version 0 but found version ${a}`);const l={numRequiredSignatures:guardedShift(n),numReadonlySignedAccounts:guardedShift(n),numReadonlyUnsignedAccounts:guardedShift(n)},b=[],v=decodeLength(n);for(let L=0;L<v;L++)b.push(new PublicKey(guardedSplice(n,0,PUBLIC_KEY_LENGTH)));const A=bs58$2.encode(guardedSplice(n,0,PUBLIC_KEY_LENGTH)),S=decodeLength(n),M=[];for(let L=0;L<S;L++){const F=guardedShift(n),U=decodeLength(n),q=guardedSplice(n,0,U),X=decodeLength(n),ee=new Uint8Array(guardedSplice(n,0,X));M.push({programIdIndex:F,accountKeyIndexes:q,data:ee})}const B=decodeLength(n),P=[];for(let L=0;L<B;L++){const F=new PublicKey(guardedSplice(n,0,PUBLIC_KEY_LENGTH)),U=decodeLength(n),q=guardedSplice(n,0,U),X=decodeLength(n),ee=guardedSplice(n,0,X);P.push({accountKey:F,writableIndexes:q,readonlyIndexes:ee})}return new MessageV0({header:l,staticAccountKeys:b,recentBlockhash:A,compiledInstructions:M,addressTableLookups:P})}}let TransactionStatus=function(t){return t[t.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",t[t.PROCESSED=1]="PROCESSED",t[t.TIMED_OUT=2]="TIMED_OUT",t[t.NONCE_INVALID=3]="NONCE_INVALID",t}({});const DEFAULT_SIGNATURE=Buffer$1$1.alloc(SIGNATURE_LENGTH_IN_BYTES).fill(0);class TransactionInstruction{constructor(e){this.keys=void 0,this.programId=void 0,this.data=Buffer$1$1.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map(({pubkey:e,isSigner:n,isWritable:o})=>({pubkey:e.toJSON(),isSigner:n,isWritable:o})),programId:this.programId.toJSON(),data:[...this.data]}}}class Transaction{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){const{minContextSlot:n,nonceInfo:o}=e;this.minNonceContextSlot=n,this.nonceInfo=o}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){const{blockhash:n,lastValidBlockHeight:o}=e;this.recentBlockhash=n,this.lastValidBlockHeight=o}else{const{recentBlockhash:n,nonceInfo:o}=e;o&&(this.nonceInfo=o),this.recentBlockhash=n}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(e=>e.toJSON()),signers:this.signatures.map(({publicKey:e})=>e.toJSON())}}add(...e){if(e.length===0)throw new Error("No instructions");return e.forEach(n=>{"instructions"in n?this.instructions=this.instructions.concat(n.instructions):"data"in n&&"programId"in n&&"keys"in n?this.instructions.push(n):this.instructions.push(new TransactionInstruction(n))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,n;if(this.nonceInfo?(e=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?n=[this.nonceInfo.nonceInstruction,...this.instructions]:n=this.instructions):(e=this.recentBlockhash,n=this.instructions),!e)throw new Error("Transaction recentBlockhash required");n.length<1&&console.warn("No instructions provided");let o;if(this.feePayer)o=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)o=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let F=0;F<n.length;F++)if(n[F].programId===void 0)throw new Error(`Transaction instruction index ${F} has undefined program id`);const c=[],a=[];n.forEach(F=>{F.keys.forEach(q=>{a.push({...q})});const U=F.programId.toString();c.includes(U)||c.push(U)}),c.forEach(F=>{a.push({pubkey:new PublicKey(F),isSigner:!1,isWritable:!1})});const l=[];a.forEach(F=>{const U=F.pubkey.toString(),q=l.findIndex(X=>X.pubkey.toString()===U);q>-1?(l[q].isWritable=l[q].isWritable||F.isWritable,l[q].isSigner=l[q].isSigner||F.isSigner):l.push(F)}),l.sort(function(F,U){if(F.isSigner!==U.isSigner)return F.isSigner?-1:1;if(F.isWritable!==U.isWritable)return F.isWritable?-1:1;const q={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return F.pubkey.toBase58().localeCompare(U.pubkey.toBase58(),"en",q)});const b=l.findIndex(F=>F.pubkey.equals(o));if(b>-1){const[F]=l.splice(b,1);F.isSigner=!0,F.isWritable=!0,l.unshift(F)}else l.unshift({pubkey:o,isSigner:!0,isWritable:!0});for(const F of this.signatures){const U=l.findIndex(q=>q.pubkey.equals(F.publicKey));if(U>-1)l[U].isSigner||(l[U].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${F.publicKey.toString()}`)}let v=0,A=0,S=0;const M=[],B=[];l.forEach(({pubkey:F,isSigner:U,isWritable:q})=>{U?(M.push(F.toString()),v+=1,q||(A+=1)):(B.push(F.toString()),q||(S+=1))});const P=M.concat(B),L=n.map(F=>{const{data:U,programId:q}=F;return{programIdIndex:P.indexOf(q.toString()),accounts:F.keys.map(X=>P.indexOf(X.pubkey.toString())),data:bs58$2.encode(U)}});return L.forEach(F=>{assert(F.programIdIndex>=0),F.accounts.forEach(U=>assert(U>=0))}),new Message({header:{numRequiredSignatures:v,numReadonlySignedAccounts:A,numReadonlyUnsignedAccounts:S},accountKeys:P,recentBlockhash:e,instructions:L})}_compile(){const e=this.compileMessage(),n=e.accountKeys.slice(0,e.header.numRequiredSignatures);return this.signatures.length===n.length&&this.signatures.every((c,a)=>n[a].equals(c.publicKey))||(this.signatures=n.map(o=>({signature:null,publicKey:o}))),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(e.length===0)throw new Error("No signers");const n=new Set;this.signatures=e.filter(o=>{const c=o.toString();return n.has(c)?!1:(n.add(c),!0)}).map(o=>({signature:null,publicKey:o}))}sign(...e){if(e.length===0)throw new Error("No signers");const n=new Set,o=[];for(const a of e){const l=a.publicKey.toString();n.has(l)||(n.add(l),o.push(a))}this.signatures=o.map(a=>({signature:null,publicKey:a.publicKey}));const c=this._compile();this._partialSign(c,...o)}partialSign(...e){if(e.length===0)throw new Error("No signers");const n=new Set,o=[];for(const a of e){const l=a.publicKey.toString();n.has(l)||(n.add(l),o.push(a))}const c=this._compile();this._partialSign(c,...o)}_partialSign(e,...n){const o=e.serialize();n.forEach(c=>{const a=sign(o,c.secretKey);this._addSignature(c.publicKey,toBuffer(a))})}addSignature(e,n){this._compile(),this._addSignature(e,n)}_addSignature(e,n){assert(n.length===64);const o=this.signatures.findIndex(c=>e.equals(c.publicKey));if(o<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[o].signature=Buffer$1$1.from(n)}verifySignatures(e=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),e)}_getMessageSignednessErrors(e,n){const o={};for(const{signature:c,publicKey:a}of this.signatures)c===null?n&&(o.missing||=[]).push(a):verify(c,e,a.toBytes())||(o.invalid||=[]).push(a);return o.invalid||o.missing?o:void 0}serialize(e){const{requireAllSignatures:n,verifySignatures:o}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),c=this.serializeMessage();if(o){const a=this._getMessageSignednessErrors(c,n);if(a){let l="Signature verification failed.";throw a.invalid&&(l+=`
Invalid signature for public key${a.invalid.length===1?"":"(s)"} [\`${a.invalid.map(b=>b.toBase58()).join("`, `")}\`].`),a.missing&&(l+=`
Missing signature for public key${a.missing.length===1?"":"(s)"} [\`${a.missing.map(b=>b.toBase58()).join("`, `")}\`].`),new Error(l)}}return this._serialize(c)}_serialize(e){const{signatures:n}=this,o=[];encodeLength(o,n.length);const c=o.length+n.length*64+e.length,a=Buffer$1$1.alloc(c);return assert(n.length<256),Buffer$1$1.from(o).copy(a,0),n.forEach(({signature:l},b)=>{l!==null&&(assert(l.length===64,"signature has invalid length"),Buffer$1$1.from(l).copy(a,o.length+b*64))}),e.copy(a,o.length+n.length*64),assert(a.length<=PACKET_DATA_SIZE,`Transaction too large: ${a.length} > ${PACKET_DATA_SIZE}`),a}get keys(){return assert(this.instructions.length===1),this.instructions[0].keys.map(e=>e.pubkey)}get programId(){return assert(this.instructions.length===1),this.instructions[0].programId}get data(){return assert(this.instructions.length===1),this.instructions[0].data}static from(e){let n=[...e];const o=decodeLength(n);let c=[];for(let a=0;a<o;a++){const l=guardedSplice(n,0,SIGNATURE_LENGTH_IN_BYTES);c.push(bs58$2.encode(Buffer$1$1.from(l)))}return Transaction.populate(Message.from(n),c)}static populate(e,n=[]){const o=new Transaction;return o.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(o.feePayer=e.accountKeys[0]),n.forEach((c,a)=>{const l={signature:c==bs58$2.encode(DEFAULT_SIGNATURE)?null:bs58$2.decode(c),publicKey:e.accountKeys[a]};o.signatures.push(l)}),e.instructions.forEach(c=>{const a=c.accounts.map(l=>{const b=e.accountKeys[l];return{pubkey:b,isSigner:o.signatures.some(v=>v.publicKey.toString()===b.toString())||e.isAccountSigner(l),isWritable:e.isAccountWritable(l)}});o.instructions.push(new TransactionInstruction({keys:a,programId:e.accountKeys[c.programIdIndex],data:bs58$2.decode(c.data)}))}),o._message=e,o._json=o.toJSON(),o}}const NUM_TICKS_PER_SECOND=160,DEFAULT_TICKS_PER_SLOT=64,NUM_SLOTS_PER_SECOND=NUM_TICKS_PER_SECOND/DEFAULT_TICKS_PER_SLOT,MS_PER_SLOT=1e3/NUM_SLOTS_PER_SECOND;new PublicKey("SysvarC1ock11111111111111111111111111111111");new PublicKey("SysvarEpochSchedu1e111111111111111111111111");new PublicKey("Sysvar1nstructions1111111111111111111111111");const SYSVAR_RECENT_BLOCKHASHES_PUBKEY=new PublicKey("SysvarRecentB1ockHashes11111111111111111111"),SYSVAR_RENT_PUBKEY=new PublicKey("SysvarRent111111111111111111111111111111111");new PublicKey("SysvarRewards111111111111111111111111111111");new PublicKey("SysvarS1otHashes111111111111111111111111111");new PublicKey("SysvarS1otHistory11111111111111111111111111");new PublicKey("SysvarStakeHistory1111111111111111111111111");async function sendAndConfirmTransaction(t,e,n,o){const c=o&&{skipPreflight:o.skipPreflight,preflightCommitment:o.preflightCommitment||o.commitment,maxRetries:o.maxRetries,minContextSlot:o.minContextSlot},a=await t.sendTransaction(e,n,c);let l;if(e.recentBlockhash!=null&&e.lastValidBlockHeight!=null)l=(await t.confirmTransaction({abortSignal:o?.abortSignal,signature:a,blockhash:e.recentBlockhash,lastValidBlockHeight:e.lastValidBlockHeight},o&&o.commitment)).value;else if(e.minNonceContextSlot!=null&&e.nonceInfo!=null){const{nonceInstruction:b}=e.nonceInfo,v=b.keys[0].pubkey;l=(await t.confirmTransaction({abortSignal:o?.abortSignal,minContextSlot:e.minNonceContextSlot,nonceAccountPubkey:v,nonceValue:e.nonceInfo.nonce,signature:a},o&&o.commitment)).value}else o?.abortSignal!=null&&console.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),l=(await t.confirmTransaction(a,o&&o.commitment)).value;if(l.err)throw new Error(`Transaction ${a} failed (${JSON.stringify(l)})`);return a}function sleep(t){return new Promise(e=>setTimeout(e,t))}function encodeData(t,e){const n=t.layout.span>=0?t.layout.span:getAlloc(t,e),o=Buffer$1$1.alloc(n),c=Object.assign({instruction:t.index},e);return t.layout.encode(c,o),o}const FeeCalculatorLayout=nu64("lamportsPerSignature"),NonceAccountLayout=struct([u32("version"),u32("state"),publicKey$1("authorizedPubkey"),publicKey$1("nonce"),struct([FeeCalculatorLayout],"feeCalculator")]),NONCE_ACCOUNT_LENGTH=NonceAccountLayout.span;class NonceAccount{constructor(e){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=e.authorizedPubkey,this.nonce=e.nonce,this.feeCalculator=e.feeCalculator}static fromAccountData(e){const n=NonceAccountLayout.decode(toBuffer(e),0);return new NonceAccount({authorizedPubkey:new PublicKey(n.authorizedPubkey),nonce:new PublicKey(n.nonce).toString(),feeCalculator:n.feeCalculator})}}const encodeDecode$1=t=>{const e=t.decode.bind(t),n=t.encode.bind(t);return{decode:e,encode:n}},bigInt$1=t=>e=>{const n=blob(t,e),{encode:o,decode:c}=encodeDecode$1(n),a=n;return a.decode=(l,b)=>{const v=c(l,b);return toBigIntLE_1(Buffer$1$1.from(v))},a.encode=(l,b,v)=>{const A=toBufferLE_1(l,t);return o(A,b,v)},a},u64$1=bigInt$1(8),SYSTEM_INSTRUCTION_LAYOUTS=Object.freeze({Create:{index:0,layout:struct([u32("instruction"),ns64("lamports"),ns64("space"),publicKey$1("programId")])},Assign:{index:1,layout:struct([u32("instruction"),publicKey$1("programId")])},Transfer:{index:2,layout:struct([u32("instruction"),u64$1("lamports")])},CreateWithSeed:{index:3,layout:struct([u32("instruction"),publicKey$1("base"),rustString("seed"),ns64("lamports"),ns64("space"),publicKey$1("programId")])},AdvanceNonceAccount:{index:4,layout:struct([u32("instruction")])},WithdrawNonceAccount:{index:5,layout:struct([u32("instruction"),ns64("lamports")])},InitializeNonceAccount:{index:6,layout:struct([u32("instruction"),publicKey$1("authorized")])},AuthorizeNonceAccount:{index:7,layout:struct([u32("instruction"),publicKey$1("authorized")])},Allocate:{index:8,layout:struct([u32("instruction"),ns64("space")])},AllocateWithSeed:{index:9,layout:struct([u32("instruction"),publicKey$1("base"),rustString("seed"),ns64("space"),publicKey$1("programId")])},AssignWithSeed:{index:10,layout:struct([u32("instruction"),publicKey$1("base"),rustString("seed"),publicKey$1("programId")])},TransferWithSeed:{index:11,layout:struct([u32("instruction"),u64$1("lamports"),rustString("seed"),publicKey$1("programId")])},UpgradeNonceAccount:{index:12,layout:struct([u32("instruction")])}});class SystemProgram{constructor(){}static createAccount(e){const n=SYSTEM_INSTRUCTION_LAYOUTS.Create,o=encodeData(n,{lamports:e.lamports,space:e.space,programId:toBuffer(e.programId.toBuffer())});return new TransactionInstruction({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:o})}static transfer(e){let n,o;if("basePubkey"in e){const c=SYSTEM_INSTRUCTION_LAYOUTS.TransferWithSeed;n=encodeData(c,{lamports:BigInt(e.lamports),seed:e.seed,programId:toBuffer(e.programId.toBuffer())}),o=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}else{const c=SYSTEM_INSTRUCTION_LAYOUTS.Transfer;n=encodeData(c,{lamports:BigInt(e.lamports)}),o=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}return new TransactionInstruction({keys:o,programId:this.programId,data:n})}static assign(e){let n,o;if("basePubkey"in e){const c=SYSTEM_INSTRUCTION_LAYOUTS.AssignWithSeed;n=encodeData(c,{base:toBuffer(e.basePubkey.toBuffer()),seed:e.seed,programId:toBuffer(e.programId.toBuffer())}),o=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const c=SYSTEM_INSTRUCTION_LAYOUTS.Assign;n=encodeData(c,{programId:toBuffer(e.programId.toBuffer())}),o=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new TransactionInstruction({keys:o,programId:this.programId,data:n})}static createAccountWithSeed(e){const n=SYSTEM_INSTRUCTION_LAYOUTS.CreateWithSeed,o=encodeData(n,{base:toBuffer(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:toBuffer(e.programId.toBuffer())});let c=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey!=e.fromPubkey&&c.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new TransactionInstruction({keys:c,programId:this.programId,data:o})}static createNonceAccount(e){const n=new Transaction;"basePubkey"in e&&"seed"in e?n.add(SystemProgram.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:NONCE_ACCOUNT_LENGTH,programId:this.programId})):n.add(SystemProgram.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,lamports:e.lamports,space:NONCE_ACCOUNT_LENGTH,programId:this.programId}));const o={noncePubkey:e.noncePubkey,authorizedPubkey:e.authorizedPubkey};return n.add(this.nonceInitialize(o)),n}static nonceInitialize(e){const n=SYSTEM_INSTRUCTION_LAYOUTS.InitializeNonceAccount,o=encodeData(n,{authorized:toBuffer(e.authorizedPubkey.toBuffer())}),c={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:SYSVAR_RECENT_BLOCKHASHES_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}],programId:this.programId,data:o};return new TransactionInstruction(c)}static nonceAdvance(e){const n=SYSTEM_INSTRUCTION_LAYOUTS.AdvanceNonceAccount,o=encodeData(n),c={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:SYSVAR_RECENT_BLOCKHASHES_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:o};return new TransactionInstruction(c)}static nonceWithdraw(e){const n=SYSTEM_INSTRUCTION_LAYOUTS.WithdrawNonceAccount,o=encodeData(n,{lamports:e.lamports});return new TransactionInstruction({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:SYSVAR_RECENT_BLOCKHASHES_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}static nonceAuthorize(e){const n=SYSTEM_INSTRUCTION_LAYOUTS.AuthorizeNonceAccount,o=encodeData(n,{authorized:toBuffer(e.newAuthorizedPubkey.toBuffer())});return new TransactionInstruction({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}static allocate(e){let n,o;if("basePubkey"in e){const c=SYSTEM_INSTRUCTION_LAYOUTS.AllocateWithSeed;n=encodeData(c,{base:toBuffer(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:toBuffer(e.programId.toBuffer())}),o=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const c=SYSTEM_INSTRUCTION_LAYOUTS.Allocate;n=encodeData(c,{space:e.space}),o=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new TransactionInstruction({keys:o,programId:this.programId,data:n})}}SystemProgram.programId=new PublicKey("11111111111111111111111111111111");new PublicKey("BPFLoader2111111111111111111111111111111111");function getDefaultExportFromCjs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var objToString=Object.prototype.toString,objKeys=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e};function stringify(t,e){var n,o,c,a,l,b,v;if(t===!0)return"true";if(t===!1)return"false";switch(typeof t){case"object":if(t===null)return null;if(t.toJSON&&typeof t.toJSON=="function")return stringify(t.toJSON(),e);if(v=objToString.call(t),v==="[object Array]"){for(c="[",o=t.length-1,n=0;n<o;n++)c+=stringify(t[n],!0)+",";return o>-1&&(c+=stringify(t[n],!0)),c+"]"}else if(v==="[object Object]"){for(a=objKeys(t).sort(),o=a.length,c="",n=0;n<o;)l=a[n],b=stringify(t[l],!1),b!==void 0&&(c&&(c+=","),c+=JSON.stringify(l)+":"+b),n++;return"{"+c+"}"}else return JSON.stringify(t);case"function":case"undefined":return e?null:void 0;case"string":return JSON.stringify(t);default:return isFinite(t)?t:null}}var fastStableStringify=function(t){var e=stringify(t,!1);if(e!==void 0)return""+e},fastStableStringify$1=getDefaultExportFromCjs(fastStableStringify);const MINIMUM_SLOT_PER_EPOCH=32;function trailingZeros(t){let e=0;for(;t>1;)t/=2,e++;return e}function nextPowerOfTwo(t){return t===0?1:(t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,t|=t>>32,t+1)}class EpochSchedule{constructor(e,n,o,c,a){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=e,this.leaderScheduleSlotOffset=n,this.warmup=o,this.firstNormalEpoch=c,this.firstNormalSlot=a}getEpoch(e){return this.getEpochAndSlotIndex(e)[0]}getEpochAndSlotIndex(e){if(e<this.firstNormalSlot){const n=trailingZeros(nextPowerOfTwo(e+MINIMUM_SLOT_PER_EPOCH+1))-trailingZeros(MINIMUM_SLOT_PER_EPOCH)-1,o=this.getSlotsInEpoch(n),c=e-(o-MINIMUM_SLOT_PER_EPOCH);return[n,c]}else{const n=e-this.firstNormalSlot,o=Math.floor(n/this.slotsPerEpoch),c=this.firstNormalEpoch+o,a=n%this.slotsPerEpoch;return[c,a]}}getFirstSlotInEpoch(e){return e<=this.firstNormalEpoch?(Math.pow(2,e)-1)*MINIMUM_SLOT_PER_EPOCH:(e-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(e){return this.getFirstSlotInEpoch(e)+this.getSlotsInEpoch(e)-1}getSlotsInEpoch(e){return e<this.firstNormalEpoch?Math.pow(2,e+trailingZeros(MINIMUM_SLOT_PER_EPOCH)):this.slotsPerEpoch}}class SendTransactionError extends Error{constructor(e,n){super(e),this.logs=void 0,this.logs=n}}class SolanaJSONRPCError extends Error{constructor({code:e,message:n,data:o},c){super(c!=null?`${c}: ${n}`:n),this.code=void 0,this.data=void 0,this.code=e,this.data=o,this.name="SolanaJSONRPCError"}}var fetchImpl=globalThis.fetch;class RpcWebSocketClient extends _default$1{constructor(e,n,o){const c=a=>{const l=_default(a,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...n});return"socket"in l?this.underlyingSocket=l.socket:this.underlyingSocket=l,l};super(c,e,n,o),this.underlyingSocket=void 0}call(...e){const n=this.underlyingSocket?.readyState;return n===1?super.call(...e):Promise.reject(new Error("Tried to call a JSON-RPC method `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+n+")"))}notify(...e){const n=this.underlyingSocket?.readyState;return n===1?super.notify(...e):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+n+")"))}}function decodeData(t,e){let n;try{n=t.layout.decode(e)}catch(o){throw new Error("invalid instruction; "+o)}if(n.typeIndex!==t.index)throw new Error(`invalid account data; account type mismatch ${n.typeIndex} != ${t.index}`);return n}const LOOKUP_TABLE_META_SIZE=56;class AddressLookupTableAccount{constructor(e){this.key=void 0,this.state=void 0,this.key=e.key,this.state=e.state}isActive(){const e=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===e}static deserialize(e){const n=decodeData(LookupTableMetaLayout,e),o=e.length-LOOKUP_TABLE_META_SIZE;assert(o>=0,"lookup table is invalid"),assert(o%32===0,"lookup table is invalid");const c=o/32,{addresses:a}=struct([seq(publicKey$1(),c,"addresses")]).decode(e.slice(LOOKUP_TABLE_META_SIZE));return{deactivationSlot:n.deactivationSlot,lastExtendedSlot:n.lastExtendedSlot,lastExtendedSlotStartIndex:n.lastExtendedStartIndex,authority:n.authority.length!==0?new PublicKey(n.authority[0]):void 0,addresses:a.map(l=>new PublicKey(l))}}}const LookupTableMetaLayout={index:1,layout:struct([u32("typeIndex"),u64$1("deactivationSlot"),nu64("lastExtendedSlot"),u8("lastExtendedStartIndex"),u8(),seq(publicKey$1(),offset(u8(),-1),"authority")])},URL_RE=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function makeWebsocketUrl(t){const e=t.match(URL_RE);if(e==null)throw TypeError(`Failed to validate endpoint URL \`${t}\``);const[n,o,c,a]=e,l=t.startsWith("https:")?"wss:":"ws:",b=c==null?null:parseInt(c.slice(1),10),v=b==null?"":`:${b+1}`;return`${l}//${o}${v}${a}`}const PublicKeyFromString=coerce(instance(PublicKey),string(),t=>new PublicKey(t)),RawAccountDataResult=tuple([string(),literal("base64")]),BufferFromRawAccountData=coerce(instance(Buffer$1$1),RawAccountDataResult,t=>Buffer$1$1.from(t[0],"base64")),BLOCKHASH_CACHE_TIMEOUT_MS=30*1e3;function assertEndpointUrl(t){if(/^https?:/.test(t)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return t}function extractCommitmentFromConfig(t){let e,n;if(typeof t=="string")e=t;else if(t){const{commitment:o,...c}=t;e=o,n=c}return{commitment:e,config:n}}function createRpcResult(t){return union([type({jsonrpc:literal("2.0"),id:string(),result:t}),type({jsonrpc:literal("2.0"),id:string(),error:type({code:unknown(),message:string(),data:optional(any())})})])}const UnknownRpcResult=createRpcResult(unknown());function jsonRpcResult(t){return coerce(createRpcResult(t),UnknownRpcResult,e=>"error"in e?e:{...e,result:create(e.result,t)})}function jsonRpcResultAndContext(t){return jsonRpcResult(type({context:type({slot:number()}),value:t}))}function notificationResultAndContext(t){return type({context:type({slot:number()}),value:t})}function versionedMessageFromResponse(t,e){return t===0?new MessageV0({header:e.header,staticAccountKeys:e.accountKeys.map(n=>new PublicKey(n)),recentBlockhash:e.recentBlockhash,compiledInstructions:e.instructions.map(n=>({programIdIndex:n.programIdIndex,accountKeyIndexes:n.accounts,data:bs58$2.decode(n.data)})),addressTableLookups:e.addressTableLookups}):new Message(e)}const GetInflationGovernorResult=type({foundation:number(),foundationTerm:number(),initial:number(),taper:number(),terminal:number()}),GetInflationRewardResult=jsonRpcResult(array(nullable(type({epoch:number(),effectiveSlot:number(),amount:number(),postBalance:number(),commission:optional(nullable(number()))})))),GetRecentPrioritizationFeesResult=array(type({slot:number(),prioritizationFee:number()})),GetInflationRateResult=type({total:number(),validator:number(),foundation:number(),epoch:number()}),GetEpochInfoResult=type({epoch:number(),slotIndex:number(),slotsInEpoch:number(),absoluteSlot:number(),blockHeight:optional(number()),transactionCount:optional(number())}),GetEpochScheduleResult=type({slotsPerEpoch:number(),leaderScheduleSlotOffset:number(),warmup:boolean(),firstNormalEpoch:number(),firstNormalSlot:number()}),GetLeaderScheduleResult=record(string(),array(number())),TransactionErrorResult=nullable(union([type({}),string()])),SignatureStatusResult=type({err:TransactionErrorResult}),SignatureReceivedResult=literal("receivedSignature"),VersionResult=type({"solana-core":string(),"feature-set":optional(number())}),SimulatedTransactionResponseStruct=jsonRpcResultAndContext(type({err:nullable(union([type({}),string()])),logs:nullable(array(string())),accounts:optional(nullable(array(nullable(type({executable:boolean(),owner:string(),lamports:number(),data:array(string()),rentEpoch:optional(number())}))))),unitsConsumed:optional(number()),returnData:optional(nullable(type({programId:string(),data:tuple([string(),literal("base64")])})))})),BlockProductionResponseStruct=jsonRpcResultAndContext(type({byIdentity:record(string(),array(number())),range:type({firstSlot:number(),lastSlot:number()})}));function createRpcClient(t,e,n,o,c,a){const l=n||fetchImpl;let b;a!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let v;return o&&(v=async(S,M)=>{const B=await new Promise((P,L)=>{try{o(S,M,(F,U)=>P([F,U]))}catch(F){L(F)}});return await l(...B)}),new RpcClient(async(S,M)=>{const B={method:"POST",body:S,agent:b,headers:Object.assign({"Content-Type":"application/json"},e||{},COMMON_HTTP_HEADERS)};try{let P=5,L,F=500;for(;v?L=await v(t,B):L=await l(t,B),!(L.status!==429||c===!0||(P-=1,P===0));)console.error(`Server responded with ${L.status} ${L.statusText}.  Retrying after ${F}ms delay...`),await sleep(F),F*=2;const U=await L.text();L.ok?M(null,U):M(new Error(`${L.status} ${L.statusText}: ${U}`))}catch(P){P instanceof Error&&M(P)}},{})}function createRpcRequest(t){return(e,n)=>new Promise((o,c)=>{t.request(e,n,(a,l)=>{if(a){c(a);return}o(l)})})}function createRpcBatchRequest(t){return e=>new Promise((n,o)=>{e.length===0&&n([]);const c=e.map(a=>t.request(a.methodName,a.args));t.request(c,(a,l)=>{if(a){o(a);return}n(l)})})}const GetInflationGovernorRpcResult=jsonRpcResult(GetInflationGovernorResult),GetInflationRateRpcResult=jsonRpcResult(GetInflationRateResult),GetRecentPrioritizationFeesRpcResult=jsonRpcResult(GetRecentPrioritizationFeesResult),GetEpochInfoRpcResult=jsonRpcResult(GetEpochInfoResult),GetEpochScheduleRpcResult=jsonRpcResult(GetEpochScheduleResult),GetLeaderScheduleRpcResult=jsonRpcResult(GetLeaderScheduleResult),SlotRpcResult=jsonRpcResult(number()),GetSupplyRpcResult=jsonRpcResultAndContext(type({total:number(),circulating:number(),nonCirculating:number(),nonCirculatingAccounts:array(PublicKeyFromString)})),TokenAmountResult=type({amount:string(),uiAmount:nullable(number()),decimals:number(),uiAmountString:optional(string())}),GetTokenLargestAccountsResult=jsonRpcResultAndContext(array(type({address:PublicKeyFromString,amount:string(),uiAmount:nullable(number()),decimals:number(),uiAmountString:optional(string())}))),GetTokenAccountsByOwner=jsonRpcResultAndContext(array(type({pubkey:PublicKeyFromString,account:type({executable:boolean(),owner:PublicKeyFromString,lamports:number(),data:BufferFromRawAccountData,rentEpoch:number()})}))),ParsedAccountDataResult=type({program:string(),parsed:unknown(),space:number()}),GetParsedTokenAccountsByOwner=jsonRpcResultAndContext(array(type({pubkey:PublicKeyFromString,account:type({executable:boolean(),owner:PublicKeyFromString,lamports:number(),data:ParsedAccountDataResult,rentEpoch:number()})}))),GetLargestAccountsRpcResult=jsonRpcResultAndContext(array(type({lamports:number(),address:PublicKeyFromString}))),AccountInfoResult=type({executable:boolean(),owner:PublicKeyFromString,lamports:number(),data:BufferFromRawAccountData,rentEpoch:number()}),KeyedAccountInfoResult=type({pubkey:PublicKeyFromString,account:AccountInfoResult}),ParsedOrRawAccountData=coerce(union([instance(Buffer$1$1),ParsedAccountDataResult]),union([RawAccountDataResult,ParsedAccountDataResult]),t=>Array.isArray(t)?create(t,BufferFromRawAccountData):t),ParsedAccountInfoResult=type({executable:boolean(),owner:PublicKeyFromString,lamports:number(),data:ParsedOrRawAccountData,rentEpoch:number()}),KeyedParsedAccountInfoResult=type({pubkey:PublicKeyFromString,account:ParsedAccountInfoResult}),StakeActivationResult=type({state:union([literal("active"),literal("inactive"),literal("activating"),literal("deactivating")]),active:number(),inactive:number()}),GetConfirmedSignaturesForAddress2RpcResult=jsonRpcResult(array(type({signature:string(),slot:number(),err:TransactionErrorResult,memo:nullable(string()),blockTime:optional(nullable(number()))}))),GetSignaturesForAddressRpcResult=jsonRpcResult(array(type({signature:string(),slot:number(),err:TransactionErrorResult,memo:nullable(string()),blockTime:optional(nullable(number()))}))),AccountNotificationResult=type({subscription:number(),result:notificationResultAndContext(AccountInfoResult)}),ProgramAccountInfoResult=type({pubkey:PublicKeyFromString,account:AccountInfoResult}),ProgramAccountNotificationResult=type({subscription:number(),result:notificationResultAndContext(ProgramAccountInfoResult)}),SlotInfoResult=type({parent:number(),slot:number(),root:number()}),SlotNotificationResult=type({subscription:number(),result:SlotInfoResult}),SlotUpdateResult=union([type({type:union([literal("firstShredReceived"),literal("completed"),literal("optimisticConfirmation"),literal("root")]),slot:number(),timestamp:number()}),type({type:literal("createdBank"),parent:number(),slot:number(),timestamp:number()}),type({type:literal("frozen"),slot:number(),timestamp:number(),stats:type({numTransactionEntries:number(),numSuccessfulTransactions:number(),numFailedTransactions:number(),maxTransactionsPerEntry:number()})}),type({type:literal("dead"),slot:number(),timestamp:number(),err:string()})]),SlotUpdateNotificationResult=type({subscription:number(),result:SlotUpdateResult}),SignatureNotificationResult=type({subscription:number(),result:notificationResultAndContext(union([SignatureStatusResult,SignatureReceivedResult]))}),RootNotificationResult=type({subscription:number(),result:number()}),ContactInfoResult=type({pubkey:string(),gossip:nullable(string()),tpu:nullable(string()),rpc:nullable(string()),version:nullable(string())}),VoteAccountInfoResult=type({votePubkey:string(),nodePubkey:string(),activatedStake:number(),epochVoteAccount:boolean(),epochCredits:array(tuple([number(),number(),number()])),commission:number(),lastVote:number(),rootSlot:nullable(number())}),GetVoteAccounts=jsonRpcResult(type({current:array(VoteAccountInfoResult),delinquent:array(VoteAccountInfoResult)})),ConfirmationStatus=union([literal("processed"),literal("confirmed"),literal("finalized")]),SignatureStatusResponse=type({slot:number(),confirmations:nullable(number()),err:TransactionErrorResult,confirmationStatus:optional(ConfirmationStatus)}),GetSignatureStatusesRpcResult=jsonRpcResultAndContext(array(nullable(SignatureStatusResponse))),GetMinimumBalanceForRentExemptionRpcResult=jsonRpcResult(number()),AddressTableLookupStruct=type({accountKey:PublicKeyFromString,writableIndexes:array(number()),readonlyIndexes:array(number())}),ConfirmedTransactionResult=type({signatures:array(string()),message:type({accountKeys:array(string()),header:type({numRequiredSignatures:number(),numReadonlySignedAccounts:number(),numReadonlyUnsignedAccounts:number()}),instructions:array(type({accounts:array(number()),data:string(),programIdIndex:number()})),recentBlockhash:string(),addressTableLookups:optional(array(AddressTableLookupStruct))})}),AnnotatedAccountKey=type({pubkey:PublicKeyFromString,signer:boolean(),writable:boolean(),source:optional(union([literal("transaction"),literal("lookupTable")]))}),ConfirmedTransactionAccountsModeResult=type({accountKeys:array(AnnotatedAccountKey),signatures:array(string())}),ParsedInstructionResult=type({parsed:unknown(),program:string(),programId:PublicKeyFromString}),RawInstructionResult=type({accounts:array(PublicKeyFromString),data:string(),programId:PublicKeyFromString}),InstructionResult=union([RawInstructionResult,ParsedInstructionResult]),UnknownInstructionResult=union([type({parsed:unknown(),program:string(),programId:string()}),type({accounts:array(string()),data:string(),programId:string()})]),ParsedOrRawInstruction=coerce(InstructionResult,UnknownInstructionResult,t=>"accounts"in t?create(t,RawInstructionResult):create(t,ParsedInstructionResult)),ParsedConfirmedTransactionResult=type({signatures:array(string()),message:type({accountKeys:array(AnnotatedAccountKey),instructions:array(ParsedOrRawInstruction),recentBlockhash:string(),addressTableLookups:optional(nullable(array(AddressTableLookupStruct)))})}),TokenBalanceResult=type({accountIndex:number(),mint:string(),owner:optional(string()),uiTokenAmount:TokenAmountResult}),LoadedAddressesResult=type({writable:array(PublicKeyFromString),readonly:array(PublicKeyFromString)}),ConfirmedTransactionMetaResult=type({err:TransactionErrorResult,fee:number(),innerInstructions:optional(nullable(array(type({index:number(),instructions:array(type({accounts:array(number()),data:string(),programIdIndex:number()}))})))),preBalances:array(number()),postBalances:array(number()),logMessages:optional(nullable(array(string()))),preTokenBalances:optional(nullable(array(TokenBalanceResult))),postTokenBalances:optional(nullable(array(TokenBalanceResult))),loadedAddresses:optional(LoadedAddressesResult),computeUnitsConsumed:optional(number())}),ParsedConfirmedTransactionMetaResult=type({err:TransactionErrorResult,fee:number(),innerInstructions:optional(nullable(array(type({index:number(),instructions:array(ParsedOrRawInstruction)})))),preBalances:array(number()),postBalances:array(number()),logMessages:optional(nullable(array(string()))),preTokenBalances:optional(nullable(array(TokenBalanceResult))),postTokenBalances:optional(nullable(array(TokenBalanceResult))),loadedAddresses:optional(LoadedAddressesResult),computeUnitsConsumed:optional(number())}),TransactionVersionStruct=union([literal(0),literal("legacy")]),RewardsResult=type({pubkey:string(),lamports:number(),postBalance:nullable(number()),rewardType:nullable(string()),commission:optional(nullable(number()))}),GetBlockRpcResult=jsonRpcResult(nullable(type({blockhash:string(),previousBlockhash:string(),parentSlot:number(),transactions:array(type({transaction:ConfirmedTransactionResult,meta:nullable(ConfirmedTransactionMetaResult),version:optional(TransactionVersionStruct)})),rewards:optional(array(RewardsResult)),blockTime:nullable(number()),blockHeight:nullable(number())}))),GetNoneModeBlockRpcResult=jsonRpcResult(nullable(type({blockhash:string(),previousBlockhash:string(),parentSlot:number(),rewards:optional(array(RewardsResult)),blockTime:nullable(number()),blockHeight:nullable(number())}))),GetAccountsModeBlockRpcResult=jsonRpcResult(nullable(type({blockhash:string(),previousBlockhash:string(),parentSlot:number(),transactions:array(type({transaction:ConfirmedTransactionAccountsModeResult,meta:nullable(ConfirmedTransactionMetaResult),version:optional(TransactionVersionStruct)})),rewards:optional(array(RewardsResult)),blockTime:nullable(number()),blockHeight:nullable(number())}))),GetParsedBlockRpcResult=jsonRpcResult(nullable(type({blockhash:string(),previousBlockhash:string(),parentSlot:number(),transactions:array(type({transaction:ParsedConfirmedTransactionResult,meta:nullable(ParsedConfirmedTransactionMetaResult),version:optional(TransactionVersionStruct)})),rewards:optional(array(RewardsResult)),blockTime:nullable(number()),blockHeight:nullable(number())}))),GetParsedAccountsModeBlockRpcResult=jsonRpcResult(nullable(type({blockhash:string(),previousBlockhash:string(),parentSlot:number(),transactions:array(type({transaction:ConfirmedTransactionAccountsModeResult,meta:nullable(ParsedConfirmedTransactionMetaResult),version:optional(TransactionVersionStruct)})),rewards:optional(array(RewardsResult)),blockTime:nullable(number()),blockHeight:nullable(number())}))),GetParsedNoneModeBlockRpcResult=jsonRpcResult(nullable(type({blockhash:string(),previousBlockhash:string(),parentSlot:number(),rewards:optional(array(RewardsResult)),blockTime:nullable(number()),blockHeight:nullable(number())}))),GetConfirmedBlockRpcResult=jsonRpcResult(nullable(type({blockhash:string(),previousBlockhash:string(),parentSlot:number(),transactions:array(type({transaction:ConfirmedTransactionResult,meta:nullable(ConfirmedTransactionMetaResult)})),rewards:optional(array(RewardsResult)),blockTime:nullable(number())}))),GetBlockSignaturesRpcResult=jsonRpcResult(nullable(type({blockhash:string(),previousBlockhash:string(),parentSlot:number(),signatures:array(string()),blockTime:nullable(number())}))),GetTransactionRpcResult=jsonRpcResult(nullable(type({slot:number(),meta:nullable(ConfirmedTransactionMetaResult),blockTime:optional(nullable(number())),transaction:ConfirmedTransactionResult,version:optional(TransactionVersionStruct)}))),GetParsedTransactionRpcResult=jsonRpcResult(nullable(type({slot:number(),transaction:ParsedConfirmedTransactionResult,meta:nullable(ParsedConfirmedTransactionMetaResult),blockTime:optional(nullable(number())),version:optional(TransactionVersionStruct)}))),GetRecentBlockhashAndContextRpcResult=jsonRpcResultAndContext(type({blockhash:string(),feeCalculator:type({lamportsPerSignature:number()})})),GetLatestBlockhashRpcResult=jsonRpcResultAndContext(type({blockhash:string(),lastValidBlockHeight:number()})),IsBlockhashValidRpcResult=jsonRpcResultAndContext(boolean()),PerfSampleResult=type({slot:number(),numTransactions:number(),numSlots:number(),samplePeriodSecs:number()}),GetRecentPerformanceSamplesRpcResult=jsonRpcResult(array(PerfSampleResult)),GetFeeCalculatorRpcResult=jsonRpcResultAndContext(nullable(type({feeCalculator:type({lamportsPerSignature:number()})}))),RequestAirdropRpcResult=jsonRpcResult(string()),SendTransactionRpcResult=jsonRpcResult(string()),LogsResult=type({err:TransactionErrorResult,logs:array(string()),signature:string()}),LogsNotificationResult=type({result:notificationResultAndContext(LogsResult),subscription:number()}),COMMON_HTTP_HEADERS={"solana-client":"js/0.0.0-development"};let Connection$1=class{constructor(e,n){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const A={};return async S=>{const{commitment:M,config:B}=extractCommitmentFromConfig(S),P=this._buildArgs([],M,void 0,B),L=fastStableStringify$1(P);return A[L]=A[L]??(async()=>{try{const F=await this._rpcRequest("getBlockHeight",P),U=create(F,jsonRpcResult(number()));if("error"in U)throw new SolanaJSONRPCError(U.error,"failed to get block height information");return U.result}finally{delete A[L]}})(),await A[L]}})();let o,c,a,l,b,v;n&&typeof n=="string"?this._commitment=n:n&&(this._commitment=n.commitment,this._confirmTransactionInitialTimeout=n.confirmTransactionInitialTimeout,o=n.wsEndpoint,c=n.httpHeaders,a=n.fetch,l=n.fetchMiddleware,b=n.disableRetryOnRateLimit,v=n.httpAgent),this._rpcEndpoint=assertEndpointUrl(e),this._rpcWsEndpoint=o||makeWebsocketUrl(e),this._rpcClient=createRpcClient(e,c,a,l,b,v),this._rpcRequest=createRpcRequest(this._rpcClient),this._rpcBatchRequest=createRpcBatchRequest(this._rpcClient),this._rpcWebSocket=new RpcWebSocketClient(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(e,n){const{commitment:o,config:c}=extractCommitmentFromConfig(n),a=this._buildArgs([e.toBase58()],o,void 0,c),l=await this._rpcRequest("getBalance",a),b=create(l,jsonRpcResultAndContext(number()));if("error"in b)throw new SolanaJSONRPCError(b.error,`failed to get balance for ${e.toBase58()}`);return b.result}async getBalance(e,n){return await this.getBalanceAndContext(e,n).then(o=>o.value).catch(o=>{throw new Error("failed to get balance of account "+e.toBase58()+": "+o)})}async getBlockTime(e){const n=await this._rpcRequest("getBlockTime",[e]),o=create(n,jsonRpcResult(nullable(number())));if("error"in o)throw new SolanaJSONRPCError(o.error,`failed to get block time for slot ${e}`);return o.result}async getMinimumLedgerSlot(){const e=await this._rpcRequest("minimumLedgerSlot",[]),n=create(e,jsonRpcResult(number()));if("error"in n)throw new SolanaJSONRPCError(n.error,"failed to get minimum ledger slot");return n.result}async getFirstAvailableBlock(){const e=await this._rpcRequest("getFirstAvailableBlock",[]),n=create(e,SlotRpcResult);if("error"in n)throw new SolanaJSONRPCError(n.error,"failed to get first available block");return n.result}async getSupply(e){let n={};typeof e=="string"?n={commitment:e}:e?n={...e,commitment:e&&e.commitment||this.commitment}:n={commitment:this.commitment};const o=await this._rpcRequest("getSupply",[n]),c=create(o,GetSupplyRpcResult);if("error"in c)throw new SolanaJSONRPCError(c.error,"failed to get supply");return c.result}async getTokenSupply(e,n){const o=this._buildArgs([e.toBase58()],n),c=await this._rpcRequest("getTokenSupply",o),a=create(c,jsonRpcResultAndContext(TokenAmountResult));if("error"in a)throw new SolanaJSONRPCError(a.error,"failed to get token supply");return a.result}async getTokenAccountBalance(e,n){const o=this._buildArgs([e.toBase58()],n),c=await this._rpcRequest("getTokenAccountBalance",o),a=create(c,jsonRpcResultAndContext(TokenAmountResult));if("error"in a)throw new SolanaJSONRPCError(a.error,"failed to get token account balance");return a.result}async getTokenAccountsByOwner(e,n,o){const{commitment:c,config:a}=extractCommitmentFromConfig(o);let l=[e.toBase58()];"mint"in n?l.push({mint:n.mint.toBase58()}):l.push({programId:n.programId.toBase58()});const b=this._buildArgs(l,c,"base64",a),v=await this._rpcRequest("getTokenAccountsByOwner",b),A=create(v,GetTokenAccountsByOwner);if("error"in A)throw new SolanaJSONRPCError(A.error,`failed to get token accounts owned by account ${e.toBase58()}`);return A.result}async getParsedTokenAccountsByOwner(e,n,o){let c=[e.toBase58()];"mint"in n?c.push({mint:n.mint.toBase58()}):c.push({programId:n.programId.toBase58()});const a=this._buildArgs(c,o,"jsonParsed"),l=await this._rpcRequest("getTokenAccountsByOwner",a),b=create(l,GetParsedTokenAccountsByOwner);if("error"in b)throw new SolanaJSONRPCError(b.error,`failed to get token accounts owned by account ${e.toBase58()}`);return b.result}async getLargestAccounts(e){const n={...e,commitment:e&&e.commitment||this.commitment},o=n.filter||n.commitment?[n]:[],c=await this._rpcRequest("getLargestAccounts",o),a=create(c,GetLargestAccountsRpcResult);if("error"in a)throw new SolanaJSONRPCError(a.error,"failed to get largest accounts");return a.result}async getTokenLargestAccounts(e,n){const o=this._buildArgs([e.toBase58()],n),c=await this._rpcRequest("getTokenLargestAccounts",o),a=create(c,GetTokenLargestAccountsResult);if("error"in a)throw new SolanaJSONRPCError(a.error,"failed to get token largest accounts");return a.result}async getAccountInfoAndContext(e,n){const{commitment:o,config:c}=extractCommitmentFromConfig(n),a=this._buildArgs([e.toBase58()],o,"base64",c),l=await this._rpcRequest("getAccountInfo",a),b=create(l,jsonRpcResultAndContext(nullable(AccountInfoResult)));if("error"in b)throw new SolanaJSONRPCError(b.error,`failed to get info about account ${e.toBase58()}`);return b.result}async getParsedAccountInfo(e,n){const{commitment:o,config:c}=extractCommitmentFromConfig(n),a=this._buildArgs([e.toBase58()],o,"jsonParsed",c),l=await this._rpcRequest("getAccountInfo",a),b=create(l,jsonRpcResultAndContext(nullable(ParsedAccountInfoResult)));if("error"in b)throw new SolanaJSONRPCError(b.error,`failed to get info about account ${e.toBase58()}`);return b.result}async getAccountInfo(e,n){try{return(await this.getAccountInfoAndContext(e,n)).value}catch(o){throw new Error("failed to get info about account "+e.toBase58()+": "+o)}}async getMultipleParsedAccounts(e,n){const{commitment:o,config:c}=extractCommitmentFromConfig(n),a=e.map(A=>A.toBase58()),l=this._buildArgs([a],o,"jsonParsed",c),b=await this._rpcRequest("getMultipleAccounts",l),v=create(b,jsonRpcResultAndContext(array(nullable(ParsedAccountInfoResult))));if("error"in v)throw new SolanaJSONRPCError(v.error,`failed to get info for accounts ${a}`);return v.result}async getMultipleAccountsInfoAndContext(e,n){const{commitment:o,config:c}=extractCommitmentFromConfig(n),a=e.map(A=>A.toBase58()),l=this._buildArgs([a],o,"base64",c),b=await this._rpcRequest("getMultipleAccounts",l),v=create(b,jsonRpcResultAndContext(array(nullable(AccountInfoResult))));if("error"in v)throw new SolanaJSONRPCError(v.error,`failed to get info for accounts ${a}`);return v.result}async getMultipleAccountsInfo(e,n){return(await this.getMultipleAccountsInfoAndContext(e,n)).value}async getStakeActivation(e,n,o){const{commitment:c,config:a}=extractCommitmentFromConfig(n),l=this._buildArgs([e.toBase58()],c,void 0,{...a,epoch:o??a?.epoch}),b=await this._rpcRequest("getStakeActivation",l),v=create(b,jsonRpcResult(StakeActivationResult));if("error"in v)throw new SolanaJSONRPCError(v.error,`failed to get Stake Activation ${e.toBase58()}`);return v.result}async getProgramAccounts(e,n){const{commitment:o,config:c}=extractCommitmentFromConfig(n),{encoding:a,...l}=c||{},b=this._buildArgs([e.toBase58()],o,a||"base64",l),v=await this._rpcRequest("getProgramAccounts",b),A=array(KeyedAccountInfoResult),S=l.withContext===!0?create(v,jsonRpcResultAndContext(A)):create(v,jsonRpcResult(A));if("error"in S)throw new SolanaJSONRPCError(S.error,`failed to get accounts owned by program ${e.toBase58()}`);return S.result}async getParsedProgramAccounts(e,n){const{commitment:o,config:c}=extractCommitmentFromConfig(n),a=this._buildArgs([e.toBase58()],o,"jsonParsed",c),l=await this._rpcRequest("getProgramAccounts",a),b=create(l,jsonRpcResult(array(KeyedParsedAccountInfoResult)));if("error"in b)throw new SolanaJSONRPCError(b.error,`failed to get accounts owned by program ${e.toBase58()}`);return b.result}async confirmTransaction(e,n){let o;if(typeof e=="string")o=e;else{const a=e;if(a.abortSignal?.aborted)return Promise.reject(a.abortSignal.reason);o=a.signature}let c;try{c=bs58$2.decode(o)}catch{throw new Error("signature must be base58 encoded: "+o)}return assert(c.length===64,"signature has invalid length"),typeof e=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:n||this.commitment,signature:o}):"lastValidBlockHeight"in e?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:n||this.commitment,strategy:e}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:n||this.commitment,strategy:e})}getCancellationPromise(e){return new Promise((n,o)=>{e!=null&&(e.aborted?o(e.reason):e.addEventListener("abort",()=>{o(e.reason)}))})}getTransactionConfirmationPromise({commitment:e,signature:n}){let o,c,a=!1;const l=new Promise((v,A)=>{try{o=this.onSignature(n,(M,B)=>{o=void 0;const P={context:B,value:M};v({__type:TransactionStatus.PROCESSED,response:P})},e);const S=new Promise(M=>{o==null?M():c=this._onSubscriptionStateChange(o,B=>{B==="subscribed"&&M()})});(async()=>{if(await S,a)return;const M=await this.getSignatureStatus(n);if(a||M==null)return;const{context:B,value:P}=M;if(P!=null)if(P?.err)A(P.err);else{switch(e){case"confirmed":case"single":case"singleGossip":{if(P.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(P.confirmationStatus==="processed"||P.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}a=!0,v({__type:TransactionStatus.PROCESSED,response:{context:B,value:P}})}})()}catch(S){A(S)}});return{abortConfirmation:()=>{c&&(c(),c=void 0),o!=null&&(this.removeSignatureListener(o),o=void 0)},confirmationPromise:l}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e,strategy:{abortSignal:n,lastValidBlockHeight:o,signature:c}}){let a=!1;const l=new Promise(M=>{const B=async()=>{try{return await this.getBlockHeight(e)}catch{return-1}};(async()=>{let P=await B();if(!a){for(;P<=o;)if(await sleep(1e3),a||(P=await B(),a))return;M({__type:TransactionStatus.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:b,confirmationPromise:v}=this.getTransactionConfirmationPromise({commitment:e,signature:c}),A=this.getCancellationPromise(n);let S;try{const M=await Promise.race([A,v,l]);if(M.__type===TransactionStatus.PROCESSED)S=M.response;else throw new TransactionExpiredBlockheightExceededError(c)}finally{a=!0,b()}return S}async confirmTransactionUsingDurableNonceStrategy({commitment:e,strategy:{abortSignal:n,minContextSlot:o,nonceAccountPubkey:c,nonceValue:a,signature:l}}){let b=!1;const v=new Promise(P=>{let L=a,F=null;const U=async()=>{try{const{context:q,value:X}=await this.getNonceAndContext(c,{commitment:e,minContextSlot:o});return F=q.slot,X?.nonce}catch{return L}};(async()=>{if(L=await U(),!b)for(;;){if(a!==L){P({__type:TransactionStatus.NONCE_INVALID,slotInWhichNonceDidAdvance:F});return}if(await sleep(2e3),b||(L=await U(),b))return}})()}),{abortConfirmation:A,confirmationPromise:S}=this.getTransactionConfirmationPromise({commitment:e,signature:l}),M=this.getCancellationPromise(n);let B;try{const P=await Promise.race([M,S,v]);if(P.__type===TransactionStatus.PROCESSED)B=P.response;else{let L;for(;;){const F=await this.getSignatureStatus(l);if(F==null)break;if(F.context.slot<(P.slotInWhichNonceDidAdvance??o)){await sleep(400);continue}L=F;break}if(L?.value){const F=e||"finalized",{confirmationStatus:U}=L.value;switch(F){case"processed":case"recent":if(U!=="processed"&&U!=="confirmed"&&U!=="finalized")throw new TransactionExpiredNonceInvalidError(l);break;case"confirmed":case"single":case"singleGossip":if(U!=="confirmed"&&U!=="finalized")throw new TransactionExpiredNonceInvalidError(l);break;case"finalized":case"max":case"root":if(U!=="finalized")throw new TransactionExpiredNonceInvalidError(l);break;default:}B={context:L.context,value:{err:L.value.err}}}else throw new TransactionExpiredNonceInvalidError(l)}}finally{b=!0,A()}return B}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:e,signature:n}){let o;const c=new Promise(v=>{let A=this._confirmTransactionInitialTimeout||6e4;switch(e){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{A=this._confirmTransactionInitialTimeout||3e4;break}}o=setTimeout(()=>v({__type:TransactionStatus.TIMED_OUT,timeoutMs:A}),A)}),{abortConfirmation:a,confirmationPromise:l}=this.getTransactionConfirmationPromise({commitment:e,signature:n});let b;try{const v=await Promise.race([l,c]);if(v.__type===TransactionStatus.PROCESSED)b=v.response;else throw new TransactionExpiredTimeoutError(n,v.timeoutMs/1e3)}finally{clearTimeout(o),a()}return b}async getClusterNodes(){const e=await this._rpcRequest("getClusterNodes",[]),n=create(e,jsonRpcResult(array(ContactInfoResult)));if("error"in n)throw new SolanaJSONRPCError(n.error,"failed to get cluster nodes");return n.result}async getVoteAccounts(e){const n=this._buildArgs([],e),o=await this._rpcRequest("getVoteAccounts",n),c=create(o,GetVoteAccounts);if("error"in c)throw new SolanaJSONRPCError(c.error,"failed to get vote accounts");return c.result}async getSlot(e){const{commitment:n,config:o}=extractCommitmentFromConfig(e),c=this._buildArgs([],n,void 0,o),a=await this._rpcRequest("getSlot",c),l=create(a,jsonRpcResult(number()));if("error"in l)throw new SolanaJSONRPCError(l.error,"failed to get slot");return l.result}async getSlotLeader(e){const{commitment:n,config:o}=extractCommitmentFromConfig(e),c=this._buildArgs([],n,void 0,o),a=await this._rpcRequest("getSlotLeader",c),l=create(a,jsonRpcResult(string()));if("error"in l)throw new SolanaJSONRPCError(l.error,"failed to get slot leader");return l.result}async getSlotLeaders(e,n){const o=[e,n],c=await this._rpcRequest("getSlotLeaders",o),a=create(c,jsonRpcResult(array(PublicKeyFromString)));if("error"in a)throw new SolanaJSONRPCError(a.error,"failed to get slot leaders");return a.result}async getSignatureStatus(e,n){const{context:o,value:c}=await this.getSignatureStatuses([e],n);assert(c.length===1);const a=c[0];return{context:o,value:a}}async getSignatureStatuses(e,n){const o=[e];n&&o.push(n);const c=await this._rpcRequest("getSignatureStatuses",o),a=create(c,GetSignatureStatusesRpcResult);if("error"in a)throw new SolanaJSONRPCError(a.error,"failed to get signature status");return a.result}async getTransactionCount(e){const{commitment:n,config:o}=extractCommitmentFromConfig(e),c=this._buildArgs([],n,void 0,o),a=await this._rpcRequest("getTransactionCount",c),l=create(a,jsonRpcResult(number()));if("error"in l)throw new SolanaJSONRPCError(l.error,"failed to get transaction count");return l.result}async getTotalSupply(e){return(await this.getSupply({commitment:e,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(e){const n=this._buildArgs([],e),o=await this._rpcRequest("getInflationGovernor",n),c=create(o,GetInflationGovernorRpcResult);if("error"in c)throw new SolanaJSONRPCError(c.error,"failed to get inflation");return c.result}async getInflationReward(e,n,o){const{commitment:c,config:a}=extractCommitmentFromConfig(o),l=this._buildArgs([e.map(A=>A.toBase58())],c,void 0,{...a,epoch:n??a?.epoch}),b=await this._rpcRequest("getInflationReward",l),v=create(b,GetInflationRewardResult);if("error"in v)throw new SolanaJSONRPCError(v.error,"failed to get inflation reward");return v.result}async getInflationRate(){const e=await this._rpcRequest("getInflationRate",[]),n=create(e,GetInflationRateRpcResult);if("error"in n)throw new SolanaJSONRPCError(n.error,"failed to get inflation rate");return n.result}async getEpochInfo(e){const{commitment:n,config:o}=extractCommitmentFromConfig(e),c=this._buildArgs([],n,void 0,o),a=await this._rpcRequest("getEpochInfo",c),l=create(a,GetEpochInfoRpcResult);if("error"in l)throw new SolanaJSONRPCError(l.error,"failed to get epoch info");return l.result}async getEpochSchedule(){const e=await this._rpcRequest("getEpochSchedule",[]),n=create(e,GetEpochScheduleRpcResult);if("error"in n)throw new SolanaJSONRPCError(n.error,"failed to get epoch schedule");const o=n.result;return new EpochSchedule(o.slotsPerEpoch,o.leaderScheduleSlotOffset,o.warmup,o.firstNormalEpoch,o.firstNormalSlot)}async getLeaderSchedule(){const e=await this._rpcRequest("getLeaderSchedule",[]),n=create(e,GetLeaderScheduleRpcResult);if("error"in n)throw new SolanaJSONRPCError(n.error,"failed to get leader schedule");return n.result}async getMinimumBalanceForRentExemption(e,n){const o=this._buildArgs([e],n),c=await this._rpcRequest("getMinimumBalanceForRentExemption",o),a=create(c,GetMinimumBalanceForRentExemptionRpcResult);return"error"in a?(console.warn("Unable to fetch minimum balance for rent exemption"),0):a.result}async getRecentBlockhashAndContext(e){const n=this._buildArgs([],e),o=await this._rpcRequest("getRecentBlockhash",n),c=create(o,GetRecentBlockhashAndContextRpcResult);if("error"in c)throw new SolanaJSONRPCError(c.error,"failed to get recent blockhash");return c.result}async getRecentPerformanceSamples(e){const n=await this._rpcRequest("getRecentPerformanceSamples",e?[e]:[]),o=create(n,GetRecentPerformanceSamplesRpcResult);if("error"in o)throw new SolanaJSONRPCError(o.error,"failed to get recent performance samples");return o.result}async getFeeCalculatorForBlockhash(e,n){const o=this._buildArgs([e],n),c=await this._rpcRequest("getFeeCalculatorForBlockhash",o),a=create(c,GetFeeCalculatorRpcResult);if("error"in a)throw new SolanaJSONRPCError(a.error,"failed to get fee calculator");const{context:l,value:b}=a.result;return{context:l,value:b!==null?b.feeCalculator:null}}async getFeeForMessage(e,n){const o=toBuffer(e.serialize()).toString("base64"),c=this._buildArgs([o],n),a=await this._rpcRequest("getFeeForMessage",c),l=create(a,jsonRpcResultAndContext(nullable(number())));if("error"in l)throw new SolanaJSONRPCError(l.error,"failed to get fee for message");if(l.result===null)throw new Error("invalid blockhash");return l.result}async getRecentPrioritizationFees(e){const n=e?.lockedWritableAccounts?.map(l=>l.toBase58()),o=n?.length?[n]:[],c=await this._rpcRequest("getRecentPrioritizationFees",o),a=create(c,GetRecentPrioritizationFeesRpcResult);if("error"in a)throw new SolanaJSONRPCError(a.error,"failed to get recent prioritization fees");return a.result}async getRecentBlockhash(e){try{return(await this.getRecentBlockhashAndContext(e)).value}catch(n){throw new Error("failed to get recent blockhash: "+n)}}async getLatestBlockhash(e){try{return(await this.getLatestBlockhashAndContext(e)).value}catch(n){throw new Error("failed to get recent blockhash: "+n)}}async getLatestBlockhashAndContext(e){const{commitment:n,config:o}=extractCommitmentFromConfig(e),c=this._buildArgs([],n,void 0,o),a=await this._rpcRequest("getLatestBlockhash",c),l=create(a,GetLatestBlockhashRpcResult);if("error"in l)throw new SolanaJSONRPCError(l.error,"failed to get latest blockhash");return l.result}async isBlockhashValid(e,n){const{commitment:o,config:c}=extractCommitmentFromConfig(n),a=this._buildArgs([e],o,void 0,c),l=await this._rpcRequest("isBlockhashValid",a),b=create(l,IsBlockhashValidRpcResult);if("error"in b)throw new SolanaJSONRPCError(b.error,"failed to determine if the blockhash `"+e+"`is valid");return b.result}async getVersion(){const e=await this._rpcRequest("getVersion",[]),n=create(e,jsonRpcResult(VersionResult));if("error"in n)throw new SolanaJSONRPCError(n.error,"failed to get version");return n.result}async getGenesisHash(){const e=await this._rpcRequest("getGenesisHash",[]),n=create(e,jsonRpcResult(string()));if("error"in n)throw new SolanaJSONRPCError(n.error,"failed to get genesis hash");return n.result}async getBlock(e,n){const{commitment:o,config:c}=extractCommitmentFromConfig(n),a=this._buildArgsAtLeastConfirmed([e],o,void 0,c),l=await this._rpcRequest("getBlock",a);try{switch(c?.transactionDetails){case"accounts":{const b=create(l,GetAccountsModeBlockRpcResult);if("error"in b)throw b.error;return b.result}case"none":{const b=create(l,GetNoneModeBlockRpcResult);if("error"in b)throw b.error;return b.result}default:{const b=create(l,GetBlockRpcResult);if("error"in b)throw b.error;const{result:v}=b;return v?{...v,transactions:v.transactions.map(({transaction:A,meta:S,version:M})=>({meta:S,transaction:{...A,message:versionedMessageFromResponse(M,A.message)},version:M}))}:null}}}catch(b){throw new SolanaJSONRPCError(b,"failed to get confirmed block")}}async getParsedBlock(e,n){const{commitment:o,config:c}=extractCommitmentFromConfig(n),a=this._buildArgsAtLeastConfirmed([e],o,"jsonParsed",c),l=await this._rpcRequest("getBlock",a);try{switch(c?.transactionDetails){case"accounts":{const b=create(l,GetParsedAccountsModeBlockRpcResult);if("error"in b)throw b.error;return b.result}case"none":{const b=create(l,GetParsedNoneModeBlockRpcResult);if("error"in b)throw b.error;return b.result}default:{const b=create(l,GetParsedBlockRpcResult);if("error"in b)throw b.error;return b.result}}}catch(b){throw new SolanaJSONRPCError(b,"failed to get block")}}async getBlockProduction(e){let n,o;if(typeof e=="string")o=e;else if(e){const{commitment:b,...v}=e;o=b,n=v}const c=this._buildArgs([],o,"base64",n),a=await this._rpcRequest("getBlockProduction",c),l=create(a,BlockProductionResponseStruct);if("error"in l)throw new SolanaJSONRPCError(l.error,"failed to get block production information");return l.result}async getTransaction(e,n){const{commitment:o,config:c}=extractCommitmentFromConfig(n),a=this._buildArgsAtLeastConfirmed([e],o,void 0,c),l=await this._rpcRequest("getTransaction",a),b=create(l,GetTransactionRpcResult);if("error"in b)throw new SolanaJSONRPCError(b.error,"failed to get transaction");const v=b.result;return v&&{...v,transaction:{...v.transaction,message:versionedMessageFromResponse(v.version,v.transaction.message)}}}async getParsedTransaction(e,n){const{commitment:o,config:c}=extractCommitmentFromConfig(n),a=this._buildArgsAtLeastConfirmed([e],o,"jsonParsed",c),l=await this._rpcRequest("getTransaction",a),b=create(l,GetParsedTransactionRpcResult);if("error"in b)throw new SolanaJSONRPCError(b.error,"failed to get transaction");return b.result}async getParsedTransactions(e,n){const{commitment:o,config:c}=extractCommitmentFromConfig(n),a=e.map(v=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([v],o,"jsonParsed",c)}));return(await this._rpcBatchRequest(a)).map(v=>{const A=create(v,GetParsedTransactionRpcResult);if("error"in A)throw new SolanaJSONRPCError(A.error,"failed to get transactions");return A.result})}async getTransactions(e,n){const{commitment:o,config:c}=extractCommitmentFromConfig(n),a=e.map(v=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([v],o,void 0,c)}));return(await this._rpcBatchRequest(a)).map(v=>{const A=create(v,GetTransactionRpcResult);if("error"in A)throw new SolanaJSONRPCError(A.error,"failed to get transactions");const S=A.result;return S&&{...S,transaction:{...S.transaction,message:versionedMessageFromResponse(S.version,S.transaction.message)}}})}async getConfirmedBlock(e,n){const o=this._buildArgsAtLeastConfirmed([e],n),c=await this._rpcRequest("getConfirmedBlock",o),a=create(c,GetConfirmedBlockRpcResult);if("error"in a)throw new SolanaJSONRPCError(a.error,"failed to get confirmed block");const l=a.result;if(!l)throw new Error("Confirmed block "+e+" not found");const b={...l,transactions:l.transactions.map(({transaction:v,meta:A})=>{const S=new Message(v.message);return{meta:A,transaction:{...v,message:S}}})};return{...b,transactions:b.transactions.map(({transaction:v,meta:A})=>({meta:A,transaction:Transaction.populate(v.message,v.signatures)}))}}async getBlocks(e,n,o){const c=this._buildArgsAtLeastConfirmed(n!==void 0?[e,n]:[e],o),a=await this._rpcRequest("getBlocks",c),l=create(a,jsonRpcResult(array(number())));if("error"in l)throw new SolanaJSONRPCError(l.error,"failed to get blocks");return l.result}async getBlockSignatures(e,n){const o=this._buildArgsAtLeastConfirmed([e],n,void 0,{transactionDetails:"signatures",rewards:!1}),c=await this._rpcRequest("getBlock",o),a=create(c,GetBlockSignaturesRpcResult);if("error"in a)throw new SolanaJSONRPCError(a.error,"failed to get block");const l=a.result;if(!l)throw new Error("Block "+e+" not found");return l}async getConfirmedBlockSignatures(e,n){const o=this._buildArgsAtLeastConfirmed([e],n,void 0,{transactionDetails:"signatures",rewards:!1}),c=await this._rpcRequest("getConfirmedBlock",o),a=create(c,GetBlockSignaturesRpcResult);if("error"in a)throw new SolanaJSONRPCError(a.error,"failed to get confirmed block");const l=a.result;if(!l)throw new Error("Confirmed block "+e+" not found");return l}async getConfirmedTransaction(e,n){const o=this._buildArgsAtLeastConfirmed([e],n),c=await this._rpcRequest("getConfirmedTransaction",o),a=create(c,GetTransactionRpcResult);if("error"in a)throw new SolanaJSONRPCError(a.error,"failed to get transaction");const l=a.result;if(!l)return l;const b=new Message(l.transaction.message),v=l.transaction.signatures;return{...l,transaction:Transaction.populate(b,v)}}async getParsedConfirmedTransaction(e,n){const o=this._buildArgsAtLeastConfirmed([e],n,"jsonParsed"),c=await this._rpcRequest("getConfirmedTransaction",o),a=create(c,GetParsedTransactionRpcResult);if("error"in a)throw new SolanaJSONRPCError(a.error,"failed to get confirmed transaction");return a.result}async getParsedConfirmedTransactions(e,n){const o=e.map(l=>({methodName:"getConfirmedTransaction",args:this._buildArgsAtLeastConfirmed([l],n,"jsonParsed")}));return(await this._rpcBatchRequest(o)).map(l=>{const b=create(l,GetParsedTransactionRpcResult);if("error"in b)throw new SolanaJSONRPCError(b.error,"failed to get confirmed transactions");return b.result})}async getConfirmedSignaturesForAddress(e,n,o){let c={},a=await this.getFirstAvailableBlock();for(;!("until"in c)&&(n--,!(n<=0||n<a));)try{const v=await this.getConfirmedBlockSignatures(n,"finalized");v.signatures.length>0&&(c.until=v.signatures[v.signatures.length-1].toString())}catch(v){if(v instanceof Error&&v.message.includes("skipped"))continue;throw v}let l=await this.getSlot("finalized");for(;!("before"in c)&&(o++,!(o>l));)try{const v=await this.getConfirmedBlockSignatures(o);v.signatures.length>0&&(c.before=v.signatures[v.signatures.length-1].toString())}catch(v){if(v instanceof Error&&v.message.includes("skipped"))continue;throw v}return(await this.getConfirmedSignaturesForAddress2(e,c)).map(v=>v.signature)}async getConfirmedSignaturesForAddress2(e,n,o){const c=this._buildArgsAtLeastConfirmed([e.toBase58()],o,void 0,n),a=await this._rpcRequest("getConfirmedSignaturesForAddress2",c),l=create(a,GetConfirmedSignaturesForAddress2RpcResult);if("error"in l)throw new SolanaJSONRPCError(l.error,"failed to get confirmed signatures for address");return l.result}async getSignaturesForAddress(e,n,o){const c=this._buildArgsAtLeastConfirmed([e.toBase58()],o,void 0,n),a=await this._rpcRequest("getSignaturesForAddress",c),l=create(a,GetSignaturesForAddressRpcResult);if("error"in l)throw new SolanaJSONRPCError(l.error,"failed to get signatures for address");return l.result}async getAddressLookupTable(e,n){const{context:o,value:c}=await this.getAccountInfoAndContext(e,n);let a=null;return c!==null&&(a=new AddressLookupTableAccount({key:e,state:AddressLookupTableAccount.deserialize(c.data)})),{context:o,value:a}}async getNonceAndContext(e,n){const{context:o,value:c}=await this.getAccountInfoAndContext(e,n);let a=null;return c!==null&&(a=NonceAccount.fromAccountData(c.data)),{context:o,value:a}}async getNonce(e,n){return await this.getNonceAndContext(e,n).then(o=>o.value).catch(o=>{throw new Error("failed to get nonce for account "+e.toBase58()+": "+o)})}async requestAirdrop(e,n){const o=await this._rpcRequest("requestAirdrop",[e.toBase58(),n]),c=create(o,RequestAirdropRpcResult);if("error"in c)throw new SolanaJSONRPCError(c.error,`airdrop to ${e.toBase58()} failed`);return c.result}async _blockhashWithExpiryBlockHeight(e){if(!e){for(;this._pollingBlockhash;)await sleep(100);const o=Date.now()-this._blockhashInfo.lastFetch>=BLOCKHASH_CACHE_TIMEOUT_MS;if(this._blockhashInfo.latestBlockhash!==null&&!o)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const e=Date.now(),n=this._blockhashInfo.latestBlockhash,o=n?n.blockhash:null;for(let c=0;c<50;c++){const a=await this.getLatestBlockhash("finalized");if(o!==a.blockhash)return this._blockhashInfo={latestBlockhash:a,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},a;await sleep(MS_PER_SLOT/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-e}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(e){const{commitment:n,config:o}=extractCommitmentFromConfig(e),c=this._buildArgs([],n,"base64",o),a=await this._rpcRequest("getStakeMinimumDelegation",c),l=create(a,jsonRpcResultAndContext(number()));if("error"in l)throw new SolanaJSONRPCError(l.error,"failed to get stake minimum delegation");return l.result}async simulateTransaction(e,n,o){if("message"in e){const F=e.serialize(),U=Buffer$1$1.from(F).toString("base64");if(Array.isArray(n)||o!==void 0)throw new Error("Invalid arguments");const q=n||{};q.encoding="base64","commitment"in q||(q.commitment=this.commitment);const X=[U,q],ee=await this._rpcRequest("simulateTransaction",X),te=create(ee,SimulatedTransactionResponseStruct);if("error"in te)throw new Error("failed to simulate transaction: "+te.error.message);return te.result}let c;if(e instanceof Transaction){let L=e;c=new Transaction,c.feePayer=L.feePayer,c.instructions=e.instructions,c.nonceInfo=L.nonceInfo,c.signatures=L.signatures}else c=Transaction.populate(e),c._message=c._json=void 0;if(n!==void 0&&!Array.isArray(n))throw new Error("Invalid arguments");const a=n;if(c.nonceInfo&&a)c.sign(...a);else{let L=this._disableBlockhashCaching;for(;;){const F=await this._blockhashWithExpiryBlockHeight(L);if(c.lastValidBlockHeight=F.lastValidBlockHeight,c.recentBlockhash=F.blockhash,!a)break;if(c.sign(...a),!c.signature)throw new Error("!signature");const U=c.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(U)&&!this._blockhashInfo.transactionSignatures.includes(U)){this._blockhashInfo.simulatedSignatures.push(U);break}else L=!0}}const l=c._compile(),b=l.serialize(),A=c._serialize(b).toString("base64"),S={encoding:"base64",commitment:this.commitment};if(o){const L=(Array.isArray(o)?o:l.nonProgramIds()).map(F=>F.toBase58());S.accounts={encoding:"base64",addresses:L}}a&&(S.sigVerify=!0);const M=[A,S],B=await this._rpcRequest("simulateTransaction",M),P=create(B,SimulatedTransactionResponseStruct);if("error"in P){let L;if("data"in P.error&&(L=P.error.data.logs,L&&Array.isArray(L))){const F=`
    `,U=F+L.join(F);console.error(P.error.message,U)}throw new SendTransactionError("failed to simulate transaction: "+P.error.message,L)}return P.result}async sendTransaction(e,n,o){if("version"in e){if(n&&Array.isArray(n))throw new Error("Invalid arguments");const l=e.serialize();return await this.sendRawTransaction(l,n)}if(n===void 0||!Array.isArray(n))throw new Error("Invalid arguments");const c=n;if(e.nonceInfo)e.sign(...c);else{let l=this._disableBlockhashCaching;for(;;){const b=await this._blockhashWithExpiryBlockHeight(l);if(e.lastValidBlockHeight=b.lastValidBlockHeight,e.recentBlockhash=b.blockhash,e.sign(...c),!e.signature)throw new Error("!signature");const v=e.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(v))l=!0;else{this._blockhashInfo.transactionSignatures.push(v);break}}}const a=e.serialize();return await this.sendRawTransaction(a,o)}async sendRawTransaction(e,n){const o=toBuffer(e).toString("base64");return await this.sendEncodedTransaction(o,n)}async sendEncodedTransaction(e,n){const o={encoding:"base64"},c=n&&n.skipPreflight,a=c===!0?"processed":n&&n.preflightCommitment||this.commitment;n&&n.maxRetries!=null&&(o.maxRetries=n.maxRetries),n&&n.minContextSlot!=null&&(o.minContextSlot=n.minContextSlot),c&&(o.skipPreflight=c),a&&(o.preflightCommitment=a);const l=[e,o],b=await this._rpcRequest("sendTransaction",l),v=create(b,SendTransactionRpcResult);if("error"in v){let A;throw"data"in v.error&&(A=v.error.data.logs),new SendTransactionError("failed to send transaction: "+v.error.message,A)}return v.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(e){this._rpcWebSocketConnected=!1,console.error("ws error:",e.message)}_wsOnClose(e){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),e===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([n,o])=>{this._setSubscription(n,{...o,state:"pending"})})}_setSubscription(e,n){const o=this._subscriptionsByHash[e]?.state;if(this._subscriptionsByHash[e]=n,o!==n.state){const c=this._subscriptionStateChangeCallbacksByHash[e];c&&c.forEach(a=>{try{a(n.state)}catch{}})}}_onSubscriptionStateChange(e,n){const o=this._subscriptionHashByClientSubscriptionId[e];if(o==null)return()=>{};const c=this._subscriptionStateChangeCallbacksByHash[o]||=new Set;return c.add(n),()=>{c.delete(n),c.size===0&&delete this._subscriptionStateChangeCallbacksByHash[o]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(o){o instanceof Error&&console.log(`Error when closing socket connection: ${o.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const e=this._rpcWebSocketGeneration,n=()=>e===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async o=>{const c=this._subscriptionsByHash[o];if(c!==void 0)switch(c.state){case"pending":case"unsubscribed":if(c.callbacks.size===0){delete this._subscriptionsByHash[o],c.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[c.serverSubscriptionId],await this._updateSubscriptions();return}await (async()=>{const{args:a,method:l}=c;try{this._setSubscription(o,{...c,state:"subscribing"});const b=await this._rpcWebSocket.call(l,a);this._setSubscription(o,{...c,serverSubscriptionId:b,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[b]=c.callbacks,await this._updateSubscriptions()}catch(b){if(b instanceof Error&&console.error(`${l} error for argument`,a,b.message),!n())return;this._setSubscription(o,{...c,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":c.callbacks.size===0&&await (async()=>{const{serverSubscriptionId:a,unsubscribeMethod:l}=c;if(this._subscriptionsAutoDisposedByRpc.has(a))this._subscriptionsAutoDisposedByRpc.delete(a);else{this._setSubscription(o,{...c,state:"unsubscribing"}),this._setSubscription(o,{...c,state:"unsubscribing"});try{await this._rpcWebSocket.call(l,[a])}catch(b){if(b instanceof Error&&console.error(`${l} error:`,b.message),!n())return;this._setSubscription(o,{...c,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(o,{...c,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(e,n){const o=this._subscriptionCallbacksByServerSubscriptionId[e];o!==void 0&&o.forEach(c=>{try{c(...n)}catch(a){console.error(a)}})}_wsOnAccountNotification(e){const{result:n,subscription:o}=create(e,AccountNotificationResult);this._handleServerNotification(o,[n.value,n.context])}_makeSubscription(e,n){const o=this._nextClientSubscriptionId++,c=fastStableStringify$1([e.method,n]),a=this._subscriptionsByHash[c];return a===void 0?this._subscriptionsByHash[c]={...e,args:n,callbacks:new Set([e.callback]),state:"pending"}:a.callbacks.add(e.callback),this._subscriptionHashByClientSubscriptionId[o]=c,this._subscriptionDisposeFunctionsByClientSubscriptionId[o]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[o],delete this._subscriptionHashByClientSubscriptionId[o];const l=this._subscriptionsByHash[c];assert(l!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${o}`),l.callbacks.delete(e.callback),await this._updateSubscriptions()},this._updateSubscriptions(),o}onAccountChange(e,n,o){const c=this._buildArgs([e.toBase58()],o||this._commitment||"finalized","base64");return this._makeSubscription({callback:n,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},c)}async removeAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"account change")}_wsOnProgramAccountNotification(e){const{result:n,subscription:o}=create(e,ProgramAccountNotificationResult);this._handleServerNotification(o,[{accountId:n.value.pubkey,accountInfo:n.value.account},n.context])}onProgramAccountChange(e,n,o,c){const a=this._buildArgs([e.toBase58()],o||this._commitment||"finalized","base64",c?{filters:c}:void 0);return this._makeSubscription({callback:n,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},a)}async removeProgramAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"program account change")}onLogs(e,n,o){const c=this._buildArgs([typeof e=="object"?{mentions:[e.toString()]}:e],o||this._commitment||"finalized");return this._makeSubscription({callback:n,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},c)}async removeOnLogsListener(e){await this._unsubscribeClientSubscription(e,"logs")}_wsOnLogsNotification(e){const{result:n,subscription:o}=create(e,LogsNotificationResult);this._handleServerNotification(o,[n.value,n.context])}_wsOnSlotNotification(e){const{result:n,subscription:o}=create(e,SlotNotificationResult);this._handleServerNotification(o,[n])}onSlotChange(e){return this._makeSubscription({callback:e,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(e){await this._unsubscribeClientSubscription(e,"slot change")}_wsOnSlotUpdatesNotification(e){const{result:n,subscription:o}=create(e,SlotUpdateNotificationResult);this._handleServerNotification(o,[n])}onSlotUpdate(e){return this._makeSubscription({callback:e,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(e){await this._unsubscribeClientSubscription(e,"slot update")}async _unsubscribeClientSubscription(e,n){const o=this._subscriptionDisposeFunctionsByClientSubscriptionId[e];o?await o():console.warn(`Ignored unsubscribe request because an active subscription with id \`${e}\` for '${n}' events could not be found.`)}_buildArgs(e,n,o,c){const a=n||this._commitment;if(a||o||c){let l={};o&&(l.encoding=o),a&&(l.commitment=a),c&&(l=Object.assign(l,c)),e.push(l)}return e}_buildArgsAtLeastConfirmed(e,n,o,c){const a=n||this._commitment;if(a&&!["confirmed","finalized"].includes(a))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(e,n,o,c)}_wsOnSignatureNotification(e){const{result:n,subscription:o}=create(e,SignatureNotificationResult);n.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(o),this._handleServerNotification(o,n.value==="receivedSignature"?[{type:"received"},n.context]:[{type:"status",result:n.value},n.context])}onSignature(e,n,o){const c=this._buildArgs([e],o||this._commitment||"finalized"),a=this._makeSubscription({callback:(l,b)=>{if(l.type==="status"){n(l.result,b);try{this.removeSignatureListener(a)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},c);return a}onSignatureWithOptions(e,n,o){const{commitment:c,...a}={...o,commitment:o&&o.commitment||this._commitment||"finalized"},l=this._buildArgs([e],c,void 0,a),b=this._makeSubscription({callback:(v,A)=>{n(v,A);try{this.removeSignatureListener(b)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},l);return b}async removeSignatureListener(e){await this._unsubscribeClientSubscription(e,"signature result")}_wsOnRootNotification(e){const{result:n,subscription:o}=create(e,RootNotificationResult);this._handleServerNotification(o,[n])}onRootChange(e){return this._makeSubscription({callback:e,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(e){await this._unsubscribeClientSubscription(e,"root change")}};class Keypair{constructor(e){this._keypair=void 0,this._keypair=e??generateKeypair()}static generate(){return new Keypair(generateKeypair())}static fromSecretKey(e,n){if(e.byteLength!==64)throw new Error("bad secret key size");const o=e.slice(32,64);if(!n||!n.skipValidation){const c=e.slice(0,32),a=getPublicKey(c);for(let l=0;l<32;l++)if(o[l]!==a[l])throw new Error("provided secretKey is invalid")}return new Keypair({publicKey:o,secretKey:e})}static fromSeed(e){const n=getPublicKey(e),o=new Uint8Array(64);return o.set(e),o.set(n,32),new Keypair({publicKey:n,secretKey:o})}get publicKey(){return new PublicKey(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}Object.freeze({CreateLookupTable:{index:0,layout:struct([u32("instruction"),u64$1("recentSlot"),u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:struct([u32("instruction")])},ExtendLookupTable:{index:2,layout:struct([u32("instruction"),u64$1(),seq(publicKey$1(),offset(u32(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:struct([u32("instruction")])},CloseLookupTable:{index:4,layout:struct([u32("instruction")])}});new PublicKey("AddressLookupTab1e1111111111111111111111111");Object.freeze({RequestUnits:{index:0,layout:struct([u8("instruction"),u32("units"),u32("additionalFee")])},RequestHeapFrame:{index:1,layout:struct([u8("instruction"),u32("bytes")])},SetComputeUnitLimit:{index:2,layout:struct([u8("instruction"),u32("units")])},SetComputeUnitPrice:{index:3,layout:struct([u8("instruction"),u64$1("microLamports")])}});new PublicKey("ComputeBudget111111111111111111111111111111");struct([u8("numSignatures"),u8("padding"),u16("signatureOffset"),u16("signatureInstructionIndex"),u16("publicKeyOffset"),u16("publicKeyInstructionIndex"),u16("messageDataOffset"),u16("messageDataSize"),u16("messageInstructionIndex")]);new PublicKey("Ed25519SigVerify111111111111111111111111111");secp256k1.utils.isValidPrivateKey;secp256k1.getPublicKey;struct([u8("numSignatures"),u16("signatureOffset"),u8("signatureInstructionIndex"),u16("ethAddressOffset"),u8("ethAddressInstructionIndex"),u16("messageDataOffset"),u16("messageDataSize"),u8("messageInstructionIndex"),blob(20,"ethAddress"),blob(64,"signature"),u8("recoveryId")]);new PublicKey("KeccakSecp256k11111111111111111111111111111");var _Lockup;new PublicKey("StakeConfig11111111111111111111111111111111");class Lockup{constructor(e,n,o){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=n,this.custodian=o}}_Lockup=Lockup;Lockup.default=new _Lockup(0,0,PublicKey.default);Object.freeze({Initialize:{index:0,layout:struct([u32("instruction"),authorized(),lockup()])},Authorize:{index:1,layout:struct([u32("instruction"),publicKey$1("newAuthorized"),u32("stakeAuthorizationType")])},Delegate:{index:2,layout:struct([u32("instruction")])},Split:{index:3,layout:struct([u32("instruction"),ns64("lamports")])},Withdraw:{index:4,layout:struct([u32("instruction"),ns64("lamports")])},Deactivate:{index:5,layout:struct([u32("instruction")])},Merge:{index:7,layout:struct([u32("instruction")])},AuthorizeWithSeed:{index:8,layout:struct([u32("instruction"),publicKey$1("newAuthorized"),u32("stakeAuthorizationType"),rustString("authoritySeed"),publicKey$1("authorityOwner")])}});new PublicKey("Stake11111111111111111111111111111111111111");Object.freeze({InitializeAccount:{index:0,layout:struct([u32("instruction"),voteInit()])},Authorize:{index:1,layout:struct([u32("instruction"),publicKey$1("newAuthorized"),u32("voteAuthorizationType")])},Withdraw:{index:3,layout:struct([u32("instruction"),ns64("lamports")])},UpdateValidatorIdentity:{index:4,layout:struct([u32("instruction")])},AuthorizeWithSeed:{index:10,layout:struct([u32("instruction"),voteAuthorizeWithSeedArgs()])}});new PublicKey("Vote111111111111111111111111111111111111111");new PublicKey("Va1idator1nfo111111111111111111111111111111");type({name:string(),website:optional(string()),details:optional(string()),keybaseUsername:optional(string())});new PublicKey("Vote111111111111111111111111111111111111111");struct([publicKey$1("nodePubkey"),publicKey$1("authorizedWithdrawer"),u8("commission"),nu64(),seq(struct([nu64("slot"),u32("confirmationCount")]),offset(u32(),-8),"votes"),u8("rootSlotValid"),nu64("rootSlot"),nu64(),seq(struct([nu64("epoch"),publicKey$1("authorizedVoter")]),offset(u32(),-8),"authorizedVoters"),struct([seq(struct([publicKey$1("authorizedPubkey"),nu64("epochOfLastAuthorizedSwitch"),nu64("targetEpoch")]),32,"buf"),nu64("idx"),u8("isEmpty")],"priorVoters"),nu64(),seq(struct([nu64("epoch"),nu64("credits"),nu64("prevCredits")]),offset(u32(),-8),"epochCredits"),struct([nu64("slot"),nu64("timestamp")],"lastTimestamp")]);const LAMPORTS_PER_SOL=1e9,TOKEN_PROGRAM_ID=new PublicKey("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA");new PublicKey("TokenzQdBNbLqP5VEhdkAS6EPFLC1PHnBqCXEpPxuEb");const ASSOCIATED_TOKEN_PROGRAM_ID=new PublicKey("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL");new PublicKey("So11111111111111111111111111111111111111112");new PublicKey("9pan9bMn5HatX4EJdBwg9VgCa7Uz5HL8N1m5D3NdXejP");const encodeDecode=t=>{const e=t.decode.bind(t),n=t.encode.bind(t);return{decode:e,encode:n}},bigInt=t=>e=>{const n=blob(t,e),{encode:o,decode:c}=encodeDecode(n),a=n;return a.decode=(l,b)=>{const v=c(l,b);return toBigIntLE_1(Buffer$1$1.from(v))},a.encode=(l,b,v)=>{const A=toBufferLE_1(l,t);return o(A,b,v)},a},u64=bigInt(8),bool=t=>{const e=u8(t),{encode:n,decode:o}=encodeDecode(e),c=e;return c.decode=(a,l)=>!!o(a,l),c.encode=(a,l,b)=>{const v=Number(a);return n(v,l,b)},c},publicKey=t=>{const e=blob(32,t),{encode:n,decode:o}=encodeDecode(e),c=e;return c.decode=(a,l)=>{const b=o(a,l);return new PublicKey(b)},c.encode=(a,l,b)=>{const v=a.toBuffer();return n(v,l,b)},c};class TokenError extends Error{constructor(e){super(e)}}class TokenAccountNotFoundError extends TokenError{constructor(){super(...arguments),this.name="TokenAccountNotFoundError"}}class TokenInvalidAccountError extends TokenError{constructor(){super(...arguments),this.name="TokenInvalidAccountError"}}class TokenInvalidAccountOwnerError extends TokenError{constructor(){super(...arguments),this.name="TokenInvalidAccountOwnerError"}}class TokenInvalidAccountSizeError extends TokenError{constructor(){super(...arguments),this.name="TokenInvalidAccountSizeError"}}class TokenInvalidMintError extends TokenError{constructor(){super(...arguments),this.name="TokenInvalidMintError"}}class TokenInvalidOwnerError extends TokenError{constructor(){super(...arguments),this.name="TokenInvalidOwnerError"}}class TokenOwnerOffCurveError extends TokenError{constructor(){super(...arguments),this.name="TokenOwnerOffCurveError"}}var TokenInstruction;(function(t){t[t.InitializeMint=0]="InitializeMint",t[t.InitializeAccount=1]="InitializeAccount",t[t.InitializeMultisig=2]="InitializeMultisig",t[t.Transfer=3]="Transfer",t[t.Approve=4]="Approve",t[t.Revoke=5]="Revoke",t[t.SetAuthority=6]="SetAuthority",t[t.MintTo=7]="MintTo",t[t.Burn=8]="Burn",t[t.CloseAccount=9]="CloseAccount",t[t.FreezeAccount=10]="FreezeAccount",t[t.ThawAccount=11]="ThawAccount",t[t.TransferChecked=12]="TransferChecked",t[t.ApproveChecked=13]="ApproveChecked",t[t.MintToChecked=14]="MintToChecked",t[t.BurnChecked=15]="BurnChecked",t[t.InitializeAccount2=16]="InitializeAccount2",t[t.SyncNative=17]="SyncNative",t[t.InitializeAccount3=18]="InitializeAccount3",t[t.InitializeMultisig2=19]="InitializeMultisig2",t[t.InitializeMint2=20]="InitializeMint2",t[t.GetAccountDataSize=21]="GetAccountDataSize",t[t.InitializeImmutableOwner=22]="InitializeImmutableOwner",t[t.AmountToUiAmount=23]="AmountToUiAmount",t[t.UiAmountToAmount=24]="UiAmountToAmount",t[t.InitializeMintCloseAuthority=25]="InitializeMintCloseAuthority",t[t.TransferFeeExtension=26]="TransferFeeExtension",t[t.ConfidentialTransferExtension=27]="ConfidentialTransferExtension",t[t.DefaultAccountStateExtension=28]="DefaultAccountStateExtension",t[t.Reallocate=29]="Reallocate",t[t.MemoTransferExtension=30]="MemoTransferExtension",t[t.CreateNativeMint=31]="CreateNativeMint",t[t.InitializeNonTransferableMint=32]="InitializeNonTransferableMint",t[t.InterestBearingMintExtension=33]="InterestBearingMintExtension",t[t.CpiGuardExtension=34]="CpiGuardExtension",t[t.InitializePermanentDelegate=35]="InitializePermanentDelegate",t[t.TransferHookExtension=36]="TransferHookExtension",t[t.MetadataPointerExtension=39]="MetadataPointerExtension",t[t.GroupPointerExtension=40]="GroupPointerExtension",t[t.GroupMemberPointerExtension=41]="GroupMemberPointerExtension"})(TokenInstruction||(TokenInstruction={}));function addSigners(t,e,n){if(n.length){t.push({pubkey:e,isSigner:!1,isWritable:!1});for(const o of n)t.push({pubkey:o instanceof PublicKey?o:o.publicKey,isSigner:!0,isWritable:!1})}else t.push({pubkey:e,isSigner:!0,isWritable:!1});return t}function getSigners(t,e){return t instanceof PublicKey?[t,e]:[t.publicKey,[t]]}var AccountType;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Mint=1]="Mint",t[t.Account=2]="Account"})(AccountType||(AccountType={}));const ACCOUNT_TYPE_SIZE=1,MultisigLayout=struct([u8("m"),u8("n"),bool("isInitialized"),publicKey("signer1"),publicKey("signer2"),publicKey("signer3"),publicKey("signer4"),publicKey("signer5"),publicKey("signer6"),publicKey("signer7"),publicKey("signer8"),publicKey("signer9"),publicKey("signer10"),publicKey("signer11")]),MULTISIG_SIZE=MultisigLayout.span;var AccountState;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initialized=1]="Initialized",t[t.Frozen=2]="Frozen"})(AccountState||(AccountState={}));const AccountLayout=struct([publicKey("mint"),publicKey("owner"),u64("amount"),u32("delegateOption"),publicKey("delegate"),u8("state"),u32("isNativeOption"),u64("isNative"),u64("delegatedAmount"),u32("closeAuthorityOption"),publicKey("closeAuthority")]),ACCOUNT_SIZE=AccountLayout.span;async function getAccount(t,e,n,o=TOKEN_PROGRAM_ID){const c=await t.getAccountInfo(e,n);return unpackAccount(e,c,o)}function unpackAccount(t,e,n=TOKEN_PROGRAM_ID){if(!e)throw new TokenAccountNotFoundError;if(!e.owner.equals(n))throw new TokenInvalidAccountOwnerError;if(e.data.length<ACCOUNT_SIZE)throw new TokenInvalidAccountSizeError;const o=AccountLayout.decode(e.data.slice(0,ACCOUNT_SIZE));let c=Buffer$1$1.alloc(0);if(e.data.length>ACCOUNT_SIZE){if(e.data.length===MULTISIG_SIZE)throw new TokenInvalidAccountSizeError;if(e.data[ACCOUNT_SIZE]!=AccountType.Account)throw new TokenInvalidAccountError;c=e.data.slice(ACCOUNT_SIZE+ACCOUNT_TYPE_SIZE)}return{address:t,mint:o.mint,owner:o.owner,amount:o.amount,delegate:o.delegateOption?o.delegate:null,delegatedAmount:o.delegatedAmount,isInitialized:o.state!==AccountState.Uninitialized,isFrozen:o.state===AccountState.Frozen,isNative:!!o.isNativeOption,rentExemptReserve:o.isNativeOption?o.isNative:null,closeAuthority:o.closeAuthorityOption?o.closeAuthority:null,tlvData:c}}const MintLayout=struct([u32("mintAuthorityOption"),publicKey("mintAuthority"),u64("supply"),u8("decimals"),bool("isInitialized"),u32("freezeAuthorityOption"),publicKey("freezeAuthority")]),MINT_SIZE=MintLayout.span;async function getMint(t,e,n,o=TOKEN_PROGRAM_ID){const c=await t.getAccountInfo(e,n);return unpackMint(e,c,o)}function unpackMint(t,e,n=TOKEN_PROGRAM_ID){if(!e)throw new TokenAccountNotFoundError;if(!e.owner.equals(n))throw new TokenInvalidAccountOwnerError;if(e.data.length<MINT_SIZE)throw new TokenInvalidAccountSizeError;const o=MintLayout.decode(e.data.slice(0,MINT_SIZE));let c=Buffer$1$1.alloc(0);if(e.data.length>MINT_SIZE){if(e.data.length<=ACCOUNT_SIZE)throw new TokenInvalidAccountSizeError;if(e.data.length===MULTISIG_SIZE)throw new TokenInvalidAccountSizeError;if(e.data[ACCOUNT_SIZE]!=AccountType.Mint)throw new TokenInvalidMintError;c=e.data.slice(ACCOUNT_SIZE+ACCOUNT_TYPE_SIZE)}return{address:t,mintAuthority:o.mintAuthorityOption?o.mintAuthority:null,supply:o.supply,decimals:o.decimals,isInitialized:o.isInitialized,freezeAuthority:o.freezeAuthorityOption?o.freezeAuthority:null,tlvData:c}}function getAssociatedTokenAddressSync(t,e,n=!1,o=TOKEN_PROGRAM_ID,c=ASSOCIATED_TOKEN_PROGRAM_ID){if(!n&&!PublicKey.isOnCurve(e.toBuffer()))throw new TokenOwnerOffCurveError;const[a]=PublicKey.findProgramAddressSync([e.toBuffer(),o.toBuffer(),t.toBuffer()],c);return a}function createAssociatedTokenAccountInstruction(t,e,n,o,c=TOKEN_PROGRAM_ID,a=ASSOCIATED_TOKEN_PROGRAM_ID){return buildAssociatedTokenAccountInstruction(t,e,n,o,Buffer$1$1.alloc(0),c,a)}function buildAssociatedTokenAccountInstruction(t,e,n,o,c,a=TOKEN_PROGRAM_ID,l=ASSOCIATED_TOKEN_PROGRAM_ID){const b=[{pubkey:t,isSigner:!0,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:o,isSigner:!1,isWritable:!1},{pubkey:SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:a,isSigner:!1,isWritable:!1}];return new TransactionInstruction({keys:b,programId:l,data:c})}async function getOrCreateAssociatedTokenAccount(t,e,n,o,c=!1,a,l,b=TOKEN_PROGRAM_ID,v=ASSOCIATED_TOKEN_PROGRAM_ID){const A=getAssociatedTokenAddressSync(n,o,c,b,v);let S;try{S=await getAccount(t,A,a,b)}catch(M){if(M instanceof TokenAccountNotFoundError||M instanceof TokenInvalidAccountOwnerError){try{const B=new Transaction().add(createAssociatedTokenAccountInstruction(e.publicKey,A,o,n,b,v));await sendAndConfirmTransaction(t,B,[e],l)}catch{}S=await getAccount(t,A,a,b)}else throw M}if(!S.mint.equals(n))throw new TokenInvalidMintError;if(!S.owner.equals(o))throw new TokenInvalidOwnerError;return S}const transferInstructionData=struct([u8("instruction"),u64("amount")]);function createTransferInstruction(t,e,n,o,c=[],a=TOKEN_PROGRAM_ID){const l=addSigners([{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!0}],n,c),b=Buffer$1$1.alloc(transferInstructionData.span);return transferInstructionData.encode({instruction:TokenInstruction.Transfer,amount:BigInt(o)},b),new TransactionInstruction({keys:l,programId:a,data:b})}async function transfer(t,e,n,o,c,a,l=[],b,v=TOKEN_PROGRAM_ID){const[A,S]=getSigners(c,l),M=new Transaction().add(createTransferInstruction(n,o,A,a,l,v));return await sendAndConfirmTransaction(t,M,[e,...S],b)}var dist={};function commonjsRequire(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var naclFast={exports:{}};(function(t){(function(e){var n=function(ne){var ie,ae=new Float64Array(16);if(ne)for(ie=0;ie<ne.length;ie++)ae[ie]=ne[ie];return ae},o=function(){throw new Error("no PRNG")},c=new Uint8Array(16),a=new Uint8Array(32);a[0]=9;var l=n(),b=n([1]),v=n([56129,1]),A=n([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),S=n([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),M=n([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),B=n([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),P=n([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function L(ne,ie,ae,Y){ne[ie]=ae>>24&255,ne[ie+1]=ae>>16&255,ne[ie+2]=ae>>8&255,ne[ie+3]=ae&255,ne[ie+4]=Y>>24&255,ne[ie+5]=Y>>16&255,ne[ie+6]=Y>>8&255,ne[ie+7]=Y&255}function F(ne,ie,ae,Y,fe){var ve,Pe=0;for(ve=0;ve<fe;ve++)Pe|=ne[ie+ve]^ae[Y+ve];return(1&Pe-1>>>8)-1}function U(ne,ie,ae,Y){return F(ne,ie,ae,Y,16)}function q(ne,ie,ae,Y){return F(ne,ie,ae,Y,32)}function X(ne,ie,ae,Y){for(var fe=Y[0]&255|(Y[1]&255)<<8|(Y[2]&255)<<16|(Y[3]&255)<<24,ve=ae[0]&255|(ae[1]&255)<<8|(ae[2]&255)<<16|(ae[3]&255)<<24,Pe=ae[4]&255|(ae[5]&255)<<8|(ae[6]&255)<<16|(ae[7]&255)<<24,xe=ae[8]&255|(ae[9]&255)<<8|(ae[10]&255)<<16|(ae[11]&255)<<24,Be=ae[12]&255|(ae[13]&255)<<8|(ae[14]&255)<<16|(ae[15]&255)<<24,Qe=Y[4]&255|(Y[5]&255)<<8|(Y[6]&255)<<16|(Y[7]&255)<<24,Ze=ie[0]&255|(ie[1]&255)<<8|(ie[2]&255)<<16|(ie[3]&255)<<24,xt=ie[4]&255|(ie[5]&255)<<8|(ie[6]&255)<<16|(ie[7]&255)<<24,it=ie[8]&255|(ie[9]&255)<<8|(ie[10]&255)<<16|(ie[11]&255)<<24,dt=ie[12]&255|(ie[13]&255)<<8|(ie[14]&255)<<16|(ie[15]&255)<<24,gt=Y[8]&255|(Y[9]&255)<<8|(Y[10]&255)<<16|(Y[11]&255)<<24,yt=ae[16]&255|(ae[17]&255)<<8|(ae[18]&255)<<16|(ae[19]&255)<<24,Et=ae[20]&255|(ae[21]&255)<<8|(ae[22]&255)<<16|(ae[23]&255)<<24,vt=ae[24]&255|(ae[25]&255)<<8|(ae[26]&255)<<16|(ae[27]&255)<<24,_t=ae[28]&255|(ae[29]&255)<<8|(ae[30]&255)<<16|(ae[31]&255)<<24,wt=Y[12]&255|(Y[13]&255)<<8|(Y[14]&255)<<16|(Y[15]&255)<<24,ct=fe,pt=ve,at=Pe,lt=xe,ht=Be,ot=Qe,je=Ze,We=xt,nt=it,tt=dt,rt=gt,st=yt,Tt=Et,It=vt,Bt=_t,Rt=wt,Re,Ct=0;Ct<20;Ct+=2)Re=ct+Tt|0,ht^=Re<<7|Re>>>25,Re=ht+ct|0,nt^=Re<<9|Re>>>23,Re=nt+ht|0,Tt^=Re<<13|Re>>>19,Re=Tt+nt|0,ct^=Re<<18|Re>>>14,Re=ot+pt|0,tt^=Re<<7|Re>>>25,Re=tt+ot|0,It^=Re<<9|Re>>>23,Re=It+tt|0,pt^=Re<<13|Re>>>19,Re=pt+It|0,ot^=Re<<18|Re>>>14,Re=rt+je|0,Bt^=Re<<7|Re>>>25,Re=Bt+rt|0,at^=Re<<9|Re>>>23,Re=at+Bt|0,je^=Re<<13|Re>>>19,Re=je+at|0,rt^=Re<<18|Re>>>14,Re=Rt+st|0,lt^=Re<<7|Re>>>25,Re=lt+Rt|0,We^=Re<<9|Re>>>23,Re=We+lt|0,st^=Re<<13|Re>>>19,Re=st+We|0,Rt^=Re<<18|Re>>>14,Re=ct+lt|0,pt^=Re<<7|Re>>>25,Re=pt+ct|0,at^=Re<<9|Re>>>23,Re=at+pt|0,lt^=Re<<13|Re>>>19,Re=lt+at|0,ct^=Re<<18|Re>>>14,Re=ot+ht|0,je^=Re<<7|Re>>>25,Re=je+ot|0,We^=Re<<9|Re>>>23,Re=We+je|0,ht^=Re<<13|Re>>>19,Re=ht+We|0,ot^=Re<<18|Re>>>14,Re=rt+tt|0,st^=Re<<7|Re>>>25,Re=st+rt|0,nt^=Re<<9|Re>>>23,Re=nt+st|0,tt^=Re<<13|Re>>>19,Re=tt+nt|0,rt^=Re<<18|Re>>>14,Re=Rt+Bt|0,Tt^=Re<<7|Re>>>25,Re=Tt+Rt|0,It^=Re<<9|Re>>>23,Re=It+Tt|0,Bt^=Re<<13|Re>>>19,Re=Bt+It|0,Rt^=Re<<18|Re>>>14;ct=ct+fe|0,pt=pt+ve|0,at=at+Pe|0,lt=lt+xe|0,ht=ht+Be|0,ot=ot+Qe|0,je=je+Ze|0,We=We+xt|0,nt=nt+it|0,tt=tt+dt|0,rt=rt+gt|0,st=st+yt|0,Tt=Tt+Et|0,It=It+vt|0,Bt=Bt+_t|0,Rt=Rt+wt|0,ne[0]=ct>>>0&255,ne[1]=ct>>>8&255,ne[2]=ct>>>16&255,ne[3]=ct>>>24&255,ne[4]=pt>>>0&255,ne[5]=pt>>>8&255,ne[6]=pt>>>16&255,ne[7]=pt>>>24&255,ne[8]=at>>>0&255,ne[9]=at>>>8&255,ne[10]=at>>>16&255,ne[11]=at>>>24&255,ne[12]=lt>>>0&255,ne[13]=lt>>>8&255,ne[14]=lt>>>16&255,ne[15]=lt>>>24&255,ne[16]=ht>>>0&255,ne[17]=ht>>>8&255,ne[18]=ht>>>16&255,ne[19]=ht>>>24&255,ne[20]=ot>>>0&255,ne[21]=ot>>>8&255,ne[22]=ot>>>16&255,ne[23]=ot>>>24&255,ne[24]=je>>>0&255,ne[25]=je>>>8&255,ne[26]=je>>>16&255,ne[27]=je>>>24&255,ne[28]=We>>>0&255,ne[29]=We>>>8&255,ne[30]=We>>>16&255,ne[31]=We>>>24&255,ne[32]=nt>>>0&255,ne[33]=nt>>>8&255,ne[34]=nt>>>16&255,ne[35]=nt>>>24&255,ne[36]=tt>>>0&255,ne[37]=tt>>>8&255,ne[38]=tt>>>16&255,ne[39]=tt>>>24&255,ne[40]=rt>>>0&255,ne[41]=rt>>>8&255,ne[42]=rt>>>16&255,ne[43]=rt>>>24&255,ne[44]=st>>>0&255,ne[45]=st>>>8&255,ne[46]=st>>>16&255,ne[47]=st>>>24&255,ne[48]=Tt>>>0&255,ne[49]=Tt>>>8&255,ne[50]=Tt>>>16&255,ne[51]=Tt>>>24&255,ne[52]=It>>>0&255,ne[53]=It>>>8&255,ne[54]=It>>>16&255,ne[55]=It>>>24&255,ne[56]=Bt>>>0&255,ne[57]=Bt>>>8&255,ne[58]=Bt>>>16&255,ne[59]=Bt>>>24&255,ne[60]=Rt>>>0&255,ne[61]=Rt>>>8&255,ne[62]=Rt>>>16&255,ne[63]=Rt>>>24&255}function ee(ne,ie,ae,Y){for(var fe=Y[0]&255|(Y[1]&255)<<8|(Y[2]&255)<<16|(Y[3]&255)<<24,ve=ae[0]&255|(ae[1]&255)<<8|(ae[2]&255)<<16|(ae[3]&255)<<24,Pe=ae[4]&255|(ae[5]&255)<<8|(ae[6]&255)<<16|(ae[7]&255)<<24,xe=ae[8]&255|(ae[9]&255)<<8|(ae[10]&255)<<16|(ae[11]&255)<<24,Be=ae[12]&255|(ae[13]&255)<<8|(ae[14]&255)<<16|(ae[15]&255)<<24,Qe=Y[4]&255|(Y[5]&255)<<8|(Y[6]&255)<<16|(Y[7]&255)<<24,Ze=ie[0]&255|(ie[1]&255)<<8|(ie[2]&255)<<16|(ie[3]&255)<<24,xt=ie[4]&255|(ie[5]&255)<<8|(ie[6]&255)<<16|(ie[7]&255)<<24,it=ie[8]&255|(ie[9]&255)<<8|(ie[10]&255)<<16|(ie[11]&255)<<24,dt=ie[12]&255|(ie[13]&255)<<8|(ie[14]&255)<<16|(ie[15]&255)<<24,gt=Y[8]&255|(Y[9]&255)<<8|(Y[10]&255)<<16|(Y[11]&255)<<24,yt=ae[16]&255|(ae[17]&255)<<8|(ae[18]&255)<<16|(ae[19]&255)<<24,Et=ae[20]&255|(ae[21]&255)<<8|(ae[22]&255)<<16|(ae[23]&255)<<24,vt=ae[24]&255|(ae[25]&255)<<8|(ae[26]&255)<<16|(ae[27]&255)<<24,_t=ae[28]&255|(ae[29]&255)<<8|(ae[30]&255)<<16|(ae[31]&255)<<24,wt=Y[12]&255|(Y[13]&255)<<8|(Y[14]&255)<<16|(Y[15]&255)<<24,ct=fe,pt=ve,at=Pe,lt=xe,ht=Be,ot=Qe,je=Ze,We=xt,nt=it,tt=dt,rt=gt,st=yt,Tt=Et,It=vt,Bt=_t,Rt=wt,Re,Ct=0;Ct<20;Ct+=2)Re=ct+Tt|0,ht^=Re<<7|Re>>>25,Re=ht+ct|0,nt^=Re<<9|Re>>>23,Re=nt+ht|0,Tt^=Re<<13|Re>>>19,Re=Tt+nt|0,ct^=Re<<18|Re>>>14,Re=ot+pt|0,tt^=Re<<7|Re>>>25,Re=tt+ot|0,It^=Re<<9|Re>>>23,Re=It+tt|0,pt^=Re<<13|Re>>>19,Re=pt+It|0,ot^=Re<<18|Re>>>14,Re=rt+je|0,Bt^=Re<<7|Re>>>25,Re=Bt+rt|0,at^=Re<<9|Re>>>23,Re=at+Bt|0,je^=Re<<13|Re>>>19,Re=je+at|0,rt^=Re<<18|Re>>>14,Re=Rt+st|0,lt^=Re<<7|Re>>>25,Re=lt+Rt|0,We^=Re<<9|Re>>>23,Re=We+lt|0,st^=Re<<13|Re>>>19,Re=st+We|0,Rt^=Re<<18|Re>>>14,Re=ct+lt|0,pt^=Re<<7|Re>>>25,Re=pt+ct|0,at^=Re<<9|Re>>>23,Re=at+pt|0,lt^=Re<<13|Re>>>19,Re=lt+at|0,ct^=Re<<18|Re>>>14,Re=ot+ht|0,je^=Re<<7|Re>>>25,Re=je+ot|0,We^=Re<<9|Re>>>23,Re=We+je|0,ht^=Re<<13|Re>>>19,Re=ht+We|0,ot^=Re<<18|Re>>>14,Re=rt+tt|0,st^=Re<<7|Re>>>25,Re=st+rt|0,nt^=Re<<9|Re>>>23,Re=nt+st|0,tt^=Re<<13|Re>>>19,Re=tt+nt|0,rt^=Re<<18|Re>>>14,Re=Rt+Bt|0,Tt^=Re<<7|Re>>>25,Re=Tt+Rt|0,It^=Re<<9|Re>>>23,Re=It+Tt|0,Bt^=Re<<13|Re>>>19,Re=Bt+It|0,Rt^=Re<<18|Re>>>14;ne[0]=ct>>>0&255,ne[1]=ct>>>8&255,ne[2]=ct>>>16&255,ne[3]=ct>>>24&255,ne[4]=ot>>>0&255,ne[5]=ot>>>8&255,ne[6]=ot>>>16&255,ne[7]=ot>>>24&255,ne[8]=rt>>>0&255,ne[9]=rt>>>8&255,ne[10]=rt>>>16&255,ne[11]=rt>>>24&255,ne[12]=Rt>>>0&255,ne[13]=Rt>>>8&255,ne[14]=Rt>>>16&255,ne[15]=Rt>>>24&255,ne[16]=je>>>0&255,ne[17]=je>>>8&255,ne[18]=je>>>16&255,ne[19]=je>>>24&255,ne[20]=We>>>0&255,ne[21]=We>>>8&255,ne[22]=We>>>16&255,ne[23]=We>>>24&255,ne[24]=nt>>>0&255,ne[25]=nt>>>8&255,ne[26]=nt>>>16&255,ne[27]=nt>>>24&255,ne[28]=tt>>>0&255,ne[29]=tt>>>8&255,ne[30]=tt>>>16&255,ne[31]=tt>>>24&255}function te(ne,ie,ae,Y){X(ne,ie,ae,Y)}function ce(ne,ie,ae,Y){ee(ne,ie,ae,Y)}var ue=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function Ae(ne,ie,ae,Y,fe,ve,Pe){var xe=new Uint8Array(16),Be=new Uint8Array(64),Qe,Ze;for(Ze=0;Ze<16;Ze++)xe[Ze]=0;for(Ze=0;Ze<8;Ze++)xe[Ze]=ve[Ze];for(;fe>=64;){for(te(Be,xe,Pe,ue),Ze=0;Ze<64;Ze++)ne[ie+Ze]=ae[Y+Ze]^Be[Ze];for(Qe=1,Ze=8;Ze<16;Ze++)Qe=Qe+(xe[Ze]&255)|0,xe[Ze]=Qe&255,Qe>>>=8;fe-=64,ie+=64,Y+=64}if(fe>0)for(te(Be,xe,Pe,ue),Ze=0;Ze<fe;Ze++)ne[ie+Ze]=ae[Y+Ze]^Be[Ze];return 0}function we(ne,ie,ae,Y,fe){var ve=new Uint8Array(16),Pe=new Uint8Array(64),xe,Be;for(Be=0;Be<16;Be++)ve[Be]=0;for(Be=0;Be<8;Be++)ve[Be]=Y[Be];for(;ae>=64;){for(te(Pe,ve,fe,ue),Be=0;Be<64;Be++)ne[ie+Be]=Pe[Be];for(xe=1,Be=8;Be<16;Be++)xe=xe+(ve[Be]&255)|0,ve[Be]=xe&255,xe>>>=8;ae-=64,ie+=64}if(ae>0)for(te(Pe,ve,fe,ue),Be=0;Be<ae;Be++)ne[ie+Be]=Pe[Be];return 0}function pe(ne,ie,ae,Y,fe){var ve=new Uint8Array(32);ce(ve,Y,fe,ue);for(var Pe=new Uint8Array(8),xe=0;xe<8;xe++)Pe[xe]=Y[xe+16];return we(ne,ie,ae,Pe,ve)}function Ce(ne,ie,ae,Y,fe,ve,Pe){var xe=new Uint8Array(32);ce(xe,ve,Pe,ue);for(var Be=new Uint8Array(8),Qe=0;Qe<8;Qe++)Be[Qe]=ve[Qe+16];return Ae(ne,ie,ae,Y,fe,Be,xe)}var T=function(ne){this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0;var ie,ae,Y,fe,ve,Pe,xe,Be;ie=ne[0]&255|(ne[1]&255)<<8,this.r[0]=ie&8191,ae=ne[2]&255|(ne[3]&255)<<8,this.r[1]=(ie>>>13|ae<<3)&8191,Y=ne[4]&255|(ne[5]&255)<<8,this.r[2]=(ae>>>10|Y<<6)&7939,fe=ne[6]&255|(ne[7]&255)<<8,this.r[3]=(Y>>>7|fe<<9)&8191,ve=ne[8]&255|(ne[9]&255)<<8,this.r[4]=(fe>>>4|ve<<12)&255,this.r[5]=ve>>>1&8190,Pe=ne[10]&255|(ne[11]&255)<<8,this.r[6]=(ve>>>14|Pe<<2)&8191,xe=ne[12]&255|(ne[13]&255)<<8,this.r[7]=(Pe>>>11|xe<<5)&8065,Be=ne[14]&255|(ne[15]&255)<<8,this.r[8]=(xe>>>8|Be<<8)&8191,this.r[9]=Be>>>5&127,this.pad[0]=ne[16]&255|(ne[17]&255)<<8,this.pad[1]=ne[18]&255|(ne[19]&255)<<8,this.pad[2]=ne[20]&255|(ne[21]&255)<<8,this.pad[3]=ne[22]&255|(ne[23]&255)<<8,this.pad[4]=ne[24]&255|(ne[25]&255)<<8,this.pad[5]=ne[26]&255|(ne[27]&255)<<8,this.pad[6]=ne[28]&255|(ne[29]&255)<<8,this.pad[7]=ne[30]&255|(ne[31]&255)<<8};T.prototype.blocks=function(ne,ie,ae){for(var Y=this.fin?0:2048,fe,ve,Pe,xe,Be,Qe,Ze,xt,it,dt,gt,yt,Et,vt,_t,wt,ct,pt,at,lt=this.h[0],ht=this.h[1],ot=this.h[2],je=this.h[3],We=this.h[4],nt=this.h[5],tt=this.h[6],rt=this.h[7],st=this.h[8],Tt=this.h[9],It=this.r[0],Bt=this.r[1],Rt=this.r[2],Re=this.r[3],Ct=this.r[4],Lt=this.r[5],Dt=this.r[6],Pt=this.r[7],Nt=this.r[8],Ot=this.r[9];ae>=16;)fe=ne[ie+0]&255|(ne[ie+1]&255)<<8,lt+=fe&8191,ve=ne[ie+2]&255|(ne[ie+3]&255)<<8,ht+=(fe>>>13|ve<<3)&8191,Pe=ne[ie+4]&255|(ne[ie+5]&255)<<8,ot+=(ve>>>10|Pe<<6)&8191,xe=ne[ie+6]&255|(ne[ie+7]&255)<<8,je+=(Pe>>>7|xe<<9)&8191,Be=ne[ie+8]&255|(ne[ie+9]&255)<<8,We+=(xe>>>4|Be<<12)&8191,nt+=Be>>>1&8191,Qe=ne[ie+10]&255|(ne[ie+11]&255)<<8,tt+=(Be>>>14|Qe<<2)&8191,Ze=ne[ie+12]&255|(ne[ie+13]&255)<<8,rt+=(Qe>>>11|Ze<<5)&8191,xt=ne[ie+14]&255|(ne[ie+15]&255)<<8,st+=(Ze>>>8|xt<<8)&8191,Tt+=xt>>>5|Y,it=0,dt=it,dt+=lt*It,dt+=ht*(5*Ot),dt+=ot*(5*Nt),dt+=je*(5*Pt),dt+=We*(5*Dt),it=dt>>>13,dt&=8191,dt+=nt*(5*Lt),dt+=tt*(5*Ct),dt+=rt*(5*Re),dt+=st*(5*Rt),dt+=Tt*(5*Bt),it+=dt>>>13,dt&=8191,gt=it,gt+=lt*Bt,gt+=ht*It,gt+=ot*(5*Ot),gt+=je*(5*Nt),gt+=We*(5*Pt),it=gt>>>13,gt&=8191,gt+=nt*(5*Dt),gt+=tt*(5*Lt),gt+=rt*(5*Ct),gt+=st*(5*Re),gt+=Tt*(5*Rt),it+=gt>>>13,gt&=8191,yt=it,yt+=lt*Rt,yt+=ht*Bt,yt+=ot*It,yt+=je*(5*Ot),yt+=We*(5*Nt),it=yt>>>13,yt&=8191,yt+=nt*(5*Pt),yt+=tt*(5*Dt),yt+=rt*(5*Lt),yt+=st*(5*Ct),yt+=Tt*(5*Re),it+=yt>>>13,yt&=8191,Et=it,Et+=lt*Re,Et+=ht*Rt,Et+=ot*Bt,Et+=je*It,Et+=We*(5*Ot),it=Et>>>13,Et&=8191,Et+=nt*(5*Nt),Et+=tt*(5*Pt),Et+=rt*(5*Dt),Et+=st*(5*Lt),Et+=Tt*(5*Ct),it+=Et>>>13,Et&=8191,vt=it,vt+=lt*Ct,vt+=ht*Re,vt+=ot*Rt,vt+=je*Bt,vt+=We*It,it=vt>>>13,vt&=8191,vt+=nt*(5*Ot),vt+=tt*(5*Nt),vt+=rt*(5*Pt),vt+=st*(5*Dt),vt+=Tt*(5*Lt),it+=vt>>>13,vt&=8191,_t=it,_t+=lt*Lt,_t+=ht*Ct,_t+=ot*Re,_t+=je*Rt,_t+=We*Bt,it=_t>>>13,_t&=8191,_t+=nt*It,_t+=tt*(5*Ot),_t+=rt*(5*Nt),_t+=st*(5*Pt),_t+=Tt*(5*Dt),it+=_t>>>13,_t&=8191,wt=it,wt+=lt*Dt,wt+=ht*Lt,wt+=ot*Ct,wt+=je*Re,wt+=We*Rt,it=wt>>>13,wt&=8191,wt+=nt*Bt,wt+=tt*It,wt+=rt*(5*Ot),wt+=st*(5*Nt),wt+=Tt*(5*Pt),it+=wt>>>13,wt&=8191,ct=it,ct+=lt*Pt,ct+=ht*Dt,ct+=ot*Lt,ct+=je*Ct,ct+=We*Re,it=ct>>>13,ct&=8191,ct+=nt*Rt,ct+=tt*Bt,ct+=rt*It,ct+=st*(5*Ot),ct+=Tt*(5*Nt),it+=ct>>>13,ct&=8191,pt=it,pt+=lt*Nt,pt+=ht*Pt,pt+=ot*Dt,pt+=je*Lt,pt+=We*Ct,it=pt>>>13,pt&=8191,pt+=nt*Re,pt+=tt*Rt,pt+=rt*Bt,pt+=st*It,pt+=Tt*(5*Ot),it+=pt>>>13,pt&=8191,at=it,at+=lt*Ot,at+=ht*Nt,at+=ot*Pt,at+=je*Dt,at+=We*Lt,it=at>>>13,at&=8191,at+=nt*Ct,at+=tt*Re,at+=rt*Rt,at+=st*Bt,at+=Tt*It,it+=at>>>13,at&=8191,it=(it<<2)+it|0,it=it+dt|0,dt=it&8191,it=it>>>13,gt+=it,lt=dt,ht=gt,ot=yt,je=Et,We=vt,nt=_t,tt=wt,rt=ct,st=pt,Tt=at,ie+=16,ae-=16;this.h[0]=lt,this.h[1]=ht,this.h[2]=ot,this.h[3]=je,this.h[4]=We,this.h[5]=nt,this.h[6]=tt,this.h[7]=rt,this.h[8]=st,this.h[9]=Tt},T.prototype.finish=function(ne,ie){var ae=new Uint16Array(10),Y,fe,ve,Pe;if(this.leftover){for(Pe=this.leftover,this.buffer[Pe++]=1;Pe<16;Pe++)this.buffer[Pe]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(Y=this.h[1]>>>13,this.h[1]&=8191,Pe=2;Pe<10;Pe++)this.h[Pe]+=Y,Y=this.h[Pe]>>>13,this.h[Pe]&=8191;for(this.h[0]+=Y*5,Y=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=Y,Y=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=Y,ae[0]=this.h[0]+5,Y=ae[0]>>>13,ae[0]&=8191,Pe=1;Pe<10;Pe++)ae[Pe]=this.h[Pe]+Y,Y=ae[Pe]>>>13,ae[Pe]&=8191;for(ae[9]-=8192,fe=(Y^1)-1,Pe=0;Pe<10;Pe++)ae[Pe]&=fe;for(fe=~fe,Pe=0;Pe<10;Pe++)this.h[Pe]=this.h[Pe]&fe|ae[Pe];for(this.h[0]=(this.h[0]|this.h[1]<<13)&65535,this.h[1]=(this.h[1]>>>3|this.h[2]<<10)&65535,this.h[2]=(this.h[2]>>>6|this.h[3]<<7)&65535,this.h[3]=(this.h[3]>>>9|this.h[4]<<4)&65535,this.h[4]=(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14)&65535,this.h[5]=(this.h[6]>>>2|this.h[7]<<11)&65535,this.h[6]=(this.h[7]>>>5|this.h[8]<<8)&65535,this.h[7]=(this.h[8]>>>8|this.h[9]<<5)&65535,ve=this.h[0]+this.pad[0],this.h[0]=ve&65535,Pe=1;Pe<8;Pe++)ve=(this.h[Pe]+this.pad[Pe]|0)+(ve>>>16)|0,this.h[Pe]=ve&65535;ne[ie+0]=this.h[0]>>>0&255,ne[ie+1]=this.h[0]>>>8&255,ne[ie+2]=this.h[1]>>>0&255,ne[ie+3]=this.h[1]>>>8&255,ne[ie+4]=this.h[2]>>>0&255,ne[ie+5]=this.h[2]>>>8&255,ne[ie+6]=this.h[3]>>>0&255,ne[ie+7]=this.h[3]>>>8&255,ne[ie+8]=this.h[4]>>>0&255,ne[ie+9]=this.h[4]>>>8&255,ne[ie+10]=this.h[5]>>>0&255,ne[ie+11]=this.h[5]>>>8&255,ne[ie+12]=this.h[6]>>>0&255,ne[ie+13]=this.h[6]>>>8&255,ne[ie+14]=this.h[7]>>>0&255,ne[ie+15]=this.h[7]>>>8&255},T.prototype.update=function(ne,ie,ae){var Y,fe;if(this.leftover){for(fe=16-this.leftover,fe>ae&&(fe=ae),Y=0;Y<fe;Y++)this.buffer[this.leftover+Y]=ne[ie+Y];if(ae-=fe,ie+=fe,this.leftover+=fe,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(ae>=16&&(fe=ae-ae%16,this.blocks(ne,ie,fe),ie+=fe,ae-=fe),ae){for(Y=0;Y<ae;Y++)this.buffer[this.leftover+Y]=ne[ie+Y];this.leftover+=ae}};function u(ne,ie,ae,Y,fe,ve){var Pe=new T(ve);return Pe.update(ae,Y,fe),Pe.finish(ne,ie),0}function p(ne,ie,ae,Y,fe,ve){var Pe=new Uint8Array(16);return u(Pe,0,ae,Y,fe,ve),U(ne,ie,Pe,0)}function m(ne,ie,ae,Y,fe){var ve;if(ae<32)return-1;for(Ce(ne,0,ie,0,ae,Y,fe),u(ne,16,ne,32,ae-32,ne),ve=0;ve<16;ve++)ne[ve]=0;return 0}function y(ne,ie,ae,Y,fe){var ve,Pe=new Uint8Array(32);if(ae<32||(pe(Pe,0,32,Y,fe),p(ie,16,ie,32,ae-32,Pe)!==0))return-1;for(Ce(ne,0,ie,0,ae,Y,fe),ve=0;ve<32;ve++)ne[ve]=0;return 0}function E(ne,ie){var ae;for(ae=0;ae<16;ae++)ne[ae]=ie[ae]|0}function $(ne){var ie,ae,Y=1;for(ie=0;ie<16;ie++)ae=ne[ie]+Y+65535,Y=Math.floor(ae/65536),ne[ie]=ae-Y*65536;ne[0]+=Y-1+37*(Y-1)}function k(ne,ie,ae){for(var Y,fe=~(ae-1),ve=0;ve<16;ve++)Y=fe&(ne[ve]^ie[ve]),ne[ve]^=Y,ie[ve]^=Y}function _(ne,ie){var ae,Y,fe,ve=n(),Pe=n();for(ae=0;ae<16;ae++)Pe[ae]=ie[ae];for($(Pe),$(Pe),$(Pe),Y=0;Y<2;Y++){for(ve[0]=Pe[0]-65517,ae=1;ae<15;ae++)ve[ae]=Pe[ae]-65535-(ve[ae-1]>>16&1),ve[ae-1]&=65535;ve[15]=Pe[15]-32767-(ve[14]>>16&1),fe=ve[15]>>16&1,ve[14]&=65535,k(Pe,ve,1-fe)}for(ae=0;ae<16;ae++)ne[2*ae]=Pe[ae]&255,ne[2*ae+1]=Pe[ae]>>8}function d(ne,ie){var ae=new Uint8Array(32),Y=new Uint8Array(32);return _(ae,ne),_(Y,ie),q(ae,0,Y,0)}function w(ne){var ie=new Uint8Array(32);return _(ie,ne),ie[0]&1}function I(ne,ie){var ae;for(ae=0;ae<16;ae++)ne[ae]=ie[2*ae]+(ie[2*ae+1]<<8);ne[15]&=32767}function C(ne,ie,ae){for(var Y=0;Y<16;Y++)ne[Y]=ie[Y]+ae[Y]}function V(ne,ie,ae){for(var Y=0;Y<16;Y++)ne[Y]=ie[Y]-ae[Y]}function O(ne,ie,ae){var Y,fe,ve=0,Pe=0,xe=0,Be=0,Qe=0,Ze=0,xt=0,it=0,dt=0,gt=0,yt=0,Et=0,vt=0,_t=0,wt=0,ct=0,pt=0,at=0,lt=0,ht=0,ot=0,je=0,We=0,nt=0,tt=0,rt=0,st=0,Tt=0,It=0,Bt=0,Rt=0,Re=ae[0],Ct=ae[1],Lt=ae[2],Dt=ae[3],Pt=ae[4],Nt=ae[5],Ot=ae[6],jt=ae[7],Ft=ae[8],zt=ae[9],Ht=ae[10],qt=ae[11],Kt=ae[12],Wt=ae[13],Gt=ae[14],Vt=ae[15];Y=ie[0],ve+=Y*Re,Pe+=Y*Ct,xe+=Y*Lt,Be+=Y*Dt,Qe+=Y*Pt,Ze+=Y*Nt,xt+=Y*Ot,it+=Y*jt,dt+=Y*Ft,gt+=Y*zt,yt+=Y*Ht,Et+=Y*qt,vt+=Y*Kt,_t+=Y*Wt,wt+=Y*Gt,ct+=Y*Vt,Y=ie[1],Pe+=Y*Re,xe+=Y*Ct,Be+=Y*Lt,Qe+=Y*Dt,Ze+=Y*Pt,xt+=Y*Nt,it+=Y*Ot,dt+=Y*jt,gt+=Y*Ft,yt+=Y*zt,Et+=Y*Ht,vt+=Y*qt,_t+=Y*Kt,wt+=Y*Wt,ct+=Y*Gt,pt+=Y*Vt,Y=ie[2],xe+=Y*Re,Be+=Y*Ct,Qe+=Y*Lt,Ze+=Y*Dt,xt+=Y*Pt,it+=Y*Nt,dt+=Y*Ot,gt+=Y*jt,yt+=Y*Ft,Et+=Y*zt,vt+=Y*Ht,_t+=Y*qt,wt+=Y*Kt,ct+=Y*Wt,pt+=Y*Gt,at+=Y*Vt,Y=ie[3],Be+=Y*Re,Qe+=Y*Ct,Ze+=Y*Lt,xt+=Y*Dt,it+=Y*Pt,dt+=Y*Nt,gt+=Y*Ot,yt+=Y*jt,Et+=Y*Ft,vt+=Y*zt,_t+=Y*Ht,wt+=Y*qt,ct+=Y*Kt,pt+=Y*Wt,at+=Y*Gt,lt+=Y*Vt,Y=ie[4],Qe+=Y*Re,Ze+=Y*Ct,xt+=Y*Lt,it+=Y*Dt,dt+=Y*Pt,gt+=Y*Nt,yt+=Y*Ot,Et+=Y*jt,vt+=Y*Ft,_t+=Y*zt,wt+=Y*Ht,ct+=Y*qt,pt+=Y*Kt,at+=Y*Wt,lt+=Y*Gt,ht+=Y*Vt,Y=ie[5],Ze+=Y*Re,xt+=Y*Ct,it+=Y*Lt,dt+=Y*Dt,gt+=Y*Pt,yt+=Y*Nt,Et+=Y*Ot,vt+=Y*jt,_t+=Y*Ft,wt+=Y*zt,ct+=Y*Ht,pt+=Y*qt,at+=Y*Kt,lt+=Y*Wt,ht+=Y*Gt,ot+=Y*Vt,Y=ie[6],xt+=Y*Re,it+=Y*Ct,dt+=Y*Lt,gt+=Y*Dt,yt+=Y*Pt,Et+=Y*Nt,vt+=Y*Ot,_t+=Y*jt,wt+=Y*Ft,ct+=Y*zt,pt+=Y*Ht,at+=Y*qt,lt+=Y*Kt,ht+=Y*Wt,ot+=Y*Gt,je+=Y*Vt,Y=ie[7],it+=Y*Re,dt+=Y*Ct,gt+=Y*Lt,yt+=Y*Dt,Et+=Y*Pt,vt+=Y*Nt,_t+=Y*Ot,wt+=Y*jt,ct+=Y*Ft,pt+=Y*zt,at+=Y*Ht,lt+=Y*qt,ht+=Y*Kt,ot+=Y*Wt,je+=Y*Gt,We+=Y*Vt,Y=ie[8],dt+=Y*Re,gt+=Y*Ct,yt+=Y*Lt,Et+=Y*Dt,vt+=Y*Pt,_t+=Y*Nt,wt+=Y*Ot,ct+=Y*jt,pt+=Y*Ft,at+=Y*zt,lt+=Y*Ht,ht+=Y*qt,ot+=Y*Kt,je+=Y*Wt,We+=Y*Gt,nt+=Y*Vt,Y=ie[9],gt+=Y*Re,yt+=Y*Ct,Et+=Y*Lt,vt+=Y*Dt,_t+=Y*Pt,wt+=Y*Nt,ct+=Y*Ot,pt+=Y*jt,at+=Y*Ft,lt+=Y*zt,ht+=Y*Ht,ot+=Y*qt,je+=Y*Kt,We+=Y*Wt,nt+=Y*Gt,tt+=Y*Vt,Y=ie[10],yt+=Y*Re,Et+=Y*Ct,vt+=Y*Lt,_t+=Y*Dt,wt+=Y*Pt,ct+=Y*Nt,pt+=Y*Ot,at+=Y*jt,lt+=Y*Ft,ht+=Y*zt,ot+=Y*Ht,je+=Y*qt,We+=Y*Kt,nt+=Y*Wt,tt+=Y*Gt,rt+=Y*Vt,Y=ie[11],Et+=Y*Re,vt+=Y*Ct,_t+=Y*Lt,wt+=Y*Dt,ct+=Y*Pt,pt+=Y*Nt,at+=Y*Ot,lt+=Y*jt,ht+=Y*Ft,ot+=Y*zt,je+=Y*Ht,We+=Y*qt,nt+=Y*Kt,tt+=Y*Wt,rt+=Y*Gt,st+=Y*Vt,Y=ie[12],vt+=Y*Re,_t+=Y*Ct,wt+=Y*Lt,ct+=Y*Dt,pt+=Y*Pt,at+=Y*Nt,lt+=Y*Ot,ht+=Y*jt,ot+=Y*Ft,je+=Y*zt,We+=Y*Ht,nt+=Y*qt,tt+=Y*Kt,rt+=Y*Wt,st+=Y*Gt,Tt+=Y*Vt,Y=ie[13],_t+=Y*Re,wt+=Y*Ct,ct+=Y*Lt,pt+=Y*Dt,at+=Y*Pt,lt+=Y*Nt,ht+=Y*Ot,ot+=Y*jt,je+=Y*Ft,We+=Y*zt,nt+=Y*Ht,tt+=Y*qt,rt+=Y*Kt,st+=Y*Wt,Tt+=Y*Gt,It+=Y*Vt,Y=ie[14],wt+=Y*Re,ct+=Y*Ct,pt+=Y*Lt,at+=Y*Dt,lt+=Y*Pt,ht+=Y*Nt,ot+=Y*Ot,je+=Y*jt,We+=Y*Ft,nt+=Y*zt,tt+=Y*Ht,rt+=Y*qt,st+=Y*Kt,Tt+=Y*Wt,It+=Y*Gt,Bt+=Y*Vt,Y=ie[15],ct+=Y*Re,pt+=Y*Ct,at+=Y*Lt,lt+=Y*Dt,ht+=Y*Pt,ot+=Y*Nt,je+=Y*Ot,We+=Y*jt,nt+=Y*Ft,tt+=Y*zt,rt+=Y*Ht,st+=Y*qt,Tt+=Y*Kt,It+=Y*Wt,Bt+=Y*Gt,Rt+=Y*Vt,ve+=38*pt,Pe+=38*at,xe+=38*lt,Be+=38*ht,Qe+=38*ot,Ze+=38*je,xt+=38*We,it+=38*nt,dt+=38*tt,gt+=38*rt,yt+=38*st,Et+=38*Tt,vt+=38*It,_t+=38*Bt,wt+=38*Rt,fe=1,Y=ve+fe+65535,fe=Math.floor(Y/65536),ve=Y-fe*65536,Y=Pe+fe+65535,fe=Math.floor(Y/65536),Pe=Y-fe*65536,Y=xe+fe+65535,fe=Math.floor(Y/65536),xe=Y-fe*65536,Y=Be+fe+65535,fe=Math.floor(Y/65536),Be=Y-fe*65536,Y=Qe+fe+65535,fe=Math.floor(Y/65536),Qe=Y-fe*65536,Y=Ze+fe+65535,fe=Math.floor(Y/65536),Ze=Y-fe*65536,Y=xt+fe+65535,fe=Math.floor(Y/65536),xt=Y-fe*65536,Y=it+fe+65535,fe=Math.floor(Y/65536),it=Y-fe*65536,Y=dt+fe+65535,fe=Math.floor(Y/65536),dt=Y-fe*65536,Y=gt+fe+65535,fe=Math.floor(Y/65536),gt=Y-fe*65536,Y=yt+fe+65535,fe=Math.floor(Y/65536),yt=Y-fe*65536,Y=Et+fe+65535,fe=Math.floor(Y/65536),Et=Y-fe*65536,Y=vt+fe+65535,fe=Math.floor(Y/65536),vt=Y-fe*65536,Y=_t+fe+65535,fe=Math.floor(Y/65536),_t=Y-fe*65536,Y=wt+fe+65535,fe=Math.floor(Y/65536),wt=Y-fe*65536,Y=ct+fe+65535,fe=Math.floor(Y/65536),ct=Y-fe*65536,ve+=fe-1+37*(fe-1),fe=1,Y=ve+fe+65535,fe=Math.floor(Y/65536),ve=Y-fe*65536,Y=Pe+fe+65535,fe=Math.floor(Y/65536),Pe=Y-fe*65536,Y=xe+fe+65535,fe=Math.floor(Y/65536),xe=Y-fe*65536,Y=Be+fe+65535,fe=Math.floor(Y/65536),Be=Y-fe*65536,Y=Qe+fe+65535,fe=Math.floor(Y/65536),Qe=Y-fe*65536,Y=Ze+fe+65535,fe=Math.floor(Y/65536),Ze=Y-fe*65536,Y=xt+fe+65535,fe=Math.floor(Y/65536),xt=Y-fe*65536,Y=it+fe+65535,fe=Math.floor(Y/65536),it=Y-fe*65536,Y=dt+fe+65535,fe=Math.floor(Y/65536),dt=Y-fe*65536,Y=gt+fe+65535,fe=Math.floor(Y/65536),gt=Y-fe*65536,Y=yt+fe+65535,fe=Math.floor(Y/65536),yt=Y-fe*65536,Y=Et+fe+65535,fe=Math.floor(Y/65536),Et=Y-fe*65536,Y=vt+fe+65535,fe=Math.floor(Y/65536),vt=Y-fe*65536,Y=_t+fe+65535,fe=Math.floor(Y/65536),_t=Y-fe*65536,Y=wt+fe+65535,fe=Math.floor(Y/65536),wt=Y-fe*65536,Y=ct+fe+65535,fe=Math.floor(Y/65536),ct=Y-fe*65536,ve+=fe-1+37*(fe-1),ne[0]=ve,ne[1]=Pe,ne[2]=xe,ne[3]=Be,ne[4]=Qe,ne[5]=Ze,ne[6]=xt,ne[7]=it,ne[8]=dt,ne[9]=gt,ne[10]=yt,ne[11]=Et,ne[12]=vt,ne[13]=_t,ne[14]=wt,ne[15]=ct}function j(ne,ie){O(ne,ie,ie)}function D(ne,ie){var ae=n(),Y;for(Y=0;Y<16;Y++)ae[Y]=ie[Y];for(Y=253;Y>=0;Y--)j(ae,ae),Y!==2&&Y!==4&&O(ae,ae,ie);for(Y=0;Y<16;Y++)ne[Y]=ae[Y]}function Q(ne,ie){var ae=n(),Y;for(Y=0;Y<16;Y++)ae[Y]=ie[Y];for(Y=250;Y>=0;Y--)j(ae,ae),Y!==1&&O(ae,ae,ie);for(Y=0;Y<16;Y++)ne[Y]=ae[Y]}function oe(ne,ie,ae){var Y=new Uint8Array(32),fe=new Float64Array(80),ve,Pe,xe=n(),Be=n(),Qe=n(),Ze=n(),xt=n(),it=n();for(Pe=0;Pe<31;Pe++)Y[Pe]=ie[Pe];for(Y[31]=ie[31]&127|64,Y[0]&=248,I(fe,ae),Pe=0;Pe<16;Pe++)Be[Pe]=fe[Pe],Ze[Pe]=xe[Pe]=Qe[Pe]=0;for(xe[0]=Ze[0]=1,Pe=254;Pe>=0;--Pe)ve=Y[Pe>>>3]>>>(Pe&7)&1,k(xe,Be,ve),k(Qe,Ze,ve),C(xt,xe,Qe),V(xe,xe,Qe),C(Qe,Be,Ze),V(Be,Be,Ze),j(Ze,xt),j(it,xe),O(xe,Qe,xe),O(Qe,Be,xt),C(xt,xe,Qe),V(xe,xe,Qe),j(Be,xe),V(Qe,Ze,it),O(xe,Qe,v),C(xe,xe,Ze),O(Qe,Qe,xe),O(xe,Ze,it),O(Ze,Be,fe),j(Be,xt),k(xe,Be,ve),k(Qe,Ze,ve);for(Pe=0;Pe<16;Pe++)fe[Pe+16]=xe[Pe],fe[Pe+32]=Qe[Pe],fe[Pe+48]=Be[Pe],fe[Pe+64]=Ze[Pe];var dt=fe.subarray(32),gt=fe.subarray(16);return D(dt,dt),O(gt,gt,dt),_(ne,gt),0}function de(ne,ie){return oe(ne,ie,a)}function Z(ne,ie){return o(ie,32),de(ne,ie)}function H(ne,ie,ae){var Y=new Uint8Array(32);return oe(Y,ae,ie),ce(ne,c,Y,ue)}var ge=m,Me=y;function ke(ne,ie,ae,Y,fe,ve){var Pe=new Uint8Array(32);return H(Pe,fe,ve),ge(ne,ie,ae,Y,Pe)}function Ie(ne,ie,ae,Y,fe,ve){var Pe=new Uint8Array(32);return H(Pe,fe,ve),Me(ne,ie,ae,Y,Pe)}var et=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function Fe(ne,ie,ae,Y){for(var fe=new Int32Array(16),ve=new Int32Array(16),Pe,xe,Be,Qe,Ze,xt,it,dt,gt,yt,Et,vt,_t,wt,ct,pt,at,lt,ht,ot,je,We,nt,tt,rt,st,Tt=ne[0],It=ne[1],Bt=ne[2],Rt=ne[3],Re=ne[4],Ct=ne[5],Lt=ne[6],Dt=ne[7],Pt=ie[0],Nt=ie[1],Ot=ie[2],jt=ie[3],Ft=ie[4],zt=ie[5],Ht=ie[6],qt=ie[7],Kt=0;Y>=128;){for(ht=0;ht<16;ht++)ot=8*ht+Kt,fe[ht]=ae[ot+0]<<24|ae[ot+1]<<16|ae[ot+2]<<8|ae[ot+3],ve[ht]=ae[ot+4]<<24|ae[ot+5]<<16|ae[ot+6]<<8|ae[ot+7];for(ht=0;ht<80;ht++)if(Pe=Tt,xe=It,Be=Bt,Qe=Rt,Ze=Re,xt=Ct,it=Lt,dt=Dt,gt=Pt,yt=Nt,Et=Ot,vt=jt,_t=Ft,wt=zt,ct=Ht,pt=qt,je=Dt,We=qt,nt=We&65535,tt=We>>>16,rt=je&65535,st=je>>>16,je=(Re>>>14|Ft<<18)^(Re>>>18|Ft<<14)^(Ft>>>9|Re<<23),We=(Ft>>>14|Re<<18)^(Ft>>>18|Re<<14)^(Re>>>9|Ft<<23),nt+=We&65535,tt+=We>>>16,rt+=je&65535,st+=je>>>16,je=Re&Ct^~Re&Lt,We=Ft&zt^~Ft&Ht,nt+=We&65535,tt+=We>>>16,rt+=je&65535,st+=je>>>16,je=et[ht*2],We=et[ht*2+1],nt+=We&65535,tt+=We>>>16,rt+=je&65535,st+=je>>>16,je=fe[ht%16],We=ve[ht%16],nt+=We&65535,tt+=We>>>16,rt+=je&65535,st+=je>>>16,tt+=nt>>>16,rt+=tt>>>16,st+=rt>>>16,at=rt&65535|st<<16,lt=nt&65535|tt<<16,je=at,We=lt,nt=We&65535,tt=We>>>16,rt=je&65535,st=je>>>16,je=(Tt>>>28|Pt<<4)^(Pt>>>2|Tt<<30)^(Pt>>>7|Tt<<25),We=(Pt>>>28|Tt<<4)^(Tt>>>2|Pt<<30)^(Tt>>>7|Pt<<25),nt+=We&65535,tt+=We>>>16,rt+=je&65535,st+=je>>>16,je=Tt&It^Tt&Bt^It&Bt,We=Pt&Nt^Pt&Ot^Nt&Ot,nt+=We&65535,tt+=We>>>16,rt+=je&65535,st+=je>>>16,tt+=nt>>>16,rt+=tt>>>16,st+=rt>>>16,dt=rt&65535|st<<16,pt=nt&65535|tt<<16,je=Qe,We=vt,nt=We&65535,tt=We>>>16,rt=je&65535,st=je>>>16,je=at,We=lt,nt+=We&65535,tt+=We>>>16,rt+=je&65535,st+=je>>>16,tt+=nt>>>16,rt+=tt>>>16,st+=rt>>>16,Qe=rt&65535|st<<16,vt=nt&65535|tt<<16,It=Pe,Bt=xe,Rt=Be,Re=Qe,Ct=Ze,Lt=xt,Dt=it,Tt=dt,Nt=gt,Ot=yt,jt=Et,Ft=vt,zt=_t,Ht=wt,qt=ct,Pt=pt,ht%16===15)for(ot=0;ot<16;ot++)je=fe[ot],We=ve[ot],nt=We&65535,tt=We>>>16,rt=je&65535,st=je>>>16,je=fe[(ot+9)%16],We=ve[(ot+9)%16],nt+=We&65535,tt+=We>>>16,rt+=je&65535,st+=je>>>16,at=fe[(ot+1)%16],lt=ve[(ot+1)%16],je=(at>>>1|lt<<31)^(at>>>8|lt<<24)^at>>>7,We=(lt>>>1|at<<31)^(lt>>>8|at<<24)^(lt>>>7|at<<25),nt+=We&65535,tt+=We>>>16,rt+=je&65535,st+=je>>>16,at=fe[(ot+14)%16],lt=ve[(ot+14)%16],je=(at>>>19|lt<<13)^(lt>>>29|at<<3)^at>>>6,We=(lt>>>19|at<<13)^(at>>>29|lt<<3)^(lt>>>6|at<<26),nt+=We&65535,tt+=We>>>16,rt+=je&65535,st+=je>>>16,tt+=nt>>>16,rt+=tt>>>16,st+=rt>>>16,fe[ot]=rt&65535|st<<16,ve[ot]=nt&65535|tt<<16;je=Tt,We=Pt,nt=We&65535,tt=We>>>16,rt=je&65535,st=je>>>16,je=ne[0],We=ie[0],nt+=We&65535,tt+=We>>>16,rt+=je&65535,st+=je>>>16,tt+=nt>>>16,rt+=tt>>>16,st+=rt>>>16,ne[0]=Tt=rt&65535|st<<16,ie[0]=Pt=nt&65535|tt<<16,je=It,We=Nt,nt=We&65535,tt=We>>>16,rt=je&65535,st=je>>>16,je=ne[1],We=ie[1],nt+=We&65535,tt+=We>>>16,rt+=je&65535,st+=je>>>16,tt+=nt>>>16,rt+=tt>>>16,st+=rt>>>16,ne[1]=It=rt&65535|st<<16,ie[1]=Nt=nt&65535|tt<<16,je=Bt,We=Ot,nt=We&65535,tt=We>>>16,rt=je&65535,st=je>>>16,je=ne[2],We=ie[2],nt+=We&65535,tt+=We>>>16,rt+=je&65535,st+=je>>>16,tt+=nt>>>16,rt+=tt>>>16,st+=rt>>>16,ne[2]=Bt=rt&65535|st<<16,ie[2]=Ot=nt&65535|tt<<16,je=Rt,We=jt,nt=We&65535,tt=We>>>16,rt=je&65535,st=je>>>16,je=ne[3],We=ie[3],nt+=We&65535,tt+=We>>>16,rt+=je&65535,st+=je>>>16,tt+=nt>>>16,rt+=tt>>>16,st+=rt>>>16,ne[3]=Rt=rt&65535|st<<16,ie[3]=jt=nt&65535|tt<<16,je=Re,We=Ft,nt=We&65535,tt=We>>>16,rt=je&65535,st=je>>>16,je=ne[4],We=ie[4],nt+=We&65535,tt+=We>>>16,rt+=je&65535,st+=je>>>16,tt+=nt>>>16,rt+=tt>>>16,st+=rt>>>16,ne[4]=Re=rt&65535|st<<16,ie[4]=Ft=nt&65535|tt<<16,je=Ct,We=zt,nt=We&65535,tt=We>>>16,rt=je&65535,st=je>>>16,je=ne[5],We=ie[5],nt+=We&65535,tt+=We>>>16,rt+=je&65535,st+=je>>>16,tt+=nt>>>16,rt+=tt>>>16,st+=rt>>>16,ne[5]=Ct=rt&65535|st<<16,ie[5]=zt=nt&65535|tt<<16,je=Lt,We=Ht,nt=We&65535,tt=We>>>16,rt=je&65535,st=je>>>16,je=ne[6],We=ie[6],nt+=We&65535,tt+=We>>>16,rt+=je&65535,st+=je>>>16,tt+=nt>>>16,rt+=tt>>>16,st+=rt>>>16,ne[6]=Lt=rt&65535|st<<16,ie[6]=Ht=nt&65535|tt<<16,je=Dt,We=qt,nt=We&65535,tt=We>>>16,rt=je&65535,st=je>>>16,je=ne[7],We=ie[7],nt+=We&65535,tt+=We>>>16,rt+=je&65535,st+=je>>>16,tt+=nt>>>16,rt+=tt>>>16,st+=rt>>>16,ne[7]=Dt=rt&65535|st<<16,ie[7]=qt=nt&65535|tt<<16,Kt+=128,Y-=128}return Y}function $e(ne,ie,ae){var Y=new Int32Array(8),fe=new Int32Array(8),ve=new Uint8Array(256),Pe,xe=ae;for(Y[0]=1779033703,Y[1]=3144134277,Y[2]=1013904242,Y[3]=2773480762,Y[4]=1359893119,Y[5]=2600822924,Y[6]=528734635,Y[7]=1541459225,fe[0]=4089235720,fe[1]=2227873595,fe[2]=4271175723,fe[3]=1595750129,fe[4]=2917565137,fe[5]=725511199,fe[6]=4215389547,fe[7]=327033209,Fe(Y,fe,ie,ae),ae%=128,Pe=0;Pe<ae;Pe++)ve[Pe]=ie[xe-ae+Pe];for(ve[ae]=128,ae=256-128*(ae<112?1:0),ve[ae-9]=0,L(ve,ae-8,xe/536870912|0,xe<<3),Fe(Y,fe,ve,ae),Pe=0;Pe<8;Pe++)L(ne,8*Pe,Y[Pe],fe[Pe]);return 0}function $t(ne,ie){var ae=n(),Y=n(),fe=n(),ve=n(),Pe=n(),xe=n(),Be=n(),Qe=n(),Ze=n();V(ae,ne[1],ne[0]),V(Ze,ie[1],ie[0]),O(ae,ae,Ze),C(Y,ne[0],ne[1]),C(Ze,ie[0],ie[1]),O(Y,Y,Ze),O(fe,ne[3],ie[3]),O(fe,fe,S),O(ve,ne[2],ie[2]),C(ve,ve,ve),V(Pe,Y,ae),V(xe,ve,fe),C(Be,ve,fe),C(Qe,Y,ae),O(ne[0],Pe,xe),O(ne[1],Qe,Be),O(ne[2],Be,xe),O(ne[3],Pe,Qe)}function He(ne,ie,ae){var Y;for(Y=0;Y<4;Y++)k(ne[Y],ie[Y],ae)}function Ye(ne,ie){var ae=n(),Y=n(),fe=n();D(fe,ie[2]),O(ae,ie[0],fe),O(Y,ie[1],fe),_(ne,Y),ne[31]^=w(ae)<<7}function St(ne,ie,ae){var Y,fe;for(E(ne[0],l),E(ne[1],b),E(ne[2],b),E(ne[3],l),fe=255;fe>=0;--fe)Y=ae[fe/8|0]>>(fe&7)&1,He(ne,ie,Y),$t(ie,ne),$t(ne,ne),He(ne,ie,Y)}function De(ne,ie){var ae=[n(),n(),n(),n()];E(ae[0],M),E(ae[1],B),E(ae[2],b),O(ae[3],M,B),St(ne,ae,ie)}function qe(ne,ie,ae){var Y=new Uint8Array(64),fe=[n(),n(),n(),n()],ve;for(ae||o(ie,32),$e(Y,ie,32),Y[0]&=248,Y[31]&=127,Y[31]|=64,De(fe,Y),Ye(ne,fe),ve=0;ve<32;ve++)ie[ve+32]=ne[ve];return 0}var At=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function ze(ne,ie){var ae,Y,fe,ve;for(Y=63;Y>=32;--Y){for(ae=0,fe=Y-32,ve=Y-12;fe<ve;++fe)ie[fe]+=ae-16*ie[Y]*At[fe-(Y-32)],ae=Math.floor((ie[fe]+128)/256),ie[fe]-=ae*256;ie[fe]+=ae,ie[Y]=0}for(ae=0,fe=0;fe<32;fe++)ie[fe]+=ae-(ie[31]>>4)*At[fe],ae=ie[fe]>>8,ie[fe]&=255;for(fe=0;fe<32;fe++)ie[fe]-=ae*At[fe];for(Y=0;Y<32;Y++)ie[Y+1]+=ie[Y]>>8,ne[Y]=ie[Y]&255}function Ge(ne){var ie=new Float64Array(64),ae;for(ae=0;ae<64;ae++)ie[ae]=ne[ae];for(ae=0;ae<64;ae++)ne[ae]=0;ze(ne,ie)}function kt(ne,ie,ae,Y){var fe=new Uint8Array(64),ve=new Uint8Array(64),Pe=new Uint8Array(64),xe,Be,Qe=new Float64Array(64),Ze=[n(),n(),n(),n()];$e(fe,Y,32),fe[0]&=248,fe[31]&=127,fe[31]|=64;var xt=ae+64;for(xe=0;xe<ae;xe++)ne[64+xe]=ie[xe];for(xe=0;xe<32;xe++)ne[32+xe]=fe[32+xe];for($e(Pe,ne.subarray(32),ae+32),Ge(Pe),De(Ze,Pe),Ye(ne,Ze),xe=32;xe<64;xe++)ne[xe]=Y[xe];for($e(ve,ne,ae+64),Ge(ve),xe=0;xe<64;xe++)Qe[xe]=0;for(xe=0;xe<32;xe++)Qe[xe]=Pe[xe];for(xe=0;xe<32;xe++)for(Be=0;Be<32;Be++)Qe[xe+Be]+=ve[xe]*fe[Be];return ze(ne.subarray(32),Qe),xt}function se(ne,ie){var ae=n(),Y=n(),fe=n(),ve=n(),Pe=n(),xe=n(),Be=n();return E(ne[2],b),I(ne[1],ie),j(fe,ne[1]),O(ve,fe,A),V(fe,fe,ne[2]),C(ve,ne[2],ve),j(Pe,ve),j(xe,Pe),O(Be,xe,Pe),O(ae,Be,fe),O(ae,ae,ve),Q(ae,ae),O(ae,ae,fe),O(ae,ae,ve),O(ae,ae,ve),O(ne[0],ae,ve),j(Y,ne[0]),O(Y,Y,ve),d(Y,fe)&&O(ne[0],ne[0],P),j(Y,ne[0]),O(Y,Y,ve),d(Y,fe)?-1:(w(ne[0])===ie[31]>>7&&V(ne[0],l,ne[0]),O(ne[3],ne[0],ne[1]),0)}function J(ne,ie,ae,Y){var fe,ve=new Uint8Array(32),Pe=new Uint8Array(64),xe=[n(),n(),n(),n()],Be=[n(),n(),n(),n()];if(ae<64||se(Be,Y))return-1;for(fe=0;fe<ae;fe++)ne[fe]=ie[fe];for(fe=0;fe<32;fe++)ne[fe+32]=Y[fe];if($e(Pe,ne,ae),Ge(Pe),St(xe,Be,Pe),De(Be,ie.subarray(32)),$t(xe,Be),Ye(ve,xe),ae-=64,q(ie,0,ve,0)){for(fe=0;fe<ae;fe++)ne[fe]=0;return-1}for(fe=0;fe<ae;fe++)ne[fe]=ie[fe+64];return ae}var re=32,he=24,ye=32,Oe=16,Ee=32,Ue=32,bt=32,Le=32,Ve=32,mt=he,Ke=ye,Xe=Oe,Mt=64,me=32,le=64,_e=32,be=64;e.lowlevel={crypto_core_hsalsa20:ce,crypto_stream_xor:Ce,crypto_stream:pe,crypto_stream_salsa20_xor:Ae,crypto_stream_salsa20:we,crypto_onetimeauth:u,crypto_onetimeauth_verify:p,crypto_verify_16:U,crypto_verify_32:q,crypto_secretbox:m,crypto_secretbox_open:y,crypto_scalarmult:oe,crypto_scalarmult_base:de,crypto_box_beforenm:H,crypto_box_afternm:ge,crypto_box:ke,crypto_box_open:Ie,crypto_box_keypair:Z,crypto_hash:$e,crypto_sign:kt,crypto_sign_keypair:qe,crypto_sign_open:J,crypto_secretbox_KEYBYTES:re,crypto_secretbox_NONCEBYTES:he,crypto_secretbox_ZEROBYTES:ye,crypto_secretbox_BOXZEROBYTES:Oe,crypto_scalarmult_BYTES:Ee,crypto_scalarmult_SCALARBYTES:Ue,crypto_box_PUBLICKEYBYTES:bt,crypto_box_SECRETKEYBYTES:Le,crypto_box_BEFORENMBYTES:Ve,crypto_box_NONCEBYTES:mt,crypto_box_ZEROBYTES:Ke,crypto_box_BOXZEROBYTES:Xe,crypto_sign_BYTES:Mt,crypto_sign_PUBLICKEYBYTES:me,crypto_sign_SECRETKEYBYTES:le,crypto_sign_SEEDBYTES:_e,crypto_hash_BYTES:be,gf:n,D:A,L:At,pack25519:_,unpack25519:I,M:O,A:C,S:j,Z:V,pow2523:Q,add:$t,set25519:E,modL:ze,scalarmult:St,scalarbase:De};function Se(ne,ie){if(ne.length!==re)throw new Error("bad key size");if(ie.length!==he)throw new Error("bad nonce size")}function Je(ne,ie){if(ne.length!==bt)throw new Error("bad public key size");if(ie.length!==Le)throw new Error("bad secret key size")}function Te(){for(var ne=0;ne<arguments.length;ne++)if(!(arguments[ne]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function Ne(ne){for(var ie=0;ie<ne.length;ie++)ne[ie]=0}e.randomBytes=function(ne){var ie=new Uint8Array(ne);return o(ie,ne),ie},e.secretbox=function(ne,ie,ae){Te(ne,ie,ae),Se(ae,ie);for(var Y=new Uint8Array(ye+ne.length),fe=new Uint8Array(Y.length),ve=0;ve<ne.length;ve++)Y[ve+ye]=ne[ve];return m(fe,Y,Y.length,ie,ae),fe.subarray(Oe)},e.secretbox.open=function(ne,ie,ae){Te(ne,ie,ae),Se(ae,ie);for(var Y=new Uint8Array(Oe+ne.length),fe=new Uint8Array(Y.length),ve=0;ve<ne.length;ve++)Y[ve+Oe]=ne[ve];return Y.length<32||y(fe,Y,Y.length,ie,ae)!==0?null:fe.subarray(ye)},e.secretbox.keyLength=re,e.secretbox.nonceLength=he,e.secretbox.overheadLength=Oe,e.scalarMult=function(ne,ie){if(Te(ne,ie),ne.length!==Ue)throw new Error("bad n size");if(ie.length!==Ee)throw new Error("bad p size");var ae=new Uint8Array(Ee);return oe(ae,ne,ie),ae},e.scalarMult.base=function(ne){if(Te(ne),ne.length!==Ue)throw new Error("bad n size");var ie=new Uint8Array(Ee);return de(ie,ne),ie},e.scalarMult.scalarLength=Ue,e.scalarMult.groupElementLength=Ee,e.box=function(ne,ie,ae,Y){var fe=e.box.before(ae,Y);return e.secretbox(ne,ie,fe)},e.box.before=function(ne,ie){Te(ne,ie),Je(ne,ie);var ae=new Uint8Array(Ve);return H(ae,ne,ie),ae},e.box.after=e.secretbox,e.box.open=function(ne,ie,ae,Y){var fe=e.box.before(ae,Y);return e.secretbox.open(ne,ie,fe)},e.box.open.after=e.secretbox.open,e.box.keyPair=function(){var ne=new Uint8Array(bt),ie=new Uint8Array(Le);return Z(ne,ie),{publicKey:ne,secretKey:ie}},e.box.keyPair.fromSecretKey=function(ne){if(Te(ne),ne.length!==Le)throw new Error("bad secret key size");var ie=new Uint8Array(bt);return de(ie,ne),{publicKey:ie,secretKey:new Uint8Array(ne)}},e.box.publicKeyLength=bt,e.box.secretKeyLength=Le,e.box.sharedKeyLength=Ve,e.box.nonceLength=mt,e.box.overheadLength=e.secretbox.overheadLength,e.sign=function(ne,ie){if(Te(ne,ie),ie.length!==le)throw new Error("bad secret key size");var ae=new Uint8Array(Mt+ne.length);return kt(ae,ne,ne.length,ie),ae},e.sign.open=function(ne,ie){if(Te(ne,ie),ie.length!==me)throw new Error("bad public key size");var ae=new Uint8Array(ne.length),Y=J(ae,ne,ne.length,ie);if(Y<0)return null;for(var fe=new Uint8Array(Y),ve=0;ve<fe.length;ve++)fe[ve]=ae[ve];return fe},e.sign.detached=function(ne,ie){for(var ae=e.sign(ne,ie),Y=new Uint8Array(Mt),fe=0;fe<Y.length;fe++)Y[fe]=ae[fe];return Y},e.sign.detached.verify=function(ne,ie,ae){if(Te(ne,ie,ae),ie.length!==Mt)throw new Error("bad signature size");if(ae.length!==me)throw new Error("bad public key size");var Y=new Uint8Array(Mt+ne.length),fe=new Uint8Array(Mt+ne.length),ve;for(ve=0;ve<Mt;ve++)Y[ve]=ie[ve];for(ve=0;ve<ne.length;ve++)Y[ve+Mt]=ne[ve];return J(fe,Y,Y.length,ae)>=0},e.sign.keyPair=function(){var ne=new Uint8Array(me),ie=new Uint8Array(le);return qe(ne,ie),{publicKey:ne,secretKey:ie}},e.sign.keyPair.fromSecretKey=function(ne){if(Te(ne),ne.length!==le)throw new Error("bad secret key size");for(var ie=new Uint8Array(me),ae=0;ae<ie.length;ae++)ie[ae]=ne[32+ae];return{publicKey:ie,secretKey:new Uint8Array(ne)}},e.sign.keyPair.fromSeed=function(ne){if(Te(ne),ne.length!==_e)throw new Error("bad seed size");for(var ie=new Uint8Array(me),ae=new Uint8Array(le),Y=0;Y<32;Y++)ae[Y]=ne[Y];return qe(ie,ae,!0),{publicKey:ie,secretKey:ae}},e.sign.publicKeyLength=me,e.sign.secretKeyLength=le,e.sign.seedLength=_e,e.sign.signatureLength=Mt,e.hash=function(ne){Te(ne);var ie=new Uint8Array(be);return $e(ie,ne,ne.length),ie},e.hash.hashLength=be,e.verify=function(ne,ie){return Te(ne,ie),ne.length===0||ie.length===0||ne.length!==ie.length?!1:F(ne,0,ie,0,ne.length)===0},e.setPRNG=function(ne){o=ne},function(){var ne=typeof self<"u"?self.crypto||self.msCrypto:null;if(ne&&ne.getRandomValues){var ie=65536;e.setPRNG(function(ae,Y){var fe,ve=new Uint8Array(Y);for(fe=0;fe<Y;fe+=ie)ne.getRandomValues(ve.subarray(fe,fe+Math.min(Y-fe,ie)));for(fe=0;fe<Y;fe++)ae[fe]=ve[fe];Ne(ve)})}else typeof commonjsRequire<"u"&&(ne=requireCryptoBrowserify(),ne&&ne.randomBytes&&e.setPRNG(function(ae,Y){var fe,ve=ne.randomBytes(Y);for(fe=0;fe<Y;fe++)ae[fe]=ve[fe];Ne(ve)}))}()})(t.exports?t.exports:self.nacl=self.nacl||{})})(naclFast);var naclFastExports=naclFast.exports,utils={};Object.defineProperty(utils,"__esModule",{value:!0});utils.replaceDerive=utils.pathRegex=void 0;utils.pathRegex=new RegExp("^m(\\/[0-9]+')+$");utils.replaceDerive=t=>t.replace("'","");(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.derivePath=t.isValidPath=t.getPublicKey=t.CKDPriv=t.getMasterKeyFromSeed=void 0;const e=browser$b,n=naclFastExports,o=utils,c="ed25519 seed",a=2147483648;t.getMasterKeyFromSeed=l=>{const v=e("sha512",c).update(Buffer$1$1.from(l,"hex")).digest(),A=v.slice(0,32),S=v.slice(32);return{key:A,chainCode:S}},t.CKDPriv=({key:l,chainCode:b},v)=>{const A=Buffer$1$1.allocUnsafe(4);A.writeUInt32BE(v,0);const S=Buffer$1$1.concat([Buffer$1$1.alloc(1,0),l,A]),M=e("sha512",b).update(S).digest(),B=M.slice(0,32),P=M.slice(32);return{key:B,chainCode:P}},t.getPublicKey=(l,b=!0)=>{const A=n.sign.keyPair.fromSeed(l).secretKey.subarray(32),S=Buffer$1$1.alloc(1,0);return b?Buffer$1$1.concat([S,Buffer$1$1.from(A)]):Buffer$1$1.from(A)},t.isValidPath=l=>o.pathRegex.test(l)?!l.split("/").slice(1).map(o.replaceDerive).some(isNaN):!1,t.derivePath=(l,b,v=a)=>{if(!t.isValidPath(l))throw new Error("Invalid derivation path");const{key:A,chainCode:S}=t.getMasterKeyFromSeed(b);return l.split("/").slice(1).map(o.replaceDerive).map(B=>parseInt(B,10)).reduce((B,P)=>t.CKDPriv(B,P+v),{key:A,chainCode:S})}})(dist);const generateDID=t=>`did:ethr:${t}`;class SolanaWallet extends Web3Wallet{_rpcUrl="";chainId=NETWORK.solana;constructor(e,n="m/44'/501'/0'/0'"){if(super(),!e)throw new Error("Mnemonic is required to generate wallet");const o=mnemonicToSeedSync_1(e),c=n,a=dist.derivePath(c,o).key,{publicKey:l,secretKey:b}=Keypair.fromSeed(a),v=bs58$3.encode(b);if(!v||!l)throw new Error("Failed to generate key pair");const A=l.toBase58();if(!A)throw new Error("Failed to generate wallet");this.address=A,this.publicKey=l.toString(),this._privateKey=v}async sendTransaction(e){if(!this._privateKey)throw new Error("Private key is required to send transaction");const n=this._getConnection(this._rpcUrl),o=new PublicKey(e.recipientAddress);let c,a;this._privateKey.split(",").length>1?c=new Uint8Array(this._privateKey.split(",")):c=bs58$3.decode(this._privateKey);const l=Keypair.fromSecretKey(c,{skipValidation:!0});if(e.tokenAddress){const v=await getMint(n,new PublicKey(e.tokenAddress)),A=await getOrCreateAssociatedTokenAccount(n,l,v.address,l.publicKey),S=await getOrCreateAssociatedTokenAccount(n,l,v.address,o);a=await transfer(n,l,A.address,S.address,l.publicKey,LAMPORTS_PER_SOL*e.amount)}else{const v=new Transaction().add(SystemProgram.transfer({fromPubkey:l.publicKey,toPubkey:o,lamports:LAMPORTS_PER_SOL*e.amount}));a=await sendAndConfirmTransaction(n,v,[l])}const b=await n.getTransaction(a);if(!b)throw new Error("Transaction not found");return{...b}}signTransaction(e){throw new Error("Method not implemented.")}async signMessage(e){throw new Error("Method not implemented.")}verifySignature(e,n){throw this.address?new Error("Method not implemented."):new Error("Address is required to verify signature")}async switchNetwork(e){throw new Error("Method not implemented.")}async getSigner(){return this._getConnection(this._rpcUrl)}_getConnection=e=>this._provider(e);_provider(e){return new Connection$1(e)}}const generateWalletFromMnemonic=async t=>{const{mnemonic:e=generateMnemonic_1(),derivationPath:n}=t;if(n&&n?.split("/")[1]!=="44'")throw new Error("Invalid derivation path ");return new SolanaWallet(e,n)},solanaWallet=Object.freeze({connectWithExternalWallet:async()=>{throw new Error("Method not implemented.")},generateWalletFromMnemonic,generateDID}),initWallet=async(t,e,n)=>{if(!e&&t&&!t.isAnonymous){const b=await storageService.getItem(KEYS.STORAGE_SECRET_KEY);b&&(e=await Crypto.decrypt(storageService.getUniqueID(),b))}if(!e&&t&&t.isAnonymous===!0)return await evmWallet.connectWithExternalWallet({chainId:n});if(!e)throw new Error("Secret is required to decrypt the private key and initialize the wallet.");const o=await storageService.getItem(KEYS.STORAGE_PRIVATEKEY_KEY),c=o?await Crypto.decrypt(e,o):generateMnemonic_1();let a;const l=CHAIN_AVAILABLES.find(b=>b.id===n);switch(!0){case l?.type==="evm":{a=await evmWallet.generateWalletFromMnemonic({mnemonic:c,chainId:n});break}case l?.type==="bitcoin":{a=await btcWallet.generateWalletFromMnemonic({mnemonic:c});break}case l?.type==="solana":{a=await solanaWallet.generateWalletFromMnemonic({mnemonic:c});break}default:throw new Error("Unsupported chain type")}if(!e)throw await FirebaseAuthProvider.signOut(),new Error("Secret is required to encrypt the mnemonic.");if(!a.publicKey)throw new Error("Failed to generate wallet from mnemonic");if(c){const b=await Crypto.encrypt(e,c);await storageService.setItem(KEYS.STORAGE_PRIVATEKEY_KEY,b)}return a};var define_process_env_default={};const name$1="@firebase/database",version$1="1.0.4";let SDK_VERSION="";function setSDKVersion(t){SDK_VERSION=t}class DOMStorageWrapper{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),stringify$2(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:jsonEval(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class MemoryStorage{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return contains(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const createStoragefor=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new DOMStorageWrapper(e)}}catch{}return new MemoryStorage},PersistentStorage=createStoragefor("localStorage"),SessionStorage=createStoragefor("sessionStorage");const logClient=new Logger$2("@firebase/database"),LUIDGenerator=function(){let t=1;return function(){return t++}}(),sha1=function(t){const e=stringToByteArray(t),n=new Sha1$1;n.update(e);const o=n.digest();return base64.encodeByteArray(o)},buildLogMessage_=function(...t){let e="";for(let n=0;n<t.length;n++){const o=t[n];Array.isArray(o)||o&&typeof o=="object"&&typeof o.length=="number"?e+=buildLogMessage_.apply(null,o):typeof o=="object"?e+=stringify$2(o):e+=o,e+=" "}return e};let logger=null,firstLog_=!0;const enableLogging$1=function(t,e){assert$p(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(logClient.logLevel=LogLevel$1.VERBOSE,logger=logClient.log.bind(logClient),e&&SessionStorage.set("logging_enabled",!0)):typeof t=="function"?logger=t:(logger=null,SessionStorage.remove("logging_enabled"))},log=function(...t){if(firstLog_===!0&&(firstLog_=!1,logger===null&&SessionStorage.get("logging_enabled")===!0&&enableLogging$1(!0)),logger){const e=buildLogMessage_.apply(null,t);logger(e)}},logWrapper=function(t){return function(...e){log(t,...e)}},error=function(...t){const e="FIREBASE INTERNAL ERROR: "+buildLogMessage_(...t);logClient.error(e)},fatal=function(...t){const e=`FIREBASE FATAL ERROR: ${buildLogMessage_(...t)}`;throw logClient.error(e),new Error(e)},warn=function(...t){const e="FIREBASE WARNING: "+buildLogMessage_(...t);logClient.warn(e)},warnIfPageIsSecure=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&warn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},isInvalidJSONNumber=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},executeWhenDOMReady=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},MIN_NAME="[MIN_NAME]",MAX_NAME="[MAX_NAME]",nameCompare=function(t,e){if(t===e)return 0;if(t===MIN_NAME||e===MAX_NAME)return-1;if(e===MIN_NAME||t===MAX_NAME)return 1;{const n=tryParseInt(t),o=tryParseInt(e);return n!==null?o!==null?n-o===0?t.length-e.length:n-o:-1:o!==null?1:t<e?-1:1}},stringCompare=function(t,e){return t===e?0:t<e?-1:1},requireKey=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+stringify$2(e))},ObjectToUniqueKey=function(t){if(typeof t!="object"||t===null)return stringify$2(t);const e=[];for(const o in t)e.push(o);e.sort();let n="{";for(let o=0;o<e.length;o++)o!==0&&(n+=","),n+=stringify$2(e[o]),n+=":",n+=ObjectToUniqueKey(t[e[o]]);return n+="}",n},splitStringBySize=function(t,e){const n=t.length;if(n<=e)return[t];const o=[];for(let c=0;c<n;c+=e)c+e>n?o.push(t.substring(c,n)):o.push(t.substring(c,c+e));return o};function each(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const doubleToIEEE754String=function(t){assert$p(!isInvalidJSONNumber(t),"Invalid JSON number");const e=11,n=52,o=(1<<e-1)-1;let c,a,l,b,v;t===0?(a=0,l=0,c=1/t===-1/0?1:0):(c=t<0,t=Math.abs(t),t>=Math.pow(2,1-o)?(b=Math.min(Math.floor(Math.log(t)/Math.LN2),o),a=b+o,l=Math.round(t*Math.pow(2,n-b)-Math.pow(2,n))):(a=0,l=Math.round(t/Math.pow(2,1-o-n))));const A=[];for(v=n;v;v-=1)A.push(l%2?1:0),l=Math.floor(l/2);for(v=e;v;v-=1)A.push(a%2?1:0),a=Math.floor(a/2);A.push(c?1:0),A.reverse();const S=A.join("");let M="";for(v=0;v<64;v+=8){let B=parseInt(S.substr(v,8),2).toString(16);B.length===1&&(B="0"+B),M=M+B}return M.toLowerCase()},isChromeExtensionContentScript=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},isWindowsStoreApp=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},INTEGER_REGEXP_=new RegExp("^-?(0*)\\d{1,10}$"),INTEGER_32_MIN=-2147483648,INTEGER_32_MAX=2147483647,tryParseInt=function(t){if(INTEGER_REGEXP_.test(t)){const e=Number(t);if(e>=INTEGER_32_MIN&&e<=INTEGER_32_MAX)return e}return null},exceptionGuard=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw warn("Exception was thrown by user callback.",n),e},Math.floor(0))}},beingCrawled=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},setTimeoutNonBlocking=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};class AppCheckTokenProvider{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(o=>this.appCheck=o)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,o)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,o):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(o=>o.addTokenListener(e))}notifyForInvalidToken(){warn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class FirebaseAuthTokenProvider{constructor(e,n,o){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=o,this.auth_=null,this.auth_=o.getImmediate({optional:!0}),this.auth_||o.onInit(c=>this.auth_=c)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(log("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,o)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,o):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',warn(e)}}class EmulatorTokenProvider{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}EmulatorTokenProvider.OWNER="owner";const PROTOCOL_VERSION="5",VERSION_PARAM="v",TRANSPORT_SESSION_PARAM="s",REFERER_PARAM="r",FORGE_REF="f",FORGE_DOMAIN_RE=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,LAST_SESSION_PARAM="ls",APPLICATION_ID_PARAM="p",APP_CHECK_TOKEN_PARAM="ac",WEBSOCKET="websocket",LONG_POLLING="long_polling";class RepoInfo{constructor(e,n,o,c,a=!1,l="",b=!1,v=!1){this.secure=n,this.namespace=o,this.webSocketOnly=c,this.nodeAdmin=a,this.persistenceKey=l,this.includeNamespaceInQueryParams=b,this.isUsingEmulator=v,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=PersistentStorage.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&PersistentStorage.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function repoInfoNeedsQueryParam(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function repoInfoConnectionURL(t,e,n){assert$p(typeof e=="string","typeof type must == string"),assert$p(typeof n=="object","typeof params must == object");let o;if(e===WEBSOCKET)o=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===LONG_POLLING)o=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);repoInfoNeedsQueryParam(t)&&(n.ns=t.namespace);const c=[];return each(n,(a,l)=>{c.push(a+"="+l)}),o+c.join("&")}class StatsCollection{constructor(){this.counters_={}}incrementCounter(e,n=1){contains(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return deepCopy$1(this.counters_)}}const collections={},reporters={};function statsManagerGetCollection(t){const e=t.toString();return collections[e]||(collections[e]=new StatsCollection),collections[e]}function statsManagerGetOrCreateReporter(t,e){const n=t.toString();return reporters[n]||(reporters[n]=e()),reporters[n]}class PacketReceiver{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const o=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let c=0;c<o.length;++c)o[c]&&exceptionGuard(()=>{this.onMessage_(o[c])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const FIREBASE_LONGPOLL_START_PARAM="start",FIREBASE_LONGPOLL_CLOSE_COMMAND="close",FIREBASE_LONGPOLL_COMMAND_CB_NAME="pLPCommand",FIREBASE_LONGPOLL_DATA_CB_NAME="pRTLPCB",FIREBASE_LONGPOLL_ID_PARAM="id",FIREBASE_LONGPOLL_PW_PARAM="pw",FIREBASE_LONGPOLL_SERIAL_PARAM="ser",FIREBASE_LONGPOLL_CALLBACK_ID_PARAM="cb",FIREBASE_LONGPOLL_SEGMENT_NUM_PARAM="seg",FIREBASE_LONGPOLL_SEGMENTS_IN_PACKET="ts",FIREBASE_LONGPOLL_DATA_PARAM="d",FIREBASE_LONGPOLL_DISCONN_FRAME_REQUEST_PARAM="dframe",MAX_URL_DATA_SIZE=1870,SEG_HEADER_SIZE=30,MAX_PAYLOAD_SIZE=MAX_URL_DATA_SIZE-SEG_HEADER_SIZE,KEEPALIVE_REQUEST_INTERVAL=25e3,LP_CONNECT_TIMEOUT=3e4;class BrowserPollConnection{constructor(e,n,o,c,a,l,b){this.connId=e,this.repoInfo=n,this.applicationId=o,this.appCheckToken=c,this.authToken=a,this.transportSessionId=l,this.lastSessionId=b,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=logWrapper(e),this.stats_=statsManagerGetCollection(n),this.urlFn=v=>(this.appCheckToken&&(v[APP_CHECK_TOKEN_PARAM]=this.appCheckToken),repoInfoConnectionURL(n,LONG_POLLING,v))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new PacketReceiver(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(LP_CONNECT_TIMEOUT)),executeWhenDOMReady(()=>{if(this.isClosed_)return;this.scriptTagHolder=new FirebaseIFrameScriptHolder((...a)=>{const[l,b,v,A,S]=a;if(this.incrementIncomingBytes_(a),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,l===FIREBASE_LONGPOLL_START_PARAM)this.id=b,this.password=v;else if(l===FIREBASE_LONGPOLL_CLOSE_COMMAND)b?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(b,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+l)},(...a)=>{const[l,b]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(l,b)},()=>{this.onClosed_()},this.urlFn);const o={};o[FIREBASE_LONGPOLL_START_PARAM]="t",o[FIREBASE_LONGPOLL_SERIAL_PARAM]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(o[FIREBASE_LONGPOLL_CALLBACK_ID_PARAM]=this.scriptTagHolder.uniqueCallbackIdentifier),o[VERSION_PARAM]=PROTOCOL_VERSION,this.transportSessionId&&(o[TRANSPORT_SESSION_PARAM]=this.transportSessionId),this.lastSessionId&&(o[LAST_SESSION_PARAM]=this.lastSessionId),this.applicationId&&(o[APPLICATION_ID_PARAM]=this.applicationId),this.appCheckToken&&(o[APP_CHECK_TOKEN_PARAM]=this.appCheckToken),typeof location<"u"&&location.hostname&&FORGE_DOMAIN_RE.test(location.hostname)&&(o[REFERER_PARAM]=FORGE_REF);const c=this.urlFn(o);this.log_("Connecting via long-poll to "+c),this.scriptTagHolder.addTag(c,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){BrowserPollConnection.forceAllow_=!0}static forceDisallow(){BrowserPollConnection.forceDisallow_=!0}static isAvailable(){return BrowserPollConnection.forceAllow_?!0:!BrowserPollConnection.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!isChromeExtensionContentScript()&&!isWindowsStoreApp()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=stringify$2(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const o=base64Encode(n),c=splitStringBySize(o,MAX_PAYLOAD_SIZE);for(let a=0;a<c.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,c.length,c[a]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const o={};o[FIREBASE_LONGPOLL_DISCONN_FRAME_REQUEST_PARAM]="t",o[FIREBASE_LONGPOLL_ID_PARAM]=e,o[FIREBASE_LONGPOLL_PW_PARAM]=n,this.myDisconnFrame.src=this.urlFn(o),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=stringify$2(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class FirebaseIFrameScriptHolder{constructor(e,n,o,c){this.onDisconnect=o,this.urlFn=c,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=LUIDGenerator(),window[FIREBASE_LONGPOLL_COMMAND_CB_NAME+this.uniqueCallbackIdentifier]=e,window[FIREBASE_LONGPOLL_DATA_CB_NAME+this.uniqueCallbackIdentifier]=n,this.myIFrame=FirebaseIFrameScriptHolder.createIFrame_();let a="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(a='<script>document.domain="'+document.domain+'";</script>');const l="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(b){log("frame writing exception"),b.stack&&log(b.stack),log(b)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||log("No IE domain setting required")}catch{const o=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+o+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[FIREBASE_LONGPOLL_ID_PARAM]=this.myID,e[FIREBASE_LONGPOLL_PW_PARAM]=this.myPW,e[FIREBASE_LONGPOLL_SERIAL_PARAM]=this.currentSerial;let n=this.urlFn(e),o="",c=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+SEG_HEADER_SIZE+o.length<=MAX_URL_DATA_SIZE;){const l=this.pendingSegs.shift();o=o+"&"+FIREBASE_LONGPOLL_SEGMENT_NUM_PARAM+c+"="+l.seg+"&"+FIREBASE_LONGPOLL_SEGMENTS_IN_PACKET+c+"="+l.ts+"&"+FIREBASE_LONGPOLL_DATA_PARAM+c+"="+l.d,c++}return n=n+o,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,o){this.pendingSegs.push({seg:e,ts:n,d:o}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const o=()=>{this.outstandingRequests.delete(n),this.newRequest_()},c=setTimeout(o,Math.floor(KEEPALIVE_REQUEST_INTERVAL)),a=()=>{clearTimeout(c),o()};this.addTag(e,a)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const o=this.myIFrame.doc.createElement("script");o.type="text/javascript",o.async=!0,o.src=e,o.onload=o.onreadystatechange=function(){const c=o.readyState;(!c||c==="loaded"||c==="complete")&&(o.onload=o.onreadystatechange=null,o.parentNode&&o.parentNode.removeChild(o),n())},o.onerror=()=>{log("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(o)}catch{}},Math.floor(1))}}const WEBSOCKET_MAX_FRAME_SIZE=16384,WEBSOCKET_KEEPALIVE_INTERVAL=45e3;let WebSocketImpl=null;typeof MozWebSocket<"u"?WebSocketImpl=MozWebSocket:typeof WebSocket<"u"&&(WebSocketImpl=WebSocket);class WebSocketConnection{constructor(e,n,o,c,a,l,b){this.connId=e,this.applicationId=o,this.appCheckToken=c,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=logWrapper(this.connId),this.stats_=statsManagerGetCollection(n),this.connURL=WebSocketConnection.connectionURL_(n,l,b,c,o),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,o,c,a){const l={};return l[VERSION_PARAM]=PROTOCOL_VERSION,typeof location<"u"&&location.hostname&&FORGE_DOMAIN_RE.test(location.hostname)&&(l[REFERER_PARAM]=FORGE_REF),n&&(l[TRANSPORT_SESSION_PARAM]=n),o&&(l[LAST_SESSION_PARAM]=o),c&&(l[APP_CHECK_TOKEN_PARAM]=c),a&&(l[APPLICATION_ID_PARAM]=a),repoInfoConnectionURL(e,WEBSOCKET,l)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,PersistentStorage.set("previous_websocket_failure",!0);try{let o;isNodeSdk(),this.mySock=new WebSocketImpl(this.connURL,[],o)}catch(o){this.log_("Error instantiating WebSocket.");const c=o.message||o.data;c&&this.log_(c),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=o=>{this.handleIncomingFrame(o)},this.mySock.onerror=o=>{this.log_("WebSocket error.  Closing connection.");const c=o.message||o.data;c&&this.log_(c),this.onClosed_()}}start(){}static forceDisallow(){WebSocketConnection.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,o=navigator.userAgent.match(n);o&&o.length>1&&parseFloat(o[1])<4.4&&(e=!0)}return!e&&WebSocketImpl!==null&&!WebSocketConnection.forceDisallow_}static previouslyFailed(){return PersistentStorage.isInMemoryStorage||PersistentStorage.get("previous_websocket_failure")===!0}markConnectionHealthy(){PersistentStorage.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const o=jsonEval(n);this.onMessage(o)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(assert$p(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const o=this.extractFrameCount_(n);o!==null&&this.appendFrame_(o)}}send(e){this.resetKeepAlive();const n=stringify$2(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const o=splitStringBySize(n,WEBSOCKET_MAX_FRAME_SIZE);o.length>1&&this.sendString_(String(o.length));for(let c=0;c<o.length;c++)this.sendString_(o[c])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(WEBSOCKET_KEEPALIVE_INTERVAL))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}WebSocketConnection.responsesRequiredToBeHealthy=2;WebSocketConnection.healthyTimeout=3e4;class TransportManager{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[BrowserPollConnection,WebSocketConnection]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=WebSocketConnection&&WebSocketConnection.isAvailable();let o=n&&!WebSocketConnection.previouslyFailed();if(e.webSocketOnly&&(n||warn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[WebSocketConnection];else{const c=this.transports_=[];for(const a of TransportManager.ALL_TRANSPORTS)a&&a.isAvailable()&&c.push(a);TransportManager.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}TransportManager.globalTransportInitialized_=!1;const UPGRADE_TIMEOUT=6e4,DELAY_BEFORE_SENDING_EXTRA_REQUESTS=5e3,BYTES_SENT_HEALTHY_OVERRIDE=10*1024,BYTES_RECEIVED_HEALTHY_OVERRIDE=100*1024,MESSAGE_TYPE="t",MESSAGE_DATA="d",CONTROL_SHUTDOWN="s",CONTROL_RESET="r",CONTROL_ERROR="e",CONTROL_PONG="o",SWITCH_ACK="a",END_TRANSMISSION="n",PING="p",SERVER_HELLO="h";class Connection{constructor(e,n,o,c,a,l,b,v,A,S){this.id=e,this.repoInfo_=n,this.applicationId_=o,this.appCheckToken_=c,this.authToken_=a,this.onMessage_=l,this.onReady_=b,this.onDisconnect_=v,this.onKill_=A,this.lastSessionId=S,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=logWrapper("c:"+this.id+":"),this.transportManager_=new TransportManager(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),o=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,o)},Math.floor(0));const c=e.healthyTimeout||0;c>0&&(this.healthyTimeout_=setTimeoutNonBlocking(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>BYTES_RECEIVED_HEALTHY_OVERRIDE?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>BYTES_SENT_HEALTHY_OVERRIDE?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(c)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(MESSAGE_TYPE in e){const n=e[MESSAGE_TYPE];n===SWITCH_ACK?this.upgradeIfSecondaryHealthy_():n===CONTROL_RESET?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===CONTROL_PONG&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=requireKey("t",e),o=requireKey("d",e);if(n==="c")this.onSecondaryControl_(o);else if(n==="d")this.pendingDataMessages.push(o);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:PING,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:SWITCH_ACK,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:END_TRANSMISSION,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=requireKey("t",e),o=requireKey("d",e);n==="c"?this.onControl_(o):n==="d"&&this.onDataMessage_(o)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=requireKey(MESSAGE_TYPE,e);if(MESSAGE_DATA in e){const o=e[MESSAGE_DATA];if(n===SERVER_HELLO){const c=Object.assign({},o);this.repoInfo_.isUsingEmulator&&(c.h=this.repoInfo_.host),this.onHandshake_(c)}else if(n===END_TRANSMISSION){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let c=0;c<this.pendingDataMessages.length;++c)this.onDataMessage_(this.pendingDataMessages[c]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===CONTROL_SHUTDOWN?this.onConnectionShutdown_(o):n===CONTROL_RESET?this.onReset_(o):n===CONTROL_ERROR?error("Server Error: "+o):n===CONTROL_PONG?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):error("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,o=e.v,c=e.h;this.sessionId=e.s,this.repoInfo_.host=c,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),PROTOCOL_VERSION!==o&&warn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),o=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,o),setTimeoutNonBlocking(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(UPGRADE_TIMEOUT))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):setTimeoutNonBlocking(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(DELAY_BEFORE_SENDING_EXTRA_REQUESTS))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:PING,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(PersistentStorage.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class ServerActions{put(e,n,o,c){}merge(e,n,o,c){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,o){}onDisconnectMerge(e,n,o){}onDisconnectCancel(e,n){}reportStats(e){}}class EventEmitter{constructor(e){this.allowedEvents_=e,this.listeners_={},assert$p(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const o=[...this.listeners_[e]];for(let c=0;c<o.length;c++)o[c].callback.apply(o[c].context,n)}}on(e,n,o){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:o});const c=this.getInitialEvent(e);c&&n.apply(o,c)}off(e,n,o){this.validateEventType_(e);const c=this.listeners_[e]||[];for(let a=0;a<c.length;a++)if(c[a].callback===n&&(!o||o===c[a].context)){c.splice(a,1);return}}validateEventType_(e){assert$p(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}class OnlineMonitor extends EventEmitter{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!isMobileCordova()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new OnlineMonitor}getInitialEvent(e){return assert$p(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}const MAX_PATH_DEPTH=32,MAX_PATH_LENGTH_BYTES=768;class Path{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let o=0;for(let c=0;c<this.pieces_.length;c++)this.pieces_[c].length>0&&(this.pieces_[o]=this.pieces_[c],o++);this.pieces_.length=o,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function newEmptyPath(){return new Path("")}function pathGetFront(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function pathGetLength(t){return t.pieces_.length-t.pieceNum_}function pathPopFront(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Path(t.pieces_,e)}function pathGetBack(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function pathToUrlEncodedString(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function pathSlice(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function pathParent(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Path(e,0)}function pathChild(t,e){const n=[];for(let o=t.pieceNum_;o<t.pieces_.length;o++)n.push(t.pieces_[o]);if(e instanceof Path)for(let o=e.pieceNum_;o<e.pieces_.length;o++)n.push(e.pieces_[o]);else{const o=e.split("/");for(let c=0;c<o.length;c++)o[c].length>0&&n.push(o[c])}return new Path(n,0)}function pathIsEmpty(t){return t.pieceNum_>=t.pieces_.length}function newRelativePath(t,e){const n=pathGetFront(t),o=pathGetFront(e);if(n===null)return e;if(n===o)return newRelativePath(pathPopFront(t),pathPopFront(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function pathEquals(t,e){if(pathGetLength(t)!==pathGetLength(e))return!1;for(let n=t.pieceNum_,o=e.pieceNum_;n<=t.pieces_.length;n++,o++)if(t.pieces_[n]!==e.pieces_[o])return!1;return!0}function pathContains(t,e){let n=t.pieceNum_,o=e.pieceNum_;if(pathGetLength(t)>pathGetLength(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[o])return!1;++n,++o}return!0}class ValidationPath{constructor(e,n){this.errorPrefix_=n,this.parts_=pathSlice(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let o=0;o<this.parts_.length;o++)this.byteLength_+=stringLength(this.parts_[o]);validationPathCheckValid(this)}}function validationPathPush(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=stringLength(e),validationPathCheckValid(t)}function validationPathPop(t){const e=t.parts_.pop();t.byteLength_-=stringLength(e),t.parts_.length>0&&(t.byteLength_-=1)}function validationPathCheckValid(t){if(t.byteLength_>MAX_PATH_LENGTH_BYTES)throw new Error(t.errorPrefix_+"has a key path longer than "+MAX_PATH_LENGTH_BYTES+" bytes ("+t.byteLength_+").");if(t.parts_.length>MAX_PATH_DEPTH)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+MAX_PATH_DEPTH+") or object contains a cycle "+validationPathToErrorString(t))}function validationPathToErrorString(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}class VisibilityMonitor extends EventEmitter{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const o=!document[e];o!==this.visible_&&(this.visible_=o,this.trigger("visible",o))},!1)}static getInstance(){return new VisibilityMonitor}getInitialEvent(e){return assert$p(e==="visible","Unknown event type: "+e),[this.visible_]}}const RECONNECT_MIN_DELAY=1e3,RECONNECT_MAX_DELAY_DEFAULT=60*5*1e3,RECONNECT_MAX_DELAY_FOR_ADMINS=30*1e3,RECONNECT_DELAY_MULTIPLIER=1.3,RECONNECT_DELAY_RESET_TIMEOUT=3e4,SERVER_KILL_INTERRUPT_REASON="server_kill",INVALID_TOKEN_THRESHOLD=3;class PersistentConnection extends ServerActions{constructor(e,n,o,c,a,l,b,v){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=o,this.onConnectStatus_=c,this.onServerInfoUpdate_=a,this.authTokenProvider_=l,this.appCheckTokenProvider_=b,this.authOverride_=v,this.id=PersistentConnection.nextPersistentConnectionId_++,this.log_=logWrapper("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=RECONNECT_MIN_DELAY,this.maxReconnectDelay_=RECONNECT_MAX_DELAY_DEFAULT,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,v&&!isNodeSdk())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");VisibilityMonitor.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&OnlineMonitor.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,o){const c=++this.requestNumber_,a={r:c,a:e,b:n};this.log_(stringify$2(a)),assert$p(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(a),o&&(this.requestCBHash_[c]=o)}get(e){this.initConnection_();const n=new Deferred,c={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:l=>{const b=l.d;l.s==="ok"?n.resolve(b):n.reject(b)}};this.outstandingGets_.push(c),this.outstandingGetCount_++;const a=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(a),n.promise}listen(e,n,o,c){this.initConnection_();const a=e._queryIdentifier,l=e._path.toString();this.log_("Listen called for "+l+" "+a),this.listens.has(l)||this.listens.set(l,new Map),assert$p(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),assert$p(!this.listens.get(l).has(a),"listen() called twice for same path/queryId.");const b={onComplete:c,hashFn:n,query:e,tag:o};this.listens.get(l).set(a,b),this.connected_&&this.sendListen_(b)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,o=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(o)})}sendListen_(e){const n=e.query,o=n._path.toString(),c=n._queryIdentifier;this.log_("Listen on "+o+" for "+c);const a={p:o},l="q";e.tag&&(a.q=n._queryObject,a.t=e.tag),a.h=e.hashFn(),this.sendRequest(l,a,b=>{const v=b.d,A=b.s;PersistentConnection.warnOnListenWarnings_(v,n),(this.listens.get(o)&&this.listens.get(o).get(c))===e&&(this.log_("listen response",b),A!=="ok"&&this.removeListen_(o,c),e.onComplete&&e.onComplete(A,v))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&contains(e,"w")){const o=safeGet(e,"w");if(Array.isArray(o)&&~o.indexOf("no_index")){const c='".indexOn": "'+n._queryParams.getIndex().toString()+'"',a=n._path.toString();warn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${c} at ${a} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||isAdmin(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=RECONNECT_MAX_DELAY_FOR_ADMINS)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=isValidFormat(e)?"auth":"gauth",o={cred:e};this.authOverride_===null?o.noauth=!0:typeof this.authOverride_=="object"&&(o.authvar=this.authOverride_),this.sendRequest(n,o,c=>{const a=c.s,l=c.d||"error";this.authToken_===e&&(a==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(a,l))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,o=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,o)})}unlisten(e,n){const o=e._path.toString(),c=e._queryIdentifier;this.log_("Unlisten called for "+o+" "+c),assert$p(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(o,c)&&this.connected_&&this.sendUnlisten_(o,c,e._queryObject,n)}sendUnlisten_(e,n,o,c){this.log_("Unlisten on "+e+" for "+n);const a={p:e},l="n";c&&(a.q=o,a.t=c),this.sendRequest(l,a)}onDisconnectPut(e,n,o){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,o):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:o})}onDisconnectMerge(e,n,o){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,o):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:o})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,o,c){const a={p:n,d:o};this.log_("onDisconnect "+e,a),this.sendRequest(e,a,l=>{c&&setTimeout(()=>{c(l.s,l.d)},Math.floor(0))})}put(e,n,o,c){this.putInternal("p",e,n,o,c)}merge(e,n,o,c){this.putInternal("m",e,n,o,c)}putInternal(e,n,o,c,a){this.initConnection_();const l={p:n,d:o};a!==void 0&&(l.h=a),this.outstandingPuts_.push({action:e,request:l,onComplete:c}),this.outstandingPutCount_++;const b=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(b):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,o=this.outstandingPuts_[e].request,c=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,o,a=>{this.log_(n+" response",a),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),c&&c(a.s,a.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,o=>{if(o.s!=="ok"){const a=o.d;this.log_("reportStats","Error sending stats: "+a)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+stringify$2(e));const n=e.r,o=this.requestCBHash_[n];o&&(delete this.requestCBHash_[n],o(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):error("Unrecognized action received from server: "+stringify$2(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){assert$p(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=RECONNECT_MIN_DELAY,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=RECONNECT_MIN_DELAY,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>RECONNECT_DELAY_RESET_TIMEOUT&&(this.reconnectDelay_=RECONNECT_MIN_DELAY),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*RECONNECT_DELAY_MULTIPLIER)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),o=this.onRealtimeDisconnect_.bind(this),c=this.id+":"+PersistentConnection.nextConnectionId_++,a=this.lastSessionId;let l=!1,b=null;const v=function(){b?b.close():(l=!0,o())},A=function(M){assert$p(b,"sendRequest call when we're not connected not allowed."),b.sendRequest(M)};this.realtime_={close:v,sendRequest:A};const S=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[M,B]=await Promise.all([this.authTokenProvider_.getToken(S),this.appCheckTokenProvider_.getToken(S)]);l?log("getToken() completed but was canceled"):(log("getToken() completed. Creating connection."),this.authToken_=M&&M.accessToken,this.appCheckToken_=B&&B.token,b=new Connection(c,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,o,P=>{warn(P+" ("+this.repoInfo_.toString()+")"),this.interrupt(SERVER_KILL_INTERRUPT_REASON)},a))}catch(M){this.log_("Failed to get token: "+M),l||(this.repoInfo_.nodeAdmin&&warn(M),v())}}}interrupt(e){log("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){log("Resuming connection for reason: "+e),delete this.interruptReasons_[e],isEmpty(this.interruptReasons_)&&(this.reconnectDelay_=RECONNECT_MIN_DELAY,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let o;n?o=n.map(a=>ObjectToUniqueKey(a)).join("$"):o="default";const c=this.removeListen_(e,o);c&&c.onComplete&&c.onComplete("permission_denied")}removeListen_(e,n){const o=new Path(e).toString();let c;if(this.listens.has(o)){const a=this.listens.get(o);c=a.get(n),a.delete(n),a.size===0&&this.listens.delete(o)}else c=void 0;return c}onAuthRevoked_(e,n){log("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=INVALID_TOKEN_THRESHOLD&&(this.reconnectDelay_=RECONNECT_MAX_DELAY_FOR_ADMINS,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){log("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=INVALID_TOKEN_THRESHOLD&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+SDK_VERSION.replace(/\./g,"-")]=1,isMobileCordova()?e["framework.cordova"]=1:isReactNative()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=OnlineMonitor.getInstance().currentlyOnline();return isEmpty(this.interruptReasons_)&&e}}PersistentConnection.nextPersistentConnectionId_=0;PersistentConnection.nextConnectionId_=0;class NamedNode{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new NamedNode(e,n)}}class Index{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const o=new NamedNode(MIN_NAME,e),c=new NamedNode(MIN_NAME,n);return this.compare(o,c)!==0}minPost(){return NamedNode.MIN}}let __EMPTY_NODE;class KeyIndex extends Index{static get __EMPTY_NODE(){return __EMPTY_NODE}static set __EMPTY_NODE(e){__EMPTY_NODE=e}compare(e,n){return nameCompare(e.name,n.name)}isDefinedOn(e){throw assertionError("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return NamedNode.MIN}maxPost(){return new NamedNode(MAX_NAME,__EMPTY_NODE)}makePost(e,n){return assert$p(typeof e=="string","KeyIndex indexValue must always be a string."),new NamedNode(e,__EMPTY_NODE)}toString(){return".key"}}const KEY_INDEX=new KeyIndex;class SortedMapIterator{constructor(e,n,o,c,a=null){this.isReverse_=c,this.resultGenerator_=a,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(e=e,l=n?o(e.key,n):1,c&&(l*=-1),l<0)this.isReverse_?e=e.left:e=e.right;else if(l===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class LLRBNode{constructor(e,n,o,c,a){this.key=e,this.value=n,this.color=o??LLRBNode.RED,this.left=c??SortedMap.EMPTY_NODE,this.right=a??SortedMap.EMPTY_NODE}copy(e,n,o,c,a){return new LLRBNode(e??this.key,n??this.value,o??this.color,c??this.left,a??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,o){let c=this;const a=o(e,c.key);return a<0?c=c.copy(null,null,null,c.left.insert(e,n,o),null):a===0?c=c.copy(null,n,null,null,null):c=c.copy(null,null,null,null,c.right.insert(e,n,o)),c.fixUp_()}removeMin_(){if(this.left.isEmpty())return SortedMap.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let o,c;if(o=this,n(e,o.key)<0)!o.left.isEmpty()&&!o.left.isRed_()&&!o.left.left.isRed_()&&(o=o.moveRedLeft_()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed_()&&(o=o.rotateRight_()),!o.right.isEmpty()&&!o.right.isRed_()&&!o.right.left.isRed_()&&(o=o.moveRedRight_()),n(e,o.key)===0){if(o.right.isEmpty())return SortedMap.EMPTY_NODE;c=o.right.min_(),o=o.copy(c.key,c.value,null,null,o.right.removeMin_())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,LLRBNode.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,LLRBNode.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}LLRBNode.RED=!0;LLRBNode.BLACK=!1;class LLRBEmptyNode{copy(e,n,o,c,a){return this}insert(e,n,o){return new LLRBNode(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class SortedMap{constructor(e,n=SortedMap.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new SortedMap(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,LLRBNode.BLACK,null,null))}remove(e){return new SortedMap(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,LLRBNode.BLACK,null,null))}get(e){let n,o=this.root_;for(;!o.isEmpty();){if(n=this.comparator_(e,o.key),n===0)return o.value;n<0?o=o.left:n>0&&(o=o.right)}return null}getPredecessorKey(e){let n,o=this.root_,c=null;for(;!o.isEmpty();)if(n=this.comparator_(e,o.key),n===0){if(o.left.isEmpty())return c?c.key:null;for(o=o.left;!o.right.isEmpty();)o=o.right;return o.key}else n<0?o=o.left:n>0&&(c=o,o=o.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new SortedMapIterator(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new SortedMapIterator(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new SortedMapIterator(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new SortedMapIterator(this.root_,null,this.comparator_,!0,e)}}SortedMap.EMPTY_NODE=new LLRBEmptyNode;function NAME_ONLY_COMPARATOR(t,e){return nameCompare(t.name,e.name)}function NAME_COMPARATOR(t,e){return nameCompare(t,e)}let MAX_NODE$2;function setMaxNode$1(t){MAX_NODE$2=t}const priorityHashText=function(t){return typeof t=="number"?"number:"+doubleToIEEE754String(t):"string:"+t},validatePriorityNode=function(t){if(t.isLeafNode()){const e=t.val();assert$p(typeof e=="string"||typeof e=="number"||typeof e=="object"&&contains(e,".sv"),"Priority must be a string or number.")}else assert$p(t===MAX_NODE$2||t.isEmpty(),"priority of unexpected type.");assert$p(t===MAX_NODE$2||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let __childrenNodeConstructor;class LeafNode{constructor(e,n=LeafNode.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,assert$p(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),validatePriorityNode(this.priorityNode_)}static set __childrenNodeConstructor(e){__childrenNodeConstructor=e}static get __childrenNodeConstructor(){return __childrenNodeConstructor}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new LeafNode(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:LeafNode.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return pathIsEmpty(e)?this:pathGetFront(e)===".priority"?this.priorityNode_:LeafNode.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:LeafNode.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const o=pathGetFront(e);return o===null?n:n.isEmpty()&&o!==".priority"?this:(assert$p(o!==".priority"||pathGetLength(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(o,LeafNode.__childrenNodeConstructor.EMPTY_NODE.updateChild(pathPopFront(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+priorityHashText(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=doubleToIEEE754String(this.value_):e+=this.value_,this.lazyHash_=sha1(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===LeafNode.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof LeafNode.__childrenNodeConstructor?-1:(assert$p(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,o=typeof this.value_,c=LeafNode.VALUE_TYPE_ORDER.indexOf(n),a=LeafNode.VALUE_TYPE_ORDER.indexOf(o);return assert$p(c>=0,"Unknown leaf type: "+n),assert$p(a>=0,"Unknown leaf type: "+o),c===a?o==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:a-c}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}LeafNode.VALUE_TYPE_ORDER=["object","boolean","number","string"];let nodeFromJSON$1,MAX_NODE$1;function setNodeFromJSON(t){nodeFromJSON$1=t}function setMaxNode(t){MAX_NODE$1=t}class PriorityIndex extends Index{compare(e,n){const o=e.node.getPriority(),c=n.node.getPriority(),a=o.compareTo(c);return a===0?nameCompare(e.name,n.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return NamedNode.MIN}maxPost(){return new NamedNode(MAX_NAME,new LeafNode("[PRIORITY-POST]",MAX_NODE$1))}makePost(e,n){const o=nodeFromJSON$1(e);return new NamedNode(n,new LeafNode("[PRIORITY-POST]",o))}toString(){return".priority"}}const PRIORITY_INDEX=new PriorityIndex;const LOG_2=Math.log(2);class Base12Num{constructor(e){const n=a=>parseInt(Math.log(a)/LOG_2,10),o=a=>parseInt(Array(a+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const c=o(this.count);this.bits_=e+1&c}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const buildChildSet=function(t,e,n,o){t.sort(e);const c=function(v,A){const S=A-v;let M,B;if(S===0)return null;if(S===1)return M=t[v],B=n?n(M):M,new LLRBNode(B,M.node,LLRBNode.BLACK,null,null);{const P=parseInt(S/2,10)+v,L=c(v,P),F=c(P+1,A);return M=t[P],B=n?n(M):M,new LLRBNode(B,M.node,LLRBNode.BLACK,L,F)}},a=function(v){let A=null,S=null,M=t.length;const B=function(L,F){const U=M-L,q=M;M-=L;const X=c(U+1,q),ee=t[U],te=n?n(ee):ee;P(new LLRBNode(te,ee.node,F,null,X))},P=function(L){A?(A.left=L,A=L):(S=L,A=L)};for(let L=0;L<v.count;++L){const F=v.nextBitIsOne(),U=Math.pow(2,v.count-(L+1));F?B(U,LLRBNode.BLACK):(B(U,LLRBNode.BLACK),B(U,LLRBNode.RED))}return S},l=new Base12Num(t.length),b=a(l);return new SortedMap(o||e,b)};let _defaultIndexMap;const fallbackObject={};class IndexMap{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return assert$p(fallbackObject&&PRIORITY_INDEX,"ChildrenNode.ts has not been loaded"),_defaultIndexMap=_defaultIndexMap||new IndexMap({".priority":fallbackObject},{".priority":PRIORITY_INDEX}),_defaultIndexMap}get(e){const n=safeGet(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof SortedMap?n:null}hasIndex(e){return contains(this.indexSet_,e.toString())}addIndex(e,n){assert$p(e!==KEY_INDEX,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const o=[];let c=!1;const a=n.getIterator(NamedNode.Wrap);let l=a.getNext();for(;l;)c=c||e.isDefinedOn(l.node),o.push(l),l=a.getNext();let b;c?b=buildChildSet(o,e.getCompare()):b=fallbackObject;const v=e.toString(),A=Object.assign({},this.indexSet_);A[v]=e;const S=Object.assign({},this.indexes_);return S[v]=b,new IndexMap(S,A)}addToIndexes(e,n){const o=map(this.indexes_,(c,a)=>{const l=safeGet(this.indexSet_,a);if(assert$p(l,"Missing index implementation for "+a),c===fallbackObject)if(l.isDefinedOn(e.node)){const b=[],v=n.getIterator(NamedNode.Wrap);let A=v.getNext();for(;A;)A.name!==e.name&&b.push(A),A=v.getNext();return b.push(e),buildChildSet(b,l.getCompare())}else return fallbackObject;else{const b=n.get(e.name);let v=c;return b&&(v=v.remove(new NamedNode(e.name,b))),v.insert(e,e.node)}});return new IndexMap(o,this.indexSet_)}removeFromIndexes(e,n){const o=map(this.indexes_,c=>{if(c===fallbackObject)return c;{const a=n.get(e.name);return a?c.remove(new NamedNode(e.name,a)):c}});return new IndexMap(o,this.indexSet_)}}let EMPTY_NODE;class ChildrenNode{constructor(e,n,o){this.children_=e,this.priorityNode_=n,this.indexMap_=o,this.lazyHash_=null,this.priorityNode_&&validatePriorityNode(this.priorityNode_),this.children_.isEmpty()&&assert$p(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return EMPTY_NODE||(EMPTY_NODE=new ChildrenNode(new SortedMap(NAME_COMPARATOR),null,IndexMap.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||EMPTY_NODE}updatePriority(e){return this.children_.isEmpty()?this:new ChildrenNode(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?EMPTY_NODE:n}}getChild(e){const n=pathGetFront(e);return n===null?this:this.getImmediateChild(n).getChild(pathPopFront(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(assert$p(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const o=new NamedNode(e,n);let c,a;n.isEmpty()?(c=this.children_.remove(e),a=this.indexMap_.removeFromIndexes(o,this.children_)):(c=this.children_.insert(e,n),a=this.indexMap_.addToIndexes(o,this.children_));const l=c.isEmpty()?EMPTY_NODE:this.priorityNode_;return new ChildrenNode(c,l,a)}}updateChild(e,n){const o=pathGetFront(e);if(o===null)return n;{assert$p(pathGetFront(e)!==".priority"||pathGetLength(e)===1,".priority must be the last token in a path");const c=this.getImmediateChild(o).updateChild(pathPopFront(e),n);return this.updateImmediateChild(o,c)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let o=0,c=0,a=!0;if(this.forEachChild(PRIORITY_INDEX,(l,b)=>{n[l]=b.val(e),o++,a&&ChildrenNode.INTEGER_REGEXP_.test(l)?c=Math.max(c,Number(l)):a=!1}),!e&&a&&c<2*o){const l=[];for(const b in n)l[b]=n[b];return l}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+priorityHashText(this.getPriority().val())+":"),this.forEachChild(PRIORITY_INDEX,(n,o)=>{const c=o.hash();c!==""&&(e+=":"+n+":"+c)}),this.lazyHash_=e===""?"":sha1(e)}return this.lazyHash_}getPredecessorChildName(e,n,o){const c=this.resolveIndex_(o);if(c){const a=c.getPredecessorKey(new NamedNode(e,n));return a?a.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const o=n.minKey();return o&&o.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new NamedNode(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const o=n.maxKey();return o&&o.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new NamedNode(n,this.children_.get(n)):null}forEachChild(e,n){const o=this.resolveIndex_(e);return o?o.inorderTraversal(c=>n(c.name,c.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const o=this.resolveIndex_(n);if(o)return o.getIteratorFrom(e,c=>c);{const c=this.children_.getIteratorFrom(e.name,NamedNode.Wrap);let a=c.peek();for(;a!=null&&n.compare(a,e)<0;)c.getNext(),a=c.peek();return c}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const o=this.resolveIndex_(n);if(o)return o.getReverseIteratorFrom(e,c=>c);{const c=this.children_.getReverseIteratorFrom(e.name,NamedNode.Wrap);let a=c.peek();for(;a!=null&&n.compare(a,e)>0;)c.getNext(),a=c.peek();return c}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===MAX_NODE?-1:0}withIndex(e){if(e===KEY_INDEX||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new ChildrenNode(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===KEY_INDEX||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const o=this.getIterator(PRIORITY_INDEX),c=n.getIterator(PRIORITY_INDEX);let a=o.getNext(),l=c.getNext();for(;a&&l;){if(a.name!==l.name||!a.node.equals(l.node))return!1;a=o.getNext(),l=c.getNext()}return a===null&&l===null}else return!1;else return!1}}resolveIndex_(e){return e===KEY_INDEX?null:this.indexMap_.get(e.toString())}}ChildrenNode.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class MaxNode extends ChildrenNode{constructor(){super(new SortedMap(NAME_COMPARATOR),ChildrenNode.EMPTY_NODE,IndexMap.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return ChildrenNode.EMPTY_NODE}isEmpty(){return!1}}const MAX_NODE=new MaxNode;Object.defineProperties(NamedNode,{MIN:{value:new NamedNode(MIN_NAME,ChildrenNode.EMPTY_NODE)},MAX:{value:new NamedNode(MAX_NAME,MAX_NODE)}});KeyIndex.__EMPTY_NODE=ChildrenNode.EMPTY_NODE;LeafNode.__childrenNodeConstructor=ChildrenNode;setMaxNode$1(MAX_NODE);setMaxNode(MAX_NODE);const USE_HINZE=!0;function nodeFromJSON(t,e=null){if(t===null)return ChildrenNode.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),assert$p(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new LeafNode(n,nodeFromJSON(e))}if(!(t instanceof Array)&&USE_HINZE){const n=[];let o=!1;if(each(t,(l,b)=>{if(l.substring(0,1)!=="."){const v=nodeFromJSON(b);v.isEmpty()||(o=o||!v.getPriority().isEmpty(),n.push(new NamedNode(l,v)))}}),n.length===0)return ChildrenNode.EMPTY_NODE;const a=buildChildSet(n,NAME_ONLY_COMPARATOR,l=>l.name,NAME_COMPARATOR);if(o){const l=buildChildSet(n,PRIORITY_INDEX.getCompare());return new ChildrenNode(a,nodeFromJSON(e),new IndexMap({".priority":l},{".priority":PRIORITY_INDEX}))}else return new ChildrenNode(a,nodeFromJSON(e),IndexMap.Default)}else{let n=ChildrenNode.EMPTY_NODE;return each(t,(o,c)=>{if(contains(t,o)&&o.substring(0,1)!=="."){const a=nodeFromJSON(c);(a.isLeafNode()||!a.isEmpty())&&(n=n.updateImmediateChild(o,a))}}),n.updatePriority(nodeFromJSON(e))}}setNodeFromJSON(nodeFromJSON);class PathIndex extends Index{constructor(e){super(),this.indexPath_=e,assert$p(!pathIsEmpty(e)&&pathGetFront(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const o=this.extractChild(e.node),c=this.extractChild(n.node),a=o.compareTo(c);return a===0?nameCompare(e.name,n.name):a}makePost(e,n){const o=nodeFromJSON(e),c=ChildrenNode.EMPTY_NODE.updateChild(this.indexPath_,o);return new NamedNode(n,c)}maxPost(){const e=ChildrenNode.EMPTY_NODE.updateChild(this.indexPath_,MAX_NODE);return new NamedNode(MAX_NAME,e)}toString(){return pathSlice(this.indexPath_,0).join("/")}}class ValueIndex extends Index{compare(e,n){const o=e.node.compareTo(n.node);return o===0?nameCompare(e.name,n.name):o}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return NamedNode.MIN}maxPost(){return NamedNode.MAX}makePost(e,n){const o=nodeFromJSON(e);return new NamedNode(n,o)}toString(){return".value"}}const VALUE_INDEX=new ValueIndex;function changeValue(t){return{type:"value",snapshotNode:t}}function changeChildAdded(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function changeChildRemoved(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function changeChildChanged(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function changeChildMoved(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}class QueryParams{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=PRIORITY_INDEX}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return assert$p(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return assert$p(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:MIN_NAME}hasEnd(){return this.endSet_}getIndexEndValue(){return assert$p(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return assert$p(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:MAX_NAME}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return assert$p(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===PRIORITY_INDEX}copy(){const e=new QueryParams;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function queryParamsToRestQueryStringParameters(t){const e={};if(t.isDefault())return e;let n;if(t.index_===PRIORITY_INDEX?n="$priority":t.index_===VALUE_INDEX?n="$value":t.index_===KEY_INDEX?n="$key":(assert$p(t.index_ instanceof PathIndex,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=stringify$2(n),t.startSet_){const o=t.startAfterSet_?"startAfter":"startAt";e[o]=stringify$2(t.indexStartValue_),t.startNameSet_&&(e[o]+=","+stringify$2(t.indexStartName_))}if(t.endSet_){const o=t.endBeforeSet_?"endBefore":"endAt";e[o]=stringify$2(t.indexEndValue_),t.endNameSet_&&(e[o]+=","+stringify$2(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function queryParamsGetQueryObject(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==PRIORITY_INDEX&&(e.i=t.index_.toString()),e}class ReadonlyRestClient extends ServerActions{constructor(e,n,o,c){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=o,this.appCheckTokenProvider_=c,this.log_=logWrapper("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(assert$p(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,o,c){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const l=ReadonlyRestClient.getListenId_(e,o),b={};this.listens_[l]=b;const v=queryParamsToRestQueryStringParameters(e._queryParams);this.restRequest_(a+".json",v,(A,S)=>{let M=S;if(A===404&&(M=null,A=null),A===null&&this.onDataUpdate_(a,M,!1,o),safeGet(this.listens_,l)===b){let B;A?A===401?B="permission_denied":B="rest_error:"+A:B="ok",c(B,null)}})}unlisten(e,n){const o=ReadonlyRestClient.getListenId_(e,n);delete this.listens_[o]}get(e){const n=queryParamsToRestQueryStringParameters(e._queryParams),o=e._path.toString(),c=new Deferred;return this.restRequest_(o+".json",n,(a,l)=>{let b=l;a===404&&(b=null,a=null),a===null?(this.onDataUpdate_(o,b,!1,null),c.resolve(b)):c.reject(new Error(b))}),c.promise}refreshAuthToken(e){}restRequest_(e,n={},o){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([c,a])=>{c&&c.accessToken&&(n.auth=c.accessToken),a&&a.token&&(n.ac=a.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+querystring(n);this.log_("Sending REST request for "+l);const b=new XMLHttpRequest;b.onreadystatechange=()=>{if(o&&b.readyState===4){this.log_("REST Response for "+l+" received. status:",b.status,"response:",b.responseText);let v=null;if(b.status>=200&&b.status<300){try{v=jsonEval(b.responseText)}catch{warn("Failed to parse JSON response for "+l+": "+b.responseText)}o(null,v)}else b.status!==401&&b.status!==404&&warn("Got unsuccessful REST response for "+l+" Status: "+b.status),o(b.status);o=null}},b.open("GET",l,!0),b.send()})}}class SnapshotHolder{constructor(){this.rootNode_=ChildrenNode.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}function newSparseSnapshotTree(){return{value:null,children:new Map}}function sparseSnapshotTreeRemember(t,e,n){if(pathIsEmpty(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const o=pathGetFront(e);t.children.has(o)||t.children.set(o,newSparseSnapshotTree());const c=t.children.get(o);e=pathPopFront(e),sparseSnapshotTreeRemember(c,e,n)}}function sparseSnapshotTreeForEachTree(t,e,n){t.value!==null?n(e,t.value):sparseSnapshotTreeForEachChild(t,(o,c)=>{const a=new Path(e.toString()+"/"+o);sparseSnapshotTreeForEachTree(c,a,n)})}function sparseSnapshotTreeForEachChild(t,e){t.children.forEach((n,o)=>{e(o,n)})}class StatsListener{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&each(this.last_,(o,c)=>{n[o]=n[o]-c}),this.last_=e,n}}const FIRST_STATS_MIN_TIME=10*1e3,FIRST_STATS_MAX_TIME=30*1e3,REPORT_STATS_INTERVAL=5*60*1e3;class StatsReporter{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new StatsListener(e);const o=FIRST_STATS_MIN_TIME+(FIRST_STATS_MAX_TIME-FIRST_STATS_MIN_TIME)*Math.random();setTimeoutNonBlocking(this.reportStats_.bind(this),Math.floor(o))}reportStats_(){const e=this.statsListener_.get(),n={};let o=!1;each(e,(c,a)=>{a>0&&contains(this.statsToReport_,c)&&(n[c]=a,o=!0)}),o&&this.server_.reportStats(n),setTimeoutNonBlocking(this.reportStats_.bind(this),Math.floor(Math.random()*2*REPORT_STATS_INTERVAL))}}var OperationType;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(OperationType||(OperationType={}));function newOperationSourceUser(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function newOperationSourceServer(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function newOperationSourceServerTaggedQuery(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}class AckUserWrite{constructor(e,n,o){this.path=e,this.affectedTree=n,this.revert=o,this.type=OperationType.ACK_USER_WRITE,this.source=newOperationSourceUser()}operationForChild(e){if(pathIsEmpty(this.path)){if(this.affectedTree.value!=null)return assert$p(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Path(e));return new AckUserWrite(newEmptyPath(),n,this.revert)}}else return assert$p(pathGetFront(this.path)===e,"operationForChild called for unrelated child."),new AckUserWrite(pathPopFront(this.path),this.affectedTree,this.revert)}}class Overwrite{constructor(e,n,o){this.source=e,this.path=n,this.snap=o,this.type=OperationType.OVERWRITE}operationForChild(e){return pathIsEmpty(this.path)?new Overwrite(this.source,newEmptyPath(),this.snap.getImmediateChild(e)):new Overwrite(this.source,pathPopFront(this.path),this.snap)}}class Merge{constructor(e,n,o){this.source=e,this.path=n,this.children=o,this.type=OperationType.MERGE}operationForChild(e){if(pathIsEmpty(this.path)){const n=this.children.subtree(new Path(e));return n.isEmpty()?null:n.value?new Overwrite(this.source,newEmptyPath(),n.value):new Merge(this.source,newEmptyPath(),n)}else return assert$p(pathGetFront(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Merge(this.source,pathPopFront(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class CacheNode{constructor(e,n,o){this.node_=e,this.fullyInitialized_=n,this.filtered_=o}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(pathIsEmpty(e))return this.isFullyInitialized()&&!this.filtered_;const n=pathGetFront(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function eventGeneratorGenerateEventsForChanges(t,e,n,o){const c=[],a=[];return e.forEach(l=>{l.type==="child_changed"&&t.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&a.push(changeChildMoved(l.childName,l.snapshotNode))}),eventGeneratorGenerateEventsForType(t,c,"child_removed",e,o,n),eventGeneratorGenerateEventsForType(t,c,"child_added",e,o,n),eventGeneratorGenerateEventsForType(t,c,"child_moved",a,o,n),eventGeneratorGenerateEventsForType(t,c,"child_changed",e,o,n),eventGeneratorGenerateEventsForType(t,c,"value",e,o,n),c}function eventGeneratorGenerateEventsForType(t,e,n,o,c,a){const l=o.filter(b=>b.type===n);l.sort((b,v)=>eventGeneratorCompareChanges(t,b,v)),l.forEach(b=>{const v=eventGeneratorMaterializeSingleChange(t,b,a);c.forEach(A=>{A.respondsTo(b.type)&&e.push(A.createEvent(v,t.query_))})})}function eventGeneratorMaterializeSingleChange(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function eventGeneratorCompareChanges(t,e,n){if(e.childName==null||n.childName==null)throw assertionError("Should only compare child_ events.");const o=new NamedNode(e.childName,e.snapshotNode),c=new NamedNode(n.childName,n.snapshotNode);return t.index_.compare(o,c)}function newViewCache(t,e){return{eventCache:t,serverCache:e}}function viewCacheUpdateEventSnap(t,e,n,o){return newViewCache(new CacheNode(e,n,o),t.serverCache)}function viewCacheUpdateServerSnap(t,e,n,o){return newViewCache(t.eventCache,new CacheNode(e,n,o))}function viewCacheGetCompleteEventSnap(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function viewCacheGetCompleteServerSnap(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}let emptyChildrenSingleton;const EmptyChildren=()=>(emptyChildrenSingleton||(emptyChildrenSingleton=new SortedMap(stringCompare)),emptyChildrenSingleton);class ImmutableTree{constructor(e,n=EmptyChildren()){this.value=e,this.children=n}static fromObject(e){let n=new ImmutableTree(null);return each(e,(o,c)=>{n=n.set(new Path(o),c)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:newEmptyPath(),value:this.value};if(pathIsEmpty(e))return null;{const o=pathGetFront(e),c=this.children.get(o);if(c!==null){const a=c.findRootMostMatchingPathAndValue(pathPopFront(e),n);return a!=null?{path:pathChild(new Path(o),a.path),value:a.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(pathIsEmpty(e))return this;{const n=pathGetFront(e),o=this.children.get(n);return o!==null?o.subtree(pathPopFront(e)):new ImmutableTree(null)}}set(e,n){if(pathIsEmpty(e))return new ImmutableTree(n,this.children);{const o=pathGetFront(e),a=(this.children.get(o)||new ImmutableTree(null)).set(pathPopFront(e),n),l=this.children.insert(o,a);return new ImmutableTree(this.value,l)}}remove(e){if(pathIsEmpty(e))return this.children.isEmpty()?new ImmutableTree(null):new ImmutableTree(null,this.children);{const n=pathGetFront(e),o=this.children.get(n);if(o){const c=o.remove(pathPopFront(e));let a;return c.isEmpty()?a=this.children.remove(n):a=this.children.insert(n,c),this.value===null&&a.isEmpty()?new ImmutableTree(null):new ImmutableTree(this.value,a)}else return this}}get(e){if(pathIsEmpty(e))return this.value;{const n=pathGetFront(e),o=this.children.get(n);return o?o.get(pathPopFront(e)):null}}setTree(e,n){if(pathIsEmpty(e))return n;{const o=pathGetFront(e),a=(this.children.get(o)||new ImmutableTree(null)).setTree(pathPopFront(e),n);let l;return a.isEmpty()?l=this.children.remove(o):l=this.children.insert(o,a),new ImmutableTree(this.value,l)}}fold(e){return this.fold_(newEmptyPath(),e)}fold_(e,n){const o={};return this.children.inorderTraversal((c,a)=>{o[c]=a.fold_(pathChild(e,c),n)}),n(e,this.value,o)}findOnPath(e,n){return this.findOnPath_(e,newEmptyPath(),n)}findOnPath_(e,n,o){const c=this.value?o(n,this.value):!1;if(c)return c;if(pathIsEmpty(e))return null;{const a=pathGetFront(e),l=this.children.get(a);return l?l.findOnPath_(pathPopFront(e),pathChild(n,a),o):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,newEmptyPath(),n)}foreachOnPath_(e,n,o){if(pathIsEmpty(e))return this;{this.value&&o(n,this.value);const c=pathGetFront(e),a=this.children.get(c);return a?a.foreachOnPath_(pathPopFront(e),pathChild(n,c),o):new ImmutableTree(null)}}foreach(e){this.foreach_(newEmptyPath(),e)}foreach_(e,n){this.children.inorderTraversal((o,c)=>{c.foreach_(pathChild(e,o),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,o)=>{o.value&&e(n,o.value)})}}class CompoundWrite{constructor(e){this.writeTree_=e}static empty(){return new CompoundWrite(new ImmutableTree(null))}}function compoundWriteAddWrite(t,e,n){if(pathIsEmpty(e))return new CompoundWrite(new ImmutableTree(n));{const o=t.writeTree_.findRootMostValueAndPath(e);if(o!=null){const c=o.path;let a=o.value;const l=newRelativePath(c,e);return a=a.updateChild(l,n),new CompoundWrite(t.writeTree_.set(c,a))}else{const c=new ImmutableTree(n),a=t.writeTree_.setTree(e,c);return new CompoundWrite(a)}}}function compoundWriteAddWrites(t,e,n){let o=t;return each(n,(c,a)=>{o=compoundWriteAddWrite(o,pathChild(e,c),a)}),o}function compoundWriteRemoveWrite(t,e){if(pathIsEmpty(e))return CompoundWrite.empty();{const n=t.writeTree_.setTree(e,new ImmutableTree(null));return new CompoundWrite(n)}}function compoundWriteHasCompleteWrite(t,e){return compoundWriteGetCompleteNode(t,e)!=null}function compoundWriteGetCompleteNode(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(newRelativePath(n.path,e)):null}function compoundWriteGetCompleteChildren(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(PRIORITY_INDEX,(o,c)=>{e.push(new NamedNode(o,c))}):t.writeTree_.children.inorderTraversal((o,c)=>{c.value!=null&&e.push(new NamedNode(o,c.value))}),e}function compoundWriteChildCompoundWrite(t,e){if(pathIsEmpty(e))return t;{const n=compoundWriteGetCompleteNode(t,e);return n!=null?new CompoundWrite(new ImmutableTree(n)):new CompoundWrite(t.writeTree_.subtree(e))}}function compoundWriteIsEmpty(t){return t.writeTree_.isEmpty()}function compoundWriteApply(t,e){return applySubtreeWrite(newEmptyPath(),t.writeTree_,e)}function applySubtreeWrite(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let o=null;return e.children.inorderTraversal((c,a)=>{c===".priority"?(assert$p(a.value!==null,"Priority writes must always be leaf nodes"),o=a.value):n=applySubtreeWrite(pathChild(t,c),a,n)}),!n.getChild(t).isEmpty()&&o!==null&&(n=n.updateChild(pathChild(t,".priority"),o)),n}}function writeTreeChildWrites(t,e){return newWriteTreeRef(e,t)}function writeTreeAddOverwrite(t,e,n,o,c){assert$p(o>t.lastWriteId,"Stacking an older write on top of newer ones"),c===void 0&&(c=!0),t.allWrites.push({path:e,snap:n,writeId:o,visible:c}),c&&(t.visibleWrites=compoundWriteAddWrite(t.visibleWrites,e,n)),t.lastWriteId=o}function writeTreeGetWrite(t,e){for(let n=0;n<t.allWrites.length;n++){const o=t.allWrites[n];if(o.writeId===e)return o}return null}function writeTreeRemoveWrite(t,e){const n=t.allWrites.findIndex(b=>b.writeId===e);assert$p(n>=0,"removeWrite called with nonexistent writeId.");const o=t.allWrites[n];t.allWrites.splice(n,1);let c=o.visible,a=!1,l=t.allWrites.length-1;for(;c&&l>=0;){const b=t.allWrites[l];b.visible&&(l>=n&&writeTreeRecordContainsPath_(b,o.path)?c=!1:pathContains(o.path,b.path)&&(a=!0)),l--}if(c){if(a)return writeTreeResetTree_(t),!0;if(o.snap)t.visibleWrites=compoundWriteRemoveWrite(t.visibleWrites,o.path);else{const b=o.children;each(b,v=>{t.visibleWrites=compoundWriteRemoveWrite(t.visibleWrites,pathChild(o.path,v))})}return!0}else return!1}function writeTreeRecordContainsPath_(t,e){if(t.snap)return pathContains(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&pathContains(pathChild(t.path,n),e))return!0;return!1}function writeTreeResetTree_(t){t.visibleWrites=writeTreeLayerTree_(t.allWrites,writeTreeDefaultFilter_,newEmptyPath()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function writeTreeDefaultFilter_(t){return t.visible}function writeTreeLayerTree_(t,e,n){let o=CompoundWrite.empty();for(let c=0;c<t.length;++c){const a=t[c];if(e(a)){const l=a.path;let b;if(a.snap)pathContains(n,l)?(b=newRelativePath(n,l),o=compoundWriteAddWrite(o,b,a.snap)):pathContains(l,n)&&(b=newRelativePath(l,n),o=compoundWriteAddWrite(o,newEmptyPath(),a.snap.getChild(b)));else if(a.children){if(pathContains(n,l))b=newRelativePath(n,l),o=compoundWriteAddWrites(o,b,a.children);else if(pathContains(l,n))if(b=newRelativePath(l,n),pathIsEmpty(b))o=compoundWriteAddWrites(o,newEmptyPath(),a.children);else{const v=safeGet(a.children,pathGetFront(b));if(v){const A=v.getChild(pathPopFront(b));o=compoundWriteAddWrite(o,newEmptyPath(),A)}}}else throw assertionError("WriteRecord should have .snap or .children")}}return o}function writeTreeCalcCompleteEventCache(t,e,n,o,c){if(!o&&!c){const a=compoundWriteGetCompleteNode(t.visibleWrites,e);if(a!=null)return a;{const l=compoundWriteChildCompoundWrite(t.visibleWrites,e);if(compoundWriteIsEmpty(l))return n;if(n==null&&!compoundWriteHasCompleteWrite(l,newEmptyPath()))return null;{const b=n||ChildrenNode.EMPTY_NODE;return compoundWriteApply(l,b)}}}else{const a=compoundWriteChildCompoundWrite(t.visibleWrites,e);if(!c&&compoundWriteIsEmpty(a))return n;if(!c&&n==null&&!compoundWriteHasCompleteWrite(a,newEmptyPath()))return null;{const l=function(A){return(A.visible||c)&&(!o||!~o.indexOf(A.writeId))&&(pathContains(A.path,e)||pathContains(e,A.path))},b=writeTreeLayerTree_(t.allWrites,l,e),v=n||ChildrenNode.EMPTY_NODE;return compoundWriteApply(b,v)}}}function writeTreeCalcCompleteEventChildren(t,e,n){let o=ChildrenNode.EMPTY_NODE;const c=compoundWriteGetCompleteNode(t.visibleWrites,e);if(c)return c.isLeafNode()||c.forEachChild(PRIORITY_INDEX,(a,l)=>{o=o.updateImmediateChild(a,l)}),o;if(n){const a=compoundWriteChildCompoundWrite(t.visibleWrites,e);return n.forEachChild(PRIORITY_INDEX,(l,b)=>{const v=compoundWriteApply(compoundWriteChildCompoundWrite(a,new Path(l)),b);o=o.updateImmediateChild(l,v)}),compoundWriteGetCompleteChildren(a).forEach(l=>{o=o.updateImmediateChild(l.name,l.node)}),o}else{const a=compoundWriteChildCompoundWrite(t.visibleWrites,e);return compoundWriteGetCompleteChildren(a).forEach(l=>{o=o.updateImmediateChild(l.name,l.node)}),o}}function writeTreeCalcEventCacheAfterServerOverwrite(t,e,n,o,c){assert$p(o||c,"Either existingEventSnap or existingServerSnap must exist");const a=pathChild(e,n);if(compoundWriteHasCompleteWrite(t.visibleWrites,a))return null;{const l=compoundWriteChildCompoundWrite(t.visibleWrites,a);return compoundWriteIsEmpty(l)?c.getChild(n):compoundWriteApply(l,c.getChild(n))}}function writeTreeCalcCompleteChild(t,e,n,o){const c=pathChild(e,n),a=compoundWriteGetCompleteNode(t.visibleWrites,c);if(a!=null)return a;if(o.isCompleteForChild(n)){const l=compoundWriteChildCompoundWrite(t.visibleWrites,c);return compoundWriteApply(l,o.getNode().getImmediateChild(n))}else return null}function writeTreeShadowingWrite(t,e){return compoundWriteGetCompleteNode(t.visibleWrites,e)}function writeTreeCalcIndexedSlice(t,e,n,o,c,a,l){let b;const v=compoundWriteChildCompoundWrite(t.visibleWrites,e),A=compoundWriteGetCompleteNode(v,newEmptyPath());if(A!=null)b=A;else if(n!=null)b=compoundWriteApply(v,n);else return[];if(b=b.withIndex(l),!b.isEmpty()&&!b.isLeafNode()){const S=[],M=l.getCompare(),B=a?b.getReverseIteratorFrom(o,l):b.getIteratorFrom(o,l);let P=B.getNext();for(;P&&S.length<c;)M(P,o)!==0&&S.push(P),P=B.getNext();return S}else return[]}function newWriteTree(){return{visibleWrites:CompoundWrite.empty(),allWrites:[],lastWriteId:-1}}function writeTreeRefCalcCompleteEventCache(t,e,n,o){return writeTreeCalcCompleteEventCache(t.writeTree,t.treePath,e,n,o)}function writeTreeRefCalcCompleteEventChildren(t,e){return writeTreeCalcCompleteEventChildren(t.writeTree,t.treePath,e)}function writeTreeRefCalcEventCacheAfterServerOverwrite(t,e,n,o){return writeTreeCalcEventCacheAfterServerOverwrite(t.writeTree,t.treePath,e,n,o)}function writeTreeRefShadowingWrite(t,e){return writeTreeShadowingWrite(t.writeTree,pathChild(t.treePath,e))}function writeTreeRefCalcIndexedSlice(t,e,n,o,c,a){return writeTreeCalcIndexedSlice(t.writeTree,t.treePath,e,n,o,c,a)}function writeTreeRefCalcCompleteChild(t,e,n){return writeTreeCalcCompleteChild(t.writeTree,t.treePath,e,n)}function writeTreeRefChild(t,e){return newWriteTreeRef(pathChild(t.treePath,e),t.writeTree)}function newWriteTreeRef(t,e){return{treePath:t,writeTree:e}}class ChildChangeAccumulator{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,o=e.childName;assert$p(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),assert$p(o!==".priority","Only non-priority child changes can be tracked.");const c=this.changeMap.get(o);if(c){const a=c.type;if(n==="child_added"&&a==="child_removed")this.changeMap.set(o,changeChildChanged(o,e.snapshotNode,c.snapshotNode));else if(n==="child_removed"&&a==="child_added")this.changeMap.delete(o);else if(n==="child_removed"&&a==="child_changed")this.changeMap.set(o,changeChildRemoved(o,c.oldSnap));else if(n==="child_changed"&&a==="child_added")this.changeMap.set(o,changeChildAdded(o,e.snapshotNode));else if(n==="child_changed"&&a==="child_changed")this.changeMap.set(o,changeChildChanged(o,e.snapshotNode,c.oldSnap));else throw assertionError("Illegal combination of changes: "+e+" occurred after "+c)}else this.changeMap.set(o,e)}getChanges(){return Array.from(this.changeMap.values())}}class NoCompleteChildSource_{getCompleteChild(e){return null}getChildAfterChild(e,n,o){return null}}const NO_COMPLETE_CHILD_SOURCE=new NoCompleteChildSource_;class WriteTreeCompleteChildSource{constructor(e,n,o=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=o}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const o=this.optCompleteServerCache_!=null?new CacheNode(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return writeTreeRefCalcCompleteChild(this.writes_,e,o)}}getChildAfterChild(e,n,o){const c=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:viewCacheGetCompleteServerSnap(this.viewCache_),a=writeTreeRefCalcIndexedSlice(this.writes_,c,n,1,o,e);return a.length===0?null:a[0]}}function viewProcessorAssertIndexed(t,e){assert$p(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),assert$p(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function viewProcessorApplyOperation(t,e,n,o,c){const a=new ChildChangeAccumulator;let l,b;if(n.type===OperationType.OVERWRITE){const A=n;A.source.fromUser?l=viewProcessorApplyUserOverwrite(t,e,A.path,A.snap,o,c,a):(assert$p(A.source.fromServer,"Unknown source."),b=A.source.tagged||e.serverCache.isFiltered()&&!pathIsEmpty(A.path),l=viewProcessorApplyServerOverwrite(t,e,A.path,A.snap,o,c,b,a))}else if(n.type===OperationType.MERGE){const A=n;A.source.fromUser?l=viewProcessorApplyUserMerge(t,e,A.path,A.children,o,c,a):(assert$p(A.source.fromServer,"Unknown source."),b=A.source.tagged||e.serverCache.isFiltered(),l=viewProcessorApplyServerMerge(t,e,A.path,A.children,o,c,b,a))}else if(n.type===OperationType.ACK_USER_WRITE){const A=n;A.revert?l=viewProcessorRevertUserWrite(t,e,A.path,o,c,a):l=viewProcessorAckUserWrite(t,e,A.path,A.affectedTree,o,c,a)}else if(n.type===OperationType.LISTEN_COMPLETE)l=viewProcessorListenComplete(t,e,n.path,o,a);else throw assertionError("Unknown operation type: "+n.type);const v=a.getChanges();return viewProcessorMaybeAddValueEvent(e,l,v),{viewCache:l,changes:v}}function viewProcessorMaybeAddValueEvent(t,e,n){const o=e.eventCache;if(o.isFullyInitialized()){const c=o.getNode().isLeafNode()||o.getNode().isEmpty(),a=viewCacheGetCompleteEventSnap(t);(n.length>0||!t.eventCache.isFullyInitialized()||c&&!o.getNode().equals(a)||!o.getNode().getPriority().equals(a.getPriority()))&&n.push(changeValue(viewCacheGetCompleteEventSnap(e)))}}function viewProcessorGenerateEventCacheAfterServerEvent(t,e,n,o,c,a){const l=e.eventCache;if(writeTreeRefShadowingWrite(o,n)!=null)return e;{let b,v;if(pathIsEmpty(n))if(assert$p(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const A=viewCacheGetCompleteServerSnap(e),S=A instanceof ChildrenNode?A:ChildrenNode.EMPTY_NODE,M=writeTreeRefCalcCompleteEventChildren(o,S);b=t.filter.updateFullNode(e.eventCache.getNode(),M,a)}else{const A=writeTreeRefCalcCompleteEventCache(o,viewCacheGetCompleteServerSnap(e));b=t.filter.updateFullNode(e.eventCache.getNode(),A,a)}else{const A=pathGetFront(n);if(A===".priority"){assert$p(pathGetLength(n)===1,"Can't have a priority with additional path components");const S=l.getNode();v=e.serverCache.getNode();const M=writeTreeRefCalcEventCacheAfterServerOverwrite(o,n,S,v);M!=null?b=t.filter.updatePriority(S,M):b=l.getNode()}else{const S=pathPopFront(n);let M;if(l.isCompleteForChild(A)){v=e.serverCache.getNode();const B=writeTreeRefCalcEventCacheAfterServerOverwrite(o,n,l.getNode(),v);B!=null?M=l.getNode().getImmediateChild(A).updateChild(S,B):M=l.getNode().getImmediateChild(A)}else M=writeTreeRefCalcCompleteChild(o,A,e.serverCache);M!=null?b=t.filter.updateChild(l.getNode(),A,M,S,c,a):b=l.getNode()}}return viewCacheUpdateEventSnap(e,b,l.isFullyInitialized()||pathIsEmpty(n),t.filter.filtersNodes())}}function viewProcessorApplyServerOverwrite(t,e,n,o,c,a,l,b){const v=e.serverCache;let A;const S=l?t.filter:t.filter.getIndexedFilter();if(pathIsEmpty(n))A=S.updateFullNode(v.getNode(),o,null);else if(S.filtersNodes()&&!v.isFiltered()){const P=v.getNode().updateChild(n,o);A=S.updateFullNode(v.getNode(),P,null)}else{const P=pathGetFront(n);if(!v.isCompleteForPath(n)&&pathGetLength(n)>1)return e;const L=pathPopFront(n),U=v.getNode().getImmediateChild(P).updateChild(L,o);P===".priority"?A=S.updatePriority(v.getNode(),U):A=S.updateChild(v.getNode(),P,U,L,NO_COMPLETE_CHILD_SOURCE,null)}const M=viewCacheUpdateServerSnap(e,A,v.isFullyInitialized()||pathIsEmpty(n),S.filtersNodes()),B=new WriteTreeCompleteChildSource(c,M,a);return viewProcessorGenerateEventCacheAfterServerEvent(t,M,n,c,B,b)}function viewProcessorApplyUserOverwrite(t,e,n,o,c,a,l){const b=e.eventCache;let v,A;const S=new WriteTreeCompleteChildSource(c,e,a);if(pathIsEmpty(n))A=t.filter.updateFullNode(e.eventCache.getNode(),o,l),v=viewCacheUpdateEventSnap(e,A,!0,t.filter.filtersNodes());else{const M=pathGetFront(n);if(M===".priority")A=t.filter.updatePriority(e.eventCache.getNode(),o),v=viewCacheUpdateEventSnap(e,A,b.isFullyInitialized(),b.isFiltered());else{const B=pathPopFront(n),P=b.getNode().getImmediateChild(M);let L;if(pathIsEmpty(B))L=o;else{const F=S.getCompleteChild(M);F!=null?pathGetBack(B)===".priority"&&F.getChild(pathParent(B)).isEmpty()?L=F:L=F.updateChild(B,o):L=ChildrenNode.EMPTY_NODE}if(P.equals(L))v=e;else{const F=t.filter.updateChild(b.getNode(),M,L,B,S,l);v=viewCacheUpdateEventSnap(e,F,b.isFullyInitialized(),t.filter.filtersNodes())}}}return v}function viewProcessorCacheHasChild(t,e){return t.eventCache.isCompleteForChild(e)}function viewProcessorApplyUserMerge(t,e,n,o,c,a,l){let b=e;return o.foreach((v,A)=>{const S=pathChild(n,v);viewProcessorCacheHasChild(e,pathGetFront(S))&&(b=viewProcessorApplyUserOverwrite(t,b,S,A,c,a,l))}),o.foreach((v,A)=>{const S=pathChild(n,v);viewProcessorCacheHasChild(e,pathGetFront(S))||(b=viewProcessorApplyUserOverwrite(t,b,S,A,c,a,l))}),b}function viewProcessorApplyMerge(t,e,n){return n.foreach((o,c)=>{e=e.updateChild(o,c)}),e}function viewProcessorApplyServerMerge(t,e,n,o,c,a,l,b){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let v=e,A;pathIsEmpty(n)?A=o:A=new ImmutableTree(null).setTree(n,o);const S=e.serverCache.getNode();return A.children.inorderTraversal((M,B)=>{if(S.hasChild(M)){const P=e.serverCache.getNode().getImmediateChild(M),L=viewProcessorApplyMerge(t,P,B);v=viewProcessorApplyServerOverwrite(t,v,new Path(M),L,c,a,l,b)}}),A.children.inorderTraversal((M,B)=>{const P=!e.serverCache.isCompleteForChild(M)&&B.value===null;if(!S.hasChild(M)&&!P){const L=e.serverCache.getNode().getImmediateChild(M),F=viewProcessorApplyMerge(t,L,B);v=viewProcessorApplyServerOverwrite(t,v,new Path(M),F,c,a,l,b)}}),v}function viewProcessorAckUserWrite(t,e,n,o,c,a,l){if(writeTreeRefShadowingWrite(c,n)!=null)return e;const b=e.serverCache.isFiltered(),v=e.serverCache;if(o.value!=null){if(pathIsEmpty(n)&&v.isFullyInitialized()||v.isCompleteForPath(n))return viewProcessorApplyServerOverwrite(t,e,n,v.getNode().getChild(n),c,a,b,l);if(pathIsEmpty(n)){let A=new ImmutableTree(null);return v.getNode().forEachChild(KEY_INDEX,(S,M)=>{A=A.set(new Path(S),M)}),viewProcessorApplyServerMerge(t,e,n,A,c,a,b,l)}else return e}else{let A=new ImmutableTree(null);return o.foreach((S,M)=>{const B=pathChild(n,S);v.isCompleteForPath(B)&&(A=A.set(S,v.getNode().getChild(B)))}),viewProcessorApplyServerMerge(t,e,n,A,c,a,b,l)}}function viewProcessorListenComplete(t,e,n,o,c){const a=e.serverCache,l=viewCacheUpdateServerSnap(e,a.getNode(),a.isFullyInitialized()||pathIsEmpty(n),a.isFiltered());return viewProcessorGenerateEventCacheAfterServerEvent(t,l,n,o,NO_COMPLETE_CHILD_SOURCE,c)}function viewProcessorRevertUserWrite(t,e,n,o,c,a){let l;if(writeTreeRefShadowingWrite(o,n)!=null)return e;{const b=new WriteTreeCompleteChildSource(o,e,c),v=e.eventCache.getNode();let A;if(pathIsEmpty(n)||pathGetFront(n)===".priority"){let S;if(e.serverCache.isFullyInitialized())S=writeTreeRefCalcCompleteEventCache(o,viewCacheGetCompleteServerSnap(e));else{const M=e.serverCache.getNode();assert$p(M instanceof ChildrenNode,"serverChildren would be complete if leaf node"),S=writeTreeRefCalcCompleteEventChildren(o,M)}S=S,A=t.filter.updateFullNode(v,S,a)}else{const S=pathGetFront(n);let M=writeTreeRefCalcCompleteChild(o,S,e.serverCache);M==null&&e.serverCache.isCompleteForChild(S)&&(M=v.getImmediateChild(S)),M!=null?A=t.filter.updateChild(v,S,M,pathPopFront(n),b,a):e.eventCache.getNode().hasChild(S)?A=t.filter.updateChild(v,S,ChildrenNode.EMPTY_NODE,pathPopFront(n),b,a):A=v,A.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=writeTreeRefCalcCompleteEventCache(o,viewCacheGetCompleteServerSnap(e)),l.isLeafNode()&&(A=t.filter.updateFullNode(A,l,a)))}return l=e.serverCache.isFullyInitialized()||writeTreeRefShadowingWrite(o,newEmptyPath())!=null,viewCacheUpdateEventSnap(e,A,l,t.filter.filtersNodes())}}function viewGetCompleteServerCache(t,e){const n=viewCacheGetCompleteServerSnap(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!pathIsEmpty(e)&&!n.getImmediateChild(pathGetFront(e)).isEmpty())?n.getChild(e):null}function viewApplyOperation(t,e,n,o){e.type===OperationType.MERGE&&e.source.queryId!==null&&(assert$p(viewCacheGetCompleteServerSnap(t.viewCache_),"We should always have a full cache before handling merges"),assert$p(viewCacheGetCompleteEventSnap(t.viewCache_),"Missing event cache, even though we have a server cache"));const c=t.viewCache_,a=viewProcessorApplyOperation(t.processor_,c,e,n,o);return viewProcessorAssertIndexed(t.processor_,a.viewCache),assert$p(a.viewCache.serverCache.isFullyInitialized()||!c.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=a.viewCache,viewGenerateEventsForChanges_(t,a.changes,a.viewCache.eventCache.getNode(),null)}function viewGenerateEventsForChanges_(t,e,n,o){const c=o?[o]:t.eventRegistrations_;return eventGeneratorGenerateEventsForChanges(t.eventGenerator_,e,n,c)}let referenceConstructor$1;function syncPointSetReferenceConstructor(t){assert$p(!referenceConstructor$1,"__referenceConstructor has already been defined"),referenceConstructor$1=t}function syncPointApplyOperation(t,e,n,o){const c=e.source.queryId;if(c!==null){const a=t.views.get(c);return assert$p(a!=null,"SyncTree gave us an op for an invalid query."),viewApplyOperation(a,e,n,o)}else{let a=[];for(const l of t.views.values())a=a.concat(viewApplyOperation(l,e,n,o));return a}}function syncPointGetCompleteServerCache(t,e){let n=null;for(const o of t.views.values())n=n||viewGetCompleteServerCache(o,e);return n}let referenceConstructor;function syncTreeSetReferenceConstructor(t){assert$p(!referenceConstructor,"__referenceConstructor has already been defined"),referenceConstructor=t}class SyncTree{constructor(e){this.listenProvider_=e,this.syncPointTree_=new ImmutableTree(null),this.pendingWriteTree_=newWriteTree(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function syncTreeApplyUserOverwrite(t,e,n,o,c){return writeTreeAddOverwrite(t.pendingWriteTree_,e,n,o,c),c?syncTreeApplyOperationToSyncPoints_(t,new Overwrite(newOperationSourceUser(),e,n)):[]}function syncTreeAckUserWrite(t,e,n=!1){const o=writeTreeGetWrite(t.pendingWriteTree_,e);if(writeTreeRemoveWrite(t.pendingWriteTree_,e)){let a=new ImmutableTree(null);return o.snap!=null?a=a.set(newEmptyPath(),!0):each(o.children,l=>{a=a.set(new Path(l),!0)}),syncTreeApplyOperationToSyncPoints_(t,new AckUserWrite(o.path,a,n))}else return[]}function syncTreeApplyServerOverwrite(t,e,n){return syncTreeApplyOperationToSyncPoints_(t,new Overwrite(newOperationSourceServer(),e,n))}function syncTreeApplyServerMerge(t,e,n){const o=ImmutableTree.fromObject(n);return syncTreeApplyOperationToSyncPoints_(t,new Merge(newOperationSourceServer(),e,o))}function syncTreeApplyTaggedQueryOverwrite(t,e,n,o){const c=syncTreeQueryKeyForTag_(t,o);if(c!=null){const a=syncTreeParseQueryKey_(c),l=a.path,b=a.queryId,v=newRelativePath(l,e),A=new Overwrite(newOperationSourceServerTaggedQuery(b),v,n);return syncTreeApplyTaggedOperation_(t,l,A)}else return[]}function syncTreeApplyTaggedQueryMerge(t,e,n,o){const c=syncTreeQueryKeyForTag_(t,o);if(c){const a=syncTreeParseQueryKey_(c),l=a.path,b=a.queryId,v=newRelativePath(l,e),A=ImmutableTree.fromObject(n),S=new Merge(newOperationSourceServerTaggedQuery(b),v,A);return syncTreeApplyTaggedOperation_(t,l,S)}else return[]}function syncTreeCalcCompleteEventCache(t,e,n){const c=t.pendingWriteTree_,a=t.syncPointTree_.findOnPath(e,(l,b)=>{const v=newRelativePath(l,e),A=syncPointGetCompleteServerCache(b,v);if(A)return A});return writeTreeCalcCompleteEventCache(c,e,a,n,!0)}function syncTreeApplyOperationToSyncPoints_(t,e){return syncTreeApplyOperationHelper_(e,t.syncPointTree_,null,writeTreeChildWrites(t.pendingWriteTree_,newEmptyPath()))}function syncTreeApplyOperationHelper_(t,e,n,o){if(pathIsEmpty(t.path))return syncTreeApplyOperationDescendantsHelper_(t,e,n,o);{const c=e.get(newEmptyPath());n==null&&c!=null&&(n=syncPointGetCompleteServerCache(c,newEmptyPath()));let a=[];const l=pathGetFront(t.path),b=t.operationForChild(l),v=e.children.get(l);if(v&&b){const A=n?n.getImmediateChild(l):null,S=writeTreeRefChild(o,l);a=a.concat(syncTreeApplyOperationHelper_(b,v,A,S))}return c&&(a=a.concat(syncPointApplyOperation(c,t,o,n))),a}}function syncTreeApplyOperationDescendantsHelper_(t,e,n,o){const c=e.get(newEmptyPath());n==null&&c!=null&&(n=syncPointGetCompleteServerCache(c,newEmptyPath()));let a=[];return e.children.inorderTraversal((l,b)=>{const v=n?n.getImmediateChild(l):null,A=writeTreeRefChild(o,l),S=t.operationForChild(l);S&&(a=a.concat(syncTreeApplyOperationDescendantsHelper_(S,b,v,A)))}),c&&(a=a.concat(syncPointApplyOperation(c,t,o,n))),a}function syncTreeQueryKeyForTag_(t,e){return t.tagToQueryMap.get(e)}function syncTreeParseQueryKey_(t){const e=t.indexOf("$");return assert$p(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Path(t.substr(0,e))}}function syncTreeApplyTaggedOperation_(t,e,n){const o=t.syncPointTree_.get(e);assert$p(o,"Missing sync point for query tag that we're tracking");const c=writeTreeChildWrites(t.pendingWriteTree_,e);return syncPointApplyOperation(o,n,c,null)}class ExistingValueProvider{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new ExistingValueProvider(n)}node(){return this.node_}}class DeferredValueProvider{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=pathChild(this.path_,e);return new DeferredValueProvider(this.syncTree_,n)}node(){return syncTreeCalcCompleteEventCache(this.syncTree_,this.path_)}}const generateWithValues=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},resolveDeferredLeafValue=function(t,e,n){if(!t||typeof t!="object")return t;if(assert$p(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return resolveScalarDeferredValue(t[".sv"],e,n);if(typeof t[".sv"]=="object")return resolveComplexDeferredValue(t[".sv"],e);assert$p(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},resolveScalarDeferredValue=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:assert$p(!1,"Unexpected server value: "+t)}},resolveComplexDeferredValue=function(t,e,n){t.hasOwnProperty("increment")||assert$p(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const o=t.increment;typeof o!="number"&&assert$p(!1,"Unexpected increment value: "+o);const c=e.node();if(assert$p(c!==null&&typeof c<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!c.isLeafNode())return o;const l=c.getValue();return typeof l!="number"?o:l+o},resolveDeferredValueTree=function(t,e,n,o){return resolveDeferredValue(e,new DeferredValueProvider(n,t),o)},resolveDeferredValueSnapshot=function(t,e,n){return resolveDeferredValue(t,new ExistingValueProvider(e),n)};function resolveDeferredValue(t,e,n){const o=t.getPriority().val(),c=resolveDeferredLeafValue(o,e.getImmediateChild(".priority"),n);let a;if(t.isLeafNode()){const l=t,b=resolveDeferredLeafValue(l.getValue(),e,n);return b!==l.getValue()||c!==l.getPriority().val()?new LeafNode(b,nodeFromJSON(c)):t}else{const l=t;return a=l,c!==l.getPriority().val()&&(a=a.updatePriority(new LeafNode(c))),l.forEachChild(PRIORITY_INDEX,(b,v)=>{const A=resolveDeferredValue(v,e.getImmediateChild(b),n);A!==v&&(a=a.updateImmediateChild(b,A))}),a}}class Tree{constructor(e="",n=null,o={children:{},childCount:0}){this.name=e,this.parent=n,this.node=o}}function treeSubTree(t,e){let n=e instanceof Path?e:new Path(e),o=t,c=pathGetFront(n);for(;c!==null;){const a=safeGet(o.node.children,c)||{children:{},childCount:0};o=new Tree(c,o,a),n=pathPopFront(n),c=pathGetFront(n)}return o}function treeGetValue(t){return t.node.value}function treeSetValue(t,e){t.node.value=e,treeUpdateParents(t)}function treeHasChildren(t){return t.node.childCount>0}function treeIsEmpty(t){return treeGetValue(t)===void 0&&!treeHasChildren(t)}function treeForEachChild(t,e){each(t.node.children,(n,o)=>{e(new Tree(n,t,o))})}function treeForEachDescendant(t,e,n,o){n&&!o&&e(t),treeForEachChild(t,c=>{treeForEachDescendant(c,e,!0,o)}),n&&o&&e(t)}function treeForEachAncestor(t,e,n){let o=n?t:t.parent;for(;o!==null;){if(e(o))return!0;o=o.parent}return!1}function treeGetPath(t){return new Path(t.parent===null?t.name:treeGetPath(t.parent)+"/"+t.name)}function treeUpdateParents(t){t.parent!==null&&treeUpdateChild(t.parent,t.name,t)}function treeUpdateChild(t,e,n){const o=treeIsEmpty(n),c=contains(t.node.children,e);o&&c?(delete t.node.children[e],t.node.childCount--,treeUpdateParents(t)):!o&&!c&&(t.node.children[e]=n.node,t.node.childCount++,treeUpdateParents(t))}const INVALID_KEY_REGEX_=/[\[\].#$\/\u0000-\u001F\u007F]/,INVALID_PATH_REGEX_=/[\[\].#$\u0000-\u001F\u007F]/,MAX_LEAF_SIZE_=10*1024*1024,isValidKey=function(t){return typeof t=="string"&&t.length!==0&&!INVALID_KEY_REGEX_.test(t)},isValidPathString=function(t){return typeof t=="string"&&t.length!==0&&!INVALID_PATH_REGEX_.test(t)},isValidRootPathString=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),isValidPathString(t)},validateFirebaseDataArg=function(t,e,n,o){o&&e===void 0||validateFirebaseData(errorPrefix(t,"value"),e,n)},validateFirebaseData=function(t,e,n){const o=n instanceof Path?new ValidationPath(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+validationPathToErrorString(o));if(typeof e=="function")throw new Error(t+"contains a function "+validationPathToErrorString(o)+" with contents = "+e.toString());if(isInvalidJSONNumber(e))throw new Error(t+"contains "+e.toString()+" "+validationPathToErrorString(o));if(typeof e=="string"&&e.length>MAX_LEAF_SIZE_/3&&stringLength(e)>MAX_LEAF_SIZE_)throw new Error(t+"contains a string greater than "+MAX_LEAF_SIZE_+" utf8 bytes "+validationPathToErrorString(o)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let c=!1,a=!1;if(each(e,(l,b)=>{if(l===".value")c=!0;else if(l!==".priority"&&l!==".sv"&&(a=!0,!isValidKey(l)))throw new Error(t+" contains an invalid key ("+l+") "+validationPathToErrorString(o)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);validationPathPush(o,l),validateFirebaseData(t,b,o),validationPathPop(o)}),c&&a)throw new Error(t+' contains ".value" child '+validationPathToErrorString(o)+" in addition to actual children.")}},validatePathString=function(t,e,n,o){if(!(o&&n===void 0)&&!isValidPathString(n))throw new Error(errorPrefix(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},validateRootPathString=function(t,e,n,o){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),validatePathString(t,e,n,o)},validateWritablePath=function(t,e){if(pathGetFront(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},validateUrl=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!isValidKey(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!isValidRootPathString(n))throw new Error(errorPrefix(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};class EventQueue{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function eventQueueQueueEvents(t,e){let n=null;for(let o=0;o<e.length;o++){const c=e[o],a=c.getPath();n!==null&&!pathEquals(a,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:a}),n.events.push(c)}n&&t.eventLists_.push(n)}function eventQueueRaiseEventsForChangedPath(t,e,n){eventQueueQueueEvents(t,n),eventQueueRaiseQueuedEventsMatchingPredicate(t,o=>pathContains(o,e)||pathContains(e,o))}function eventQueueRaiseQueuedEventsMatchingPredicate(t,e){t.recursionDepth_++;let n=!0;for(let o=0;o<t.eventLists_.length;o++){const c=t.eventLists_[o];if(c){const a=c.path;e(a)?(eventListRaise(t.eventLists_[o]),t.eventLists_[o]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function eventListRaise(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const o=n.getEventRunner();logger&&log("event: "+n.toString()),exceptionGuard(o)}}}const INTERRUPT_REASON="repo_interrupt",MAX_TRANSACTION_RETRIES=25;class Repo{constructor(e,n,o,c){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=o,this.appCheckProvider_=c,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new EventQueue,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=newSparseSnapshotTree(),this.transactionQueueTree_=new Tree,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function repoStart(t,e,n){if(t.stats_=statsManagerGetCollection(t.repoInfo_),t.forceRestClient_||beingCrawled())t.server_=new ReadonlyRestClient(t.repoInfo_,(o,c,a,l)=>{repoOnDataUpdate(t,o,c,a,l)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>repoOnConnectStatus(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{stringify$2(n)}catch(o){throw new Error("Invalid authOverride provided: "+o)}}t.persistentConnection_=new PersistentConnection(t.repoInfo_,e,(o,c,a,l)=>{repoOnDataUpdate(t,o,c,a,l)},o=>{repoOnConnectStatus(t,o)},o=>{repoOnServerInfoUpdate(t,o)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(o=>{t.server_.refreshAuthToken(o)}),t.appCheckProvider_.addTokenChangeListener(o=>{t.server_.refreshAppCheckToken(o.token)}),t.statsReporter_=statsManagerGetOrCreateReporter(t.repoInfo_,()=>new StatsReporter(t.stats_,t.server_)),t.infoData_=new SnapshotHolder,t.infoSyncTree_=new SyncTree({startListening:(o,c,a,l)=>{let b=[];const v=t.infoData_.getNode(o._path);return v.isEmpty()||(b=syncTreeApplyServerOverwrite(t.infoSyncTree_,o._path,v),setTimeout(()=>{l("ok")},0)),b},stopListening:()=>{}}),repoUpdateInfo(t,"connected",!1),t.serverSyncTree_=new SyncTree({startListening:(o,c,a,l)=>(t.server_.listen(o,a,c,(b,v)=>{const A=l(b,v);eventQueueRaiseEventsForChangedPath(t.eventQueue_,o._path,A)}),[]),stopListening:(o,c)=>{t.server_.unlisten(o,c)}})}function repoServerTime(t){const n=t.infoData_.getNode(new Path(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function repoGenerateServerValues(t){return generateWithValues({timestamp:repoServerTime(t)})}function repoOnDataUpdate(t,e,n,o,c){t.dataUpdateCount++;const a=new Path(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let l=[];if(c)if(o){const v=map(n,A=>nodeFromJSON(A));l=syncTreeApplyTaggedQueryMerge(t.serverSyncTree_,a,v,c)}else{const v=nodeFromJSON(n);l=syncTreeApplyTaggedQueryOverwrite(t.serverSyncTree_,a,v,c)}else if(o){const v=map(n,A=>nodeFromJSON(A));l=syncTreeApplyServerMerge(t.serverSyncTree_,a,v)}else{const v=nodeFromJSON(n);l=syncTreeApplyServerOverwrite(t.serverSyncTree_,a,v)}let b=a;l.length>0&&(b=repoRerunTransactions(t,a)),eventQueueRaiseEventsForChangedPath(t.eventQueue_,b,l)}function repoOnConnectStatus(t,e){repoUpdateInfo(t,"connected",e),e===!1&&repoRunOnDisconnectEvents(t)}function repoOnServerInfoUpdate(t,e){each(e,(n,o)=>{repoUpdateInfo(t,n,o)})}function repoUpdateInfo(t,e,n){const o=new Path("/.info/"+e),c=nodeFromJSON(n);t.infoData_.updateSnapshot(o,c);const a=syncTreeApplyServerOverwrite(t.infoSyncTree_,o,c);eventQueueRaiseEventsForChangedPath(t.eventQueue_,o,a)}function repoGetNextWriteId(t){return t.nextWriteId_++}function repoSetWithPriority(t,e,n,o,c){repoLog(t,"set",{path:e.toString(),value:n,priority:o});const a=repoGenerateServerValues(t),l=nodeFromJSON(n,o),b=syncTreeCalcCompleteEventCache(t.serverSyncTree_,e),v=resolveDeferredValueSnapshot(l,b,a),A=repoGetNextWriteId(t),S=syncTreeApplyUserOverwrite(t.serverSyncTree_,e,v,A,!0);eventQueueQueueEvents(t.eventQueue_,S),t.server_.put(e.toString(),l.val(!0),(B,P)=>{const L=B==="ok";L||warn("set at "+e+" failed: "+B);const F=syncTreeAckUserWrite(t.serverSyncTree_,A,!L);eventQueueRaiseEventsForChangedPath(t.eventQueue_,e,F),repoCallOnCompleteCallback(t,c,B,P)});const M=repoAbortTransactions(t,e);repoRerunTransactions(t,M),eventQueueRaiseEventsForChangedPath(t.eventQueue_,M,[])}function repoRunOnDisconnectEvents(t){repoLog(t,"onDisconnectEvents");const e=repoGenerateServerValues(t),n=newSparseSnapshotTree();sparseSnapshotTreeForEachTree(t.onDisconnect_,newEmptyPath(),(c,a)=>{const l=resolveDeferredValueTree(c,a,t.serverSyncTree_,e);sparseSnapshotTreeRemember(n,c,l)});let o=[];sparseSnapshotTreeForEachTree(n,newEmptyPath(),(c,a)=>{o=o.concat(syncTreeApplyServerOverwrite(t.serverSyncTree_,c,a));const l=repoAbortTransactions(t,c);repoRerunTransactions(t,l)}),t.onDisconnect_=newSparseSnapshotTree(),eventQueueRaiseEventsForChangedPath(t.eventQueue_,newEmptyPath(),o)}function repoInterrupt(t){t.persistentConnection_&&t.persistentConnection_.interrupt(INTERRUPT_REASON)}function repoLog(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),log(n,...e)}function repoCallOnCompleteCallback(t,e,n,o){e&&exceptionGuard(()=>{if(n==="ok")e(null);else{const c=(n||"error").toUpperCase();let a=c;o&&(a+=": "+o);const l=new Error(a);l.code=c,e(l)}})}function repoGetLatestState(t,e,n){return syncTreeCalcCompleteEventCache(t.serverSyncTree_,e,n)||ChildrenNode.EMPTY_NODE}function repoSendReadyTransactions(t,e=t.transactionQueueTree_){if(e||repoPruneCompletedTransactionsBelowNode(t,e),treeGetValue(e)){const n=repoBuildTransactionQueue(t,e);assert$p(n.length>0,"Sending zero length transaction queue"),n.every(c=>c.status===0)&&repoSendTransactionQueue(t,treeGetPath(e),n)}else treeHasChildren(e)&&treeForEachChild(e,n=>{repoSendReadyTransactions(t,n)})}function repoSendTransactionQueue(t,e,n){const o=n.map(A=>A.currentWriteId),c=repoGetLatestState(t,e,o);let a=c;const l=c.hash();for(let A=0;A<n.length;A++){const S=n[A];assert$p(S.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),S.status=1,S.retryCount++;const M=newRelativePath(e,S.path);a=a.updateChild(M,S.currentOutputSnapshotRaw)}const b=a.val(!0),v=e;t.server_.put(v.toString(),b,A=>{repoLog(t,"transaction put response",{path:v.toString(),status:A});let S=[];if(A==="ok"){const M=[];for(let B=0;B<n.length;B++)n[B].status=2,S=S.concat(syncTreeAckUserWrite(t.serverSyncTree_,n[B].currentWriteId)),n[B].onComplete&&M.push(()=>n[B].onComplete(null,!0,n[B].currentOutputSnapshotResolved)),n[B].unwatcher();repoPruneCompletedTransactionsBelowNode(t,treeSubTree(t.transactionQueueTree_,e)),repoSendReadyTransactions(t,t.transactionQueueTree_),eventQueueRaiseEventsForChangedPath(t.eventQueue_,e,S);for(let B=0;B<M.length;B++)exceptionGuard(M[B])}else{if(A==="datastale")for(let M=0;M<n.length;M++)n[M].status===3?n[M].status=4:n[M].status=0;else{warn("transaction at "+v.toString()+" failed: "+A);for(let M=0;M<n.length;M++)n[M].status=4,n[M].abortReason=A}repoRerunTransactions(t,e)}},l)}function repoRerunTransactions(t,e){const n=repoGetAncestorTransactionNode(t,e),o=treeGetPath(n),c=repoBuildTransactionQueue(t,n);return repoRerunTransactionQueue(t,c,o),o}function repoRerunTransactionQueue(t,e,n){if(e.length===0)return;const o=[];let c=[];const l=e.filter(b=>b.status===0).map(b=>b.currentWriteId);for(let b=0;b<e.length;b++){const v=e[b],A=newRelativePath(n,v.path);let S=!1,M;if(assert$p(A!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),v.status===4)S=!0,M=v.abortReason,c=c.concat(syncTreeAckUserWrite(t.serverSyncTree_,v.currentWriteId,!0));else if(v.status===0)if(v.retryCount>=MAX_TRANSACTION_RETRIES)S=!0,M="maxretry",c=c.concat(syncTreeAckUserWrite(t.serverSyncTree_,v.currentWriteId,!0));else{const B=repoGetLatestState(t,v.path,l);v.currentInputSnapshot=B;const P=e[b].update(B.val());if(P!==void 0){validateFirebaseData("transaction failed: Data returned ",P,v.path);let L=nodeFromJSON(P);typeof P=="object"&&P!=null&&contains(P,".priority")||(L=L.updatePriority(B.getPriority()));const U=v.currentWriteId,q=repoGenerateServerValues(t),X=resolveDeferredValueSnapshot(L,B,q);v.currentOutputSnapshotRaw=L,v.currentOutputSnapshotResolved=X,v.currentWriteId=repoGetNextWriteId(t),l.splice(l.indexOf(U),1),c=c.concat(syncTreeApplyUserOverwrite(t.serverSyncTree_,v.path,X,v.currentWriteId,v.applyLocally)),c=c.concat(syncTreeAckUserWrite(t.serverSyncTree_,U,!0))}else S=!0,M="nodata",c=c.concat(syncTreeAckUserWrite(t.serverSyncTree_,v.currentWriteId,!0))}eventQueueRaiseEventsForChangedPath(t.eventQueue_,n,c),c=[],S&&(e[b].status=2,function(B){setTimeout(B,Math.floor(0))}(e[b].unwatcher),e[b].onComplete&&(M==="nodata"?o.push(()=>e[b].onComplete(null,!1,e[b].currentInputSnapshot)):o.push(()=>e[b].onComplete(new Error(M),!1,null))))}repoPruneCompletedTransactionsBelowNode(t,t.transactionQueueTree_);for(let b=0;b<o.length;b++)exceptionGuard(o[b]);repoSendReadyTransactions(t,t.transactionQueueTree_)}function repoGetAncestorTransactionNode(t,e){let n,o=t.transactionQueueTree_;for(n=pathGetFront(e);n!==null&&treeGetValue(o)===void 0;)o=treeSubTree(o,n),e=pathPopFront(e),n=pathGetFront(e);return o}function repoBuildTransactionQueue(t,e){const n=[];return repoAggregateTransactionQueuesForNode(t,e,n),n.sort((o,c)=>o.order-c.order),n}function repoAggregateTransactionQueuesForNode(t,e,n){const o=treeGetValue(e);if(o)for(let c=0;c<o.length;c++)n.push(o[c]);treeForEachChild(e,c=>{repoAggregateTransactionQueuesForNode(t,c,n)})}function repoPruneCompletedTransactionsBelowNode(t,e){const n=treeGetValue(e);if(n){let o=0;for(let c=0;c<n.length;c++)n[c].status!==2&&(n[o]=n[c],o++);n.length=o,treeSetValue(e,n.length>0?n:void 0)}treeForEachChild(e,o=>{repoPruneCompletedTransactionsBelowNode(t,o)})}function repoAbortTransactions(t,e){const n=treeGetPath(repoGetAncestorTransactionNode(t,e)),o=treeSubTree(t.transactionQueueTree_,e);return treeForEachAncestor(o,c=>{repoAbortTransactionsOnNode(t,c)}),repoAbortTransactionsOnNode(t,o),treeForEachDescendant(o,c=>{repoAbortTransactionsOnNode(t,c)}),n}function repoAbortTransactionsOnNode(t,e){const n=treeGetValue(e);if(n){const o=[];let c=[],a=-1;for(let l=0;l<n.length;l++)n[l].status===3||(n[l].status===1?(assert$p(a===l-1,"All SENT items should be at beginning of queue."),a=l,n[l].status=3,n[l].abortReason="set"):(assert$p(n[l].status===0,"Unexpected transaction status in abort"),n[l].unwatcher(),c=c.concat(syncTreeAckUserWrite(t.serverSyncTree_,n[l].currentWriteId,!0)),n[l].onComplete&&o.push(n[l].onComplete.bind(null,new Error("set"),!1,null))));a===-1?treeSetValue(e,void 0):n.length=a+1,eventQueueRaiseEventsForChangedPath(t.eventQueue_,treeGetPath(e),c);for(let l=0;l<o.length;l++)exceptionGuard(o[l])}}function decodePath(t){let e="";const n=t.split("/");for(let o=0;o<n.length;o++)if(n[o].length>0){let c=n[o];try{c=decodeURIComponent(c.replace(/\+/g," "))}catch{}e+="/"+c}return e}function decodeQuery(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const o=n.split("=");o.length===2?e[decodeURIComponent(o[0])]=decodeURIComponent(o[1]):warn(`Invalid query segment '${n}' in query '${t}'`)}return e}const parseRepoInfo=function(t,e){const n=parseDatabaseURL(t),o=n.namespace;n.domain==="firebase.com"&&fatal(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!o||o==="undefined")&&n.domain!=="localhost"&&fatal("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||warnIfPageIsSecure();const c=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new RepoInfo(n.host,n.secure,o,c,e,"",o!==n.subdomain),path:new Path(n.pathString)}},parseDatabaseURL=function(t){let e="",n="",o="",c="",a="",l=!0,b="https",v=443;if(typeof t=="string"){let A=t.indexOf("//");A>=0&&(b=t.substring(0,A-1),t=t.substring(A+2));let S=t.indexOf("/");S===-1&&(S=t.length);let M=t.indexOf("?");M===-1&&(M=t.length),e=t.substring(0,Math.min(S,M)),S<M&&(c=decodePath(t.substring(S,M)));const B=decodeQuery(t.substring(Math.min(t.length,M)));A=e.indexOf(":"),A>=0?(l=b==="https"||b==="wss",v=parseInt(e.substring(A+1),10)):A=e.length;const P=e.slice(0,A);if(P.toLowerCase()==="localhost")n="localhost";else if(P.split(".").length<=2)n=P;else{const L=e.indexOf(".");o=e.substring(0,L).toLowerCase(),n=e.substring(L+1),a=o}"ns"in B&&(a=B.ns)}return{host:e,port:v,domain:n,subdomain:o,secure:l,scheme:b,pathString:c,namespace:a}};class QueryImpl{constructor(e,n,o,c){this._repo=e,this._path=n,this._queryParams=o,this._orderByCalled=c}get key(){return pathIsEmpty(this._path)?null:pathGetBack(this._path)}get ref(){return new ReferenceImpl(this._repo,this._path)}get _queryIdentifier(){const e=queryParamsGetQueryObject(this._queryParams),n=ObjectToUniqueKey(e);return n==="{}"?"default":n}get _queryObject(){return queryParamsGetQueryObject(this._queryParams)}isEqual(e){if(e=getModularInstance(e),!(e instanceof QueryImpl))return!1;const n=this._repo===e._repo,o=pathEquals(this._path,e._path),c=this._queryIdentifier===e._queryIdentifier;return n&&o&&c}toJSON(){return this.toString()}toString(){return this._repo.toString()+pathToUrlEncodedString(this._path)}}class ReferenceImpl extends QueryImpl{constructor(e,n){super(e,n,new QueryParams,!1)}get parent(){const e=pathParent(this._path);return e===null?null:new ReferenceImpl(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}function ref(t,e){return t=getModularInstance(t),t._checkNotDeleted("ref"),e!==void 0?child(t._root,e):t._root}function child(t,e){return t=getModularInstance(t),pathGetFront(t._path)===null?validateRootPathString("child","path",e,!1):validatePathString("child","path",e,!1),new ReferenceImpl(t._repo,pathChild(t._path,e))}function set$1(t,e){t=getModularInstance(t),validateWritablePath("set",t._path),validateFirebaseDataArg("set",e,t._path,!1);const n=new Deferred;return repoSetWithPriority(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}syncPointSetReferenceConstructor(ReferenceImpl);syncTreeSetReferenceConstructor(ReferenceImpl);const FIREBASE_DATABASE_EMULATOR_HOST_VAR="FIREBASE_DATABASE_EMULATOR_HOST",repos={};let useRestClient=!1;function repoManagerApplyEmulatorSettings(t,e,n,o){t.repoInfo_=new RepoInfo(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),o&&(t.authTokenProvider_=o)}function repoManagerDatabaseFromApp(t,e,n,o,c){let a=o||t.options.databaseURL;a===void 0&&(t.options.projectId||fatal("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),log("Using default host for project ",t.options.projectId),a=`${t.options.projectId}-default-rtdb.firebaseio.com`);let l=parseRepoInfo(a,c),b=l.repoInfo,v,A;typeof process$1<"u"&&define_process_env_default&&(A=define_process_env_default[FIREBASE_DATABASE_EMULATOR_HOST_VAR]),A?(v=!0,a=`http://${A}?ns=${b.namespace}`,l=parseRepoInfo(a,c),b=l.repoInfo):v=!l.repoInfo.secure;const S=c&&v?new EmulatorTokenProvider(EmulatorTokenProvider.OWNER):new FirebaseAuthTokenProvider(t.name,t.options,e);validateUrl("Invalid Firebase Database URL",l),pathIsEmpty(l.path)||fatal("Database URL must point to the root of a Firebase Database (not including a child path).");const M=repoManagerCreateRepo(b,t,S,new AppCheckTokenProvider(t.name,n));return new Database(M,t)}function repoManagerDeleteRepo(t,e){const n=repos[e];(!n||n[t.key]!==t)&&fatal(`Database ${e}(${t.repoInfo_}) has already been deleted.`),repoInterrupt(t),delete n[t.key]}function repoManagerCreateRepo(t,e,n,o){let c=repos[e.name];c||(c={},repos[e.name]=c);let a=c[t.toURLString()];return a&&fatal("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new Repo(t,useRestClient,n,o),c[t.toURLString()]=a,a}class Database{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(repoStart(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ReferenceImpl(this._repo,newEmptyPath())),this._rootInternal}_delete(){return this._rootInternal!==null&&(repoManagerDeleteRepo(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&fatal("Cannot call "+e+" on a deleted database.")}}function getDatabase(t=getApp(),e){const n=_getProvider(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const o=getDefaultEmulatorHostnameAndPort("database");o&&connectDatabaseEmulator(n,...o)}return n}function connectDatabaseEmulator(t,e,n,o={}){t=getModularInstance(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&fatal("Cannot call useEmulator() after instance has already been initialized.");const c=t._repoInternal;let a;if(c.repoInfo_.nodeAdmin)o.mockUserToken&&fatal('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new EmulatorTokenProvider(EmulatorTokenProvider.OWNER);else if(o.mockUserToken){const l=typeof o.mockUserToken=="string"?o.mockUserToken:createMockUserToken(o.mockUserToken,t.app.options.projectId);a=new EmulatorTokenProvider(l)}repoManagerApplyEmulatorSettings(c,e,n,a)}function registerDatabase(t){setSDKVersion(SDK_VERSION$1),_registerComponent(new Component("database",(e,{instanceIdentifier:n})=>{const o=e.getProvider("app").getImmediate(),c=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return repoManagerDatabaseFromApp(o,c,a,n)},"PUBLIC").setMultipleInstances(!0)),registerVersion(name$1,version$1,t),registerVersion(name$1,version$1,"esm2017")}PersistentConnection.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};PersistentConnection.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};registerDatabase();const _params={db:void 0,ops:{usersCollectionName:"_fbweb3Connect-users"}},initialize=(t,e)=>{_params.db=getDatabase(t),e&&(_params.ops=Object.freeze({..._params.ops,...e})),Object.freeze(_params),Object.seal(_params)},set=async(t,e)=>{if(!_params.db)throw new Error("Database not initialized");const n=ref(_params.db,`${_params.ops.usersCollectionName}/${t}`);return await set$1(n,e)};class FirebaseWeb3Connect{_apiKey;_ops;_secret;_uid;_cloudBackupEnabled;_wallet;_wallets=[];get provider(){return this._wallet?.provider}get userInfo(){return this._wallet?{address:this._wallet.address,publicKey:this._wallet.publicKey,chainId:this._wallet.chainId,uid:this._uid,cloudBackupEnabled:this._cloudBackupEnabled}:null}get wallet(){return this._wallet}constructor(e,n,o){if(this._apiKey=n,this._ops={enabledSigninMethods:DEFAULT_SIGNIN_METHODS,...o},FirebaseAuthProvider.initialize(e),storageService.initialize(this._ops?.storageService||storageProvider),initialize(e.app),!window||!window.HTMLDialogElement)throw new Error("[ERROR] FirebaseWeb3Connect: HTMLDialogElement not supported");Logger$1.log("[INFO] FirebaseWeb3Connect initialized and ready!",{config:this._ops,mode:"production",apiKey:this._apiKey,auth:e})}static isConnectWithLink(){return!!window.location.search.includes(KEYS.URL_QUERYPARAM_FINISH_SIGNUP)}static connectWithLink(){if(this.isConnectWithLink())return FirebaseAuthProvider.signInWithLink()}async connectWithUI(e=!1){const n=await storageService.getItem(KEYS.STORAGE_AUTH_METHOD_KEY),o=await setupSigninDialogElement(document.body,{isLightMode:e,enabledSigninMethods:n&&n!==SigninMethod.Wallet?[n,SigninMethod.Wallet]:this._ops?.enabledSigninMethods,integrator:this._ops?.dialogUI?.integrator,logoUrl:this._ops?.dialogUI?.logoUrl});o.showModal();try{const{password:v,isAnonymous:A=!1,uid:S,authMethod:M}=await addAndWaitUIEventsResult(o)||{};if(M&&M!==SigninMethod.Wallet&&await storageService.setItem(KEYS.STORAGE_AUTH_METHOD_KEY,M),Logger$1.log("[INFO] Closing dialog",{password:v,isAnonymous:A,uid:S}),!S&&!A)return o.hideModal(),await new Promise(B=>setTimeout(B,225)),o.remove(),this.userInfo;if(!S&&A){await this._initWallets({uid:"",isAnonymous:A});const{uid:B}=await authWithExternalWallet();return this._uid=B,await o.toggleSpinnerAsCheck(),o.hideModal(),await new Promise(P=>setTimeout(P,225)),o?.remove(),this.userInfo}if(this._secret=v,this._uid=S||this._uid,!this._uid)throw new Error("User not connected");if(A)throw new Error("External wallet have to be handled to be setup.");await this._initWallets({isAnonymous:A,uid:this._uid})}catch(v){const A=v?.message||"An error occured while connecting";throw await o.toggleSpinnerAsCross(A),v}const c=localStorage.getItem(KEYS.STORAGE_BACKUP_KEY);this.userInfo&&c&&this._secret&&await storageService.executeBackup(!!c,this._secret);const a=await storageService.getItem(KEYS.STORAGE_SKIP_BACKUP_KEY),l=a?parseInt(a):Date.now(),b=Date.now()-l>MAX_SKIP_BACKUP_TIME;if(this.userInfo&&b){const{withEncryption:v,skip:A}=await o.promptBackup();A||await storageService.executeBackup(!!v,this._secret)}return await o.toggleSpinnerAsCheck(),o.hideModal(),await new Promise(v=>setTimeout(v,225)),o?.remove(),this.userInfo}async signout(e){const n=!this.wallet?.publicKey;if(e&&!n){const o=await setupSigninDialogElement(document.body,{isLightMode:!0,enabledSigninMethods:[SigninMethod.Wallet],integrator:this._ops?.dialogUI?.integrator,logoUrl:this._ops?.dialogUI?.logoUrl});(o.shadowRoot?.querySelector("dialog .buttonsList")).remove(),o.showModal();const{withEncryption:a,skip:l,clearStorage:b,cancel:v}=await o.promptSignoutWithBackup();if(v){o.hideModal(),await new Promise(A=>setTimeout(A,250)),o.remove();return}l||await storageService.executeBackup(!!a,this._secret),b&&await storageService.clear(),o.hideModal(),await new Promise(A=>setTimeout(A,250)),o.remove()}await storageService.removeItem(KEYS.STORAGE_SECRET_KEY),await FirebaseAuthProvider.signOut()}async backupWallet(e){if(e){const n=await setupSigninDialogElement(document.body,{isLightMode:!0,enabledSigninMethods:[SigninMethod.Wallet],integrator:this._ops?.dialogUI?.integrator,logoUrl:this._ops?.dialogUI?.logoUrl});(n.shadowRoot?.querySelector("dialog .buttonsList")).remove(),n.showModal();const{withEncryption:c,skip:a}=await n.promptBackup();a||await storageService.executeBackup(!!c,this._secret),n.hideModal()}else throw new Error("Backup wallet without UI is not implemented yet")}onConnectStateChanged(e){return FirebaseAuthProvider.getOnAuthStateChanged(async n=>{if(n?.uid&&!n?.emailVerified&&!n?.isAnonymous){await this._displayVerifyEMailModal();return}if(this._uid=n?.uid,!this.userInfo&&n){try{await this._initWallets(n)}catch(c){await FirebaseAuthProvider.signOut(),c?.message}const o=await storageService.getItem(KEYS.STORAGE_SECRET_KEY);if(o){const c=await Crypto.decrypt(storageService.getUniqueID(),o);this._secret||(this._secret=c)}}n?.uid&&!n?.isAnonymous&&await set(n.uid,{email:n.email,emailVerified:n.emailVerified,uid:n.uid,providerId:n.providerId,providerData:n.providerData[0]?.providerId,metaData:n.metadata}),n||(this._secret=void 0,this._wallet=void 0,this._cloudBackupEnabled=void 0,this._uid=void 0),Logger$1.log("[INFO] onConnectStateChanged:",{user:n,userInfo:this.userInfo,provider:this.provider,_secret:this._secret}),e(n?this.userInfo:null)})}async switchNetwork(e){if(!this._uid)throw new Error("User not connected");if(this._wallet?.chainId===e)return this.userInfo;const n=CHAIN_AVAILABLES.find(c=>c.id===e),o=this._wallets.find(c=>c.chainId===e||CHAIN_AVAILABLES.find(a=>a.id===c.chainId)?.type===n?.type);return Logger$1.log("[INFO] switchNetwork:",{wallet:o,wallets:this._wallets}),o?(o.chainId!==e&&await o.switchNetwork(e),await this._setWallet(o),this.userInfo):(await this._initWallet({isAnonymous:!!this._wallet?.publicKey,uid:this._uid},e),this.userInfo)}async _initWallets(e){if(!e)throw new Error("User not connected. Please sign in to connect with wallet");if(this.userInfo?.address)return this.userInfo;const n=this._ops?.chainId||CHAIN_DEFAULT.id;if(e.isAnonymous){const o=await initWallet(e,this._secret,n);return this._wallets=[o],await this._setWallet(o),this._wallets}try{const o=[];return await initWallet(e,this._secret,n).then(c=>o.push(c)),await initWallet(e,this._secret,NETWORK.bitcoin).then(c=>o.push(c)),await initWallet(e,this._secret,NETWORK.solana).then(c=>o.push(c)),this._wallets=o,await this._setWallet(o.find(c=>c.chainId===n)),Logger$1.log("[INFO] _initWallets:",o),this._wallets}catch(o){throw storageService.clear(),localStorage.removeItem(KEYS.STORAGE_BACKUP_KEY),await FirebaseAuthProvider.signOut(),o}}async _initWallet(e,n){if(!e)throw new Error("User not connected. Please sign in to connect with wallet");const o=await initWallet(e,this._secret,n);if(!o)throw new Error("Failed to generate wallet");return this._wallets.push(o),await this._setWallet(o),this.userInfo}async _setWallet(e){this._wallet=e}async _displayVerifyEMailModal(){const e=await setupSigninDialogElement(document.body,{isLightMode:!0,enabledSigninMethods:[SigninMethod.Wallet],integrator:this._ops?.dialogUI?.integrator,logoUrl:this._ops?.dialogUI?.logoUrl});(e.shadowRoot?.querySelector("dialog .buttonsList")).remove();const o=document.createElement("div");o.innerHTML=`
			<p>
				Please verify your email before connecting with your wallet.
				<br />
				Click the link in the email we sent you to verify your email address.
			</p>
			<button id="button__ok">OK</button>
		`,e.shadowRoot?.querySelector("dialog #spinner")?.after(o),e.showModal(),(e.shadowRoot?.querySelector("#button__ok")).addEventListener("click",()=>{e.hideModal(),window.location.reload()})}}var name="firebase",version="10.10.0";registerVersion(name,version,"app");const SECRET="0x7b0a2020226170694b6579223a202241497a6153794333347a76675768485872445574493659433634507368726d5f6b656945506559222c0a20202261757468446f6d61696e223a202261646464656d6f2d62666439642e66697265626173656170702e636f6d222c0a202022646174616261736555524c223a202268747470733a2f2f61646464656d6f2d62666439642d64656661756c742d727464622e617369612d736f75746865617374312e666972656261736564617461626173652e617070222c0a20202270726f6a6563744964223a202261646464656d6f2d6266643964222c0a20202273746f726167654275636b6574223a202261646464656d6f2d62666439642e61707073706f742e636f6d222c0a2020226d6573736167696e6753656e6465724964223a202231303037313136353835343837222c0a2020226170704964223a2022313a313030373131363538353438373a7765623a37626364306536383136353033633838653662313761220a7d",FIREBASE_CONFIG=parseApiKey(SECRET.slice(2)),app$1=initializeApp(FIREBASE_CONFIG),auth=getAuth(app$1),firebaseWeb3Connect=new FirebaseWeb3Connect(auth,"APIKEY",{chainId:11155111}),isConnectWithLink=async()=>FirebaseWeb3Connect.isConnectWithLink(),connectWithLink=async()=>FirebaseWeb3Connect.connectWithLink();function setupAccountTab(t,e){t.innerHTML=`
    <h1>Connected</h1>
    <p id="address">${e?.userInfo?.address}</p>
    <button id="signout">signout</button><br/>

		<h2>Backup Wallet</h2>
		<button id="backup__btn">Download Backup file</button>
		<button id="store_backup__btn">Store Backup file</button>

		<h2>Switch Network</h2>
		<p>Current chain: <span id="currentChain">${e?.userInfo?.chainId} ${NETWORK[Number(e?.userInfo?.chainId)]}</span></p>
		<div id="switchNetwork">
			<button id="btc">btc</button>
			<button id="eth">eth</button>
			<button id="bsc">bsc</button>
			<button id="pol">pol</button>
			<button id="op">op</button>
			<button id="sol">sol</button><br/>
		</div>

		<h2>Sign and Verify</h2>
		<input type="text" id="content" placeholder="Enter content to sign" />
		<button id="sign">Sign message</button><br/>
		<input type="text" id="signature" placeholder="Enter signature" />
		<button id="verify">Verify signature</button>
		<pre id="verifyResult"></pre>

		<h2>Send Transaction</h2>
		<input type="text" id="to" placeholder="Enter receiver address" />
		<input type="number" id="value" placeholder="Enter value" />
		<button id="send">Send transaction</button>
		<pre></pre>
  `,t.querySelector("#sign")?.addEventListener("click",async()=>{const n=t.querySelector("#content"),o=await firebaseWeb3Connect?.wallet?.signMessage(n?.value);t.querySelector("#signature").value=`${o}`}),t.querySelector("#verify")?.addEventListener("click",async()=>{const n=t.querySelector("#content"),o=firebaseWeb3Connect.wallet?.verifySignature(`${n.value}`,t.querySelector("#signature").value);console.log("Signature is valid:",o),t.querySelector("pre#verifyResult").innerHTML=`Signature isValid: ${o}`}),t.querySelector("#signout")?.addEventListener("click",async()=>{await e.signout(!0)}),t.querySelector("#backup__btn")?.addEventListener("click",async()=>{await firebaseWeb3Connect.backupWallet(!0)}),t.querySelector("#store_backup__btn")?.addEventListener("click",async()=>{alert("Premium feature not implemented yet.")}),t.querySelector("#switchNetwork")?.addEventListener("click",async n=>{const o=n.target;switch(!0){case o.id==="btc":{await firebaseWeb3Connect.switchNetwork(NETWORK.bitcoin);break}case o.id==="eth":{await firebaseWeb3Connect.switchNetwork(NETWORK.mainnet);break}case o.id==="bsc":{await firebaseWeb3Connect.switchNetwork(NETWORK.binancesmartchain);break}case o.id==="pol":{await firebaseWeb3Connect.switchNetwork(NETWORK.polygon);break}case o.id==="op":{await firebaseWeb3Connect.switchNetwork(NETWORK.optimism);break}case o.id==="sol":{await firebaseWeb3Connect.switchNetwork(NETWORK.solana);break}}const c=t.querySelector("#currentChain"),a=firebaseWeb3Connect.wallet?.chainId;c.innerText=`${a} ${NETWORK[Number(a)]}`;const l=t.querySelector("#address");l.innerText=`${firebaseWeb3Connect.wallet?.address}`}),t.querySelector("#send")?.addEventListener("click",async()=>{const n=t.querySelector("#to"),o=t.querySelector("#value"),c={to:n.value,value:o.value};if(console.log("tx:",c),!confirm(`Send amount of ${o.value} to ${n.value}. Are you sure?`))return;const l=await firebaseWeb3Connect.wallet?.sendTransaction(c);console.log("response:",l)})}function setupConnectTab(t){t.innerHTML=`
    <button id="connectUI">Connect with UI</button>
  `,t.querySelector("#connectUI")?.addEventListener("click",async()=>{await firebaseWeb3Connect.connectWithUI(!0).then(e=>{console.log("connected with UI: ",e)}).catch(e=>{console.error("error from component app; ",e)})})}var define_import_meta_env_default={VITE_FIREBASE_CONFIG:"0x7b0a2020226170694b6579223a202241497a6153794333347a76675768485872445574493659433634507368726d5f6b656945506559222c0a20202261757468446f6d61696e223a202261646464656d6f2d62666439642e66697265626173656170702e636f6d222c0a202022646174616261736555524c223a202268747470733a2f2f61646464656d6f2d62666439642d64656661756c742d727464622e617369612d736f75746865617374312e666972656261736564617461626173652e617070222c0a20202270726f6a6563744964223a202261646464656d6f2d6266643964222c0a20202273746f726167654275636b6574223a202261646464656d6f2d62666439642e61707073706f742e636f6d222c0a2020226d6573736167696e6753656e6465724964223a202231303037313136353835343837222c0a2020226170704964223a2022313a313030373131363538353438373a7765623a37626364306536383136353033633838653662313761220a7d",BASE_URL:"/firebase-web3connect/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};console.log("[INFO] App demo initialization...",define_import_meta_env_default);const app=document.querySelector("#app");if(!app)throw new Error("no root app provided");const isConnecting=await isConnectWithLink();if(isConnecting)try{await connectWithLink(),app.innerHTML=`
      <h1>Sign in with email link</h1>
      <p>
      Thank you for signing in with email link. You can close this tab now and go back to the app.
      </p>
    `}catch(t){app.innerHTML=`
      <h1>Error</h1>
      <p>
      ${t.message}
      </p>
    `}else firebaseWeb3Connect.onConnectStateChanged(async t=>{t?setupAccountTab(app,firebaseWeb3Connect):setupConnectTab(app)})})();